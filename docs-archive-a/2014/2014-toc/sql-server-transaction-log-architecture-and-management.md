---
title: Архитектура журнала транзакций SQL Server 2014 и управление ими | Документация Майкрософт
ms.custom: ''
ms.date: 06/14/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: ''
ms.topic: conceptual
ms.assetid: 4d1a4f97-3fe4-44af-9d4f-f884a6eaa457
author: rothja
ms.author: jroth
ms.openlocfilehash: 8d32950d94bff22d6549c468e8fe8db3f30fd09a
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87656068"
---
# <a name="sql-server-2014-transaction-log-architecture-and-management"></a><span data-ttu-id="9cb33-102">Архитектура журнала транзакций SQL Server 2014 и управление</span><span class="sxs-lookup"><span data-stu-id="9cb33-102">SQL Server 2014 Transaction Log Architecture and Management</span></span>

<span data-ttu-id="9cb33-103">**Применимо к:** SQL Server (начиная с 2008)</span><span class="sxs-lookup"><span data-stu-id="9cb33-103">**Applies to:** SQL Server (starting with 2008)</span></span>

  <span data-ttu-id="9cb33-104">Каждая база данных [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] имеет журнал транзакций, в котором фиксируются все изменения данных, произведенные в каждой из транзакций.</span><span class="sxs-lookup"><span data-stu-id="9cb33-104">Every [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] database has a transaction log that records all transactions and the database modifications that are made by each transaction.</span></span> <span data-ttu-id="9cb33-105">Журнал транзакций является критическим компонентом базы данных и в случае системного сбоя может потребоваться для приведения базы данных в согласованное состояние.</span><span class="sxs-lookup"><span data-stu-id="9cb33-105">The transaction log is a critical component of the database and, if there is a system failure, the transaction log might be required to bring your database back to a consistent state.</span></span> <span data-ttu-id="9cb33-106">В этом руководстве приводятся сведения о физической и логической архитектуре журнала транзакций.</span><span class="sxs-lookup"><span data-stu-id="9cb33-106">This guide provides information about the physical and logical architecture of the transaction log.</span></span> <span data-ttu-id="9cb33-107">Понимание архитектуры может помочь в повышении эффективности работы с журналами транзакций.</span><span class="sxs-lookup"><span data-stu-id="9cb33-107">Understanding the architecture can improve your effectiveness in managing transaction logs.</span></span>  

  
##  <a name="transaction-log-logical-architecture"></a><a name="Logical_Arch"></a><span data-ttu-id="9cb33-108">Логическая архитектура журнала транзакций</span><span class="sxs-lookup"><span data-stu-id="9cb33-108">Transaction Log Logical Architecture</span></span>  

 <span data-ttu-id="9cb33-109">Логически журнал транзакций [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] работает так, как если бы он являлся последовательностью записей в журнале.</span><span class="sxs-lookup"><span data-stu-id="9cb33-109">The [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] transaction log operates logically as if the transaction log is a string of log records.</span></span> <span data-ttu-id="9cb33-110">Каждая запись журнала идентифицируется регистрационным номером транзакции (номер LSN).</span><span class="sxs-lookup"><span data-stu-id="9cb33-110">Each log record is identified by a log sequence number (LSN).</span></span> <span data-ttu-id="9cb33-111">Каждая новая запись добавляется в логический конец журнала с номером LSN, который больше номера LSN предыдущей записи.</span><span class="sxs-lookup"><span data-stu-id="9cb33-111">Each new log record is written to the logical end of the log with an LSN that is higher than the LSN of the record before it.</span></span> <span data-ttu-id="9cb33-112">Записи журнала хранятся в той последовательности, в которой они были созданы.</span><span class="sxs-lookup"><span data-stu-id="9cb33-112">Log records are stored in a serial sequence as they are created.</span></span> <span data-ttu-id="9cb33-113">Каждая запись журнала содержит идентификатор транзакции, к которой она относится.</span><span class="sxs-lookup"><span data-stu-id="9cb33-113">Each log record contains the ID of the transaction that it belongs to.</span></span> <span data-ttu-id="9cb33-114">Все записи журнала, связанные с определенной транзакцией, с помощью обратных указателей связаны в цепочку, которая предназначена для ускорения отката транзакции.</span><span class="sxs-lookup"><span data-stu-id="9cb33-114">For each transaction, all log records associated with the transaction are individually linked in a chain using backward pointers that speed the rollback of the transaction.</span></span>  
  
 <span data-ttu-id="9cb33-115">Записи журнала для изменения данных содержат либо выполненную логическую операцию, либо исходный и результирующий образ измененных данных.</span><span class="sxs-lookup"><span data-stu-id="9cb33-115">Log records for data modifications record either the logical operation performed or they record the before and after images of the modified data.</span></span> <span data-ttu-id="9cb33-116">Исходный образ записи — это копия данных до выполнения операции, а результирующий образ — копия данных после ее выполнения.</span><span class="sxs-lookup"><span data-stu-id="9cb33-116">The before image is a copy of the data before the operation is performed; the after image is a copy of the data after the operation has been performed.</span></span>  
  
 <span data-ttu-id="9cb33-117">Действия, которые необходимо выполнить для восстановления операции, зависят от типа журнальной записи:</span><span class="sxs-lookup"><span data-stu-id="9cb33-117">The steps to recover an operation depend on the type of log record:</span></span>  
  
-   <span data-ttu-id="9cb33-118">Зарегистрирована логическая операция.</span><span class="sxs-lookup"><span data-stu-id="9cb33-118">Logical operation logged</span></span>  
  
    -   <span data-ttu-id="9cb33-119">Для наката логической операции выполняется эта операция.</span><span class="sxs-lookup"><span data-stu-id="9cb33-119">To roll the logical operation forward, the operation is performed again.</span></span>  
  
    -   <span data-ttu-id="9cb33-120">Для отката логической операции выполняется логическая операция, обратная зарегистрированной.</span><span class="sxs-lookup"><span data-stu-id="9cb33-120">To roll the logical operation back, the reverse logical operation is performed.</span></span>  
  
-   <span data-ttu-id="9cb33-121">Зарегистрированы исходный и результирующий образы записи.</span><span class="sxs-lookup"><span data-stu-id="9cb33-121">Before and after image logged</span></span>  
  
    -   <span data-ttu-id="9cb33-122">Для наката операции применяется результирующий образ.</span><span class="sxs-lookup"><span data-stu-id="9cb33-122">To roll the operation forward, the after image is applied.</span></span>  
  
    -   <span data-ttu-id="9cb33-123">Для отката операции применяется исходный образ.</span><span class="sxs-lookup"><span data-stu-id="9cb33-123">To roll the operation back, the before image is applied.</span></span>  
  
 <span data-ttu-id="9cb33-124">В журнал транзакций записываются различные типы операций,</span><span class="sxs-lookup"><span data-stu-id="9cb33-124">Many types of operations are recorded in the transaction log.</span></span> <span data-ttu-id="9cb33-125">например:</span><span class="sxs-lookup"><span data-stu-id="9cb33-125">These operations include:</span></span>  
  
-   <span data-ttu-id="9cb33-126">начало и конец каждой транзакции;</span><span class="sxs-lookup"><span data-stu-id="9cb33-126">The start and end of each transaction.</span></span>  
  
-   <span data-ttu-id="9cb33-127">любые изменения данных (вставка, обновление или удаление),</span><span class="sxs-lookup"><span data-stu-id="9cb33-127">Every data modification (insert, update, or delete).</span></span> <span data-ttu-id="9cb33-128">включая изменения в любой таблице (в том числе и в системных таблицах), производимые системными хранимыми процедурами или инструкциями языка DDL;</span><span class="sxs-lookup"><span data-stu-id="9cb33-128">This includes changes by system stored procedures or data definition language (DDL) statements to any table, including system tables.</span></span>  
  
-   <span data-ttu-id="9cb33-129">любое выделение и освобождение страниц и экстентов;</span><span class="sxs-lookup"><span data-stu-id="9cb33-129">Every extent and page allocation or deallocation.</span></span>  
  
-   <span data-ttu-id="9cb33-130">создание и удаление таблиц и индексов.</span><span class="sxs-lookup"><span data-stu-id="9cb33-130">Creating or dropping a table or index.</span></span>  
  
 <span data-ttu-id="9cb33-131">Кроме того, регистрируются операции отката.</span><span class="sxs-lookup"><span data-stu-id="9cb33-131">Rollback operations are also logged.</span></span> <span data-ttu-id="9cb33-132">Каждая транзакция резервирует в журнале транзакций место, чтобы при выполнении инструкции отката или возникновения ошибки в журнале было достаточно места для регистрации отката.</span><span class="sxs-lookup"><span data-stu-id="9cb33-132">Each transaction reserves space on the transaction log to make sure that enough log space exists to support a rollback that is caused by either an explicit rollback statement or if an error is encountered.</span></span> <span data-ttu-id="9cb33-133">Объем резервируемого пространства зависит от выполняемых в транзакции операций, но обычно он равен объему, необходимому для регистрации каждой из операций.</span><span class="sxs-lookup"><span data-stu-id="9cb33-133">The amount of space reserved depends on the operations performed in the transaction, but generally it is equal to the amount of space used to log each operation.</span></span> <span data-ttu-id="9cb33-134">Все это пространство после завершения транзакции освобождается.</span><span class="sxs-lookup"><span data-stu-id="9cb33-134">This reserved space is freed when the transaction is completed.</span></span>  
  
 <span data-ttu-id="9cb33-135"> Часть файла журнала от первой записи, требуемой для полного отката базы данных, до последней зарегистрированной записи называется активной частью журнала или *активным журналом*.</span><span class="sxs-lookup"><span data-stu-id="9cb33-135">The section of the log file from the first log record that must be present for a successful database-wide rollback to the last-written log record is called the active part of the log, or the *active log*.</span></span> <span data-ttu-id="9cb33-136">Этот раздел журнала необходим для выполнения полного восстановления базы данных.</span><span class="sxs-lookup"><span data-stu-id="9cb33-136">This is the section of the log required to a full recovery of the database.</span></span> <span data-ttu-id="9cb33-137">Ни одна часть активного журнала не может быть усечена.</span><span class="sxs-lookup"><span data-stu-id="9cb33-137">No part of the active log can ever be truncated.</span></span> <span data-ttu-id="9cb33-138">Регистрационный номер транзакции в журнале (LSN) этой первой записи журнала называется минимальным номером LSN восстановления (*MinLSN*).</span><span class="sxs-lookup"><span data-stu-id="9cb33-138">The log sequence number (LSN) of this first log record is known as the minimum recovery LSN (*MinLSN*).</span></span>  
  
##  <a name="transaction-log-physical-architecture"></a><a name="physical_arch"></a> <span data-ttu-id="9cb33-139">Физическая архитектура журнала транзакций</span><span class="sxs-lookup"><span data-stu-id="9cb33-139">Transaction Log Physical Architecture</span></span>  

 <span data-ttu-id="9cb33-140">Журнал транзакций в базе данных сопоставляет один или несколько физических файлов.</span><span class="sxs-lookup"><span data-stu-id="9cb33-140">The transaction log in a database maps over one or more physical files.</span></span> <span data-ttu-id="9cb33-141">По сути, файл журнала представляет собой строку записей журнала.</span><span class="sxs-lookup"><span data-stu-id="9cb33-141">Conceptually, the log file is a string of log records.</span></span> <span data-ttu-id="9cb33-142">Физически последовательность записей журнала эффективно хранится в наборе физических файлов, которые образуют журнал транзакций.</span><span class="sxs-lookup"><span data-stu-id="9cb33-142">Physically, the sequence of log records is stored efficiently in the set of physical files that implement the transaction log.</span></span> <span data-ttu-id="9cb33-143">Для каждой базы данных должен существовать хотя бы один файл журнала.</span><span class="sxs-lookup"><span data-stu-id="9cb33-143">There must be at least one log file for each database.</span></span>  
  
 <span data-ttu-id="9cb33-144">Компонент [!INCLUDE[ssDEnoversion](../includes/ssdenoversion-md.md)] делит каждый физический файл журнала на несколько виртуальных файлов журнала.</span><span class="sxs-lookup"><span data-stu-id="9cb33-144">The [!INCLUDE[ssDEnoversion](../includes/ssdenoversion-md.md)] divides each physical log file internally into a number of virtual log files.</span></span> <span data-ttu-id="9cb33-145">Виртуальные файлы журнала не имеют фиксированных размеров. Не существует также и определенного числа виртуальных файлов журнала, приходящихся на один физический файл журнала.</span><span class="sxs-lookup"><span data-stu-id="9cb33-145">Virtual log files have no fixed size, and there is no fixed number of virtual log files for a physical log file.</span></span> <span data-ttu-id="9cb33-146">Компонент [!INCLUDE[ssDE](../includes/ssde-md.md)] динамически определяет размер виртуальных файлов журнала при создании или расширении файлов журнала.</span><span class="sxs-lookup"><span data-stu-id="9cb33-146">The [!INCLUDE[ssDE](../includes/ssde-md.md)] chooses the size of the virtual log files dynamically while it is creating or extending log files.</span></span> <span data-ttu-id="9cb33-147">Компонент [!INCLUDE[ssDE](../includes/ssde-md.md)] стремится обслуживать небольшое число виртуальных файлов.</span><span class="sxs-lookup"><span data-stu-id="9cb33-147">The [!INCLUDE[ssDE](../includes/ssde-md.md)] tries to maintain a small number of virtual files.</span></span> <span data-ttu-id="9cb33-148">После расширения файла журнала размер виртуальных файлов определяется как сумма размера существующего журнала и размера нового приращения файла.</span><span class="sxs-lookup"><span data-stu-id="9cb33-148">The size of the virtual files after a log file has been extended is the sum of the size of the existing log and the size of the new file increment.</span></span> <span data-ttu-id="9cb33-149">Администраторы не могут настраивать или устанавливать размеры и число виртуальных файлов журнала.</span><span class="sxs-lookup"><span data-stu-id="9cb33-149">The size or number of virtual log files cannot be configured or set by administrators.</span></span>  
  
 <span data-ttu-id="9cb33-150">Виртуальные файлы журнала влияют на производительность системы лишь в том случае, если физические файлы журнала определяются малыми значениями *size* и *growth_increment* .</span><span class="sxs-lookup"><span data-stu-id="9cb33-150">The only time virtual log files affect system performance is if the physical log files are defined by small *size* and *growth_increment* values.</span></span> <span data-ttu-id="9cb33-151">Значение *size* является первоначальным размером файла журнала, а значение *growth_increment* — это объем пространства, добавляемого в файл каждый раз, когда это необходимо.</span><span class="sxs-lookup"><span data-stu-id="9cb33-151">The *size* value is the initial size for the log file and the *growth_increment* value is the amount of space added to the file every time new space is required.</span></span> <span data-ttu-id="9cb33-152">Если файлы журнала в результате большого числа малых приращений будут разрастаться до крупных размеров, они будут иметь множество виртуальных файлов журнала.</span><span class="sxs-lookup"><span data-stu-id="9cb33-152">If the log files grow to a large size because of many small increments, they will have many virtual log files.</span></span> <span data-ttu-id="9cb33-153">В итоге может увеличиться время запуска базы данных, а также снизиться скорость операций резервного копирования и восстановления.</span><span class="sxs-lookup"><span data-stu-id="9cb33-153">This can slow down database startup and also log backup and restore operations.</span></span> <span data-ttu-id="9cb33-154">Рекомендуется назначать файлам журнала значение *size*, которое было бы максимально близким к окончательному требуемому размеру, а также задавать относительно большое значение *growth_increment*.</span><span class="sxs-lookup"><span data-stu-id="9cb33-154">We recommend that you assign log files a *size* value close to the final size required, and also have a relatively large *growth_increment* value.</span></span> <span data-ttu-id="9cb33-155">Дополнительные сведения об этих параметрах см. в статье [Параметры инструкции ALTER DATABASE для файлов и файловых групп &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-database-transact-sql-file-and-filegroup-options).</span><span class="sxs-lookup"><span data-stu-id="9cb33-155">For more information about these parameters, see [ALTER DATABASE File and Filegroup Options &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-database-transact-sql-file-and-filegroup-options).</span></span>  
  
 <span data-ttu-id="9cb33-156">Журнал транзакций является оборачиваемым файлом.</span><span class="sxs-lookup"><span data-stu-id="9cb33-156">The transaction log is a wrap-around file.</span></span> <span data-ttu-id="9cb33-157">Рассмотрим пример. Пусть база данных имеет один физический файл журнала, разделенный на четыре виртуальных файла журнала.</span><span class="sxs-lookup"><span data-stu-id="9cb33-157">For example, consider a database with one physical log file divided into four virtual log files.</span></span> <span data-ttu-id="9cb33-158">При создании базы данных логический файл журнала начинается в начале физического файла журнала.</span><span class="sxs-lookup"><span data-stu-id="9cb33-158">When the database is created, the logical log file begins at the start of the physical log file.</span></span> <span data-ttu-id="9cb33-159">Новые записи журнала добавляются в конце логического журнала и приближаются к концу физического файла журнала.</span><span class="sxs-lookup"><span data-stu-id="9cb33-159">New log records are added at the end of the logical log and expand toward the end of the physical log.</span></span> <span data-ttu-id="9cb33-160">Усечение журнала освобождает любые виртуальные журналы, все записи которых находятся перед минимальным регистрационным номером восстановления в журнале транзакций (MinLSN).</span><span class="sxs-lookup"><span data-stu-id="9cb33-160">Log truncation frees any virtual logs whose records all appear in front of the minimum recovery log sequence number (MinLSN).</span></span> <span data-ttu-id="9cb33-161">*MinLSN* — это регистрационный номер транзакции самой старой записи в журнале, которая необходима для успешного отката на уровне всей базы данных.</span><span class="sxs-lookup"><span data-stu-id="9cb33-161">The *MinLSN* is the log sequence number of the oldest log record that is required for a successful database-wide rollback.</span></span> <span data-ttu-id="9cb33-162">Журнал транзакций рассматриваемой в данном примере базы данных будет выглядеть примерно так же, как на следующей иллюстрации.</span><span class="sxs-lookup"><span data-stu-id="9cb33-162">The transaction log in the example database would look similar to the one in the following illustration.</span></span>  
  
 <span data-ttu-id="9cb33-163">![Файл журнала, разделенный на четыре виртуальных файла журнала](media/tranlog3.gif "Файл журнала, разделенный на четыре виртуальных файла журнала")</span><span class="sxs-lookup"><span data-stu-id="9cb33-163">![Log file divided into four virtual log files](media/tranlog3.gif "Log file divided into four virtual log files")</span></span>  
  
 <span data-ttu-id="9cb33-164">Когда конец логического журнала достигнет конца физического файла журнала, новые записи журнала будут размещаться в начале физического файла журнала.</span><span class="sxs-lookup"><span data-stu-id="9cb33-164">When the end of the logical log reaches the end of the physical log file, the new log records wrap around to the start of the physical log file.</span></span>  
  
 <span data-ttu-id="9cb33-165">![Записи журнала возвращаются к началу файла журнала](media/tranlog4.gif "Записи журнала возвращаются к началу файла журнала")</span><span class="sxs-lookup"><span data-stu-id="9cb33-165">![Log records wrap around to start of log file](media/tranlog4.gif "Log records wrap around to start of log file")</span></span>  
  
 <span data-ttu-id="9cb33-166">Этот цикл повторяется бесконечно, пока конец логического журнала не совмещается с началом этого логического журнала.</span><span class="sxs-lookup"><span data-stu-id="9cb33-166">This cycle repeats endlessly, as long as the end of the logical log never reaches the beginning of the logical log.</span></span> <span data-ttu-id="9cb33-167">Если старые записи журнала усекаются достаточно часто, так что при этом всегда остается место для новых записей журнала, созданных с новой контрольной точки, журнал постоянно остается незаполненным.</span><span class="sxs-lookup"><span data-stu-id="9cb33-167">If the old log records are truncated frequently enough to always leave sufficient room for all the new log records created through the next checkpoint, the log never fills.</span></span> <span data-ttu-id="9cb33-168">Однако, если конец логического журнала совмещается с началом этого логического журнала, происходит одно из двух событий, перечисленных ниже.</span><span class="sxs-lookup"><span data-stu-id="9cb33-168">However, if the end of the logical log does reach the start of the logical log, one of two things occurs:</span></span>  
  
-   <span data-ttu-id="9cb33-169">Если для данного журнала применена настройка FILEGROWTH и на диске имеется свободное место, файл расширяется на величину, указанную в параметре *growth_increment*, и новые записи журнала фиксируются в рамках этого расширения.</span><span class="sxs-lookup"><span data-stu-id="9cb33-169">If the FILEGROWTH setting is enabled for the log and space is available on the disk, the file is extended by the amount specified in the *growth_increment* parameter and the new log records are added to the extension.</span></span> <span data-ttu-id="9cb33-170">Дополнительные сведения о настройке FILEGROWTH см. в статье [Параметры инструкции ALTER DATABASE для файлов и файловых групп &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-database-transact-sql-file-and-filegroup-options).</span><span class="sxs-lookup"><span data-stu-id="9cb33-170">For more information about the FILEGROWTH setting, see [ALTER DATABASE File and Filegroup Options &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-database-transact-sql-file-and-filegroup-options).</span></span>  
  
-   <span data-ttu-id="9cb33-171">Если настройка FILEGROWTH не включена или диск, на котором размещается файл журнала, имеет меньше свободного места, чем указано в *growth_increment*, создается ошибка 9002.</span><span class="sxs-lookup"><span data-stu-id="9cb33-171">If the FILEGROWTH setting is not enabled, or the disk that is holding the log file has less free space than the amount specified in *growth_increment*, an 9002 error is generated.</span></span>  
  
 <span data-ttu-id="9cb33-172">Если в журнале содержится несколько физических файлов журнала, логический журнал будет продвигаться по всем физическим файлам журнала до тех пор, пока он не вернется на начало первого физического файла журнала.</span><span class="sxs-lookup"><span data-stu-id="9cb33-172">If the log contains multiple physical log files, the logical log will move through all the physical log files before it wraps back to the start of the first physical log file.</span></span>  
  
### <a name="log-truncation"></a><span data-ttu-id="9cb33-173">Усечение журнала</span><span class="sxs-lookup"><span data-stu-id="9cb33-173">Log Truncation</span></span>  

 <span data-ttu-id="9cb33-174">Усечение журнала необходимо для предотвращения переполнения журнала.</span><span class="sxs-lookup"><span data-stu-id="9cb33-174">Log truncation is essential to keep the log from filling.</span></span> <span data-ttu-id="9cb33-175">При усечении журнала удаляются неактивные виртуальные файлы журнала из логического журнала транзакций базы данных [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] , что приводит к освобождению пространства в логическом журнале для повторного использования физическим журналом транзакций.</span><span class="sxs-lookup"><span data-stu-id="9cb33-175">Log truncation deletes inactive virtual log files from the logical transaction log of a [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] database, freeing space in the logical log for reuse by the physical transaction log.</span></span> <span data-ttu-id="9cb33-176">Если усечение журнала транзакций не выполняется, со временем он заполняет все доступное место на диске, отведенное для файлов физического журнала.</span><span class="sxs-lookup"><span data-stu-id="9cb33-176">If a transaction log were never truncated, it would eventually fill all the disk space that is allocated to its physical log files.</span></span> <span data-ttu-id="9cb33-177">Однако перед усечением журнала должна быть выполнена операция создания контрольной точки.</span><span class="sxs-lookup"><span data-stu-id="9cb33-177">However, before the log can be truncated, a checkpoint operation must occur.</span></span> <span data-ttu-id="9cb33-178">Новая контрольная точка записывает текущие страницы, измененные в памяти (известные как измененные незафиксированные страницы), вместе со сведениями журнала транзакций из памяти на диск.</span><span class="sxs-lookup"><span data-stu-id="9cb33-178">A checkpoint writes the current in-memory modified pages (known as dirty pages) and transaction log information from memory to disk.</span></span> <span data-ttu-id="9cb33-179">При создании контрольной точки неактивная часть журнала транзакций помечается как неиспользуемая,</span><span class="sxs-lookup"><span data-stu-id="9cb33-179">When the checkpoint is performed, the inactive portion of the transaction log is marked as reusable.</span></span> <span data-ttu-id="9cb33-180">после чего ее можно освободить путем усечения журнала.</span><span class="sxs-lookup"><span data-stu-id="9cb33-180">Thereafter, the inactive portion can be freed by log truncation.</span></span> <span data-ttu-id="9cb33-181">Дополнительные сведения о контрольных точках см. в статье [Контрольные точки базы данных &#40;SQL Server&#41;](../relational-databases/logs/database-checkpoints-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="9cb33-181">For more information about checkpoints, see [Database Checkpoints &#40;SQL Server&#41;](../relational-databases/logs/database-checkpoints-sql-server.md).</span></span>  
  
 <span data-ttu-id="9cb33-182">На следующем рисунке показан журнал транзакций до усечения и после.</span><span class="sxs-lookup"><span data-stu-id="9cb33-182">The following illustrations show a transaction log before and after truncation.</span></span> <span data-ttu-id="9cb33-183">На первом рисунке показан журнал транзакций, который никогда не усекался.</span><span class="sxs-lookup"><span data-stu-id="9cb33-183">The first illustration shows a transaction log that has never been truncated.</span></span> <span data-ttu-id="9cb33-184">В настоящий момент логический журнал состоит из четырех виртуальных файлов.</span><span class="sxs-lookup"><span data-stu-id="9cb33-184">Currently, four virtual log files are in use by the logical log.</span></span> <span data-ttu-id="9cb33-185">Логический журнал начинается с первого файла виртуального журнала и заканчивается виртуальным файлом журнала 4.</span><span class="sxs-lookup"><span data-stu-id="9cb33-185">The logical log starts at the front of the first virtual log file and ends at virtual log 4.</span></span> <span data-ttu-id="9cb33-186">Запись MinLSN находится в виртуальном журнале 3.</span><span class="sxs-lookup"><span data-stu-id="9cb33-186">The MinLSN record is in virtual log 3.</span></span> <span data-ttu-id="9cb33-187">Виртуальные журналы 1 и 2 содержат только неактивные записи журнала.</span><span class="sxs-lookup"><span data-stu-id="9cb33-187">Virtual log 1 and virtual log 2 contain only inactive log records.</span></span> <span data-ttu-id="9cb33-188">Эти записи можно усечь.</span><span class="sxs-lookup"><span data-stu-id="9cb33-188">These records can be truncated.</span></span> <span data-ttu-id="9cb33-189">Виртуальный журнал 5 пока не используется и не является частью текущего логического журнала.</span><span class="sxs-lookup"><span data-stu-id="9cb33-189">Virtual log 5 is still unused and is not part of the current logical log.</span></span>  
  
 <span data-ttu-id="9cb33-190">![Журнал транзакций с четырьмя виртуальными журналами](media/tranlog2.gif "Журнал транзакций с четырьмя виртуальными журналами")</span><span class="sxs-lookup"><span data-stu-id="9cb33-190">![Transaction log with four virtual logs](media/tranlog2.gif "Transaction log with four virtual logs")</span></span>  
  
 <span data-ttu-id="9cb33-191">На втором рисунке показан журнал после усечения.</span><span class="sxs-lookup"><span data-stu-id="9cb33-191">The second illustration shows how the log appears after being truncated.</span></span> <span data-ttu-id="9cb33-192">Виртуальные журналы 1 и 2 усечены и могут использоваться повторно.</span><span class="sxs-lookup"><span data-stu-id="9cb33-192">Virtual log 1 and virtual log 2 have been freed for reuse.</span></span> <span data-ttu-id="9cb33-193">Логический журнал теперь начинается с виртуального журнала 3.</span><span class="sxs-lookup"><span data-stu-id="9cb33-193">The logical log now starts at the beginning of virtual log 3.</span></span> <span data-ttu-id="9cb33-194">Виртуальный журнал 5 пока не используется и не является частью текущего логического журнала.</span><span class="sxs-lookup"><span data-stu-id="9cb33-194">Virtual log 5 is still unused, and it is not part of the current logical log.</span></span>  
  
 <span data-ttu-id="9cb33-195">![Файл журнала, разделенный на четыре виртуальных файла журнала](media/tranlog3.gif "Файл журнала, разделенный на четыре виртуальных файла журнала")</span><span class="sxs-lookup"><span data-stu-id="9cb33-195">![Log file divided into four virtual log files](media/tranlog3.gif "Log file divided into four virtual log files")</span></span>  
  
 <span data-ttu-id="9cb33-196">За исключением тех случаев, когда усечение журнала по каким-то причинам задерживается, оно выполняется автоматически после наступления следующих событий.</span><span class="sxs-lookup"><span data-stu-id="9cb33-196">Log truncation occurs automatically after the following events, except when delayed for some reason:</span></span>  
  
-   <span data-ttu-id="9cb33-197">В простой модели восстановления — после достижения контрольной точки.</span><span class="sxs-lookup"><span data-stu-id="9cb33-197">Under the simple recovery model, after a checkpoint.</span></span>  
  
-   <span data-ttu-id="9cb33-198">В модели полного восстановления или в модели восстановления с неполным протоколированием — после создания резервной копии журналов, при условии, что со времени предыдущей операции резервного копирования была достигнута контрольная точка.</span><span class="sxs-lookup"><span data-stu-id="9cb33-198">Under the full recovery model or bulk-logged recovery model, after a log backup, if a checkpoint has occurred since the previous backup.</span></span>  
  
 <span data-ttu-id="9cb33-199">Усечение журнала может быть задержано из-за множества факторов.</span><span class="sxs-lookup"><span data-stu-id="9cb33-199">Log truncation can be delayed by a variety of factors.</span></span> <span data-ttu-id="9cb33-200">В случае большой задержки усечения журнала возможно заполнение журнала транзакций.</span><span class="sxs-lookup"><span data-stu-id="9cb33-200">In the event of a long delay in log truncation, the transaction log can fill up.</span></span> <span data-ttu-id="9cb33-201">Дополнительные сведения см. в статьях [факторы, которые могут вызвать задержку усечения журнала](../relational-databases/logs/the-transaction-log-sql-server.md#FactorsThatDelayTruncation) и [Устранение неполадок при переполнении журнала транзакций &#40;SQL Server ошибка 9002&#41;](../relational-databases/logs/troubleshoot-a-full-transaction-log-sql-server-error-9002.md).</span><span class="sxs-lookup"><span data-stu-id="9cb33-201">For information, see [Factors That Can Delay Log Truncation](../relational-databases/logs/the-transaction-log-sql-server.md#FactorsThatDelayTruncation) and [Troubleshoot a Full Transaction Log &#40;SQL Server Error 9002&#41;](../relational-databases/logs/troubleshoot-a-full-transaction-log-sql-server-error-9002.md).</span></span>  
  
##  <a name="write-ahead-transaction-log"></a><a name="WAL"></a><span data-ttu-id="9cb33-202">Журнал транзакций с упреждающей записью</span><span class="sxs-lookup"><span data-stu-id="9cb33-202">Write-Ahead Transaction Log</span></span>  

 <span data-ttu-id="9cb33-203">В этом разделе описана роль, которую журнал транзакций с упреждающей записью играет в записи изменений данных на диск.</span><span class="sxs-lookup"><span data-stu-id="9cb33-203">This section describes the role of the write-ahead transaction log in recording data modifications to disk.</span></span> [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] <span data-ttu-id="9cb33-204">Использует журнал с упреждающей записью (WAL), который гарантирует, что до занесения на диск связанной с изменением записи журнала никакие изменения в данных записаны не будут.</span><span class="sxs-lookup"><span data-stu-id="9cb33-204">uses a write-ahead log (WAL), which guarantees that no data modifications are written to disk before the associated log record is written to disk.</span></span> <span data-ttu-id="9cb33-205">Таким образом обеспечиваются свойства ACID для транзакции.</span><span class="sxs-lookup"><span data-stu-id="9cb33-205">This maintains the ACID properties for a transaction.</span></span>  
  
 <span data-ttu-id="9cb33-206">Для понимания принципов работы упреждающего ведения журнала важно знать, как измененные данные записываются на диск.</span><span class="sxs-lookup"><span data-stu-id="9cb33-206">To understand how the write-ahead log works, it is important for you to know how modified data is written to disk.</span></span> [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] <span data-ttu-id="9cb33-207">Имеет буферный кэш, в который считываются страницы данных, когда требуется получить данные.</span><span class="sxs-lookup"><span data-stu-id="9cb33-207">maintains a buffer cache into which it reads data pages when data must be retrieved.</span></span> <span data-ttu-id="9cb33-208">При изменении страницы в буферном кэше она не немедленно записывается обратно на диск; Вместо этого страница помечается как « *грязный*».</span><span class="sxs-lookup"><span data-stu-id="9cb33-208">When a page is modified in the buffer cache, it is not immediately written back to disk; instead, the page is marked as *dirty*.</span></span> <span data-ttu-id="9cb33-209">До момента ее физической записи на диск к странице могла быть применена одна или несколько операций логической записи.</span><span class="sxs-lookup"><span data-stu-id="9cb33-209">A data page can have more than one logical write made before it is physically written to disk.</span></span> <span data-ttu-id="9cb33-210">При каждой логической операции записи в кэш журнала, который записывает изменения, добавляется запись журнала транзакций.</span><span class="sxs-lookup"><span data-stu-id="9cb33-210">For each logical write, a transaction log record is inserted in the log cache that records the modification.</span></span> <span data-ttu-id="9cb33-211">Записи журнала должны быть перенесены на диск до того, как соответствующая «грязная» страница будет удалена из буферного кэша и записана на диск.</span><span class="sxs-lookup"><span data-stu-id="9cb33-211">The log records must be written to disk before the associated dirty page is removed from the buffer cache and written to disk.</span></span> <span data-ttu-id="9cb33-212">Заключается в том, что процесс контрольных точек производит периодический просмотр буферного кэша на наличие буферов со страницами определенной базы данных и запись всех «грязных» страниц на диск.</span><span class="sxs-lookup"><span data-stu-id="9cb33-212">The checkpoint process periodically scans the buffer cache for buffers with pages from a specified database and writes all dirty pages to disk.</span></span> <span data-ttu-id="9cb33-213">Контрольные точки экономят время во время последующего восстановления при помощи создания точки, в которой все «грязные» страницы гарантированно записываются на диск.</span><span class="sxs-lookup"><span data-stu-id="9cb33-213">Checkpoints save time during a later recovery by creating a point at which all dirty pages are guaranteed to have been written to disk.</span></span>  
  
 <span data-ttu-id="9cb33-214">Запись измененной страницы данных из буферного кэша на диск называется сбросом страницы на диск.</span><span class="sxs-lookup"><span data-stu-id="9cb33-214">Writing a modified data page from the buffer cache to disk is called flushing the page.</span></span> [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] <span data-ttu-id="9cb33-215">Имеет логику, которая предотвращает запись на диск "грязной" страницы до записи на него связанной записи журнала.</span><span class="sxs-lookup"><span data-stu-id="9cb33-215">has logic that prevents a dirty page from being flushed before the associated log record is written.</span></span> <span data-ttu-id="9cb33-216">Содержимое журнала запишется на диск после того, как будут зафиксированы транзакции.</span><span class="sxs-lookup"><span data-stu-id="9cb33-216">Log records are written to disk when the transactions are committed.</span></span>  
  
##  <a name="transaction-log-backups"></a><a name="Backups"></a><span data-ttu-id="9cb33-217">Резервные копии журналов транзакций</span><span class="sxs-lookup"><span data-stu-id="9cb33-217">Transaction Log Backups</span></span>  

 <span data-ttu-id="9cb33-218">Этот раздел содержит основные понятия о создании резервной копии и восстановлении журналов транзакций.</span><span class="sxs-lookup"><span data-stu-id="9cb33-218">This section presents concepts about how to back up and restore (apply) transaction logs.</span></span> <span data-ttu-id="9cb33-219">В рамках модели полного восстановления или восстановления с неполным протоколированием для восстановления данных важно регулярно создавать резервные копии журнала транзакций (*резервные копии журнала*).</span><span class="sxs-lookup"><span data-stu-id="9cb33-219">Under the full and bulk-logged recovery models, taking routine backups of transaction logs (*log backups*) is necessary for recovering data.</span></span> <span data-ttu-id="9cb33-220">Можно создать резервную копию журнала во время выполнения полного резервного копирования.</span><span class="sxs-lookup"><span data-stu-id="9cb33-220">You can back up the log while any full backup is running.</span></span> <span data-ttu-id="9cb33-221">Дополнительные сведения о моделях восстановления см. в статье [Резервное копирование и восстановление баз данных SQL Server](../relational-databases/backup-restore/back-up-and-restore-of-sql-server-databases.md).</span><span class="sxs-lookup"><span data-stu-id="9cb33-221">For more information about recovery models, see [Back Up and Restore of SQL Server Databases](../relational-databases/backup-restore/back-up-and-restore-of-sql-server-databases.md).</span></span>  
  
 <span data-ttu-id="9cb33-222">Перед созданием первой резервной копии журнала необходимо создать полную резервную копию данных, например резервную копию базы данных или первую в наборе резервную копию файлов.</span><span class="sxs-lookup"><span data-stu-id="9cb33-222">Before you can create the first log backup, you must create a full backup, such as a database backup or the first in a set of file backups.</span></span> <span data-ttu-id="9cb33-223">Восстановить базу данных исключительно из резервных копий файлов может оказаться довольно сложно.</span><span class="sxs-lookup"><span data-stu-id="9cb33-223">Restoring a database by using only file backups can become complex.</span></span> <span data-ttu-id="9cb33-224">Поэтому рекомендуется начинать резервирование с создания полной резервной копии базы данных.</span><span class="sxs-lookup"><span data-stu-id="9cb33-224">Therefore, we recommend that you start with a full database backup when you can.</span></span> <span data-ttu-id="9cb33-225">После этого необходимо регулярное создание резервных копий журнала транзакций.</span><span class="sxs-lookup"><span data-stu-id="9cb33-225">Thereafter, backing up the transaction log regularly is necessary.</span></span> <span data-ttu-id="9cb33-226">Это не только уменьшит вероятность потери данных, но и даст возможность производить усечение журнала транзакций.</span><span class="sxs-lookup"><span data-stu-id="9cb33-226">This not only minimizes work-loss exposure but also enables truncation of the transaction log.</span></span> <span data-ttu-id="9cb33-227">Обычно он усекается после каждого обычного резервного копирования журналов,</span><span class="sxs-lookup"><span data-stu-id="9cb33-227">Typically, the transaction log is truncated after every conventional log backup.</span></span>  
  
 <span data-ttu-id="9cb33-228">Рекомендуется производить создание резервных копий журналов достаточно часто в соответствии с требованиями предприятия, а особенно со степенью толерантности к потерям данных, например из-за повреждения диска с журналами.</span><span class="sxs-lookup"><span data-stu-id="9cb33-228">We recommend taking frequent enough log backups to support your business requirements, specifically your tolerance for work loss such as might be caused by a damaged log drive.</span></span> <span data-ttu-id="9cb33-229">Частота создания резервных копий журнала зависит от степени толерантности к возможности потери данных и от того, какое количество резервных копий журнала получится хранить и в потенциале восстанавливать, а также каким количеством управлять.</span><span class="sxs-lookup"><span data-stu-id="9cb33-229">The appropriate frequency for taking log backups depends on your tolerance for work-loss exposure balanced by how many log backups you can store, manage, and, potentially, restore.</span></span> <span data-ttu-id="9cb33-230">Возможно, создания резервных копий журналов один раз в 15-30 минут может оказаться достаточно.</span><span class="sxs-lookup"><span data-stu-id="9cb33-230">Taking a log backup every 15 to 30 minutes might be enough.</span></span> <span data-ttu-id="9cb33-231">Если предприятию необходимо минимизировать вероятность потери данных, следует увеличить частоту создания резервных копий журнала.</span><span class="sxs-lookup"><span data-stu-id="9cb33-231">If your business requires that you minimize work-loss exposure, consider taking log backups more frequently.</span></span> <span data-ttu-id="9cb33-232">Более частое создание резервных копий журнала предоставляет преимущество за счет более частого усечения журнала, результатом которого является меньший размер файлов журнала.</span><span class="sxs-lookup"><span data-stu-id="9cb33-232">More frequent log backups have the added advantage of increasing the frequency of log truncation, resulting in smaller log files.</span></span>  
  
 <span data-ttu-id="9cb33-233">Чтобы ограничить число резервных копий журналов, которые требуется восстановить, важно периодически создавать резервные копии данных.</span><span class="sxs-lookup"><span data-stu-id="9cb33-233">To limit the number of log backups that you need to restore, it is essential to routinely back up your data.</span></span> <span data-ttu-id="9cb33-234">Например, можно запланировать еженедельное создание полной резервной копии базы данных и ежедневное создание разностных резервных копий.</span><span class="sxs-lookup"><span data-stu-id="9cb33-234">For example, you might schedule a weekly full database backup and daily differential database backups.</span></span>  
  
### <a name="the-log-chain"></a><span data-ttu-id="9cb33-235">Цепочка журналов</span><span class="sxs-lookup"><span data-stu-id="9cb33-235">The Log Chain</span></span>  

 <span data-ttu-id="9cb33-236">Непрерывная последовательность резервных копий журналов называется *цепочкой журналов*.</span><span class="sxs-lookup"><span data-stu-id="9cb33-236">A continuous sequence of log backups is called a *log chain*.</span></span> <span data-ttu-id="9cb33-237">Цепочка журналов начинается с полной резервной копии базы данных.</span><span class="sxs-lookup"><span data-stu-id="9cb33-237">A log chain starts with a full backup of the database.</span></span> <span data-ttu-id="9cb33-238">Обычно новая цепочка журналов начинается, только когда создается первая резервная копия базы данных или после переключения модели восстановления с простой на полную или на модель с неполным протоколированием.</span><span class="sxs-lookup"><span data-stu-id="9cb33-238">Usually, a new log chain is only started when the database is backed up for the first time or after the recovery model is switched from simple recovery to full or bulk-logged recovery.</span></span> <span data-ttu-id="9cb33-239">Существующая цепочка журналов остается без изменений, если не выбрана перезапись существующих наборов резервных копий при создании резервной копии базы данных целиком.</span><span class="sxs-lookup"><span data-stu-id="9cb33-239">Unless you choose to overwrite existing backup sets when creating a full database backup, the existing log chain remains intact.</span></span> <span data-ttu-id="9cb33-240">Сохраняя неизменность цепочки журналов, базу данных можно восстановить из любой резервной копии полной базы данных в любом наборе носителей и из всех последующих резервных копий журналов до точки восстановления.</span><span class="sxs-lookup"><span data-stu-id="9cb33-240">With the log chain intact, you can restore your database from any full database backup in the media set, followed by all subsequent log backups up through your recovery point.</span></span> <span data-ttu-id="9cb33-241">Точка восстановления может быть концом последней резервной копии журналов или определенной точкой восстановления в любой из резервных копий журналов.</span><span class="sxs-lookup"><span data-stu-id="9cb33-241">The recovery point could be the end of the last log backup or a specific recovery point in any of the log backups.</span></span> <span data-ttu-id="9cb33-242">Дополнительные сведения см. в разделе [Резервные копии журналов транзакций (SQL Server)](../relational-databases/backup-restore/transaction-log-backups-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="9cb33-242">For more information, see [Transaction Log Backups &#40;SQL Server&#41;](../relational-databases/backup-restore/transaction-log-backups-sql-server.md).</span></span>  
  
 <span data-ttu-id="9cb33-243">Чтобы восстановить базу данных на момент точки сбоя, нужна неповрежденная цепочка журналов.</span><span class="sxs-lookup"><span data-stu-id="9cb33-243">To restore a database up to the point of failure, the log chain must be intact.</span></span> <span data-ttu-id="9cb33-244">Непрерывная последовательность резервных копий журналов должна следовать до точки сбоя.</span><span class="sxs-lookup"><span data-stu-id="9cb33-244">That is, an unbroken sequence of transaction log backups must extend up to the point of failure.</span></span> <span data-ttu-id="9cb33-245">Точка начала этой последовательности зависит от типа восстанавливаемой резервной копии: резервная копия базы данных, частичная резервная копия или резервная копия файлов.</span><span class="sxs-lookup"><span data-stu-id="9cb33-245">Where this sequence of log must start depends on the type of data backups you are restoring: database, partial, or file.</span></span> <span data-ttu-id="9cb33-246">В случае резервной копии базы данных или частичной резервной копии последовательность резервных копий журнала должна начинаться от конца резервной копии базы данных или частичной резервной копии.</span><span class="sxs-lookup"><span data-stu-id="9cb33-246">For a database or partial backup, the sequence of log backups must extend from the end of a database or partial backup.</span></span> <span data-ttu-id="9cb33-247">В наборе резервных копий файлов последовательность резервных копий журналов должна следовать от начала полного набора резервных копий файлов.</span><span class="sxs-lookup"><span data-stu-id="9cb33-247">For a set of file backups, the sequence of log backups must extend from the start of a full set of file backups.</span></span> <span data-ttu-id="9cb33-248">Дополнительные сведения см. в разделе [Применение резервных копий журналов транзакций (SQL Server)](../relational-databases/backup-restore/apply-transaction-log-backups-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="9cb33-248">For more information, see [Apply Transaction Log Backups &#40;SQL Server&#41;](../relational-databases/backup-restore/apply-transaction-log-backups-sql-server.md).</span></span>  
  
### <a name="restore-log-backups"></a><span data-ttu-id="9cb33-249">Восстановление резервных копий журнала</span><span class="sxs-lookup"><span data-stu-id="9cb33-249">Restore Log Backups</span></span>  

 <span data-ttu-id="9cb33-250">Восстановление резервной копии журналов выполняет накат изменения, которые записаны в журнале транзакций, для воссоздания точного состояния базы данных на момент начала операции резервного копирования журнала.</span><span class="sxs-lookup"><span data-stu-id="9cb33-250">Restoring a log backup rolls forward the changes that were recorded in the transaction log to re-create the exact state of the database at the time the log backup operation started.</span></span> <span data-ttu-id="9cb33-251">При восстановлении базы данных необходимо восстанавливать резервные копии журналов, которые были созданы после создания восстановленной полной резервной копии или с начала первой восстановленной резервной копии файлов.</span><span class="sxs-lookup"><span data-stu-id="9cb33-251">When you restore a database, you will have to restore the log backups that were created after the full database backup that you restore, or from the start of the first file backup that you restore.</span></span> <span data-ttu-id="9cb33-252">Обычно после восстановления последней резервной копии данных или разностной резервной копии необходимо произвести восстановление серии резервных копий журналов до точки восстановления.</span><span class="sxs-lookup"><span data-stu-id="9cb33-252">Typically, after you restore the most recent data or differential backup, you must restore a series of log backups until you reach your recovery point.</span></span> <span data-ttu-id="9cb33-253">Затем производится восстановление базы данных.</span><span class="sxs-lookup"><span data-stu-id="9cb33-253">Then, you recover the database.</span></span> <span data-ttu-id="9cb33-254">При этом откатываются все незавершенные на момент восстановления транзакции, и база данных переводится в режим «в сети».</span><span class="sxs-lookup"><span data-stu-id="9cb33-254">This rolls back all transactions that were incomplete when the recovery started and brings the database online.</span></span> <span data-ttu-id="9cb33-255">После восстановления базы данных нельзя более восстанавливать резервные копии.</span><span class="sxs-lookup"><span data-stu-id="9cb33-255">After the database has been recovered, you cannot restore any more backups.</span></span> <span data-ttu-id="9cb33-256">Дополнительные сведения см. в разделе [Применение резервных копий журналов транзакций (SQL Server)](../relational-databases/backup-restore/apply-transaction-log-backups-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="9cb33-256">For more information, see [Apply Transaction Log Backups &#40;SQL Server&#41;](../relational-databases/backup-restore/apply-transaction-log-backups-sql-server.md).</span></span>  
  
## <a name="additional-reading"></a><span data-ttu-id="9cb33-257">Дополнительные материалы</span><span class="sxs-lookup"><span data-stu-id="9cb33-257">Additional Reading</span></span>  

 <span data-ttu-id="9cb33-258">Мы рекомендуем следующие статьи и книги, из которых можно почерпнуть дополнительные сведения о журнале транзакций.</span><span class="sxs-lookup"><span data-stu-id="9cb33-258">We recommend the following articles and books for additional information about the transaction log.</span></span>  
  
 [<span data-ttu-id="9cb33-259">Основные сведения о ведении журнала и восстановлении из резервных копий в SQL Server. Автор: Пол Ренделл (Paul Randall)</span><span class="sxs-lookup"><span data-stu-id="9cb33-259">Understanding Logging and Recovery in SQL Server by Paul Randall</span></span>](https://technet.microsoft.com/magazine/2009.02.logging.aspx)  
  
 [<span data-ttu-id="9cb33-260">Управление журналом транзакций SQL Server. Авторы: Тони Дэвис (Tony Davis) и Гейл Шоу (Gail Shaw)</span><span class="sxs-lookup"><span data-stu-id="9cb33-260">SQL Server Transaction Log Management by Tony Davis and Gail Shaw</span></span>](http://www.simple-talk.com/books/sql-books/sql-server-transaction-log-management-by-tony-davis-and-gail-shaw/)  
  
  
