---
title: Управление доступом для кода в службах Reporting Services | Документы Майкрософт
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: reporting-services
ms.topic: reference
helpviewer_keywords:
- code groups [Reporting Services]
- code access security [Reporting Services]
- permission sets [Reporting Services]
- evidence [Reporting Services]
- code access security [Reporting Services], about code access security
- named permission sets [Reporting Services]
ms.assetid: 97480368-1fc3-4c32-b1b0-63edfb54e472
author: maggiesMSFT
ms.author: maggies
manager: kfile
ms.openlocfilehash: ebe023b13a003895845bbb119f0bc93a0d01203a
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87669287"
---
# <a name="code-access-security-in-reporting-services"></a><span data-ttu-id="c5ba7-102">Управление доступом для кода в службах Reporting Services</span><span class="sxs-lookup"><span data-stu-id="c5ba7-102">Code Access Security in Reporting Services</span></span>
  <span data-ttu-id="c5ba7-103">Управление доступом для кода основывается на следующих базовых понятиях: свидетельство, группы кода и именованные наборы разрешений.</span><span class="sxs-lookup"><span data-stu-id="c5ba7-103">Code access security centers on these core concepts: evidence, code groups, and named permission sets.</span></span> <span data-ttu-id="c5ba7-104">В службах [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] каждый из компонентов (диспетчер отчетов, конструктор отчетов и сервер отчетов) имеет файл политики, в котором задана конфигурация управления доступом для кода для пользовательских сборок, а также для модулей обработки данных, доставки, подготовки отчетов и безопасности.</span><span class="sxs-lookup"><span data-stu-id="c5ba7-104">In [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)], the Report Manager, Report Designer, and Report Server components each have a policy file that configures code access security for custom assemblies as well as data, delivery, rendering, and security extensions.</span></span> <span data-ttu-id="c5ba7-105">В следующих разделах приведены общие сведения об управлении доступом для кода.</span><span class="sxs-lookup"><span data-stu-id="c5ba7-105">The following sections provide an overview of code access security.</span></span> <span data-ttu-id="c5ba7-106">Дополнительные сведения по темам, рассматриваемым в этом разделе, см. в разделе о модели политики безопасности в документации по пакету SDK для [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="c5ba7-106">For more detailed information about the topics covered in this section, see "Security Policy Model" in the [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] SDK documentation.</span></span>  
  
 <span data-ttu-id="c5ba7-107">В службах [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] используется управление доступом для кода, поскольку, несмотря на то, что сервер отчетов основан на технологии [!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)], имеется существенное различие между типичным приложением [!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)] и сервером отчетов.</span><span class="sxs-lookup"><span data-stu-id="c5ba7-107">[!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] uses code access security because, although the report server is built on [!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)] technology, there is a substantial difference between a typical [!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)] application and the report server.</span></span> <span data-ttu-id="c5ba7-108">В типичном приложении [!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)] не выполняется пользовательский код.</span><span class="sxs-lookup"><span data-stu-id="c5ba7-108">A typical [!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)] application does not execute user code.</span></span> <span data-ttu-id="c5ba7-109">В отличие от этого, в службах [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] используется открытая и расширяемая архитектура, которая позволяет пользователям писать программы с использованием файлов определения отчетов, применяя элемент **Code** языка определения отчетов, а также разрабатывать специализированные функции в составе пользовательских сборок для применения в отчетах.</span><span class="sxs-lookup"><span data-stu-id="c5ba7-109">In contrast, [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] uses an open and extensible architecture that allows users to program against the report definition files using the **Code** element of the Report Definition Language and to develop specialized functionality into a custom assembly for use in reports.</span></span> <span data-ttu-id="c5ba7-110">Кроме того, разработчики могут проектировать и развертывать мощные модули, которые расширяют возможности сервера отчетов.</span><span class="sxs-lookup"><span data-stu-id="c5ba7-110">Furthermore, developers can design and deploy powerful extensions that enhance the capabilities of the report server.</span></span> <span data-ttu-id="c5ba7-111">Это увеличение мощности и гибкости приводит к необходимости обеспечить настолько полную защиту и безопасность, насколько это возможно.</span><span class="sxs-lookup"><span data-stu-id="c5ba7-111">With this power and flexibility comes the need to provide as much protection and security as possible.</span></span>  
  
 <span data-ttu-id="c5ba7-112">Разработчики служб [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] могут использовать любую сборку [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] в своих отчетах и вызывать непосредственно в коде все функции сборок, развернутых в глобальном кэше сборок.</span><span class="sxs-lookup"><span data-stu-id="c5ba7-112">[!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] developers can use any [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] assembly in their reports and natively call upon all of the functionality of assemblies deployed to the global assembly cache.</span></span> <span data-ttu-id="c5ba7-113">Сервер отчетов может управлять только разрешениями, предоставляемыми для выражений отчета и загруженных пользовательских сборок.</span><span class="sxs-lookup"><span data-stu-id="c5ba7-113">The only thing that the report server can control is what permissions are given for report expressions and loaded custom assemblies.</span></span> <span data-ttu-id="c5ba7-114">В службах [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] пользовательские сборки по умолчанию получают разрешения только на **выполнение**.</span><span class="sxs-lookup"><span data-stu-id="c5ba7-114">In [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)], custom assemblies receive **Execute**-only permissions by default.</span></span>  
  
## <a name="evidence"></a><span data-ttu-id="c5ba7-115">Свидетельство</span><span class="sxs-lookup"><span data-stu-id="c5ba7-115">Evidence</span></span>  
 <span data-ttu-id="c5ba7-116">Свидетельство представляет собой информацию, которая используется в среде CLR для определения политики безопасности для сборок кода.</span><span class="sxs-lookup"><span data-stu-id="c5ba7-116">Evidence is the information that the common language runtime (CLR) uses to determine a security policy for code assemblies.</span></span> <span data-ttu-id="c5ba7-117">Свидетельство указывает среде выполнения, что код имеет конкретные характеристики.</span><span class="sxs-lookup"><span data-stu-id="c5ba7-117">Evidence indicates to the runtime that code has a particular characteristic.</span></span> <span data-ttu-id="c5ba7-118">Чаще всего в качестве свидетельства применяются цифровые подписи и данные о расположении сборки.</span><span class="sxs-lookup"><span data-stu-id="c5ba7-118">Common forms of evidence include digital signatures and the location of an assembly.</span></span> <span data-ttu-id="c5ba7-119">Свидетельство может быть также сконструировано специально для представления другой информации, которая является значимой для приложения.</span><span class="sxs-lookup"><span data-stu-id="c5ba7-119">Evidence can also be custom designed to represent other information that is meaningful to the application.</span></span>  
  
 <span data-ttu-id="c5ba7-120">И сборки, и домены приложений получают разрешения на основе свидетельства.</span><span class="sxs-lookup"><span data-stu-id="c5ba7-120">Both assemblies and application domains receive permissions based on evidence.</span></span> <span data-ttu-id="c5ba7-121">Например, информация о местоположении сборки, к которой пытаются получить доступ службы [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)], является одной из общих форм свидетельства для сборок со слабыми именами.</span><span class="sxs-lookup"><span data-stu-id="c5ba7-121">For example, the location of an assembly that [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] is attempting to access is one common form of evidence for weak-named assemblies.</span></span> <span data-ttu-id="c5ba7-122">Такие свидетельства принято называть свидетельствами URL-адреса.</span><span class="sxs-lookup"><span data-stu-id="c5ba7-122">This is known as URL evidence.</span></span> <span data-ttu-id="c5ba7-123">Примером свидетельства URL-адреса для пользовательского модуля обработки данных, развернутого на сервере отчетов, может быть «C:\Program Files\Microsoft SQL Server\MSRS10_50.MSSQLSERVER\Reporting Services\ReportServer\bin\Microsoft.Samples.ReportingServices.FsiDataExtension.dll».</span><span class="sxs-lookup"><span data-stu-id="c5ba7-123">URL evidence for a custom data processing extension deployed to a report server might be "C:\Program Files\Microsoft SQL Server\MSRS10_50.MSSQLSERVER\Reporting Services\ReportServer\bin\Microsoft.Samples.ReportingServices.FsiDataExtension.dll".</span></span> <span data-ttu-id="c5ba7-124">Еще одной широко применяемой формой свидетельства является строгое имя или цифровая подпись сборки.</span><span class="sxs-lookup"><span data-stu-id="c5ba7-124">The strong name or digital signature of an assembly is another common form of evidence.</span></span> <span data-ttu-id="c5ba7-125">В этом случае свидетельством является информация открытого ключа для сборки.</span><span class="sxs-lookup"><span data-stu-id="c5ba7-125">In this case, the evidence is the public key information for an assembly.</span></span>  
  
## <a name="code-groups"></a><span data-ttu-id="c5ba7-126">Группы кода</span><span class="sxs-lookup"><span data-stu-id="c5ba7-126">Code Groups</span></span>  
 <span data-ttu-id="c5ba7-127">Группа кода представляет собой логическое группирование кода, для определения принадлежности к который применяется определенное условие.</span><span class="sxs-lookup"><span data-stu-id="c5ba7-127">A code group is a logical grouping of code that has a specified condition for membership.</span></span> <span data-ttu-id="c5ba7-128">Любой код, который соответствует условию членства, включается в группу.</span><span class="sxs-lookup"><span data-stu-id="c5ba7-128">Any code that meets the membership condition is included in the group.</span></span> <span data-ttu-id="c5ba7-129">Администраторы настраивают политику безопасности для управления группами кода и связанными с ними наборами разрешений.</span><span class="sxs-lookup"><span data-stu-id="c5ba7-129">Administrators configure a security policy by managing code groups and their associated permission sets.</span></span>  
  
 <span data-ttu-id="c5ba7-130">Условие членства для группы кода основано на свидетельстве.</span><span class="sxs-lookup"><span data-stu-id="c5ba7-130">A membership condition for a code group is based on evidence.</span></span> <span data-ttu-id="c5ba7-131">Например, членство URL-адреса для группы кода основано на свидетельстве URL-адреса.</span><span class="sxs-lookup"><span data-stu-id="c5ba7-131">For example, a URL membership for a code group is based on URL evidence.</span></span> <span data-ttu-id="c5ba7-132">В среде CLR для описания кода и определения того, соблюдено ли условие членства в группе, применяются такие идентифицирующие характеристики, как свидетельство URL-адреса.</span><span class="sxs-lookup"><span data-stu-id="c5ba7-132">The common language runtime (CLR) uses identifying characteristics such as URL evidence to describe the code and to determine whether a group's membership condition has been met.</span></span> <span data-ttu-id="c5ba7-133">Например, если условием членства в группе кода является то, что «код находится в сборке C:\Program Files\Microsoft SQL Server\MSRS10_50.MSSQLSERVER\Reporting Services\ReportServer\bin\Microsoft.Samples.ReportingServices.FsiDataExtension.dll», среда выполнения проверяет это свидетельство и определяет, действительно ли код получен из этого местоположения.</span><span class="sxs-lookup"><span data-stu-id="c5ba7-133">For example, if the membership condition of a code group is "code in the assembly C:\Program Files\Microsoft SQL Server\MSRS10_50.MSSQLSERVER\Reporting Services\ReportServer\bin\Microsoft.Samples.ReportingServices.FsiDataExtension.dll", the runtime examines the evidence to determine whether the code originates from that location.</span></span> <span data-ttu-id="c5ba7-134">Пример записи конфигурации для группы кода этого типа может выглядеть примерно так:</span><span class="sxs-lookup"><span data-stu-id="c5ba7-134">An example of a configuration entry for this type of code group might look like the following:</span></span>  
  
```  
<CodeGroup class="UnionCodeGroup"  
   version="1"  
   PermissionSetName="FullTrust"  
   Name="MyCodeGroup"  
   Description="Code group for my data processing extension">  
      <IMembershipCondition class="UrlMembershipCondition"  
         version="1"  
         Url="C:\Program Files\Microsoft SQL Server\MSRS10_50.MSSQLSERVER\Reporting Services\ReportServer\bin\Microsoft.Samples.ReportingServices.FsiDataExtension.dll"  
       />  
</CodeGroup>  
```  
  
 <span data-ttu-id="c5ba7-135">Необходимо работать совместно с системным администратором или экспертом по развертыванию приложений, чтобы определить тип управления доступом для кода и групп кода, которые требуются для пользовательских сборок или модулей служб [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="c5ba7-135">You should work with your system administrator or application deployment expert to determine the type of code access security and code groups that your custom assemblies or [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] extensions require.</span></span>  
  
## <a name="named-permission-sets"></a><span data-ttu-id="c5ba7-136">Именованные наборы разрешений</span><span class="sxs-lookup"><span data-stu-id="c5ba7-136">Named Permission Sets</span></span>  
 <span data-ttu-id="c5ba7-137">Именованный набор разрешений представляет собой множество разрешений, которые администраторы могут связать с группой кода.</span><span class="sxs-lookup"><span data-stu-id="c5ba7-137">A named permission set is a set of permissions that administrators can associate with a code group.</span></span> <span data-ttu-id="c5ba7-138">Большинство именованных наборов разрешений состоит, по меньшей мере, из одного разрешения, имени и описания для набора разрешений.</span><span class="sxs-lookup"><span data-stu-id="c5ba7-138">Most named permission sets consist of at least one permission, a name, and description for the permission set.</span></span> <span data-ttu-id="c5ba7-139">Администраторы могут использовать именованные наборы разрешений для установки или изменения политики безопасности для групп кода.</span><span class="sxs-lookup"><span data-stu-id="c5ba7-139">Administrators can use named permission sets to establish or modify the security policy for code groups.</span></span> <span data-ttu-id="c5ba7-140">С одним и тем же именованным набором разрешений может быть связано несколько групп кода.</span><span class="sxs-lookup"><span data-stu-id="c5ba7-140">More than one code group can be associated with the same named permission set.</span></span> <span data-ttu-id="c5ba7-141">В среде CLR предусмотрены встроенные именованные наборы разрешений. В их число входят **Nothing**, **Execution**, **Internet**, **LocalIntranet**, **Everything** и **FullTrust**.</span><span class="sxs-lookup"><span data-stu-id="c5ba7-141">The CLR provides built-in named permission sets; among these are **Nothing**, **Execution**, **Internet**, **LocalIntranet**, **Everything**, and **FullTrust**.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="c5ba7-142">Пользовательские модули обработки данных, доставки, подготовки отчетов и безопасности в службах [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] должны запускаться с набором разрешений **FullTrust**.</span><span class="sxs-lookup"><span data-stu-id="c5ba7-142">Custom data, delivery, rendering, and security extensions in [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] must run under the **FullTrust** permission set.</span></span> <span data-ttu-id="c5ba7-143">Необходимо работать совместно с системным администратором, чтобы добавить соответствующие группы кода и условия членства для пользовательских модулей служб [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="c5ba7-143">Work with your system administrator to add the appropriate code group and membership conditions for your [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] extensions.</span></span>  
  
 <span data-ttu-id="c5ba7-144">Можно связать собственные пользовательские уровни разрешений с пользовательскими сборками, применяемыми в отчетах.</span><span class="sxs-lookup"><span data-stu-id="c5ba7-144">You can associate your own custom levels of permissions for custom assemblies that you use with reports.</span></span> <span data-ttu-id="c5ba7-145">Например, если требуется предоставить доступ какой-то сборке к конкретному файлу, можно создать новый именованный набор разрешений с конкретным файловым доступом для ввода-вывода, а затем назначить этот набор разрешений применяемой группе кода.</span><span class="sxs-lookup"><span data-stu-id="c5ba7-145">For example, if you want to allow an assembly to access a specific file, you can create a new named permission set with specific file I/O access and then assign the permission set to your code group.</span></span> <span data-ttu-id="c5ba7-146">В следующем наборе разрешений предоставляется доступ только для чтения к файлу MyFile.xml:</span><span class="sxs-lookup"><span data-stu-id="c5ba7-146">The following permission set grants read-only access to the file MyFile.xml:</span></span>  
  
```  
<PermissionSet class="NamedPermissionSet"  
   version="1"  
   Name="MyNewFilePermissionSet"  
   Description="A special permission set that grants read access to my file.">  
    <IPermission class="FileIOPermission"  
       version="1"  
       Read="C:\MyFile.xml"/>  
    <IPermission class="SecurityPermission"  
       version="1"  
       Flags="Assertion, Execution"/>  
</PermissionSet>  
```  
  
 <span data-ttu-id="c5ba7-147">Группа кода, которой предоставляется этот набор разрешений, может выглядеть примерно так:</span><span class="sxs-lookup"><span data-stu-id="c5ba7-147">A code group that you grant this permission set might look like the following:</span></span>  
  
```  
<CodeGroup class="UnionCodeGroup"  
   version="1"  
   PermissionSetName="MyNewFilePermissionSet"  
   Name="MyNewCodeGroup"  
   Description="A special code group for my custom assembly.">  
   <IMembershipCondition class="UrlMembershipCondition"  
      version="1"  
      Url="C:\Program Files\Microsoft SQL Server\MSRS10_50.MSSQLSERVER\Reporting Services\ReportServer\bin\MyCustomAssembly.dll"/>  
</CodeGroup>  
```  
  
## <a name="see-also"></a><span data-ttu-id="c5ba7-148">См. также:</span><span class="sxs-lookup"><span data-stu-id="c5ba7-148">See Also</span></span>  
 [<span data-ttu-id="c5ba7-149">Разработка безопасных приложений (службы Reporting Services)</span><span class="sxs-lookup"><span data-stu-id="c5ba7-149">Secure Development &#40;Reporting Services&#41;</span></span>](secure-development-reporting-services.md)  
  
  
