---
title: Основные сведения о политиках безопасности | Документы Майкрософт
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: reporting-services
ms.topic: reference
helpviewer_keywords:
- code groups [Reporting Services]
- code access security [Reporting Services], security policies
- Execution permission set
- custom assemblies [Reporting Services], security
- permission sets [Reporting Services]
- expressions [Reporting Services], security
- evidence [Reporting Services]
- FullTrust permission set
- security policies [Reporting Services]
- named permission sets [Reporting Services]
ms.assetid: a9bf043a-139a-4929-9a58-244815323df0
author: maggiesMSFT
ms.author: maggies
manager: kfile
ms.openlocfilehash: e03f2ca7aae75f692ba2c888d1fb6bd3f60fb4a4
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87668656"
---
# <a name="understanding-security-policies"></a><span data-ttu-id="82257-102">Основные сведения о политиках безопасности</span><span class="sxs-lookup"><span data-stu-id="82257-102">Understanding Security Policies</span></span>
  <span data-ttu-id="82257-103">Любой код, выполняемый сервером отчетов, должен быть частью конкретной политики управления доступом для кода.</span><span class="sxs-lookup"><span data-stu-id="82257-103">Any code that is executed by a report server must be part of a specific code access security policy.</span></span> <span data-ttu-id="82257-104">Такие политики безопасности состоят из групп кода, которые сопоставляют свидетельство с множеством именованных наборов разрешений.</span><span class="sxs-lookup"><span data-stu-id="82257-104">These security policies consist of code groups that map evidence to a set of named permission sets.</span></span> <span data-ttu-id="82257-105">Группы кода часто бывают связаны с именованным набором разрешений, который задает допустимые разрешения для кода в этой группе.</span><span class="sxs-lookup"><span data-stu-id="82257-105">Often, code groups are associated with a named permission set that specifies the allowable permissions for code in that group.</span></span> <span data-ttu-id="82257-106">Во время выполнения используется удостоверение, предоставленное доверенным узлом или загрузчиком, для определения того, к какой группе принадлежит код и какие разрешения с учетом этого должны быть предоставлены коду.</span><span class="sxs-lookup"><span data-stu-id="82257-106">The runtime uses evidence provided by a trusted host or by the loader to determine which code groups the code belongs to and, therefore, which permissions to grant the code.</span></span> <span data-ttu-id="82257-107">Службы [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] придерживаются этой архитектуры политики безопасности, определенной средой CLR платформы [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="82257-107">[!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] adheres to this security policy architecture as defined by the [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] common language runtime (CLR).</span></span> <span data-ttu-id="82257-108">В следующих разделах приведено описание различных типов кода в службах [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] и связанных с ними правил политики.</span><span class="sxs-lookup"><span data-stu-id="82257-108">The following sections describe the various types of code in [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] and the policy rules associated with them.</span></span>  
  
## <a name="report-server-assemblies"></a><span data-ttu-id="82257-109">Сборки сервера отчетов</span><span class="sxs-lookup"><span data-stu-id="82257-109">Report Server Assemblies</span></span>  
 <span data-ttu-id="82257-110">Сборки сервера отчетов представляют собой сборки, которые содержат код, являющийся частью продукта служб [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="82257-110">Report server assemblies are those that contain code that is part of the [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] product.</span></span> <span data-ttu-id="82257-111">Службы [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] написаны с помощью сборок управляемого кода; все эти сборки имеют строгие имена (подписанные цифровой подписью).</span><span class="sxs-lookup"><span data-stu-id="82257-111">[!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] is written using managed code assemblies; all of these assemblies are strong-named (that is, digitally signed).</span></span> <span data-ttu-id="82257-112">Группы кода для этих сборок определены с использованием условия **StrongNameMembershipCondition**, которое предоставляет свидетельство на основе информации открытого ключа для строгого имени сборки.</span><span class="sxs-lookup"><span data-stu-id="82257-112">The code groups for these assemblies are defined using the **StrongNameMembershipCondition**, which provides evidence based on public key information for the assembly's strong name.</span></span> <span data-ttu-id="82257-113">Группе кода предоставляется набор разрешений **FullTrust**.</span><span class="sxs-lookup"><span data-stu-id="82257-113">The code group is granted the **FullTrust** permission set.</span></span>  
  
## <a name="report-server-extensions-rendering-data-delivery-and-security"></a><span data-ttu-id="82257-114">Модули сервера отчетов (модули подготовки к просмотру, обработки данных, доставки и безопасности)</span><span class="sxs-lookup"><span data-stu-id="82257-114">Report Server Extensions (Rendering, Data, Delivery, and Security)</span></span>  
 <span data-ttu-id="82257-115">Модули сервера отчетов представляют собой пользовательские модули обработки данных, доставки, подготовки к просмотру и безопасности, создаваемые для расширения функциональных возможностей служб [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="82257-115">Report server extensions are custom data, delivery, rendering, and security extensions that you or other third-parties create in order to extend the functionality of [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)].</span></span> <span data-ttu-id="82257-116">Необходимо предоставить разрешения **FullTrust** этим модулям или коду сборки в файлах конфигурации политики, связанных с компонентом служб [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)], для которого создается модуль.</span><span class="sxs-lookup"><span data-stu-id="82257-116">You must grant **FullTrust** to these extensions or assembly code in the policy configuration files associated with the [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] component you are extending.</span></span> <span data-ttu-id="82257-117">Модули, поставляемые в составе служб [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)], подписываются открытым ключом сервера отчетов и получают набор разрешений **FullTrust**.</span><span class="sxs-lookup"><span data-stu-id="82257-117">Extensions shipped as a part of [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] are signed with the report server public key and receive the **FullTrust** permission set.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="82257-118">Необходимо внести изменения в файлы конфигурации политики служб [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)], чтобы обеспечить предоставление разрешений **FullTrust** для любых сторонних модулей.</span><span class="sxs-lookup"><span data-stu-id="82257-118">You must modify the [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] policy configuration files to allow **FullTrust** for any third-party extensions.</span></span> <span data-ttu-id="82257-119">Если для пользовательских модулей не добавлена группа кода с разрешениями **FullTrust**, то эти модули не могут использоваться сервером отчетов.</span><span class="sxs-lookup"><span data-stu-id="82257-119">If you do not add a code group with **FullTrust** for your custom extensions, they cannot be used by the report server.</span></span>  
  
 <span data-ttu-id="82257-120">Дополнительные сведения о файлах конфигурации политик в [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] см. в разделе [Использование файлов политики безопасности служб Reporting Services](using-reporting-services-security-policy-files.md).</span><span class="sxs-lookup"><span data-stu-id="82257-120">For more information about the policy configuration files in [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)], see [Using Reporting Services Security Policy Files](using-reporting-services-security-policy-files.md).</span></span>  
  
## <a name="expressions-used-in-reports"></a><span data-ttu-id="82257-121">Выражения, используемые в отчетах</span><span class="sxs-lookup"><span data-stu-id="82257-121">Expressions Used in Reports</span></span>  
 <span data-ttu-id="82257-122">Выражения отчетов представляют собой встроенные выражения кода или определяемые пользователем методы, содержащиеся в элементе **Code** файла языка определения отчетов.</span><span class="sxs-lookup"><span data-stu-id="82257-122">Report expressions are inline code expressions or user-defined methods contained within the **Code** element of a report definition language file.</span></span> <span data-ttu-id="82257-123">В файлах политики уже настроена конфигурация одной группы кода, которая предоставляет этим выражениям набор разрешений **Execution** по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="82257-123">There is a code group that is already configured in the policy files that grants these expressions the **Execution** permission set by default.</span></span> <span data-ttu-id="82257-124">Эта группа кода выглядит примерно так:</span><span class="sxs-lookup"><span data-stu-id="82257-124">The code group looks like the following:</span></span>  
  
```  
<CodeGroup  
   class="UnionCodeGroup"  
   version="1"  
   PermissionSetName="Execution"  
   Name="Report_Expressions_Default_Permissions"  
   Description="This code group grants default permissions for code in report expressions and Code element. ">  
    <IMembershipCondition  
       class="StrongNameMembershipCondition"  
       version="1"  
       PublicKeyBlob="002400..."  
    />  
</CodeGroup>  
```  
  
 <span data-ttu-id="82257-125">Разрешение **Execution** позволяет выполнять код, но не использовать защищенные ресурсы.</span><span class="sxs-lookup"><span data-stu-id="82257-125">**Execution** permission allows code to run (execute), but not to use protected resources.</span></span> <span data-ttu-id="82257-126">Все выражения, находящиеся в отчете, компилируются в сборку (называемую сборкой «хранилища выражений»), которая хранится в составе откомпилированного отчета.</span><span class="sxs-lookup"><span data-stu-id="82257-126">All expressions found within a report are compiled into an assembly (called an "expression host" assembly) that is stored as a part of the compiled report.</span></span> <span data-ttu-id="82257-127">После вызова отчета на выполнение сервер отчетов загружает хранилище сборки выражений и преобразует вызовы, обращенные к этой сборке, в выполняемые выражения.</span><span class="sxs-lookup"><span data-stu-id="82257-127">When the report is executed, the report server loads the expression host assembly and makes calls into that assembly to execute expressions.</span></span> <span data-ttu-id="82257-128">Сборки хранилища выражений подписываются конкретным ключом, с помощью которого определяется группа кода для всех хранилищ выражений.</span><span class="sxs-lookup"><span data-stu-id="82257-128">Expression host assemblies are signed with a specific key that is used to define the code group for all expression hosts.</span></span>  
  
 <span data-ttu-id="82257-129">Выражения отчета ссылаются на коллекции объектной модели отчета (поля, параметры и т. д.) и выполняют такие простые задачи, как арифметические и строковые операции.</span><span class="sxs-lookup"><span data-stu-id="82257-129">Report expressions reference report object model collections (fields, parameters, etc.) and perform simple tasks like arithmetic and string operations.</span></span> <span data-ttu-id="82257-130">Для кода, в котором осуществляются эти простые операции, требуется только разрешение **Execution**.</span><span class="sxs-lookup"><span data-stu-id="82257-130">Code that performs these simple operations only requires **Execution** permission.</span></span> <span data-ttu-id="82257-131">По умолчанию определяемым пользователем методам в элементе **Code** и во всех пользовательских сборках предоставлено разрешение **Execution** в службах [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="82257-131">By default, user-defined methods in the **Code** element and any custom assemblies are granted **Execution** permission in [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)].</span></span> <span data-ttu-id="82257-132">Таким образом, применительно к большинству выражений текущая конфигурация не требует внесения изменений в какие-либо файлы политики безопасности.</span><span class="sxs-lookup"><span data-stu-id="82257-132">Thus, for most expressions, the current configuration does not require that you modify any security policy files.</span></span> <span data-ttu-id="82257-133">Чтобы предоставить дополнительные разрешения сборкам хранилищ выражений, администратор должен изменить файлы конфигурации политики сервера отчетов и конструктора отчетов, а также сменить группу кода выражений отчета.</span><span class="sxs-lookup"><span data-stu-id="82257-133">To grant additional permissions to expression host assemblies, an administrator needs to modify the policy configuration files of the report server and Report Designer, and change the report expressions code group.</span></span> <span data-ttu-id="82257-134">Такая настройка является глобальной, поэтому изменение заданных по умолчанию разрешений для хранилищ выражений затрагивает все отчеты.</span><span class="sxs-lookup"><span data-stu-id="82257-134">Because it is a global setting, changing default permissions for the expression hosts affects all reports.</span></span> <span data-ttu-id="82257-135">По этой причине, настоятельно рекомендуется помещать весь код, для которого требуется дополнительное обеспечение безопасности, в пользовательскую сборку.</span><span class="sxs-lookup"><span data-stu-id="82257-135">For this reason, it is highly recommended that you place all code that requires additional security into a custom assembly.</span></span> <span data-ttu-id="82257-136">Только этой сборке будут предоставлены необходимые разрешения.</span><span class="sxs-lookup"><span data-stu-id="82257-136">Only this assembly will be granted the permissions you need.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="82257-137">Код, предназначенный для использования в отчетах, в котором вызываются внешние сборки или защищенные ресурсы, должен быть включен в пользовательскую сборку.</span><span class="sxs-lookup"><span data-stu-id="82257-137">Code that calls external assemblies or protected resources should be incorporated into a custom assembly for use in reports.</span></span> <span data-ttu-id="82257-138">Это позволяет получить больший контроль над разрешениями, запрашиваемыми и подтверждаемыми в коде.</span><span class="sxs-lookup"><span data-stu-id="82257-138">Doing so gives you more control over the permissions requested and asserted by your code.</span></span> <span data-ttu-id="82257-139">Не следует выполнять вызовы защищенных методов в элементе **Code**.</span><span class="sxs-lookup"><span data-stu-id="82257-139">You should not make calls to secure methods within the **Code** element.</span></span> <span data-ttu-id="82257-140">Для этого необходимо предоставить разрешения **FullTrust** хранилищу выражений отчета и обеспечить полный доступ к среде CLR для всего пользовательского кода.</span><span class="sxs-lookup"><span data-stu-id="82257-140">Doing so requires you to grant **FullTrust** to the report expression host and grants all custom code full access to the CLR.</span></span>  
  
> [!CAUTION]  
>  <span data-ttu-id="82257-141">Не предоставляйте разрешения **FullTrust** группе кода для хранилища выражений отчета.</span><span class="sxs-lookup"><span data-stu-id="82257-141">Do not grant **FullTrust** to the code group for a report expression host.</span></span> <span data-ttu-id="82257-142">Сделав это, вы разрешите выполнять защищенные системные вызовы во всех выражениях отчета.</span><span class="sxs-lookup"><span data-stu-id="82257-142">If you do, you enable all report expressions to make protected system calls.</span></span>  
  
## <a name="custom-assemblies-referenced-in-reports"></a><span data-ttu-id="82257-143">Пользовательские сборки, ссылаемые в отчетах</span><span class="sxs-lookup"><span data-stu-id="82257-143">Custom Assemblies Referenced in Reports</span></span>  
 <span data-ttu-id="82257-144">В некоторых выражениях отчета могут вызываться сборки кода сторонних разработчиков, известные также как пользовательские сборки служб [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="82257-144">Some report expressions can call third-party code assemblies, also known in [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] as custom assemblies.</span></span> <span data-ttu-id="82257-145">Сервер отчетов предполагает, что для этих сборок в файлах конфигурации политики имеется, по крайней мере, разрешение **Execution**.</span><span class="sxs-lookup"><span data-stu-id="82257-145">The report server expects these assemblies to have at least **Execution** permission in the policy configuration files.</span></span> <span data-ttu-id="82257-146">По умолчанию файлы политики, входящие в поставку служб [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)], предоставляют разрешение **Execution** всем сборкам, начиная с зоны "Мой компьютер".</span><span class="sxs-lookup"><span data-stu-id="82257-146">By default, policy files that ship with [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] grant **Execution** permission to all assemblies starting from the 'My Computer' zone.</span></span> <span data-ttu-id="82257-147">Пользовательским сборкам по мере необходимости можно предоставлять дополнительные разрешения.</span><span class="sxs-lookup"><span data-stu-id="82257-147">You can grant additional permissions to custom assemblies as needed.</span></span>  
  
 <span data-ttu-id="82257-148">В некоторых случаях возникает необходимость выполнить операцию, для которой требуется конкретное разрешение кода в выражении отчета.</span><span class="sxs-lookup"><span data-stu-id="82257-148">In some cases, you may need to perform an operation that requires specific code permissions in a report expression.</span></span> <span data-ttu-id="82257-149">Как правило, это означает, что в выражении отчета должен быть выполнен вызов защищенного метода библиотеки CLR (наподобие того, который получает доступ к файлам или системному реестру).</span><span class="sxs-lookup"><span data-stu-id="82257-149">Typically, this means that a report expression needs to make a call to a secured CLR library method (such as one that accesses files or the system registry).</span></span> <span data-ttu-id="82257-150">В документации [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] приведено описание разрешений кода, необходимых для выполнения такого безопасного вызова; чтобы в вызывающем коде можно было выполнить подобный вызов, необходимо предоставить эти конкретные, безопасные разрешения.</span><span class="sxs-lookup"><span data-stu-id="82257-150">The [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] documentation describes the code permissions that are required to make this secure call; to execute the call, the calling code must be granted these specific, secure permissions.</span></span> <span data-ttu-id="82257-151">Если вызов выполняется из выражения отчета или элемента **Code**, то хранилищу сборки выражений нужно предоставить соответствующие разрешения.</span><span class="sxs-lookup"><span data-stu-id="82257-151">If you make the call from a report expression or the **Code** element, the expression host assembly must be granted the appropriate permissions.</span></span> <span data-ttu-id="82257-152">Но сразу после предоставления этих разрешений хранилищу выражений весь код, выполняемый в любом выражении любого отчета, получает такие же конкретные разрешения.</span><span class="sxs-lookup"><span data-stu-id="82257-152">However, once you grant the expression host the permissions, all code that runs in any expression in any report is now granted that specific permission.</span></span> <span data-ttu-id="82257-153">Намного безопаснее осуществлять вызов из пользовательской сборки и предоставлять конкретные разрешения этой пользовательской сборке.</span><span class="sxs-lookup"><span data-stu-id="82257-153">It is much more secure to make the call from a custom assembly and grant that custom assembly the specific permissions.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="82257-154">См. также:</span><span class="sxs-lookup"><span data-stu-id="82257-154">See Also</span></span>  
 <span data-ttu-id="82257-155">[Управление доступом для кода в службах Reporting Services](code-access-security-in-reporting-services.md) </span><span class="sxs-lookup"><span data-stu-id="82257-155">[Code Access Security in Reporting Services](code-access-security-in-reporting-services.md) </span></span>  
 [<span data-ttu-id="82257-156">Разработка безопасных приложений (службы Reporting Services)</span><span class="sxs-lookup"><span data-stu-id="82257-156">Secure Development &#40;Reporting Services&#41;</span></span>](secure-development-reporting-services.md)  
  
  
