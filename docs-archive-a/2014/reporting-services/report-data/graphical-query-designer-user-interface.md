---
title: Пользовательский интерфейс графического конструктора запросов | Документация Майкрософт
ms.custom: ''
ms.date: 03/08/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: reporting-services-native
ms.topic: conceptual
f1_keywords:
- "10012"
- sql12.rtp.rptdesigner.dataview.vdtquerydesigner.f1
helpviewer_keywords:
- graphical query designer [Reporting Services]
- data sources [Reporting Services], creating
- text-based query designer [Reporting Services]
- query designers [Reporting Services]
- Reporting Services, query designers
ms.assetid: 5022ae33-03a3-48de-8ac1-82742f48cebe
author: maggiesMSFT
ms.author: maggies
manager: kfile
ms.openlocfilehash: 12cc3cdc2a5a36ebcadd01f61c6a04ea66b0e4f4
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87657524"
---
# <a name="graphical-query-designer-user-interface"></a>Пользовательский интерфейс графического конструктора запросов
  [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] предоставляют графический и текстовый конструкторы запросов, предназначенных для получения данных из реляционной базы данных в качестве набора данных отчета в конструкторе отчетов. Графический конструктор запросов используется для интерактивного создания запроса и для просмотра результатов при работе с источниками данных следующих типов: [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], Oracle, OLE DB и ODBC. Текстовый конструктор запросов применяется для задания нескольких инструкций [!INCLUDE[tsql](../../../includes/tsql-md.md)] , запросов и команд со сложным синтаксисом и запросов на основе выражений. Дополнительные сведения см. в разделе [Пользовательский интерфейс текстового конструктора запросов](../text-based-query-designer-user-interface.md). Дополнительные сведения о работе с конкретными типами источников данных см. в разделе [Добавление данных в отчет &#40;построитель отчетов и SSRS&#41;](report-datasets-ssrs.md).

 .

## <a name="graphical-query-designer"></a>Графический конструктор запросов
 Графический конструктор запросов поддерживает три типа команд запроса: **Text**, **StoredProcedure**или **TableDirect**. До создания запроса для набора данных нужно выбрать параметр типа команды на странице «Запрос» диалогового окна [Свойства набора данных](../dataset-properties-dialog-box-query.md) .

 Доступны следующие параметры типа запроса.

-   **Text** Поддерживает стандартный текст запросов [!INCLUDE[tsql](../../../includes/tsql-md.md)] к реляционным базам данных в качестве источников данных, включая расширения обработки данных для [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] и Oracle.

-   **TableDirect** Возвращает все столбцы из выбранной таблицы. Например, для таблицы с именем Customers будет использован эквивалент инструкции [!INCLUDE[tsql](../../../includes/tsql-md.md)]`SELECT * FROM Customers`.

-   **StoredProcedure** Поддерживает вызовы хранимых процедур из источника данных. Чтобы использовать этот параметр, необходимо иметь разрешение на выполнение хранимых процедур. Это разрешение на источник данных предоставляет администратор базы данных.

 Типом команды по умолчанию является **Text**.

> [!NOTE]
>  Некоторые модули обработки данных не поддерживают определенные типы команд. Чтобы параметр стал доступен, базовый поставщик данных должен поддерживать соответствующий тип команды.

### <a name="command-type-text"></a>Тип команды Text
 При использовании типа **Text** графический конструктор запросов предоставляет четыре раздела (или панели). Для запроса [!INCLUDE[tsql](../../../includes/tsql-md.md)] можно указывать столбцы, псевдонимы, параметры сортировки и критерии фильтра. Можно просматривать текст созданного запроса, выполнять его и просматривать результирующий набор. На следующем рисунке показаны четыре панели.

 ![Графический конструктор запросов для SQL-запросов](../media/rsqd-dsaw-sql.gif "Графический конструктор запросов для SQL-запросов")

 В следующей таблице описываются функции каждой панели.

|Панель|Компонент|
|----------|--------------|
|Схема|Отображает графическое представление таблиц в запросе. Используйте эту панель для выбора полей и определения связей между таблицами.|
|Сетка|Отображает список полей, возвращаемых запросом. Используйте эту панель, чтобы определить псевдонимы, порядок сортировки, фильтры, группирования и параметры.|
|SQL|Отображает запрос на языке [!INCLUDE[tsql](../../../includes/tsql-md.md)] , представляемый панелями «Диаграмма» и «Сетка». Используйте эту панель, чтобы создать или изменить запрос на языке [!INCLUDE[tsql](../../../includes/tsql-md.md)].|
|Результат|Отображает результаты запроса. Чтобы выполнить запрос, щелкните правой кнопкой мыши любую область и выберите команду **Выполнить**либо нажмите кнопку **Выполнить** на панели инструментов.|

 При изменении данных на любой из первых трех панелей эти изменения отобразятся в остальных панелях. Например, при добавлении таблицы в панель «Диаграмма» эта таблица автоматически добавится в запрос на языке [!INCLUDE[tsql](../../../includes/tsql-md.md)] в панели «SQL». Добавление поля в запрос в панель «SQL» автоматически добавит поле в список в панели «Сетка» и обновит таблицу в панели «Диаграмма».

 Дополнительные сведения см. в разделе [Инструменты конструктора запросов и представлений &#40;визуальные инструменты для баз данных&#41;](../../ssms/visual-db-tools/visual-database-tools.md).

#### <a name="toolbar-for-the-graphical-query-designer"></a>Панель инструментов графического конструктора запросов
 На панели инструментов графического конструктора запросов расположены кнопки, помогающие проектировать запросы [!INCLUDE[tsql](../../../includes/tsql-md.md)] с помощью графического интерфейса.

|Кнопка|Description|
|------------|-----------------|
|**Редактировать как текст**|Переключиться из текстового конструктора запросов в графический и обратно.|
|**Импорт**|Импорт существующего запроса из файла или отчета. Поддерживаются только SQL- и RDL-файлы. Дополнительные сведения см. в разделе [Внедренные и общие наборы данных отчета (построитель отчетов и службы SSRS)](report-embedded-datasets-and-shared-datasets-report-builder-and-ssrs.md).|
|![Переключатель "Показать/скрыть панель диаграмм"](../media/rsqdicon-showhidediagram.gif "Переключатель "Показать/скрыть панель диаграмм"")|Показать или скрыть панель «Диаграмма».|
|![Переключатель "Показать/скрыть панель сетки"](../media/rsqdicon-showhidegrid.gif "Переключатель "Показать/скрыть панель сетки"")|Показать или скрыть панель «Сетка».|
|![Переключатель "Показать/скрыть панель SQL"](../media/rsqdicon-showhidesql.gif "Переключатель "Показать/скрыть панель SQL"")|Показать или скрыть панель «SQL».|
|![Переключатель "Показать/скрыть панель результатов"](../media/rsqdicon-showhideresult.gif "Переключатель "Показать/скрыть панель результатов"")|Показать или скрыть панель «Результат».|
|![Выполнить запрос](../../analysis-services/media/rsqdicon-run.gif "Выполнить запрос")|Выполните запрос.|
|![Кнопка "Проверить SQL" на панели SQL](../media/rsqdicon-verifysql.gif "Кнопка "Проверить SQL" на панели SQL")|Проверить синтаксис текста запроса.|
|![Сортировка по возрастанию для выбранного поля](../media/rsqdicon-sortascending.gif "Сортировка по возрастанию для выбранного поля")|Установить порядок сортировки **Сортировка по возрастанию** для выбранного столбца в панели «Диаграмма».|
|![Сортировка по убыванию для выбранного поля](../media/rsqdicon-sortdescending.gif "Сортировка по убыванию для выбранного поля")|Установить порядок сортировки **Сортировка по убыванию** для выбранного столбца в панели «Диаграмма».|
|![Удаление фильтра по выбранному полю](../media/rsqdicon-removefilter.gif "Удаление фильтра по выбранному полю")|Удалить фильтр для столбца, который выбран на панели "Диаграмма" и имеет обозначение наличия фильтра (![Значок фильтрации рядом с выбранным столбцом фильтра](../media/rsqdicon-filter.gif "Значок фильтрации рядом с выбранным столбцом фильтра")).|
|![Использование Group By для выбранного поля](../media/rsqdicon-usegroupby.gif "Использование Group By для выбранного поля")|Показать или скрыть столбец **Group By** в панели «Сетка». Если переключатель **Group By** включен, в панели «Сетка» появляется дополнительный столбец с именем **Group By** и каждое значение выбранного столбца в запросе принимает значение **Group By**. Это приводит к тому, что выбранный столбец включается в предложение Group By в тексте SQL-запроса. Кнопка «Group By» используется для автоматического добавления предложения GROUP BY, включающего все столбцы в предложении SELECT. Если предложение SELECT включает вызовы агрегатных функций (например, SUM (ColumnName)), включите каждый столбец, не участвующий в статистическом вычислении, в предложение GROUP BY, если нужно, чтобы он появился в результирующем наборе.<br /><br /> Чтобы появиться в панели «Результат», каждый столбец в запросе должен иметь определенную для него агрегатную функцию, вычисляющую значение, которое будет отображаться в панели «Результат», либо этот столбец нужно указать в предложении GROUP BY SQL-запроса.|
|![Добавление новой таблицы на панель диаграмм](../media/rsqdicon-addtable.gif "Добавление новой таблицы на панель диаграмм")|Добавить новую таблицу из источника данных в панель «Диаграмма».<br /><br /> **Примечание** Если добавляется новая таблица, конструктор запросов пытается сопоставить связи внешнего ключа из источника данных. После добавления таблицы подтвердите, что отношения внешнего ключа, представленные связями между таблицами, корректны.|

#### <a name="example"></a>Пример
 Следующий запрос возвращает список фамилий из таблицы [!INCLUDE[ssSampleDBobject](../../../includes/sssampledbobject-md.md)] Person **базы данных** :

```
SELECT LastName FROM Person.Person;
```

 С панели «SQL» можно также запустить хранимую процедуру. Следующий запрос выполняет хранимую процедуру **uspGetEmployeeManagers** в базе данных [!INCLUDE[ssSampleDBobject](../../../includes/sssampledbobject-md.md)] :

```
EXEC uspGetEmployeeManagers '1';
```

### <a name="command-type-tabledirect"></a>Тип команды TableDirect
 При использовании типа **TableDirect** графический конструктор запросов отображает раскрывающийся список доступных таблиц из источника данных и панель "Результат". Если выбрать таблицу и нажать кнопку **Выполнить** , возвращаются все столбцы этой таблицы.

> [!NOTE]
>  Функция TableDirect поддерживается только источниками данных типа **OLE DB** и **ODBC** .

 В следующей таблице описываются функции каждой панели.

|Панель|Компонент|
|----------|--------------|
|Раскрывающийся список таблиц|Содержит перечень всех доступных таблиц из источника данных. Выберите хранимую процедуру из списка, чтобы сделать ее активной.|
|Результат|Отображает все столбцы из выбранной таблицы. Для запуска запроса к таблице нажмите кнопку **Выполнить** на панели инструментов.|

#### <a name="toolbar-buttons-for-the-command-type-tabledirect"></a>Кнопки панели инструментов для типа команды TableDirect
 Панель инструментов графического конструктора запросов содержит раскрывающийся список таблиц в источнике данных. В следующей таблице перечислены все кнопки и их функции.

|Кнопка|Description|
|------------|-----------------|
|**Редактировать как текст**|Переключиться из текстового конструктора запросов в графический и обратно.|
|**Импорт**|Импорт существующего запроса из файла или отчета. Поддерживаются только SQL- и RDL-файлы. Дополнительные сведения см. в разделе [Внедренные и общие наборы данных отчета (построитель отчетов и службы SSRS)](report-embedded-datasets-and-shared-datasets-report-builder-and-ssrs.md).|
|![Значок для кнопки "Обычный конструктор запросов"](../media/icongenericquerydesigner.gif "Значок для кнопки "Обычный конструктор запросов"")|Переключиться из графического конструктора запросов в обычный и обратно, сохранив текст запроса или вид хранимой процедуры.|
|![Выполнить запрос](../../analysis-services/media/rsqdicon-run.gif "Выполнить запрос")|Вернуть все столбцы из выбранной таблицы.|

### <a name="command-type-storedprocedure"></a>Тип команды StoredProcedure
 При использовании типа **StoredProcedure** графический конструктор запросов отображает раскрывающийся список доступных хранимых процедур из источника данных и панель "Результат". В следующей таблице описываются функции каждой панели.

|Панель|Компонент|
|----------|--------------|
|Раскрывающийся список хранимых процедур|Содержит список всех доступных хранимых процедур из источника данных. Выберите хранимую процедуру из списка, чтобы сделать ее активной.|
|Результат|Отображает результат выполнения хранимой процедуры. Для запуска выбранной хранимой процедуры нажмите кнопку **Выполнить** на панели инструментов.|

#### <a name="toolbar-buttons-for-command-type-storedprocedure"></a>Кнопки панели инструментов для типа команды StoredProcedure
 Панель инструментов графического конструктора запросов содержит раскрывающийся список хранимых процедур в источнике данных. В следующей таблице перечислены все кнопки и их функции.

|Кнопка|Description|
|------------|-----------------|
|**Редактировать как текст**|Переключиться из текстового конструктора запросов в графический и обратно.|
|**Импорт**|Импорт существующего запроса из файла или отчета. Поддерживаются только SQL- и RDL-файлы. Дополнительные сведения см. в разделе [Внедренные и общие наборы данных отчета (построитель отчетов и службы SSRS)](report-embedded-datasets-and-shared-datasets-report-builder-and-ssrs.md).|
|![Выполнить запрос](../../analysis-services/media/rsqdicon-run.gif "Выполнить запрос")|Выполнить выбранную хранимую процедуру.|
|Раскрывающийся список хранимых процедур|Щелкните стрелку вниз, чтобы отобразить список доступных хранимых процедур из источника данных. Для выбора хранимой процедуры щелкните любую хранимую процедуру в этом списке.|

#### <a name="example"></a>Пример
 Следующая хранимая процедура вызывает список руководителей из базы данных [!INCLUDE[ssSampleDBobject](../../../includes/sssampledbobject-md.md)] . Эта хранимая процедура принимает в качестве параметра идентификатор *BusinessEntityID* . Можно ввести любое небольшое целое число.

 `uspGetEmployeeManagers '1';`

## <a name="see-also"></a>См. также:
 [Средства проектирования запросов в конструктор отчетов SQL Server Data Tools &#40;ssrs&#41;](query-design-tools-ssrs.md) [Добавление данных в отчет &#40;построитель отчетов и SSRS&#41;](report-datasets-ssrs.md) [SQL Server тип соединения &#40;ssrs&#41;](sql-server-connection-type-ssrs.md) [OLE DB тип подключения &#40;ssrs&#41;](ole-db-connection-type-ssrs.md) [Добавление данных в отчет &#40;ПОСТРОИТЕЛЬ отчетов и SSRS&#41;](report-datasets-ssrs.md) [тип подключения Oracle &#40;службы SSRS&#41;](oracle-connection-type-ssrs.md) [RSReportDesigner](../report-server/rsreportdesigner-configuration-file.md) [Design Queries and Views How-to Topics &#40;Visual Database Tools&#41;](../../ssms/visual-db-tools/design-queries-and-views-how-to-topics-visual-database-tools.md)


