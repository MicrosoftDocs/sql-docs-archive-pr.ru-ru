---
title: Добавление каскадных параметров в отчет (построитель отчетов и службы SSRS) | Документы Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: reporting-services-native
ms.topic: conceptual
ms.assetid: 3a22eec3-57a7-478e-b6fc-102a9dbe0591
author: maggiesMSFT
ms.author: maggies
manager: kfile
ms.openlocfilehash: 5419d448b2fa9526224e1bccd80d5c195e2763d7
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87729049"
---
# <a name="add-cascading-parameters-to-a-report-report-builder-and-ssrs"></a>Добавление каскадных параметров в отчет (построитель отчетов и службы SSRS)
  Каскадирование параметров предоставляет способ управления большими объемами данных отчета. Можно определить набор связанных параметров таким образом, чтобы список значений для одного параметра зависел от значения, выбранного в другом параметре. Например, первый параметр является независимым и может представлять список категорий продуктов. При выборе пользователем категории второй параметр зависит от значения первого параметра. Эти значения обновляются списком подкатегорий выбранной категории. При просмотре пользователем отчета значения параметров категорий и подкатегорий используются для фильтрации данных отчета.  
  
> [!NOTE]  
>  [!INCLUDE[ssRBRDDup](../../includes/ssrbrddup-md.md)]  
  
 При создании каскадирования параметров сначала определяется запрос набора данных и для каждого необходимого каскадного параметра включается параметр запроса. Для обеспечения доступных значений также необходимо создать отдельный набор данных для каждого каскадного параметра. Дополнительные сведения см. в разделе [Добавление, изменение и удаление допустимых значений параметра отчета (построитель отчетов и службы SSRS)](add-change-or-delete-available-values-for-a-report-parameter.md).  
  
 Для каскадирования параметров важен порядок следования, поскольку запрос набора данных для параметра, расположенного дальше в списке, включает ссылки на каждый параметр, находящийся в списке раньше его. Во время выполнения порядок параметров в области данных отчета определяет порядок появления запросов параметров в отчете и, таким образом, порядок выбора пользователем каждого последующего значения параметра.  
  
 Сведения о создании каскадных параметров с несколькими значениями и о включении функции «Выделить все» см. на странице [How to have a Select All Multivalue Cascading Parameter](https://go.microsoft.com/fwlink/?LinkId=184757).  
  
### <a name="to-create-the-main-dataset-with-a-query-that-includes-multiple-related-parameters"></a>Создание основного набора данных с запросом, включающим несколько связанных параметров  
  
1.  В области данных отчета щелкните правой кнопкой мыши источник данных и выберите команду **Добавить набор данных**.  
  
2.  В поле **Имя**введите имя набора данных.  
  
3.  В поле **Источник данных**выберите имя источника данных или нажмите кнопку **Создать** для создания нового источника данных.  
  
4.  В поле **Тип запроса**выберите тип запроса для выбранного источника данных. В этом разделе предполагается использование запроса типа **Текст** .  
  
5.  В поле **Запрос**введите запрос, используемый для получения данных для этого отчета. Запрос должен включать следующие части:  
  
    1.  Список полей источника данных. Например, в инструкции [!INCLUDE[tsql](../../includes/tsql-md.md)] инструкция SELECT указывает список имен столбцов базы данных из заданной таблицы или представления.  
  
    2.  По одному параметру запроса для каждого каскадного параметра. Параметр запроса ограничивает данные, полученные из источника данных, путем указания определенных значений для включения или исключения из запроса. Как правило, параметры запроса появляются в предложении ограничения запроса. Например, в инструкции SELECT языка [!INCLUDE[tsql](../../includes/tsql-md.md)] параметры запроса обнаруживаются в предложении WHERE. Дополнительные сведения см. в разделе «Фильтрация строк с помощью предложений WHERE и HAVING» в документации по службам [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] в [электронной документации по SQL Server](https://go.microsoft.com/fwlink/?linkid=120955).  
  
6.  Нажмите кнопку **Запустить** (**!**). После включения параметров запроса и запуска запроса параметры отчета, соответствующие параметрам запроса, создаются автоматически.  
  
    > [!NOTE]  
    >  Порядок параметров запроса при первом запуске запроса определяет порядок их создания в отчете. Способ изменения порядка см. в разделе [Изменение порядка параметров отчета (построитель отчетов и службы SSRS)](change-the-order-of-a-report-parameter-report-builder-and-ssrs.md).  
  
7.  [!INCLUDE[clickOK](../../includes/clickok-md.md)]  
  
 Далее создается набор данных, предоставляющий значения для независимого параметра.  
  
### <a name="to-create-a-dataset-to-provide-values-for-an-independent-parameter"></a>Создание набора данных, предоставляющего значения для независимого параметра  
  
1.  В области данных отчета щелкните правой кнопкой мыши источник данных и выберите команду **Добавить набор данных**.  
  
2.  В поле **Имя**введите имя набора данных.  
  
3.  В поле **Источник данных**удостоверьтесь, что имя совпадает с именем источника данных, выбранного в шаге 1.  
  
4.  В поле **Тип запроса**выберите тип запроса для выбранного источника данных. В этом разделе предполагается использование запроса типа **Текст** .  
  
5.  В поле **Запрос**введите запрос, используемый для получения значений для этого параметра. Запросы для независимых параметров обычно не содержат параметры запроса. Например, чтобы создать запрос для параметра, обеспечивающего все значения категории, можно использовать следующую инструкцию [!INCLUDE[tsql](../../includes/tsql-md.md)] :  
  
    ```  
    SELECT DISTINCT <column name> FROM <table>  
    ```  
  
     Команда SELECT DISTINCT удаляет повторяющиеся значения из результирующего набора, что позволяет получить каждое уникальное значение из указанного столбца указанной таблицы.  
  
     Нажмите кнопку **Запустить** (**!**). Результирующий набор показывает доступные значения для первого параметра.  
  
6.  [!INCLUDE[clickOK](../../includes/clickok-md.md)]  
  
 Далее задаются свойства первого параметра для использования данного набора данных в целях заполнения его доступных значений во время выполнения.  
  
### <a name="to-set-available-values-for-a-report-parameter"></a>Задание допустимых значений параметра отчета  
  
1.  В области данных отчета в папке "Параметры" щелкните первый параметр правой кнопкой мыши и выберите **Свойства параметра**.  
  
2.  В поле **Имя**проверьте правильность имени параметра.  
  
3.  Нажмите кнопку **Допустимые значения**.  
  
4.  Щелкните **Получать значения из запроса**. Появится три поля.  
  
5.  В раскрывающемся списке поля **Набор данных**выберите имя набора данных, созданного в предыдущей процедуре.  
  
6.  В поле **Значение** щелкните имя поля, предоставляющего значение параметра.  
  
7.  В поле **Метка** щелкните имя поля, предоставляющего метку параметра.  
  
8.  [!INCLUDE[clickOK](../../includes/clickok-md.md)]  
  
 Далее создается набор данных, предоставляющий значения для зависимого параметра.  
  
### <a name="to-create-a-dataset-to-provide-values-for-a-dependent-parameter"></a>Создание набора данных, предоставляющего значения для зависимого параметра  
  
1.  В области данных отчета щелкните правой кнопкой мыши источник данных и выберите команду **Добавить набор данных**.  
  
2.  В поле **Имя**введите имя набора данных.  
  
3.  В поле **Источник данных**удостоверьтесь, что имя совпадает с именем источника данных, выбранного в шаге 1.  
  
4.  В поле **Тип запроса**выберите тип запроса для выбранного источника данных. В этом разделе предполагается использование запроса типа **Текст** .  
  
5.  В поле **Запрос**введите запрос, используемый для получения значений для этого параметра. Запросы для зависимых параметров обычно включают параметры запроса для каждого параметра, от которого зависит данный параметр. Например, чтобы создать запрос для параметра, обеспечивающего все значения подкатегории (зависимый параметр) для категории (независимый параметр), можно использовать следующую инструкцию [!INCLUDE[tsql](../../includes/tsql-md.md)] :  
  
    ```  
    SELECT DISTINCT Subcategory FROM <table>   
    WHERE (Category = @Category)  
    ```  
  
     В предложении WHERE Категория — это имя поля из \<table> и @Category является параметром запроса. Эта инструкция возвращает список подкатегорий для категории, указанной в параметре @Category. Во время выполнения данное значение будет заполнено значением, которое выбирает пользователь для параметра отчета с тем же именем.  
  
6.  [!INCLUDE[clickOK](../../includes/clickok-md.md)]  
  
 Далее устанавливаются свойства второго параметра в целях использования этого набора данных для наполнения его доступных значений во время выполнения.  
  
### <a name="to-set-available-values-for-a-report-parameter"></a>Задание допустимых значений параметра отчета  
  
1.  В области данных отчета в папке "Параметры" щелкните первый параметр правой кнопкой мыши и выберите **Свойства параметра**.  
  
2.  В поле **Имя**проверьте правильность имени параметра.  
  
3.  Нажмите кнопку **Допустимые значения**.  
  
4.  Щелкните **Получать значения из запроса**.  
  
5.  В раскрывающемся списке поля **Набор данных**выберите имя набора данных, созданного в предыдущей процедуре.  
  
6.  В поле **Значение** щелкните имя поля, предоставляющего значение параметра.  
  
7.  В поле **Метка** щелкните имя поля, предоставляющего метку параметра.  
  
8.  [!INCLUDE[clickOK](../../includes/clickok-md.md)]  
  
### <a name="to-test-the-cascading-parameters"></a>Проверка каскадирования параметров  
  
1.  Нажмите кнопку **Запустить**.  
  
2.  В раскрывающемся списке выберите значение для первого, независимого параметра.  
  
     Обработчик отчетов запускает запрос набора данных для следующего параметра и передает ему значение, выбранное для первого параметра. Раскрывающийся список для второго параметра заполняется доступными значениями с учетом значения первого параметра.  
  
3.  Выберите значение в раскрывающемся списке для второго, зависимого параметра.  
  
     После выбора последнего параметра отчет не запускается автоматически, что позволяет переопределить выбор.  
  
4.  Нажмите кнопку **Просмотреть отчет**. Экран отчета обновляется на основании выбранных параметров.  
  
## <a name="see-also"></a>См. также:  
 [Добавить, изменить или удалить параметр отчета &#40;построитель отчетов и SSRS&#41;](add-change-or-delete-a-report-parameter-report-builder-and-ssrs.md)   
 [Параметры отчета &#40;построитель отчетов и конструктор отчетов&#41;](report-parameters-report-builder-and-report-designer.md)   
 [Учебник. Добавление параметра в отчет &#40;построитель отчетов&#41;](../tutorial-add-a-parameter-to-your-report-report-builder.md)   
 [Учебники &#40;построитель отчетов&#41;](../report-builder-tutorials.md)   
 [Добавление фильтров набора данных, фильтров области данных и групповых фильтров &#40;построитель отчетов и SSRS&#41;](add-dataset-filters-data-region-filters-and-group-filters.md)   
 [Внедренные и общие наборы данных отчета (построитель отчетов и службы SSRS)](../report-data/report-embedded-datasets-and-shared-datasets-report-builder-and-ssrs.md)  
  
  
