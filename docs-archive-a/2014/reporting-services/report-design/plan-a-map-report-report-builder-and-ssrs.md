---
title: Планирование отчета-карты (построитель отчетов и службы SSRS) | Документы Майкрософт
ms.custom: ''
ms.date: 06/14/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: reporting-services-native
ms.topic: conceptual
ms.assetid: dc0c27a4-7e31-4a15-a0bc-3a02479d5b02
author: maggiesMSFT
ms.author: maggies
manager: kfile
ms.openlocfilehash: 9403af12887b1850713a212e90ac70305b390d52
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87727957"
---
# <a name="plan-a-map-report-report-builder-and-ssrs"></a>Планирование отчета-карты (построитель отчетов и службы SSRS)
  Хорошее представление сведений в отчетах может помочь их пониманию и выполнению действий. Для представления аналитических данных в отчете, например данных о продажах или демографических данных по географическим районам, можно добавить в отчет карту. Карта может содержать несколько уровней, каждый уровень содержит элементы карты, определенные в конкретном типе пространственных данных: точки, представляющие расположение, линии, представляющие маршруты, или многоугольники, представляющие области. Можно соотнести аналитические данные с каждым элементом карты на каждом уровне.  
  
> [!NOTE]  
>  [!INCLUDE[ssRBRDDup](../../includes/ssrbrddup-md.md)]  
  
##  <a name="specify-the-purpose-of-the-map"></a><a name="MapPurpose"></a> Указание назначения карты  
 Хорошо спроектированный отчет предоставляет сведения, помогающие пользователям предпринимать действия для решения проблем. Чтобы создать полезный и понятный облик карты, определите, на какие вопросы она должна отвечать. Например, на карте можно отобразить следующие типы данных, определяющие рыночные возможности:  
  
-   относительный объем продаж каждого магазина;  
  
-   объемы продаж, категоризованные в зависимости от демографических характеристик заказчиков, основанных на их расположении относительно магазинов;  
  
-   сравнительные объемы продаж или другие финансовые данные о территории;  
  
-   сравнительные объемы продаж для различных скидочных стратегий для нескольких магазинов.  
  
 После определения назначения карты следует выяснить, какие данные требуются. Аналитические данные поступают из наборов данных отчета. Данные о местоположении поступают из источников пространственных данных, которые нужно указать.  
  
 
  
##  <a name="specify-the-spatial-and-analytical-data"></a><a name="Data"></a> Указание пространственных и аналитических данных  
 Следует указать, какие пространственные и аналитические данные нужны.  
  
 Аналитические данные могут браться из набора данных отчета, из образцов данных из карты в галерее карт или из аналитических данных, включенных в пространственные данные в файле фигуры ESRI.  
  
 Пространственные данные бывают трех видов: многоугольники, линии или точки.  
  
-   **Точки.** Точки задают местоположения, например город или адрес магазина, ресторана или конференц-центра. Для каждого местоположения, которое нужно отобразить на карте, необходимо предоставить пространственные данные. После добавления точек на карту можно отобразить маркер на месте точки и задать его размер, тип и цвет.  
  
-   **Линии.** Линии представляют собой пути или маршруты, например маршруты доставки или авиатрассы. После добавления линии на карту можно изменять ее цвет и толщину.  
  
-   **Многоугольники.** Многоугольники определяют области, например: регионы, территории, страны, штаты, провинции, города, площади, выделенные под города, почтовые индексы, телефонные коды или административные единицы. После добавления многоугольника на карту, кроме отображения его структуры, можно отобразить маркер в его центре.  
  
 После того как нужные пространственные данные определены, следует найти их источник.  
  
### <a name="find-a-source-for-spatial-data"></a>Поиск источника пространственных данных  
 Для получения пространственных данных, используемых на карте, можно воспользоваться следующими источниками:  
  
-   Шейп-файлы ESRI, включая общедоступные файлы, которые можно найти в Интернете.  
  
-   Пространственные данные из источников пространственных данных [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .  
  
-   Карты из отчетов в галерее карт.  
  
-   Сторонние сайты, которые содержат пространственные данные, такие как файлы фигуры ESRI или пространственные данные [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .  
  
-   Мозаики Bing Map, обеспечивающие фон для просмотра карты. Чтобы отобразить мозаику на карте, сервер отчетов должен быть настроен для поддержки веб-служб Bing Map.  
  
 Дополнительные сведения см. в разделе «Где можно получить файлы фигур ESRI?». статьи [Мастер карт и мастер слоев карт (построитель отчетов и службы SSRS)](map-wizard-and-map-layer-wizard-report-builder-and-ssrs.md).  
  
 Пространственные данные могут иметь политическую окраску и быть защищены авторским правом. Проверьте используемую терминологию и заявление о конфиденциальности источника пространственных данных, чтобы понять, как их можно использовать в отчете.  
  
 После того как данные найдены, их можно внедрить в определение отчета или получать динамически при его обработке. Дополнительные сведения см. в разделе [Баланс между размером определения отчета и временем обработки отчета](#Embedding) ниже.  
  
### <a name="determine-the-spatial-data-and-the-spatial-data-match-fields"></a>Определение пространственных данных и полей соответствия пространственных данных  
 Чтобы отобразить аналитические данные на карте и изменить размер, цвет и тип маркера, нужно указать поля, связывающие пространственные и аналитические данные.  
  
 Пространственные данные должны содержать следующие поля.  
  
-   **Spatial data.** Поле пространственных данных, содержащее наборы координат, задающие каждую точку, линию или многоугольник.  
  
-   **Поля соответствия.** Одно или более полей, которые уникальным образом идентифицируют каждое из полей пространственных данных. Например, для точки местоположения магазина, можно использовать название магазина. Если его название не уникально в рамках пространственных данных, можно включить также название города.  
  
 Поля соответствия используются, чтобы связать пространственные данные с аналитическими.  
  
### <a name="determine-the-analytical-data-and-the-analytical-data-match-fields"></a>Определение аналитических данных и полей соответствия аналитических данных  
 После определения пространственных данных следует определить аналитические данные. Аналитические данные могут поступать из одного из следующих источников.  
  
-   Набор данных существующего отчета. Поля, которые заданы как простые выражения полей, например: [Продажи] или =Поля!Продажи.Значение.  
  
-   Поля данных из источника пространственных данных. Поля, заданные ключевыми словами, начинающимися с # и содержащими имя поля источника пространственных данных.  
  
 Следует определить имена полей соответствия.  
  
-   Поля соответствия. Одно или более полей, содержащих ту же информацию, что и поля соответствия пространственных данных, чтобы связать пространственные данные с аналитическими. У полей соответствия должны совпадать как тип данных, так и форматирование.  
  
 После определения источника пространственных данных, пространственных данных, источника аналитических данных, аналитических данных и полей соответствия, можно решить, какой тип карты добавить в отчет.  
  

  
##  <a name="choose-a-map-type"></a><a name="MapType"></a> Выбор типа карты  
 При запуске мастера карты в отчет добавляется карта и первый ее слой. Мастер позволяет добавить карту одного из следующих типов:  
  
-   базовая карта, отображающая местоположения без связанных аналитических данных;  
  
-   карта, которая содержит по одному аналитическому значению, связанному с каждым элементом карты, например: объемы продаж для каждого магазина;  
  
-   карта, которая имеет более чем по одному аналитическому значению, связанному с каждым элементом карты, например: количество заказчиков и объемы продаж для каждого магазина.  
  
 В следующей таблице содержатся описания всех типов карт. Все типы карт позволяют выбирать тему, управляющую палитрой, стилем границы и шрифтом отображения меток.  
  
|Значок мастера|Стиль слоя|Тип слоя|Описание и параметры|  
|-----------------|-----------------|----------------|-----------------------------|  
|![rs_MapType_Polygon_Basic](../media/rs-maptype-polygon-basic.gif "rs_MapType_Polygon_Basic")|Базовая карта|Многоугольник|Карта, содержащая только области, например территории продаж.<br /><br /> Параметры: цвет изменяется согласно палитре, или используется отдельный цвет. Палитра — это стандартный набор цветов. Если использованы все цвета палитры, начинают использоваться оттенки цветов.|  
|![rs_MapType_Polygon_ColorAnalytical](../media/rs-maptype-polygon-coloranalytical.gif "rs_MapType_Polygon_ColorAnalytical")|Цветная аналитическая карта|Многоугольник|Карта, которая отображает аналитические данные путем изменения цвета, например данные о продажах по области.|  
|![rs_MapType_Polygon_Bubble](../media/rs-maptype-polygon-bubble.gif "rs_MapType_Polygon_Bubble")|Пузырьковая карта|Многоугольник|Карта, которая отображает аналитические данные путем изменения размера пузырьков в центре областей, например данные о продажах по области.<br /><br /> Параметры: цвет областей изменяется в зависимости от второго аналитического поля, и задаются цветовые правила.|  
|![rs_MapType_Line_Basic](../media/rs-maptype-line-basic.gif "rs_MapType_Line_Basic")|Базовая карта линий|график;|Карта, отображающая только линии, например маршруты доставки.<br /><br /> Параметры: цвет изменяется согласно палитре, или используется отдельный цвет.|  
|![rs_MapType_Line_Analytical](../media/rs-maptype-line-analytical.gif "rs_MapType_Line_Analytical")|Аналитическая карта линий|график;|Карта, на которой изменяются цвет и толщина линий, например количество доставленных пакетов и метрика своевременности для маршрута.<br /><br /> Параметры: толщина линии изменяется в зависимости от одного аналитического поля, ее цвет — в зависимости от другого, и задаются цветовые правила.|  
|![rs_MapType_Marker_Basic](../media/rs-maptype-marker-basic.gif "rs_MapType_Marker_Basic")|Базовая карта с отметками|Точка|Карта, отображающая маркер для каждого местоположения, например города.<br /><br /> Параметры: цвет изменяется согласно палитре, или используется отдельный цвет, и изменяется стиль маркера.|  
|![rs_MapType_Marker_Bubble](../media/rs-maptype-marker-bubble.gif "rs_MapType_Marker_Bubble")|Пузырьковая карта с отметками|Точка|Карта, отображающая пузырек для каждого местоположения, причем размер пузырька зависит от аналитического поля данных, например данных о продажах по городу.<br /><br /> Параметры: цвет пузырьков изменяется в зависимости от второго аналитического поля, и задаются цветовые правила.|  
|![rs_MapType_Marker_Analytical](../media/rs-maptype-marker-analytical.gif "rs_MapType_Marker_Analytical")|Аналитическая карта с отметками|Точка|Карта, отображающая маркер для каждого местоположения, причем его цвет, размер и тип зависят от аналитических данных, например наиболее продаваемых продуктов, диапазона прибылей и скидочной политики.<br /><br /> Параметры: тип маркера изменяется в зависимости от одного аналитического поля, размер маркера — в зависимости от другого поля, цвет маркера — в зависимости от третьего аналитического поля, и задаются цветовые правила.|  
  
 После добавления карты с помощью мастера карт можно создать дополнительные уровни или изменить параметры для уровней с помощью мастера уровней карты. Дополнительные сведения о мастере см. в разделе [Мастер карт и мастер слоев карт (построитель отчетов и службы SSRS)](map-wizard-and-map-layer-wizard-report-builder-and-ssrs.md).  
  
 Можно настроить отображение или параметры данных для каждого слоя в отдельности. Дополнительные сведения о настройке карты после запуска мастера см. в разделе [Настройка данных и отображения карты или слоя карты (построитель отчетов и службы SSRS)](customize-the-data-and-display-of-a-map-or-map-layer-report-builder-and-ssrs.md).  
  
 
  
##  <a name="plan-for-legends"></a><a name="Legend"></a> Планирование условных обозначений  
 Чтобы помочь пользователям интерпретировать карту, можно добавить разнообразные условные обозначения, цветовую шкалу и шкалу расстояний. При конструировании карты спланируйте, где должны отображаться условные обозначения. Можно задать следующие сведения для всех условных обозначений.  
  
-   **Расположение условных обозначений.** Например, условные обозначения могут располагаться внутри или вне области просмотра, а также в 12 дискретных местоположениях относительно области просмотра.  
  
-   **Стили условных обозначений**. Например, можно указать стиль шрифта, стиль границы, линию разделителя и свойства заливки.  
  
-   **Заголовок условных обозначений.** Например, можно задать текст заголовка, и, независимо от этого, задать, отображать ли заголовок условных обозначений или цветовой шкалы.  
  
-   **Макет условных обозначений карты.** Например, условные обозначения карты могут отображаться в высоких или в широких таблицах.  
  
 Содержимое условных обозначений создается автоматически во время обработки отчета на основании параметров правил, заданных для каждого слоя.  
  
 По умолчанию результаты применения всех правил для всех слоев отображаются в первых условных обозначениях. Можно создать несколько условных обозначений, а затем для каждого правила назначить те из них, которые следует использовать для отображения результатов.  
  
 Дополнительные сведения см. в разделах [Изменение параметров отображения многоугольников, линий и точек с помощью правил и аналитических данных (построитель отчетов и службы SSRS)](vary-polygon-line-and-point-display-by-rules-and-analytical-data.md) и [Изменение условных обозначений карты, цветовой шкалы и связанных правил (построитель отчетов и службы SSRS)](change-map-legends-color-scale-and-associated-rules-report-builder-and-ssrs.md).  
  

  
##  <a name="balance-report-definition-size-and-report-processing-time"></a><a name="Embedding"></a> Баланс между размером определения отчета и временем обработки отчета  
 Чтобы сконструировать хороший отчет с картами, следует сбалансировать параметры, управляющие производительностью отчета и размером определения отчета. Элементы карты, основанные на пространственных данных или мозаиках Bing map, могут быть статическими и внедренными в определение отчета или динамическими и создаваться каждый раз при обработке отчета. Рекомендуется оценить издержки, связанные со статическим или динамическим доступом к данным карты и найти баланс, удовлетворительно работающий при всех обстоятельствах. При принятии решения учитывайте следующие данные.  
  
-   Внедренные элементы карты могут значительно увеличить размер определения отчета, но сокращают время, необходимое для отображения карты в отчете. Сервер отчетов может иметь ограничения по размеру, которые нужно учитывать.  
  
-   Определение отчета задает ограничения на число точек пространственных данных, которые могут быть обработаны, и отдельное значение, которое задает количество элементов карты, которое можно включить в определение отчета.  
  
-   Динамические элементы карты сокращают размер определения отчета, но удлиняют время, необходимое для обработки и подготовки карты к просмотру.  
  
-   Если источник пространственных данных расположен на локальном компьютере, элементы карты всегда внедряются в определение отчета. Это включает пространственные данные из галереи карт и локальные файлы фигур ESRI.  
  
 Чтобы использовать динамические пространственные данные, следует расположить источник пространственных данных на сервере отчетов. Если отчет конструируется в среде [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)], источники пространственных данных могут быть добавлены в проект и опубликованы на сервере отчетов вместе с определением отчета. Если же для создания отчета используется построитель отчетов, следует сперва передать пространственные данные на сервер отчетов, а затем в мастере или в свойствах слоя указать источник пространственных данных для слоя карты.  
  

  
## <a name="see-also"></a>См. также:  
 [Настройка данных и отображения карты или слоя карты (построитель отчетов и службы SSRS)](customize-the-data-and-display-of-a-map-or-map-layer-report-builder-and-ssrs.md)   
 [Учебник. Отчет-карта (построитель отчетов)](../tutorial-map-report-report-builder.md)   
 [Карты (построитель отчетов и службы SSRS)](maps-report-builder-and-ssrs.md)   
 [Устранение неполадок в отчетах: отчеты-карты (построитель отчетов и службы SSRS)](troubleshoot-reports-map-reports-report-builder-and-ssrs.md)  
  
  
