---
title: Журнал трассировки для службы сервера отчетов | Документы Майкрософт
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: reporting-services-native
ms.topic: conceptual
helpviewer_keywords:
- logs [Reporting Services], trace
- traces [Reporting Services]
- system information [Reporting Services]
- versions [Reporting Services]
ms.assetid: 2fde08b2-137d-4f4b-88e5-216030216e0d
author: maggiesMSFT
ms.author: maggies
manager: kfile
ms.openlocfilehash: e7789569a276becf03d64bf6920c53af24331cab
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87657006"
---
# <a name="report-server-service-trace-log"></a>Журнал трассировки службы сервера отчетов
  Журнал трассировки сервера отчетов [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] представляет собой текстовый файл ASCII, который содержит детализированную информацию о служебных операциях Сервера Отчетов, включая операции, выполняемые веб-службой Сервера Отчетов, Диспетчером Отчетов и фоновой обработкой. Файл журнала трассировки содержит избыточные сведения, которые записываются в другие файлы журналов, а также дополнительные сведения, недоступные иным способом. Данные журнала трассировки могут оказаться полезными при отладке приложения, содержащего сервер отчетов, либо при изучении конкретной проблемы, зафиксированной в журнале событий или журнале выполнения.

> [!NOTE]
>  В предыдущих версиях имелось несколько журналов трассировки, по одному на каждое приложение. Следующие файлы устарели и больше не создаются в [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] и более поздних версиях: ReportServerWebApp_ *\<timestamp>* . log, ReportServer_ *\<timestamp>* . log и ReportServerService_main_ *\<timestamp>* . log.

 **В этом разделе:**

-   [Где находятся файлы журналов сервера отчетов?](#bkmk_view_log)

-   [Параметры конфигурации трассировки](#bkmk_trace_configuration_settings)

-   [Добавление настроек пользовательской конфигурации для указания местоположения файла дампа](#bkmk_add_custom)

-   [Поля файла журнала](#bkmk_log_file_fields)

##  <a name="where-are-the-report-server-log-files"></a><a name="bkmk_view_log"></a>Где находятся файлы журналов сервера отчетов?
 Файлы журнала трассировки `ReportServerService_<timestamp>.log` и находятся в следующей папке:

 `C:\Program Files\Microsoft SQL Server\MSRS12.MSSQLSERVER\Reporting Services\LogFiles`

 Журнал трассировки создается ежедневно, при этом первая запись создается после полуночи (по местному времени) и каждый раз при перезапуске службы. Отметки времени создаются на основе времени по Гринвичу (UTC). Этот файл имеет формат EN-US. По умолчанию размер журналов трассировки ограничен 32 МБ, а срок их хранения — 14 дней.

 Ознакомьтесь с коротким видео, демонстрирующим использование Microsoft Power Query для просмотра файлов журнала [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] .

 ![Просмотр видео о журналах Power Query и SSRS](../media/generic-video-thumbnail.png "Просмотр видео о журналах Power Query и SSRS")

##  <a name="trace-configuration-settings"></a><a name="bkmk_trace_configuration_settings"></a>Параметры конфигурации трассировки
 Управление поведением журнала трассировки осуществляется в файле конфигурации **ReportingServicesrService.exe.config**. Файл конфигурации находится по следующему пути к папке:

 `\Program Files\Microsoft SQL Server\MSRS12.<instance name>\Reporting Services\ReportServer\bin`.

 Следующий пример иллюстрирует XML-структуру параметров `RStrace`. Значение параметра `DefaultTraceSwitch` определяет тип информации, добавляемой в журнал. За исключением атрибута `Components`, значения для настройки `RStrace` одни и те же в разных файлах конфигурации.

```
<system.diagnostics>
      <switches>
          <add name="DefaultTraceSwitch" value="3" />
      </switches>
</system.diagnostics>
<RStrace>
      <add name="FileName" value="ReportServerService_" />
      <add name="FileSizeLimitMb" value="32" />
      <add name="KeepFilesForDays" value="14" />
      <add name="Prefix" value="tid, time" />
      <add name="TraceListeners" value="file" />
      <add name="TraceFileMode" value="unique" />
      <add name="Components" value="all" />
</RStrace>
```

 Сведения об отдельных настройках приведены в следующей таблице.

|Параметр|Описание|
|-------------|-----------------|
|`RStrace`|Задает пространства имен для ошибок и трассировки.|
|`DefaultTraceSwitch`|Задает уровень данных, записываемых в журнал трассировки ReportServerService. Каждый уровень содержит данные, передаваемые более низкими уровнями. Отключать трассировку не рекомендуется. Допустимые значения:<br /><br /> 0 = Отключить трассировку Файл журнала ReportServerService.exe включен по умолчанию. Чтобы отключить его, установите уровень трассировки равным 0.<br /><br /> 1 = Исключения и перезапуски<br /><br /> 2 = Исключения, перезапуски, предупреждения<br /><br /> 3 = Исключения, перезапуски, предупреждения, сообщения о состоянии (по умолчанию)<br /><br /> 4 = Подробный режим|
|**FileName**|Задает первую часть имени файла журнала. Вторую часть имени определяет значение, заданное в аргументе `Prefix`.|
|**FileSizeLimitMb**|Задает максимальный размер журнала трассировки. Размер измеряется в мегабайтах. Допустимые значения: от 0 до максимально допустимого целого числа. Значение по умолчанию: 32. При указании значения 0 или отрицательного числа сервер отчетов воспримет их как 1.<br /><br /> Размером файла можно управлять, устанавливая уровни трассировки (от 0 до 4), чтобы управлять объемом записываемого содержимого. Можно также указать, какие компоненты отслеживать. Если максимальный размер файла журнала будет достигнут за 14 дней до даты истечения срока хранения, то более старые записи будут замещаться более новыми.|
|**KeepFilesForDays**|Определяет, через сколько дней журнал трассировки будет удален. Допустимые значения: от 0 до максимально допустимого целого числа. Значение по умолчанию: 14. При указании значения 0 или отрицательного числа сервер отчетов воспримет их как 1.|
|`Prefix`|Задает формируемое значение, позволяющее отличить один экземпляр журнала от другого. По умолчанию к именам файлов журнала трассировки добавляются значения отметок времени. Значение этой величины — «tid, time». Не изменяйте этот параметр.|
|**TraceListeners**|Задает, куда будет выводиться содержимое журнала трассировки. Можно через запятую задать несколько расположений. Допустимые значения:<br /><br /> DebugWindow<br /><br /> File (по умолчанию)<br /><br /> StdOut|
|**TraceFileMode**|Определяет, содержат ли журналы трассировки данные за 24-часовой период. Необходимо, чтобы каждому компоненту за каждый день соответствовал один уникальный журнал трассировки. Значение этой величины — Unique (по умолчанию). Не изменяйте это значение.|
|`Components`|Указывает компоненты, для которых формируется информация журнала трассировки, и уровень трассировки в следующем формате:<br /><br /> \<component category>:\<tracelevel><br /><br /> Категории компонентов можно установить следующим образом.<br />Параметр `All` используется для трассировки общей активности сервера отчетов для всех процессов, которые не разбиваются на конкретные категории.<br />Параметр `RunningJobs` применяется для трассировки формирования отчета или операции подписки.<br />Параметр `SemanticQueryEngine` используется для трассировки семантических запросов, которые обрабатываются, когда пользователь проводит нерегламентированный просмотр данных отчета на основе моделей.<br />Параметр `SemanticModelGenerator` применяется для трассировки формирования модели.<br />Параметр `http` используется для включения файла журнала HTTP сервера отчетов. Дополнительные сведения см. в разделе [Report Server HTTP Log](report-server-http-log.md).<br /><br /> <br /><br /> Допустимыми значениями уровня трассировки являются следующие.<br /><br /> 0 = Отключить трассировку<br /><br /> 1 = Исключения и перезапуски<br /><br /> 2 = Исключения, перезапуски, предупреждения<br /><br /> 3 = Исключения, перезапуски, предупреждения, сообщения о состоянии (по умолчанию)<br /><br /> 4 = Подробный режим<br /><br /> Значение по умолчанию для сервера отчетов: "all:3".<br /><br /> Можно указать все или некоторые компоненты (`all`, `RunningJobs`, `SemanticQueryEngine`, `SemanticModelGenerator`). Если нежелательно формировать информацию для конкретного компонента, можно отключить его трассировку (например, «SemanticModelGenerator:0»). Не отключайте трассировку для компонента `all`.<br /><br /> Если уровень трассировки компонента не указан, используется значение, указанное для параметра `DefaultTraceSwitch`. Например, если указать «all,RunningJobs,SemanticQueryEngine,SemanticModelGenerator», то для всех компонентов будет использоваться уровень трассировки по умолчанию.<br /><br /> Можно установить «SemanticQueryEngine:4», если желательно видеть инструкции Transact-SQL, формируемые для каждого семантического запроса. Инструкции Transact-SQL записываются в журнал трассировки. Следующий пример иллюстрирует настройку конфигурации, которая добавляет в журнал инструкции Transact-SQL:<br /><br /> \<add name="Components" value="all,SemanticQueryEngine:4" />|

##  <a name="adding-custom-configuration-setting-to-specify-a-dump-file-location"></a><a name="bkmk_add_custom"></a>Добавление настраиваемого параметра конфигурации для указания расположения файла дампа
 Можно добавить пользовательскую настройку для задания местоположения, которое программа «Доктор Ватсон» для Windows использует для хранения файла дампа. Пользовательское значение равно `Directory`. Следующий пример иллюстрирует, как эта настройка конфигурации указывается в разделе `RStrace`:

```
<add name="Directory" value="U:\logs\" />
```

 Дополнительные сведения см. в статье [913046 базы знаний](https://support.microsoft.com/?kbid=913046) на сайте [!INCLUDE[msCoName](../../includes/msconame-md.md)] .

##  <a name="log-file-fields"></a><a name="bkmk_log_file_fields"></a>Поля файла журнала
 В журнале трассировки содержатся следующие данные:

-   сведения о системе, в том числе операционной системе, ее версии, числе процессоров и памяти;

-   [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] ;

-   события, регистрируемые в журнале приложений;

-   исключения, формируемые сервером отчетов;

-   предупреждения о нехватке ресурсов, регистрируемые сервером отчетов;

-   входящие пакеты SOAP и сводные исходящие пакеты SOAP;

-   сведения о заголовке HTTP, трассировке стека и трассировки при отладке.

 Можно просмотреть сведения в журнале трассировки, чтобы определить, была ли выполнена доставка отчета, кто его получил, и сколько попыток доставки было сделано. Журналы трассировки также фиксируют операции при выполнении отчетов и переменные окружения, действующие при обработке отчетов. Ошибки и исключения также записываются в журналы трассировки. Например, можно узнать об ошибках превышения времени ожидания (отображаемых как записи `ThreadAbortExceptions`).

## <a name="see-also"></a>См. также:
 [Reporting Services файлы журналов и источники](../report-server/reporting-services-log-files-and-sources.md) [ошибок и событий справочник по &#40;Reporting Services&#41;](../troubleshooting/errors-and-events-reference-reporting-services.md)


