---
title: Настройка сервера отчетов в кластере с балансировкой сетевой нагрузки | Документы Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: reporting-services-native
ms.topic: conceptual
helpviewer_keywords:
- report servers [Reporting Services], network load balancing
ms.assetid: 6bfa5698-de65-43c3-b940-044f41c162d3
author: maggiesMSFT
ms.author: maggies
manager: kfile
ms.openlocfilehash: 5de36ab620db63294d2a5ec98fad6c45af201d26
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87665823"
---
# <a name="configure-a-report-server-on-a-network-load-balancing-cluster"></a><span data-ttu-id="467fd-102">настроить сервер отчетов в кластере с балансированием сетевой нагрузки</span><span class="sxs-lookup"><span data-stu-id="467fd-102">Configure a Report Server on a Network Load Balancing Cluster</span></span>
  <span data-ttu-id="467fd-103">Если настраивается масштабное развертывание сервера отчетов для запуска в кластере с балансировкой сетевой нагрузки, необходимо выполнить следующие действия.</span><span class="sxs-lookup"><span data-stu-id="467fd-103">If you are configuring a report server scale-out to run on a Network Load Balancing (NLB) cluster, you must do the following:</span></span>  
  
-   <span data-ttu-id="467fd-104">Проверьте доступность NLB-кластера через имя виртуального сервера, соответствующее IP-адресу виртуального сервера.</span><span class="sxs-lookup"><span data-stu-id="467fd-104">Ensure that the NLB cluster is accessible through a virtual server name that maps to the virtual server IP address.</span></span> <span data-ttu-id="467fd-105">Имя виртуального сервера необходимо, чтобы настроить единую точку входа в NLB-кластер.</span><span class="sxs-lookup"><span data-stu-id="467fd-105">A virtual server name is necessary so that you can configure a single point of entry to the NLB cluster.</span></span> <span data-ttu-id="467fd-106">При настройке URL-адреса для каждого экземпляра сервера отчетов имя виртуального сервера указывается как узел.</span><span class="sxs-lookup"><span data-stu-id="467fd-106">When you configure a URL for each report server instance, you will specify the virtual server name as the host.</span></span>  
  
-   <span data-ttu-id="467fd-107">Настройте проверку состояния представления для интерактивного просмотра отчетов.</span><span class="sxs-lookup"><span data-stu-id="467fd-107">Configure view state validation to support interactive report viewing.</span></span> <span data-ttu-id="467fd-108">Интерактивные отчеты обычно подготавливаются к просмотру несколько раз в течение одного сеанса пользователя, чтобы отобразить новые или другие данные в ответ на действия пользователя.</span><span class="sxs-lookup"><span data-stu-id="467fd-108">Interactive reports are typically rendered numerous times during a single user session to visualize new or different data in response to user actions.</span></span> <span data-ttu-id="467fd-109">Благодаря настройке проверки состояния представления сохраняется степень непрерывности внутри сеанса пользователя независимо от того, какие службы сервера отчетов были запрошены.</span><span class="sxs-lookup"><span data-stu-id="467fd-109">By configuring view state validation, continuity is preserved within the user session regardless of which report server services the actual request.</span></span>  
  
 [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] <span data-ttu-id="467fd-110">не обеспечивают ни балансировку нагрузки в конфигурации масштабного развертывания, ни описание единой точки доступа через общий URL-адрес.</span><span class="sxs-lookup"><span data-stu-id="467fd-110">does not provide functionality for load balancing a scale-out deployment or for defining a single point of access through a shared URL.</span></span> <span data-ttu-id="467fd-111">Для поддержки конфигурации масштабного развертывания служб [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] необходима отдельная реализация программного или аппаратного решения NLB-кластера.</span><span class="sxs-lookup"><span data-stu-id="467fd-111">You must implement a separate software or hardware NLB cluster solution to support a [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] scale-out deployment.</span></span>  
  
 <span data-ttu-id="467fd-112">Можно либо установить службы [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] на узлах, которые уже входят в NLB-кластер, либо сначала настроить масштабное развертывание, а затем приступать к установке программного обеспечения кластера.</span><span class="sxs-lookup"><span data-stu-id="467fd-112">You can install [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] on nodes that are already part of an NLB cluster, or you can configure a scale-out deployment first and then install cluster software.</span></span>  
  
## <a name="steps-for-report-server-deployment-on-an-nlb-cluster"></a><span data-ttu-id="467fd-113">Шаги масштабного развертывания сервера отчетов на NLB-кластере</span><span class="sxs-lookup"><span data-stu-id="467fd-113">Steps for Report Server Deployment on an NLB Cluster</span></span>  
 <span data-ttu-id="467fd-114">Используйте следующие рекомендации для установки и настройки развертывания.</span><span class="sxs-lookup"><span data-stu-id="467fd-114">Use the following guidelines to install and configure your deployment:</span></span>  
  
|<span data-ttu-id="467fd-115">Шаг</span><span class="sxs-lookup"><span data-stu-id="467fd-115">Step</span></span>|<span data-ttu-id="467fd-116">Description</span><span class="sxs-lookup"><span data-stu-id="467fd-116">Description</span></span>|<span data-ttu-id="467fd-117">Дополнительные сведения</span><span class="sxs-lookup"><span data-stu-id="467fd-117">More information</span></span>|  
|----------|-----------------|----------------------|  
|<span data-ttu-id="467fd-118">1</span><span class="sxs-lookup"><span data-stu-id="467fd-118">1</span></span>|<span data-ttu-id="467fd-119">Прежде чем установить службы Reporting Services на серверных узлах в NLB-кластере, проверьте требования к масштабному развертыванию.</span><span class="sxs-lookup"><span data-stu-id="467fd-119">Before you install Reporting Services on server nodes in an NLB cluster, check the requirements for scale-out deployment.</span></span>|<span data-ttu-id="467fd-120">[Настройка масштабного развертывания сервера отчетов в собственном режиме &#40;службы SSRS Configuration Manager&#41;](../install-windows/configure-a-native-mode-report-server-scale-out-deployment.md) [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Электронная документация</span><span class="sxs-lookup"><span data-stu-id="467fd-120">[Configure a Native Mode Report Server Scale-Out Deployment &#40;SSRS Configuration Manager&#41;](../install-windows/configure-a-native-mode-report-server-scale-out-deployment.md) [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Books Online</span></span>|  
|<span data-ttu-id="467fd-121">2</span><span class="sxs-lookup"><span data-stu-id="467fd-121">2</span></span>|<span data-ttu-id="467fd-122">Настройте NLB-кластер и убедитесь в его правильной работе.</span><span class="sxs-lookup"><span data-stu-id="467fd-122">Configure the NLB cluster and verify it is working correctly.</span></span><br /><br /> <span data-ttu-id="467fd-123">Не забудьте сопоставить имя заголовка узла IP-адресу виртуального сервера NLB-кластера.</span><span class="sxs-lookup"><span data-stu-id="467fd-123">Be sure to map a host header name to the virtual server IP of the NLB cluster.</span></span> <span data-ttu-id="467fd-124">Имя заголовка узла используется в URL-адресе сервера отчетов; его проще запомнить и ввести, чем IP-адрес.</span><span class="sxs-lookup"><span data-stu-id="467fd-124">The host header name is used in the report server URL, and is easier to remember and type than an IP address.</span></span>|<span data-ttu-id="467fd-125">Дополнительные сведения см. в документации по продукту Windows Server для соответствующей версии операционной системы Windows.</span><span class="sxs-lookup"><span data-stu-id="467fd-125">For more information, see the Windows Server product documentation for the version of the Windows operating system that you run.</span></span>|  
|<span data-ttu-id="467fd-126">3</span><span class="sxs-lookup"><span data-stu-id="467fd-126">3</span></span>|<span data-ttu-id="467fd-127">Добавьте NetBIOS и полное доменное имя заголовка узла в список **BackConnectionHostNames** , который находится в реестре Windows.</span><span class="sxs-lookup"><span data-stu-id="467fd-127">Add the NetBIOS and Fully Qualified Domain Name (FQDN) for the host header to the list of **BackConnectionHostNames** stored in the Windows Registry.</span></span> <span data-ttu-id="467fd-128">Выполните шаги, указанные в разделе **Метод 2. Задание имен узлов** в [статье 896861 базы знаний](https://support.microsoft.com/kb/896861) (https://support.microsoft.com/kb/896861).</span><span class="sxs-lookup"><span data-stu-id="467fd-128">Use the steps in **Method 2: Specify host names** in [KB 896861](https://support.microsoft.com/kb/896861) (https://support.microsoft.com/kb/896861), with the following adjustment.</span></span> <span data-ttu-id="467fd-129">В**Шаге 7** статьи базы знаний содержится следующее указание: «Закройте редактор реестра и перезапустите службу IISAdmin».</span><span class="sxs-lookup"><span data-stu-id="467fd-129">**Step 7** of the KB article says "Quit Registry Editor, and then restart the IISAdmin service."</span></span> <span data-ttu-id="467fd-130">Вместо этого перезагрузите компьютер, чтобы изменения вступили в силу.</span><span class="sxs-lookup"><span data-stu-id="467fd-130">Instead, reboot the computer to ensure the changes take effect.</span></span><br /><br /> <span data-ttu-id="467fd-131">Например, если имя заголовка узла \<MyServer> — это виртуальное имя для имени компьютера Windows "contoso", вероятно, вы можете ссылаться на форму полного доменного имени как "contoso.domain.com".</span><span class="sxs-lookup"><span data-stu-id="467fd-131">For example, if the host header name \<MyServer> is a virtual name for the Windows computer name of "contoso", you can probably reference the FQDN form as "contoso.domain.com".</span></span> <span data-ttu-id="467fd-132">Необходимо добавить имя заголовка узла (MyServer) и полное доменное имя (contoso.domain.com) в список **BackConnectionHostNames**.</span><span class="sxs-lookup"><span data-stu-id="467fd-132">You will need to add both the hostheader name (MyServer ) and FQDN name (contoso.domain.com) to the list in **BackConnectionHostNames**.</span></span>|<span data-ttu-id="467fd-133">Это следует сделать, если среда сервера использует проверку подлинности NTLM на локальном компьютере, создавая подключение с замыканием на себя.</span><span class="sxs-lookup"><span data-stu-id="467fd-133">This step is required if your server environment involves NTLM authentication on the local computer, creating a loop back connection.</span></span><br /><br /> <span data-ttu-id="467fd-134">В этом случае запросы между диспетчером отчетов и сервером отчетов завершаться с ошибкой 401 (Отсутствуют необходимые права доступа).</span><span class="sxs-lookup"><span data-stu-id="467fd-134">If this is the case, you will experience the requests between Report Manager and Report Server to fail with 401 (Unauthorized).</span></span>|  
|<span data-ttu-id="467fd-135">4</span><span class="sxs-lookup"><span data-stu-id="467fd-135">4</span></span>|<span data-ttu-id="467fd-136">Установите службы [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] в режиме «только файлы» на узлах, которые уже входят в NLB-кластер, затем подготовьте экземпляры сервера отчетов к масштабному развертыванию.</span><span class="sxs-lookup"><span data-stu-id="467fd-136">Install [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] in files-only mode on nodes that are already part of a NLB cluster, and configure the report server instances for scale-out deployment.</span></span><br /><br /> <span data-ttu-id="467fd-137">Настроенное масштабное развертывание может не отвечать на запросы, направленные по IP-адресу виртуального сервера.</span><span class="sxs-lookup"><span data-stu-id="467fd-137">The scale-out that you configure might not respond to requests that are directed to the virtual server IP.</span></span> <span data-ttu-id="467fd-138">Настройка масштабного развертывания на использование IP-адреса виртуального сервера выполняется на более позднем шаге, после настройки проверки состояния представления.</span><span class="sxs-lookup"><span data-stu-id="467fd-138">Configuring the scale-out to use the virtual server IP occurs at a later step, after you configure view state validation.</span></span>|[<span data-ttu-id="467fd-139">Настройка масштабного развертывания сервера отчетов в основном режиме (диспетчер конфигурации служб SSRS)</span><span class="sxs-lookup"><span data-stu-id="467fd-139">Configure a Native Mode Report Server Scale-Out Deployment &#40;SSRS Configuration Manager&#41;</span></span>](../install-windows/configure-a-native-mode-report-server-scale-out-deployment.md)|  
|<span data-ttu-id="467fd-140">5</span><span class="sxs-lookup"><span data-stu-id="467fd-140">5</span></span>|<span data-ttu-id="467fd-141">Настройка проверки состояния представления</span><span class="sxs-lookup"><span data-stu-id="467fd-141">Configure view state validation.</span></span><br /><br /> <span data-ttu-id="467fd-142">Для достижения наилучшего результата выполняйте этот шаг после настройки масштабного развертывания и перед настройкой экземпляров сервера отчетов на использование IP-адреса виртуального сервера.</span><span class="sxs-lookup"><span data-stu-id="467fd-142">For best results, perform this step after you configure the scale-out deployment, and before you configure the report server instances to use the virtual server IP.</span></span> <span data-ttu-id="467fd-143">Это позволит избежать исключений о неудавшейся проверке состояния при обращении пользователей к интерактивным отчетам.</span><span class="sxs-lookup"><span data-stu-id="467fd-143">By configuring view state validation first, you can avoid exceptions about failed state validation when users attempt to access interactive reports.</span></span>|<span data-ttu-id="467fd-144">[Как настроить проверку состояния представления](#ViewState) — далее в этом разделе.</span><span class="sxs-lookup"><span data-stu-id="467fd-144">[How to Configure View State Validation](#ViewState) in this topic.</span></span>|  
|<span data-ttu-id="467fd-145">6</span><span class="sxs-lookup"><span data-stu-id="467fd-145">6</span></span>|<span data-ttu-id="467fd-146">Настройте в `Hostname` и `UrlRoot` использование IP-адреса виртуального сервера NLB-кластера.</span><span class="sxs-lookup"><span data-stu-id="467fd-146">Configure `Hostname` and `UrlRoot` to use the virtual server IP of the NLB cluster.</span></span>|<span data-ttu-id="467fd-147">[Как настроить свойства HostName и UrlRoot](#SpecifyingVirtualServerName) — далее в этом разделе.</span><span class="sxs-lookup"><span data-stu-id="467fd-147">[How to Configure Hostname and UrlRoot](#SpecifyingVirtualServerName) in this topic.</span></span>|  
|<span data-ttu-id="467fd-148">7</span><span class="sxs-lookup"><span data-stu-id="467fd-148">7</span></span>|<span data-ttu-id="467fd-149">Проверьте, что серверы доступны через указанное имя узла.</span><span class="sxs-lookup"><span data-stu-id="467fd-149">Verify the servers are accessible through the host name you specified.</span></span>|<span data-ttu-id="467fd-150">[Проверка доступа к серверу отчетов](#Verify) далее в этом разделе.</span><span class="sxs-lookup"><span data-stu-id="467fd-150">[Verify Report Server Access](#Verify) in this topic.</span></span>|  
  
##  <a name="how-to-configure-view-state-validation"></a><a name="ViewState"></a><span data-ttu-id="467fd-151">Настройка проверки состояния представления</span><span class="sxs-lookup"><span data-stu-id="467fd-151">How to Configure View State Validation</span></span>  
 <span data-ttu-id="467fd-152">Для запуска масштабного развертывания на NLB-кластере необходимо настроить проверку состояния представления, чтобы пользователи могли просматривать интерактивные HTML-отчеты.</span><span class="sxs-lookup"><span data-stu-id="467fd-152">To run a scale-out deployment on an NLB cluster, you must configure view state validation so that users can view interactive HTML reports.</span></span> <span data-ttu-id="467fd-153">Это необходимо сделать для сервера отчетов и диспетчера отчетов.</span><span class="sxs-lookup"><span data-stu-id="467fd-153">You must do this for the report server and for Report Manager.</span></span>  
  
 <span data-ttu-id="467fd-154">Проверка состояния представления управляется ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="467fd-154">View state validation is controlled by the ASP.NET.</span></span> <span data-ttu-id="467fd-155">По умолчанию она включена и для нее используется удостоверение веб-службы.</span><span class="sxs-lookup"><span data-stu-id="467fd-155">By default, view state validation is enabled and uses the identity of the Web service to perform the validation.</span></span> <span data-ttu-id="467fd-156">Однако в NLB-кластере и конфигурации масштабного развертывания обычно содержится несколько экземпляров службы и удостоверения веб-службы, работающих на разных компьютерах.</span><span class="sxs-lookup"><span data-stu-id="467fd-156">However, in an NLB cluster scenario, there are multiple service instances and web service identities that run on different computers.</span></span> <span data-ttu-id="467fd-157">Поскольку разные узлы имеют разные удостоверения службы, на одно удостоверение при проверке полагаться нельзя.</span><span class="sxs-lookup"><span data-stu-id="467fd-157">Because the service identity varies for each node, you cannot rely on a single process identity to perform the validation.</span></span>  
  
 <span data-ttu-id="467fd-158">Чтобы избежать этой проблемы, можно создать произвольный ключ для проверки состояния представления, а затем вручную настроить каждый узел сервера отчетов на его использование.</span><span class="sxs-lookup"><span data-stu-id="467fd-158">To work around this issue, you can generate an arbitrary validation key to support view state validation, and then manually configure each report server node to use the same key.</span></span> <span data-ttu-id="467fd-159">Можно использовать любую случайно сформированную шестнадцатеричную последовательность.</span><span class="sxs-lookup"><span data-stu-id="467fd-159">You can use any randomly generated hexadecimal sequence.</span></span> <span data-ttu-id="467fd-160">Алгоритм проверки (такой как SHA1) определяет длину шестнадцатеричной последовательности.</span><span class="sxs-lookup"><span data-stu-id="467fd-160">The validation algorithm (such as SHA1) determines how long the hexadecimal sequence must be.</span></span>  
  
1.  <span data-ttu-id="467fd-161">Создайте ключ проверки и ключ дешифрования с помощью функции автоформирования, доступной в [!INCLUDE[dnprdnshort](../../includes/dnprdnshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="467fd-161">Generate a validation key and decryption key by using the autogenerate functionality provided by the [!INCLUDE[dnprdnshort](../../includes/dnprdnshort-md.md)].</span></span> <span data-ttu-id="467fd-162">В итоге у вас должна быть одна <`machineKey`> запись, которую можно вставить в файл Web.config для каждого экземпляра диспетчер отчетов в масштабном развертывании.</span><span class="sxs-lookup"><span data-stu-id="467fd-162">In the end, you must have a single <`machineKey`> entry that you can paste into the Web.config file for each Report Manager instance in the scale-out deployment.</span></span>  
  
     <span data-ttu-id="467fd-163">В следующем примере приведено значение, которое должно быть получено.</span><span class="sxs-lookup"><span data-stu-id="467fd-163">The following example provides an illustration of the value you must obtain.</span></span> <span data-ttu-id="467fd-164">Не нужно вставлять в файл конфигурации данные из этого примера; значения ключа недопустимы.</span><span class="sxs-lookup"><span data-stu-id="467fd-164">Do not copy the example into your configuration files; the key values are not valid.</span></span>  
  
    ```  
    <machineKey validationKey="123455555" decryptionKey="678999999" validation="SHA1" decryption="AES"/>  
    ```  
  
2.  <span data-ttu-id="467fd-165">Откройте файл Web.config для диспетчер отчетов и в `system.web` разделе <> вставьте `machineKey` созданный элемент <>.</span><span class="sxs-lookup"><span data-stu-id="467fd-165">Open the Web.config file for Report Manager, and in the <`system.web`> section paste the <`machineKey`> element that you generated.</span></span> <span data-ttu-id="467fd-166">Файл Web.config для диспетчера отчетов по умолчанию находится в папке \Program Files\Microsoft SQL Server\MSRS10_50.MSSQLSERVER\Reporting Services\ReportManager\Web.config.</span><span class="sxs-lookup"><span data-stu-id="467fd-166">By default, the Report Manager Web.config file is located in \Program Files\Microsoft SQL Server\MSRS10_50.MSSQLSERVER\Reporting Services\ReportManager\Web.config.</span></span>  
  
3.  <span data-ttu-id="467fd-167">Сохраните файл.</span><span class="sxs-lookup"><span data-stu-id="467fd-167">Save the file.</span></span>  
  
4.  <span data-ttu-id="467fd-168">Повторите предыдущий шаг для каждого сервера отчетов в конфигурации масштабного развертывания.</span><span class="sxs-lookup"><span data-stu-id="467fd-168">Repeat the previous step for each report server in the scale-out deployment.</span></span>  
  
5.  <span data-ttu-id="467fd-169">Убедитесь, что все файлы Web.Config в папках \Reporting Services\Report Manager содержат идентичные <`machineKey`> элементов в `system.web` разделе <>.</span><span class="sxs-lookup"><span data-stu-id="467fd-169">Verify that all Web.Config files in the \Reporting Services\Report Manager folders contain identical <`machineKey`> elements in the <`system.web`> section.</span></span>  
  
##  <a name="how-to-configure-hostname-and-urlroot"></a><a name="SpecifyingVirtualServerName"></a><span data-ttu-id="467fd-170">Настройка имени узла и UrlRoot</span><span class="sxs-lookup"><span data-stu-id="467fd-170">How to Configure Hostname and UrlRoot</span></span>  
 <span data-ttu-id="467fd-171">При настройке сервера отчетов в конфигурации масштабного развертывания для запуска в NLB-кластере с балансировкой нагрузки на сеть необходимо описать единое имя виртуального сервера, обеспечивающего единую точку доступа для всего кластера.</span><span class="sxs-lookup"><span data-stu-id="467fd-171">To configure a report server scale-out deployment on an NLB cluster, you must define a single virtual server name that provides a single point of access to the server cluster.</span></span> <span data-ttu-id="467fd-172">После этого следует зарегистрировать имя виртуального сервера на сервере доменных имен в вашей среде.</span><span class="sxs-lookup"><span data-stu-id="467fd-172">Then register this virtual server name with the Domain Name Server (DNS) in your environment.</span></span>  
  
 <span data-ttu-id="467fd-173">После того как определено имя виртуального сервера, можно настраивать свойства `Hostname` и `UrlRoot` в файле RSReportServer.config, чтобы включить имя виртуального сервера в URL-адрес сервера отчетов.</span><span class="sxs-lookup"><span data-stu-id="467fd-173">After you define the virtual server name, you can configure the `Hostname` and `UrlRoot` properties in the RSReportServer.config file to include the virtual server name in the report server URL.</span></span>  
  
 <span data-ttu-id="467fd-174">Настройте свойство `Hostname` при резервировании URL-адресов по шаблону в среде создания отчетов.</span><span class="sxs-lookup"><span data-stu-id="467fd-174">Configure the `Hostname` property when you are using wildcard URL reservations in your reporting environment.</span></span> <span data-ttu-id="467fd-175">Если в качестве значения свойства `Hostname` указано имя виртуального сервера или NLB-сервера, то сетевой трафик среды создания отчетов направляется на NLB-сервер.</span><span class="sxs-lookup"><span data-stu-id="467fd-175">When you specify the `Hostname` property to be the virtual server name of the NLB server, network traffic for the reporting environment is directed to the NLB server.</span></span> <span data-ttu-id="467fd-176">После этого NLB распределяет запросы по узлам сервера отчетов.</span><span class="sxs-lookup"><span data-stu-id="467fd-176">The NLB then distributes requests among the report server nodes.</span></span>  
  
 <span data-ttu-id="467fd-177">Кроме того, настройте свойство `UrlRoot` таким образом, чтобы в отчетах, экспортированных в статические отчеты (например, в форматах Excel или PDF), либо в отчетах, сформированных подписками (например подписками электронной почты), работали ссылки на отчеты.</span><span class="sxs-lookup"><span data-stu-id="467fd-177">Additionally, configure the `UrlRoot` property so that report links work in reports that have been exported to static reports, such as in an Excel or PDF format, or in reports that are generated by subscriptions, such as e-mail subscriptions.</span></span>  
  
 <span data-ttu-id="467fd-178">При интеграции [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] с [!INCLUDE[winSPServ](../../includes/winspserv-md.md)] 3,0 или [!INCLUDE[offSPServ](../../includes/offspserv-md.md)] 2007 или при размещении отчетов в пользовательском веб-приложении может потребоваться настроить только `UrlRoot` свойство.</span><span class="sxs-lookup"><span data-stu-id="467fd-178">If you integrate [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] with [!INCLUDE[winSPServ](../../includes/winspserv-md.md)] 3.0 or [!INCLUDE[offSPServ](../../includes/offspserv-md.md)] 2007, or you host your reports in a custom Web application, you might need to configure only the `UrlRoot` property.</span></span> <span data-ttu-id="467fd-179">В данном случае в качестве значения свойства `UrlRoot` следует указать URL-адрес сайта SharePoint или веб-приложения.</span><span class="sxs-lookup"><span data-stu-id="467fd-179">In this case, configure the `UrlRoot` property to be the URL of the SharePoint site or Web application.</span></span> <span data-ttu-id="467fd-180">При этом сетевой трафик среды отчетов будет направлен на приложение, обрабатывающее отчеты, а не на сервер отчетов или NLB-кластер.</span><span class="sxs-lookup"><span data-stu-id="467fd-180">This will direct network traffic for the reporting environment to the application that handles the reports rather than to the report server or NLB cluster.</span></span>  
  
 <span data-ttu-id="467fd-181">Не изменяйте параметр `ReportServerUrl`.</span><span class="sxs-lookup"><span data-stu-id="467fd-181">Do not modify `ReportServerUrl`.</span></span> <span data-ttu-id="467fd-182">При изменении этого URL-адреса вводится дополнительное обращение к виртуальному серверу при обработке каждого внутреннего запроса.</span><span class="sxs-lookup"><span data-stu-id="467fd-182">If you modify this URL, you will introduce an extra roundtrip through the virtual server each time an internal request is handled.</span></span> <span data-ttu-id="467fd-183">Дополнительные сведения см. в разделе [URL-адреса в файлах конфигурации (диспетчер конфигурации служб SSRS)](../install-windows/urls-in-configuration-files-ssrs-configuration-manager.md).</span><span class="sxs-lookup"><span data-stu-id="467fd-183">For more information, see [URLs in Configuration Files  &#40;SSRS Configuration Manager&#41;](../install-windows/urls-in-configuration-files-ssrs-configuration-manager.md).</span></span> <span data-ttu-id="467fd-184">Дополнительные сведения об изменении файла конфигурации см. в разделе [Изменение файла конфигурации служб Reporting Services (RSreportserver.config)](modify-a-reporting-services-configuration-file-rsreportserver-config.md) в электронной документации по [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="467fd-184">For more information about editing the configuration file, see [Modify a Reporting Services Configuration File &#40;RSreportserver.config&#41;](modify-a-reporting-services-configuration-file-rsreportserver-config.md) in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Books Online.</span></span>  
  
1.  <span data-ttu-id="467fd-185">Откройте файл конфигурации RSReportServer.config в текстовом редакторе.</span><span class="sxs-lookup"><span data-stu-id="467fd-185">Open RSReportServer.config in a text editor.</span></span>  
  
2.  <span data-ttu-id="467fd-186">Найдите **\<Service>** раздел и добавьте следующие сведения в файл конфигурации, заменив `Hostname` значение именем виртуального сервера для сервера балансировки сетевой нагрузки:</span><span class="sxs-lookup"><span data-stu-id="467fd-186">Find the **\<Service>** section, and add the following information to the configuration file, replacing the `Hostname` value with the virtual server name for your NLB server:</span></span>  
  
    ```  
    <Hostname>virtual_server</Hostname>  
    ```  
  
3.  <span data-ttu-id="467fd-187">Найдите параметр `UrlRoot`.</span><span class="sxs-lookup"><span data-stu-id="467fd-187">Find `UrlRoot`.</span></span> <span data-ttu-id="467fd-188">Элемент не указан в файле конфигурации, но по умолчанию используется URL-адрес в следующем формате: http://или HTTPS:// \<*computername*> / \<*reportserver*> , где \<*reportserver*> — имя виртуального каталога веб-службы сервера отчетов.</span><span class="sxs-lookup"><span data-stu-id="467fd-188">The element is unspecified in the configuration file, but the default value used is a URL in this format: http:// or https://\<*computername*>/\<*reportserver*>, where \<*reportserver*> is the virtual directory name of the Report Server Web service.</span></span>  
  
4.  <span data-ttu-id="467fd-189">Введите значение `UrlRoot` , которое включает виртуальное имя кластера в следующем формате: http://или HTTPS:// \<*virtual_server*> / \<*reportserver*> .</span><span class="sxs-lookup"><span data-stu-id="467fd-189">Type a value for `UrlRoot` that includes the virtual name of the cluster in this format: http:// or https://\<*virtual_server*>/\<*reportserver*>.</span></span>  
  
5.  <span data-ttu-id="467fd-190">Сохраните файл.</span><span class="sxs-lookup"><span data-stu-id="467fd-190">Save the file.</span></span>  
  
6.  <span data-ttu-id="467fd-191">Повторите эти шаги в каждом файле RSReportServer.config для каждого сервера отчетов в масштабном развертывании.</span><span class="sxs-lookup"><span data-stu-id="467fd-191">Repeat these steps in each RSReportServer.config file for each report server in the scale-out deployment.</span></span>  
  
##  <a name="verify-report-server-access"></a><a name="Verify"></a><span data-ttu-id="467fd-192">Проверка доступа к серверу отчетов</span><span class="sxs-lookup"><span data-stu-id="467fd-192">Verify Report Server Access</span></span>  
 <span data-ttu-id="467fd-193">Убедитесь, что вы можете получить доступ к масштабному развертыванию по имени виртуального сервера (например, https://MyVirtualServerName/reportserver и) https://MyVirtualServerName/reports) .</span><span class="sxs-lookup"><span data-stu-id="467fd-193">Verify that you can access the scale-out deployment through the virtual server name (for example, https://MyVirtualServerName/reportserver and https://MyVirtualServerName/reports).</span></span>  
  
 <span data-ttu-id="467fd-194">Выяснить, какой из узлов в действительности обрабатывает отчеты, можно в файлах журналов или в журнале выполнения сервера отчетов (таблица журнала выполнения содержит столбец **InstanceName** , где указывается экземпляр, который обработал конкретный запрос).</span><span class="sxs-lookup"><span data-stu-id="467fd-194">You can check which node actually processes reports by looking at the report server log files or by checking the RS execution log (the execution log table contains a column called **InstanceName** that shows which instance processed a particular request).</span></span> <span data-ttu-id="467fd-195">Дополнительные сведения см. в разделе [Файлы и источники журналов служб Reporting Services](../report-server/reporting-services-log-files-and-sources.md) в электронной документации по [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="467fd-195">For more information, see [Reporting Services Log Files and Sources](../report-server/reporting-services-log-files-and-sources.md) in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Books Online.</span></span>  
  
 <span data-ttu-id="467fd-196">Если не удается соединиться с сервером отчетов, проверьте NLB и убедитесь, что запросы отправляются на сервер отчета, а также просмотрите журнал HTTP-сервера, чтобы убедиться, что сервер получает эти запросы.</span><span class="sxs-lookup"><span data-stu-id="467fd-196">If you cannot connect to the report server, check the NLB to ensure that requests are sent to the report server and view the report server HTTP log to ensure that the server is receiving the requests.</span></span>  
  
#### <a name="troubleshooting-failed-requests"></a><span data-ttu-id="467fd-197">Устранение неполадок в ошибочных запросах</span><span class="sxs-lookup"><span data-stu-id="467fd-197">Troubleshooting Failed Requests</span></span>  
 <span data-ttu-id="467fd-198">Если запросы не достигают экземпляров сервера отчетов, проверьте файл RSReportServer.config и убедитесь, что имя виртуального сервера указано как имя узла для URL-адресов сервера отчетов.</span><span class="sxs-lookup"><span data-stu-id="467fd-198">If requests do not reach the report server instances, check the RSReportServer.config file to verify that the virtual server name is specified as the host name for the report server URLs:</span></span>  
  
1.  <span data-ttu-id="467fd-199">Откройте файл RSReportServer.config в текстовом редакторе.</span><span class="sxs-lookup"><span data-stu-id="467fd-199">Open the RSReportServer.config file in a text editor.</span></span>  
  
2.  <span data-ttu-id="467fd-200">Найдите <`Hostname`>, <`ReportServerUrl`> и <> `UrlRoot` и проверьте имя узла для каждого из параметров.</span><span class="sxs-lookup"><span data-stu-id="467fd-200">Find <`Hostname`>, <`ReportServerUrl`>, and <`UrlRoot`>, and check the host name for each settings.</span></span> <span data-ttu-id="467fd-201">Если значение отличается от предполагаемого имени узла, замените его правильным именем узла.</span><span class="sxs-lookup"><span data-stu-id="467fd-201">If the value is not the host name you expect, replace it with the correct host name.</span></span>  
  
 <span data-ttu-id="467fd-202">При запуске средства настройки Reporting Services после внесения этих изменений средство может изменить `ReportServerUrl` параметры <> на значение по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="467fd-202">If you start the Reporting Services Configuration tool after making these changes, the tool might change the <`ReportServerUrl`> settings to the default value.</span></span> <span data-ttu-id="467fd-203">Всегда сохраняйте резервную копию файлов конфигурации на тот случай, если понадобится восстановить настроенные параметры.</span><span class="sxs-lookup"><span data-stu-id="467fd-203">Always keep a backup copy of the configuration files in case you need to replace them with the version that contains the settings you want to use.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="467fd-204">См. также:</span><span class="sxs-lookup"><span data-stu-id="467fd-204">See Also</span></span>  
 <span data-ttu-id="467fd-205">[Использование диспетчера конфигурации служб Reporting Services (собственный режим)](../../sql-server/install/reporting-services-configuration-manager-native-mode.md) </span><span class="sxs-lookup"><span data-stu-id="467fd-205">[Reporting Services Configuration Manager &#40;Native Mode&#41;](../../sql-server/install/reporting-services-configuration-manager-native-mode.md) </span></span>  
 <span data-ttu-id="467fd-206">[Настройка URL-адреса &#40;SSRS Configuration Manager&#41;](../install-windows/configure-a-url-ssrs-configuration-manager.md) </span><span class="sxs-lookup"><span data-stu-id="467fd-206">[Configure a URL  &#40;SSRS Configuration Manager&#41;](../install-windows/configure-a-url-ssrs-configuration-manager.md) </span></span>  
 <span data-ttu-id="467fd-207">[Настройка масштабного развертывания сервера отчетов в собственном режиме &#40;службы SSRS Configuration Manager&#41;](../install-windows/configure-a-native-mode-report-server-scale-out-deployment.md) </span><span class="sxs-lookup"><span data-stu-id="467fd-207">[Configure a Native Mode Report Server Scale-Out Deployment &#40;SSRS Configuration Manager&#41;](../install-windows/configure-a-native-mode-report-server-scale-out-deployment.md) </span></span>  
 [<span data-ttu-id="467fd-208">Управление сервером отчетов Reporting Services в собственном режиме</span><span class="sxs-lookup"><span data-stu-id="467fd-208">Manage a Reporting Services Native Mode Report Server</span></span>](manage-a-reporting-services-native-mode-report-server.md)  
  
  
