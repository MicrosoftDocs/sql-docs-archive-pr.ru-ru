---
title: Администрирование базы данных сервера отчетов (службы SSRS в собственном режиме) | Документы Майкрософт
ms.custom: ''
ms.date: 08/10/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: reporting-services-native
ms.topic: conceptual
helpviewer_keywords:
- report servers [Reporting Services], databases
- renaming databases
- report server database
- databases [Reporting Services], administering
- reportservertempdb
- reportserver database
ms.assetid: 97b2e1b5-3869-4766-97b9-9bf206b52262
author: maggiesMSFT
ms.author: maggies
manager: kfile
ms.openlocfilehash: bfb1cb9108af8d3904a4ec679d2c42f11c734ade
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87665838"
---
# <a name="administer-a-report-server-database-ssrs-native-mode"></a><span data-ttu-id="a5fc5-102">Администрирование базы данных сервера отчетов (службы Reporting Services в собственном режиме)</span><span class="sxs-lookup"><span data-stu-id="a5fc5-102">Administer a Report Server Database (SSRS Native Mode)</span></span>
  <span data-ttu-id="a5fc5-103">В развертывании служб [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] в качестве внутреннего хранилища используются две реляционные базы данных [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="a5fc5-103">A [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] deployment uses two [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] relational databases for internal storage.</span></span> <span data-ttu-id="a5fc5-104">По умолчанию эти базы данных имеют имена ReportServer и ReportServerTempdb.</span><span class="sxs-lookup"><span data-stu-id="a5fc5-104">By default, the databases are named ReportServer and ReportServerTempdb.</span></span> <span data-ttu-id="a5fc5-105">База данных ReportServerTempdb создается вместе с основной базой данных сервера отчетов и используется для хранения временных данных, сведений о сеансе и кэшированных отчетов.</span><span class="sxs-lookup"><span data-stu-id="a5fc5-105">ReportServerTempdb is created with the primary report server database and is used to store temporary data, session information, and cached reports.</span></span>  
  
 <span data-ttu-id="a5fc5-106">В службах [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)]задачи администрирования баз данных включают создание резервных копий и восстановление из копии баз данных сервера отчетов, а также управление ключами шифрования, применяемыми для шифрования и расшифровки конфиденциальных данных.</span><span class="sxs-lookup"><span data-stu-id="a5fc5-106">In [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)], database administration tasks include backing up and restoring the report server databases and managing the encryption keys that are used to encrypt and decrypt sensitive data.</span></span>  
  
 <span data-ttu-id="a5fc5-107">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] предоставляет различные средства для администрирования баз данных сервера отчетов.</span><span class="sxs-lookup"><span data-stu-id="a5fc5-107">To administer the report server databases, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] provides a variety of tools.</span></span>  
  
-   <span data-ttu-id="a5fc5-108">Чтобы создать резервную копию или восстановить базу данных сервера отчетов, переместить базу данных сервера отчетов или восстановить базу данных сервера отчетов, можно использовать среду [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)], команды [!INCLUDE[tsql](../../includes/tsql-md.md)] или программы базы данных с командной строкой.</span><span class="sxs-lookup"><span data-stu-id="a5fc5-108">To back up or restore the report server database, move a report server database, or recover a report server database, you can use [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)], the [!INCLUDE[tsql](../../includes/tsql-md.md)] commands, or the database command prompt utilities.</span></span> <span data-ttu-id="a5fc5-109">Инструкции см. в статье [Перемещение баз данных сервера отчетов на другой компьютер (собственный режим служб SSRS)](moving-the-report-server-databases-to-another-computer-ssrs-native-mode.md) в электронной документации по SQL Server.</span><span class="sxs-lookup"><span data-stu-id="a5fc5-109">For instructions, see [Moving the Report Server Databases to Another Computer &#40;SSRS Native Mode&#41;](moving-the-report-server-databases-to-another-computer-ssrs-native-mode.md) in SQL Server Books Online.</span></span>  
  
-   <span data-ttu-id="a5fc5-110">Чтобы скопировать содержимое существующей базы данных в другую базу данных сервера отчетов, можно присоединить копию базы данных сервера отчетов и использовать ее с другим экземпляром сервера отчетов.</span><span class="sxs-lookup"><span data-stu-id="a5fc5-110">To copy existing database content to another report server database, you can attach a copy of a report server database and use it with a different report server instance.</span></span> <span data-ttu-id="a5fc5-111">Либо можно создать и выполнить скрипт, использующий вызовы SOAP для повторного создания содержимого сервера отчетов в новой базе данных.</span><span class="sxs-lookup"><span data-stu-id="a5fc5-111">Or, you can create and run a script that uses SOAP calls to recreate report server content in a new database.</span></span> <span data-ttu-id="a5fc5-112">Для выполнения скрипта можно использовать служебную программу **rs** .</span><span class="sxs-lookup"><span data-stu-id="a5fc5-112">You can use the **rs** utility to run the script.</span></span>  
  
-   <span data-ttu-id="a5fc5-113">Чтобы управлять соединениями между сервером отчетов и его базой данных и найти, какая база данных используется для экземпляра сервера отчетов, можно использовать страницу «Установка базы данных» средства настройки служб [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="a5fc5-113">To manage connections between the report server and report server database, and to find out which database is used for a particular report server instance, you can use Database Setup page in the [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)]Configuration tool.</span></span> <span data-ttu-id="a5fc5-114">Дополнительные сведения о подключении сервера отчетов к базе данных сервера отчетов см. в разделе [Настройка подключения к базе данных сервера отчетов (диспетчер конфигураций служб Reporting Services)](../../sql-server/install/configure-a-report-server-database-connection-ssrs-configuration-manager.md).</span><span class="sxs-lookup"><span data-stu-id="a5fc5-114">To learn more about the report server connection to the report server database, see [Configure a Report Server Database Connection  &#40;SSRS Configuration Manager&#41;](../../sql-server/install/configure-a-report-server-database-connection-ssrs-configuration-manager.md).</span></span>  
  
## <a name="sql-server-login-and-database-permissions"></a><span data-ttu-id="a5fc5-115">Разрешения на вход в систему и доступ к базам данных SQL Server</span><span class="sxs-lookup"><span data-stu-id="a5fc5-115">SQL Server Login and Database Permissions</span></span>  
 <span data-ttu-id="a5fc5-116">Базы данных сервера отчетов используются сервером отчетов для внутренних целей.</span><span class="sxs-lookup"><span data-stu-id="a5fc5-116">The report server databases are used internally by the report server.</span></span> <span data-ttu-id="a5fc5-117">Соединения с любой базой данных устанавливаются службой сервера отчетов.</span><span class="sxs-lookup"><span data-stu-id="a5fc5-117">Connections to either database are made by the Report Server service.</span></span> <span data-ttu-id="a5fc5-118">Чтобы настроить соединение сервера отчетов с базой данных сервера отчетов, применяется средство настройки служб [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="a5fc5-118">You use the [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] Configuration tool to configure the report server connection to the report server database.</span></span>  
  
 <span data-ttu-id="a5fc5-119">Учетными данными для соединения сервера отчетов с базой данных может служить учетная запись службы, учетная запись локального пользователя Windows или пользователя домена, а также учетная запись пользователя базы данных [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="a5fc5-119">Credentials for the report server connection to the database can be the service account, a Windows local or domain user account, or a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] database user.</span></span> <span data-ttu-id="a5fc5-120">Для соединения необходимо выбрать существующую учетную запись; службы [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] не создают учетные записи для пользователей.</span><span class="sxs-lookup"><span data-stu-id="a5fc5-120">You must choose an existing account for the connection; [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] does not create accounts for you.</span></span>  
  
 <span data-ttu-id="a5fc5-121">Для указанной учетной записи автоматически создается имя входа [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , позволяющее подключиться к базе данных сервера отчетов.</span><span class="sxs-lookup"><span data-stu-id="a5fc5-121">A [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] login to the report server database is created for you automatically for the account you specify.</span></span>  
  
 <span data-ttu-id="a5fc5-122">Настройка разрешений для этой базы данных также выполняется автоматически.</span><span class="sxs-lookup"><span data-stu-id="a5fc5-122">Permissions to the database are also configured automatically.</span></span> <span data-ttu-id="a5fc5-123">Средство настройки служб Reporting Services делает эту учетную запись или пользователя базы данных членом ролей `Public` и `RSExecRole` для баз данных сервера отчетов.</span><span class="sxs-lookup"><span data-stu-id="a5fc5-123">The Reporting Services Configuration tool will assign the account or database user to the `Public` and `RSExecRole` roles for the report server databases.</span></span> <span data-ttu-id="a5fc5-124">Роль `RSExecRole` предоставляет разрешения для доступа к таблицам баз данных и выполнения хранимых процедур.</span><span class="sxs-lookup"><span data-stu-id="a5fc5-124">The `RSExecRole` provides permissions for accessing the database tables and for executing stored procedures.</span></span> <span data-ttu-id="a5fc5-125">Объект `RSExecRole` создается в базе данных master и msdb при создании сервера отчетов.</span><span class="sxs-lookup"><span data-stu-id="a5fc5-125">The `RSExecRole` is created in master and msdb when you create the report server database.</span></span> <span data-ttu-id="a5fc5-126">Пользователь `RSExecRole` является членом роли `db_owner` для баз данных сервера отчетов, что позволяет серверу отчетов обновлять свою собственную схему для поддержки процесса автоматического обновления.</span><span class="sxs-lookup"><span data-stu-id="a5fc5-126">The `RSExecRole` is a member of the `db_owner` role for the report server databases, allowing the report server to update its own schema in support of an auto-upgrade process.</span></span>  
  
## <a name="naming-conventions-for-the-report-server-databases"></a><span data-ttu-id="a5fc5-127">Соглашения об именах для баз данных сервера отчетов</span><span class="sxs-lookup"><span data-stu-id="a5fc5-127">Naming Conventions for the Report Server Databases</span></span>  
 <span data-ttu-id="a5fc5-128">Имя базы данных-источника должно соответствовать правилам, определенным для [идентификаторов базы данных](../../relational-databases/databases/database-identifiers.md).</span><span class="sxs-lookup"><span data-stu-id="a5fc5-128">When creating the primary database, the name of the database must follow the rules specified for [Database Identifiers](../../relational-databases/databases/database-identifiers.md).</span></span> <span data-ttu-id="a5fc5-129">Имя временной базы данных всегда совпадает с именем основной базы данных сервера отчетов с добавлением суффикса Tempdb.</span><span class="sxs-lookup"><span data-stu-id="a5fc5-129">The temporary database name always uses the same name as the primary report server database but with a Tempdb suffix.</span></span> <span data-ttu-id="a5fc5-130">Невозможно выбрать другое имя для временной базы данных.</span><span class="sxs-lookup"><span data-stu-id="a5fc5-130">You cannot choose a different name for the temporary database.</span></span>  
  
 <span data-ttu-id="a5fc5-131">Переименование базы данных сервера отчетов не поддерживается, так как базы данных сервера отчетов рассматриваются как внутренние компоненты.</span><span class="sxs-lookup"><span data-stu-id="a5fc5-131">Renaming a report server database is not supported because the report server databases are considered internal components.</span></span> <span data-ttu-id="a5fc5-132">Переименование баз данных сервера отчетов может вызвать ошибки.</span><span class="sxs-lookup"><span data-stu-id="a5fc5-132">Renaming the report server databases causes errors to occur.</span></span> <span data-ttu-id="a5fc5-133">А именно: при переименовании базы данных-источника сообщение об ошибке говорит о том, что имена баз данных не синхронизированы. При переименовании базы данных ReportServerTempdb позже при запуске отчетов возникает следующая внутренняя ошибка.</span><span class="sxs-lookup"><span data-stu-id="a5fc5-133">Specifically, if you rename the primary database, an error message explains that the database names are out of sync. If you rename the ReportServerTempdb database, the following internal error occurs later when you run reports:</span></span>  
  
 <span data-ttu-id="a5fc5-134">«Произошла внутренняя ошибка на сервере отчетов.</span><span class="sxs-lookup"><span data-stu-id="a5fc5-134">"An internal error occurred on the report server.</span></span> <span data-ttu-id="a5fc5-135">Дополнительные подробности см. в журнале ошибок.</span><span class="sxs-lookup"><span data-stu-id="a5fc5-135">See the error log for more details.</span></span> <span data-ttu-id="a5fc5-136">(rsInternalError)</span><span class="sxs-lookup"><span data-stu-id="a5fc5-136">(rsInternalError)</span></span>  
  
 <span data-ttu-id="a5fc5-137">Недопустимое имя объекта "ReportServerTempDB.dbo.PersistedStream"».</span><span class="sxs-lookup"><span data-stu-id="a5fc5-137">Invalid object name 'ReportServerTempDB.dbo.PersistedStream'."</span></span>  
  
 <span data-ttu-id="a5fc5-138">Причина этой ошибки заключается в том, что имя ReportServerTempdb хранится внутренне и используется хранимыми процедурами для выполнения внутренних операций.</span><span class="sxs-lookup"><span data-stu-id="a5fc5-138">This error occurs because the ReportServerTempdb name is stored internally and used by stored procedures to perform internal operations.</span></span> <span data-ttu-id="a5fc5-139">Переименование временной базы данных приведет к неправильной работе хранимых процедур.</span><span class="sxs-lookup"><span data-stu-id="a5fc5-139">Renaming the temporary database will prevent the stored procedures from working properly.</span></span>  
  
## <a name="enabling-snapshot-isolation-on-the-report-server-database"></a><span data-ttu-id="a5fc5-140">Включение изоляции моментального снимка в базе данных сервера отчетов</span><span class="sxs-lookup"><span data-stu-id="a5fc5-140">Enabling Snapshot Isolation on the Report Server Database</span></span>  
 <span data-ttu-id="a5fc5-141">В базе данных сервера отчетов нельзя включить изоляцию моментального снимка.</span><span class="sxs-lookup"><span data-stu-id="a5fc5-141">You cannot enable snapshot isolation on the report server database.</span></span> <span data-ttu-id="a5fc5-142">Если изоляция моментального снимка включена, будет поступать следующее сообщение об ошибке: "The selected report is not ready for viewing.</span><span class="sxs-lookup"><span data-stu-id="a5fc5-142">If snapshot isolation is turned on, you will encounter the following error: "The selected report is not ready for viewing.</span></span> <span data-ttu-id="a5fc5-143">Выполняется подготовка отчета к отображению, или недоступен моментальный снимок отчета.».</span><span class="sxs-lookup"><span data-stu-id="a5fc5-143">The report is still being rendered or a report snapshot is not available."</span></span>  
  
 <span data-ttu-id="a5fc5-144">Даже если изоляция моментального снимка специально не была включена, этот атрибут может быть установлен другим приложением или изоляция моментального снимка включена в базе данных **model** , а это приводит к тому, что все новые базы данных наследуют эту настройку.</span><span class="sxs-lookup"><span data-stu-id="a5fc5-144">If you did not purposely enable snapshot isolation, the attribute might have been set by another application or the **model** database might have snapshot isolation enabled, causing all new databases to inherit the setting.</span></span>  
  
 <span data-ttu-id="a5fc5-145">Чтобы отменить изоляцию моментального снимка в базе данных сервера отчетов, в среде Management Studio откройте новое окно запроса, вставьте и запустите следующий скрипт:</span><span class="sxs-lookup"><span data-stu-id="a5fc5-145">To turn off snapshot isolation on the report server database, start Management Studio, open a new query window, paste and then run the following script:</span></span>  
  
```  
ALTER DATABASE ReportServer  
SET ALLOW_SNAPSHOT_ISOLATION OFF  
ALTER DATABASE ReportServerTempdb  
SET ALLOW_SNAPSHOT_ISOLATION OFF  
ALTER DATABASE ReportServer  
SET READ_COMMITTED_SNAPSHOT OFF  
ALTER DATABASE ReportServerTempDb  
SET READ_COMMITTED_SNAPSHOT OFF  
```  
  
## <a name="about-database-versions"></a><span data-ttu-id="a5fc5-146">О версиях базы данных</span><span class="sxs-lookup"><span data-stu-id="a5fc5-146">About Database Versions</span></span>  
 <span data-ttu-id="a5fc5-147">В службах [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)]явная информация о версии базы данных не доступна.</span><span class="sxs-lookup"><span data-stu-id="a5fc5-147">In [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)], explicit information about the database version is not available.</span></span> <span data-ttu-id="a5fc5-148">Но так как версия базы данных всегда синхронизирована с версией продукта, для определения факта смены версии базы данных можно пользоваться сведениями о версии продукта.</span><span class="sxs-lookup"><span data-stu-id="a5fc5-148">However, because database versions are always synchronized to product versions, you can use product version information to tell when the database version has changed.</span></span> <span data-ttu-id="a5fc5-149">Сведения о версии продукта для [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] указываются в файлах журнала, в заголовках всех вызовов SOAP и при подключении к URL-адресу сервера отчетов (например, при открытии браузера в среде) http://localhost/reportserver) .</span><span class="sxs-lookup"><span data-stu-id="a5fc5-149">Product version information for [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] is indicated through file version information that appears in the log files, in the headers of all SOAP calls, and when you connect to the report server URL (for example, when you open a browser to http://localhost/reportserver).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="a5fc5-150">См. также:</span><span class="sxs-lookup"><span data-stu-id="a5fc5-150">See Also</span></span>  
 <span data-ttu-id="a5fc5-151">[Использование диспетчера конфигурации служб Reporting Services (собственный режим)](../../sql-server/install/reporting-services-configuration-manager-native-mode.md) </span><span class="sxs-lookup"><span data-stu-id="a5fc5-151">[Reporting Services Configuration Manager &#40;Native Mode&#41;](../../sql-server/install/reporting-services-configuration-manager-native-mode.md) </span></span>  
 <span data-ttu-id="a5fc5-152">[Создание базы данных сервера отчетов, работающего в собственном режиме (диспетчер конфигурации служб SSRS)](../install-windows/ssrs-report-server-create-a-native-mode-report-server-database.md) </span><span class="sxs-lookup"><span data-stu-id="a5fc5-152">[Create a Native Mode Report Server Database  &#40;SSRS Configuration Manager&#41;](../install-windows/ssrs-report-server-create-a-native-mode-report-server-database.md) </span></span>  
 <span data-ttu-id="a5fc5-153">[Настройка учетной записи службы сервера отчетов (диспетчер конфигурации служб SSRS)](../install-windows/configure-the-report-server-service-account-ssrs-configuration-manager.md) </span><span class="sxs-lookup"><span data-stu-id="a5fc5-153">[Configure the Report Server Service Account &#40;SSRS Configuration Manager&#41;](../install-windows/configure-the-report-server-service-account-ssrs-configuration-manager.md) </span></span>  
 <span data-ttu-id="a5fc5-154">[Настройка подключения к базе данных сервера отчетов (диспетчер конфигураций служб Reporting Services)](../../sql-server/install/configure-a-report-server-database-connection-ssrs-configuration-manager.md) </span><span class="sxs-lookup"><span data-stu-id="a5fc5-154">[Configure a Report Server Database Connection  &#40;SSRS Configuration Manager&#41;](../../sql-server/install/configure-a-report-server-database-connection-ssrs-configuration-manager.md) </span></span>  
 <span data-ttu-id="a5fc5-155">[Создание базы данных сервера отчетов (диспетчер конфигурации служб SSRS)](../../sql-server/install/create-a-report-server-database-ssrs-configuration-manager.md) </span><span class="sxs-lookup"><span data-stu-id="a5fc5-155">[Create a Report Server Database  &#40;SSRS Configuration Manager&#41;](../../sql-server/install/create-a-report-server-database-ssrs-configuration-manager.md) </span></span>  
 <span data-ttu-id="a5fc5-156">[Операции резервного копирования и восстановления для служб Reporting Services](../install-windows/backup-and-restore-operations-for-reporting-services.md) </span><span class="sxs-lookup"><span data-stu-id="a5fc5-156">[Backup and Restore Operations for Reporting Services](../install-windows/backup-and-restore-operations-for-reporting-services.md) </span></span>  
 <span data-ttu-id="a5fc5-157">[База данных сервера отчетов (службы Reporting Services в собственном режиме)](report-server-database-ssrs-native-mode.md) </span><span class="sxs-lookup"><span data-stu-id="a5fc5-157">[Report Server Database &#40;SSRS Native Mode&#41;](report-server-database-ssrs-native-mode.md) </span></span>  
 <span data-ttu-id="a5fc5-158">[Сервер отчетов служб Reporting Services (основной режим)](reporting-services-report-server-native-mode.md) </span><span class="sxs-lookup"><span data-stu-id="a5fc5-158">[Reporting Services Report Server &#40;Native Mode&#41;](reporting-services-report-server-native-mode.md) </span></span>  
 <span data-ttu-id="a5fc5-159">[Хранение зашифрованных данных сервера отчетов &#40;диспетчер конфигурации служб SSRS&#41;](../install-windows/ssrs-encryption-keys-store-encrypted-report-server-data.md) </span><span class="sxs-lookup"><span data-stu-id="a5fc5-159">[Store Encrypted Report Server Data &#40;SSRS Configuration Manager&#41;](../install-windows/ssrs-encryption-keys-store-encrypted-report-server-data.md) </span></span>  
 [<span data-ttu-id="a5fc5-160">Настройка ключей шифрования и управление ими (диспетчер конфигурации служб SSRS)</span><span class="sxs-lookup"><span data-stu-id="a5fc5-160">Configure and Manage Encryption Keys &#40;SSRS Configuration Manager&#41;</span></span>](../install-windows/ssrs-encryption-keys-manage-encryption-keys.md)  
  
  
