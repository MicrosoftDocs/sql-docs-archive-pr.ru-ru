---
title: Кэширование отчетов (службы SSRS) | Документы Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: reporting-services-native
ms.topic: conceptual
helpviewer_keywords:
- report execution properties [Reporting Services]
- cache [Reporting Services]
- report processing [Reporting Services], caching
- cached instances [Reporting Services]
- refreshing cache
- cached reports [Reporting Services]
- preloading cache
- invalid cached reports [Reporting Services]
- performance [Reporting Services]
- expiration [Reporting Services]
- snapshots [Reporting Services], caching
ms.assetid: 146542c3-8efd-4b89-a8d8-77d22896630e
author: maggiesMSFT
ms.author: maggies
manager: kfile
ms.openlocfilehash: e1af19dd3848ba39f91c2fc640a57ca53c35a4fb
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87665831"
---
# <a name="caching-reports-ssrs"></a><span data-ttu-id="51441-102">Кэширование отчетов (службы SSRS)</span><span class="sxs-lookup"><span data-stu-id="51441-102">Caching Reports (SSRS)</span></span>
  <span data-ttu-id="51441-103">Сервер отчетов может кэшировать копию обработанного отчета и вернуть эту копию при открытии отчета пользователем.</span><span class="sxs-lookup"><span data-stu-id="51441-103">A report server can cache a copy of a processed report and return that copy when a user opens the report.</span></span> <span data-ttu-id="51441-104">Единственным свидетельством того, что отчет является копией сохраненного в кэш отчета, являются дата и время выполнения отчета.</span><span class="sxs-lookup"><span data-stu-id="51441-104">To a user, the only evidence available to indicate the report is a cached copy is the date and time that the report ran.</span></span> <span data-ttu-id="51441-105">Если дата или время не являются текущими, и отчет представляет собой моментальный снимок, то отчет был извлечен из кэша.</span><span class="sxs-lookup"><span data-stu-id="51441-105">If the date or time is not current and the report is not a snapshot, the report was retrieved from cache.</span></span>  
  
 <span data-ttu-id="51441-106">Кэширование может сократить время, необходимое для поиска отчета, если отчет большого размера или к нему часто обращаются.</span><span class="sxs-lookup"><span data-stu-id="51441-106">Caching can shorten the time required to retrieve a report if the report is large or accessed frequently.</span></span> <span data-ttu-id="51441-107">Если сервер перезагружается, то все кэшируемые экземпляры восстанавливаются при восстановлении подключения к сети веб-службы сервера отчетов.</span><span class="sxs-lookup"><span data-stu-id="51441-107">If the server is rebooted, all cached instances are reinstated when the Report Server Web service comes back online.</span></span>  
  
 <span data-ttu-id="51441-108">Кэширование — технология улучшения производительности.</span><span class="sxs-lookup"><span data-stu-id="51441-108">Caching is a performance-enhancement technique.</span></span> <span data-ttu-id="51441-109">Содержимое кэша энергозависимо и может измениться при добавлении, замене или удалении отчетов.</span><span class="sxs-lookup"><span data-stu-id="51441-109">The contents of the cache are volatile and can change as reports are added, replaced, or removed.</span></span> <span data-ttu-id="51441-110">Если требуется более прогнозируемая стратегия кэширования, то необходимо создать моментальный снимок отчета.</span><span class="sxs-lookup"><span data-stu-id="51441-110">If you require a more predictable caching strategy, you should create a report snapshot.</span></span> <span data-ttu-id="51441-111">Дополнительные сведения см. в разделе [Установка свойств обработки отчетов](set-report-processing-properties.md).</span><span class="sxs-lookup"><span data-stu-id="51441-111">For more information, see [Set Report Processing Properties](set-report-processing-properties.md).</span></span>  
  
> [!NOTE]  
>  [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] <span data-ttu-id="51441-112">хранят временные файлы в базе данных, что обеспечивает поддержку пользовательских сеансов и обработку отчетов.</span><span class="sxs-lookup"><span data-stu-id="51441-112">stores temporary files in a database to support user sessions and report processing.</span></span> <span data-ttu-id="51441-113">Эти файлы кэшируются для внутреннего использования и поддерживают целостность обозреваемых объектов в течение одного сеанса браузера.</span><span class="sxs-lookup"><span data-stu-id="51441-113">These files are cached for internal use and to support a consistent viewing experience during a single browser session.</span></span> <span data-ttu-id="51441-114">Дополнительные сведения о кэшировании временных файлов для внутреннего использования см. в разделе [База данных сервера отчетов (службы Reporting Services в собственном режиме)](report-server-database-ssrs-native-mode.md).</span><span class="sxs-lookup"><span data-stu-id="51441-114">For more information about how internal-use temporary files are cached, see [Report Server Database &#40;SSRS Native Mode&#41;](report-server-database-ssrs-native-mode.md).</span></span>  
  
## <a name="cached-instances"></a><span data-ttu-id="51441-115">Кэшированные экземпляры</span><span class="sxs-lookup"><span data-stu-id="51441-115">Cached Instances</span></span>  
 <span data-ttu-id="51441-116">Кэшируемый экземпляр отчета основан на промежуточном формате отчета.</span><span class="sxs-lookup"><span data-stu-id="51441-116">A cached instance of a report is based on the intermediate format of a report.</span></span> <span data-ttu-id="51441-117">Сервер отчетов в целом кэширует только один экземпляр отчета на основе его имени.</span><span class="sxs-lookup"><span data-stu-id="51441-117">The report server generally caches one instance of a report based on the report name.</span></span> <span data-ttu-id="51441-118">Однако если отчет может содержать данные, зависящие от параметров запроса, то могут кэшироваться несколько версий отчета в любое данное время.</span><span class="sxs-lookup"><span data-stu-id="51441-118">However, if a report can contain different data based on query parameters, multiple versions of the report may be cached at any given time.</span></span> <span data-ttu-id="51441-119">Например, предположим, что имеется параметризованный отчет, который рассматривает код области в качестве значения параметра.</span><span class="sxs-lookup"><span data-stu-id="51441-119">For example, suppose you have a parameterized report that takes a region code as a parameter value.</span></span> <span data-ttu-id="51441-120">Если у четырех различных пользователей имеются четыре уникальных кода области, то создаются четыре кэшированных копии.</span><span class="sxs-lookup"><span data-stu-id="51441-120">If four different users specify four unique region codes, four cached copies are created.</span></span>  
  
 <span data-ttu-id="51441-121">Первый пользователь, который выполняет отчет с уникальным кодом области, создает кэшируемый отчет, который содержит данные для той области.</span><span class="sxs-lookup"><span data-stu-id="51441-121">The first user who runs the report with a unique region code creates a cached report that contains data for that region.</span></span> <span data-ttu-id="51441-122">Последующие пользователи, которые запрашивают отчет, используя тот же самый код области, получают его кэшированную копию.</span><span class="sxs-lookup"><span data-stu-id="51441-122">Subsequent users who request the report using the same region code get the cached copy.</span></span>  
  
 <span data-ttu-id="51441-123">Не все отчеты могут кэшироваться.</span><span class="sxs-lookup"><span data-stu-id="51441-123">Not all reports can be cached.</span></span> <span data-ttu-id="51441-124">Если отчет содержит данные, зависимые от пользователей, запрашивает у пользователей учетные данные или использует проверку подлинности Windows, то отчет не может быть кэширован.</span><span class="sxs-lookup"><span data-stu-id="51441-124">If a report includes user-dependent data, prompts users for credentials, or uses Windows Authentication, it cannot be cached.</span></span>  
  
## <a name="refreshing-the-cache"></a><span data-ttu-id="51441-125">Обновление кэша</span><span class="sxs-lookup"><span data-stu-id="51441-125">Refreshing the Cache</span></span>  
 <span data-ttu-id="51441-126">Кэшированный отчет заменяется более новой версией, когда пользователь выбирает отчет, срок кэшированной копии которого истек.</span><span class="sxs-lookup"><span data-stu-id="51441-126">A cached report is replaced with a newer version when a user selects the report after the previously cached copy has expired.</span></span> <span data-ttu-id="51441-127">Отчеты, которые настроены для выполнения в виде кэшируемых экземпляров, удаляются из кэша через промежутки времени, определенные в параметрах настройки истечения срока действия.</span><span class="sxs-lookup"><span data-stu-id="51441-127">Reports that are configured to run as cached instances are removed from the cache at regular intervals based on expiration settings.</span></span> <span data-ttu-id="51441-128">Можно установить срок действия отчета в минутах или до определенного времени, в соответствии с требованием срока предоставления данных.</span><span class="sxs-lookup"><span data-stu-id="51441-128">You can set a report's expiration in minutes or at a scheduled time, as determined by the data's immediacy requirement.</span></span> <span data-ttu-id="51441-129">Если не используется API-интерфейс SOAP, то напрямую удалить отчеты из кэша невозможно.</span><span class="sxs-lookup"><span data-stu-id="51441-129">You cannot delete reports from the cache directly unless you use the SOAP API.</span></span>  
  
 <span data-ttu-id="51441-130">Чтобы настроить срок действия кэша, можно использовать общее расписание или расписание отчета.</span><span class="sxs-lookup"><span data-stu-id="51441-130">To configure cache expiration, you can use a shared schedule or report-specific schedule.</span></span> <span data-ttu-id="51441-131">Если используется общее расписание и его действие приостанавливается, то срок кэширования не истекает, пока расписание приостановлено.</span><span class="sxs-lookup"><span data-stu-id="51441-131">If you use a shared schedule and it is subsequently paused, the cache does not expire while the schedule is inoperative.</span></span> <span data-ttu-id="51441-132">Если общее расписание впоследствии удаляется, копия параметров настройки расписания сохраняется в виде расписания отчета.</span><span class="sxs-lookup"><span data-stu-id="51441-132">If the shared schedule is subsequently deleted, a copy of the schedule settings is saved as a report-specific schedule.</span></span>  
  
 <span data-ttu-id="51441-133">Если срок расписания истекает или если ядро планирования недоступно на дату истечения срока хранения кэша, то сервер отчетов выполняет активный отчет до момента продолжения выполнения расписания (либо путем изменения конечной даты расписания, либо запуском службы планирования).</span><span class="sxs-lookup"><span data-stu-id="51441-133">If a schedule expires or if the scheduling engine is unavailable at a cache expiration date, the report server runs a live report until scheduled operations can be resumed (by either extending the schedule or starting the scheduling service).</span></span>  
  
## <a name="preloading-the-cache"></a><span data-ttu-id="51441-134">Предварительная загрузка кэша</span><span class="sxs-lookup"><span data-stu-id="51441-134">Preloading the Cache</span></span>  
 <span data-ttu-id="51441-135">Для улучшения работы сервера можно осуществить предварительную загрузку кэша.</span><span class="sxs-lookup"><span data-stu-id="51441-135">To improve server performance, you can preload the cache.</span></span> <span data-ttu-id="51441-136">Предварительную загрузку коллекции экземпляров параметризованных отчетов в кэш можно выполнить двумя способами.</span><span class="sxs-lookup"><span data-stu-id="51441-136">You can preload the cache with a collection of parameterized report instances in two ways:</span></span>  
  
1.  <span data-ttu-id="51441-137">Создание плана обновления кэша.</span><span class="sxs-lookup"><span data-stu-id="51441-137">Create a cache refresh plan.</span></span> <span data-ttu-id="51441-138">При создании плана обновления можно указать расписание для одного отчета или общее расписание.</span><span class="sxs-lookup"><span data-stu-id="51441-138">When you create a refresh plan, you can specify a schedule for a single report or specify a shared schedule.</span></span>  
  
2.  <span data-ttu-id="51441-139">Создание управляемой данными подписки в режиме «Отсутствующий поставщик доставки».</span><span class="sxs-lookup"><span data-stu-id="51441-139">Create a data-driven subscription that uses the Null Delivery Provider.</span></span> <span data-ttu-id="51441-140">При установке параметра «Отсутствующий поставщик доставки» в качестве метода доставки подписки сервер отчетов рассматривает базу данных сервера отчетов как адресат доставки и использует специальный модуль подготовки, называемый пустым модулем подготовки отчетов.</span><span class="sxs-lookup"><span data-stu-id="51441-140">When you specify the Null Delivery Provider as the method of delivery in the subscription, the report server targets the report server database as the delivery destination and uses a specialized rendering extension called the null rendering extension.</span></span> <span data-ttu-id="51441-141">В отличие от других модулей доставки вариант «Отсутствующий поставщик доставки» не имеет параметров доставки, которые можно настраивать через определение подписки.</span><span class="sxs-lookup"><span data-stu-id="51441-141">In contrast with other delivery extensions, the Null Delivery Provider does not have delivery settings that you can configure through a subscription definition.</span></span>  
  
 <span data-ttu-id="51441-142">Кэширование отчета особенно полезно в тех случаях, когда необходимо закэшировать несколько экземпляров параметризованного отчета, где для получения различных экземпляров используются различные значения параметра.</span><span class="sxs-lookup"><span data-stu-id="51441-142">Caching a report is especially useful if you want to cache multiple instances of a parameterized report where different parameter values are used to produce different report instances.</span></span> <span data-ttu-id="51441-143">Обратите внимание на то, что можно указать только те параметры отчета, которые основаны на запросе.</span><span class="sxs-lookup"><span data-stu-id="51441-143">Note that you can only specify query-based parameters on the report.</span></span>  
  
 <span data-ttu-id="51441-144">Если задано расписание или создание управляемой данными подписки, то необходимо запланировать доставки отчета в кэш.</span><span class="sxs-lookup"><span data-stu-id="51441-144">When you specify a schedule or when you create the data-driven subscription, you schedule how often the reports are delivered to the cache.</span></span> <span data-ttu-id="51441-145">Для доставки в кэш новых копий необходимо истечение срока действия старых копий.</span><span class="sxs-lookup"><span data-stu-id="51441-145">In order for new copies to be delivered to the cache, the old copies must have expired.</span></span> <span data-ttu-id="51441-146">Поэтому необходимо установить конфигурацию свойств выполнения отчета, включающую параметры настроек срока истечения кэша.</span><span class="sxs-lookup"><span data-stu-id="51441-146">Therefore, the Execution properties of the report must be configured to include cache expiration settings.</span></span> <span data-ttu-id="51441-147">Установка срока истечения должна соответствовать определяемому вами расписанию подписки.</span><span class="sxs-lookup"><span data-stu-id="51441-147">The expiration setting must be consistent with the subscription schedule that you define.</span></span> <span data-ttu-id="51441-148">Например, если создается подписка, которая выполняется каждую ночь, то срок кэша должен также заканчиваться каждую ночь до момента выполнения подписки.</span><span class="sxs-lookup"><span data-stu-id="51441-148">For example, if you create a subscription that runs every night, the cache should also expire every night prior to the subscription's run time.</span></span> <span data-ttu-id="51441-149">Если свойства выполнения не включают в себя сроки истечения, то более новые доставки не будут обрабатываться.</span><span class="sxs-lookup"><span data-stu-id="51441-149">If the Execution properties do not include expiration times, newer deliveries are disregarded.</span></span> <span data-ttu-id="51441-150">Дополнительные сведения о планах обновления кэша см. в разделе [Расписания](../subscriptions/schedules.md).</span><span class="sxs-lookup"><span data-stu-id="51441-150">For more information about cache refresh plans, see [Schedules](../subscriptions/schedules.md).</span></span> <span data-ttu-id="51441-151">Дополнительные сведения об установке свойств см. в разделе [Установка свойств обработки отчетов](set-report-processing-properties.md).</span><span class="sxs-lookup"><span data-stu-id="51441-151">For more information about setting properties, see [Set Report Processing Properties](set-report-processing-properties.md).</span></span> <span data-ttu-id="51441-152">Дополнительные сведения об использовании управляемых данными подписок см. в разделе [Подписки, управляемые данными](../subscriptions/data-driven-subscriptions.md).</span><span class="sxs-lookup"><span data-stu-id="51441-152">For more information about using data-driven subscriptions, see [Data-Driven Subscriptions](../subscriptions/data-driven-subscriptions.md).</span></span>  
  
## <a name="conditions-that-cause-cache-expiration"></a><span data-ttu-id="51441-153">Условия, вызывающие истечение срока действия кэша</span><span class="sxs-lookup"><span data-stu-id="51441-153">Conditions That Cause Cache Expiration</span></span>  
 <span data-ttu-id="51441-154">Закэшированный отчет становится недействительным в результате следующих событий: изменение определения отчета, изменение параметров отчета, изменение учетных данных источника данных или изменение параметров выполнения отчета.</span><span class="sxs-lookup"><span data-stu-id="51441-154">A cached report is invalidated in response to the following events: the report definition is modified, report parameters are modified, data source credentials change, or report execution options change.</span></span> <span data-ttu-id="51441-155">Если удаляется отчет, сохраненный в кэше, то его версия в кэше также удаляется.</span><span class="sxs-lookup"><span data-stu-id="51441-155">If you delete a report that is stored in the cache, the cached version is also deleted.</span></span>  
  
 <span data-ttu-id="51441-156">Если отчет не может быть по какой-то причине передан для обработки из экземпляра, хранящегося в кэше (например, если значения параметра отличаются от используемых для создания кэшированного отчета), то сервер отчетов повторно запускает отчет.</span><span class="sxs-lookup"><span data-stu-id="51441-156">If a report cannot be rendered from a cached instance for any reason (for example, if the parameter values that a user specifies are different from those used to produce the cached report), the report server reruns the report.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="51441-157">См. также:</span><span class="sxs-lookup"><span data-stu-id="51441-157">See Also</span></span>  
 <span data-ttu-id="51441-158">[Установка параметров обработки (службы Reporting Services в режиме интеграции с SharePoint)](../set-processing-options-reporting-services-in-sharepoint-integrated-mode.md) </span><span class="sxs-lookup"><span data-stu-id="51441-158">[Set Processing Options &#40;Reporting Services in SharePoint Integrated Mode&#41;](../set-processing-options-reporting-services-in-sharepoint-integrated-mode.md) </span></span>  
 <span data-ttu-id="51441-159">[Установка свойств обработки отчетов](set-report-processing-properties.md) </span><span class="sxs-lookup"><span data-stu-id="51441-159">[Set Report Processing Properties](set-report-processing-properties.md) </span></span>  
 <span data-ttu-id="51441-160">[Основные понятия служб Reporting Services (SSRS)](../reporting-services-concepts-ssrs.md) </span><span class="sxs-lookup"><span data-stu-id="51441-160">[Reporting Services Concepts &#40;SSRS&#41;](../reporting-services-concepts-ssrs.md) </span></span>  
 <span data-ttu-id="51441-161">[Предварительная загрузка диспетчер отчетов &#40;кэша&#41;](preload-the-cache-report-manager.md) </span><span class="sxs-lookup"><span data-stu-id="51441-161">[Preload the Cache &#40;Report Manager&#41;](preload-the-cache-report-manager.md) </span></span>  
 <span data-ttu-id="51441-162">[Расписания](../subscriptions/schedules.md) </span><span class="sxs-lookup"><span data-stu-id="51441-162">[Schedules](../subscriptions/schedules.md) </span></span>  
 <span data-ttu-id="51441-163">[Общие наборы данных кэша &#40;SSRS&#41;](cache-shared-datasets-ssrs.md) </span><span class="sxs-lookup"><span data-stu-id="51441-163">[Cache Shared Datasets &#40;SSRS&#41;](cache-shared-datasets-ssrs.md) </span></span>  
 [<span data-ttu-id="51441-164">Параметры обновления кэша (диспетчер отчетов)</span><span class="sxs-lookup"><span data-stu-id="51441-164">Cache Refresh Options &#40;Report Manager&#41;</span></span>](../cache-refresh-options-report-manager.md)  
  
  
