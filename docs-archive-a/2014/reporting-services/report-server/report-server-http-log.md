---
title: Журнал HTTP-запросов сервера отчетов | Документы Майкрософт
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: reporting-services-native
ms.topic: conceptual
helpviewer_keywords:
- HTTP [Reporting Services]
ms.assetid: 6cc433b7-165c-4b16-9034-79256dd6735f
author: maggiesMSFT
ms.author: maggies
manager: kfile
ms.openlocfilehash: 46adee4fb65361bb9b338c89b6e370ce1da68f9a
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87657011"
---
# <a name="report-server-http-log"></a><span data-ttu-id="85efb-102">Журнал HTTP-запросов сервера отчетов</span><span class="sxs-lookup"><span data-stu-id="85efb-102">Report Server HTTP Log</span></span>
  <span data-ttu-id="85efb-103">В файлах журнала HTTP сервера отчетов [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] хранится информация для каждого HTTP-запроса и ответа, обработанного сервером отчетов.</span><span class="sxs-lookup"><span data-stu-id="85efb-103">The [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] Report Server HTTP log files keep a record of every HTTP request and response handled by the report server.</span></span> <span data-ttu-id="85efb-104">Сообщения об ошибках, связанных с переполнением очереди запросов и временем ожидания, не достигают сервера отчетов, поэтому не регистрируются в файле журнала.</span><span class="sxs-lookup"><span data-stu-id="85efb-104">Because request overflow and timeout errors do not reach the report server, they are not recorded in the log file.</span></span>  
  
 <span data-ttu-id="85efb-105">По умолчанию ведение журнала HTTP не включено.</span><span class="sxs-lookup"><span data-stu-id="85efb-105">HTTP logging is not enabled by default.</span></span> <span data-ttu-id="85efb-106">Чтобы включить ведение журнала HTTP, измените файл конфигурации **ReportingServicesService.exe.config** для использования этой функции в своей установке.</span><span class="sxs-lookup"><span data-stu-id="85efb-106">To enable the HTTP logging, modify the **ReportingServicesService.exe.config** configuration file to use this feature in your installation.</span></span>  
  
## <a name="viewing-log-information"></a><span data-ttu-id="85efb-107">Просмотр данных журнала</span><span class="sxs-lookup"><span data-stu-id="85efb-107">Viewing Log Information</span></span>  
 <span data-ttu-id="85efb-108">Журнал представляет собой текстовый ASCII-файл.</span><span class="sxs-lookup"><span data-stu-id="85efb-108">The log is an ASCII text file.</span></span> <span data-ttu-id="85efb-109">Просмотреть этот файл можно в любом текстовом редакторе.</span><span class="sxs-lookup"><span data-stu-id="85efb-109">You can use any text editor to view the file.</span></span> <span data-ttu-id="85efb-110">Файл журнала HTTP сервера отчетов эквивалентен расширенному файлу журнала W3C в службах IIS, и в нем используются аналогичные поля, что позволяет применять существующие средства просмотра журнала IIS для чтения файлов журнала HTTP сервера отчетов.</span><span class="sxs-lookup"><span data-stu-id="85efb-110">The Report Server HTTP log file is equivalent to the W3C extended log file in IIS and uses similar fields so that you can use existing IIS log file viewers to read the report server HTTP log file.</span></span> <span data-ttu-id="85efb-111">В следующей таблице содержатся дополнительные сведения о файле журнала HTTP.</span><span class="sxs-lookup"><span data-stu-id="85efb-111">The following table provides additional information about the HTTP log file:</span></span>  
  
|||  
|-|-|  
|<span data-ttu-id="85efb-112">**Имя файла**</span><span class="sxs-lookup"><span data-stu-id="85efb-112">**File name**</span></span>|<span data-ttu-id="85efb-113">Имена файлов журнала по умолчанию:</span><span class="sxs-lookup"><span data-stu-id="85efb-113">By default, the log file name(s) are</span></span><br /><br /> `ReportServerService_HTTP_<timestamp>.log.`<br /><br /> <span data-ttu-id="85efb-114">Можно задать другой префикс имени файла, изменив атрибут HttpTraceFileName в файле конфигурации ReportingServicesService.exe.config.</span><span class="sxs-lookup"><span data-stu-id="85efb-114">You can customize the prefix of the file name by modifying the HttpTraceFileName attribute in the ReportingServicesService.exe.config file.</span></span> <span data-ttu-id="85efb-115">Отметки времени создаются на основе времени по Гринвичу (UTC).</span><span class="sxs-lookup"><span data-stu-id="85efb-115">The timestamp is based on Coordinated Universal Time (UTC).</span></span>|  
|<span data-ttu-id="85efb-116">**Размещение файла**</span><span class="sxs-lookup"><span data-stu-id="85efb-116">**File location**</span></span>|<span data-ttu-id="85efb-117">Файлы записываются в следующую папку:</span><span class="sxs-lookup"><span data-stu-id="85efb-117">The files are written to the following location:</span></span><br /><br /> `\Microsoft SQL Server\<SQL Server Instance>\Reporting Services\LogFiles`|  
|<span data-ttu-id="85efb-118">**Формат файлов**</span><span class="sxs-lookup"><span data-stu-id="85efb-118">**File format**</span></span>|<span data-ttu-id="85efb-119">Этот файл имеет формат EN-US.</span><span class="sxs-lookup"><span data-stu-id="85efb-119">The file is in EN-US format.</span></span> <span data-ttu-id="85efb-120">Он представляет собой текстовый ASCII-файл.</span><span class="sxs-lookup"><span data-stu-id="85efb-120">It is an ASCII text file.</span></span>|  
|<span data-ttu-id="85efb-121">**Создание и хранение файла**</span><span class="sxs-lookup"><span data-stu-id="85efb-121">**File creation and retention**</span></span>|<span data-ttu-id="85efb-122">Журнал HTTP создается после его включения в файле конфигурации, перезапуска службы и обработки сервером отчетов HTTP-запроса.</span><span class="sxs-lookup"><span data-stu-id="85efb-122">The HTTP log is created after you enable it in the configuration file, restart the service, and the report server handles an HTTP request.</span></span> <span data-ttu-id="85efb-123">Если необходимые параметры были настроены, но файл журнала отсутствует, откройте какой-либо отчет или запустите одно из приложений сервера отчетов (например, диспетчер отчетов), чтобы был сформирован HTTP-запрос для создания этого файла.</span><span class="sxs-lookup"><span data-stu-id="85efb-123">If you configure the settings but do not see the log file, open a report or start a report server application (such as Report Manager) to generate an HTTP request to create the file.</span></span><br /><br /> <span data-ttu-id="85efb-124">После каждого перезапуска службы и последующего HTTP-запроса на сервер отчетов создается новый экземпляр файла журнала.</span><span class="sxs-lookup"><span data-stu-id="85efb-124">A new instance of the log file will be created after each service restart and subsequent HTTP request to the report server.</span></span><br /><br /> <span data-ttu-id="85efb-125">По умолчанию размер журналов трассировки ограничен 32 МБ, а срок их хранения — 14 дней.</span><span class="sxs-lookup"><span data-stu-id="85efb-125">By default, trace logs are limited to 32 megabytes and deleted after 14 days.</span></span>|  
  
## <a name="configuration-settings-for-report-server-http-log"></a><span data-ttu-id="85efb-126">Параметры конфигурации для журнала HTTP сервера отчетов</span><span class="sxs-lookup"><span data-stu-id="85efb-126">Configuration Settings for Report Server HTTP Log</span></span>  
 <span data-ttu-id="85efb-127">Чтобы настроить конфигурацию журнала HTTP-сервера отчетов, измените файл **ReportingServicesService.exe.config** с помощью программы "Блокнот".</span><span class="sxs-lookup"><span data-stu-id="85efb-127">To configure the Report Server HTTP log, use Notepad to modify the **ReportingServicesService.exe.config** file.</span></span> <span data-ttu-id="85efb-128">Этот файл конфигурации находится в папке \Program Files\Microsoft SQL Server\MSSQL.n\Reporting Services\ReportServer\Bin.</span><span class="sxs-lookup"><span data-stu-id="85efb-128">The configuration file is located in the \Program Files\Microsoft SQL Server\MSSQL.n\Reporting Services\ReportServer\Bin folder.</span></span>  
  
 <span data-ttu-id="85efb-129">Чтобы разрешить применение сервера HTTP, добавьте запись `http:4` в раздел RStrace файла ReportingServicesService.exe.config.</span><span class="sxs-lookup"><span data-stu-id="85efb-129">To enable the HTTP server, add `http:4` to the RStrace section of the ReportingServicesService.exe.config file.</span></span> <span data-ttu-id="85efb-130">Все другие записи файла журнала HTTP являются необязательными.</span><span class="sxs-lookup"><span data-stu-id="85efb-130">All other HTTP log file entries are optional.</span></span> <span data-ttu-id="85efb-131">Следующий пример содержит все параметры, так что можно вставить целый раздел над разделом RStrace, а затем удалить ненужные параметры.</span><span class="sxs-lookup"><span data-stu-id="85efb-131">The following example includes all settings so that you can paste the whole section over the RStrace section, and then delete the settings you do not need.</span></span>  
  
```  
   <RStrace>  
         <add name="FileName" value="ReportServerService_" />  
         <add name="FileSizeLimitMb" value="32" />  
         <add name="KeepFilesForDays" value="14" />  
         <add name="Prefix" value="tid, time" />  
         <add name="TraceListeners" value="debugwindow, file" />  
         <add name="TraceFileMode" value="unique" />  
         <add name="HttpTraceFileName" value="ReportServerService_HTTP_" />  
         <add name="HttpTraceSwitches" value="date,time, clientip,username,serverip,serverport,host,method,uristem,uriquery,protocolstatus,bytesreceived,timetaken,protocolversion,useragent,cookiereceived,cookiesent,referrer" />  
         <add name="Components" value="all:3,http:4" />  
   </RStrace>  
```  
  
## <a name="log-file-fields"></a><span data-ttu-id="85efb-132">Поля файла журнала</span><span class="sxs-lookup"><span data-stu-id="85efb-132">Log File Fields</span></span>  
 <span data-ttu-id="85efb-133">В следующей таблице описаны поля, доступные в журнале.</span><span class="sxs-lookup"><span data-stu-id="85efb-133">The following table describes the fields that are available in the log.</span></span> <span data-ttu-id="85efb-134">Список полей можно изменить. С помощью параметра конфигурации `HTTPTraceSwitches` можно указать, какие поля необходимо включить.</span><span class="sxs-lookup"><span data-stu-id="85efb-134">The field list is configurable; you can specify which fields to include through the `HTTPTraceSwitches` configuration setting.</span></span> <span data-ttu-id="85efb-135">Столбец **по умолчанию** указывает, будет ли поле автоматически включаться в файл журнала, если не указано значение `HTTPTraceSwitches` .</span><span class="sxs-lookup"><span data-stu-id="85efb-135">The **Default** column specifies whether the field will be included in the log file automatically if you do not specify `HTTPTraceSwitches`.</span></span>  
  
|<span data-ttu-id="85efb-136">Поле</span><span class="sxs-lookup"><span data-stu-id="85efb-136">Field</span></span>|<span data-ttu-id="85efb-137">Description</span><span class="sxs-lookup"><span data-stu-id="85efb-137">Description</span></span>|<span data-ttu-id="85efb-138">По умолчанию</span><span class="sxs-lookup"><span data-stu-id="85efb-138">Default</span></span>|  
|-----------|-----------------|-------------|  
|<span data-ttu-id="85efb-139">HttpTraceFileName</span><span class="sxs-lookup"><span data-stu-id="85efb-139">HttpTraceFileName</span></span>|<span data-ttu-id="85efb-140">Это значение является необязательным.</span><span class="sxs-lookup"><span data-stu-id="85efb-140">This value is optional.</span></span> <span data-ttu-id="85efb-141">Значением по умолчанию является ReportServerServiceHTTP_.</span><span class="sxs-lookup"><span data-stu-id="85efb-141">The default value is ReportServerServiceHTTP_.</span></span> <span data-ttu-id="85efb-142">Можно указать другое значение, если требуется использовать другое соглашение об именах (например, чтобы включить имя сервера, если файлы журналов сохраняются в каком-то централизованном расположении).</span><span class="sxs-lookup"><span data-stu-id="85efb-142">You can specify a different value if want to use a different file naming convention (for example, to include the server name if you are saving log files to a central location).</span></span>|<span data-ttu-id="85efb-143">Да</span><span class="sxs-lookup"><span data-stu-id="85efb-143">Yes</span></span>|  
|<span data-ttu-id="85efb-144">HTTPTraceSwitches</span><span class="sxs-lookup"><span data-stu-id="85efb-144">HttpTraceSwitches</span></span>|<span data-ttu-id="85efb-145">Это значение является необязательным.</span><span class="sxs-lookup"><span data-stu-id="85efb-145">This value is optional.</span></span> <span data-ttu-id="85efb-146">Если указан этот параметр, можно настроить поля, используемые в файле журнала, в формате с разделителями-запятыми.</span><span class="sxs-lookup"><span data-stu-id="85efb-146">If you specify it, you can configure the fields used in the log file in comma-delimited format.</span></span>|<span data-ttu-id="85efb-147">нет</span><span class="sxs-lookup"><span data-stu-id="85efb-147">No</span></span>|  
|<span data-ttu-id="85efb-148">Дата</span><span class="sxs-lookup"><span data-stu-id="85efb-148">Date</span></span>|<span data-ttu-id="85efb-149">Дата, когда произошло действие.</span><span class="sxs-lookup"><span data-stu-id="85efb-149">The date when the activity occurred.</span></span>|<span data-ttu-id="85efb-150">нет</span><span class="sxs-lookup"><span data-stu-id="85efb-150">No</span></span>|  
|<span data-ttu-id="85efb-151">Time</span><span class="sxs-lookup"><span data-stu-id="85efb-151">Time</span></span>|<span data-ttu-id="85efb-152">Время, в которое произошло указанное действие.</span><span class="sxs-lookup"><span data-stu-id="85efb-152">The time when the activity occurred.</span></span>|<span data-ttu-id="85efb-153">нет</span><span class="sxs-lookup"><span data-stu-id="85efb-153">No</span></span>|  
|<span data-ttu-id="85efb-154">ClientIp</span><span class="sxs-lookup"><span data-stu-id="85efb-154">ClientIp</span></span>|<span data-ttu-id="85efb-155">IP-адрес клиента, получающего доступ к серверу отчетов.</span><span class="sxs-lookup"><span data-stu-id="85efb-155">The IP address of the client accessing the report server.</span></span>|<span data-ttu-id="85efb-156">Да</span><span class="sxs-lookup"><span data-stu-id="85efb-156">Yes</span></span>|  
|<span data-ttu-id="85efb-157">UserName</span><span class="sxs-lookup"><span data-stu-id="85efb-157">UserName</span></span>|<span data-ttu-id="85efb-158">Имя пользователя, который получил доступ к серверу отчетов.</span><span class="sxs-lookup"><span data-stu-id="85efb-158">The name of the user who accessed the report server.</span></span>|<span data-ttu-id="85efb-159">нет</span><span class="sxs-lookup"><span data-stu-id="85efb-159">No</span></span>|  
|<span data-ttu-id="85efb-160">ServerPort</span><span class="sxs-lookup"><span data-stu-id="85efb-160">ServerPort</span></span>|<span data-ttu-id="85efb-161">Номер порта, используемого для соединения.</span><span class="sxs-lookup"><span data-stu-id="85efb-161">The port number used for the connection.</span></span>|<span data-ttu-id="85efb-162">нет</span><span class="sxs-lookup"><span data-stu-id="85efb-162">No</span></span>|  
|<span data-ttu-id="85efb-163">Узел</span><span class="sxs-lookup"><span data-stu-id="85efb-163">Host</span></span>|<span data-ttu-id="85efb-164">Содержимое заголовка узла.</span><span class="sxs-lookup"><span data-stu-id="85efb-164">The content of the host header.</span></span>|<span data-ttu-id="85efb-165">нет</span><span class="sxs-lookup"><span data-stu-id="85efb-165">No</span></span>|  
|<span data-ttu-id="85efb-166">Метод</span><span class="sxs-lookup"><span data-stu-id="85efb-166">Method</span></span>|<span data-ttu-id="85efb-167">Действие или метод SOAP, вызванный из клиентского приложения.</span><span class="sxs-lookup"><span data-stu-id="85efb-167">The action or SOAP method called from the client.</span></span>|<span data-ttu-id="85efb-168">Да</span><span class="sxs-lookup"><span data-stu-id="85efb-168">Yes</span></span>|  
|<span data-ttu-id="85efb-169">UriStem</span><span class="sxs-lookup"><span data-stu-id="85efb-169">UriStem</span></span>|<span data-ttu-id="85efb-170">Ресурс, к которому получен доступ.</span><span class="sxs-lookup"><span data-stu-id="85efb-170">The resource accessed.</span></span>|<span data-ttu-id="85efb-171">Да</span><span class="sxs-lookup"><span data-stu-id="85efb-171">Yes</span></span>|  
|<span data-ttu-id="85efb-172">UriQuery</span><span class="sxs-lookup"><span data-stu-id="85efb-172">UriQuery</span></span>|<span data-ttu-id="85efb-173">Запрос, использованный для доступа к ресурсу.</span><span class="sxs-lookup"><span data-stu-id="85efb-173">The query used to access the resource.</span></span>|<span data-ttu-id="85efb-174">нет</span><span class="sxs-lookup"><span data-stu-id="85efb-174">No</span></span>|  
|<span data-ttu-id="85efb-175">ProtocolStatus</span><span class="sxs-lookup"><span data-stu-id="85efb-175">ProtocolStatus</span></span>|<span data-ttu-id="85efb-176">Код состояния HTTP.</span><span class="sxs-lookup"><span data-stu-id="85efb-176">The HTTP status code.</span></span>|<span data-ttu-id="85efb-177">Да</span><span class="sxs-lookup"><span data-stu-id="85efb-177">Yes</span></span>|  
|<span data-ttu-id="85efb-178">BytesReceived</span><span class="sxs-lookup"><span data-stu-id="85efb-178">BytesReceived</span></span>|<span data-ttu-id="85efb-179">Число байт, полученных сервером.</span><span class="sxs-lookup"><span data-stu-id="85efb-179">The number of bytes received by the server.</span></span>|<span data-ttu-id="85efb-180">нет</span><span class="sxs-lookup"><span data-stu-id="85efb-180">No</span></span>|  
|<span data-ttu-id="85efb-181">TimeTaken</span><span class="sxs-lookup"><span data-stu-id="85efb-181">TimeTaken</span></span>|<span data-ttu-id="85efb-182">Время (в миллисекундах), прошедшее с момента возврата компонентом HTTP.SYS данных запроса до завершения последней отправки сервером, в которое не входит время передачи по сети.</span><span class="sxs-lookup"><span data-stu-id="85efb-182">The time (in milliseconds) from the instant HTTP.SYS returns request data until the server finishes the last send, excluding network transmission time.</span></span>|<span data-ttu-id="85efb-183">нет</span><span class="sxs-lookup"><span data-stu-id="85efb-183">No</span></span>|  
|<span data-ttu-id="85efb-184">ProtocolVersion</span><span class="sxs-lookup"><span data-stu-id="85efb-184">ProtocolVersion</span></span>|<span data-ttu-id="85efb-185">Версия протокола, используемого клиентом.</span><span class="sxs-lookup"><span data-stu-id="85efb-185">The protocol version used by the client.</span></span>|<span data-ttu-id="85efb-186">нет</span><span class="sxs-lookup"><span data-stu-id="85efb-186">No</span></span>|  
|<span data-ttu-id="85efb-187">UserAgent</span><span class="sxs-lookup"><span data-stu-id="85efb-187">UserAgent</span></span>|<span data-ttu-id="85efb-188">Тип браузера, используемый клиентом.</span><span class="sxs-lookup"><span data-stu-id="85efb-188">The browser type used by the client.</span></span>|<span data-ttu-id="85efb-189">нет</span><span class="sxs-lookup"><span data-stu-id="85efb-189">No</span></span>|  
|<span data-ttu-id="85efb-190">CookieReceived</span><span class="sxs-lookup"><span data-stu-id="85efb-190">CookieReceived</span></span>|<span data-ttu-id="85efb-191">Содержимое куки-файла, полученного сервером.</span><span class="sxs-lookup"><span data-stu-id="85efb-191">The content of the cookie received by the server.</span></span>|<span data-ttu-id="85efb-192">нет</span><span class="sxs-lookup"><span data-stu-id="85efb-192">No</span></span>|  
|<span data-ttu-id="85efb-193">CookieSent</span><span class="sxs-lookup"><span data-stu-id="85efb-193">CookieSent</span></span>|<span data-ttu-id="85efb-194">Содержимое куки-файла, отправленного сервером.</span><span class="sxs-lookup"><span data-stu-id="85efb-194">The content of the cookie sent by the server.</span></span>|<span data-ttu-id="85efb-195">нет</span><span class="sxs-lookup"><span data-stu-id="85efb-195">No</span></span>|  
|<span data-ttu-id="85efb-196">Referrer</span><span class="sxs-lookup"><span data-stu-id="85efb-196">Referrer</span></span>|<span data-ttu-id="85efb-197">Предыдущий сайт, посещенный клиентом.</span><span class="sxs-lookup"><span data-stu-id="85efb-197">The previous site visited by the client.</span></span>|<span data-ttu-id="85efb-198">нет</span><span class="sxs-lookup"><span data-stu-id="85efb-198">No</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="85efb-199">См. также:</span><span class="sxs-lookup"><span data-stu-id="85efb-199">See Also</span></span>  
 <span data-ttu-id="85efb-200">[Журнал трассировки службы сервера отчетов](report-server-service-trace-log.md) </span><span class="sxs-lookup"><span data-stu-id="85efb-200">[Report Server Service Trace Log](report-server-service-trace-log.md) </span></span>  
 <span data-ttu-id="85efb-201">[Файлы и источники журналов служб Reporting Services](../report-server/reporting-services-log-files-and-sources.md) </span><span class="sxs-lookup"><span data-stu-id="85efb-201">[Reporting Services Log Files and Sources](../report-server/reporting-services-log-files-and-sources.md) </span></span>  
 [<span data-ttu-id="85efb-202">Справочник по ошибкам и событиям (службы Reporting Services)</span><span class="sxs-lookup"><span data-stu-id="85efb-202">Errors and Events Reference &#40;Reporting Services&#41;</span></span>](../troubleshooting/errors-and-events-reference-reporting-services.md)  
  
  
