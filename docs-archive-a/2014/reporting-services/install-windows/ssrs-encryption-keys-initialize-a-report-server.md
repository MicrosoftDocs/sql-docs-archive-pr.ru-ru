---
title: Инициализация сервера отчетов (диспетчер конфигурации служб SSRS) | Документы Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: database-engine
ms.topic: conceptual
helpviewer_keywords:
- report servers [Reporting Services], initializing
- initialization process [Reporting Services]
- checking report server initializations
- scale-out deployments [Reporting Services]
- initializing report servers [Reporting Services]
- verifying report server initializations
ms.assetid: 861d4ec4-1085-412c-9a82-68869a77bd55
author: maggiesMSFT
ms.author: maggies
manager: kfile
ms.openlocfilehash: 66fa70c29d718e040b6423afcfdff28721753690
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87751835"
---
# <a name="initialize-a-report-server-ssrs-configuration-manager"></a><span data-ttu-id="2205a-102">Инициализация сервера отчетов (диспетчер конфигурации служб SSRS)</span><span class="sxs-lookup"><span data-stu-id="2205a-102">Initialize a Report Server (SSRS Configuration Manager)</span></span>
  <span data-ttu-id="2205a-103">В службах [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)]инициализированный сервер — это сервер, способный шифровать и дешифровать данные в базе данных сервера отчетов.</span><span class="sxs-lookup"><span data-stu-id="2205a-103">In [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)], an initialized server is one that can encrypt and decrypt data in a report server database.</span></span> <span data-ttu-id="2205a-104">Инициализация является необходимым условием функционирования сервера отчетов.</span><span class="sxs-lookup"><span data-stu-id="2205a-104">Initialization is a requirement for report server operation.</span></span> <span data-ttu-id="2205a-105">Инициализация происходит, когда служба сервера отчетов запускается впервые.</span><span class="sxs-lookup"><span data-stu-id="2205a-105">Initialization occurs when the Report Server service is started for the first time.</span></span> <span data-ttu-id="2205a-106">Она также происходит, когда сервер отчетов соединяется с уже развернутой системой или когда вручную повторно создаются ключи как часть процесса восстановления.</span><span class="sxs-lookup"><span data-stu-id="2205a-106">It also occurs when you join the report server to the existing deployment, or when you manually recreate the keys as part of the recovery process.</span></span> <span data-ttu-id="2205a-107">Дополнительные сведения о том, как и почему использовать ключи шифрования, см. в разделах [Настройка ключей шифрования и управление ими (диспетчер конфигурации служб SSRS)](ssrs-encryption-keys-manage-encryption-keys.md) и [Хранение зашифрованных данных сервера отчетов (диспетчер конфигурации служб SSRS)](ssrs-encryption-keys-store-encrypted-report-server-data.md).</span><span class="sxs-lookup"><span data-stu-id="2205a-107">For more information about how and why encryption keys are used, see [Configure and Manage Encryption Keys &#40;SSRS Configuration Manager&#41;](ssrs-encryption-keys-manage-encryption-keys.md) and [Store Encrypted Report Server Data &#40;SSRS Configuration Manager&#41;](ssrs-encryption-keys-store-encrypted-report-server-data.md).</span></span>  
  
 <span data-ttu-id="2205a-108">Ключи шифрования частично основываются на данных профиля в службе сервера отчетов.</span><span class="sxs-lookup"><span data-stu-id="2205a-108">Encryption keys are based partly on the profile information of the Report Server service.</span></span> <span data-ttu-id="2205a-109">Если изменяется удостоверение пользователя, которое применяется для запуска службы сервера отчетов, необходимо соответствующим образом обновить ключи.</span><span class="sxs-lookup"><span data-stu-id="2205a-109">If you change the user identity used to run the Report Server service, you must update the keys accordingly.</span></span> <span data-ttu-id="2205a-110">Если используется программа настройки служб Reporting Services для изменения удостоверения пользователя, этот шаг выполняется автоматически.</span><span class="sxs-lookup"><span data-stu-id="2205a-110">If you are using the Reporting Services Configuration tool to change the identity, this step is handled for you automatically.</span></span>  
  
 <span data-ttu-id="2205a-111">Если инициализация по какой-либо причине прошла неудачно, сервер отчетов возвращает ошибку `RSReportServerNotActivated` в ответ на запросы пользователя и службы.</span><span class="sxs-lookup"><span data-stu-id="2205a-111">If initialization fails for some reason, the report server returns an `RSReportServerNotActivated` error in response to user and service requests.</span></span> <span data-ttu-id="2205a-112">В такой ситуации, вероятно, потребуется произвести диагностику и устранение неисправностей в системе или конфигурации сервера.</span><span class="sxs-lookup"><span data-stu-id="2205a-112">In this case, you may need to troubleshoot the system or server configuration.</span></span> <span data-ttu-id="2205a-113">Дополнительные сведения см. в руководстве по [устранению неполадок со службами Reporting Services](https://social.technet.microsoft.com/wiki/contents/articles/1633.aspx) (https://social.technet.microsoft.com/wiki/contents/articles/1633.aspx) вики-статья Technet.</span><span class="sxs-lookup"><span data-stu-id="2205a-113">For more information, see [SSRS: Troubleshoot Issues and Errors with Reporting Services](https://social.technet.microsoft.com/wiki/contents/articles/1633.aspx) (https://social.technet.microsoft.com/wiki/contents/articles/1633.aspx) in Technet Wiki.</span></span>  
  
## <a name="overview-of-the-initialization-process"></a><span data-ttu-id="2205a-114">Общие сведения о процессе инициализации</span><span class="sxs-lookup"><span data-stu-id="2205a-114">Overview of the Initialization Process</span></span>  
 <span data-ttu-id="2205a-115">Процесс инициализации создает и хранит симметричный ключ, используемый для шифрования.</span><span class="sxs-lookup"><span data-stu-id="2205a-115">The initialization process creates and stores a symmetric key used for encryption.</span></span> <span data-ttu-id="2205a-116">Симметричный ключ создается службами криптографии [!INCLUDE[msCoName](../../includes/msconame-md.md)] Windows и впоследствии используется службой сервера отчетов для шифрования и дешифрования данных.</span><span class="sxs-lookup"><span data-stu-id="2205a-116">The symmetric key is created by the [!INCLUDE[msCoName](../../includes/msconame-md.md)] Windows Cryptographic Services and subsequently used by the Report Server service to encrypt and decrypt data.</span></span> <span data-ttu-id="2205a-117">Сам симметричный ключ зашифрован при помощи асимметричного ключа.</span><span class="sxs-lookup"><span data-stu-id="2205a-117">The symmetric key is itself encrypted with an asymmetric key.</span></span>  
  
 <span data-ttu-id="2205a-118">Ниже описаны этапы инициализации.</span><span class="sxs-lookup"><span data-stu-id="2205a-118">The following steps describe the initialization process:</span></span>  
  
1.  <span data-ttu-id="2205a-119">При первоначальном запуске служба сервера отчетов считывает файл конфигурации RSReportServer.config, чтобы получить идентификатор установки и сведения для подключения к базе данных.</span><span class="sxs-lookup"><span data-stu-id="2205a-119">At initial start up, the Report Server service reads the RSReportServer.config file to get the installation identifier and database connection information.</span></span>  
  
2.  <span data-ttu-id="2205a-120">Служба сервера отчетов запрашивает открытый ключ у служб криптографии.</span><span class="sxs-lookup"><span data-stu-id="2205a-120">The Report Server service requests a public key from Cryptographic Services.</span></span> <span data-ttu-id="2205a-121">Windows создает секретный и открытый ключ и отсылает открытый ключ службе сервера отчетов.</span><span class="sxs-lookup"><span data-stu-id="2205a-121">Windows creates a private and public key and sends the public key to the Report Server service.</span></span>  
  
3.  <span data-ttu-id="2205a-122">Служба сервера отчетов соединяется с базой данных сервера отчетов и сохраняет значения идентификатора установки и открытого ключа.</span><span class="sxs-lookup"><span data-stu-id="2205a-122">The Report Server service connects to the report server database and stores the installation identifier and public key values.</span></span>  
  
4.  <span data-ttu-id="2205a-123">Служба сервера отчетов снова вызывает службы криптографии, на этот раз запрашивая симметричный ключ.</span><span class="sxs-lookup"><span data-stu-id="2205a-123">The Report Server service calls into Cryptographic Services again, this time to request a symmetric key.</span></span> <span data-ttu-id="2205a-124">Windows создает симметричный ключ.</span><span class="sxs-lookup"><span data-stu-id="2205a-124">Windows creates the symmetric key.</span></span>  
  
5.  <span data-ttu-id="2205a-125">Служба сервера отчетов соединяется с базой данных сервера отчетов и добавляет симметричный ключ к открытому ключу и значениям идентификатора установки, которые были сохранены на шаге 3.</span><span class="sxs-lookup"><span data-stu-id="2205a-125">The Report Server service connects to the report server database again, and adds the symmetric key to the public key and installation identifier values that were stored in step 3.</span></span> <span data-ttu-id="2205a-126">Перед сохранением служба сервера отчетов использует открытый ключ для шифрования симметричного ключа.</span><span class="sxs-lookup"><span data-stu-id="2205a-126">Before storing it, the Report Server service uses its public key to encrypt the symmetric key.</span></span> <span data-ttu-id="2205a-127">С момента сохранения симметричного ключа сервер отчетов считается инициализированным и доступным для использования.</span><span class="sxs-lookup"><span data-stu-id="2205a-127">Once the symmetric key is stored, the report server is considered initialized and available to use.</span></span>  
  
## <a name="initializing-a-report-server-for-scale-out-deployment"></a><span data-ttu-id="2205a-128">Инициализация сервера отчетов для масштабного развертывания</span><span class="sxs-lookup"><span data-stu-id="2205a-128">Initializing a Report Server for Scale-out Deployment</span></span>  
 [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] <span data-ttu-id="2205a-129">поддерживает модель масштабного развертывания, которая опирается на совместное использование одной базы данных сервера отчетов несколькими экземплярами сервера отчетов.</span><span class="sxs-lookup"><span data-stu-id="2205a-129">supports a scale-out deployment model that shares a single report server database among multiple report server instances.</span></span> <span data-ttu-id="2205a-130">Чтобы присоединиться к масштабному развертыванию, сервер отчетов должен создать и сохранить свою копию симметричного ключа в общей базе данных.</span><span class="sxs-lookup"><span data-stu-id="2205a-130">To join a scale-out deployment, a report server must create and store its copy of the symmetric key in the shared database.</span></span> <span data-ttu-id="2205a-131">Хотя все серверы, использующие эту базу данных, пользуются единственным симметричным ключом, каждый сервер отчетов имеет собственную копию этого ключа.</span><span class="sxs-lookup"><span data-stu-id="2205a-131">Although a single symmetric key is used by servers that use the database, each report server has its copy of the key.</span></span> <span data-ttu-id="2205a-132">Каждая копия отличается от других тем, что она уникальным образом зашифрована при помощи открытого ключа своего владельца.</span><span class="sxs-lookup"><span data-stu-id="2205a-132">Each copy varies in that it is uniquely encrypted using the public key its owner.</span></span>  
  
 <span data-ttu-id="2205a-133">Первая группа этапов инициализации сервера отчетов для масштабного развертывания идентична первым трем этапам инициализации сочетания одиночного сервера и базы данных.</span><span class="sxs-lookup"><span data-stu-id="2205a-133">The first set of steps for initializing a report server for scale-out deployment are identical to the first three steps that describe initialization for a single server and database combination.</span></span>  
  
 <span data-ttu-id="2205a-134">Процесс инициализации для горизонтального увеличения масшаба развертывания отличается тем, как сервер отчетов получает симметричный ключ.</span><span class="sxs-lookup"><span data-stu-id="2205a-134">The initialization process for a scale out deployment differs in how the report server gets the symmetric key.</span></span> <span data-ttu-id="2205a-135">Когда первый сервер проходит инициализацию, он получает симметричный ключ от Windows.</span><span class="sxs-lookup"><span data-stu-id="2205a-135">When the first server is initialized, it gets the symmetric key from Windows.</span></span> <span data-ttu-id="2205a-136">Когда второй сервер проходит инициализацию в процессе настройки масштабного развертывания, он получает симметричный ключ от службы сервера отчетов, которая уже инициализирована.</span><span class="sxs-lookup"><span data-stu-id="2205a-136">When the second server is initialized during configuration for scale-out deployment, it gets the symmetric key from the Report Server service that is already initialized.</span></span> <span data-ttu-id="2205a-137">Первый экземпляр сервера отчетов использует открытый ключ второго экземпляра, чтобы создать зашифрованную копию симметричного ключа для второго экземпляра сервера отчетов.</span><span class="sxs-lookup"><span data-stu-id="2205a-137">The first report server instance uses the public key of the second instance to create an encrypted copy of the symmetric key for the second report server instance.</span></span> <span data-ttu-id="2205a-138">Симметричный ключ не отображается как простой текст ни на одном этапе этого процесса.</span><span class="sxs-lookup"><span data-stu-id="2205a-138">The symmetric key is never exposed as plain text at any point in this process.</span></span>  
  
## <a name="how-to-initialize-a-report-server"></a><span data-ttu-id="2205a-139">Как инициализировать сервер отчетов</span><span class="sxs-lookup"><span data-stu-id="2205a-139">How to Initialize a Report Server</span></span>  
  
-   <span data-ttu-id="2205a-140">Чтобы инициализировать сервер отчетов, используйте программу настройки служб Reporting Services.</span><span class="sxs-lookup"><span data-stu-id="2205a-140">To initialize a report server, use the Reporting Services Configuration tool.</span></span> <span data-ttu-id="2205a-141">Инициализация происходит автоматически, когда создается и настраивается база данных сервера отчетов.</span><span class="sxs-lookup"><span data-stu-id="2205a-141">Initialization occurs automatically when you create and configure the report server database.</span></span> <span data-ttu-id="2205a-142">Дополнительные сведения см. в разделе [Настройка подключения к базе данных сервера отчетов (диспетчер конфигураций служб Reporting Services)](../../sql-server/install/configure-a-report-server-database-connection-ssrs-configuration-manager.md).</span><span class="sxs-lookup"><span data-stu-id="2205a-142">For more information, see [Configure a Report Server Database Connection  &#40;SSRS Configuration Manager&#41;](../../sql-server/install/configure-a-report-server-database-connection-ssrs-configuration-manager.md).</span></span>  
  
-   <span data-ttu-id="2205a-143">Чтобы инициализировать сервер отчетов для масштабного развертывания, можно использовать страницу "Инициализация" в программе настройки служб Reporting Services или программу **RSKeymgmt** .</span><span class="sxs-lookup"><span data-stu-id="2205a-143">To initialize a report server for scale-out deployment, you can use the Initialization page in the Reporting Services Configuration tool or the **RSKeymgmt** utility.</span></span> <span data-ttu-id="2205a-144">Дополнительные сведения и пошаговые инструкции см. в разделе [Настройка масштабного развертывания сервера отчетов в собственном режиме (диспетчер конфигурации служб SSRS)](configure-a-native-mode-report-server-scale-out-deployment.md).</span><span class="sxs-lookup"><span data-stu-id="2205a-144">To follow step-by-step instructions, see [Configure a Native Mode Report Server Scale-Out Deployment &#40;SSRS Configuration Manager&#41;](configure-a-native-mode-report-server-scale-out-deployment.md).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="2205a-145">**RSKeymgmt** — это консольное приложение, запускаемое из командной строки компьютера, на котором установлен экземпляр сервера отчетов, уже являющийся частью масштабного развертывания.</span><span class="sxs-lookup"><span data-stu-id="2205a-145">**RSKeymgmt** is a console application that you run from a command line on a computer that hosts a report server instance that is already part of a scale-out deployment.</span></span> <span data-ttu-id="2205a-146">При запуске этой программы указываются аргументы для выбора удаленного экземпляра сервера отчетов, который необходимо инициализировать.</span><span class="sxs-lookup"><span data-stu-id="2205a-146">When you run the utility, you specify arguments to select a remote report server instance that you want to initialize.</span></span>  
  
 <span data-ttu-id="2205a-147">Сервер отчетов будет инициализирован только в случае соответствия идентификатора установки и открытого ключа.</span><span class="sxs-lookup"><span data-stu-id="2205a-147">A report server will be initialized only if there is a match between the installation identifier and the public key.</span></span> <span data-ttu-id="2205a-148">Если соответствие установлено, создается симметричный ключ, позволяющий производить обратимое шифрование.</span><span class="sxs-lookup"><span data-stu-id="2205a-148">If the match succeeds, a symmetric key is created that permits reversible encryption.</span></span> <span data-ttu-id="2205a-149">Если соответствие не установлено, сервер отчетов отключается, и в этом случае, вероятно, придется применить резервную копию ключа либо удалить зашифрованные данные, если резервная копия ключа недоступна или недействительна.</span><span class="sxs-lookup"><span data-stu-id="2205a-149">If the match fails, the report server is disabled, in which case you may be required to apply a backup key or delete the encrypted data if a backup key is unavailable or not valid.</span></span> <span data-ttu-id="2205a-150">Дополнительные сведения о ключах шифрования, используемых сервером отчетов, см. в разделе [Настройка ключей шифрования и управление ими (диспетчер конфигурации служб SSRS)](ssrs-encryption-keys-manage-encryption-keys.md).</span><span class="sxs-lookup"><span data-stu-id="2205a-150">For more information about encryption keys used by a report server, see [Configure and Manage Encryption Keys &#40;SSRS Configuration Manager&#41;](ssrs-encryption-keys-manage-encryption-keys.md).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="2205a-151">Можно также воспользоваться поставщиком инструментария управления Windows (WMI) для служб [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] , чтобы программными средствами инициализировать сервер отчетов.</span><span class="sxs-lookup"><span data-stu-id="2205a-151">You can also use the [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] Windows Management Instrumentation (WMI) provider to initialize a report server programmatically.</span></span> <span data-ttu-id="2205a-152">Дополнительные сведения об этом подходе см. в статье [Доступ к поставщику WMI для служб Reporting Services](../tools/access-the-reporting-services-wmi-provider.md) в электронной документации [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="2205a-152">For more information, see [Access the Reporting Services WMI Provider](../tools/access-the-reporting-services-wmi-provider.md) in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Books Online.</span></span>  
  
## <a name="how-to-confirm-a-report-server-initialization"></a><span data-ttu-id="2205a-153">Как подтвердить инициализацию сервера отчетов</span><span class="sxs-lookup"><span data-stu-id="2205a-153">How to Confirm a Report Server Initialization</span></span>  
 <span data-ttu-id="2205a-154">Чтобы подтвердить инициализацию сервера отчетов, проверьте связь с веб-службой сервера отчетов, введя **http:// \<servername> /ReportServer** в командном окне.</span><span class="sxs-lookup"><span data-stu-id="2205a-154">To confirm report server initialization, ping the Report Server Web service by typing **http://\<servername>/reportserver** in the command window.</span></span> <span data-ttu-id="2205a-155">Если получена ошибка `RSReportServerNotActivated`, инициализация прошла неудачно.</span><span class="sxs-lookup"><span data-stu-id="2205a-155">If the `RSReportServerNotActivated` error occurs, the initialization failed.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="2205a-156">См. также:</span><span class="sxs-lookup"><span data-stu-id="2205a-156">See Also</span></span>  
 [<span data-ttu-id="2205a-157">Хранение зашифрованных данных сервера отчетов &#40;диспетчер конфигурации служб SSRS&#41;</span><span class="sxs-lookup"><span data-stu-id="2205a-157">Store Encrypted Report Server Data &#40;SSRS Configuration Manager&#41;</span></span>](ssrs-encryption-keys-store-encrypted-report-server-data.md)  
  
  
