---
title: Хранение зашифрованных данных сервера отчетов (диспетчер конфигурации служб SSRS) | Документы Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: database-engine
ms.topic: conceptual
helpviewer_keywords:
- report servers [Reporting Services], encryption
- credentials [Reporting Services]
- cryptography [Reporting Services]
- confidential reports [Reporting Services]
- encryption [Reporting Services]
- databases [Reporting Services], encryption
ms.assetid: ac0f4d4d-fc4b-4c62-a693-b86e712e75f2
author: maggiesMSFT
ms.author: maggies
manager: kfile
ms.openlocfilehash: 0cbc414918a15d19f0f211a572878dc7f93ca277
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87751827"
---
# <a name="store-encrypted-report-server-data-ssrs-configuration-manager"></a><span data-ttu-id="5d7ff-102">Хранение зашифрованных данных сервера отчетов (диспетчер конфигурации служб SSRS)</span><span class="sxs-lookup"><span data-stu-id="5d7ff-102">Store Encrypted Report Server Data (SSRS Configuration Manager)</span></span>
  [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] <span data-ttu-id="5d7ff-103">хранят зашифрованные значения в базе данных сервера отчетов и в файлах конфигурации.</span><span class="sxs-lookup"><span data-stu-id="5d7ff-103">stores encrypted values in the report server database and in configuration files.</span></span> <span data-ttu-id="5d7ff-104">Зашифрованные значения — это главным образом учетные данные, используемые при подключении к внешним источникам данных, содержащим данные для отчетов.</span><span class="sxs-lookup"><span data-stu-id="5d7ff-104">Most encrypted values are credentials that are used for accessing external data sources that provide data to reports.</span></span> <span data-ttu-id="5d7ff-105">В данном разделе содержатся сведения о шифруемых значениях, о возможностях шифрования в службах [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)]и о других важных типах конфиденциальных данных.</span><span class="sxs-lookup"><span data-stu-id="5d7ff-105">This topic describes which values are encrypted, the encryption functionality used in [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)], and other kinds of stored confidential data that you should know about.</span></span>  
  
## <a name="encrypted-values"></a><span data-ttu-id="5d7ff-106">Шифруемые значения</span><span class="sxs-lookup"><span data-stu-id="5d7ff-106">Encrypted Values</span></span>  
 <span data-ttu-id="5d7ff-107">В следующем списке описаны значения, хранящиеся в экземпляре служб [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="5d7ff-107">The following list describes the values that are stored in a [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] installation.</span></span>  
  
-   <span data-ttu-id="5d7ff-108">Сведения о соединении и учетные данные, используемые сервером отчетов для подключения к базе данных сервера отчетов, содержащей внутренние данные сервера.</span><span class="sxs-lookup"><span data-stu-id="5d7ff-108">Connection information and credentials used by a report server to connect to a report server database that stores internal server data.</span></span>  
  
     <span data-ttu-id="5d7ff-109">Эти значения задаются и шифруются при начальной установке или последующей настройке сервера отчетов.</span><span class="sxs-lookup"><span data-stu-id="5d7ff-109">These values are specified and encrypted during setup or report server configuration.</span></span> <span data-ttu-id="5d7ff-110">Сведения о подключении можно изменить в любой момент с помощью средства настройки служб Reporting Services или программы **rsconfig** .</span><span class="sxs-lookup"><span data-stu-id="5d7ff-110">You can update the connection information at any time using the Reporting Services Configuration tool or the **rsconfig** utility.</span></span> <span data-ttu-id="5d7ff-111">Шифрование параметров конфигурации выполняется с использованием машинного ключа локального компьютера, который доступен всем пользователям.</span><span class="sxs-lookup"><span data-stu-id="5d7ff-111">Encryption of configuration settings is performed by using the machine-level key of the local computer that is available to all users.</span></span> <span data-ttu-id="5d7ff-112">Зашифрованные сведения о соединении с сервером отчетов сохраняются в файле rsreportserver.config (никакие другие файлы конфигурации не содержат зашифрованных сведений о настройках).</span><span class="sxs-lookup"><span data-stu-id="5d7ff-112">Encrypted report server connection information is stored in the rsreportserver.config file (no other configuration file contains encrypted settings).</span></span> <span data-ttu-id="5d7ff-113">Дополнительные сведения см. в разделе [Настройка подключения к базе данных сервера отчетов (диспетчер конфигураций служб Reporting Services)](../../sql-server/install/configure-a-report-server-database-connection-ssrs-configuration-manager.md).</span><span class="sxs-lookup"><span data-stu-id="5d7ff-113">For more information, see [Configure a Report Server Database Connection  &#40;SSRS Configuration Manager&#41;](../../sql-server/install/configure-a-report-server-database-connection-ssrs-configuration-manager.md).</span></span>  
  
-   <span data-ttu-id="5d7ff-114">Сохраненные учетные данные, используемые сервером отчетов для подключения к внешним источникам данных, предоставляющим данные для отчетов.</span><span class="sxs-lookup"><span data-stu-id="5d7ff-114">Stored credentials that are used by a report server to connect to external data sources that provide data to a report.</span></span>  
  
     <span data-ttu-id="5d7ff-115">Эти значения определяются во время настройки источника данных для отчета, затем сохраняются в зашифрованном виде в базе данных сервера отчетов.</span><span class="sxs-lookup"><span data-stu-id="5d7ff-115">These values are defined when you configure data source information for a report, and then stored as encrypted values in a report server database.</span></span> <span data-ttu-id="5d7ff-116">Для шифрования и расшифровки этих данных сервер отчетов использует симметричный ключ.</span><span class="sxs-lookup"><span data-stu-id="5d7ff-116">The report server uses a symmetric key to encrypt and decrypt this data.</span></span> <span data-ttu-id="5d7ff-117">Дополнительные сведения о сохраненных учетных данных см. в разделе [Задание учетных данных и сведений о соединении для источников данных отчета](../../integration-services/connection-manager/data-sources.md) в электронной документации [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="5d7ff-117">For more information about stored credentials, see [Specify Credential and Connection Information for Report Data Sources](../../integration-services/connection-manager/data-sources.md) in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Books Online.</span></span>  
  
-   <span data-ttu-id="5d7ff-118">Автоматическая учетная запись, используемая сервером отчетов для подключения к другим компьютерам с целью получения файлов внешних изображений или внешних данных, используемых в отчетах.</span><span class="sxs-lookup"><span data-stu-id="5d7ff-118">An unattended user account used by the report server to connect to other computers to retrieve external images files or external data that is used in a report.</span></span>  
  
     <span data-ttu-id="5d7ff-119">Эта учетная запись используется в случае, когда требуется соединение с удаленным компьютером и для этого нет никаких других учетных данных.</span><span class="sxs-lookup"><span data-stu-id="5d7ff-119">This account is used when a connection to a remote computer is required and no other credentials are available to make the connection.</span></span> <span data-ttu-id="5d7ff-120">Эта учетная запись применяется в основном для поддержки автоматической обработки отчетов, в которых не используются учетные данные для соединения с источниками данных.</span><span class="sxs-lookup"><span data-stu-id="5d7ff-120">This account is primarily used to support unattended report processing for reports that do not use credentials to access a data source.</span></span> <span data-ttu-id="5d7ff-121">При создании отчетов на основе источников данных, которые не используют учетные данные для доступа к данным либо не нуждаются в них, необходимо настроить эту учетную запись на использование сервером отчетов.</span><span class="sxs-lookup"><span data-stu-id="5d7ff-121">If you create reports based on data sources that do not require or use credentials when accessing data, you must configure this account for the report server to use.</span></span>  
  
     <span data-ttu-id="5d7ff-122">Эта учетная запись необходима в некоторых случаях и может быть создана только с помощью средства настройки служб Reporting Services или программы **rsconfig**.</span><span class="sxs-lookup"><span data-stu-id="5d7ff-122">This account is required under certain circumstances and can only be created through the Reporting Services Configuration tool or **rsconfig**.</span></span> <span data-ttu-id="5d7ff-123">Это значение также сохраняется в файле rsreportserver.config.</span><span class="sxs-lookup"><span data-stu-id="5d7ff-123">This value is also stored in the rsreportserver.config file.</span></span> <span data-ttu-id="5d7ff-124">Эту учетную запись необходимо создать вручную.</span><span class="sxs-lookup"><span data-stu-id="5d7ff-124">You must create this account manually.</span></span> <span data-ttu-id="5d7ff-125">Дополнительные сведения об этой учетной записи и ее использовании см. в разделе [Настройка учетной записи автоматического выполнения (диспетчер конфигурации служб SSRS)](configure-the-unattended-execution-account-ssrs-configuration-manager.md).</span><span class="sxs-lookup"><span data-stu-id="5d7ff-125">For more information about this account and how it is used, see [Configure the Unattended Execution Account &#40;SSRS Configuration Manager&#41;](configure-the-unattended-execution-account-ssrs-configuration-manager.md).</span></span>  
  
-   <span data-ttu-id="5d7ff-126">Для шифрования используется симметричный ключ.</span><span class="sxs-lookup"><span data-stu-id="5d7ff-126">The symmetric key used for encryption.</span></span>  
  
     <span data-ttu-id="5d7ff-127">Это значение создается во время установки или конфигурации сервера и сохраняется как зашифрованное значение в базе данных сервера отчетов.</span><span class="sxs-lookup"><span data-stu-id="5d7ff-127">This value is created during setup or server configuration, and then stored as an encrypted value in the report server database.</span></span> <span data-ttu-id="5d7ff-128">Служба сервера отчетов Windows использует этот ключ при шифровании и расшифровки данных, хранимых в базе данных сервера отчетов.</span><span class="sxs-lookup"><span data-stu-id="5d7ff-128">The Report Server Windows service uses this key to encrypt and decrypt data that is stored in the report server database.</span></span>  
  
## <a name="encryption-functionality-in-reporting-services"></a><span data-ttu-id="5d7ff-129">Возможности шифрования в службах Reporting Services</span><span class="sxs-lookup"><span data-stu-id="5d7ff-129">Encryption Functionality in Reporting Services</span></span>  
 [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] <span data-ttu-id="5d7ff-130">используют функции шифрования, входящие в состав операционной системы Windows.</span><span class="sxs-lookup"><span data-stu-id="5d7ff-130">uses cryptographic functions that are part of the Windows operating system.</span></span> <span data-ttu-id="5d7ff-131">Используется как симметричное, так и асимметричное шифрование.</span><span class="sxs-lookup"><span data-stu-id="5d7ff-131">Both symmetric and asymmetric encryption are used.</span></span>  
  
 <span data-ttu-id="5d7ff-132">Данные в базе данных сервера отчетов шифруются с помощью симметричного ключа.</span><span class="sxs-lookup"><span data-stu-id="5d7ff-132">Data in the report server database is encrypted using a symmetric key.</span></span> <span data-ttu-id="5d7ff-133">Для каждой базы данных сервера отчетов существует отдельный симметричный ключ.</span><span class="sxs-lookup"><span data-stu-id="5d7ff-133">There is a single symmetric key for each report server database.</span></span> <span data-ttu-id="5d7ff-134">Сам этот ключ шифруется с помощью открытого ключа из пары асимметричных ключей, формируемых ОС Windows.</span><span class="sxs-lookup"><span data-stu-id="5d7ff-134">This symmetric key is itself encrypted using the public key of an asymmetric key pair generated by Windows.</span></span> <span data-ttu-id="5d7ff-135">Закрытым ключом владеет учетная запись службы Windows сервера отчетов.</span><span class="sxs-lookup"><span data-stu-id="5d7ff-135">The private key is held by the Report Server Windows service account.</span></span>  
  
 <span data-ttu-id="5d7ff-136">При масштабном развертывании сервера отчетов, когда несколько экземпляров сервера отчетов используют одну и ту же базу данных, используется единый симметричный ключ для всех узлов сервера отчетов.</span><span class="sxs-lookup"><span data-stu-id="5d7ff-136">In a report server scale-out deployment where multiple report server instances share the same report server database, a single symmetric key is used by all report server nodes.</span></span> <span data-ttu-id="5d7ff-137">На каждом узле должна содержаться копия общего симметричного ключа.</span><span class="sxs-lookup"><span data-stu-id="5d7ff-137">Each node must have a copy of the shared symmetric key.</span></span> <span data-ttu-id="5d7ff-138">Копия симметричного ключа создается для каждого узла автоматически при настройке масштабного развертывания.</span><span class="sxs-lookup"><span data-stu-id="5d7ff-138">A copy of the symmetric key is created for each node automatically when the scale-out deployment is configured.</span></span> <span data-ttu-id="5d7ff-139">Каждый узел шифрует свою копию симметричного ключа с помощью открытого ключа из пары ключей, связанных с учетной записью службы Windows.</span><span class="sxs-lookup"><span data-stu-id="5d7ff-139">Each node encrypts its copy of the symmetric key using the public key of a key pair specific to its Windows service account.</span></span> <span data-ttu-id="5d7ff-140">Дополнительные сведения о создании симметричного ключа как при одноэкземплярном, так и при масштабном развертывании см. в разделе [Инициализация сервера отчетов (диспетчер конфигурации служб SSRS)](ssrs-encryption-keys-initialize-a-report-server.md).</span><span class="sxs-lookup"><span data-stu-id="5d7ff-140">To learn more about how the symmetric key is created for both single instance and scale-out deployments, see [Initialize a Report Server &#40;SSRS Configuration Manager&#41;](ssrs-encryption-keys-initialize-a-report-server.md).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="5d7ff-141">При изменении учетной записи службы Windows сервера отчетов асимметричные ключи могут стать недействительными, что нарушит работу сервера.</span><span class="sxs-lookup"><span data-stu-id="5d7ff-141">When you change the Report Server Windows service account, the asymmetric keys can become invalid, which will disrupt server operations.</span></span> <span data-ttu-id="5d7ff-142">Во избежание этой проблемы следует всегда изменять настройки учетной записи службы с помощью программы настройки служб Reporting Services.</span><span class="sxs-lookup"><span data-stu-id="5d7ff-142">To avoid this problem, always use the Reporting Services Configuration tool to modify service account settings.</span></span> <span data-ttu-id="5d7ff-143">При использовании программы настройки ключи обновляются автоматически.</span><span class="sxs-lookup"><span data-stu-id="5d7ff-143">When you use the configuration tool, the keys are updated for you automatically.</span></span> <span data-ttu-id="5d7ff-144">Дополнительные сведения см. в разделе [Настройка учетной записи службы сервера отчетов (диспетчер конфигурации служб SSRS)](configure-the-report-server-service-account-ssrs-configuration-manager.md).</span><span class="sxs-lookup"><span data-stu-id="5d7ff-144">For more information, see [Configure the Report Server Service Account &#40;SSRS Configuration Manager&#41;](configure-the-report-server-service-account-ssrs-configuration-manager.md).</span></span>  
  
## <a name="other-sources-of-confidential-data"></a><span data-ttu-id="5d7ff-145">Другие источники конфиденциальных данных</span><span class="sxs-lookup"><span data-stu-id="5d7ff-145">Other Sources of Confidential Data</span></span>  
 <span data-ttu-id="5d7ff-146">Сервер отчетов сохраняет и другие незашифрованные данные, среди которых могут находиться важные данные, которые желательно защищать от несанкционированного доступа.</span><span class="sxs-lookup"><span data-stu-id="5d7ff-146">A report server stores other data that is not encrypted, yet may contain sensitive information that you want to protect.</span></span> <span data-ttu-id="5d7ff-147">Среди этих данных — моментальные снимки журналов отчетов и снимки состояния выполнения отчетов, содержащие результаты запросов, в которых могут находиться данные, предназначенные исключительно для авторизованных пользователей.</span><span class="sxs-lookup"><span data-stu-id="5d7ff-147">Specifically, report history snapshots and report execution snapshots contain query results that may include data that is intended for authorized users.</span></span> <span data-ttu-id="5d7ff-148">Если используются возможности создания моментальных снимков для отчетов, содержащих конфиденциальные данные, следует учесть, что пользователи, способные открывать таблицы в базе данных сервера отчетов, могут получить доступ к части хранимого отчета, изучая содержимое таблицы.</span><span class="sxs-lookup"><span data-stu-id="5d7ff-148">If you are using snapshot functionality for reports that contain confidential data, be aware that users who can open tables in a report server database may be able to view portions of a stored report by inspecting the contents of the table.</span></span>  
  
> [!NOTE]  
>  [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] <span data-ttu-id="5d7ff-149">не поддерживает кэширование или журналы отчетов для отчетов, использующих параметры с проверкой подлинности пользователя.</span><span class="sxs-lookup"><span data-stu-id="5d7ff-149">does not support caching or report history for reports that use parameters based on the security identify of the user.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="5d7ff-150">См. также:</span><span class="sxs-lookup"><span data-stu-id="5d7ff-150">See Also</span></span>  
 [<span data-ttu-id="5d7ff-151">Настройка ключей шифрования и управление ими (диспетчер конфигурации служб SSRS)</span><span class="sxs-lookup"><span data-stu-id="5d7ff-151">Configure and Manage Encryption Keys &#40;SSRS Configuration Manager&#41;</span></span>](ssrs-encryption-keys-manage-encryption-keys.md)  
  
  
