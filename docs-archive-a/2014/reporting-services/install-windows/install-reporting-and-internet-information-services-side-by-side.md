---
title: Установка Reporting Services и службы IIS параллельно (собственный режим служб SSRS) | Документация Майкрософт
ms.custom: ''
ms.date: 04/27/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: database-engine
ms.topic: conceptual
helpviewer_keywords:
- deploying [Reporting Services], IIS
ms.assetid: 9b651fa5-f582-4f18-a77d-0dde95d9d211
author: maggiesMSFT
ms.author: maggies
manager: kfile
ms.openlocfilehash: c16bb8e5cd8fd040e0048c17183d69bae68268ec
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87728073"
---
# <a name="install-reporting-services-and-internet-information-services-side-by-side-ssrs-native-mode"></a><span data-ttu-id="7731a-102">Параллельная установка служб Reporting Services и служб IIS (собственный режим SSRS)</span><span class="sxs-lookup"><span data-stu-id="7731a-102">Install Reporting Services and Internet Information Services Side-by-Side (SSRS Native Mode)</span></span>
  <span data-ttu-id="7731a-103">Можно установить и запустить [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] службы (SSRS) и службы IIS (IIS) на одном компьютере.</span><span class="sxs-lookup"><span data-stu-id="7731a-103">You can install and run [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] (SSRS) and Internet Information Services (IIS) on the same computer.</span></span> <span data-ttu-id="7731a-104">От используемой версии служб IIS будет зависеть, какие возникнут проблемы совместимости.</span><span class="sxs-lookup"><span data-stu-id="7731a-104">The version of IIS that you are using determines the interoperability issues you must address.</span></span>  
  
||  
|-|  
|[!INCLUDE[applies](../../includes/applies-md.md)]<span data-ttu-id="7731a-105">[!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)]Собственный режим</span><span class="sxs-lookup"><span data-stu-id="7731a-105">[!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] Native mode</span></span>|  
  
|<span data-ttu-id="7731a-106">Версия служб IIS</span><span class="sxs-lookup"><span data-stu-id="7731a-106">IIS version</span></span>|<span data-ttu-id="7731a-107">Проблемы</span><span class="sxs-lookup"><span data-stu-id="7731a-107">Issues</span></span>|<span data-ttu-id="7731a-108">Description</span><span class="sxs-lookup"><span data-stu-id="7731a-108">Description</span></span>|  
|-----------------|------------|-----------------|  
|<span data-ttu-id="7731a-109">IIS 6.0, 7.0, 8.0, 8.5</span><span class="sxs-lookup"><span data-stu-id="7731a-109">IIS 6.0, 7.0, 8.0, 8.5</span></span>|<span data-ttu-id="7731a-110">Запросы, предназначенные для одного приложения, принимаются другим приложением.</span><span class="sxs-lookup"><span data-stu-id="7731a-110">Requests intended for one application are accepted by a different application.</span></span><br /><br /> <span data-ttu-id="7731a-111">Компонент HTTP.SYS предписывает правила приоритета для резервирования URL-адресов.</span><span class="sxs-lookup"><span data-stu-id="7731a-111">HTTP.SYS enforces precedence rules for URL reservations.</span></span> <span data-ttu-id="7731a-112">Запросы, передаваемые в приложения, которые имеют одинаковое имя виртуального каталога и совместно отслеживают запросы, поступающие через порт 80, могут не достичь намеченной цели, если применяемое резервирование URL-адресов слабее резервирования URL-адресов другого приложения.</span><span class="sxs-lookup"><span data-stu-id="7731a-112">Requests that are sent to applications that have the same virtual directory name and that jointly monitor port 80 might not reach the intended target if the URL reservation is weak relative to the URL reservation of another application.</span></span>|<span data-ttu-id="7731a-113">При определенных условиях зарегистрированная конечная точка, URL-адрес которой предшествует URL-адресу другой конечной точки в схеме резервирования URL-адресов, может получать HTTP-запросы, предназначенные для другого приложения.</span><span class="sxs-lookup"><span data-stu-id="7731a-113">Under certain conditions, a registered endpoint that supersedes another URL endpoint in the URL reservation scheme might receive HTTP requests intended for the other application.</span></span><br /><br /> <span data-ttu-id="7731a-114">Использование уникальных имен виртуальных каталогов для веб-службы сервера отчетов и диспетчера отчетов может помочь избежать этого конфликта.</span><span class="sxs-lookup"><span data-stu-id="7731a-114">Using unique virtual directory names for the Report Server Web service and Report Manager helps you avoid this conflict.</span></span><br /><br /> <span data-ttu-id="7731a-115">Подробные сведения об этом сценарии приведены в этом разделе.</span><span class="sxs-lookup"><span data-stu-id="7731a-115">Detailed information about this scenario is provided in this topic.</span></span>|  
  
## <a name="precedence-rules-for-url-reservations"></a><span data-ttu-id="7731a-116">Правила приоритета для резервирования URL-адресов</span><span class="sxs-lookup"><span data-stu-id="7731a-116">Precedence Rules for URL Reservations</span></span>  
 <span data-ttu-id="7731a-117">Прежде чем приступать к устранению проблем совместимости служб IIS и [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)], необходимо понять правила приоритета резервирования URL-адресов.</span><span class="sxs-lookup"><span data-stu-id="7731a-117">Before you can address interoperability issues between IIS and [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)], you must understand URL reservation precedence rules.</span></span> <span data-ttu-id="7731a-118">Правила приоритета можно обобщить следующим образом: резервирование URL-адресов, более явно определяющих значения, становится первым в очереди на получение запросов по соответствующим URL-адресам.</span><span class="sxs-lookup"><span data-stu-id="7731a-118">Precedence rules can be generalized into the following statement: a URL reservation that has more explicitly defined values is first in line to receive requests that match the URL.</span></span>  
  
-   <span data-ttu-id="7731a-119">Резервирование URL-адресов, указывающее виртуальный каталог, является более явным по сравнению с тем, в котором виртуальный каталог не задан.</span><span class="sxs-lookup"><span data-stu-id="7731a-119">A URL reservation that specifies a virtual directory is more explicit than one that omits a virtual directory.</span></span>  
  
-   <span data-ttu-id="7731a-120">Резервирование URL-адресов, в котором указан единственный адрес (в виде IP-адреса, полного доменного имени, сетевого имени компьютера или имени узла), является более явным по сравнению с резервированием, в котором указан шаблон.</span><span class="sxs-lookup"><span data-stu-id="7731a-120">A URL reservation that specifies a single address (by way of an IP address, a fully qualified domain name, a network computer name, or a host name) is more explicit than a wildcard.</span></span>  
  
-   <span data-ttu-id="7731a-121">Резервирование URL-адресов, в котором указан сильный шаблон, является более явным по отношению к резервированию со слабым шаблоном.</span><span class="sxs-lookup"><span data-stu-id="7731a-121">A URL reservation that specifies a strong wildcard is more explicit than a weak wildcard.</span></span>  
  
 <span data-ttu-id="7731a-122">В следующих примерах приведен ряд резервирований URL-адресов, начиная от наиболее явного и заканчивая наименее явным:</span><span class="sxs-lookup"><span data-stu-id="7731a-122">The following examples show a range of URL reservations, ordered from most explicit to least explicit:</span></span>  
  
|<span data-ttu-id="7731a-123">Пример</span><span class="sxs-lookup"><span data-stu-id="7731a-123">Example</span></span>|<span data-ttu-id="7731a-124">Запрос</span><span class="sxs-lookup"><span data-stu-id="7731a-124">Request</span></span>|  
|-------------|-------------|  
|<span data-ttu-id="7731a-125">http: \/ /123.234.345.456:80/отчеты</span><span class="sxs-lookup"><span data-stu-id="7731a-125">http:\//123.234.345.456:80/reports</span></span>|<span data-ttu-id="7731a-126">Получает все запросы, отправленные на http: \/ /123.234.345.456/Reports или http:// \<computername> /Reports, если служба доменных имен может разрешить IP-адрес в это имя узла.</span><span class="sxs-lookup"><span data-stu-id="7731a-126">Receives all requests that are sent to http:\//123.234.345.456/reports or http://\<computername>/reports if a domain name service can resolve the IP address to that host name.</span></span>|  
|http://+:80/reports|<span data-ttu-id="7731a-127">Получает любые запросы, отправленные любому IP-адресу или имени узла, являющимся допустимыми для этого компьютера, при условии, что URL-адрес содержит имя виртуального каталога reports.</span><span class="sxs-lookup"><span data-stu-id="7731a-127">Receives any requests that are sent to any IP address or host name that is valid for that computer as long as the URL contains the "reports" virtual directory name.</span></span>|  
|<span data-ttu-id="7731a-128">http: \/ /123.234.345.456:80</span><span class="sxs-lookup"><span data-stu-id="7731a-128">http:\//123.234.345.456:80</span></span>|<span data-ttu-id="7731a-129">Получает любой запрос, указывающий http: \/ /123.234.345.456 или http://, \<computername> Если служба доменных имен может разрешить IP-адрес в это имя узла.</span><span class="sxs-lookup"><span data-stu-id="7731a-129">Receives any request that specifies http:\//123.234.345.456 or http://\<computername> if a domain name service can resolve the IP address to that host name.</span></span>|  
|http://+:80|<span data-ttu-id="7731a-130">Получает запросы, которые еще не получены другими приложениями, применительно к любым конечным точкам приложений, сопоставленным со значением **Все назначенные**.</span><span class="sxs-lookup"><span data-stu-id="7731a-130">Receives requests that are not already received by other applications, for any application endpoints that are mapped to **All Assigned**.</span></span>|  
|<span data-ttu-id="7731a-131">http://\*:80</span><span class="sxs-lookup"><span data-stu-id="7731a-131">http://\*:80</span></span>|<span data-ttu-id="7731a-132">Получает запросы, которые еще не получены другими приложениями, применительно к любым конечным точкам приложений, сопоставленным со значением **Все неназначенные**.</span><span class="sxs-lookup"><span data-stu-id="7731a-132">Receives requests that are not already received by other applications, for application endpoints that are mapped to **All Unassigned**.</span></span>|  
  
 <span data-ttu-id="7731a-133">Одним из признаков конфликта портов является следующее сообщение об ошибке: "System.IO.FileLoadException. Процесс не может получить доступ к файлу, так как этот файл занят другим процессом.</span><span class="sxs-lookup"><span data-stu-id="7731a-133">One indication of a port conflict is that you will see the following error message: 'System.IO.FileLoadException: The process cannot access the file because it is being used by another process.</span></span> <span data-ttu-id="7731a-134">(Исключение в HRESULT: 0x80070020)".</span><span class="sxs-lookup"><span data-stu-id="7731a-134">(Exception from HRESULT: 0x80070020).'</span></span>  
  
## <a name="url-reservations-for-iis-60-70-80-85-with-sssql14-reporting-services"></a><span data-ttu-id="7731a-135">Резервирования URL-адресов для служб IIS 6.0, 7.0, 8.0 и 8.5 со службами [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] Reporting Services</span><span class="sxs-lookup"><span data-stu-id="7731a-135">URL Reservations for IIS 6.0, 7.0, 8.0, 8.5 with [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] Reporting Services</span></span>  
 <span data-ttu-id="7731a-136">Изучение правил приоритета, приведенных в предыдущем разделе, позволяет разобраться, как резервирования URL-адресов, определенные для служб Reporting Services и IIS, поддерживают совместимость.</span><span class="sxs-lookup"><span data-stu-id="7731a-136">Given the precedence rules outlined in the previous section, you can begin to understand how URL reservations defined for Reporting Services and IIS promote interoperability.</span></span> <span data-ttu-id="7731a-137">Службы Reporting Services получают запросы, в которых явно указаны имена виртуальных каталогов для их приложений; службы IIS получают все остальные запросы, которые могут затем быть направлены приложениям, запущенным в рамках модели процесса IIS.</span><span class="sxs-lookup"><span data-stu-id="7731a-137">Reporting Services receives requests that explicitly specify the virtual directory names for its applications; IIS receives all remaining requests, which can then be directed to applications that run within the IIS process model.</span></span>  
  
|<span data-ttu-id="7731a-138">Развертывание</span><span class="sxs-lookup"><span data-stu-id="7731a-138">Application</span></span>|<span data-ttu-id="7731a-139">Резервирование URL-адресов</span><span class="sxs-lookup"><span data-stu-id="7731a-139">URL reservation</span></span>|<span data-ttu-id="7731a-140">Описание</span><span class="sxs-lookup"><span data-stu-id="7731a-140">Description</span></span>|<span data-ttu-id="7731a-141">Прием запроса</span><span class="sxs-lookup"><span data-stu-id="7731a-141">Request receipt</span></span>|  
|-----------------|---------------------|-----------------|---------------------|  
|<span data-ttu-id="7731a-142">Сервер отчетов</span><span class="sxs-lookup"><span data-stu-id="7731a-142">Report Server</span></span>|http://+:80/ReportServer|<span data-ttu-id="7731a-143">Сильный шаблон для доступа к порту 80, с указанием виртуального каталога сервера отчетов.</span><span class="sxs-lookup"><span data-stu-id="7731a-143">Strong wildcard on port 80, with report server virtual directory.</span></span>|<span data-ttu-id="7731a-144">Получает все запросы на порт 80, в которых указан виртуальный каталог сервера отчетов.</span><span class="sxs-lookup"><span data-stu-id="7731a-144">Receives all requests on port 80 that specify the report server virtual directory.</span></span> <span data-ttu-id="7731a-145">Веб-служба сервера отчетов получает все запросы на http:// \<computername> /reportserver.</span><span class="sxs-lookup"><span data-stu-id="7731a-145">The Report Server Web service receives all requests to http://\<computername>/reportserver.</span></span>|  
|<span data-ttu-id="7731a-146">Диспетчер отчетов</span><span class="sxs-lookup"><span data-stu-id="7731a-146">Report Manager</span></span>|http://+:80/Reports|<span data-ttu-id="7731a-147">Сильный шаблон для доступа к порту 80, с указанием виртуального каталога Reports.</span><span class="sxs-lookup"><span data-stu-id="7731a-147">Strong wildcard on port 80, with Reports virtual directory.</span></span>|<span data-ttu-id="7731a-148">Получает все запросы на порт 80, в которых указан виртуальный каталог reports.</span><span class="sxs-lookup"><span data-stu-id="7731a-148">Receives all requests on port 80 that specify the reports virtual directory.</span></span> <span data-ttu-id="7731a-149">Диспетчер отчетов получает все запросы на http:// \<computername> /Reports.</span><span class="sxs-lookup"><span data-stu-id="7731a-149">Report Manager receives all requests to http://\<computername>/reports.</span></span>|  
|<span data-ttu-id="7731a-150">IIS</span><span class="sxs-lookup"><span data-stu-id="7731a-150">IIS</span></span>|<span data-ttu-id="7731a-151">http://\*:80/</span><span class="sxs-lookup"><span data-stu-id="7731a-151">http://\*:80/</span></span>|<span data-ttu-id="7731a-152">Слабый шаблон для доступа к порту 80.</span><span class="sxs-lookup"><span data-stu-id="7731a-152">Weak wildcard on port 80.</span></span>|<span data-ttu-id="7731a-153">Получает любые оставшиеся запросы на порт 80, которые не получены другим приложением.</span><span class="sxs-lookup"><span data-stu-id="7731a-153">Receives any remaining requests on port 80 that are not received by another application.</span></span>|  
  
## <a name="side-by-side-deployments-of-sscurrent-and-sql-server-2005-reporting-services-on-iis-60-70-80-85"></a><span data-ttu-id="7731a-154">Параллельное развертывание [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] и служб SQL Server 2005 Reporting Services на службы IIS 6.0, 7.0, 8.0, 8.5</span><span class="sxs-lookup"><span data-stu-id="7731a-154">Side-by-Side Deployments of [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] and SQL Server 2005 Reporting Services on IIS 6.0, 7.0, 8.0, 8.5</span></span>  
 <span data-ttu-id="7731a-155">Если веб-сайты IIS имеют имена виртуальных каталогов, идентичные используемым в службах Reporting Services, возникают проблемы функциональной совместимости служб IIS и служб Reporting Services.</span><span class="sxs-lookup"><span data-stu-id="7731a-155">Interoperability issues between IIS and Reporting Services occur when IIS Web sites have virtual directory names that are identical to those used by Reporting Services.</span></span> <span data-ttu-id="7731a-156">Например, предположим, что имеется следующая конфигурация.</span><span class="sxs-lookup"><span data-stu-id="7731a-156">For example, suppose you have the following configuration:</span></span>  
  
-   <span data-ttu-id="7731a-157">Веб-сайт в службах IIS, который назначен на порт 80 и виртуальный каталог с именем Reports.</span><span class="sxs-lookup"><span data-stu-id="7731a-157">A Web site in IIS that is assigned to port 80 and a virtual directory named "Reports".</span></span>  
  
-   <span data-ttu-id="7731a-158">[!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]Экземпляр сервера отчетов, установленный в конфигурации по умолчанию, в котором резервирование URL-адресов также указывает порт 80, а диспетчер отчетов приложение также использует "Reports" для имени виртуального каталога.</span><span class="sxs-lookup"><span data-stu-id="7731a-158">A [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] report server instance installed in the default configuration, where the URL reservation also specifies port 80 and the Report Manager application also uses "Reports" for the virtual directory name.</span></span>  
  
 <span data-ttu-id="7731a-159">С учетом этой конфигурации запрос, отправленный в http:// \<computername> : 80/Reports, будет получен диспетчер отчетов.</span><span class="sxs-lookup"><span data-stu-id="7731a-159">Given this configuration, a request that is sent to http://\<computername>:80/reports will be received by Report Manager.</span></span> <span data-ttu-id="7731a-160">Приложение, доступ к которому предоставляется с помощью виртуального каталога Reports в службах IIS, после установки экземпляра сервера отчетов [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] больше не будет получать запросы.</span><span class="sxs-lookup"><span data-stu-id="7731a-160">The application that is accessed through the Reports virtual directory in IIS will no longer receive requests after [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] report server instance is installed.</span></span>  
  
 <span data-ttu-id="7731a-161">При работе развернутых параллельно старой и новой версии служб [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)], по всей вероятности будут обнаруживаться только что описанные проблемы маршрутизации.</span><span class="sxs-lookup"><span data-stu-id="7731a-161">If you are running side-by-side deployments of older and newer versions of [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)], you are likely to encounter the routing problem just described.</span></span> <span data-ttu-id="7731a-162">Это связано с тем, что во всех версиях служб [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] в качестве имен виртуальных каталогов для приложений сервера отчетов и диспетчера отчетов используется ReportServer и Reports, в результате чего повышается вероятность наличия виртуальных каталогов reports и reportserver в службах IIS.</span><span class="sxs-lookup"><span data-stu-id="7731a-162">This is because all versions of [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] use "ReportServer" and "Reports" as virtual directory names for the report server and Report Manager applications, increasing the likelihood that you will have a "reports" and "reportserver" virtual directories in IIS.</span></span>  
  
 <span data-ttu-id="7731a-163">Чтобы обеспечить получение всеми приложениями направленных к ним запросов, руководствуйтесь следующими рекомендациями.</span><span class="sxs-lookup"><span data-stu-id="7731a-163">To ensure that all applications receive requests, follow these guidelines:</span></span>  
  
-   <span data-ttu-id="7731a-164">Для установок служб Reporting Services используйте имена виртуальных каталогов, которые не используются ни одним веб-сайтом IIS на том же порте, что и в службе Reporting Services.</span><span class="sxs-lookup"><span data-stu-id="7731a-164">For Reporting Services installations, use virtual directory names that are not already used by an IIS Web site on the same port as Reporting Services.</span></span> <span data-ttu-id="7731a-165">Если возникает конфликт, установите службы Reporting Services в режиме «только файлы» (с помощью программы установки, но не настраивая параметры сервера в мастере установки), чтобы иметь возможность настроить виртуальные каталоги после завершения установки.</span><span class="sxs-lookup"><span data-stu-id="7731a-165">If there is a conflict, install Reporting Services in "files-only" mode (using the Install but do not configure the server option in the Installation Wizard) so that you can configure the virtual directories after Setup is finished.</span></span> <span data-ttu-id="7731a-166">Одним из признаков конфликта конфигурации является следующее сообщение об ошибке: "System.IO.FileLoadException. Процесс не может получить доступ к файлу, так как этот файл занят другим процессом.</span><span class="sxs-lookup"><span data-stu-id="7731a-166">One indication that your configuration has a conflict is you will see the error message: System.IO.FileLoadException: The process cannot access the file because it is being used by another process.</span></span> <span data-ttu-id="7731a-167">(Исключение в HRESULT: 0x80070020)".</span><span class="sxs-lookup"><span data-stu-id="7731a-167">(Exception from HRESULT: 0x80070020).</span></span>  
  
-   <span data-ttu-id="7731a-168">Для установок, настраиваемых вручную, применяйте предусмотренные по умолчанию соглашения об именах в настраиваемых URL-адресах.</span><span class="sxs-lookup"><span data-stu-id="7731a-168">For installations that you configure manually, adopt the default naming conventions in the URLs that configure.</span></span> <span data-ttu-id="7731a-169">Если службы [!INCLUDE[ssRSCurrent](../../includes/ssrscurrent-md.md)] устанавливаются в качестве именованного экземпляра, включите имя экземпляра при создании виртуального каталога.</span><span class="sxs-lookup"><span data-stu-id="7731a-169">If you install [!INCLUDE[ssRSCurrent](../../includes/ssrscurrent-md.md)] as a named instance, include the instance name when creating a virtual directory.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="7731a-170">См. также:</span><span class="sxs-lookup"><span data-stu-id="7731a-170">See Also</span></span>  
 <span data-ttu-id="7731a-171">[Настройка URL-адресов сервера отчетов (диспетчер конфигурации служб SSRS)](configure-report-server-urls-ssrs-configuration-manager.md) </span><span class="sxs-lookup"><span data-stu-id="7731a-171">[Configure Report Server URLs  &#40;SSRS Configuration Manager&#41;](configure-report-server-urls-ssrs-configuration-manager.md) </span></span>  
 <span data-ttu-id="7731a-172">[Настройка URL-адреса &#40;SSRS Configuration Manager&#41;](configure-a-url-ssrs-configuration-manager.md) </span><span class="sxs-lookup"><span data-stu-id="7731a-172">[Configure a URL  &#40;SSRS Configuration Manager&#41;](configure-a-url-ssrs-configuration-manager.md) </span></span>  
 [<span data-ttu-id="7731a-173">Установка сервера отчетов служб Reporting Services в собственном режиме</span><span class="sxs-lookup"><span data-stu-id="7731a-173">Install Reporting Services Native Mode Report Server</span></span>](install-reporting-services-native-mode-report-server.md)  
  
  
