---
title: Развертывание пользовательской сборки | Документы Майкрософт
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: reporting-services
ms.topic: reference
helpviewer_keywords:
- deploying custom assemblies [Reporting Services]
- custom assemblies [Reporting Services], deploying
- custom assemblies [Reporting Services], updating
- updating custom assemblies
ms.assetid: c6674cd8-0de7-4a5a-9e7c-12ffa49f6fd2
author: maggiesMSFT
ms.author: maggies
manager: kfile
ms.openlocfilehash: 3d88e1db844304b5cbb51f4af52b4715ef7e8c1e
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87750536"
---
# <a name="deploying-a-custom-assembly"></a><span data-ttu-id="d4890-102">Развертывание пользовательской сборки</span><span class="sxs-lookup"><span data-stu-id="d4890-102">Deploying a Custom Assembly</span></span>
  <span data-ttu-id="d4890-103">Чтобы развернуть пользовательскую сборку в [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] , поместите сборку в папки приложений как на конструктор отчетов, так и на сервере отчетов.</span><span class="sxs-lookup"><span data-stu-id="d4890-103">To deploy a custom assembly in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)], place the assembly in the application folders of both Report Designer and the report server.</span></span> <span data-ttu-id="d4890-104">По умолчанию пользовательским сборкам в службах [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] предоставляется разрешение `Execution`.</span><span class="sxs-lookup"><span data-stu-id="d4890-104">By default, custom assemblies are granted `Execution` permission in [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)].</span></span> <span data-ttu-id="d4890-105">Чтобы предоставить пользовательским сборкам права доступа, кроме разрешения на выполнение, необходимо изменить файл конфигурации rssrvpolicy.config для сервера отчетов и файл конфигурации rspreviewpolicy.config для окна предварительного просмотра конструктора отчетов.</span><span class="sxs-lookup"><span data-stu-id="d4890-105">To grant custom assemblies privileges beyond Execute permission, you will need to edit the rssrvpolicy.config configuration file for the report server and the rspreviewpolicy.config configuration file for the Report Designer preview window.</span></span> <span data-ttu-id="d4890-106">Также можно установить пользовательскую сборку в глобальный кэш сборок.</span><span class="sxs-lookup"><span data-stu-id="d4890-106">Alternatively, you can install your custom assembly in the global assembly cache (GAC).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="d4890-107">Конструктор отчетов предусматривает два режима предварительного просмотра: на вкладке предварительного просмотра и во всплывающем окне предварительного просмотра, которое вызывается при запуске проекта отчета в режиме `DebugLocal`.</span><span class="sxs-lookup"><span data-stu-id="d4890-107">There are two preview modes for Report Designer: the Preview tab and the pop-up preview window that is launched when your report project is started in `DebugLocal` mode.</span></span> <span data-ttu-id="d4890-108">На вкладке предварительного просмотра все выражения отчета выполняются с помощью набора разрешений `FullTrust` и не применяются параметры политики безопасности.</span><span class="sxs-lookup"><span data-stu-id="d4890-108">The Preview tab executes all report expressions using the `FullTrust` permission set and does not apply security policy settings.</span></span> <span data-ttu-id="d4890-109">Всплывающее окно предварительного просмотра предназначено для имитации функциональных возможностей сервера отчетов и поэтому имеет файл конфигурации политики, который необходимо изменить (возможно, при участии администратора), чтобы использовать пользовательские сборки в конструкторе отчетов.</span><span class="sxs-lookup"><span data-stu-id="d4890-109">The pop-up preview window is meant to simulate the report server functionality and therefore has a policy configuration file that you or an administrator must modify to use custom assemblies in Report Designer.</span></span> <span data-ttu-id="d4890-110">Это всплывающее окно предварительного просмотра также блокирует пользовательскую сборку.</span><span class="sxs-lookup"><span data-stu-id="d4890-110">This pop-up preview also locks the custom assembly.</span></span> <span data-ttu-id="d4890-111">Поэтому для изменения или обновления кода пользовательской сборки необходимо закрыть окно предварительного просмотра.</span><span class="sxs-lookup"><span data-stu-id="d4890-111">Therefore, you need to close the preview window in order to modify or update your custom assembly code.</span></span>  
  
###### <a name="to-deploy-a-custom-assembly-in-reporting-services"></a><span data-ttu-id="d4890-112">Развертывание пользовательской сборки в службах Reporting Services</span><span class="sxs-lookup"><span data-stu-id="d4890-112">To deploy a custom assembly in Reporting Services</span></span>  
  
1.  <span data-ttu-id="d4890-113">Скопируйте пользовательскую сборку из каталога построения в папку bin на сервере отчетов или в папку конструктора отчетов.</span><span class="sxs-lookup"><span data-stu-id="d4890-113">Copy your custom assembly from your build location to the report server bin folder or the Report Designer folder.</span></span> <span data-ttu-id="d4890-114">По умолчанию папка bin для сервера отчетов находится в %ProgramFiles%\Microsoft SQL Server\MSRS10_50.MSSQLSERVER\Reporting Services\ReportServer\bin.</span><span class="sxs-lookup"><span data-stu-id="d4890-114">The default location of the bin folder for the report server is %ProgramFiles%\Microsoft SQL Server\MSRS10_50.MSSQLSERVER\Reporting Services\ReportServer\bin.</span></span> <span data-ttu-id="d4890-115">Конструктор отчетов по умолчанию находится в папке %ProgramFiles%\Microsoft Visual Studio 9.0\Common7\IDE\PrivateAssemblies.</span><span class="sxs-lookup"><span data-stu-id="d4890-115">The default location of the Report Designer is %ProgramFiles%\Microsoft Visual Studio 9.0\Common7\IDE\PrivateAssemblies.</span></span>  
  
     <span data-ttu-id="d4890-116">Размещение пользовательской сборки в папке bin сервера отчетов позволяет опубликовывать отчеты, которые ссылаются на пользовательскую сборку, а размещение пользовательской сборки в папке конструктора отчетов позволяет запускать и выполнять отладку отчетов, которые ссылаются на пользовательскую сборку в конструкторе отчетов.</span><span class="sxs-lookup"><span data-stu-id="d4890-116">Placing your custom assembly in the report server bin folder enables you to publish reports that reference your custom assembly, and placing it in the Report Designer folder enables you to run and debug reports that reference your custom assembly in Report Designer.</span></span>  
  
     <span data-ttu-id="d4890-117">Чтобы предоставить коду пользовательской сборки разрешения кроме разрешения Execute по умолчанию, выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="d4890-117">If you need to grant your custom assembly code permissions beyond the default execute permissions:</span></span>  
  
2.  <span data-ttu-id="d4890-118">Откройте соответствующий файл конфигурации.</span><span class="sxs-lookup"><span data-stu-id="d4890-118">Open the appropriate configuration file.</span></span> <span data-ttu-id="d4890-119">Файл rssrvpolicy.config по умолчанию находится в папке %ProgramFiles%\Microsoft SQL Server\MSRS10_50.MSSQLSERVER\Reporting Services\ReportServer.</span><span class="sxs-lookup"><span data-stu-id="d4890-119">The default location of rssrvpolicy.config is %ProgramFiles%\Microsoft SQL Server\MSRS10_50.MSSQLSERVER\Reporting Services\ReportServer.</span></span> <span data-ttu-id="d4890-120">Файл rspreviewpolicy.config по умолчанию находится в папке %ProgramFiles%\Microsoft Visual Studio 9.0\Common7\IDE\PrivateAssemblies.</span><span class="sxs-lookup"><span data-stu-id="d4890-120">The default location of rspreviewpolicy.config is %ProgramFiles%\Microsoft Visual Studio 9.0\Common7\IDE\PrivateAssemblies.</span></span>  
  
3.  <span data-ttu-id="d4890-121">Добавьте группу кода для пользовательской сборки.</span><span class="sxs-lookup"><span data-stu-id="d4890-121">Add a code group for your custom assembly.</span></span> <span data-ttu-id="d4890-122">Дополнительные сведения см. в разделе [Безопасная разработка (службы Reporting Services)](../extensions/secure-development/secure-development-reporting-services.md).</span><span class="sxs-lookup"><span data-stu-id="d4890-122">For more information, see [Secure Development &#40;Reporting Services&#41;](../extensions/secure-development/secure-development-reporting-services.md).</span></span>  
  
## <a name="updating-custom-assemblies"></a><span data-ttu-id="d4890-123">Обновление пользовательских сборок</span><span class="sxs-lookup"><span data-stu-id="d4890-123">Updating Custom Assemblies</span></span>  
 <span data-ttu-id="d4890-124">На некотором этапе может понадобиться обновить версию пользовательской сборки, на которую существуют ссылки в нескольких опубликованных отчетах.</span><span class="sxs-lookup"><span data-stu-id="d4890-124">At some point, you may need to update a version of a custom assembly that is currently being referenced by several published reports.</span></span> <span data-ttu-id="d4890-125">Если эта сборка уже существует в каталоге bin сервера отчетов или конструктора отчетов и номер версии сборки увеличивается или изменяется иным образом, уже опубликованные отчеты перестанут правильно работать.</span><span class="sxs-lookup"><span data-stu-id="d4890-125">If that assembly already exists in the bin directory of the report server or Report Designer and the version number of the assembly is incremented or changed in some way, the currently published reports will no longer work properly.</span></span> <span data-ttu-id="d4890-126">Будет необходимо обновить версию сборки, на которую ссылается элемент `CodeModules` определения отчета, и повторно опубликовать отчеты.</span><span class="sxs-lookup"><span data-stu-id="d4890-126">You will need to update the version of the assembly that is referenced in the `CodeModules` element of the report definition and republish the reports.</span></span> <span data-ttu-id="d4890-127">Если известно, что пользовательская сборка будет часто обновляться, а отчетам, опубликованным в настоящий момент, необходимо ссылаться на новую сборку, рекомендуется использовать одинаковые номера версий для всех обновлений данной сборки.</span><span class="sxs-lookup"><span data-stu-id="d4890-127">If you know that you will frequently update a custom assembly and your currently published reports need to reference the new assembly, you may want to consider using the same version number across all updates of a particular assembly.</span></span>  
  
 <span data-ttu-id="d4890-128">Если не нужно ссылаться на новую версию сборки в опубликованных отчетах, можно развернуть пользовательскую сборку в глобальном кэше сборок.</span><span class="sxs-lookup"><span data-stu-id="d4890-128">If you do not need your currently published reports to reference the new version of the assembly, you can deploy your custom assembly to the global assembly cache.</span></span> <span data-ttu-id="d4890-129">Глобальный кэш сборок может хранить несколько версий одной сборки, поэтому текущие отчеты могут ссылаться на предыдущую версию сборки, а вновь публикуемые отчеты — на обновленную сборку.</span><span class="sxs-lookup"><span data-stu-id="d4890-129">The global assembly cache can maintain multiple versions of the same assembly, so that your current reports can reference the previous version of your assembly and your newly published reports can reference the updated assembly.</span></span> <span data-ttu-id="d4890-130">Другим способом является задание перенаправления привязки сервера отчетов, чтобы вызвать принудительное перенаправление всех запросов старой сборки на новую сборку.</span><span class="sxs-lookup"><span data-stu-id="d4890-130">Yet another approach would be to set the binding redirect of the report server to force a redirect of all requests for the old assembly to the new assembly.</span></span> <span data-ttu-id="d4890-131">Для этого необходимо изменить файлы сервера отчета Web.config и ReportService.exe.config.</span><span class="sxs-lookup"><span data-stu-id="d4890-131">You would need to modify the report server Web.config file and the report server ReportService.exe.config file.</span></span> <span data-ttu-id="d4890-132">Запись файла конфигурации может иметь следующий вид:</span><span class="sxs-lookup"><span data-stu-id="d4890-132">The entry might look like the following:</span></span>  
  
```  
<configuration>  
   <runtime>  
      <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">  
         <dependentAssembly>  
            <assemblyIdentity name="myAssembly"  
                              publicKeyToken="32ab4ba45e0a69a1"  
                              culture="neutral" />  
            <bindingRedirect oldVersion="1.0.0.0"  
                             newVersion="2.0.0.0"/>  
         </dependentAssembly>  
      </assemblyBinding>  
   </runtime>  
</configuration>  
```  
  
## <a name="see-also"></a><span data-ttu-id="d4890-133">См. также:</span><span class="sxs-lookup"><span data-stu-id="d4890-133">See Also</span></span>  
 <span data-ttu-id="d4890-134">[Использование пользовательских сборок с отчетами](using-custom-assemblies-with-reports.md) </span><span class="sxs-lookup"><span data-stu-id="d4890-134">[Using Custom Assemblies with Reports](using-custom-assemblies-with-reports.md) </span></span>  
 [<span data-ttu-id="d4890-135">Работа со сборками и глобальным кэшем сборок</span><span class="sxs-lookup"><span data-stu-id="d4890-135">Working with Assemblies and the Global Assembly Cache</span></span>](https://go.microsoft.com/fwlink/?LinkId=63912)  
  
  
