---
title: Использование внешнего источника данных подписчика (управляемая данными подписка) | Документы Майкрософт
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: reporting-services-native
ms.topic: conceptual
helpviewer_keywords:
- subscriber data sources [Reporting Services]
- subscriptions [Reporting Services], external data sources
- query-based subscriptions [Reporting Services]
- external data sources [Reporting Services]
- data-driven subscriptions
- data sources [Reporting Services], subscriptions
ms.assetid: 1cade8ec-729c-4df8-a428-e75c9ad86369
author: maggiesMSFT
ms.author: maggies
manager: kfile
ms.openlocfilehash: e23da709289ffb6ca345bb6211f40388877a1a87
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87739083"
---
# <a name="use-an-external-data-source-for-subscriber-data-data-driven-subscription"></a><span data-ttu-id="06048-102">Использование внешнего источника данных подписчика (управляемая данными подписка)</span><span class="sxs-lookup"><span data-stu-id="06048-102">Use an External Data Source for Subscriber Data (Data-Driven Subscription)</span></span>
  <span data-ttu-id="06048-103">В управляемой данными подписке динамические данные подписки определяются запросом или командой, которые получают данные из внешнего источника данных.</span><span class="sxs-lookup"><span data-stu-id="06048-103">In a data-driven subscription, dynamic subscription data is provided by a query or command that retrieves data from an external data source.</span></span> <span data-ttu-id="06048-104">Данные подписки могут быть получены из любого поддерживаемого источника данных, который удовлетворяет требованиям обработки управляемой данными подписки.</span><span class="sxs-lookup"><span data-stu-id="06048-104">Subscription data can be retrieved from any supported data source that meets the requirements for data-driven subscription processing.</span></span> <span data-ttu-id="06048-105">Запрос или синтаксис команды должны быть верными для модуля обработки данных, установленного на сервере отчетов.</span><span class="sxs-lookup"><span data-stu-id="06048-105">The query or command syntax must be valid for a data processing extension installed with your report server.</span></span>  
  
## <a name="data-processing-requirements"></a><span data-ttu-id="06048-106">Требования к обработке данных</span><span class="sxs-lookup"><span data-stu-id="06048-106">Data Processing Requirements</span></span>  
 [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] <span data-ttu-id="06048-107">используют модули обработки данных для получения данных подписки.</span><span class="sxs-lookup"><span data-stu-id="06048-107">uses data processing extensions to retrieve subscription data.</span></span> <span data-ttu-id="06048-108">Рекомендуется использовать следующие типы источников данных:</span><span class="sxs-lookup"><span data-stu-id="06048-108">Recommended data source types include the following:</span></span>  
  
-   [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="06048-109">;</span><span class="sxs-lookup"><span data-stu-id="06048-109">relational databases</span></span>  
  
-   <span data-ttu-id="06048-110">базы данных Oracle;</span><span class="sxs-lookup"><span data-stu-id="06048-110">Oracle databases</span></span>  
  
-   [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] <span data-ttu-id="06048-111">;</span><span class="sxs-lookup"><span data-stu-id="06048-111">multidimensional and data mining data sources</span></span>  
  
-   <span data-ttu-id="06048-112">источники XML-данных.</span><span class="sxs-lookup"><span data-stu-id="06048-112">XML data sources</span></span>  
  
     <span data-ttu-id="06048-113">При использовании модуля обработки XML-данных для данных подписчика, убедитесь, что в подписке увеличено значение времени ожидания запроса.</span><span class="sxs-lookup"><span data-stu-id="06048-113">When using the XML data processing extension for subscriber data, be sure to increase the query timeout settings in the subscription.</span></span> <span data-ttu-id="06048-114">Модуль обработки XML-данных для значений времени ожидания запроса использует миллисекунды, а не секунды.</span><span class="sxs-lookup"><span data-stu-id="06048-114">The XML data processing extension uses milliseconds rather than seconds for query timeout values.</span></span> <span data-ttu-id="06048-115">Если время ожидания не будет увеличено, то подписка может быть не завершена из-за недостаточного времени обработки.</span><span class="sxs-lookup"><span data-stu-id="06048-115">If you do not increase the timeout value, the subscription might fail due to insufficient processing time.</span></span>  
  
     <span data-ttu-id="06048-116">Избегайте использовать параметр **Учетные данные не требуются** при настройке соединения с источником данных подписчика.</span><span class="sxs-lookup"><span data-stu-id="06048-116">Avoid using the **Credentials are not required** option when configuring the connection to the subscriber data source.</span></span> <span data-ttu-id="06048-117">Параметр «Сохраненные учетные данные» рекомендуется применять при использовании модуля обработки XML-данных для получения данных подписки во время выполнения.</span><span class="sxs-lookup"><span data-stu-id="06048-117">Stored credentials are recommended when using the XML data processing extension to retrieve subscription data at run time.</span></span>  
  
 <span data-ttu-id="06048-118">Можно использовать другие поддерживаемые типы источников данных, но не все из них будут гарантированно работать.</span><span class="sxs-lookup"><span data-stu-id="06048-118">You might be able to use other supported data source types, but not all of them are guaranteed to work.</span></span> <span data-ttu-id="06048-119">Например, следующие типы источников данных нельзя использовать для данных подписчика:</span><span class="sxs-lookup"><span data-stu-id="06048-119">For example, the following data source types cannot be used for subscriber data:</span></span>  
  
-   <span data-ttu-id="06048-120">базы данных SAP Netweaver BI;</span><span class="sxs-lookup"><span data-stu-id="06048-120">SAP Netweaver BI databases</span></span>  
  
-   <span data-ttu-id="06048-121">модели отчетов.</span><span class="sxs-lookup"><span data-stu-id="06048-121">report models</span></span>  
  
 <span data-ttu-id="06048-122">Пользовательский модуль обработки данных, который можно использовать в управляемых данными подписках, должен реализовывать интерфейсы <xref:Microsoft.ReportingServices.DataProcessing.IDbCommand> и <xref:Microsoft.ReportingServices.DataProcessing.IDataReader> .</span><span class="sxs-lookup"><span data-stu-id="06048-122">If you have a custom data processing extension that you want to use in data-driven subscriptions, it must implement the <xref:Microsoft.ReportingServices.DataProcessing.IDbCommand> and the <xref:Microsoft.ReportingServices.DataProcessing.IDataReader> interfaces.</span></span> <span data-ttu-id="06048-123">Модуль обработки данных должен поддерживать выполнение запроса только со схемой.</span><span class="sxs-lookup"><span data-stu-id="06048-123">The data processing extension must support a schema-only query execution.</span></span> <span data-ttu-id="06048-124">Этот запрос используется для получения метаданных во время проектирования, чтобы пользователи могли сопоставлять столбцы в параметрах доставки и параметры отчета в определении подписки.</span><span class="sxs-lookup"><span data-stu-id="06048-124">This query is used to retrieve column metadata at design-time so that users can map columns to delivery options and report parameters in the subscription definition.</span></span> <span data-ttu-id="06048-125">Выполнение запроса только со схемой происходит на раннем этапе определения подписки пользователем.</span><span class="sxs-lookup"><span data-stu-id="06048-125">Schema-only query execution occurs at an early stage when the user is defining the subscription.</span></span>  
  
## <a name="query-requirements"></a><span data-ttu-id="06048-126">Требования к запросам</span><span class="sxs-lookup"><span data-stu-id="06048-126">Query Requirements</span></span>  
 <span data-ttu-id="06048-127">При создании запроса, получающем данные подписки, учтите следующее:</span><span class="sxs-lookup"><span data-stu-id="06048-127">When creating query that retrieves subscription data, keep the following points in mind:</span></span>  
  
-   <span data-ttu-id="06048-128">Для подписки может быть создан только один запрос.</span><span class="sxs-lookup"><span data-stu-id="06048-128">You can only create one query for the subscription.</span></span>  
  
-   <span data-ttu-id="06048-129">Запрос должен возвращать все значения, которые необходимо использовать для параметров доставки и указания параметров отчета.</span><span class="sxs-lookup"><span data-stu-id="06048-129">The query must return all of the values that you want to use for delivery options and for specifying report parameters.</span></span>  
  
-   <span data-ttu-id="06048-130">Сервер отчетов создаст доставку отчетов для каждой строки в результирующем наборе.</span><span class="sxs-lookup"><span data-stu-id="06048-130">The report server will create a report delivery for every row in the result set.</span></span> <span data-ttu-id="06048-131">Если результирующий набор содержит триста строк, то сервер отчетов попытается доставить триста отчетов.</span><span class="sxs-lookup"><span data-stu-id="06048-131">If the result set consists of three hundred rows, the report server will attempt to deliver three hundred reports.</span></span>  
  
## <a name="setting-delivery-options-using-variable-data-from-a-subscriber-database"></a><span data-ttu-id="06048-132">Настройка параметров доставки с помощью изменяющихся данных из базы данных подписчика</span><span class="sxs-lookup"><span data-stu-id="06048-132">Setting Delivery Options Using Variable Data from a Subscriber Database</span></span>  
 <span data-ttu-id="06048-133">Чтобы настроить параметры доставки для каждого получателя, можно использовать данные из базы данных подписчика.</span><span class="sxs-lookup"><span data-stu-id="06048-133">You can use data in the subscriber database to customize delivery options for each recipient.</span></span> <span data-ttu-id="06048-134">От типа используемого модуля доставки зависят доступные параметры.</span><span class="sxs-lookup"><span data-stu-id="06048-134">The kind of delivery extension you are using determines which options are available.</span></span> <span data-ttu-id="06048-135">Если используется модуль сервера отчетов для доставки по электронной почте, то запрос должен содержать псевдоним электронной почты для каждого подписчика.</span><span class="sxs-lookup"><span data-stu-id="06048-135">If you are using the report server e-mail delivery extension, the query should contain an e-mail alias for each subscriber.</span></span> <span data-ttu-id="06048-136">Если используется доставка в общую папку, данные подписчика должны содержать значения, которые могут быть использованы для создания файлов отчетов конкретного подписчика или для предоставления сведений о назначении доставки.</span><span class="sxs-lookup"><span data-stu-id="06048-136">If you are using file share delivery, the subscriber data should include values that can be used to create subscriber-specific report files or to provide a destination for the delivery.</span></span> <span data-ttu-id="06048-137">Дополнительные сведения см. в разделе [Доставка в общую папку в Reporting Services](file-share-delivery-in-reporting-services.md) и [Доставка электронной почты в Reporting Services](e-mail-delivery-in-reporting-services.md).</span><span class="sxs-lookup"><span data-stu-id="06048-137">For more information, see [File Share Delivery in Reporting Services](file-share-delivery-in-reporting-services.md) and [E-Mail Delivery in Reporting Services](e-mail-delivery-in-reporting-services.md).</span></span>  
  
## <a name="passing-parameter-values-from-the-subscriber-database-to-the-report"></a><span data-ttu-id="06048-138">Передача значений параметров из базы данных подписчика в отчет</span><span class="sxs-lookup"><span data-stu-id="06048-138">Passing Parameter Values from the Subscriber Database to the Report</span></span>  
 <span data-ttu-id="06048-139">При создании управляемой данными подписки для параметризованного отчета, можно использовать значения переменных параметров для настройки выхода каждого отчета.</span><span class="sxs-lookup"><span data-stu-id="06048-139">If you are creating a data-driven subscription for a parameterized report, you can use variable parameter values to customize the output of each report.</span></span> <span data-ttu-id="06048-140">Например, база данных подписчика может содержать идентификационные номера служащих, даты принятия на работу, названия должностей, а также сведения о расположении офиса, которые могут использоваться для применения фильтра к данным отчета.</span><span class="sxs-lookup"><span data-stu-id="06048-140">For example, the subscriber database might contain employee identification numbers, hire dates, job titles, and office location information that can be used to filter report data.</span></span> <span data-ttu-id="06048-141">Если отчет принимает параметры, основанные на тех или иных доступных данных столбца, можно сопоставить параметр с соответствующим столбцом.</span><span class="sxs-lookup"><span data-stu-id="06048-141">If the report accepts parameters that are based on these or other available column data, you can map the parameter to the appropriate column.</span></span>  
  
 <span data-ttu-id="06048-142">При сопоставлении полей подписчика и параметров отчета убедитесь в том, что типы данных и длины столбцов совместимы между собой.</span><span class="sxs-lookup"><span data-stu-id="06048-142">When mapping subscriber fields to report parameters, make sure that the data types and column lengths are compatible.</span></span> <span data-ttu-id="06048-143">При несоответствии типов данных во время обработки подписки возникнет ошибка.</span><span class="sxs-lookup"><span data-stu-id="06048-143">If there is a data type mismatch, an error will occur during subscription processing.</span></span> <span data-ttu-id="06048-144">Дополнительные сведения об использовании данных подписчика в параметризованном отчете см. в разделе [Создание управляемой данными подписки (учебник по службам SSRS)](../create-a-data-driven-subscription-ssrs-tutorial.md).</span><span class="sxs-lookup"><span data-stu-id="06048-144">To learn more about using subscriber data in a parameterized report, see [Create a Data-Driven Subscription &#40;SSRS Tutorial&#41;](../create-a-data-driven-subscription-ssrs-tutorial.md).</span></span>  
  
## <a name="modifying-the-subscriber-data-source"></a><span data-ttu-id="06048-145">Изменение источника данных подписчика</span><span class="sxs-lookup"><span data-stu-id="06048-145">Modifying the Subscriber Data Source</span></span>  
 <span data-ttu-id="06048-146">Предотвратить выполнение подписок могут следующие изменения источника данных подписчика:</span><span class="sxs-lookup"><span data-stu-id="06048-146">The following modifications to the subscriber data source can prevent the subscription from running:</span></span>  
  
-   <span data-ttu-id="06048-147">Удаление столбцов, на которые имеются ссылки в подписке.</span><span class="sxs-lookup"><span data-stu-id="06048-147">Removing columns that are referenced in the subscription.</span></span>  
  
-   <span data-ttu-id="06048-148">Изменение структуры таблицы источника данных.</span><span class="sxs-lookup"><span data-stu-id="06048-148">Modifying the table structure of the data source.</span></span>  
  
-   <span data-ttu-id="06048-149">Изменение типа данных и других свойств столбца.</span><span class="sxs-lookup"><span data-stu-id="06048-149">Changing data type and other column properties.</span></span>  
  
 <span data-ttu-id="06048-150">При проведении любых из этих изменений необходимо обновить подписку.</span><span class="sxs-lookup"><span data-stu-id="06048-150">If you make any of these changes, you must update the subscription.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="06048-151">См. также:</span><span class="sxs-lookup"><span data-stu-id="06048-151">See Also</span></span>  
 <span data-ttu-id="06048-152">[Создание, изменение и удаление управляемой данными подписки](data-driven-subscriptions.md) </span><span class="sxs-lookup"><span data-stu-id="06048-152">[Create, Modify, and Delete a Data-Driven Subscription](data-driven-subscriptions.md) </span></span>  
 <span data-ttu-id="06048-153">[Data-Driven Subscriptions](data-driven-subscriptions.md) </span><span class="sxs-lookup"><span data-stu-id="06048-153">[Data-Driven Subscriptions](data-driven-subscriptions.md) </span></span>  
 [<span data-ttu-id="06048-154">Подписки и доставка (службы Reporting Services)</span><span class="sxs-lookup"><span data-stu-id="06048-154">Subscriptions and Delivery &#40;Reporting Services&#41;</span></span>](subscriptions-and-delivery-reporting-services.md)  
  
  
