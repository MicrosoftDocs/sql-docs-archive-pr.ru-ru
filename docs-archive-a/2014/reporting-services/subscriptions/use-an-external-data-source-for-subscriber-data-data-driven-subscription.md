---
title: Использование внешнего источника данных подписчика (управляемая данными подписка) | Документы Майкрософт
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: reporting-services-native
ms.topic: conceptual
helpviewer_keywords:
- subscriber data sources [Reporting Services]
- subscriptions [Reporting Services], external data sources
- query-based subscriptions [Reporting Services]
- external data sources [Reporting Services]
- data-driven subscriptions
- data sources [Reporting Services], subscriptions
ms.assetid: 1cade8ec-729c-4df8-a428-e75c9ad86369
author: maggiesMSFT
ms.author: maggies
manager: kfile
ms.openlocfilehash: e23da709289ffb6ca345bb6211f40388877a1a87
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87739083"
---
# <a name="use-an-external-data-source-for-subscriber-data-data-driven-subscription"></a>Использование внешнего источника данных подписчика (управляемая данными подписка)
  В управляемой данными подписке динамические данные подписки определяются запросом или командой, которые получают данные из внешнего источника данных. Данные подписки могут быть получены из любого поддерживаемого источника данных, который удовлетворяет требованиям обработки управляемой данными подписки. Запрос или синтаксис команды должны быть верными для модуля обработки данных, установленного на сервере отчетов.  
  
## <a name="data-processing-requirements"></a>Требования к обработке данных  
 [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] используют модули обработки данных для получения данных подписки. Рекомендуется использовать следующие типы источников данных:  
  
-   [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ;  
  
-   базы данных Oracle;  
  
-   [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] ;  
  
-   источники XML-данных.  
  
     При использовании модуля обработки XML-данных для данных подписчика, убедитесь, что в подписке увеличено значение времени ожидания запроса. Модуль обработки XML-данных для значений времени ожидания запроса использует миллисекунды, а не секунды. Если время ожидания не будет увеличено, то подписка может быть не завершена из-за недостаточного времени обработки.  
  
     Избегайте использовать параметр **Учетные данные не требуются** при настройке соединения с источником данных подписчика. Параметр «Сохраненные учетные данные» рекомендуется применять при использовании модуля обработки XML-данных для получения данных подписки во время выполнения.  
  
 Можно использовать другие поддерживаемые типы источников данных, но не все из них будут гарантированно работать. Например, следующие типы источников данных нельзя использовать для данных подписчика:  
  
-   базы данных SAP Netweaver BI;  
  
-   модели отчетов.  
  
 Пользовательский модуль обработки данных, который можно использовать в управляемых данными подписках, должен реализовывать интерфейсы <xref:Microsoft.ReportingServices.DataProcessing.IDbCommand> и <xref:Microsoft.ReportingServices.DataProcessing.IDataReader> . Модуль обработки данных должен поддерживать выполнение запроса только со схемой. Этот запрос используется для получения метаданных во время проектирования, чтобы пользователи могли сопоставлять столбцы в параметрах доставки и параметры отчета в определении подписки. Выполнение запроса только со схемой происходит на раннем этапе определения подписки пользователем.  
  
## <a name="query-requirements"></a>Требования к запросам  
 При создании запроса, получающем данные подписки, учтите следующее:  
  
-   Для подписки может быть создан только один запрос.  
  
-   Запрос должен возвращать все значения, которые необходимо использовать для параметров доставки и указания параметров отчета.  
  
-   Сервер отчетов создаст доставку отчетов для каждой строки в результирующем наборе. Если результирующий набор содержит триста строк, то сервер отчетов попытается доставить триста отчетов.  
  
## <a name="setting-delivery-options-using-variable-data-from-a-subscriber-database"></a>Настройка параметров доставки с помощью изменяющихся данных из базы данных подписчика  
 Чтобы настроить параметры доставки для каждого получателя, можно использовать данные из базы данных подписчика. От типа используемого модуля доставки зависят доступные параметры. Если используется модуль сервера отчетов для доставки по электронной почте, то запрос должен содержать псевдоним электронной почты для каждого подписчика. Если используется доставка в общую папку, данные подписчика должны содержать значения, которые могут быть использованы для создания файлов отчетов конкретного подписчика или для предоставления сведений о назначении доставки. Дополнительные сведения см. в разделе [Доставка в общую папку в Reporting Services](file-share-delivery-in-reporting-services.md) и [Доставка электронной почты в Reporting Services](e-mail-delivery-in-reporting-services.md).  
  
## <a name="passing-parameter-values-from-the-subscriber-database-to-the-report"></a>Передача значений параметров из базы данных подписчика в отчет  
 При создании управляемой данными подписки для параметризованного отчета, можно использовать значения переменных параметров для настройки выхода каждого отчета. Например, база данных подписчика может содержать идентификационные номера служащих, даты принятия на работу, названия должностей, а также сведения о расположении офиса, которые могут использоваться для применения фильтра к данным отчета. Если отчет принимает параметры, основанные на тех или иных доступных данных столбца, можно сопоставить параметр с соответствующим столбцом.  
  
 При сопоставлении полей подписчика и параметров отчета убедитесь в том, что типы данных и длины столбцов совместимы между собой. При несоответствии типов данных во время обработки подписки возникнет ошибка. Дополнительные сведения об использовании данных подписчика в параметризованном отчете см. в разделе [Создание управляемой данными подписки (учебник по службам SSRS)](../create-a-data-driven-subscription-ssrs-tutorial.md).  
  
## <a name="modifying-the-subscriber-data-source"></a>Изменение источника данных подписчика  
 Предотвратить выполнение подписок могут следующие изменения источника данных подписчика:  
  
-   Удаление столбцов, на которые имеются ссылки в подписке.  
  
-   Изменение структуры таблицы источника данных.  
  
-   Изменение типа данных и других свойств столбца.  
  
 При проведении любых из этих изменений необходимо обновить подписку.  
  
## <a name="see-also"></a>См. также:  
 [Создание, изменение и удаление управляемой данными подписки](data-driven-subscriptions.md)   
 [Data-Driven Subscriptions](data-driven-subscriptions.md)   
 [Подписки и доставка (службы Reporting Services)](subscriptions-and-delivery-reporting-services.md)  
  
  
