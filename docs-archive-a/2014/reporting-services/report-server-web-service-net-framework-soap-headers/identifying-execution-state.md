---
title: Определение состояния выполнения | Документы Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: reporting-services
ms.topic: reference
helpviewer_keywords:
- session states [Reporting Services]
- lifetimes [Reporting Services]
- sessions [Reporting Services]
- SessionHeader SOAP header
ms.assetid: d8143a4b-08a1-4c38-9d00-8e50818ee380
author: maggiesMSFT
ms.author: maggies
manager: kfile
ms.openlocfilehash: fe53254a5da39c4e7d003ba37d5812ad130293e9
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87667555"
---
# <a name="identifying-execution-state"></a><span data-ttu-id="5baca-102">Определение состояния выполнения</span><span class="sxs-lookup"><span data-stu-id="5baca-102">Identifying Execution State</span></span>
  <span data-ttu-id="5baca-103">Протокол HTTP является протоколом без установления соединения и без сохранения состояния. Это означает, что он не может автоматически определить, что различные запросы получены от одного клиента или что один экземпляр браузера продолжает активно просматривать страницу или веб-сайт.</span><span class="sxs-lookup"><span data-stu-id="5baca-103">Hypertext Transfer Protocol (HTTP) is a connectionless and stateless protocol, which means that it does not automatically indicate whether different requests come from the same client or even whether a single browser instance is still actively viewing a page or site.</span></span> <span data-ttu-id="5baca-104">Сеансы создают логическое соединение, чтобы сохранять состояние между сервером и клиентом по протоколу HTTP.</span><span class="sxs-lookup"><span data-stu-id="5baca-104">Sessions create a logical connection to maintain state between server and client over HTTP.</span></span> <span data-ttu-id="5baca-105">Сведения конкретного пользователя, относящиеся к определенному сеансу, называются «состоянием сеанса».</span><span class="sxs-lookup"><span data-stu-id="5baca-105">The user-specific information relevant to a particular session is known as the session state.</span></span>

 <span data-ttu-id="5baca-106">В задачи управления сеансом входит сопоставление HTTP-запроса с предыдущими запросами, созданными в том же сеансе.</span><span class="sxs-lookup"><span data-stu-id="5baca-106">Session management involves correlating an HTTP request with other previous requests generated from the same session.</span></span> <span data-ttu-id="5baca-107">Без управления сеансом такие запросы оказываются не связанными с веб-службой сервера отчетов, поскольку протокол HTTP по своей природе является протоколом без установления соединения и без сохранения состояния.</span><span class="sxs-lookup"><span data-stu-id="5baca-107">Without session management, these requests appear unrelated to the Report Server Web service because of the connectionless and stateless nature of the HTTP protocol.</span></span>

 <span data-ttu-id="5baca-108">В службах [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] не применяется целостный подход к состоянию сеанса, как в [!INCLUDE[vstecasp](../../includes/vstecasp-md.md)].</span><span class="sxs-lookup"><span data-stu-id="5baca-108">[!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] does not expose a holistic concept of session state such as that exposed by [!INCLUDE[vstecasp](../../includes/vstecasp-md.md)].</span></span> <span data-ttu-id="5baca-109">Однако во время выполнения отчетов сервер отчетов сохраняет состояние между вызовами методов в форме **объекта выполнения**.</span><span class="sxs-lookup"><span data-stu-id="5baca-109">However, when executing reports, the report server maintains state between method calls in the form of an **execution**.</span></span> <span data-ttu-id="5baca-110">Объект выполнения позволяет пользователю взаимодействовать с отчетом несколькими способами, включая загрузку отчета с сервера отчетов, задание для отчета учетных данных и параметров и подготовку отчета к просмотру.</span><span class="sxs-lookup"><span data-stu-id="5baca-110">An execution allows the user to interact with the report in several ways - including loading the report from the report server, setting credentials and parameters for the report, and rendering the report.</span></span>

 <span data-ttu-id="5baca-111">В ходе обмена данными с сервером отчетов клиенты используют объект выполнения для управления просмотром отчетов и переходами пользователей к другим страницам отчета, а также для отображения или скрытия разделов отчета.</span><span class="sxs-lookup"><span data-stu-id="5baca-111">While they are communicating to a report server, clients use the execution to manage report viewing and user navigation to other pages in a report, and to show or hide sections of a report.</span></span> <span data-ttu-id="5baca-112">Для каждого отчета во время работы приложения существует уникальный объект выполнения.</span><span class="sxs-lookup"><span data-stu-id="5baca-112">A unique execution exists for each report the client application is running.</span></span>

 <span data-ttu-id="5baca-113">Обычно время существования объекта выполнения отсчитывается от момента, когда пользователь переходит в браузер или клиентское приложение и выбирает отчет для просмотра.</span><span class="sxs-lookup"><span data-stu-id="5baca-113">In general, the lifetime of an execution starts when a user navigates to a browser or client application and selects a report to view.</span></span> <span data-ttu-id="5baca-114">Объект выполнения удаляется после истечения короткого времени ожидания с момента получения последнего запроса на выполнение (по умолчанию время ожидания составляет 20 минут).</span><span class="sxs-lookup"><span data-stu-id="5baca-114">The execution is discarded after a short time out period after the last request to the execution has been received (the default time out is 20 minutes).</span></span>

 <span data-ttu-id="5baca-115">С точки зрения веб-службы время существования отсчитывается от момента, когда вызываются методы <xref:ReportExecution2005.ReportExecutionService.LoadReport%2A>, <xref:ReportExecution2005.ReportExecutionService.LoadReportDefinition%2A> или <xref:ReportExecution2005.ReportExecutionService.Render%2A> веб-службы сервера отчетов.</span><span class="sxs-lookup"><span data-stu-id="5baca-115">From a Web service perspective, the lifetime starts when the Report Server Web service <xref:ReportExecution2005.ReportExecutionService.LoadReport%2A>, <xref:ReportExecution2005.ReportExecutionService.LoadReportDefinition%2A>, or <xref:ReportExecution2005.ReportExecutionService.Render%2A> methods are called.</span></span> <span data-ttu-id="5baca-116">Приложение может использовать другие методы для управления активным объектом выполнения (например, для задания параметров и источников данных).</span><span class="sxs-lookup"><span data-stu-id="5baca-116">The application can use other methods to manipulate the active execution (for example, setting parameters and setting data sources).</span></span> <span data-ttu-id="5baca-117">Объект выполнения удаляется после истечения короткого времени ожидания с момента получения последнего запроса на выполнение (по умолчанию время ожидания составляет 20 минут).</span><span class="sxs-lookup"><span data-stu-id="5baca-117">The execution is discarded after a short time out period after the last request to the execution has been received (the default time out is 20 minutes).</span></span>

 <span data-ttu-id="5baca-118">Приложение отслеживает несколько активных объектов выполнения между вызовами методов <xref:ReportExecution2005.ReportExecutionService.Render%2A> и <xref:ReportExecution2005.ReportExecutionService.RenderStream%2A> веб-службы, сохраняя свойство <xref:ReportExecution2005.ExecutionHeader.ExecutionID%2A>, которое возвращается в заголовке SOAP из методов <xref:ReportExecution2005.ReportExecutionService.LoadReport%2A> и <xref:ReportExecution2005.ReportExecutionService.LoadReportDefinition%2A>.</span><span class="sxs-lookup"><span data-stu-id="5baca-118">An application keep track of multiple active executions between calls to the Web service <xref:ReportExecution2005.ReportExecutionService.Render%2A> and <xref:ReportExecution2005.ReportExecutionService.RenderStream%2A> methods by saving the <xref:ReportExecution2005.ExecutionHeader.ExecutionID%2A>, which is returned in the SOAP header from the <xref:ReportExecution2005.ReportExecutionService.LoadReport%2A> and <xref:ReportExecution2005.ReportExecutionService.LoadReportDefinition%2A> methods.</span></span>

 <span data-ttu-id="5baca-119">На следующей диаграмме показаны пути обработки отчетов и подготовки их к просмотру.</span><span class="sxs-lookup"><span data-stu-id="5baca-119">The following diagram shows the processing and rendering path for reports.</span></span>

 <span data-ttu-id="5baca-120">![Путь обработки или преобразования отчета для просмотра](../../../2014/reporting-services/media/rs-render-process-diagram.gif "Путь обработки или преобразования отчета для просмотра")</span><span class="sxs-lookup"><span data-stu-id="5baca-120">![Report processing/rendering path](../../../2014/reporting-services/media/rs-render-process-diagram.gif "Report processing/rendering path")</span></span>

 <span data-ttu-id="5baca-121">Для поддержки описанных выше функций текущий метод Render протокола SOAP был разбит на несколько методов, которые представляют этапы инициализации объекта выполнения, обработки и подготовки к просмотру.</span><span class="sxs-lookup"><span data-stu-id="5baca-121">To support the functions described above, the current SOAP Render method has been split into multiple methods encompassing execution initialization, processing, and rendering phases.</span></span>

 <span data-ttu-id="5baca-122">Чтобы подготовить отчет к просмотру программным образом, необходимо выполнить следующие действия.</span><span class="sxs-lookup"><span data-stu-id="5baca-122">To programmatically render a report, you must:</span></span>

-   <span data-ttu-id="5baca-123">Загрузите отчет или определение отчета с помощью метода <xref:ReportExecution2005.ReportExecutionService.LoadReport%2A> или <xref:ReportExecution2005.ReportExecutionService.LoadReportDefinition%2A>.</span><span class="sxs-lookup"><span data-stu-id="5baca-123">Load the report or the report definition using <xref:ReportExecution2005.ReportExecutionService.LoadReport%2A> or <xref:ReportExecution2005.ReportExecutionService.LoadReportDefinition%2A>.</span></span>

-   <span data-ttu-id="5baca-124">Определите, нужны ли для отчета учетные данные или параметры, проверив значения свойств <xref:ReportExecution2005.ExecutionInfo.CredentialsRequired%2A> и <xref:ReportExecution2005.ExecutionInfo.ParametersRequired%2A> объекта <xref:ReportExecution2005.ExecutionInfo>, возвращенного методом <xref:ReportExecution2005.ReportExecutionService.LoadReport%2A> или <xref:ReportExecution2005.ReportExecutionService.LoadReportDefinition%2A></span><span class="sxs-lookup"><span data-stu-id="5baca-124">Check to see if the report needs credentials or parameters by checking the values of the <xref:ReportExecution2005.ExecutionInfo.CredentialsRequired%2A> and <xref:ReportExecution2005.ExecutionInfo.ParametersRequired%2A> properties of the <xref:ReportExecution2005.ExecutionInfo> object returned by <xref:ReportExecution2005.ReportExecutionService.LoadReport%2A> or <xref:ReportExecution2005.ReportExecutionService.LoadReportDefinition%2A></span></span>

-   <span data-ttu-id="5baca-125">В случае необходимости задайте учетные данные и параметры с помощью методов <xref:ReportExecution2005.ReportExecutionService.SetExecutionCredentials%2A> и <xref:ReportExecution2005.ReportExecutionService.SetExecutionParameters%2A>.</span><span class="sxs-lookup"><span data-stu-id="5baca-125">If necessary, set the credentials and/or parameters using the <xref:ReportExecution2005.ReportExecutionService.SetExecutionCredentials%2A> and <xref:ReportExecution2005.ReportExecutionService.SetExecutionParameters%2A> methods.</span></span>

-   <span data-ttu-id="5baca-126">Вызовите метод <xref:ReportExecution2005.ReportExecutionService.Render%2A>, чтобы подготовить отчет к просмотру.</span><span class="sxs-lookup"><span data-stu-id="5baca-126">Call the <xref:ReportExecution2005.ReportExecutionService.Render%2A> method to render the report.</span></span>

 <span data-ttu-id="5baca-127">Пока отчет участвует в сеансе, может измениться базовый отчет, хранящийся в базе данных сервера отчетов.</span><span class="sxs-lookup"><span data-stu-id="5baca-127">While a report is in session, the underlying report stored in the report server database can change.</span></span> <span data-ttu-id="5baca-128">Например, может измениться определение отчета, сам отчет может быть удален или перемещен, а также могут измениться разрешения пользователя.</span><span class="sxs-lookup"><span data-stu-id="5baca-128">For example, the report definition can change, the report can be deleted or moved, and user permissions can change.</span></span> <span data-ttu-id="5baca-129">Если отчет участвует в активном сеансе, то на него не распространяются изменения, вносимые в базовый отчет (хранящийся в базе данных сервера отчетов).</span><span class="sxs-lookup"><span data-stu-id="5baca-129">If the report is in an active session, it is not affected by changes made to the underlying report (that is, the report stored in the report server database).</span></span>

 <span data-ttu-id="5baca-130">Сеансом отчета также можно управлять с помощь команд для доступа по URL-адресу.</span><span class="sxs-lookup"><span data-stu-id="5baca-130">You can also manage a report session using URL access commands.</span></span>

## <a name="see-also"></a><span data-ttu-id="5baca-131">См. также:</span><span class="sxs-lookup"><span data-stu-id="5baca-131">See Also</span></span>
 <span data-ttu-id="5baca-132"><xref:ReportExecution2005.ReportExecutionService.Render%2A>[Технический справочник &#40;SSRS&#41;](../../../2014/reporting-services/technical-reference-ssrs.md) [с использованием Reporting Services ЗАголовков SOAP](../report-server-web-service-net-framework-soap-headers/using-reporting-services-soap-headers.md)</span><span class="sxs-lookup"><span data-stu-id="5baca-132"><xref:ReportExecution2005.ReportExecutionService.Render%2A> [Technical Reference &#40;SSRS&#41;](../../../2014/reporting-services/technical-reference-ssrs.md) [Using Reporting Services SOAP Headers](../report-server-web-service-net-framework-soap-headers/using-reporting-services-soap-headers.md)</span></span>


