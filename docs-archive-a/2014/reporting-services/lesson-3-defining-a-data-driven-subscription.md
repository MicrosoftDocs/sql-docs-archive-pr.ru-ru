---
title: Занятие 3. Определение управляемой данными подписки | Документы Майкрософт
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: reporting-services-native
ms.topic: conceptual
ms.assetid: 89197b9b-7502-4fe2-bea3-ed7943eebf3b
author: maggiesMSFT
ms.author: maggies
manager: kfile
ms.openlocfilehash: d1bbc25bdd08b369180e31378a6d25a595badbcf
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87751799"
---
# <a name="lesson-3-defining-a-data-driven-subscription"></a>Lesson 3: Defining a Data-Driven Subscription
  На этом занятии будет использована управляемая данными подписка для подключения к источнику данных подписки, построен запрос, получающий данные для этой подписки, а также сопоставлен результирующий набор с отчетом и параметрами доставки.  
  
> [!NOTE]  
>  Перед началом работы убедитесь, что служба агента [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] запущена. Если она не запущена, подписку сохранить не удастся.  
  
 В этом занятии предполагается, что занятия 1 и 2 пройдены и источник данных отчета использует сохраненные учетные данные.  Дополнительные сведения см. в разделе [Занятие 2. Изменение свойств источника данных отчета](../reporting-services/lesson-2-modifying-the-report-data-source-properties.md).  
  
 В этом разделе:  
  
-   [Запуск мастера управляемой данными подписки](#bkmk_startwizard)  
  
-   [Шаг 1. Задайте подписку](#bkmk_definesubscription)  
  
-   [Шаг 2. Задайте соединение с источником данных подписчика](#bkmk_defineconnectiontosubscriber)  
  
-   [Шаг 3. Определите запрос для получения данных подписчика](#bkmk_definequery)  
  
-   [Шаг 4. Задайте параметры доставки](#bkmk_set_deliveryoptions)  
  
-   [Шаг 5. Задайте значение параметра для изменения вывода отчета](#bkmk_configure_parameter)  
  
-   [Шаг 6. Создайте расписание для подписки](#bkmk_schedule_subscription)  
  
##  <a name="start-the-data-driven-subscription-wizard"></a><a name="bkmk_startwizard"></a>Запуск мастера управляемой данными подписки  
  
1.  В диспетчере отчетов нажмите кнопку **Корневая папка**и перейдите к папке, содержащей отчет **Sales Orders** (сводка продаж по сотрудникам отдела продаж).  
  
2.  В контекстном меню отчета выберите пункт **Управление**, а затем перейдите на вкладку **Подписки** .  
  
3.  Щелкните **Создать управляемую данными подписку**. Если указанная кнопка не видна, это означает отсутствие разрешений диспетчера содержимого.  
  
##  <a name="step-1---define-a-description"></a><a name="bkmk_definesubscription"></a>Шаг 1. Определение описания  
  
1.  В качестве описания введите **Sales Order delivery** (Доставка заказа на продажу).  
  
2.  В раскрывающемся списке **Указать способ уведомления получателей** выберите **Общая папка Windows**.  
  
3.  Выберите **Указать только для этой подписки**и нажмите **Далее**.  
  
##  <a name="step-2---define-a-connection-to-the-subscriber-data-source"></a><a name="bkmk_defineconnectiontosubscriber"></a>Шаг 2. Определение соединения с источником данных подписчика  
  
1.  В качестве типа источника данных выберите **Microsoft SQL Server** .  
  
2.  В поле «Строка подключения» введите следующую строку:  
  
    ```  
    data source=localhost; initial catalog=Subscribers  
    ```  
  
    > [!NOTE]  
    >  Подписчики — это база данных, созданная во время занятия 1  
  
3.  Щелкните **Учетные данные, которые безопасно хранятся на сервере отчетов**.  
  
4.  В полях **Имя пользователя** и **Пароль**введите доменное имя пользователя и пароль. При указании значения **Имя пользователя**необходимо включать как домен, так и учетную запись пользователя.  
  
    > [!NOTE]  
    >  Учетные данные, используемые для подключения к источникам данных подписчика, не передаются обратно в среду [!INCLUDE[ssManStudio](../includes/ssmanstudio-md.md)]. При последующем изменении параметров подписки потребуется ввести пароль для подключения к источнику данных.  
  
5.  Выберите **Использовать учетные данные Windows при подключении к источнику данных**и нажмите кнопку **Далее**.  
  
##  <a name="step-3---define-a-query-to-retrieve-subscriber-data"></a><a name="bkmk_definequery"></a>Шаг 3. Определение запроса для получения данных подписчика  
  
1.  Введите следующий запрос в поле запроса:  
  
    ```  
    Select * from OrderInfo  
    ```  
  
2.  Задайте время ожидания 30 секунд.  
  
3.  Нажмите кнопку **Проверить**, а затем кнопку **Далее**.  
  
##  <a name="step-4---set-delivery-options"></a><a name="bkmk_set_deliveryoptions"></a>Шаг 4. Настройка параметров доставки  
  
1.  Для параметра **Имя файла**выберите **Получить значение из базы данных**. Выберите поле **Order**.  
  
2.  Для параметра **Путь**выберите **Указать статическое значение**. В поле «Значение параметра» введите имя общей папки, для которой имеется разрешение на запись (например: `\\mycomputer\public\myreports`).  
  
3.  Для параметра **Формат обработки**выберите **Получить значение из базы данных**. Выберите **Формат**.  
  
4.  Для параметра **Режим записи**выберите **Указать статическое значение** , а затем выберите **Автоувеличение**.  
  
5.  Для параметра **Расширение файла**выберите **Указать статическое значение** , а затем ― **True**.  
  
6.  Для параметра **Имя пользователя**выберите **Указать статическое значение**. Введите учетную запись пользователя домена. Введите ее в указанном формате: `<domain>\<account>`. Учетная запись пользователя должна обладать разрешениями на путь, заданный в предыдущих шагах.  
  
7.  Для параметра **Пароль**выберите **Указать статическое значение**. Введите пароль. Вводите пароль внимательно. Мастер не проводит проверку пароля.  
  
8.  Нажмите кнопку **Далее**.  
  
##  <a name="step-5---configure-a-parameter-value-to-very-report-output"></a><a name="bkmk_configure_parameter"></a>Шаг 5. Настройка значения параметра для очень большого вывода отчета  
  
1.  Для параметра **OrderNumber**выберите **Получить значение из базы данных**. В поле «Значение параметра» выберите **Order**. Нажмите кнопку **Далее**.  
  
##  <a name="step-6---to-schedule-a-subscription"></a><a name="bkmk_schedule_subscription"></a>Шаг 6. Планирование подписки  
  
1.  Щелкните **По расписанию, созданному для этой подписки**и нажмите кнопку **Далее**.  
  
2.  В окне **Подробности расписания**нажмите кнопку **Однократно**.  
  
3.  Укажите время начала через несколько минут после текущего момента.  
  
4.  Нажмите кнопку **Готово**.  
  
## <a name="next-steps"></a>Next Steps  
 При выполнении подписки в указанную общую папку будут доставлены четыре файла отчетов, по одному для каждого заказа из источника данных *Подписчики* . Каждая доставка должна содержать уникальные данные (данные должны различаться в зависимости от заказа), иметь свой формат подготовки и формат файла. Можно открыть любой отчет из общей папки, чтобы убедиться, что каждая версия настроена в соответствии с указанными параметрами подписки.  
  
 ![Список файлов, созданных подпиской](../../2014/tutorials/media/ssrs-tutorial-datadriven-subscription-filelist.gif "Список файлов, созданных подпиской")  
  
 Страница подписки в диспетчере отчетов будет содержать **Дату последнего запуска** и **Состояние** для подписки.  
  
> [!NOTE]  
>  Для вывода обновленной информации необходимо обновить страницу после запуска подписок.  
  
 ![Результаты подписки в диспетчере отчетов](../../2014/tutorials/media/ssrs-tutorial-datadriven-subscription-status-reportmanager.gif "Результаты подписки в диспетчере отчетов")  
  
 Этот шаг завершает учебник «Определение управляемой данными подписки». Дополнительные сведения о других [!INCLUDE[ssRSnoversion](../includes/ssrsnoversion-md.md)] руководствах см. в [руководствах по Reporting Services &#40;SSRS&#41;](../reporting-services/reporting-services-tutorials-ssrs.md).  
  
## <a name="see-also"></a>См. также:  
 [Создание управляемой данными подписки (учебник по службам SSRS)](../reporting-services/create-a-data-driven-subscription-ssrs-tutorial.md)   
 [Подписки и доставка (службы Reporting Services)](subscriptions/subscriptions-and-delivery-reporting-services.md)   
 [Data-Driven Subscriptions](subscriptions/data-driven-subscriptions.md)   
 [Создание, изменение и удаление управляемой данными подписки](subscriptions/create-modify-and-delete-data-driven-subscriptions.md)   
 [Использование внешнего источника данных подписчика (управляемая данными подписка)](subscriptions/use-an-external-data-source-for-subscriber-data-data-driven-subscription.md)  
  
  
