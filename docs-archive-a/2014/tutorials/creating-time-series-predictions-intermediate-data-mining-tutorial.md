---
title: Создание прогнозов временных рядов (учебник по интеллектуальному анализу данных — средний уровень) | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: fb22cffa-ac99-4d34-ac4a-9c93068e33e8
author: minewiskan
ms.author: owend
manager: kfile
ms.openlocfilehash: a1175cdffd1512e0cb876b9565dd0727a9f094c5
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87656957"
---
# <a name="creating-time-series-predictions-intermediate-data-mining-tutorial"></a>Создание прогнозов временных рядов (учебник по интеллектуальному анализу данных — средний уровень)
  В ходе выполнения предыдущей задачи данного занятия была создана модель временных рядов и изучены результаты. По умолчанию службы [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] всегда создают набор из пяти (5) прогнозов для модели временных рядов и отображают прогнозируемые значения в виде части диаграммы прогнозирования. Однако можно также создавать прогнозы путем построения прогнозирующих запросов расширений интеллектуального анализа данных (DMX).  
  
 В ходе данной задачи будет создан прогнозирующий запрос, который сформирует такие же прогнозы, какие отображались ранее в средстве просмотра. Для выполнения данной задачи необходимо пройти занятия учебника по интеллектуальному анализу данных (начальный уровень) и иметь навыки работы с построителем прогнозирующих запросов. Здесь будет показано, как можно создавать запросы, относящиеся к моделям временных рядов.  
  
## <a name="creating-time-series-predictions"></a>Создание прогнозов временных рядов  
 Как правило, первым шагом в создании прогнозируемого запроса является выбор модели интеллектуального анализа данных и входной таблицы. Однако модель временных рядов не требует дополнительных входных данных для построения обычного прогноза. Поэтому нет необходимости указывать новый источник данных при создании прогнозов, за исключением случаев добавления данных в модель или замены данных.  
  
 В данном занятии необходимо указать количество этапов прогнозирования. Можно указать имя ряда, чтобы получить прогноз для определенного сочетания товара и региона.  
  
#### <a name="to-select-a-model-and-input-table"></a>Выбор модели и входной таблицы  
  
1.  На вкладке **Прогноз модели интеллектуального анализа** в конструкторе интеллектуального анализа данных в поле **модель интеллектуального анализа** нажмите кнопку **выбрать модель**.  
  
2.  В диалоговом окне **Выбор модели интеллектуального анализа данных** разверните структуру прогнозирования, выберите модель **прогнозирования** из списка и нажмите кнопку **ОК**.  
  
3.  Не учитывать поле **Выбор входных таблиц** .  
  
    > [!NOTE]  
    >  Для модели временных рядов не требуется указывать отдельные входные данные, за исключением случаев выполнения перекрестного прогноза.  
  
4.  В столбце **источник** в сетке на вкладке **Прогноз модели интеллектуального анализа данных** щелкните ячейку в первой пустой строке, а затем выберите **Прогноз модели интеллектуального анализа данных**.  
  
5.  В столбце **поле** выберите **область модели**.  
  
     В результате этого действия в прогнозирующий запрос будет добавлен идентификатор ряда с целью указания сочетания модели и региона, к которому будет относиться соответствующий прогноз.  
  
6.  Щелкните следующую пустую строку в столбце **источник** , а затем выберите **функция прогнозирования**.  
  
7.  В столбце **поле** выберите **PredictTimeSeries**.  
  
    > [!NOTE]  
    >  Также можно воспользоваться функцией `Predict` для моделей временных рядов. Однако по умолчанию функция Predict создает только один прогноз для каждого ряда. Таким образом, чтобы указать несколько этапов прогнозирования, необходимо использовать функцию **PredictTimeSeries** .  
  
8.  На панели **модель интеллектуального анализа** данных выберите столбец модель интеллектуального анализа данных **размер.** Перетащите параметр сумма в поле **критерий или аргументы** для функции **PredictTimeSeries** , которая была добавлена ранее.  
  
9. Щелкните поле **критерий или аргументы** и введите запятую, а затем — **5**после имени поля.  
  
     Текст в поле **критерий или аргументы** теперь должен отображать следующее:  
  
     `[Forecasting].[Amount],5`  
  
10. В столбце **псевдоним** введите `PredictAmount` .  
  
11. Щелкните следующую пустую строку в **исходном** столбце, а затем снова выберите **функция прогнозирования** .  
  
12. В столбце **поле** выберите **PredictTimeSeries**.  
  
13. На панели **модель интеллектуального анализа данных** выберите количество столбцов и перетащите его в поле **критерий или аргументы** второй функции **PredictTimeSeries** .  
  
14. Щелкните поле **критерий или аргументы** и введите запятую, а затем — **5**после имени поля.  
  
     Текст в поле **критерий или аргументы** теперь должен отображать следующее:  
  
     `[Forecasting].[ Quantity],5`  
  
15. В столбце **псевдоним** введите `PredictQuantity` .  
  
16. Щелкните **Переключиться в представление результатов запроса**.  
  
     Результаты запроса будут отображены в табличном формате.  
  
 Итак, было создано три различных типа результатов в построителе запросов, один из которых использует значения столбца, а два других получают прогнозируемые значения из прогнозирующей функции. Поэтому результаты запроса состоят из трех отдельных столбцов. В первом столбце содержится список сочетания товаров и регионов. Во втором и третьем столбцах — по вложенной таблице с результатами прогнозов. Каждая вложенная таблица содержит временные этапы и значения прогнозов, как, например, в следующей таблице.  
  
 Результаты примера (суммы округлены до двух цифр после запятой):  
  
 **M200 Европа Предиктамаунт**  
  
|$TIME|"Сумма";|  
|-----------|------------|  
|7/25/2008|99978,00|  
|8/25/2008|145575,07|  
|9/25/2008|116835,19|  
|10/25/2008|116537,38|  
|11/25/2008|107760,55|  
  
 **M200 Европа Предикткуантити**  
  
|$TIME|Количество|  
|-----------|--------------|  
|7/25/2008|52|  
|8/25/2008|67|  
|9/25/2008|58|  
|10/25/2008|57|  
|11/25/2008|54|  
  
 **M200 Северная Америка — Предиктамаунт**  
  
|$TIME|"Сумма";|  
|-----------|------------|  
|7/25/2008|348533,93|  
|8/25/2008|340097,98|  
|9/25/2008|257986,19|  
|10/25/2008|374658,24|  
|11/25/2008|379241,44|  
  
 **M200 Северная Америка — Предикткуантити**  
  
|$TIME|Количество|  
|-----------|--------------|  
|7/25/2008|272|  
|8/25/2008|152|  
|9/25/2008|250|  
|10/25/2008|181|  
|11/25/2008|290|  
  
> [!WARNING]  
>  Даты, используемые в образце базы данных, изменены для этой версии. Если используется более ранняя версия образца данных, могут появиться другие результаты.  
  
## <a name="saving-the-prediction-results"></a>Сохранение результатов прогноза  
 Есть несколько возможных вариантов использования результатов прогнозирования. Можно преобразовать результаты в плоский формат, скопировать данные из представления результатов и вставить в рабочий лист Excel или другой файл.  
  
 Чтобы упростить процесс сохранения результатов, конструктор интеллектуального анализа данных также предоставляет возможность сохранения данных в новом представлении источника данных. Функции сохранения результатов в представлении источника данных доступны только в [!INCLUDE[ssBIDevStudioFull](../includes/ssbidevstudiofull-md.md)]. Результаты могут храниться только в плоском формате.  
  
#### <a name="to-flatten-the-results-in-the-results-pane"></a>Преобразование результатов в плоский формат на панели «Результаты»  
  
1.  В конструктор запросов прогнозирования щелкните **Переключиться в режим конструктора запросов**.  
  
     После этого в представлении можно будет вручную изменить текст DMX-запроса.  
  
2.  Введите ключевое слово `FLATTENED` после слова `SELECT`. Полный текст запроса теперь должен выглядеть следующим образом.  
  
    ```  
    SELECT FLATTENED  
      [Forecasting].[Model Region],  
      (PredictTimeSeries([Forecasting].[Amount],5)) as [PredictAmount],  
      (PredictTimeSeries([Forecasting].[Quantity],5)) as [PredictQuantity]  
    FROM  
      [Forecasting]  
    ```  
  
3.  Кроме того, можно указать предложение, которое будет ограничивать результаты, как в следующем примере:  
  
    ```  
    SELECT FLATTENED  
      [Forecasting].[Model Region],  
      (PredictTimeSeries([Forecasting].[Amount],5)) as [PredictAmount],  
      (PredictTimeSeries([Forecasting].[Quantity],5)) as [PredictQuantity]  
    FROM  
      [Forecasting]  
    WHERE [Forecasting].[Model Region] = 'M200 North America'   
    OR [Forecasting].[Model Region] = 'M200 Europe'  
  
    ```  
  
4.  Щелкните **Переключиться в представление результатов запроса**.  
  
#### <a name="to-export-prediction-query-results"></a>Экспорт результатов прогнозирующего запроса  
  
1.  Нажмите кнопку **сохранить результаты запроса**.  
  
2.  В диалоговом окне **Сохранение результата запроса интеллектуального анализа данных** выберите в поле **источник данных**значение [!INCLUDE[ssSampleDBDWobject](../includes/sssampledbdwobject-md.md)] . Также можно создать источник данных, если необходимо сохранить данные в другой реляционной базе данных.  
  
3.  В столбце **имя таблицы** введите новое имя временной таблицы, например **тестовые прогнозы**.  
  
4.  Выберите команду **Сохранить**.  
  
    > [!NOTE]  
    >  Чтобы просмотреть созданную таблицу, создайте соединение с компонентом Database Engine, на котором были сохранены данные, и сформируйте запрос.  
  
## <a name="conclusion"></a>Заключение  
 Было изучено создание базовой модели временных рядов, интерпретация прогнозов и создание прогнозов.  
  
 Оставшиеся задания в этом учебнике не являются обязательными и описывают расширенное прогнозирование временных рядов. В этих задачах будет изучено добавление новых данных в модель и создание прогнозов на основе расширенных рядов. Будет также изучено выполнение перекрестного прогнозирования с использованием тренда в модели и заменой данных новым рядом данных.  
  
## <a name="next-lesson"></a>Следующее занятие  
 [Учебник по расширенному анализу временных рядов &#40;промежуточного интеллектуального анализа данных&#41;](../../2014/tutorials/advanced-time-series-predictions-intermediate-data-mining-tutorial.md)  
  
## <a name="see-also"></a>См. также:  
 [Примеры запросов моделей временных рядов](../../2014/analysis-services/data-mining/time-series-model-query-examples.md)  
  
  
