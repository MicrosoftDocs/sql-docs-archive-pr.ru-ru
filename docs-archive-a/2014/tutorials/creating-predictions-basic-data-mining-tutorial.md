---
title: Создание прогнозов (учебник по интеллектуальному анализу данных — базовый) | Документация Майкрософт
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: a8410ed2-bb98-4d51-a9eb-b239be1201c2
author: minewiskan
ms.author: owend
manager: kfile
ms.openlocfilehash: 456aec6c6b9d0d1a5d0ee1d9949507a37577130c
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87727525"
---
# <a name="creating-predictions-basic-data-mining-tutorial"></a>Создание прогнозов (учебник по интеллектуальному анализу данных — начальный уровень)
  После того как вы проверили точность моделей интеллектуального анализа данных и решили, что результаты удовлетворены, можно создать прогнозы с помощью конструктор запросов прогнозирования на вкладке **Прогноз модели интеллектуального анализа** данных в конструкторе интеллектуального анализа.  
  
 Построитель прогнозирующих запросов имеет три представления. С помощью представлений **конструирования** и **запросов** можно создавать и анализировать запросы. Затем можно выполнить запрос и просмотреть результаты в представлении **результатов** .  
  
 Во всех прогнозирующих запросах используется DMX — язык расширений интеллектуального анализа данных. Синтаксис расширения интеллектуального анализа данных похож на синтаксис T-SQL, но служит для написания запросов к объектам интеллектуального анализа данных. Хотя синтаксис расширений интеллектуального анализа данных не является сложным, используя построитель запросов, как и этот, или один из [SQL Server надстроек интеллектуального анализа данных для Office](../../2014/analysis-services/data-mining/sql-server-data-mining-add-ins-for-office.md), значительно упрощает выбор входов и выражений сборки, поэтому мы настоятельно рекомендуем изучить основы.  
  
## <a name="creating-the-query"></a>Создание запроса  
 Первым шагом в создании прогнозирующего запроса является выбор модели интеллектуального анализа данных и входной таблицы.  
  
#### <a name="to-select-a-model-and-input-table"></a>Выбор модели и входной таблицы  
  
1.  На вкладке **Прогнозирование моделей интеллектуального анализа** конструктора интеллектуального анализа данных в поле **модель интеллектуального анализа** нажмите кнопку **выбрать модель**.  
  
2.  В диалоговом окне **Выбор модели интеллектуального анализа данных** перейдите по дереву к структуре **целевой рассылки** , разверните структуру, выберите `TM_Decision_Tree` и нажмите кнопку **ОК**.  
  
3.  В поле **Выбор входных таблиц** нажмите кнопку **выбрать таблицу вариантов**.  
  
4.  В диалоговом окне **Выбор таблицы** в списке **источник данных** выберите представление источника данных [!INCLUDE[ssAWDWsp](../includes/ssawdwsp-md.md)] .  
  
5.  В поле **имя таблицы или представления**выберите таблицу **ProspectiveBuyer (dbo)** и нажмите кнопку **ОК**.  
  
     `ProspectiveBuyer`Таблица наиболее похожа на таблицу вариантов **vTargetMail** .  
  
## <a name="mapping-the-columns"></a>Сопоставление столбцов  
 После выбора входной таблицы в построителе прогнозирующих запросов будет создано сопоставление по умолчанию между моделью интеллектуального анализа данных и таблицей входных данных на основе имен столбцов. По крайней мере один столбец структуры необходимо сопоставить со столбцом внешних данных.  
  
> [!IMPORTANT]  
>  Данные, которые используются для определения точности моделей, должны содержать столбец, который может быть сопоставлен с прогнозируемым столбцом. Если такой столбец не существует, то можно создать его с пустыми значениями, однако этот столбец должен иметь тот же тип данных, что и прогнозируемый.  
  
#### <a name="to-map-the-inputs-to-the-model"></a>Сопоставление входных данных с моделью  
  
1.  Щелкните правой кнопкой мыши линии, соединяющие окно **модель интеллектуального анализа данных** с окном **Выбор входных таблиц** , и выберите пункт **Изменить соединения**.  
  
     Обратите внимание, что сопоставляется не каждый столбец. Будут добавлены сопоставления для нескольких **столбцов таблицы**. Кроме того, сформируем новый столбец с датой рождения, исходя из текущего столбца данных так, чтобы столбцы лучше совпадали.  
  
2.  В разделе **столбец таблицы**щелкните `Bike Buyer` ячейку и выберите ProspectiveBuyer. Unknown из раскрывающегося списка.  
  
     При этом прогнозируемый столбец [Bike Buyer] сопоставляется со столбцом входной таблицы.  
  
3.  Нажмите кнопку **ОК**.  
  
4.  В **Обозреватель решений**щелкните правой кнопкой мыши представление источника данных **целевой рассылки** и выберите пункт **Конструктор представлений**.  
  
5.  Щелкните правой кнопкой мыши таблицу ProspectiveBuyer и выберите **Создать именованное вычисление**.  
  
6.  В диалоговом окне **Создание именованного вычисления** в поле **имя столбца**введите `calcAge` .  
  
7.  В качестве **описания**введите **вычислить возраст на основе даты рождения**.  
  
8.  В поле **выражение** введите `DATEDIFF(YYYY,[BirthDate],getdate())` и нажмите кнопку **ОК**.  
  
     Так как входная таблица не имеет столбца **Age** , соответствующего значению в модели, это выражение можно использовать для вычисления возраста клиента из столбца «ДеньРождения» во входной таблице. Поскольку **Age** был определен как самый влиятельные столбец для прогнозирования приобретения велосипеда, он должен существовать как в модели, так и во входной таблице.  
  
9. В конструкторе интеллектуального анализа данных выберите вкладку **Прогноз модели интеллектуального анализа** и снова откройте окно **Изменение подключений** .  
  
10. В разделе **столбец таблицы**щелкните ячейку **Age** и выберите ProspectiveBuyer. Calc из раскрывающегося списка.  
  
    > [!WARNING]  
    >  Если столбец не появился в списке, то может потребоваться обновить определение представления источников данных, загруженного в конструктор. Для этого в меню **файл** выберите **сохранить все**, а затем закройте и снова откройте проект в конструкторе.  
  
11. Нажмите кнопку **ОК**.  
  
## <a name="designing-the-prediction-query"></a>Проектирование прогнозирующего запроса  
  
1.  Первой кнопкой на панели инструментов вкладки **Прогноз модели интеллектуального анализа данных** является **Переключение в режим конструктора/переключиться на представление "результат"/"перейти к представлению запроса** ". Нажмите кнопку со стрелкой вниз на этой кнопке и выберите пункт **конструктор**.  
  
2.  В сетке на вкладке **Прогноз модели интеллектуального анализа данных** щелкните ячейку в первой пустой строке **исходного** столбца, а затем выберите **функция прогнозирования**.  
  
3.  В строке **функция прогнозирования** в столбце **поле** выберите `PredictProbability` .  
  
     В столбце **псевдоним** той же строки введите **вероятность результата**.  
  
4.  В расположенном выше окне **модель интеллектуального анализа данных** выберите и перетащите [Bike Buyer] в ячейку **критерий или аргумент** .  
  
     Если вы разрешите Go, [TM_Decision_Tree]. [Покупатель велосипеда] отображается в ячейке **критерий или аргумента** .  
  
     Таким образом определяется целевой столбец для функции `PredictProbability`. Дополнительные сведения о функциях см. в разделе [расширения интеллектуального анализа данных &#40;DMX&#41; функция Reference](/sql/dmx/data-mining-extensions-dmx-function-reference).  
  
5.  Щелкните следующую пустую строку в **исходном** столбце, а затем выберите **TM_Decision_Tree** модель интеллектуального анализа данных.  
  
6.  В `TM_Decision_Tree` строке в столбце **поле** выберите `Bike Buyer` .  
  
7.  В `TM_Decision_Tree` строке в столбце **критерий или аргумент** введите `=1` .  
  
8.  Щелкните следующую пустую строку в **исходном** столбце, а затем выберите **ProspectiveBuyer Table (таблица**).  
  
9. В `ProspectiveBuyer` строке в столбце **поле** выберите **проспективебуйеркэй**.  
  
     При этом к прогнозирующему запросу добавляется уникальный идентификатор, который позволяет определить, кто, скорее всего, будет или не будет покупать велосипед.  
  
10. Добавьте еще пять строк в сетку. Для каждой строки выберите **таблицу ProspectiveBuyer** в качестве **источника** , а затем добавьте в ячейки **поля** следующие столбцы:  
  
    -   calcAge  
  
    -   LastName  
  
    -   FirstName  
  
    -   AddressLine1  
  
    -   AddressLine2  
  
 Наконец, выполните запрос и просмотрите результаты.  
  
 **Конструктор запросов прогнозирования** также включает следующие элементы управления:  
  
-   Флажок " **Показывать** "  
  
     Позволяет удалять предложения из запроса без удаления их из конструктора. Это может потребоваться при работе со сложными запросами, когда возникает необходимость сохранять их синтаксис, не прибегая к копированию и вставке кода DMX в окне редактирования.  
  
-   **Группа**  
  
     Вставляет открывающую (левую) скобку в начале выделенной строки или закрывающую (правую) скобку в конце текущей строки.  
  
-   **И (ИЛИ)**  
  
     Вставляет оператор `AND` или оператор `OR` непосредственно после текущей функции или столбца.  
  
#### <a name="to-run-the-query-and-view-results"></a>Выполнение запроса и просмотр результатов  
  
1.  На вкладке **Прогноз модели интеллектуального анализа данных** нажмите кнопку **результат** .  
  
2.  После выполнения запроса отображаются результаты для просмотра.  
  
     На вкладке **Прогноз модели интеллектуального анализа данных** отображаются контактные данные потенциальных клиентов, которые, скорее всего, будут покупателями велосипедов. В столбце **вероятность результата** указывается вероятность исходящего прогноза. Эти результаты можно использовать, чтобы определить, для каких потенциальных заказчиков следует выполнить прямую почтовую рассылку.  
  
3.  На этом этапе можно сохранить результаты. Имеются три параметра.  
  
    -   Щелкните правой кнопкой мыши строку данных в результатах и выберите **Копировать** , чтобы сохранить только это значение (и заголовок столбца) в буфере обмена.  
  
    -   Щелкните правой кнопкой мыши любую строку результатов и выберите команду **Копировать все** , чтобы скопировать весь результирующий набор, включая заголовки столбцов, в буфер обмена.  
  
    -   Щелкните **сохранить результат запроса** , чтобы сохранить результаты непосредственно в базу данных следующим образом:  
  
        1.  В диалоговом окне **Сохранение результата запроса интеллектуального анализа данных** выберите источник данных или определите новый источник данных.  
  
        2.  Введите имя таблицы, которая будет хранить результаты запроса.  
  
        3.  Используйте параметр **Добавить в DSV**, чтобы создать таблицу и добавить ее в существующее представление источника данных. Это полезно, если требуется, чтобы все связанные таблицы для модели, такие как обучающие данные, исходные данные и результаты запроса, были в одном и том же представлении источника данных.  
  
        4.  Используйте параметр **перезаписывать, если существует**, чтобы обновить существующую таблицу с самыми последними результатами.  
  
             Необходимо использовать параметр перезаписи таблицы при добавлении любых столбцов к прогнозирующему запросу, изменении имен или типов данных любых столбцов в прогнозирующем запросе или при выполнении любых инструкций ALTER для целевой таблицы.  
  
             Кроме того, если несколько столбцов имеют одно и то же имя (например, **выражение**имени столбца по умолчанию), необходимо создать псевдоним для столбцов с повторяющимися именами, иначе при попытке конструктора сохранить результаты в SQL Server будет возникать ошибка. Причина в том, что SQL Server не разрешает применять несколько столбцов с одинаковыми именами.  
  
             Дополнительные сведения см. в разделе [диалоговое окно "сохранение результата запроса интеллектуального анализа данных" &#40;представление прогноза модели интеллектуального анализа&#41;](../../2014/analysis-services/save-data-mining-query-result-dialog-box-mining-model-prediction-view.md).  
  
## <a name="next-task-in-lesson"></a>Следующая задача занятия  
 [Использование детализации в данных структуры &#40;учебник по основам интеллектуального анализа данных&#41;](../../2014/tutorials/using-drillthrough-on-structure-data-basic-data-mining-tutorial.md)  
  
## <a name="see-also"></a>См. также:  
 [Создание прогнозирующего запроса с помощью построителя прогнозирующих запросов](../../2014/analysis-services/data-mining/create-a-prediction-query-using-the-prediction-query-builder.md)  
  
  
