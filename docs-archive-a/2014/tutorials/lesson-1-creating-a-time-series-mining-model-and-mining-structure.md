---
title: Занятие 1. Создание модели и структуры интеллектуального анализа данных временных рядов | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: b201f2b8-9ab5-425b-9ff3-fe321a60a7b7
author: minewiskan
ms.author: owend
manager: kfile
ms.openlocfilehash: 2513bc3837dd224f6561eb0015ced538ea3add8c
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87656109"
---
# <a name="lesson-1-creating-a-time-series-mining-model-and-mining-structure"></a>Урок 1. Создание модели и структуры интеллектуального анализа данных на основе временных рядов
  На этом занятии будет создана модель интеллектуального анализа данных, с помощью которой можно спрогнозировать значения во времени на основании исторических данных. После создания модели автоматически будет создана базовая структура, которую можно использовать в качестве основы для дополнительных моделей интеллектуального анализа данных.  
  
 На этом занятии предполагается, что вы знакомы с моделями прогнозирования и требованиями алгоритма временных рядов (Майкрософт). Дополнительные сведения см. в статье [Microsoft Time Series Algorithm](../../2014/analysis-services/data-mining/microsoft-time-series-algorithm.md).  
  
## <a name="create-mining-model-statement"></a>Инструкция CREATE MINING MODEL  
 Чтобы создать модель интеллектуального анализа данных напрямую и автоматически создать базовую структуру интеллектуального анализа данных, используйте инструкцию [создания модели интеллектуального анализа данных &#40;DMX&#41;](/sql/dmx/create-mining-model-dmx) . Код инструкции можно разбить на следующие части:  
  
-   присвоение имени модели;  
  
-   определение временной метки;  
  
-   определение необязательного ключевого столбца ряда;  
  
-   определение прогнозируемого атрибута или атрибутов.  
  
 В следующем фрагменте показан стандартный пример инструкции CREATE MINING MODEL:  
  
```  
CREATE MINING MODEL [<Mining Structure Name>]  
(  
   <key columns>,  
   <predictable attribute columns>  
)  
USING <algorithm name>([parameter list])  
WITH DRILLTHROUGH  
```  
  
 Первая строчка кода определяет имя модели интеллектуального анализа данных:  
  
```  
CREATE MINING MODEL [Mining Model Name]  
```  
  
 Службы Analysis Services автоматически формируют имя базовой структуры путем добавления строки «_structure» к имени модели, что гарантирует несовпадение имени структуры и модели. Сведения об именовании объекта в расширениях интеллектуального анализа данных см. в разделе [идентификаторы &#40;&#41;расширений интеллектуального анализа данных ](/sql/dmx/identifiers-dmx).  
  
 В следующей строке кода задается ключевой столбец модели интеллектуального анализа данных, который в случае с моделью временных рядов уникально определяет временной этап в исходных данных. Временной этап определяется с помощью ключевых слов `KEY TIME` после имени столбца и типов данных. Если модель временных рядов имеет отдельный ключ ряда, она определяется с помощью ключевого слова `KEY`.  
  
```  
<key columns>  
```  
  
 Следующая строка кода используется для определения столбцов в прогнозируемой модели. Отдельная модель интеллектуального анализа данных может иметь несколько прогнозируемых атрибутов. В таком случае алгоритм временных рядов (Майкрософт) создает отдельный анализ для каждого ряда:  
  
```  
<predictable attribute columns>  
```  
  
## <a name="lesson-tasks"></a>Задачи занятия  
 На этом занятии будут выполнены следующие задачи.  
  
-   Создание нового пустого запроса  
  
-   Изменение запроса, чтобы создать модель интеллектуального анализа данных  
  
-   Выполнение запроса  
  
## <a name="creating-the-query"></a>Создание запроса  
 На первом этапе необходимо подключиться к экземпляру служб [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] и создать новый DMX-запрос в среде [!INCLUDE[ssManStudioFull](../includes/ssmanstudiofull-md.md)].  
  
#### <a name="to-create-a-new-dmx-query-in-sql-server-management-studio"></a>Создание нового DMX-запроса в среде SQL Server Management Studio  
  
1.  Откройте [!INCLUDE[ssManStudioFull](../includes/ssmanstudiofull-md.md)].  
  
2.  В диалоговом окне **соединение с сервером** в поле **тип сервера**выберите **Analysis Services**. В поле **имя сервера**введите `LocalHost` или имя экземпляра [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] , к которому необходимо подключиться для этого занятия. Нажмите кнопку **Подключиться**.  
  
3.  В окне **Обозреватель объектов**щелкните правой кнопкой мыши экземпляр служб [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)], укажите **Создать запрос**, а затем выберите пункт **Расширения интеллектуального анализа данных**.  
  
     Откроется редактор запросов, содержащий новый, пустой запрос.  
  
## <a name="altering-the-query"></a>Изменение запроса  
 Следующим шагом будет изменение инструкции CREATE MINING MODEL, чтобы создать модель интеллектуального анализа данных, используемую для составления прогнозов, а также ее базовую структуру интеллектуального анализа данных.  
  
#### <a name="to-customize-the-create-mining-model-statement"></a>Настройка инструкции CREATE MINING MODEL  
  
1.  В редакторе запросов скопируйте общий пример инструкции CREATE MINING MODEL в пустое окно запроса.  
  
2.  Вместо  
  
    ```  
    [mining model name]   
    ```  
  
     на:  
  
    ```  
    [Forecasting_MIXED]  
    ```  
  
3.  Вместо  
  
    ```  
    <key columns>  
    ```  
  
     на:  
  
    ```  
    [Reporting Date] DATE KEY TIME,  
    [Model Region] TEXT KEY  
    ```  
  
     Ключевое слово `TIME KEY` указывает на то, что столбец ReportingDate содержит значения временных этапов, используемые для определения порядка следования значений. Временными этапами могут быть даты и значения времени, целые числа или любой другой тип упорядоченных данных при условии, что значения уникальны, а данные отсортированы.  
  
     Ключевые слова `TEXT` и `KEY` указывают на то, что столбец ModelRegion содержит дополнительный ключ ряда. Допускается использование только одного ключа ряда, при этом значения в столбце должны отличаться друг от друга.  
  
4.  Вместо  
  
    ```  
    < predictable attribute columns> )  
    ```  
  
     на:  
  
    ```  
    [Quantity] LONG CONTINUOUS PREDICT,  
    [Amount] DOUBLE CONTINUOUS PREDICT  
    )  
    ```  
  
5.  Вместо  
  
    ```  
    USING <algorithm name>([parameter list])  
    WITH DRILLTHROUGH  
    ```  
  
     на:  
  
    ```  
    USING Microsoft_Time_Series(AUTO_DETECT_PERIODICITY = 0.8, FORECAST_METHOD = 'MIXED')  
    WITH DRILLTHROUGH  
    ```  
  
     Параметр алгоритма `AUTO_DETECT_PERIODICITY` = 0,8 указывает на то, что алгоритм должен обнаруживать циклы в данных. Установка значения, близкого к 1, позволяет обнаружить множество шаблонов, но может замедлить процесс обработки.  
  
     Параметр алгоритма `FORECAST_METHOD` задает алгоритм анализа данных ARTXP или ARIMA или сочетание обоих алгоритмов.  
  
     Ключевое слово `WITH DRILLTHROUGH` обеспечивает возможность просмотра подробной статистики в исходных данных после завершения создания модели. Добавьте это предложение в том случае, если нужно просматривать модель с помощью средства просмотра временных рядов (Майкрософт). Для создания прогноза оно не требуется.  
  
     Полная инструкция теперь должна выглядеть следующим образом.  
  
    ```  
    CREATE MINING MODEL [Forecasting_MIXED]  
         (  
        [Reporting Date] DATE KEY TIME,  
        [Model Region] TEXT KEY,  
        [Quantity] LONG CONTINUOUS PREDICT,  
        [Amount] DOUBLE CONTINUOUS PREDICT  
        )  
    USING Microsoft_Time_Series (AUTO_DETECT_PERIODICITY = 0.8, FORECAST_METHOD = 'MIXED')  
    WITH DRILLTHROUGH  
  
    ```  
  
6.  В меню **Файл** щелкните **Сохранить DMXQuery1.dmx как**.  
  
7.  В диалоговом окне **Сохранить как** перейдите в соответствующую папку и присвойте файлу имя `Forecasting_MIXED.dmx` .  
  
## <a name="executing-the-query"></a>Выполнение запроса  
 На последнем шаге нужно выполнить запрос. Создав и сохранив запрос, его необходимо выполнить, чтобы сформировать модель интеллектуального анализа данных и соответствующую структуру на сервере. Дополнительные сведения о выполнении запросов в редакторе запросов см. в разделе [ядро СУБД редактор запросов &#40;SQL Server Management Studio&#41;](../relational-databases/scripting/database-engine-query-editor-sql-server-management-studio.md).  
  
#### <a name="to-execute-the-query"></a>Порядок выполнения запроса  
  
-   На панели инструментов редактора запросов нажмите кнопку **выполнить**.  
  
     Состояние запроса отображается на вкладке **сообщения** в нижней части редактора запросов после завершения выполнения инструкции. Сообщение должно выглядеть следующим образом:  
  
    ```  
    Executing the query   
    Execution complete  
    ```  
  
     На сервере теперь существует новая структура с именем **Forecasting_MIXED_Structure** , а также связанная с ней модель интеллектуального анализа данных **Forecasting_MIXED**.  
  
 На следующем занятии модель интеллектуального анализа данных будет добавлена в только что созданную структуру **Forecasting_MIXEDного** интеллектуального анализа данных.  
  
## <a name="next-lesson"></a>Следующее занятие  
 [Урок 2. Добавление моделей в структуру интеллектуального анализа данных на основе временных рядов](../../2014/tutorials/lesson-2-adding-mining-models-to-the-time-series-mining-structure.md)  
  
## <a name="see-also"></a>См. также  
 [Содержимое модели интеллектуального анализа данных для моделей временных рядов &#40;Analysis Services-интеллектуальный анализ данных&#41;](../../2014/analysis-services/data-mining/mining-model-content-for-time-series-models-analysis-services-data-mining.md)   
 [Microsoft Time Series Algorithm Technical Reference](../../2014/analysis-services/data-mining/microsoft-time-series-algorithm-technical-reference.md)  
  
  
