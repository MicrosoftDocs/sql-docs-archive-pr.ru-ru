---
title: Основные сведения о требованиях к модели временных рядов (учебник по интеллектуальному анализу данных — средний уровень) | Документация Майкрософт
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: 1ce2b3e3-108a-4f7e-985f-a20b816d0da7
author: minewiskan
ms.author: owend
manager: kfile
ms.openlocfilehash: cf92effaabb38a93a294bdf194025a524ad601f3
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87654641"
---
# <a name="understanding-the-requirements-for-a-time-series-model-intermediate-data-mining-tutorial"></a><span data-ttu-id="60d03-102">Основные сведения о требованиях для модели временных рядов (учебник по интеллектуальному анализу данных — средний уровень)</span><span class="sxs-lookup"><span data-stu-id="60d03-102">Understanding the Requirements for a Time Series Model (Intermediate Data Mining Tutorial)</span></span>
  <span data-ttu-id="60d03-103">Данные для модели прогнозирования при подготовке должны содержать один столбец, который может быть использован для идентификации этапов временных рядов.</span><span class="sxs-lookup"><span data-stu-id="60d03-103">When you are preparing data for use in a forecasting model, you must ensure that your data contains a column that can be used to identify the steps in the time series.</span></span> <span data-ttu-id="60d03-104">Этот столбец будет обозначаться `Key Time`.</span><span class="sxs-lookup"><span data-stu-id="60d03-104">That column will be designated as the `Key Time` column.</span></span> <span data-ttu-id="60d03-105">Этот столбец является ключом и должен содержать уникальные числовые значения.</span><span class="sxs-lookup"><span data-stu-id="60d03-105">Because it is a key, the column must contain unique numeric values.</span></span>  
  
 <span data-ttu-id="60d03-106">Правильный выбор единицы для столбца `Key Time` является важной частью анализа.</span><span class="sxs-lookup"><span data-stu-id="60d03-106">Choosing the right unit for the `Key Time` column is an important part of analysis.</span></span> <span data-ttu-id="60d03-107">Например, пусть данные о продажах обновляются каждую минуту.</span><span class="sxs-lookup"><span data-stu-id="60d03-107">For example, suppose your sales data is refreshed on a minute by minute basis.</span></span> <span data-ttu-id="60d03-108">В качестве единицы временного ряда не обязательно использовать минуты. Более разумно будет сводить данные о продажах по дням, неделям или месяцам.</span><span class="sxs-lookup"><span data-stu-id="60d03-108">You would not necessarily use minutes as the unit for the time series; you might find it more meaningful to roll up sales data by the day, week, or even month.</span></span> <span data-ttu-id="60d03-109">Если непонятно, какую единицу времени следует использовать, можно создать новое представление источника данных для каждого статистического выражения и построить связанные модели, чтобы посмотреть, не появляются ли разные тренды на каждом уровне статистической обработки.</span><span class="sxs-lookup"><span data-stu-id="60d03-109">If you are unsure which unit of time to use, you can create a new data source view for each aggregation, and build related models, to see if different trends emerge at each level of aggregation.</span></span>  
  
 <span data-ttu-id="60d03-110">В этом учебнике данные о продажах собираются ежедневно и заносятся в транзакционную базу данных продаж, но для интеллектуального анализа данные заранее объединены по месяцам с использованием представления.</span><span class="sxs-lookup"><span data-stu-id="60d03-110">For this tutorial, sales data is collected on a daily basis in the transactional sales database, but for data mining, the data has been pre-aggregated by the month, using a view.</span></span>  
  
 <span data-ttu-id="60d03-111">Кроме того, для анализа желательно, чтобы в данных было как можно меньше промежутков.</span><span class="sxs-lookup"><span data-stu-id="60d03-111">Additionally, it is desirable for analysis that the data have as few gaps as possible.</span></span> <span data-ttu-id="60d03-112">Если планируется анализ нескольких рядов данных, то желательно, чтобы все ряды начинались с одной даты и заканчивались одной датой.</span><span class="sxs-lookup"><span data-stu-id="60d03-112">If you plan to analyze multiple series of data, all series should preferably start and end on the same date.</span></span> <span data-ttu-id="60d03-113">Если в данных имеются промежутки (кроме как в начале и в конце ряда), то для заполнения ряда можно использовать параметр MISSING_VALUE_SUBSTITUTION.</span><span class="sxs-lookup"><span data-stu-id="60d03-113">If the data has gaps, but the gaps are not at the beginning or end of a series, you can use the MISSING_VALUE_SUBSTITUTION parameter to fill in the series.</span></span> <span data-ttu-id="60d03-114">Службы [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] также предоставляют несколько возможностей замены отсутствующих данных средними значениями или константами.</span><span class="sxs-lookup"><span data-stu-id="60d03-114">[!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] also provides several options for replacing missing data with values, such as using means or constants.</span></span>  
  
> [!WARNING]  
>  <span data-ttu-id="60d03-115">Сводная диаграмма и сводная таблица, входившие в предыдущие версии конструктора представлений источников данных, больше не предоставляются.</span><span class="sxs-lookup"><span data-stu-id="60d03-115">The PivotChart and PivotTable tools that were included in earlier versions of the data source view designer are no longer provided.</span></span> <span data-ttu-id="60d03-116">Рекомендуется заранее выявить промежутки в данных временных рядов, используя профилировщик данных, входящий в состав служб [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)], и другие средства.</span><span class="sxs-lookup"><span data-stu-id="60d03-116">We recommend that you identify gaps in time series data beforehand, by using tools such as the Data Profiler included in [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)].</span></span>  
  
### <a name="to-identify-the-time-key-for-the-forecasting-model"></a><span data-ttu-id="60d03-117">Идентификация ключа времени для модели прогнозирования</span><span class="sxs-lookup"><span data-stu-id="60d03-117">To identify the time key for the forecasting model</span></span>  
  
1.  <span data-ttu-id="60d03-118">В области **SalesByRegion. DSV [Design]** щелкните правой кнопкой мыши таблицу vTimeSeries и выберите **Просмотр данных**.</span><span class="sxs-lookup"><span data-stu-id="60d03-118">In the pane, **SalesByRegion.dsv [Design]**, right-click the table vTimeSeries, and then select **Explore Data**.</span></span>  
  
     <span data-ttu-id="60d03-119">Откроется новая вкладка с именем **исследовать VTimeSeries Table**.</span><span class="sxs-lookup"><span data-stu-id="60d03-119">A new tab opens, titled **Explore vTimeSeries Table**.</span></span>  
  
2.  <span data-ttu-id="60d03-120">На вкладке **Таблица** проверьте данные, которые используются в столбцах Тимеиндекс и Reporting Date.</span><span class="sxs-lookup"><span data-stu-id="60d03-120">On the **Table** tab, review the data that is used in the TimeIndex and Reporting Date columns.</span></span>  
  
     <span data-ttu-id="60d03-121">Оба столбца представляют собой последовательности уникальных значений. Любой из них может служить ключом временного ряда, однако типы данных в этих столбцах различаются.</span><span class="sxs-lookup"><span data-stu-id="60d03-121">Both are sequences with unique values and can both be used as the time series key; however, the data types of the columns are different.</span></span> <span data-ttu-id="60d03-122">Алгоритм временных рядов (Майкрософт) не требует наличия типа данных `datetime`, необходимо только, чтобы значения были отличающимися и упорядоченными.</span><span class="sxs-lookup"><span data-stu-id="60d03-122">The Microsoft Time Series algorithm does not require a `datetime` data type, only that the values be distinct and ordered.</span></span> <span data-ttu-id="60d03-123">Поэтому в качестве ключа времени для модели прогнозирования может быть использован любой столбец.</span><span class="sxs-lookup"><span data-stu-id="60d03-123">Therefore, either column can be used as the time key for the forecasting model.</span></span>  
  
3.  <span data-ttu-id="60d03-124">В области конструктора представления источников данных выберите столбец, отчет Дата и щелкните **Свойства**.</span><span class="sxs-lookup"><span data-stu-id="60d03-124">In the data source view design surface, select the column, Reporting Date and select **Properties**.</span></span> <span data-ttu-id="60d03-125">Затем щелкните столбец Тимеиндекс и выберите **Свойства**.</span><span class="sxs-lookup"><span data-stu-id="60d03-125">Next, click the column TimeIndex and select **Properties**.</span></span>  
  
     <span data-ttu-id="60d03-126">Поле Тимеиндекс имеет тип данных System. Int32, тогда как поле Дата отчета содержит тип данных System. DateTime.</span><span class="sxs-lookup"><span data-stu-id="60d03-126">The field TimeIndex has the data type System.Int32, whereas the field Reporting Date has the data type System.DateTime.</span></span> <span data-ttu-id="60d03-127">Во многих хранилищах данных значения даты и времени преобразуются в целые числа, и целочисленный столбец служит ключом, что повышает производительность индексирования.</span><span class="sxs-lookup"><span data-stu-id="60d03-127">Many data warehouses convert date/time values to integers and use the integer column as the key, to improve indexing performance.</span></span> <span data-ttu-id="60d03-128">Однако если использовать такой столбец, то алгоритм временных рядов (Майкрософт) будет составлять прогнозы, используя значения из будущего: 201014, 201014 и т. д.</span><span class="sxs-lookup"><span data-stu-id="60d03-128">However, if you use this column, the Microsoft Time Series algorithm will make predictions using future values such as 201014, 201014, and so forth.</span></span> <span data-ttu-id="60d03-129">Так как вы хотите представить прогноз данных о продажах с помощью календарных дат, в качестве идентификатора уникального ряда будет использоваться столбец Reporting Date.</span><span class="sxs-lookup"><span data-stu-id="60d03-129">Because you want to represent your sales data forecast by using calendar dates, you will use the Reporting Date column as the unique series identifier.</span></span>  
  
### <a name="to-set-the-key-in-the-data-source-view"></a><span data-ttu-id="60d03-130">Задание ключа в представлении источников данных</span><span class="sxs-lookup"><span data-stu-id="60d03-130">To set the key in the data source view</span></span>  
  
1.  <span data-ttu-id="60d03-131">В области **SalesByRegion. dsv**выберите таблицу vTimeSeries.</span><span class="sxs-lookup"><span data-stu-id="60d03-131">In the pane **SalesByRegion.dsv**, select the vTimeSeries table.</span></span>  
  
2.  <span data-ttu-id="60d03-132">Щелкните правой кнопкой мыши столбец Дата отчета и выберите пункт **задать логический первичный ключ**.</span><span class="sxs-lookup"><span data-stu-id="60d03-132">Right-click the column, Reporting Date, and select **Set Logical Primary Key**.</span></span>  
  
## <a name="handling-missing-data-optional"></a><span data-ttu-id="60d03-133">Обработка отсутствующих данных (необязательно)</span><span class="sxs-lookup"><span data-stu-id="60d03-133">Handling Missing Data (Optional)</span></span>  
 <span data-ttu-id="60d03-134">Если в каком-либо ряду имеются отсутствующие данные, то при попытке обработать модель может быть выдана ошибка.</span><span class="sxs-lookup"><span data-stu-id="60d03-134">If any series has missing data, you might get an error when you try to process the model.</span></span> <span data-ttu-id="60d03-135">Устранить эту проблему можно несколькими способами.</span><span class="sxs-lookup"><span data-stu-id="60d03-135">You have several ways to work around missing data:</span></span>  
  
-   <span data-ttu-id="60d03-136">Службы Analysis Services могут заполнить отсутствующее значение вычисленным средним или предыдущим значением.</span><span class="sxs-lookup"><span data-stu-id="60d03-136">You can have Analysis Services fill in missing values, either by calculating a mean, or by using a previous value.</span></span> <span data-ttu-id="60d03-137">Для этого необходимо задать параметр MISSING_VALUE_SUBSTITUTION при создании модели интеллектуального анализа данных.</span><span class="sxs-lookup"><span data-stu-id="60d03-137">You do this by setting the MISSING_VALUE_SUBSTITUTION parameter on the mining model.</span></span> <span data-ttu-id="60d03-138">Дополнительные сведения об этом параметре см. в [статье Технический справочник по алгоритму временных рядов (Майкрософт](../../2014/analysis-services/data-mining/microsoft-time-series-algorithm-technical-reference.md)).</span><span class="sxs-lookup"><span data-stu-id="60d03-138">For more information about this parameter, see [Microsoft Time Series Algorithm Technical Reference](../../2014/analysis-services/data-mining/microsoft-time-series-algorithm-technical-reference.md).</span></span> <span data-ttu-id="60d03-139">Сведения о том, как изменить параметры существующей модели интеллектуального анализа данных, см. в разделе [Просмотр или изменение параметров алгоритма](../../2014/analysis-services/data-mining/view-or-change-algorithm-parameters.md).</span><span class="sxs-lookup"><span data-stu-id="60d03-139">For information about how to change parameters on an existing mining model, see [View or Change Algorithm Parameters](../../2014/analysis-services/data-mining/view-or-change-algorithm-parameters.md).</span></span>  
  
-   <span data-ttu-id="60d03-140">Можно изменить источник данных или отфильтровать базовое представление, чтобы устранить неоднородность ряда или заменить значения.</span><span class="sxs-lookup"><span data-stu-id="60d03-140">You can alter the data source or filter the underlying view to eliminate ragged series or to replace values.</span></span> <span data-ttu-id="60d03-141">Это можно сделать в реляционном источнике данных. Также можно изменить представление источников данных, создавая пользовательские именованные запросы или именованные вычисления.</span><span class="sxs-lookup"><span data-stu-id="60d03-141">You can do this in the relational data source, or you can modify the data source view by creating custom named queries or named calculations.</span></span> <span data-ttu-id="60d03-142">Дополнительные сведения см. в разделе [Представления источников данных в многомерных моделях](https://docs.microsoft.com/analysis-services/multidimensional-models/data-source-views-in-multidimensional-models).</span><span class="sxs-lookup"><span data-stu-id="60d03-142">For more information, see [Data Source Views in Multidimensional Models](https://docs.microsoft.com/analysis-services/multidimensional-models/data-source-views-in-multidimensional-models).</span></span> <span data-ttu-id="60d03-143">Последняя задача этого занятия представляет пример того, как построить именованный запрос и пользовательское вычисление.</span><span class="sxs-lookup"><span data-stu-id="60d03-143">A later task in this lesson provides an example of how to build both a named query and a custom calculation.</span></span>  
  
 <span data-ttu-id="60d03-144">В этом сценарии некоторые данные отсутствуют в начале одного ряда: т. е. нет данных для линейки продуктов T1000 до 2007 июля.</span><span class="sxs-lookup"><span data-stu-id="60d03-144">For this scenario, some data is missing at the beginning of one series: that is, there is no data for the T1000 product line until July 2007.</span></span> <span data-ttu-id="60d03-145">Все ряды заканчиваются в одну дату, и других отсутствующих значений нет.</span><span class="sxs-lookup"><span data-stu-id="60d03-145">Otherwise, all series end on the same date, and there are no missing values.</span></span>  
  
 <span data-ttu-id="60d03-146">Требование алгоритма временных рядов (Майкрософт) состоит в том, что все ряды, включенные в одну модель, должны иметь одну и ту же **конечную** точку.</span><span class="sxs-lookup"><span data-stu-id="60d03-146">The requirement of the Microsoft Time Series algorithm is that any series that you include in a single model should have the same **ending** point.</span></span> <span data-ttu-id="60d03-147">Поскольку модель велосипеда T1000 появилась в 2007 г., данные для этого ряда начинаются позже, чем для других моделей велосипедов, но ряд заканчивается на ту же дату, поэтому данные являются приемлемыми.</span><span class="sxs-lookup"><span data-stu-id="60d03-147">Because the T1000 bicycle model was introduced in 2007, the data for this series starts later than for other bicycle models, but the series ends on the same date; therefore the data is usable.</span></span>  
  
#### <a name="to-close-the-data-source-view-designer"></a><span data-ttu-id="60d03-148">Закрытие конструктора представлений источников данных</span><span class="sxs-lookup"><span data-stu-id="60d03-148">To close the data source view designer</span></span>  
  
-   <span data-ttu-id="60d03-149">Щелкните правой кнопкой мыши вкладку, **Просмотрите таблицу vTimeSeries**и выберите **Закрыть**.</span><span class="sxs-lookup"><span data-stu-id="60d03-149">Right-click the tab, **Explore vTimeSeries Table**, and select **Close**.</span></span>  
  
## <a name="next-task-in-lesson"></a><span data-ttu-id="60d03-150">Следующая задача занятия</span><span class="sxs-lookup"><span data-stu-id="60d03-150">Next Task in Lesson</span></span>  
 [<span data-ttu-id="60d03-151">Руководство по созданию структуры прогнозирования и модели &#40;промежуточного интеллектуального анализа данных&#41;</span><span class="sxs-lookup"><span data-stu-id="60d03-151">Creating a Forecasting Structure and Model &#40;Intermediate Data Mining Tutorial&#41;</span></span>](../../2014/tutorials/creating-a-forecasting-structure-and-model-intermediate-data-mining-tutorial.md)  
  
## <a name="see-also"></a><span data-ttu-id="60d03-152">См. также:</span><span class="sxs-lookup"><span data-stu-id="60d03-152">See Also</span></span>  
 [<span data-ttu-id="60d03-153">Алгоритм временных рядов (Майкрософт)</span><span class="sxs-lookup"><span data-stu-id="60d03-153">Microsoft Time Series Algorithm</span></span>](../../2014/analysis-services/data-mining/microsoft-time-series-algorithm.md)  
  
  
