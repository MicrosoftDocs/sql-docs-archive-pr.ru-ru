---
title: Управление полнотекстовыми индексами | Документация Майкрософт
ms.custom: ''
ms.date: 03/08/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: search
ms.topic: conceptual
ms.assetid: 28ff17dc-172b-4ac4-853f-990b5dc02fd1
author: rothja
ms.author: jroth
ms.openlocfilehash: 92eb3669930407b359b8eeed4d3df2e802bdacdf
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87669037"
---
# <a name="manage-full-text-indexes"></a>Управление полнотекстовыми индексами
     
##  <a name="viewing-and-changing-the-properties-of-a-full-text-index"></a><a name="view"></a>Просмотр и изменение свойств полнотекстового индекса  
  
#### <a name="to-view-or-change-the-properties-of-a-full-text-index-in-management-studio"></a>Просмотр или изменение свойств полнотекстового индекса в среде Management Studio  
  
1.  В обозревателе объектов разверните узел сервера.  
  
2.  Разверните узел **Базы данных**, а затем базу данных, которая содержит полнотекстовый индекс.  
  
3.  Раскройте узел **Таблицы**.  
  
4.  Правой кнопкой мыши щелкните таблицу, в которой определен полнотекстовый индекс, выберите **Полнотекстовый индекс**, затем в контекстном меню **Полнотекстовый индекс** выберите **Свойства**. Откроется диалоговое окно **Свойства полнотекстового индекса** .  
  
5.  На панели **Выбор страницы** можно выбрать любую из приведенных ниже страниц.  
  
    |Страница|Описание|  
    |----------|-----------------|  
    |**Общие сведения**|Отображаются основные свойства полнотекстового индекса. Сюда относятся несколько изменяемых свойств и несколько неизменяемых, например имя базы данных, имя таблицы и имя полнотекстового ключевого столбца. Изменяемыми являются следующие свойства.<br /><br /> **Список стоп-слов полнотекстового индекса**.<br /><br /> **Полнотекстовое индексирование включено**.<br /><br /> **Отслеживание изменений**<br /><br /> **Поиск в списке свойств**.<br /><br /> <br /><br /> Дополнительные сведения см. в статье [Свойства полнотекстового индекса (страница "Общие")](full-text-index-properties-general-page.md).|  
    |**Столбцы**|Отображаются столбцы таблицы, доступные для полнотекстового индексирования. Выбранные столбцы включаются в полнотекстовый индекс. Можно выбрать столько доступных столбцов, сколько нужно включить в полнотекстовый индекс. Дополнительные сведения см. в статье [Свойства полнотекстового индекса (страница "Столбцы")](../../2014/database-engine/full-text-index-properties-columns-page.md).|  
    |**Расписания**|Эта страница используется для создания расписаний задания агента SQL Server, которое запускает добавочное заполнение таблицы для заполнения полнотекстового индекса или для управления такими расписаниями. Дополнительные сведения см. в разделе [Заполнение полнотекстовых индексов](../relational-databases/indexes/indexes.md).<br /><br /> <strong> \* \* Важно \* ! \* </strong> после выхода из диалогового окна **Свойства полнотекстового индекса** все вновь созданные расписания связываются с заданием агент SQL Server (запуск добавочного заполнения таблицы для *database_name*.* table_name*).|  
  
6.  [!INCLUDE[clickOK](../includes/clickok-md.md)], чтобы сохранить изменения и выйти из диалогового окна **Свойства полнотекстового индекса**.  
  
##  <a name="viewing-the-properties-of-indexed-tables-and-columns"></a><a name="props"></a>Просмотр свойств индексированных таблиц и столбцов  
 Могут использоваться некоторые функции [!INCLUDE[tsql](../includes/tsql-md.md)], такие как OBJECTPROPERTYEX, для получения значений различных свойств полнотекстового индексирования. Эти сведения полезны для администрирования и устранения нарушений в работе средств полнотекстового поиска.  
  
 В следующей таблице перечислены свойства полнотекстового поиска, связанные с индексированными таблицами и столбцами, и относящиеся к ним функции [!INCLUDE[tsql](../includes/tsql-md.md)].  
  
|Свойство|Описание|Компонент|  
|--------------|-----------------|--------------|  
|`FullTextTypeColumn`|TYPE COLUMN в таблице, которая содержит информацию о типе документа столбца.|[COLUMNPROPERTY](/sql/t-sql/functions/columnproperty-transact-sql)|  
|`IsFulltextIndexed`|Указывает, включено ли в столбце полнотекстовое индексирование.|COLUMNPROPERTY|  
|`IsFulltextKey`|Указывает, является ли индекс полнотекстовым ключом таблицы.|[INDEXPROPERTY](/sql/t-sql/functions/indexproperty-transact-sql)|  
|**TableFulltextBackgroundUpdateIndexOn**|Указывает, имеется ли в таблице фоновое полнотекстовое индексирование обновлений.|[OBJECTPROPERTYEX](/sql/t-sql/functions/objectproperty-transact-sql)|  
|`TableFulltextCatalogId`|Идентификатор полнотекстового каталога, где находятся данные полнотекстового индекса таблицы.|OBJECTPROPERTYEX|  
|`TableFulltextChangeTrackingOn`|Указывает, включено ли в таблице полнотекстовое отслеживание изменений.|OBJECTPROPERTYEX|  
|`TableFulltextDocsProcessed`|Количество строк, обработанных с начала полнотекстового индексирования.|OBJECTPROPERTYEX|  
|**TableFulltextFailCount**|Количество строк, для которых полнотекстовый поиск не выявил индекса.|OBJECTPROPERTYEX|  
|**TableFulltextItemCount**|Количество строк, для которых было успешно выполнено полнотекстовое индексирование.|OBJECTPROPERTYEX|  
|`TableFulltextKeyColumn`|Идентификатор столбца полнотекстового уникального ключевого столбца.|OBJECTPROPERTYEX|  
|`TableFullTextMergeStatus`|Определяет, участвует ли в настоящий момент полнотекстовый индекс для таблицы в процессе слияния.|OBJECTPROPERTYEX|  
|**TableFulltextPendingChanges**|Количество ожидающих отслеженных изменений к обработке.|OBJECTPROPERTYEX|  
|`TableFulltextPopulateStatus`|Указывает состояние заполнения полнотекстовой таблицы.|OBJECTPROPERTYEX|  
|`TableHasActiveFulltextIndex`|Указывает, содержит ли таблица активный полнотекстовый индекс.|OBJECTPROPERTYEX|  
  
##  <a name="getting-information-about-the-full-text-key-column"></a><a name="key"></a>Получение сведений о полнотекстовом ключевом столбце  
 Обычно результат функций, возвращающих наборы строк CONTAINSTABLE или FREETEXTTABLE, необходимо соединить с базовой таблицей. В таких случаях необходимо знать уникальное имя ключевого столбца. Можно уточнить, используется ли данный уникальный индекс как полнотекстовый ключ, а также получить идентификатор полнотекстового ключевого столбца.  
  
#### <a name="to-inquire-whether-a-given-unique-index-is-used-as-the-full-text-key-column"></a>Проверка использования данного уникального индекса в качестве полнотекстового ключевого столбца  
  
1.  Вызовите функцию [INDEXPROPERTY](/sql/t-sql/queries/select-transact-sql) с помощью инструкции [SELECT](/sql/t-sql/functions/indexproperty-transact-sql) . В вызове функции используйте функцию OBJECT_ID для преобразования имени таблицы (*table_name*) в идентификатор таблицы, укажите имя уникального индекса для таблицы и укажите `IsFulltextKey` свойство Index следующим образом:  
  
    ```  
    SELECT INDEXPROPERTY( OBJECT_ID('table_name'), 'index_name',  'IsFulltextKey' );  
    ```  
  
     Если индекс принудительно обеспечивает уникальность столбца полнотекстового ключа, будет возвращено значение 1, в противном случае запрос возвратит 0.  
  
 **Пример**  
  
 Следующий пример уточняет, используется ли индекс `PK_Document_DocumentID` для обеспечения уникальности столбца полнотекстового ключа:  
  
```  
USE AdventureWorks  
GO  
SELECT INDEXPROPERTY ( OBJECT_ID('Production.Document'), 'PK_Document_DocumentID',  'IsFulltextKey' )  
```  
  
 Если индекс `PK_Document_DocumentID` используется для обеспечения уникальности столбца полнотекстового ключа, будет возвращено значение 1. В противном случае возвращается значение 0 или NULL. NULL означает, что используется недопустимое имя индекса, имя индекса не соответствует таблице, таблица не существует и пр.  
  
#### <a name="to-find-the-identifier-of-the-full-text-key-column"></a>Поиск идентификатора столбца полнотекстового ключа  
  
1.  Каждая таблица, поддерживающая полнотекстовый поиск, имеет столбец, который обеспечивает принудительное применение уникальных строк в таблице (*уникальный**ключевой столбец*). Свойство `TableFulltextKeyColumn`, возвращаемое функцией OBJECTPROPERTYEX, содержит идентификатор уникального ключевого столбца.  
  
     Для получения идентификатора можно вызвать функцию OBJECTPROPERTYEX с помощью инструкции SELECT. Используйте функцию OBJECT_ID для преобразования имени таблицы (*table_name*) в идентификатор таблицы и указания `TableFulltextKeyColumn` свойства следующим образом:  
  
    ```  
    SELECT OBJECTPROPERTYEX(OBJECT_ID( 'table_name'), 'TableFulltextKeyColumn' ) AS 'Column Identifier';  
    ```  
  
 **Примеры**  
  
 В следующем примере возвращается идентификатор столбца полнотекстового ключа или значение NULL. NULL означает, что используется недопустимое имя индекса, имя индекса не соответствует таблице, таблица не существует и пр.  
  
```  
USE AdventureWorks;  
GO  
SELECT OBJECTPROPERTYEX(OBJECT_ID('Production.Document'), 'TableFulltextKeyColumn');  
GO  
```  
  
 Следующий пример показывает, как использовать идентификатор уникального ключевого столбца для получения имени столбца.  
  
```  
USE AdventureWorks;  
GO  
DECLARE @key_column sysname  
SET @key_column = Col_Name(Object_Id('Production.Document'),  
ObjectProperty(Object_id('Production.Document'),  
'TableFulltextKeyColumn')   
)  
SELECT @key_column AS 'Unique Key Column';  
GO  
```  
  
 В этом примере возвращается столбец результирующего набора с именем `Unique Key Column`, в котором отображается одна строка с именем уникального ключевого столбца таблицы Document, DocumentID. Обратите внимание, что если этот запрос содержал недопустимое имя индекса, имя индекса не соответствует таблице, таблица не существует и пр., то будет возвращено значение NULL.  
  
##  <a name="disabling-or-re-enabling-a-table-for-full-text-indexing"></a><a name="disable"></a>Отключение или повторное включение таблицы для полнотекстового индексирования  
 В [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)]во всех созданных пользователями базах данных полнотекстовый поиск включен по умолчанию. Кроме того, отдельная таблица автоматически включается для полнотекстового индексирования, как только для нее создается полнотекстовый индекс, и в этот индекс добавляется столбец. Таблица автоматически выключается для полнотекстового индексирования, как только из ее полнотекстового индекса удаляется последний столбец.  
  
 В таблице с полнотекстовым индексом можно вручную отключить и повторно включить полнотекстовое индексирование, используя среду [!INCLUDE[ssManStudioFull](../includes/ssmanstudiofull-md.md)].  
  
#### <a name="to-enable-a-table-for-full-text-indexing"></a>Включение полнотекстового индексирования для таблицы  
  
1.  Разверните группу серверов, узел **Базы данных**и базу данных, содержащую таблицу, для которой нужно включить полнотекстовое индексирование.  
  
2.  Разверните узел **Таблицы**и щелкните правой кнопкой мыши таблицу, которую нужно отключить или повторно включить для полнотекстового индексирования.  
  
3.  Выберите **Полнотекстовый индекс**и щелкните **Отключить полнотекстовое индексирование** или **Включить полнотекстовое индексирование**.  
  
##  <a name="removing-a-full-text-index-from-a-table"></a><a name="remove"></a>Удаление полнотекстового индекса из таблицы  
  
#### <a name="to-remove-a-full-text-index-from-a-table"></a>Удаление полнотекстового индекса из таблицы  
  
1.  В обозревателе объектов щелкните правой кнопкой мыши таблицу, содержащую полнотекстовый индекс, который необходимо удалить.  
  
2.  Выберите **Удалить полнотекстовый индекс**.  
  
3.  В окне для подтверждения удаления полнотекстового индекса нажмите кнопку **ОК** .  
  
  
