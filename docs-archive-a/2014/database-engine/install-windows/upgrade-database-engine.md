---
title: Обновление ядра СУБД | Документы Майкрософт
ms.custom: ''
ms.date: 10/26/2015
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: install
ms.topic: conceptual
helpviewer_keywords:
- compatibility [SQL Server], databases
- compatibility levels [SQL Server], after upgrade
- Database Engine [SQL Server], upgrading
ms.assetid: 3c036813-36cf-4415-a0c9-248d0a433859
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: ed13712678ab599e55b539d6226142b686106fe5
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87657875"
---
# <a name="upgrade-database-engine"></a><span data-ttu-id="6a5a8-102">Обновление [компонент ядра СУБД]</span><span class="sxs-lookup"><span data-stu-id="6a5a8-102">Upgrade Database Engine</span></span>
  <span data-ttu-id="6a5a8-103">В данном разделе содержатся сведения, которые понадобятся для понимания процесса обновления при подготовке к нему. Он состоит из следующих подразделов.</span><span class="sxs-lookup"><span data-stu-id="6a5a8-103">This topic provides the information that you will need to prepare for and understand the upgrade process; it covers:</span></span>  
  
-   <span data-ttu-id="6a5a8-104">Известные проблемы, связанные с обновлением.</span><span class="sxs-lookup"><span data-stu-id="6a5a8-104">Known upgrade issues.</span></span>  
  
-   <span data-ttu-id="6a5a8-105">Задачи и вопросы, предшествующие обновлению.</span><span class="sxs-lookup"><span data-stu-id="6a5a8-105">Pre-upgrade tasks and considerations.</span></span>  
  
-   <span data-ttu-id="6a5a8-106">Ссылки на методические разделы по обновлению компонента [!INCLUDE[ssDE](../../includes/ssde-md.md)].</span><span class="sxs-lookup"><span data-stu-id="6a5a8-106">Links to procedural topics for upgrading the [!INCLUDE[ssDE](../../includes/ssde-md.md)].</span></span>  
  
-   <span data-ttu-id="6a5a8-107">Ссылки на методические разделы по миграции баз данных в [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="6a5a8-107">Links to procedural topics for migrating databases to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>  
  
-   <span data-ttu-id="6a5a8-108">Вопросы, касающиеся отказоустойчивых кластеров.</span><span class="sxs-lookup"><span data-stu-id="6a5a8-108">Considerations for failover clusters.</span></span>  
  
-   <span data-ttu-id="6a5a8-109">Задачи и вопросы, следующие за обновлением.</span><span class="sxs-lookup"><span data-stu-id="6a5a8-109">Post-upgrade tasks and considerations.</span></span>  
  
## <a name="known-upgrade-issues"></a><span data-ttu-id="6a5a8-110">Известные проблемы, связанные с обновлением</span><span class="sxs-lookup"><span data-stu-id="6a5a8-110">Known Upgrade issues</span></span>  
 <span data-ttu-id="6a5a8-111">Прежде чем приступать к обновлению компонента [!INCLUDE[ssDE](../../includes/ssde-md.md)], ознакомьтесь с разделом [SQL Server Database Engine Backward Compatibility](../sql-server-database-engine-backward-compatibility.md).</span><span class="sxs-lookup"><span data-stu-id="6a5a8-111">Before upgrading the [!INCLUDE[ssDE](../../includes/ssde-md.md)], review [SQL Server Database Engine Backward Compatibility](../sql-server-database-engine-backward-compatibility.md).</span></span> <span data-ttu-id="6a5a8-112">Дополнительные сведения о поддерживаемых сценариях обновления и известных проблемах обновления см. в разделе [Поддерживаемые обновления версий и выпусков](supported-version-and-edition-upgrades.md).</span><span class="sxs-lookup"><span data-stu-id="6a5a8-112">For information about supported upgrade scenarios and upgrade known issues, see [Supported Version and Edition Upgrades](supported-version-and-edition-upgrades.md).</span></span> <span data-ttu-id="6a5a8-113">Сведения об обратной совместимости других компонентов [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] см. в разделе [Backward Compatibility](../../getting-started/backward-compatibility.md).</span><span class="sxs-lookup"><span data-stu-id="6a5a8-113">For backward compatibility content for other [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] components, see [Backward Compatibility](../../getting-started/backward-compatibility.md).</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="6a5a8-114">Если обновление производится с одного выпуска [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] до другого, то сначала проверьте, поддерживаются ли в целевом выпуске все используемые функции.</span><span class="sxs-lookup"><span data-stu-id="6a5a8-114">Before you upgrade from one edition of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] to another, verify that the functionality that you are currently using is supported in the edition to which you are upgrading.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="6a5a8-115">При обновлении до [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] с предыдущей версии выпуска [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Enterprise выберите "Enterprise Edition: лицензирование по числу ядер" и "Enterprise Edition".</span><span class="sxs-lookup"><span data-stu-id="6a5a8-115">When you upgrade to [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] from a prior version of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Enterprise edition, choose between Enterprise Edition: Core-based Licensing and Enterprise Edition.</span></span> <span data-ttu-id="6a5a8-116">Эти выпуски Enterprise отличаются только режимом лицензирования.</span><span class="sxs-lookup"><span data-stu-id="6a5a8-116">These Enterprise editions differ only with respect to the licensing modes.</span></span> <span data-ttu-id="6a5a8-117">Дополнительные сведения см. в разделе [Compute Capacity Limits by Edition of SQL Server](../../sql-server/compute-capacity-limits-by-edition-of-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="6a5a8-117">For more information, see [Compute Capacity Limits by Edition of SQL Server](../../sql-server/compute-capacity-limits-by-edition-of-sql-server.md).</span></span>  
  
## <a name="pre-upgrade-checklist"></a><span data-ttu-id="6a5a8-118">Контрольный список действий перед обновлением</span><span class="sxs-lookup"><span data-stu-id="6a5a8-118">Pre-Upgrade Checklist</span></span>  
 <span data-ttu-id="6a5a8-119">Программа установки [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] поддерживает обновление предыдущей версии до [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="6a5a8-119">Upgrading [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] from an earlier version is supported by the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Setup program.</span></span> <span data-ttu-id="6a5a8-120">Есть также возможность выполнить миграцию баз данных из предыдущих версий [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="6a5a8-120">You can also migrate databases from previous [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] versions.</span></span> <span data-ttu-id="6a5a8-121">Миграция может быть произведена из одного экземпляра [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] в другой на том же компьютере или из экземпляра [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] на другой компьютер.</span><span class="sxs-lookup"><span data-stu-id="6a5a8-121">Migration can be from one [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance to another on the same computer, or from a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance on another computer.</span></span> <span data-ttu-id="6a5a8-122">Произвести ее можно следующими способами: при помощи мастера копирования баз данных, функций резервного копирования и восстановления, мастера импорта и экспорта служб [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)][!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)], а также при помощи массового экспорта и импорта.</span><span class="sxs-lookup"><span data-stu-id="6a5a8-122">Migration options include use of the Copy Database Wizard, Backup and restore functionality, use of the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)][!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] Import and Export Wizard, and bulk export/bulk import methods.</span></span>  
  
 <span data-ttu-id="6a5a8-123">Перед обновлением компонента [!INCLUDE[ssDE](../../includes/ssde-md.md)]просмотрите следующие источники:</span><span class="sxs-lookup"><span data-stu-id="6a5a8-123">Before upgrading the [!INCLUDE[ssDE](../../includes/ssde-md.md)], review the following:</span></span>  
  
-   <span data-ttu-id="6a5a8-124">Обратитесь к разделу [Hardware and Software Requirements for Installing SQL Server 2014](../../sql-server/install/hardware-and-software-requirements-for-installing-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="6a5a8-124">Review [Hardware and Software Requirements for Installing SQL Server 2014](../../sql-server/install/hardware-and-software-requirements-for-installing-sql-server.md).</span></span>  
  
-   <span data-ttu-id="6a5a8-125">Обратитесь к разделу [Check Parameters for the System Configuration Checker](check-parameters-for-the-system-configuration-checker.md).</span><span class="sxs-lookup"><span data-stu-id="6a5a8-125">Review [Check Parameters for the System Configuration Checker](check-parameters-for-the-system-configuration-checker.md).</span></span>  
  
-   <span data-ttu-id="6a5a8-126">Обратитесь к разделу [Security Considerations for a SQL Server Installation](../../sql-server/install/security-considerations-for-a-sql-server-installation.md).</span><span class="sxs-lookup"><span data-stu-id="6a5a8-126">Review [Security Considerations for a SQL Server Installation](../../sql-server/install/security-considerations-for-a-sql-server-installation.md).</span></span>  
  
-   <span data-ttu-id="6a5a8-127">Обратитесь к разделу [Поддерживаемые обновления версий и выпусков](supported-version-and-edition-upgrades.md).</span><span class="sxs-lookup"><span data-stu-id="6a5a8-127">Review [Supported Version and Edition Upgrades](supported-version-and-edition-upgrades.md).</span></span>  
  
-   <span data-ttu-id="6a5a8-128">Обратитесь к разделу [Использование помощника по обновлению для подготовки к обновлениям](../../sql-server/install/use-upgrade-advisor-to-prepare-for-upgrades.md).</span><span class="sxs-lookup"><span data-stu-id="6a5a8-128">Review [Use Upgrade Advisor to Prepare for Upgrades](../../sql-server/install/use-upgrade-advisor-to-prepare-for-upgrades.md).</span></span>  
  
-   <span data-ttu-id="6a5a8-129">Обратитесь к разделу [Использование программы распределенного воспроизведения для подготовки обновлений](../../sql-server/install/use-the-distributed-replay-utility-to-prepare-for-upgrades.md).</span><span class="sxs-lookup"><span data-stu-id="6a5a8-129">Review [Use the Distributed Replay Utility to Prepare for Upgrades](../../sql-server/install/use-the-distributed-replay-utility-to-prepare-for-upgrades.md).</span></span>  
  
-   <span data-ttu-id="6a5a8-130">Обратитесь к разделу [SQL Server Database Engine Backward Compatibility](../sql-server-database-engine-backward-compatibility.md).</span><span class="sxs-lookup"><span data-stu-id="6a5a8-130">Review [SQL Server Database Engine Backward Compatibility](../sql-server-database-engine-backward-compatibility.md).</span></span>  
  
-   <span data-ttu-id="6a5a8-131">Обратитесь к разделу [Перенос планов запросов](change-the-database-compatibility-mode-and-use-the-query-store.md).</span><span class="sxs-lookup"><span data-stu-id="6a5a8-131">Review [Migrate Query Plans](change-the-database-compatibility-mode-and-use-the-query-store.md).</span></span>  
  
 <span data-ttu-id="6a5a8-132">Прежде чем приступать к обновлению до [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], ознакомьтесь со следующими соображениями и сделайте соответствующие изменения.</span><span class="sxs-lookup"><span data-stu-id="6a5a8-132">Review the following issues and make changes before you upgrade [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]:</span></span>  
  
-   <span data-ttu-id="6a5a8-133">При обновлении экземпляров [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , для которых агент [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] обнаружил связи MSX/TSX, обновите целевые серверы перед обновлением главных серверов.</span><span class="sxs-lookup"><span data-stu-id="6a5a8-133">When upgrading instances of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] where [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent is enlisted in MSX/TSX relationships, upgrade target servers before you upgrade master servers.</span></span> <span data-ttu-id="6a5a8-134">Если обновить главные серверы раньше целевых серверов, агент [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] не сможет подключиться к главным экземплярам [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="6a5a8-134">If you upgrade master servers before target servers, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent will not be able to connect to master instances of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>  
  
-   <span data-ttu-id="6a5a8-135">При переходе с 64-разрядной версии [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] на 64-разрядную версию [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]службы [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] необходимо обновить до компонента [!INCLUDE[ssDE](../../includes/ssde-md.md)].</span><span class="sxs-lookup"><span data-stu-id="6a5a8-135">When upgrading from a 64-bit edition of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] to a 64-bit edition of [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], you must upgrade [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] before you upgrade the [!INCLUDE[ssDE](../../includes/ssde-md.md)].</span></span>  
  
-   <span data-ttu-id="6a5a8-136">Создайте резервные копии всех файлов баз данных [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] обновляемых экземпляров, чтобы при необходимости можно было восстановить их.</span><span class="sxs-lookup"><span data-stu-id="6a5a8-136">Back up all [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] database files from the instance to be upgraded, so that you can restore them, if it is required.</span></span>  
  
-   <span data-ttu-id="6a5a8-137">Выполните в обновляемых базах данных соответствующие команды DBCC, чтобы убедиться в том, что они находятся в согласованном состоянии.</span><span class="sxs-lookup"><span data-stu-id="6a5a8-137">Run the appropriate Database Console Commands (DBCC) on databases to be upgraded to ensure that they are in a consistent state.</span></span>  
  
-   <span data-ttu-id="6a5a8-138">Оцените, сколько места на диске, помимо занимаемого пользовательскими базами данных, понадобится для обновления компонентов [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="6a5a8-138">Estimate the disk space that is required to upgrade [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] components, in addition to user databases.</span></span> <span data-ttu-id="6a5a8-139">Дополнительные сведения о том, сколько места на диске занимают компоненты [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] см. в разделе [Hardware and Software Requirements for Installing SQL Server 2014](../../sql-server/install/hardware-and-software-requirements-for-installing-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="6a5a8-139">For disk space that is required by [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] components, see [Hardware and Software Requirements for Installing SQL Server 2014](../../sql-server/install/hardware-and-software-requirements-for-installing-sql-server.md).</span></span>  
  
-   <span data-ttu-id="6a5a8-140">Убедитесь в том, что существующие системные базы данных [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] (master, model, msdb и tempdb) настроены для автоувеличения и что для них имеется достаточно места на диске.</span><span class="sxs-lookup"><span data-stu-id="6a5a8-140">Ensure that existing [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] system databases - master, model, msdb, and tempdb - are configured to autogrow, and ensure that they have sufficient hard disk space.</span></span>  
  
-   <span data-ttu-id="6a5a8-141">Убедитесь в том, что все серверы баз данных имеют регистрационные данные для входа в базу данных master.</span><span class="sxs-lookup"><span data-stu-id="6a5a8-141">Ensure that all database servers have logon information in the master database.</span></span> <span data-ttu-id="6a5a8-142">Это важно для восстановления базы данных, поскольку системные регистрационные данные для входа хранятся в базе данных master.</span><span class="sxs-lookup"><span data-stu-id="6a5a8-142">This is important for restoring a database, as system logon information resides in master.</span></span>  
  
-   <span data-ttu-id="6a5a8-143">Отключите все хранимые процедуры, запускаемые при старте системы; это необходимо, поскольку процесс обновления будет останавливать и запускать службы на экземпляре [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , подвергаемом обновлению.</span><span class="sxs-lookup"><span data-stu-id="6a5a8-143">Disable all startup stored procedures, as the upgrade process will stop and start services on the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance being upgraded.</span></span> <span data-ttu-id="6a5a8-144">Хранимые процедуры, запускаемые при старте системы, могут блокировать процесс обновления.</span><span class="sxs-lookup"><span data-stu-id="6a5a8-144">Stored procedures processed at startup time might block the upgrade process.</span></span>  
  
-   <span data-ttu-id="6a5a8-145">Убедитесь, что репликация обновлена и остановите репликацию.</span><span class="sxs-lookup"><span data-stu-id="6a5a8-145">Make sure that Replication is current and then stop Replication.</span></span>  
  
-   <span data-ttu-id="6a5a8-146">Закройте все приложения, а также службы, имеющие зависимости от [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="6a5a8-146">Quit all applications, including all services that have [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] dependencies.</span></span> <span data-ttu-id="6a5a8-147">При наличии локальных приложений, подключенных к обновляемому экземпляру, процесс обновления может завершиться ошибкой.</span><span class="sxs-lookup"><span data-stu-id="6a5a8-147">Upgrade might fail if local applications are connected to the instance being upgraded.</span></span>  
  
-   <span data-ttu-id="6a5a8-148">Если используется зеркальное отображение базы данных, см. раздел [Снижение времени простоя зеркальных баз данных при обновлении экземпляров сервера](../database-mirroring/upgrading-mirrored-instances.md).</span><span class="sxs-lookup"><span data-stu-id="6a5a8-148">If you use Database Mirroring, see [Minimize Downtime for Mirrored Databases When Upgrading Server Instances](../database-mirroring/upgrading-mirrored-instances.md).</span></span>  
  
## <a name="upgrading-the-database-engine"></a><span data-ttu-id="6a5a8-149">Обновление компонента Database Engine</span><span class="sxs-lookup"><span data-stu-id="6a5a8-149">Upgrading the Database Engine</span></span>  
 <span data-ttu-id="6a5a8-150">Установка [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] или более поздней версии может быть перезаписана посредством обновления версии.</span><span class="sxs-lookup"><span data-stu-id="6a5a8-150">You can overwrite an installation of [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] or later with a version upgrade.</span></span> <span data-ttu-id="6a5a8-151">Если при запуске программы установки [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] обнаружена предыдущая версия [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , все программные файлы [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] обновятся, но при этом сохранятся все данные экземпляра [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="6a5a8-151">If an earlier version of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] is detected when you run [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Setup, all previous [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] program files are upgraded, and all data stored in the previous [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance is preserved.</span></span> <span data-ttu-id="6a5a8-152">Кроме того, останутся без изменений предыдущие версии электронной документации по [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="6a5a8-152">In addition, earlier versions of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Books Online will remain intact on the computer.</span></span>  
  
> [!WARNING]  
>  <span data-ttu-id="6a5a8-153">При запуске программы установки SQL Server 2014 экземпляр SQL Server останавливается и перезапускается в процессе выполнения предварительных проверок.</span><span class="sxs-lookup"><span data-stu-id="6a5a8-153">When running the SQL Server 2014 setup program, the SQL Server instance is stopped and restarted as part of running the pre-upgrade checks.</span></span>  
  
> [!CAUTION]  
>  <span data-ttu-id="6a5a8-154">При обновлении версии [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]предыдущий экземпляр [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] будет перезаписан и перестанет существовать на компьютере.</span><span class="sxs-lookup"><span data-stu-id="6a5a8-154">When you upgrade [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], the previous [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance will be overwritten and will no longer exist on your computer.</span></span> <span data-ttu-id="6a5a8-155">Перед обновлением создайте резервную копию баз данных [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] и других объектов, связанных с экземпляром предыдущей версии [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="6a5a8-155">Before upgrading, back up [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] databases and other objects associated with the previous [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance.</span></span>  
  
 <span data-ttu-id="6a5a8-156">Обновление компонента [!INCLUDE[ssDE](../../includes/ssde-md.md)] можно выполнить при помощи мастера установки [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="6a5a8-156">You can upgrade the [!INCLUDE[ssDE](../../includes/ssde-md.md)] by using the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Installation Wizard.</span></span>  
  
### <a name="database-compatibility-level-after-upgrade"></a><span data-ttu-id="6a5a8-157">Уровень совместимости баз данных после обновления</span><span class="sxs-lookup"><span data-stu-id="6a5a8-157">Database Compatibility Level After Upgrade</span></span>  
 <span data-ttu-id="6a5a8-158">`tempdb` `model` После обновления уровни совместимости `msdb` баз данных **ресурсов** , и устанавливаются в 120.</span><span class="sxs-lookup"><span data-stu-id="6a5a8-158">The compatibility levels of the `tempdb`, `model`, `msdb` and **Resource** databases are set to 120 after upgrade.</span></span> <span data-ttu-id="6a5a8-159">Системная база данных `master` сохраняет уровень совместимости, который она имела до обновления.</span><span class="sxs-lookup"><span data-stu-id="6a5a8-159">The `master` system database retains the compatibility level it had before upgrade.</span></span>  
  
 <span data-ttu-id="6a5a8-160">Если уровень совместимости пользовательской базы данных до обновления был 100 или выше, после обновления он останется таким же.</span><span class="sxs-lookup"><span data-stu-id="6a5a8-160">If the compatibility level of a user database was 100 or higher before the upgrade, it remains the same after upgrade.</span></span> <span data-ttu-id="6a5a8-161">Если уровень совместимости до обновления был 90, в обновленной базе данных он устанавливается в значение 100, что является минимально поддерживаемым уровнем совместимости в [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)].</span><span class="sxs-lookup"><span data-stu-id="6a5a8-161">If the compatibility level was 90 before upgrade, in the upgraded database, the compatibility level is set to 100, which is the lowest supported compatibility level in [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)].</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="6a5a8-162">Новые пользовательские базы данных наследуют уровень совместимости базы данных `model`.</span><span class="sxs-lookup"><span data-stu-id="6a5a8-162">New user databases will inherit the compatibility level of the `model` database.</span></span>  
  
## <a name="migrating-databases"></a><span data-ttu-id="6a5a8-163">Миграция баз данных</span><span class="sxs-lookup"><span data-stu-id="6a5a8-163">Migrating Databases</span></span>  
 <span data-ttu-id="6a5a8-164">Переместить пользовательские базы данных на другой экземпляр [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] можно при помощи функций резервного копирования и восстановления либо с помощью функций отсоединения и присоединения, предоставляемых [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="6a5a8-164">You can move user databases to an instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] using backup and restore or detach and attach functionalities in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="6a5a8-165">Дополнительные сведения см. в статье [Копирование баз данных путем создания и восстановления резервных копий](../../relational-databases/databases/copy-databases-with-backup-and-restore.md) или [Присоединение и отсоединение базы данных (SQL Server)](../../relational-databases/databases/database-detach-and-attach-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="6a5a8-165">For more information, see [Copy Databases with Backup and Restore](../../relational-databases/databases/copy-databases-with-backup-and-restore.md) or [Database Detach and Attach &#40;SQL Server&#41;](../../relational-databases/databases/database-detach-and-attach-sql-server.md).</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="6a5a8-166">Перемещение и копирование базы данных, которая имеет одинаковые имена на исходном и целевом серверах, невозможно.</span><span class="sxs-lookup"><span data-stu-id="6a5a8-166">A database that has the identical name on both source and destination servers cannot be moved or copied.</span></span> <span data-ttu-id="6a5a8-167">В этом случае она будет помечена как уже существующая.</span><span class="sxs-lookup"><span data-stu-id="6a5a8-167">In this case, it will be noted as "Already exists."</span></span>  
  
 <span data-ttu-id="6a5a8-168">Дополнительные сведения см. в статье [Use the Copy Database Wizard](../../relational-databases/databases/use-the-copy-database-wizard.md).</span><span class="sxs-lookup"><span data-stu-id="6a5a8-168">For more information, see [Use the Copy Database Wizard](../../relational-databases/databases/use-the-copy-database-wizard.md).</span></span>  
  
## <a name="after-upgrading-the-database-engine"></a><span data-ttu-id="6a5a8-169">После обновления компонента Database Engine</span><span class="sxs-lookup"><span data-stu-id="6a5a8-169">After Upgrading the Database Engine</span></span>  
 <span data-ttu-id="6a5a8-170">После обновления компонента [!INCLUDE[ssDE](../../includes/ssde-md.md)]выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="6a5a8-170">After upgrading the [!INCLUDE[ssDE](../../includes/ssde-md.md)], complete the following tasks:</span></span>  
  
-   <span data-ttu-id="6a5a8-171">Повторно зарегистрируйте серверы.</span><span class="sxs-lookup"><span data-stu-id="6a5a8-171">Re-register your servers.</span></span> <span data-ttu-id="6a5a8-172">Дополнительные сведения о регистрации серверов см. в разделе [Регистрация серверов](../../ssms/register-servers/register-servers.md).</span><span class="sxs-lookup"><span data-stu-id="6a5a8-172">For more information about registering servers, see [Register Servers](../../ssms/register-servers/register-servers.md).</span></span>  
  
-   <span data-ttu-id="6a5a8-173">Для обеспечения семантической согласованности результатов запроса заполните полнотекстовые каталоги повторно.</span><span class="sxs-lookup"><span data-stu-id="6a5a8-173">Re-populate full-text catalogs to ensure semantic consistency in query results.</span></span>  
  
     [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] <span data-ttu-id="6a5a8-174">устанавливает новые средства разбиения по словам, используемые компонентами полнотекстового и семантического поиска.</span><span class="sxs-lookup"><span data-stu-id="6a5a8-174">installs new word breakers for use by Full-Text and Semantic Search.</span></span> <span data-ttu-id="6a5a8-175">Средства разбиения по словам используются как во время индексирования, так и при выполнении запросов.</span><span class="sxs-lookup"><span data-stu-id="6a5a8-175">The word breakers are used both at indexing time and at query time.</span></span> <span data-ttu-id="6a5a8-176">Если не выполнить перепостроение полнотекстовых каталогов, результаты поиска могут быть несогласованными.</span><span class="sxs-lookup"><span data-stu-id="6a5a8-176">If you do not rebuild the full-text catalogs, your search results may be inconsistent.</span></span> <span data-ttu-id="6a5a8-177">Полнотекстовый запрос, выполняющий поиск фразы, которая в предыдущей версии [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] была разбита средством разбиения по словам не так, как это сделано текущим средством разбиения по словам, может не обнаружить документ или строку, содержащую эту фразу.</span><span class="sxs-lookup"><span data-stu-id="6a5a8-177">If you issue a full-text query that looks for a phrase that is broken differently by the word breaker in a previous version of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] and the current word breaker, a document or row containing the phrase might not be retrieved.</span></span> <span data-ttu-id="6a5a8-178">Это связано с тем, что индексированные фразы были разбиты с помощью логики, которая не соответствует логике, используемой в запросе.</span><span class="sxs-lookup"><span data-stu-id="6a5a8-178">This is because the indexed phrases were broken using different logic than the query is using.</span></span> <span data-ttu-id="6a5a8-179">Решение заключается в том, чтобы заполнить полнотекстовые каталоги повторно (перестроить их) с помощью новых средств разбиения по словам, чтобы при индексировании и выполнении запросов использовалась одинаковая логика.</span><span class="sxs-lookup"><span data-stu-id="6a5a8-179">The solution is to repopulate (rebuild) the full-text catalogs with the new word breakers so that index time and query time behavior are identical.</span></span>  
  
     <span data-ttu-id="6a5a8-180">Дополнительные сведения см. в разделе [sp_fulltext_catalog (Transact-SQL)](/sql/relational-databases/system-stored-procedures/sp-fulltext-catalog-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="6a5a8-180">For more information, see [sp_fulltext_catalog &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-fulltext-catalog-transact-sql).</span></span>  
  
-   <span data-ttu-id="6a5a8-181">Настройте установку [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="6a5a8-181">Configure the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] installation.</span></span> <span data-ttu-id="6a5a8-182">Чтобы сократить уязвимую для атак контактную зону системы, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] выборочно устанавливает и активирует ключевые службы и функции.</span><span class="sxs-lookup"><span data-stu-id="6a5a8-182">To reduce the attackable surface area of a system, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] selectively installs and enables key services and features.</span></span>  
  
-   <span data-ttu-id="6a5a8-183">Проверьте или удалите подсказки USE PLAN, которые формируются [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] и применяются в запросах для секционированных таблиц и индексов.</span><span class="sxs-lookup"><span data-stu-id="6a5a8-183">Validate or remove USE PLAN hints that are generated by [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] and applied to queries on partitioned tables and indexes.</span></span>  
  
     <span data-ttu-id="6a5a8-184">В [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] изменился способ обработки запросов к страницам секционированных таблиц и индексов.</span><span class="sxs-lookup"><span data-stu-id="6a5a8-184">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] changes the way queries on partitioned tables and indexes are processed.</span></span> <span data-ttu-id="6a5a8-185">Запросы к секционированным объектам с указанием USE PLAN для планов, сформированных [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] , могут оказаться несовместимыми с [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)].</span><span class="sxs-lookup"><span data-stu-id="6a5a8-185">Queries on partitioned objects that use the USE PLAN hint for a plan that is generated by [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] might contain a plan that is not usable in [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)].</span></span> <span data-ttu-id="6a5a8-186">После выполнения обновления до [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]рекомендуется выполнить следующие процедуры.</span><span class="sxs-lookup"><span data-stu-id="6a5a8-186">We recommend the following procedures after you upgrade to [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)].</span></span>  
  
     <span data-ttu-id="6a5a8-187">**Если подсказка USE PLAN указана непосредственно в запросе**</span><span class="sxs-lookup"><span data-stu-id="6a5a8-187">**When the USE PLAN hint is specified directly in a query:**</span></span>  
  
    1.  <span data-ttu-id="6a5a8-188">Удалите указание USE PLAN из запроса.</span><span class="sxs-lookup"><span data-stu-id="6a5a8-188">Remove the USE PLAN hint from the query.</span></span>  
  
    2.  <span data-ttu-id="6a5a8-189">Проверьте работу запроса.</span><span class="sxs-lookup"><span data-stu-id="6a5a8-189">Test the query.</span></span>  
  
    3.  <span data-ttu-id="6a5a8-190">Если оптимизатор не выбрал подходящий план, настройте запрос и затем укажите подсказку USE PLAN с нужным планом запроса.</span><span class="sxs-lookup"><span data-stu-id="6a5a8-190">If the optimizer does not select an appropriate plan, tune the query, and then consider specifying the USE PLAN hint with the desired query plan.</span></span>  
  
     <span data-ttu-id="6a5a8-191">**Если подсказка USE PLAN указана непосредственно в структуре плана**</span><span class="sxs-lookup"><span data-stu-id="6a5a8-191">**When the USE PLAN hint is specified in a plan guide:**</span></span>  
  
    1.  <span data-ttu-id="6a5a8-192">При помощи функции sys.fn_validate_plan_guide проверьте правильность структуры плана.</span><span class="sxs-lookup"><span data-stu-id="6a5a8-192">Use the sys.fn_validate_plan_guide function to check the validity of the plan guide.</span></span> <span data-ttu-id="6a5a8-193">Кроме того, проверить недопустимые планы можно в приложении [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)]по событию Plan Guide Unsuccessful.</span><span class="sxs-lookup"><span data-stu-id="6a5a8-193">Alternatively, you can check for invalid plans by using the Plan Guide Unsuccessful event in [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)].</span></span>  
  
    2.  <span data-ttu-id="6a5a8-194">Если структура плана неверна, удалите ее.</span><span class="sxs-lookup"><span data-stu-id="6a5a8-194">If the plan guide is not valid, drop the plan guide.</span></span> <span data-ttu-id="6a5a8-195">Если оптимизатор не выбрал подходящий план, настройте запрос и укажите указание USE PLAN с нужным планом запроса.</span><span class="sxs-lookup"><span data-stu-id="6a5a8-195">If the optimizer does not select an appropriate plan, tune the query, and then consider specifying the USE PLAN hint with the query plan that you want.</span></span>  
  
     <span data-ttu-id="6a5a8-196">Если в структуре плана USE PLAN указан неверный план, это не приведет к ошибке выполнения.</span><span class="sxs-lookup"><span data-stu-id="6a5a8-196">A plan that is not valid will not cause the query to fail when the USE PLAN hint is specified in a plan guide.</span></span> <span data-ttu-id="6a5a8-197">Вместо этого запрос будет скомпилирован без учета указания.</span><span class="sxs-lookup"><span data-stu-id="6a5a8-197">Instead, the query is compiled without using the USE PLAN hint.</span></span>  
  
 <span data-ttu-id="6a5a8-198">Любые базы данных, в которых возможность использования полнотекстовых каталогов была включена или отключена до обновления, сохранят этот статус после обновления.</span><span class="sxs-lookup"><span data-stu-id="6a5a8-198">Any databases that were marked full-text enabled or disabled before the upgrade will maintain that status after upgrade.</span></span> <span data-ttu-id="6a5a8-199">После обновления полнотекстовые каталоги будут перестроены и автоматически заполнены для всех баз данных с включенной возможностью использования полнотекстовых каталогов.</span><span class="sxs-lookup"><span data-stu-id="6a5a8-199">After the upgrade, the full-text catalogs will be rebuilt and populated automatically for all full-text enabled databases.</span></span> <span data-ttu-id="6a5a8-200">Выполнение этой операции требует много времени и ресурсов.</span><span class="sxs-lookup"><span data-stu-id="6a5a8-200">This is a time-consuming and resource-consuming operation.</span></span> <span data-ttu-id="6a5a8-201">Можно временно приостановить проведение полнотекстового индексирования, выполнив следующую инструкцию.</span><span class="sxs-lookup"><span data-stu-id="6a5a8-201">You can pause the full-text indexing operation temporarily by running the following statement:</span></span>  
  
```  
EXEC sp_fulltext_service 'pause_indexing', 1;  
```  
  
 <span data-ttu-id="6a5a8-202">Для возобновления заполнения полнотекстового индекса выполните следующую инструкцию.</span><span class="sxs-lookup"><span data-stu-id="6a5a8-202">To resume full-text index population, run the following statement:</span></span>  
  
```  
EXEC sp_fulltext_service 'pause_indexing', 0;  
```  
  
## <a name="see-also"></a><span data-ttu-id="6a5a8-203">См. также:</span><span class="sxs-lookup"><span data-stu-id="6a5a8-203">See Also</span></span>  
 <span data-ttu-id="6a5a8-204">[Поддерживаемые обновления версий и выпусков](supported-version-and-edition-upgrades.md) </span><span class="sxs-lookup"><span data-stu-id="6a5a8-204">[Supported Version and Edition Upgrades](supported-version-and-edition-upgrades.md) </span></span>  
 <span data-ttu-id="6a5a8-205">[Работа с несколькими версиями и экземплярами SQL Server](../../../2014/sql-server/install/work-with-multiple-versions-and-instances-of-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="6a5a8-205">[Work with Multiple Versions and Instances of SQL Server](../../../2014/sql-server/install/work-with-multiple-versions-and-instances-of-sql-server.md) </span></span>  
 <span data-ttu-id="6a5a8-206">[Обратная совместимость](../../getting-started/backward-compatibility.md) </span><span class="sxs-lookup"><span data-stu-id="6a5a8-206">[Backward Compatibility](../../getting-started/backward-compatibility.md) </span></span>  
 [<span data-ttu-id="6a5a8-207">Обновление реплицируемых баз данных</span><span class="sxs-lookup"><span data-stu-id="6a5a8-207">Upgrade Replicated Databases</span></span>](upgrade-replicated-databases.md)  
  
  
