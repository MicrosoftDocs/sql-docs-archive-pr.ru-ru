---
title: Установка SQL Server с общей папкой SMB в качестве хранилища | Документы Майкрософт
ms.custom: ''
ms.date: 03/09/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: install
ms.topic: conceptual
ms.assetid: 8b7810b2-637e-46a3-9fe1-d055898ba639
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 3d59c2861e2419d76d3dc8e3fc3aaab91bf1e99b
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87729758"
---
# <a name="install-sql-server-with-smb-fileshare-as-a-storage-option"></a><span data-ttu-id="94fb8-102">Установка SQL Server с общей папкой SMB в качестве хранилища</span><span class="sxs-lookup"><span data-stu-id="94fb8-102">Install SQL Server with SMB Fileshare as a Storage Option</span></span>
  <span data-ttu-id="94fb8-103">Начиная с выпуска [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)], системные базы данных (Master, Model, MSDB и TempDB) и пользовательские базы данных компонента [!INCLUDE[ssDE](../../includes/ssde-md.md)] можно установить с использованием протокола SMB в качестве хранилища файлового сервера Server Message Block (SMB).</span><span class="sxs-lookup"><span data-stu-id="94fb8-103">Starting [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)], system databases (Master, Model, MSDB, and TempDB), and [!INCLUDE[ssDE](../../includes/ssde-md.md)] user databases can be installed with Server Message Block (SMB) file server as a storage option.</span></span> <span data-ttu-id="94fb8-104">Это относится как к изолированному варианту установки [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , так и к установке кластеров отработки отказа [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="94fb8-104">This applies to both [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] stand-alone and [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] failover cluster installations (FCI).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="94fb8-105">Файловый поток в настоящее время не поддерживается в общей папке SMB.</span><span class="sxs-lookup"><span data-stu-id="94fb8-105">Filestream is currently not supported on an SMB file share.</span></span>  
  
## <a name="installation-considerations"></a><span data-ttu-id="94fb8-106">Рекомендации по установке</span><span class="sxs-lookup"><span data-stu-id="94fb8-106">Installation Considerations</span></span>  
  
### <a name="smb-file-share-formats"></a><span data-ttu-id="94fb8-107">Форматы общей папки SMB:</span><span class="sxs-lookup"><span data-stu-id="94fb8-107">SMB File share Formats:</span></span>  
 <span data-ttu-id="94fb8-108">При указании общей папки SMB путь может быть указан в одном из следующих форматов UNC для изолированных баз данных и баз данных FCI:</span><span class="sxs-lookup"><span data-stu-id="94fb8-108">While specifying the SMB file share, the following are supported Universal Naming Convention (UNC) Path formats for standalone and FCI databases:</span></span>  
  
-   <span data-ttu-id="94fb8-109">\\\имя_сервера\имя_папки</span><span class="sxs-lookup"><span data-stu-id="94fb8-109">\\\ServerName\ShareName</span></span>\  
  
-   <span data-ttu-id="94fb8-110">\\\имя_сервера\имя_папки</span><span class="sxs-lookup"><span data-stu-id="94fb8-110">\\\ServerName\ShareName</span></span>  
  
 <span data-ttu-id="94fb8-111">Дополнительные сведения о соглашении об универсальных именах см. в разделе [UNC](https://go.microsoft.com/fwlink/?LinkId=245534) ( https://go.microsoft.com/fwlink/?LinkId=245534) .</span><span class="sxs-lookup"><span data-stu-id="94fb8-111">For more information about Universal Naming Convention, see [UNC](https://go.microsoft.com/fwlink/?LinkId=245534) (https://go.microsoft.com/fwlink/?LinkId=245534).</span></span>  
  
 <span data-ttu-id="94fb8-112">Путь UNC замыкания на себя (путь UNC, где именем сервера является localhost, 127.0.0.1 или имя локального компьютера) не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="94fb8-112">The loopback UNC path (a UNC path whose server name is localhost, 127.0.0.1, or the local machine name) is not supported.</span></span> <span data-ttu-id="94fb8-113">В качестве особого случая [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] с использованием кластера файлового сервера, размещенного на том же узле [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , также не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="94fb8-113">As a special case, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] using File Server Cluster which is hosted on the same node [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] is running is also not supported.</span></span> <span data-ttu-id="94fb8-114">Чтобы предотвратить возникновение этой ситуации, рекомендуется создавать [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] и кластер файлового сервера на отдельных кластерах Windows.</span><span class="sxs-lookup"><span data-stu-id="94fb8-114">To prevent this situation, it is recommended that [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] and File Server Cluster to be created on separated Windows Clusters.</span></span>  
  
 <span data-ttu-id="94fb8-115">Указанные ниже форматы путей UNC не поддерживаются.</span><span class="sxs-lookup"><span data-stu-id="94fb8-115">The below UNC path formats are not supported:</span></span>  
  
-   <span data-ttu-id="94fb8-116">Петлевой путь, например \\\localhost\\..\ или \\\127.0.0.1\\...</span><span class="sxs-lookup"><span data-stu-id="94fb8-116">Loopback path, e.g., \\\localhost\\..\ or \\\127.0.0.1\\...</span></span>\  
  
-   <span data-ttu-id="94fb8-117">Административные общие папки, например \\\servername\x$</span><span class="sxs-lookup"><span data-stu-id="94fb8-117">Administrative shares, e.g., \\\servername\x$</span></span>  
  
-   <span data-ttu-id="94fb8-118">Другие форматы путей UNC, такие как \\\\\?\x:</span><span class="sxs-lookup"><span data-stu-id="94fb8-118">Other UNC path formats like \\\\?\x:</span></span>\  
  
-   <span data-ttu-id="94fb8-119">Подключенные сетевые диски.</span><span class="sxs-lookup"><span data-stu-id="94fb8-119">Mapped network drives.</span></span>  
  
### <a name="supported-data-definition-language-ddl-statements"></a><span data-ttu-id="94fb8-120">Поддерживаемые инструкции языка описания данных DDL.</span><span class="sxs-lookup"><span data-stu-id="94fb8-120">Supported Data Definition Language (DDL) statements</span></span>  
 <span data-ttu-id="94fb8-121">Следующие инструкции [!INCLUDE[tsql](../../includes/tsql-md.md)] DDL и хранимые процедуры компонента ядра СУБД поддерживают общие папки SMB.</span><span class="sxs-lookup"><span data-stu-id="94fb8-121">The following [!INCLUDE[tsql](../../includes/tsql-md.md)] DDL statements and database engine stored procedures support SMB file shares:</span></span>  
  
1.  [<span data-ttu-id="94fb8-122">CREATE DATABASE (SQL Server Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="94fb8-122">CREATE DATABASE &#40;SQL Server Transact-SQL&#41;</span></span>](/sql/t-sql/statements/create-database-sql-server-transact-sql)  
  
2.  [<span data-ttu-id="94fb8-123">ALTER DATABASE (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="94fb8-123">ALTER DATABASE &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/alter-database-transact-sql)  
  
3.  [<span data-ttu-id="94fb8-124">RESTORE (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="94fb8-124">RESTORE &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/restore-statements-transact-sql)  
  
4.  [<span data-ttu-id="94fb8-125">BACKUP (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="94fb8-125">BACKUP &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/backup-transact-sql)  
  
5.  [<span data-ttu-id="94fb8-126">sp_attach_db (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="94fb8-126">sp_attach_db &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-attach-db-transact-sql)  
  
6.  [<span data-ttu-id="94fb8-127">sp_attach_single_file_db (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="94fb8-127">sp_attach_single_file_db &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-attach-single-file-db-transact-sql)  
  
### <a name="installation-options"></a><span data-ttu-id="94fb8-128">Варианты установки</span><span class="sxs-lookup"><span data-stu-id="94fb8-128">Installation options</span></span>  
  
-   <span data-ttu-id="94fb8-129">На странице "Настройка компонента ядра СУБД" пользовательского интерфейса программы настройки перейдите на вкладку "Каталоги данных" и задайте для параметра "Корневой каталог данных" значение "\\\fileserver1\share1\\"".</span><span class="sxs-lookup"><span data-stu-id="94fb8-129">In setup UI "Database Engine Configuration" page, "Data Directories" tab, set the parameter "Data root directory as "\\\fileserver1\share1\".</span></span>  
  
-   <span data-ttu-id="94fb8-130">При установке из командной строки задайте для параметра "/INSTALLSQLDATADIR" значение "\\\fileserver1\share1\\"".</span><span class="sxs-lookup"><span data-stu-id="94fb8-130">In command prompt installation, specify the "/INSTALLSQLDATADIR" as "\\\fileserver1\share1\".</span></span>  
  
     <span data-ttu-id="94fb8-131">Ниже представлен образец синтаксиса для установки [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] на отдельном сервере с использованием общей папки SMB.</span><span class="sxs-lookup"><span data-stu-id="94fb8-131">Here is the sample syntax to install [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] on a Standalone server using SMB file share option:</span></span>  
  
    ```  
    Setup.exe /q /ACTION=Install /FEATURES=SQL /INSTANCENAME=MSSQLSERVER /SQLSVCACCOUNT="<DomainName\UserName>" /SQLSVCPASSWORD="<StrongPassword>" /SQLSYSADMINACCOUNTS="<DomainName\UserName>" /AGTSVCACCOUNT="<DomainName\UserName>" /AGTSVCPASSWORD="<StrongPassword>" /INSTALLSQLDATADIR="\\FileServer\Share1\" /IACCEPTSQLSERVERLICENSETERMS  
    ```  
  
     <span data-ttu-id="94fb8-132">Установка экземпляра отказоустойчивого кластера [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] с одним узлом с компонентами [!INCLUDE[ssDE](../../includes/ssde-md.md)] и службами [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)], экземпляр по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="94fb8-132">To install a single-node [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] failover cluster instance with the [!INCLUDE[ssDE](../../includes/ssde-md.md)] and [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)], default instance:</span></span>  
  
    ```  
    setup.exe /q /ACTION=InstallFailoverCluster /InstanceName=MSSQLSERVER /INDICATEPROGRESS /ASSYSADMINACCOUNTS="<DomainName\UserName>" /ASDATADIR=<Drive>:\OLAP\Data /ASLOGDIR=<Drive>:\OLAP\Log /ASBACKUPDIR=<Drive>:\OLAP\Backup /ASCONFIGDIR=<Drive>:\OLAP\Config /ASTEMPDIR=<Drive>:\OLAP\Temp /FAILOVERCLUSTERDISKS="<Cluster Disk Resource Name - for example, 'Disk S:'" /FAILOVERCLUSTERNETWORKNAME="<Insert Network Name>" /FAILOVERCLUSTERIPADDRESSES="IPv4;xx.xxx.xx.xx;Cluster Network;xxx.xxx.xxx.x" /FAILOVERCLUSTERGROUP="MSSQLSERVER" /Features=AS,SQL /ASSVCACCOUNT="<DomainName\UserName>" /ASSVCPASSWORD="xxxxxxxxxxx" /AGTSVCACCOUNT="<DomainName\UserName>" /AGTSVCPASSWORD="xxxxxxxxxxx" /INSTALLSQLDATADIR="\\FileServer\Share1\" /SQLCOLLATION="SQL_Latin1_General_CP1_CS_AS" /SQLSVCACCOUNT="<DomainName\UserName>" /SQLSVCPASSWORD="xxxxxxxxxxx" /SQLSYSADMINACCOUNTS="<DomainName\UserName> /IACCEPTSQLSERVERLICENSETERMS  
    ```  
  
     <span data-ttu-id="94fb8-133">Дополнительные сведения об использовании различных параметров командной строки в см [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] . в разделе [Install SQL Server 2014 в командной строке](../../database-engine/install-windows/install-sql-server-from-the-command-prompt.md).</span><span class="sxs-lookup"><span data-stu-id="94fb8-133">For more information about the usage of various command line parameter options in [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], see [Install SQL Server 2014 from the Command Prompt](../../database-engine/install-windows/install-sql-server-from-the-command-prompt.md).</span></span>  
  
## <a name="operating-system-considerations-smb-protocol-vs-ssnoversion"></a><span data-ttu-id="94fb8-134">Рекомендации по операционным системам (сравнение протокола SMB и [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)])</span><span class="sxs-lookup"><span data-stu-id="94fb8-134">Operating System Considerations (SMB Protocol vs. [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)])</span></span>  
 <span data-ttu-id="94fb8-135">В различных операционных системах Windows используются разные версии протокола SMB. Версия протокола SMB прозрачна для [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="94fb8-135">Different Windows operating systems has different SMB protocol versions, and the SMB protocol version is transparent to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="94fb8-136">Можно выяснить информацию о преимуществах разных версий SMB в отношении [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)].</span><span class="sxs-lookup"><span data-stu-id="94fb8-136">You can find the benefits of different SMB protocol versions with respect to [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)].</span></span>  
  
|<span data-ttu-id="94fb8-137">Операционная система</span><span class="sxs-lookup"><span data-stu-id="94fb8-137">Operating System</span></span>|<span data-ttu-id="94fb8-138">Версия протокола SMB2</span><span class="sxs-lookup"><span data-stu-id="94fb8-138">SMB2 protocol version</span></span>|<span data-ttu-id="94fb8-139">Преимущества для [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]</span><span class="sxs-lookup"><span data-stu-id="94fb8-139">Benefits to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]</span></span>|  
|----------------------|---------------------------|-------------------------------------------|  
|[!INCLUDE[firstref_longhorn](../../includes/firstref-longhorn-md.md)] <span data-ttu-id="94fb8-140">с пакетом обновления 2 (SP2)</span><span class="sxs-lookup"><span data-stu-id="94fb8-140">SP 2</span></span>|<span data-ttu-id="94fb8-141">2.0</span><span class="sxs-lookup"><span data-stu-id="94fb8-141">2.0</span></span>|<span data-ttu-id="94fb8-142">Повышенная производительность по сравнению с предыдущими версиями SMB.</span><span class="sxs-lookup"><span data-stu-id="94fb8-142">Improved performance over previous SMB versions.</span></span><br /><br /> <span data-ttu-id="94fb8-143">Устойчивость, которая помогает восстанавливать данные при временных проблемах в работе сети.</span><span class="sxs-lookup"><span data-stu-id="94fb8-143">Durability, which helps recover from temporary network glitches.</span></span>|  
|[!INCLUDE[winserver2008r2](../../includes/winserver2008r2-md.md)] <span data-ttu-id="94fb8-144">с пакетом обновления 1 (SP1), включая Server Core</span><span class="sxs-lookup"><span data-stu-id="94fb8-144">SP 1, including Server Core</span></span>|<span data-ttu-id="94fb8-145">2.1</span><span class="sxs-lookup"><span data-stu-id="94fb8-145">2.1</span></span>|<span data-ttu-id="94fb8-146">Поддержка больших MTU, что позволяет передавать большой объем данных, например при резервном копировании и восстановлении SQL.</span><span class="sxs-lookup"><span data-stu-id="94fb8-146">Support for large MTU, which benefits large data transfers, such as SQL backup and restore.</span></span> <span data-ttu-id="94fb8-147">Эту возможность должен включить пользователь.</span><span class="sxs-lookup"><span data-stu-id="94fb8-147">This capability must be enabled by user.</span></span> <span data-ttu-id="94fb8-148">Дополнительные сведения о включении этой функции см. в разделе [Новые возможности SMB](https://go.microsoft.com/fwlink/?LinkID=237319) (https://go.microsoft.com/fwlink/?LinkID=237319).</span><span class="sxs-lookup"><span data-stu-id="94fb8-148">For more details on how to enable this capability, see [What's New in SMB](https://go.microsoft.com/fwlink/?LinkID=237319) (https://go.microsoft.com/fwlink/?LinkID=237319).</span></span><br /><br /> <span data-ttu-id="94fb8-149">Значительные улучшения производительности, в частности для рабочих нагрузок SQL OLTP.</span><span class="sxs-lookup"><span data-stu-id="94fb8-149">Significant performance improvements, specifically for SQL OLTP style workloads.</span></span> <span data-ttu-id="94fb8-150">Эти улучшения производительности требуют применения исправления.</span><span class="sxs-lookup"><span data-stu-id="94fb8-150">These performance improvements require applying a hotfix.</span></span> <span data-ttu-id="94fb8-151">Дополнительные сведения об этом исправлении см. в [этом разделе](https://go.microsoft.com/fwlink/?LinkId=237320) (https://go.microsoft.com/fwlink/?LinkId=237320).</span><span class="sxs-lookup"><span data-stu-id="94fb8-151">For more information on the hotfix, see [this](https://go.microsoft.com/fwlink/?LinkId=237320) (https://go.microsoft.com/fwlink/?LinkId=237320).</span></span>|  
|[!INCLUDE[win8srv](../../includes/win8srv-md.md)]<span data-ttu-id="94fb8-152">, включая Server Core</span><span class="sxs-lookup"><span data-stu-id="94fb8-152">, including Server Core</span></span>|<span data-ttu-id="94fb8-153">3.0</span><span class="sxs-lookup"><span data-stu-id="94fb8-153">3.0</span></span>|<span data-ttu-id="94fb8-154">Поддержка прозрачных обработок отказов общих папок с нулевым временем простоев и без необходимости вмешательства администраторов для изменения SQL DBA или администраторов файловых серверов для изменения конфигурации кластеров файловых серверов.</span><span class="sxs-lookup"><span data-stu-id="94fb8-154">Support for transparent failover of file shares providing zero downtime with no administrator intervention required for SQL DBA or file server administrator in file server cluster configurations.</span></span><br /><br /> <span data-ttu-id="94fb8-155">Поддержка ввода-вывода с одновременным использованием нескольких сетевых интерфейсов, а также устойчивость к отказу сетевых интерфейсов.</span><span class="sxs-lookup"><span data-stu-id="94fb8-155">Support for IO using multiple network interfaces simultaneously, as well as tolerance to network interface failure.</span></span><br /><br /> <span data-ttu-id="94fb8-156">Поддержка сетевых интерфейсов с возможностями RDMA.</span><span class="sxs-lookup"><span data-stu-id="94fb8-156">Support for network interfaces with RDMA capabilities.</span></span><br /><br /> <span data-ttu-id="94fb8-157">Дополнительные сведения об этих возможностях и протоколе SMB см. в разделе [Общие сведения о протоколе SMB](https://go.microsoft.com/fwlink/?LinkId=253174) (https://go.microsoft.com/fwlink/?LinkId=253174).</span><span class="sxs-lookup"><span data-stu-id="94fb8-157">For more information on these features and Server Message Block, see [Server Message Block overview](https://go.microsoft.com/fwlink/?LinkId=253174) (https://go.microsoft.com/fwlink/?LinkId=253174).</span></span><br /><br /> <span data-ttu-id="94fb8-158">Поддержка для сервера SoFS с горизонтальным увеличением масштаба и постоянной доступностью.</span><span class="sxs-lookup"><span data-stu-id="94fb8-158">Support for Scale Out File Server (SoFS) with continuous availability.</span></span>|  
|[!INCLUDE[win8srv](../../includes/win8srv-md.md)] <span data-ttu-id="94fb8-159">R2, включая Server Core</span><span class="sxs-lookup"><span data-stu-id="94fb8-159">R2, including Server Core</span></span>|<span data-ttu-id="94fb8-160">3.2</span><span class="sxs-lookup"><span data-stu-id="94fb8-160">3.2</span></span>|<span data-ttu-id="94fb8-161">Поддержка прозрачных обработок отказов общих папок с нулевым временем простоев и без необходимости вмешательства администраторов для изменения SQL DBA или администраторов файловых серверов для изменения конфигурации кластеров файловых серверов.</span><span class="sxs-lookup"><span data-stu-id="94fb8-161">Support for transparent failover of file shares providing zero downtime with no administrator intervention required for SQL DBA or file server administrator in file server cluster configurations.</span></span><br /><br /> <span data-ttu-id="94fb8-162">Поддержка ввода-вывода с одновременным использованием нескольких сетевых интерфейсов, а также устойчивость к отказу сетевых интерфейсов с помощью SMB Multichannel.</span><span class="sxs-lookup"><span data-stu-id="94fb8-162">Support for IO using multiple network interfaces simultaneously, as well as tolerance to network interface failure, using SMB Multichannel.</span></span><br /><br /> <span data-ttu-id="94fb8-163">Поддержка сетевых интерфейсов с возможностями с помощью SMB Direct.</span><span class="sxs-lookup"><span data-stu-id="94fb8-163">Support for network interfaces with RDMA capabilities using SMB Direct.</span></span><br /><br /> <span data-ttu-id="94fb8-164">Дополнительные сведения об этих возможностях и протоколе SMB см. в разделе [Общие сведения о протоколе SMB](https://go.microsoft.com/fwlink/?LinkId=253174) (https://go.microsoft.com/fwlink/?LinkId=253174).</span><span class="sxs-lookup"><span data-stu-id="94fb8-164">For more information on these features and Server Message Block, see [Server Message Block overview](https://go.microsoft.com/fwlink/?LinkId=253174) (https://go.microsoft.com/fwlink/?LinkId=253174).</span></span><br /><br /> <span data-ttu-id="94fb8-165">Поддержка для сервера SoFS с горизонтальным увеличением масштаба и постоянной доступностью.</span><span class="sxs-lookup"><span data-stu-id="94fb8-165">Support for Scale Out File Server (SoFS) with continuous availability.</span></span><br /><br /> <span data-ttu-id="94fb8-166">Оптимизировано для небольших произвольных операций ввода-вывода чтения и записи, обычных для [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] OLTP.</span><span class="sxs-lookup"><span data-stu-id="94fb8-166">Optimized for small random read/write I/O common to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] OLTP.</span></span><br /><br /> <span data-ttu-id="94fb8-167">Максимальный размер пакета (MTU) включен по умолчанию, что значительно повышает производительность в больших последовательных передачах, таких как хранилище данных [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] или резервное копирование и восстановление базы данных.</span><span class="sxs-lookup"><span data-stu-id="94fb8-167">Maximum Transmission Unit (MTU) is turned on by default, which significantly enhances performance in large sequential transfers like [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] data warehouse and database backup or restore.</span></span>|  
  
## <a name="security-considerations"></a><span data-ttu-id="94fb8-168">Соображения безопасности</span><span class="sxs-lookup"><span data-stu-id="94fb8-168">Security Considerations</span></span>  
  
-   <span data-ttu-id="94fb8-169">Учетная запись службы [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] и учетная запись агента службы [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] должны иметь разрешения «Полный доступ» и разрешения NTFS для общих папок SMB.</span><span class="sxs-lookup"><span data-stu-id="94fb8-169">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] service account and [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] agent service account should have FULL CONTROL share permissions and NTFS permissions on the SMB share folders.</span></span> <span data-ttu-id="94fb8-170">При использовании файлового сервера SMB в качестве учетной записи службы [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] можно использовать учетную запись домена или системы.</span><span class="sxs-lookup"><span data-stu-id="94fb8-170">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] service account can be a domain account or a system account if an SMB file server is used.</span></span> <span data-ttu-id="94fb8-171">Дополнительные сведения о разрешениях для общей папки и NTFS см. в разделе [Разрешения для общей папки и NTFS на файловом сервере](https://go.microsoft.com/fwlink/?LinkId=245535) (https://go.microsoft.com/fwlink/?LinkId=245535).</span><span class="sxs-lookup"><span data-stu-id="94fb8-171">For more information about share and NTFS permissions, see [Share and NTFS Permissions on a File Server](https://go.microsoft.com/fwlink/?LinkId=245535) (https://go.microsoft.com/fwlink/?LinkId=245535).</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="94fb8-172">Полный доступ для общих папок и разрешения NTFS для общих папок SMB должны действовать только для учетной записи службы [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , учетной записи службы агента [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] и пользователей Windows, которым назначена роль администратора сервера.</span><span class="sxs-lookup"><span data-stu-id="94fb8-172">The FULL CONTROL share permissions and NTFS permissions on the SMB share folders should be restricted to: [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] service account, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent service account and windows users with admin server roles.</span></span>  
  
     <span data-ttu-id="94fb8-173">В качестве учетной записи службы [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] рекомендуется использовать учетную запись домена.</span><span class="sxs-lookup"><span data-stu-id="94fb8-173">It is recommended to use domain account as a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] service account.</span></span> <span data-ttu-id="94fb8-174">Если системная учетная запись используется в качестве учетной записи службы, предоставьте разрешения для учетной записи компьютера в формате: _<domain_name>_ **\\** _<computer_name _>**$** .</span><span class="sxs-lookup"><span data-stu-id="94fb8-174">If system account is used as a service account, grant the permissions for the machine account in the format: _<domain_name>_**\\**_<computer_name>_**$**.</span></span>  
  
    > [!NOTE]  
    >  -   <span data-ttu-id="94fb8-175">Если в качестве хранилища задана общая папка SMB, во время установки [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] в качестве учетной записи службы необходимо задать учетную запись домена.</span><span class="sxs-lookup"><span data-stu-id="94fb8-175">During [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] setup, it is required to specify domain account as a service account if SMB file share is specified as a storage option.</span></span> <span data-ttu-id="94fb8-176">При использовании общей папки SMB учетную запись системы можно задать в качестве учетной записи службы только после установки [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="94fb8-176">With SMB file share, System account can only be specified as a service account post [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] installation.</span></span>  
    > -   <span data-ttu-id="94fb8-177">Виртуальные учетные записи не могут проходить проверку подлинности в удаленном расположении.</span><span class="sxs-lookup"><span data-stu-id="94fb8-177">Virtual accounts cannot be authenticated to a remote location.</span></span> <span data-ttu-id="94fb8-178">Все виртуальные учетные записи используют разрешение локальной учетной записи.</span><span class="sxs-lookup"><span data-stu-id="94fb8-178">All virtual accounts use the permission of machine account.</span></span> <span data-ttu-id="94fb8-179">Укажите учетную запись компьютера в формате _<имя_домена>_ **\\** _<имя_компьютера>_ **$** .</span><span class="sxs-lookup"><span data-stu-id="94fb8-179">Provision the machine account in the format _<domain_name>_**\\**_<computer_name>_**$**.</span></span>  
  
-   <span data-ttu-id="94fb8-180">Учетная запись, которая использовалась для установки [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], при установке кластера должна иметь разрешение «Полный доступ» к общей папке SMB, используемой в качестве каталога данных, или к любым другим папкам данных (каталог пользовательской базы данных, каталог журналов пользовательской базы данных, папка TempDB, каталог журналов TempDB, папка резервного копирования).</span><span class="sxs-lookup"><span data-stu-id="94fb8-180">The account used to install [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] should have FULL CONTROL permissions on the SMB file share folder used as the data directory, or any other data folders (User database directory, user database log directory, TempDB directory, TempDB log directory, backup directory) during Cluster Setup.</span></span>  
  
-   <span data-ttu-id="94fb8-181">Учетная запись, используемая для установки [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , должна обладать правами SeSecurityPrivilege на файловом сервере SMB.</span><span class="sxs-lookup"><span data-stu-id="94fb8-181">The account used to install [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] should be granted SeSecurityPrivilege privileges on the SMB file server.</span></span> <span data-ttu-id="94fb8-182">Для предоставления этого права используйте консоль локальной политики безопасности на файловом сервере, чтобы добавить учетную запись установки [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] в политику управления журналом аудита и безопасности.</span><span class="sxs-lookup"><span data-stu-id="94fb8-182">To grant this privilege, use the Local Security Policy console on the file server to add the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] setup account to the Manage auditing and security log policy.</span></span> <span data-ttu-id="94fb8-183">Этот параметр находится в разделе «Назначение прав пользователя» в узле «Локальные политики» консоли «Локальная политика безопасности».</span><span class="sxs-lookup"><span data-stu-id="94fb8-183">This setting is available in the User Rights Assignments section under Local Policies in the Local Security Policy console.</span></span>  
  
## <a name="known-issues"></a><span data-ttu-id="94fb8-184">Известные проблемы</span><span class="sxs-lookup"><span data-stu-id="94fb8-184">Known Issues</span></span>  
  
-   <span data-ttu-id="94fb8-185">После отсоединения базы данных [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] , которая находится в хранилище, подключенном к сети, при попытке повторного присоединения базы данных [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] возможны проблемы с разрешением доступа к базе данных.</span><span class="sxs-lookup"><span data-stu-id="94fb8-185">After you detach a [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] database that resides on network-attached storage, you might run into database permission issue while trying to reattach the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] database.</span></span> <span data-ttu-id="94fb8-186">Эта проблема описывается в [этой статье базы знаний](https://go.microsoft.com/fwlink/?LinkId=237321) (https://go.microsoft.com/fwlink/?LinkId=237321).</span><span class="sxs-lookup"><span data-stu-id="94fb8-186">The issue is defined in [this KB article](https://go.microsoft.com/fwlink/?LinkId=237321) (https://go.microsoft.com/fwlink/?LinkId=237321).</span></span> <span data-ttu-id="94fb8-187">Информацию о решении этой проблемы см. в разделе **Дополнительные сведения** статьи из базы знаний.</span><span class="sxs-lookup"><span data-stu-id="94fb8-187">To work around this issue, see the **More Information** section in the KB article.</span></span>  
  
-   <span data-ttu-id="94fb8-188">Некоторые решения сторонних разработчиков, например устройство NetApp, не поддерживают все вызовы API SQL Server.</span><span class="sxs-lookup"><span data-stu-id="94fb8-188">Some third parties, like NetApp device do not support all SQL Server API calls.</span></span> <span data-ttu-id="94fb8-189">С их помощью вы можете получить следующее:</span><span class="sxs-lookup"><span data-stu-id="94fb8-189">With these you might get:</span></span>   
    <span data-ttu-id="94fb8-190">2015-06-04 13:14:19.97 spid9s ошибка: 17053, серьезность: 16, состояние: 1.</span><span class="sxs-lookup"><span data-stu-id="94fb8-190">2015-06-04 13:14:19.97 spid9s      Error: 17053, Severity: 16, State: 1.</span></span>  
    <span data-ttu-id="94fb8-191">2015-06-04 13:14:19.97 spid9s Додевиоктлаут () GetOverlappedResult (): обнаружена ошибка операционной системы 1 (Неверная функция.).</span><span class="sxs-lookup"><span data-stu-id="94fb8-191">2015-06-04 13:14:19.97 spid9s      DoDevIoCtlOut() GetOverlappedResult() : Operating system error 1(Incorrect function.) encountered.</span></span>  
  
     <span data-ttu-id="94fb8-192">Для файловой системы NTFS эта ошибка неопасна,</span><span class="sxs-lookup"><span data-stu-id="94fb8-192">For NTFS, the error is harmless.</span></span>  <span data-ttu-id="94fb8-193">но в случае с ReFS она может привести к существенному снижению производительности.</span><span class="sxs-lookup"><span data-stu-id="94fb8-193">but for ReFS, it can lead to significant performance degradation.</span></span>  
  
-   <span data-ttu-id="94fb8-194">Если общая папка SMB используется в качестве хранилища для кластеризованного экземпляра [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], то по умолчанию журнал диагностики отказоустойчивого кластера [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] не может быть записан в общий файловый ресурс, так как у библиотеки ресурсов [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] нет разрешения на чтение и запись в общий файловый ресурс.</span><span class="sxs-lookup"><span data-stu-id="94fb8-194">If SMB file share is used as a storage option for a clustered instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], by default the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Failover Cluster Diagnostics Log cannot be written to the file share because [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Resource DLL lacks the read/write permission on the file share.</span></span> <span data-ttu-id="94fb8-195">Чтобы устранить эту проблему, попробуйте один из следующих методов.</span><span class="sxs-lookup"><span data-stu-id="94fb8-195">To resolve this issue, try one of the following methods:</span></span>  
  
    1.  <span data-ttu-id="94fb8-196">Предоставьте разрешения на чтение и запись в общей папке всем объектам-компьютерам в кластере.</span><span class="sxs-lookup"><span data-stu-id="94fb8-196">Grant read/write permissions on the file share to all computer objects in the cluster.</span></span>  
  
    2.  <span data-ttu-id="94fb8-197">Задайте в качестве расположения журналов диагностики локальный путь к файлу.</span><span class="sxs-lookup"><span data-stu-id="94fb8-197">Set the location of the diagnostic logs to a local file path.</span></span> <span data-ttu-id="94fb8-198">См. следующий пример.</span><span class="sxs-lookup"><span data-stu-id="94fb8-198">See the following example:</span></span>  
  
        ```sql  
        ALTER SERVER CONFIGURATION  
        SET DIAGNOSTICS LOG PATH = 'C:\logs';  
        ```  
  
## <a name="see-also"></a><span data-ttu-id="94fb8-199">См. также:</span><span class="sxs-lookup"><span data-stu-id="94fb8-199">See Also</span></span>  
 <span data-ttu-id="94fb8-200">[Планирование установки SQL Server](../../../2014/sql-server/install/planning-a-sql-server-installation.md) </span><span class="sxs-lookup"><span data-stu-id="94fb8-200">[Planning a SQL Server Installation](../../../2014/sql-server/install/planning-a-sql-server-installation.md) </span></span>  
 <span data-ttu-id="94fb8-201">[Практические руководства по установке](../../../2014/sql-server/install/installation-how-to-topics.md) </span><span class="sxs-lookup"><span data-stu-id="94fb8-201">[Installation How-to Topics](../../../2014/sql-server/install/installation-how-to-topics.md) </span></span>  
 [<span data-ttu-id="94fb8-202">Настройка учетных записей службы Windows и разрешений</span><span class="sxs-lookup"><span data-stu-id="94fb8-202">Configure Windows Service Accounts and Permissions</span></span>](../configure-windows/configure-windows-service-accounts-and-permissions.md)  
  
  
