---
title: Установка пакета обновления в системе с минимальным временем простоя для зеркальных баз данных | Документация Майкрософт
ms.custom: ''
ms.date: 03/08/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- hotfixes [SQL Server]
- database mirroring [SQL Server], upgrading system
- rolling upgrades [SQL Server]
- service packs [SQL Server]
- upgrading mirrored database systems
- upgrading SQL Server, mirrored databases
ms.assetid: bdc63142-027d-4ead-9d3e-147331387ef5
author: mashamsft
ms.author: mathoma
ms.openlocfilehash: e878d31ec926f8b2cc460854f422b4d01d32d414
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87734438"
---
# <a name="install-a-service-pack-on-a-system-with-minimal-downtime-for-mirrored-databases"></a><span data-ttu-id="3d9e8-102">Установка пакета обновления на систему с минимальным временем простоя для зеркально отображаемых баз данных</span><span class="sxs-lookup"><span data-stu-id="3d9e8-102">Install a Service Pack on a System with Minimal Downtime for Mirrored Databases</span></span>
  <span data-ttu-id="3d9e8-103">В этом разделе описывается, как добиться минимального времени простоя зеркальных баз данных при установке пакетов обновления и исправлений.</span><span class="sxs-lookup"><span data-stu-id="3d9e8-103">This topic describes how to minimize downtime for mirrored databases when you install service packs and hotfixes.</span></span> <span data-ttu-id="3d9e8-104">Этот процесс подразумевает последовательное обновление экземпляров [!INCLUDE[ssCurrent](../includes/sscurrent-md.md)], участвующих в зеркальном отображении базы данных.</span><span class="sxs-lookup"><span data-stu-id="3d9e8-104">This process involves sequentially upgrading the instances of [!INCLUDE[ssCurrent](../includes/sscurrent-md.md)] that are participating in database mirroring.</span></span> <span data-ttu-id="3d9e8-105">Такая форма обновления, называемая *последовательным обновлением*, сокращает время простоя до одной отработки отказа.</span><span class="sxs-lookup"><span data-stu-id="3d9e8-105">This form of update, which is known as a *rolling update*, reduces downtime to only a single failover.</span></span> <span data-ttu-id="3d9e8-106">Обратите внимание, что в сеансах высокопроизводительного режима при географическом удалении зеркального сервера от основного последовательное обновление может оказаться неподходящим.</span><span class="sxs-lookup"><span data-stu-id="3d9e8-106">Note that for high-performance mode sessions in which the mirror server is geographically distant from the principal server, a rolling update might be inappropriate.</span></span>  
  
 <span data-ttu-id="3d9e8-107">Последовательное обновление является сложным процессом, состоящим из следующих этапов.</span><span class="sxs-lookup"><span data-stu-id="3d9e8-107">A rolling update is a multi-stage process that consists of the following stages:</span></span>  
  
-   <span data-ttu-id="3d9e8-108">Обеспечьте защиту данных.</span><span class="sxs-lookup"><span data-stu-id="3d9e8-108">Protect your data.</span></span>  
  
-   <span data-ttu-id="3d9e8-109">Если в сеанс включен следящий сервер, рекомендуется его удалить.</span><span class="sxs-lookup"><span data-stu-id="3d9e8-109">If the session includes a witness, we recommend that you remove the witness.</span></span> <span data-ttu-id="3d9e8-110">В противном случае при обновлении экземпляра зеркального сервера доступность базы данных будет зависеть от следящего сервера, остающегося подключенным к экземпляру основного сервера.</span><span class="sxs-lookup"><span data-stu-id="3d9e8-110">Otherwise, when the mirror server instance is being updated, database availability depends on the witness that remains connected to the principal server instance.</span></span> <span data-ttu-id="3d9e8-111">После удаления следящего сервера его можно обновить в любой момент во время последовательного обновления без дополнительного простоя базы данных.</span><span class="sxs-lookup"><span data-stu-id="3d9e8-111">After you remove a witness, you can update it at any time during the rolling update process without risking database downtime.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="3d9e8-112">Дополнительные сведения см. в статье [Кворум. Как следящий сервер влияет на доступность базы данных &#40;зеркальное отображение базы данных&#41;](database-mirroring/quorum-how-a-witness-affects-database-availability-database-mirroring.md).</span><span class="sxs-lookup"><span data-stu-id="3d9e8-112">For more information, see [Quorum: How a Witness Affects Database Availability &#40;Database Mirroring&#41;](database-mirroring/quorum-how-a-witness-affects-database-availability-database-mirroring.md).</span></span>  
  
-   <span data-ttu-id="3d9e8-113">Если сеанс выполняется в режиме высокой производительности, измените его на режим высокой безопасности.</span><span class="sxs-lookup"><span data-stu-id="3d9e8-113">If a session is running in high-performance mode, change the operating mode to high-safety mode.</span></span>  
  
-   <span data-ttu-id="3d9e8-114">Обновление всех экземпляров сервера, участвующих в зеркальном отображении базы данных.</span><span class="sxs-lookup"><span data-stu-id="3d9e8-114">Update each server instance that is involved in database mirroring.</span></span> <span data-ttu-id="3d9e8-115">Последовательное обновление включает обновление экземпляра сервера, который в настоящий момент является зеркальным сервером, ручной перевод на другой ресурс каждой из его зеркальных баз данных и обновление экземпляра сервера, который первоначально был основным сервером, а сейчас является зеркальным.</span><span class="sxs-lookup"><span data-stu-id="3d9e8-115">A rolling update involves upgrading the server instance that is currently the mirror server, manually failing over each of its mirrored databases, and upgrading the server instance that was first the principal server (and is now the new mirror server).</span></span> <span data-ttu-id="3d9e8-116">В этот момент необходимо возобновить зеркальное отображение.</span><span class="sxs-lookup"><span data-stu-id="3d9e8-116">At this point, you will have to resume mirroring.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="3d9e8-117">Перед началом пошагового обновления рекомендуется выполнить пробную отработку отказа вручную как минимум в одном сеансе зеркального отображения.</span><span class="sxs-lookup"><span data-stu-id="3d9e8-117">Before starting a rolling update, we recommend that you perform a practice manual failover on at least one of your mirroring sessions.</span></span>  
  
-   <span data-ttu-id="3d9e8-118">При необходимости перейдите в высокопроизводительный режим.</span><span class="sxs-lookup"><span data-stu-id="3d9e8-118">Revert to high-performance mode, if it is required.</span></span>  
  
-   <span data-ttu-id="3d9e8-119">Если требуется, верните следящий сервер в сеанс.</span><span class="sxs-lookup"><span data-stu-id="3d9e8-119">Return the witness to the mirroring session, if it is required.</span></span>  
  
 <span data-ttu-id="3d9e8-120">Ниже описаны процедуры для этих этапов.</span><span class="sxs-lookup"><span data-stu-id="3d9e8-120">The procedures for these stages are described here.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="3d9e8-121">Экземпляр сервера может одновременно исполнять различные роли зеркального отображения (основной сервер, зеркальный сервер или следящий сервер) в параллельных сеансах зеркального отображения.</span><span class="sxs-lookup"><span data-stu-id="3d9e8-121">A server instance might be performing different mirroring roles (principal server, mirror server, or witness) in concurrent mirroring sessions.</span></span> <span data-ttu-id="3d9e8-122">В этом случае придется соответствующим образом адаптировать процесс последовательного обновления.</span><span class="sxs-lookup"><span data-stu-id="3d9e8-122">In this case, you will have to adapt the basic rolling update process accordingly.</span></span>  
  
### <a name="to-protect-your-data-before-an-update-a-best-practice"></a><span data-ttu-id="3d9e8-123">Защита данных перед обновлением (рекомендации)</span><span class="sxs-lookup"><span data-stu-id="3d9e8-123">To protect your data before an update (a best practice)</span></span>  
  
1.  <span data-ttu-id="3d9e8-124">Создайте полную резервную копию каждой основной базы данных.</span><span class="sxs-lookup"><span data-stu-id="3d9e8-124">Perform a full database backup on every principal database.</span></span>  
  
     <span data-ttu-id="3d9e8-125">**Создание резервной копии базы данных**</span><span class="sxs-lookup"><span data-stu-id="3d9e8-125">**To back up a database**</span></span>  
  
    -   <span data-ttu-id="3d9e8-126">[Создание полной резервной копии базы данных (SQL Server)](../relational-databases/backup-restore/create-a-full-database-backup-sql-server.md)</span><span class="sxs-lookup"><span data-stu-id="3d9e8-126">[Create a Full Database Backup &#40;SQL Server&#41;](../relational-databases/backup-restore/create-a-full-database-backup-sql-server.md).</span></span>  
  
2.  <span data-ttu-id="3d9e8-127">Выполните команду [DBCC CHECKDB](/sql/t-sql/database-console-commands/dbcc-checkdb-transact-sql) в каждой основной базе данных.</span><span class="sxs-lookup"><span data-stu-id="3d9e8-127">Run the [DBCC CHECKDB](/sql/t-sql/database-console-commands/dbcc-checkdb-transact-sql) command on every principal database.</span></span>  
  
### <a name="to-remove-a-witness-from-a-session"></a><span data-ttu-id="3d9e8-128">Удаление следящего сервера из сеанса</span><span class="sxs-lookup"><span data-stu-id="3d9e8-128">To remove a witness from a session</span></span>  
  
1.  <span data-ttu-id="3d9e8-129">Если сеанс зеркального отображения включает следящий сервер, рекомендуется удалить его перед выполнением последовательного обновления.</span><span class="sxs-lookup"><span data-stu-id="3d9e8-129">If a mirroring session involves a witness, we recommend that you remove the witness before you perform a rolling update.</span></span>  
  
     <span data-ttu-id="3d9e8-130">**Удаление следящего сервера**</span><span class="sxs-lookup"><span data-stu-id="3d9e8-130">**To remove the witness**</span></span>  
  
    -   [<span data-ttu-id="3d9e8-131">Удаление следящего сервера из сеанса зеркального отображения базы данных (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="3d9e8-131">Remove the Witness from a Database Mirroring Session &#40;SQL Server&#41;</span></span>](database-mirroring/remove-the-witness-from-a-database-mirroring-session-sql-server.md)  
  
### <a name="to-change-a-session-from-high-performance-mode-to-high-safety-mode"></a><span data-ttu-id="3d9e8-132">Изменение режима сеанса с высокопроизводительного на режим высокой безопасности</span><span class="sxs-lookup"><span data-stu-id="3d9e8-132">To change a session from high-performance mode to high-safety mode</span></span>  
  
1.  <span data-ttu-id="3d9e8-133">Если сеанс зеркального отображения выполняется в высокопроизводительном режиме, перед выполнением последовательного обновления измените его на режим высокой безопасности без автоматической отработки отказа.</span><span class="sxs-lookup"><span data-stu-id="3d9e8-133">If a mirroring session is running in high-performance mode, before you perform a rolling update, change the operating mode to high safety without automatic failover.</span></span> <span data-ttu-id="3d9e8-134">Используйте один из следующих методов.</span><span class="sxs-lookup"><span data-stu-id="3d9e8-134">Use one of the following methods:</span></span>  
  
    -   <span data-ttu-id="3d9e8-135">В [!INCLUDE[ssManStudioFull](../includes/ssmanstudiofull-md.md)]: измените параметр **Режим работы** на **Высокая безопасность без автоматической отработки отказа (синхронный)** с помощью страницы [Зеркальное отображение](../relational-databases/databases/database-properties-mirroring-page.md) диалогового окна **Свойства базы данных**.</span><span class="sxs-lookup"><span data-stu-id="3d9e8-135">In [!INCLUDE[ssManStudioFull](../includes/ssmanstudiofull-md.md)]: Change the **Operating mode** option to **High safety without automatic failover (synchronous)** by using the [Mirroring Page](../relational-databases/databases/database-properties-mirroring-page.md) of the **Database Properties** dialog box.</span></span> <span data-ttu-id="3d9e8-136">Дополнительные сведения о доступе к этой странице см. в разделе [Запуск мастер настройки безопасности зеркального отображения баз данных (среда SQL Server Management Studio)](database-mirroring/start-the-configuring-database-mirroring-security-wizard.md).</span><span class="sxs-lookup"><span data-stu-id="3d9e8-136">For information about how to access this page, see [Start the Configuring Database Mirroring Security Wizard &#40;SQL Server Management Studio&#41;](database-mirroring/start-the-configuring-database-mirroring-security-wizard.md).</span></span>  
  
    -   <span data-ttu-id="3d9e8-137">В [!INCLUDE[tsql](../includes/tsql-md.md)]: установите безопасность транзакций как FULL.</span><span class="sxs-lookup"><span data-stu-id="3d9e8-137">In [!INCLUDE[tsql](../includes/tsql-md.md)]: Set transaction safety to FULL.</span></span> <span data-ttu-id="3d9e8-138">Дополнительные сведения см. в разделе [Изменение безопасности транзакций в сеансах зеркального отображения базы данных (Transact-SQL)](database-mirroring/change-transaction-safety-in-a-database-mirroring-session-transact-sql.md).</span><span class="sxs-lookup"><span data-stu-id="3d9e8-138">For more information, see [Change Transaction Safety in a Database Mirroring Session &#40;Transact-SQL&#41;](database-mirroring/change-transaction-safety-in-a-database-mirroring-session-transact-sql.md).</span></span>  
  
### <a name="to-perform-the-rolling-update"></a><span data-ttu-id="3d9e8-139">Выполнение последовательного обновления</span><span class="sxs-lookup"><span data-stu-id="3d9e8-139">To perform the rolling update</span></span>  
  
1.  <span data-ttu-id="3d9e8-140">Чтобы сократить время простоя, рекомендуется выполнить следующее: запустите последовательное обновление, обновив любой участник зеркального отображения, который в настоящее время является зеркальным сервером во всех сеансах зеркального отображения.</span><span class="sxs-lookup"><span data-stu-id="3d9e8-140">To minimize downtime, we recommend the following: Start the rolling update by updating any mirroring partner that is currently the mirror server in all its mirroring sessions.</span></span> <span data-ttu-id="3d9e8-141">На этом этапе, возможно, придется обновить несколько экземпляров сервера.</span><span class="sxs-lookup"><span data-stu-id="3d9e8-141">You might have to update multiple server instances at this point.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="3d9e8-142">Следящий сервер можно обновить в любой момент последовательного обновления.</span><span class="sxs-lookup"><span data-stu-id="3d9e8-142">A witness can be updated at any point in the rolling update process.</span></span> <span data-ttu-id="3d9e8-143">Например, если экземпляр сервера является зеркальным сервером в сеансе 1 и следящим сервером в сеансе 2, этот сервер можно обновить сразу.</span><span class="sxs-lookup"><span data-stu-id="3d9e8-143">For example, if a server instance is a mirror server in Session 1 and is a witness in Session 2, you can update the server instance now.</span></span>  
  
     <span data-ttu-id="3d9e8-144">Экземпляр сервера, который следует обновлять в первую очередь, зависит от текущей конфигурации сеансов зеркального отображения следующим образом.</span><span class="sxs-lookup"><span data-stu-id="3d9e8-144">The server instance to update first depends on the current configuration of your mirroring sessions, as follows:</span></span>  
  
    -   <span data-ttu-id="3d9e8-145">Если какой-либо из экземпляров сервера уже является зеркальным сервером во всех сеансах зеркального отображения баз данных, установите на него пакет обновления или исправление.</span><span class="sxs-lookup"><span data-stu-id="3d9e8-145">If any server instance is already the mirror server in all of its mirroring sessions, install the service pack or the hotfix on that server instance.</span></span>  
  
    -   <span data-ttu-id="3d9e8-146">Если все экземпляры сервера в настоящее время являются основными серверами в сеансе зеркального отображения баз данных, выберите первый экземпляр сервера для обновления.</span><span class="sxs-lookup"><span data-stu-id="3d9e8-146">If all of your server instances are currently the principal server in any mirroring sessions, select one server instance to update first.</span></span> <span data-ttu-id="3d9e8-147">Затем вручную переведите каждую из основных баз данных на другой ресурс и обновите экземпляр сервера путем установки пакета обновления или исправления.</span><span class="sxs-lookup"><span data-stu-id="3d9e8-147">Then, manually fail over each of its principal databases and update that server instance by installing the service pack or the hotfix.</span></span>  
  
     <span data-ttu-id="3d9e8-148">После обновления экземпляр сервера автоматически подключится к сеансам зеркального отображения.</span><span class="sxs-lookup"><span data-stu-id="3d9e8-148">After being updated, a server instance automatically rejoins each of its mirroring sessions.</span></span>  
  
     <span data-ttu-id="3d9e8-149">**Выполнение отработки отказа вручную**</span><span class="sxs-lookup"><span data-stu-id="3d9e8-149">**To perform a manual failover**</span></span>  
  
    -   [<span data-ttu-id="3d9e8-150">Переключение сеанса зеркального отображения базы данных на другой ресурс вручную (среда SQL Server Management Studio)</span><span class="sxs-lookup"><span data-stu-id="3d9e8-150">Manually Fail Over a Database Mirroring Session &#40;SQL Server Management Studio&#41;</span></span>](database-mirroring/manually-fail-over-a-database-mirroring-session-sql-server-management-studio.md)  
  
    -   <span data-ttu-id="3d9e8-151">[Переключение сеанса зеркального отображения базы данных на другой ресурс вручную (язык Transact-SQL)](database-mirroring/manually-fail-over-a-database-mirroring-session-transact-sql.md).</span><span class="sxs-lookup"><span data-stu-id="3d9e8-151">[Manually Fail Over a Database Mirroring Session &#40;Transact-SQL&#41;](database-mirroring/manually-fail-over-a-database-mirroring-session-transact-sql.md).</span></span>  
  
     <span data-ttu-id="3d9e8-152">Дополнительные сведения об отработке отказа вручную см. в разделе [Переключение ролей во время сеанса зеркального отображения базы данных (SQL Server)](database-mirroring/role-switching-during-a-database-mirroring-session-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="3d9e8-152">For information about how manual failover works, see [Role Switching During a Database Mirroring Session &#40;SQL Server&#41;](database-mirroring/role-switching-during-a-database-mirroring-session-sql-server.md).</span></span>  
  
2.  <span data-ttu-id="3d9e8-153">В каждом сеансе зеркального отображения, зеркальный сервер которого был обновлен, дождитесь окончания синхронизации сеанса.</span><span class="sxs-lookup"><span data-stu-id="3d9e8-153">For each mirroring session whose mirror server instance has just been updated, wait for the session to synchronize.</span></span> <span data-ttu-id="3d9e8-154">Затем подключитесь к экземпляру основного сервера и вручную переведите этот сеанс на другой ресурс.</span><span class="sxs-lookup"><span data-stu-id="3d9e8-154">Then, connect to the principal server instance, and manually fail over the session.</span></span> <span data-ttu-id="3d9e8-155">При отработке отказа обновленный сервер становится основным сервером для этого сеанса, а бывший основной сервер становится зеркальным.</span><span class="sxs-lookup"><span data-stu-id="3d9e8-155">On failover, the updated server instance becomes the principal server for that session, and the former principal server becomes the mirror server.</span></span>  
  
     <span data-ttu-id="3d9e8-156">Цель этого этапа — сделать другой экземпляр сервера зеркальным во всех сеансах зеркального отображения, в которых он участвует.</span><span class="sxs-lookup"><span data-stu-id="3d9e8-156">The goal of this step is for another server instance to become the mirror server in every mirroring session in which it is a partner.</span></span>  
  
3.  <span data-ttu-id="3d9e8-157">После перехода на другой ресурс рекомендуется выполнить в основной базе данных команду [DBCC CHECKDB](/sql/t-sql/database-console-commands/dbcc-checkdb-transact-sql) .</span><span class="sxs-lookup"><span data-stu-id="3d9e8-157">After you fail over, we recommend that you run the [DBCC CHECKDB](/sql/t-sql/database-console-commands/dbcc-checkdb-transact-sql) command on the principal database.</span></span>  
  
4.  <span data-ttu-id="3d9e8-158">Установите пакет обновления или исправление на каждом экземпляре сервера, который теперь стал зеркальным сервером во всех сеансах зеркального отображения баз данных, участником которых он является.</span><span class="sxs-lookup"><span data-stu-id="3d9e8-158">Install the service pack or the hotfix on each server instance that is now the mirror server in all mirroring sessions in which it is a partner.</span></span> <span data-ttu-id="3d9e8-159">На этом этапе, возможно, придется обновить несколько серверов.</span><span class="sxs-lookup"><span data-stu-id="3d9e8-159">You might have to update multiple servers at this point.</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="3d9e8-160">В сложной конфигурации зеркального отображения некоторые экземпляры сервера могут все еще исполнять роль основного сервера в одном или нескольких сеансах зеркального отображения.</span><span class="sxs-lookup"><span data-stu-id="3d9e8-160">In a complex mirroring configuration, some server instance might still be the original principal server in one or more mirroring sessions.</span></span> <span data-ttu-id="3d9e8-161">Повторите шаги 2-4 для этих экземпляров сервера, пока не будут обновлены все задействованные экземпляры.</span><span class="sxs-lookup"><span data-stu-id="3d9e8-161">Repeat steps 2-4 for those server instances until all instances involved are updated.</span></span>  
  
5.  <span data-ttu-id="3d9e8-162">Возобновление сеанса зеркального отображения.</span><span class="sxs-lookup"><span data-stu-id="3d9e8-162">Resume the mirroring session.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="3d9e8-163">Автоматическая отработка отказа не будет работать, пока не будут обновлены все следящие серверы.</span><span class="sxs-lookup"><span data-stu-id="3d9e8-163">Automatic failover will not work until the witness has been updated.</span></span>  
  
6.  <span data-ttu-id="3d9e8-164">Установите пакеты обновления или исправления на оставшемся экземпляре сервера, который является следящим во всех сеансах зеркального отображения.</span><span class="sxs-lookup"><span data-stu-id="3d9e8-164">Install the service packs or hotfixes on any remaining server instance that is the witness in all its mirroring sessions.</span></span> <span data-ttu-id="3d9e8-165">После подключения обновленного следящего сервера к сеансу зеркального отображения становится возможным автоматическая отработка отказа.</span><span class="sxs-lookup"><span data-stu-id="3d9e8-165">After an updated witness rejoins a mirroring session, automatic failover becomes possible again.</span></span> <span data-ttu-id="3d9e8-166">На этом этапе, возможно, придется обновить несколько серверов.</span><span class="sxs-lookup"><span data-stu-id="3d9e8-166">You might have to update multiple servers at this point.</span></span>  
  
### <a name="to-return-a-session-to-high-performance-mode"></a><span data-ttu-id="3d9e8-167">Возвращение сеанса в высокопроизводительный режим</span><span class="sxs-lookup"><span data-stu-id="3d9e8-167">To return a session to high-performance mode</span></span>  
  
1.  <span data-ttu-id="3d9e8-168">При необходимости вернитесь в высокопроизводительный режим, используя один из следующих методов.</span><span class="sxs-lookup"><span data-stu-id="3d9e8-168">Optionally, return to high-performance mode by using one of the following methods:</span></span>  
  
    -   <span data-ttu-id="3d9e8-169">В [!INCLUDE[ssManStudioFull](../includes/ssmanstudiofull-md.md)]: измените параметр **Режим работы** на **Высокая производительность (асинхронный)** с помощью страницы [Зеркальное отображение](../relational-databases/databases/database-properties-mirroring-page.md) диалогового окна **Свойства базы данных**.</span><span class="sxs-lookup"><span data-stu-id="3d9e8-169">In [!INCLUDE[ssManStudioFull](../includes/ssmanstudiofull-md.md)]: Change the **Operating mode** option to **High performance (asynchronous)** by using the [Mirroring Page](../relational-databases/databases/database-properties-mirroring-page.md) of the **Database Properties** dialog box.</span></span>  
  
    -   <span data-ttu-id="3d9e8-170">В [!INCLUDE[tsql](../includes/tsql-md.md)] : используйте [инструкцию ALTER DATABASE](/sql/t-sql/statements/alter-database-transact-sql-database-mirroring) , чтобы установить безопасность транзакций в значение OFF.</span><span class="sxs-lookup"><span data-stu-id="3d9e8-170">In [!INCLUDE[tsql](../includes/tsql-md.md)]: Use [ALTER DATABASE](/sql/t-sql/statements/alter-database-transact-sql-database-mirroring) to set transaction safety to OFF.</span></span>  
  
### <a name="to-return-a-witness-to-a-mirroring-session"></a><span data-ttu-id="3d9e8-171">Возврат следящего сервера в сеанс зеркального отображения</span><span class="sxs-lookup"><span data-stu-id="3d9e8-171">To return a witness to a mirroring session</span></span>  
  
1.  <span data-ttu-id="3d9e8-172">При необходимости в режиме высокой безопасности повторно соедините следящий сервер со всеми сеансами зеркального отображения.</span><span class="sxs-lookup"><span data-stu-id="3d9e8-172">Optionally, in high-safety mode, reestablish the witness to each mirroring session.</span></span>  
  
     <span data-ttu-id="3d9e8-173">**Повторное соединение следящего сервера**</span><span class="sxs-lookup"><span data-stu-id="3d9e8-173">**To reestablish the witness**</span></span>  
  
    -   [<span data-ttu-id="3d9e8-174">Добавление или замена следящего сервера зеркального отображения базы данных (среда SQL Server Management Studio)</span><span class="sxs-lookup"><span data-stu-id="3d9e8-174">Add or Replace a Database Mirroring Witness &#40;SQL Server Management Studio&#41;</span></span>](database-mirroring/add-or-replace-a-database-mirroring-witness-sql-server-management-studio.md)  
  
    -   [<span data-ttu-id="3d9e8-175">Добавление следящего сервера для зеркального отображения базы данных с использованием проверки подлинности Windows (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="3d9e8-175">Add a Database Mirroring Witness Using Windows Authentication &#40;Transact-SQL&#41;</span></span>](database-mirroring/add-a-database-mirroring-witness-using-windows-authentication-transact-sql.md)  
  
## <a name="see-also"></a><span data-ttu-id="3d9e8-176">См. также:</span><span class="sxs-lookup"><span data-stu-id="3d9e8-176">See Also</span></span>  
 <span data-ttu-id="3d9e8-177">[Зеркальное отображение базы данных ALTER DATABASE (Transact-SQL)](/sql/t-sql/statements/alter-database-transact-sql-database-mirroring) </span><span class="sxs-lookup"><span data-stu-id="3d9e8-177">[ALTER DATABASE Database Mirroring &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-database-transact-sql-database-mirroring) </span></span>  
 <span data-ttu-id="3d9e8-178">[BACKUP (Transact-SQL)](/sql/t-sql/statements/backup-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="3d9e8-178">[BACKUP &#40;Transact-SQL&#41;](/sql/t-sql/statements/backup-transact-sql) </span></span>  
 <span data-ttu-id="3d9e8-179">[Зеркальное отображение базы данных (SQL Server)](database-mirroring/database-mirroring-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="3d9e8-179">[Database Mirroring &#40;SQL Server&#41;](database-mirroring/database-mirroring-sql-server.md) </span></span>  
 <span data-ttu-id="3d9e8-180">[Режимы работы зеркального отображения базы данных](database-mirroring/database-mirroring-operating-modes.md) </span><span class="sxs-lookup"><span data-stu-id="3d9e8-180">[Database Mirroring Operating Modes](database-mirroring/database-mirroring-operating-modes.md) </span></span>  
 <span data-ttu-id="3d9e8-181">[Переключение ролей во время сеанса зеркального отображения базы данных (SQL Server)](database-mirroring/role-switching-during-a-database-mirroring-session-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="3d9e8-181">[Role Switching During a Database Mirroring Session &#40;SQL Server&#41;](database-mirroring/role-switching-during-a-database-mirroring-session-sql-server.md) </span></span>  
 <span data-ttu-id="3d9e8-182">[Запуск монитора зеркального отображения баз данных (среда SQL Server Management Studio)](database-mirroring/start-database-mirroring-monitor-sql-server-management-studio.md) </span><span class="sxs-lookup"><span data-stu-id="3d9e8-182">[Start Database Mirroring Monitor &#40;SQL Server Management Studio&#41;](database-mirroring/start-database-mirroring-monitor-sql-server-management-studio.md) </span></span>  
 [<span data-ttu-id="3d9e8-183">Просмотр состояния зеркального отображения базы данных (среда SQL Server Management Studio)</span><span class="sxs-lookup"><span data-stu-id="3d9e8-183">View the State of a Mirrored Database &#40;SQL Server Management Studio&#41;</span></span>](database-mirroring/view-the-state-of-a-mirrored-database-sql-server-management-studio.md)  
  
  
