---
title: Удаленные серверы | Документы Майкрософт
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: configuration
ms.topic: conceptual
helpviewer_keywords:
- server management [SQL Server], remote servers
- remote servers [SQL Server], configuring
- remote servers [SQL Server]
- servers [SQL Server], remote
- remote access option
ms.assetid: abf0fa24-f199-4273-9a1a-e8787ac9bee1
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 1d42fc2ed6acd4e46e383c0a56afcc8a8b27d3aa
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87664489"
---
# <a name="remote-servers"></a><span data-ttu-id="e0776-102">Удаленные серверы</span><span class="sxs-lookup"><span data-stu-id="e0776-102">Remote Servers</span></span>
  <span data-ttu-id="e0776-103">Удаленные серверы в [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] поддерживаются лишь для обратной совместимости.</span><span class="sxs-lookup"><span data-stu-id="e0776-103">Remote servers are supported in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] for backward compatibility only.</span></span> <span data-ttu-id="e0776-104">Новые приложения должны использовать вместо них связанные серверы.</span><span class="sxs-lookup"><span data-stu-id="e0776-104">New applications should use linked servers instead.</span></span> <span data-ttu-id="e0776-105">Дополнительные сведения см. в разделе [Связанные серверы (компонент Database Engine)](../../relational-databases/linked-servers/linked-servers-database-engine.md).</span><span class="sxs-lookup"><span data-stu-id="e0776-105">For more information, see [Linked Servers &#40;Database Engine&#41;](../../relational-databases/linked-servers/linked-servers-database-engine.md).</span></span>  
  
 <span data-ttu-id="e0776-106">Настройка удаленного сервера позволяет клиенту, подключившемуся к одному экземпляру [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , выполнить хранимую процедуру на другом экземпляре [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , не устанавливая отдельное соединение.</span><span class="sxs-lookup"><span data-stu-id="e0776-106">A remote server configuration allows for a client connected to one instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] to execute a stored procedure on another instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] without establishing a separate connection.</span></span> <span data-ttu-id="e0776-107">Вместо этого сервер, к которому подключен клиент, принимает запрос клиента и отправляет запрос удаленному серверу от имени клиента.</span><span class="sxs-lookup"><span data-stu-id="e0776-107">Instead, the server to which the client is connected accepts the client request and sends the request to the remote server on behalf of the client.</span></span> <span data-ttu-id="e0776-108">Удаленный сервер обрабатывает запрос и возвращает результаты исходному серверу.</span><span class="sxs-lookup"><span data-stu-id="e0776-108">The remote server processes the request and returns any results to the original server.</span></span> <span data-ttu-id="e0776-109">Этот сервер, в свою очередь, передает результаты клиенту.</span><span class="sxs-lookup"><span data-stu-id="e0776-109">This server in turn passes those results to the client.</span></span> <span data-ttu-id="e0776-110">При настройке удаленных серверов необходимо учитывать требования обеспечения безопасности.</span><span class="sxs-lookup"><span data-stu-id="e0776-110">When you set up a remote server configuration, you should also consider how to establish security.</span></span>  
  
 <span data-ttu-id="e0776-111">Если требуется настроить серверы таким образом, чтобы хранимые процедуры выполнялись на другом сервере, и при этом не существует уже выполненной настройки удаленных серверов, используйте связанные сервера вместо удаленных серверов.</span><span class="sxs-lookup"><span data-stu-id="e0776-111">If you want to set up a server configuration to execute stored procedures on another server and do not have existing remote server configurations, use linked servers instead of remote servers.</span></span> <span data-ttu-id="e0776-112">Связанные сервера поддерживают выполнение и хранимых процедур, и распределенных запросов; в то же время удаленные сервера поддерживают только хранимые процедуры.</span><span class="sxs-lookup"><span data-stu-id="e0776-112">Both stored procedures and distributed queries are allowed against linked servers; however, only stored procedures are allowed against remote servers.</span></span>  
  
## <a name="remote-server-details"></a><span data-ttu-id="e0776-113">Подробности использования удаленных серверов</span><span class="sxs-lookup"><span data-stu-id="e0776-113">Remote Server Details</span></span>  
 <span data-ttu-id="e0776-114">Удаленные сервера настраиваются парами.</span><span class="sxs-lookup"><span data-stu-id="e0776-114">Remote servers are set up in pairs.</span></span> <span data-ttu-id="e0776-115">Чтобы настроить пару удаленных серверов, нужно настроить оба сервера таким образом, чтобы они являлись удаленными серверами друг для друга.</span><span class="sxs-lookup"><span data-stu-id="e0776-115">To set up a pair of remote servers, configure both servers to recognize each other as remote servers.</span></span>  
  
 <span data-ttu-id="e0776-116">Обычно устанавливать параметры конфигурации удаленных серверов не требуется.</span><span class="sxs-lookup"><span data-stu-id="e0776-116">Most of the time, you should not have to set configuration options for remote servers.</span></span> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="e0776-117">при установке значений по умолчанию соединения с удаленным сервером будут разрешены как на локальном, так и на удаленном компьютерах.</span><span class="sxs-lookup"><span data-stu-id="e0776-117">Set sets the defaults on both the local and remote computers to allow for remote server connections.</span></span>  
  
 <span data-ttu-id="e0776-118">Для функционирования доступа к удаленному серверу требуется, чтобы параметр конфигурации **remote access** был установлен в 1 как на локальном, так и на удаленном компьютерах.</span><span class="sxs-lookup"><span data-stu-id="e0776-118">For remote server access to work, the **remote access** configuration option must be set to 1 on both the local and remote computers.</span></span> <span data-ttu-id="e0776-119">Параметр  **remote access** управляет возможностью подключений с удаленных серверов (это значение по умолчанию).</span><span class="sxs-lookup"><span data-stu-id="e0776-119">(This is the default setting.)  **remote access** controls logins from remote servers.</span></span> <span data-ttu-id="e0776-120">Этот параметр можно сбросить, воспользовавшись хранимой процедурой [!INCLUDE[tsql](../../includes/tsql-md.md)] **sp_configure** или же средой [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span><span class="sxs-lookup"><span data-stu-id="e0776-120">You can reset this configuration option by using either the [!INCLUDE[tsql](../../includes/tsql-md.md)] **sp_configure** stored procedure or [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span></span> <span data-ttu-id="e0776-121">Чтобы установить параметр в среде [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]на странице **Свойства соединений с серверами** , используйте возможность **Разрешить удаленные соединения с этим сервером**.</span><span class="sxs-lookup"><span data-stu-id="e0776-121">To set the option in [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], on the **Server Properties Connections** page, use **Allow remote connections to this server**.</span></span> <span data-ttu-id="e0776-122">Чтобы открыть вкладку **Свойства соединений с сервером** , в обозревателе объектов щелкните имя сервера правой кнопкой мыши и выберите **Свойства**.</span><span class="sxs-lookup"><span data-stu-id="e0776-122">To reach the **Server Properties Connections** page, in Object Explorer, right-click the server name, and then click **Properties**.</span></span> <span data-ttu-id="e0776-123">В окне **Свойства сервера** выберите вкладку **Соединения** .</span><span class="sxs-lookup"><span data-stu-id="e0776-123">On the **Server Properties** page, click the **Connections** page.</span></span>  
  
 <span data-ttu-id="e0776-124">На этой вкладке можно отключить удаленную настройку сервера, чтобы запретить доступ к локальному серверу пользователям удаленного сервера, с которым он составляет пару.</span><span class="sxs-lookup"><span data-stu-id="e0776-124">From the local server, you can disable a remote server configuration to prevent access to that local server by users on the remote server with which it is paired.</span></span>  
  
## <a name="security-for-remote-servers"></a><span data-ttu-id="e0776-125">Безопасность удаленных серверов</span><span class="sxs-lookup"><span data-stu-id="e0776-125">Security for Remote Servers</span></span>  
 <span data-ttu-id="e0776-126">Чтобы включить вызовы по протоколу RPC для удаленного сервера, необходимо настроить сопоставления имен входа на удаленном сервере и, возможно, на локальном сервере, где запущен экземпляр [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="e0776-126">To enable remote procedure calls (RPC) against a remote server, you must set up login mappings on the remote server and possibly on the local server that is running an instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="e0776-127">По умолчанию вызовы удаленных процедур (RPC) в [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]отключены.</span><span class="sxs-lookup"><span data-stu-id="e0776-127">RPC is disabled by default in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="e0776-128">Такая конфигурация усиливает безопасность сервера, уменьшая его подверженную атакам контактную зону.</span><span class="sxs-lookup"><span data-stu-id="e0776-128">This configuration enhances the security of your server by reducing its attackable surface area.</span></span> <span data-ttu-id="e0776-129">Перед использованием RPC необходимо включить эту функцию.</span><span class="sxs-lookup"><span data-stu-id="e0776-129">Before using RPC you must enable this feature.</span></span> <span data-ttu-id="e0776-130">Дополнительные сведения см. в разделе [sp_configure &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-configure-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="e0776-130">For more information see [sp_configure &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-configure-transact-sql).</span></span>  
  
### <a name="setting-up-the-remote-server"></a><span data-ttu-id="e0776-131">Настройка удаленного сервера</span><span class="sxs-lookup"><span data-stu-id="e0776-131">Setting Up the Remote Server</span></span>  
 <span data-ttu-id="e0776-132">Сопоставления удаленных имен входа должны быть настроены на удаленном сервере.</span><span class="sxs-lookup"><span data-stu-id="e0776-132">Remote login mappings must be set up on the remote server.</span></span> <span data-ttu-id="e0776-133">При помощи данных сопоставлений удаленный сервер привязывает входящее имя входа соединения RPC от определенного сервера к локальному имени входа.</span><span class="sxs-lookup"><span data-stu-id="e0776-133">Using these mappings, the remote server maps the incoming login for an RPC connection from a specified server to a local login.</span></span> <span data-ttu-id="e0776-134">Сопоставления удаленных имен входа могут быть установлены при помощи хранимой процедуры **sp_addremotelogin** на удаленном сервере.</span><span class="sxs-lookup"><span data-stu-id="e0776-134">Remote login mappings can be set up by using the **sp_addremotelogin** stored procedure on the remote server.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="e0776-135">Параметр **trusted** процедуры  **sp_remoteoption** не поддерживается в [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="e0776-135">The **trusted** option of  **sp_remoteoption** is not supported in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>  
  
### <a name="setting-up-the-local-server"></a><span data-ttu-id="e0776-136">Настройка локального сервера</span><span class="sxs-lookup"><span data-stu-id="e0776-136">Setting Up the Local Server</span></span>  
 <span data-ttu-id="e0776-137">Для локальных имен входа [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , прошедших проверку подлинности, устанавливать сопоставление имен входа на локальном сервере не нужно.</span><span class="sxs-lookup"><span data-stu-id="e0776-137">For [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] authenticated local logins, you do not have to set up a login mapping on the local server.</span></span> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="e0776-138">используются локальное имя входа и пароль для подключения к удаленному серверу.</span><span class="sxs-lookup"><span data-stu-id="e0776-138">uses the local login and password to connect to the remote server.</span></span> <span data-ttu-id="e0776-139">Для имен входа, прошедших проверку подлинности Windows, настройте сопоставление локальных имен входа, определяющее пароль и имя входа, используемые экземпляром [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] при создании подключения RPC к удаленному серверу.</span><span class="sxs-lookup"><span data-stu-id="e0776-139">For Windows authenticated logins, set up a local login mapping on a local server that defines what login and password are used by an instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] when it makes an RPC connection to a remote server.</span></span>  
  
 <span data-ttu-id="e0776-140">Для имен входа, созданных проверкой подлинности Windows, необходимо создать сопоставление имени входа и пароля при помощи хранимой процедуры **sp_addlinkedservlogin** .</span><span class="sxs-lookup"><span data-stu-id="e0776-140">For logins created by Windows Authentication, you must create a mapping to a login name and password by using the **sp_addlinkedservlogin** stored procedure.</span></span> <span data-ttu-id="e0776-141">Данное имя входа и пароль должны совпадать с входящим именем входа и паролем, представленными удаленным сервером и созданными процедурой **sp_addremotelogin**.</span><span class="sxs-lookup"><span data-stu-id="e0776-141">This login name and password must match the incoming login and password expected by the remote server, as created by **sp_addremotelogin**.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="e0776-142">По возможности используйте аутентификацию Windows.</span><span class="sxs-lookup"><span data-stu-id="e0776-142">When possible, use Windows Authentication.</span></span>  
  
### <a name="remote-server-security-example"></a><span data-ttu-id="e0776-143">Пример системы безопасности удаленного сервера</span><span class="sxs-lookup"><span data-stu-id="e0776-143">Remote Server Security Example</span></span>  
 <span data-ttu-id="e0776-144">Проверьте следующие установки [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] : **serverSend** и **serverReceive**.</span><span class="sxs-lookup"><span data-stu-id="e0776-144">Consider these [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] installations: **serverSend** and **serverReceive**.</span></span> <span data-ttu-id="e0776-145">Метод**serverReceive** настраивается для сопоставления имени входа **serverSend**, поступающего от **serverSend**, с прошедшим проверку в [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] с помощью **serverReceive**, поступающего от **Alice**.</span><span class="sxs-lookup"><span data-stu-id="e0776-145">**serverReceive** is configured to map an incoming login from **serverSend**, called **Sales_Mary**, to a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] authenticated login in **serverReceive**, called **Alice**.</span></span> <span data-ttu-id="e0776-146">Другое входное имя входа из **serverSend**, с именем **Joe**, сопоставлено с именем входа, прошедшим проверку подлинности [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , в **serverReceive** _,_ с именем **Joe**.</span><span class="sxs-lookup"><span data-stu-id="e0776-146">Another incoming login from **serverSend**, called **Joe**, is mapped to a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] authenticated login in **serverReceive**_,_ called **Joe**.</span></span>  
  
 <span data-ttu-id="e0776-147">В следующем примере кода Transact-SQL `serverSend` настраивается на выполнение вызовов RPC по отношению к `serverReceive`.</span><span class="sxs-lookup"><span data-stu-id="e0776-147">The following Transact-SQL code example configures `serverSend` to perform RPCs against `serverReceive`.</span></span>  
  
```  
--Create remote server entry for RPCs   
--from serverSend in serverReceive.  
EXEC sp_addserver 'serverSend';  
GO  
  
--Create remote login mapping for login 'Sales_Mary' from serverSend  
--to Alice.  
EXEC sp_addremotelogin 'serverSend', 'Alice', 'Sales_Mary';  
GO  
--Create remote login mapping for login Joe from serverReceive   
--to same login.  
--Assumes same password for Joe in both servers.  
EXEC sp_addremotelogin 'serverSend', 'Joe', 'Joe';  
GO  
```  
  
 <span data-ttu-id="e0776-148">В `serverSend`сопоставление местного имени входа создается для имени входа `Sales\Mary` , прошедшего проверку подлинности Windows, и имени входа `Sales_Mary`.</span><span class="sxs-lookup"><span data-stu-id="e0776-148">On `serverSend`, a local login mapping is created for a Windows authenticated login `Sales\Mary` to a login `Sales_Mary`.</span></span> <span data-ttu-id="e0776-149">Для имени входа `Joe`локальное сопоставление не требуется, так как по умолчанию используются одинаковые имена входа и пароли, и `serverReceive` уже обладает сопоставлением для `Joe`.</span><span class="sxs-lookup"><span data-stu-id="e0776-149">No local mapping is required for `Joe`, because the default is to use the same login name and password, and `serverReceive` has a mapping for `Joe`.</span></span>  
  
```  
--Create a remote server entry for RPCs from serverReceive.  
EXEC sp_addserver 'serverReceive';  
GO  
--Create a local login mapping for the Windows authenticated login.  
--Sales\Mary to Sales_Mary. The password should match the  
--password for the login Sales_Mary in serverReceive.  
EXEC sp_addlinkedsrvlogin 'serverReceive', false, 'Sales\Mary',  
   'Sales_Mary', '430[fj%dk';  
GO  
```  
  
## <a name="viewing-local-or-remote-server-properties"></a><span data-ttu-id="e0776-150">Просмотр свойств локального или удаленного сервера</span><span class="sxs-lookup"><span data-stu-id="e0776-150">Viewing Local or Remote Server Properties</span></span>  
 <span data-ttu-id="e0776-151">Для просмотра атрибутов локальных и удаленных серверов можно использовать расширенную хранимую процедуру **xp_msver** .</span><span class="sxs-lookup"><span data-stu-id="e0776-151">You can use the **xp_msver** extended stored procedure to review server attributes for local or remote servers.</span></span> <span data-ttu-id="e0776-152">В список этих атрибутов входят: номер версии [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], тип и число процессоров компьютера и версия операционной системы.</span><span class="sxs-lookup"><span data-stu-id="e0776-152">These attributes include the version number of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], the type and number of processors in the computer, and the version of the operating system.</span></span> <span data-ttu-id="e0776-153">С локального сервера можно просматривать базы данных, файлы, имена входа и инструменты удаленного сервера.</span><span class="sxs-lookup"><span data-stu-id="e0776-153">From the local server, you can view databases, files, logins, and tools for a remote server.</span></span> <span data-ttu-id="e0776-154">Дополнительные сведения см. в статье [xp_msver (Transact-SQL)](/sql/relational-databases/system-stored-procedures/xp-msver-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="e0776-154">For more information, see [xp_msver &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/xp-msver-transact-sql).</span></span>  
  
## <a name="related-tasks"></a><span data-ttu-id="e0776-155">Связанные задачи</span><span class="sxs-lookup"><span data-stu-id="e0776-155">Related Tasks</span></span>  
 [<span data-ttu-id="e0776-156">Связанные серверы (компонент Database Engine)</span><span class="sxs-lookup"><span data-stu-id="e0776-156">Linked Servers &#40;Database Engine&#41;</span></span>](../../relational-databases/linked-servers/linked-servers-database-engine.md)  
  
## <a name="related-content"></a><span data-ttu-id="e0776-157">См. также</span><span class="sxs-lookup"><span data-stu-id="e0776-157">Related Content</span></span>  
 [<span data-ttu-id="e0776-158">sp_configure (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="e0776-158">sp_configure &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-configure-transact-sql)  
  
 [<span data-ttu-id="e0776-159">Настройка параметра конфигурации сервера remote access</span><span class="sxs-lookup"><span data-stu-id="e0776-159">Configure the remote access Server Configuration Option</span></span>](configure-the-remote-access-server-configuration-option.md)  
  
 [<span data-ttu-id="e0776-160">RECONFIGURE (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="e0776-160">RECONFIGURE &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/language-elements/reconfigure-transact-sql)  
  
  
