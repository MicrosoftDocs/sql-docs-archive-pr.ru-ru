---
title: Параметры конфигурации памяти сервера | Документация Майкрософт
ms.custom: ''
ms.date: 07/22/2020
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: configuration
ms.topic: conceptual
helpviewer_keywords:
- Virtual Memory Manager
- max server memory option
- virtual memory [SQL Server]
- VMM
- server memory options [SQL Server]
- servers [SQL Server], memory
- buffer pools [SQL Server]
- min server memory option
- manual memory options [SQL Server]
- memory [SQL Server], servers
ms.assetid: 29ce373e-18f8-46ff-aea6-15bbb10fb9c2
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 46a4bb354b78d25c6667e9ff67c6eda697a0369e
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87738744"
---
# <a name="server-memory-configuration-options"></a><span data-ttu-id="3d813-102">Параметры конфигурации памяти сервера</span><span class="sxs-lookup"><span data-stu-id="3d813-102">Server Memory Configuration Options</span></span>
  <span data-ttu-id="3d813-103">Два параметра памяти сервера, **min server memory** и **max server memory**, используются для изменения в конфигурации объема памяти (в мегабайтах), управляемой диспетчером памяти SQL Server для процесса SQL Server, применяемого экземпляром [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="3d813-103">Use the two server memory options, **min server memory** and **max server memory**, to reconfigure the amount of memory (in megabytes) that is managed by the SQL Server Memory Manager for a SQL Server process used by an instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>  
  
 <span data-ttu-id="3d813-104">По умолчанию параметр **min server memory** имеет значение 0, а параметр **max server memory** — 2147483647 МБ.</span><span class="sxs-lookup"><span data-stu-id="3d813-104">The default setting for **min server memory** is 0, and the default setting for **max server memory** is 2147483647 MB.</span></span> <span data-ttu-id="3d813-105">По умолчанию [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] может динамически изменять требования к памяти в зависимости от доступных системных ресурсов.</span><span class="sxs-lookup"><span data-stu-id="3d813-105">By default, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] can change its memory requirements dynamically based on available system resources.</span></span>  
  
> [!NOTE]  
> <span data-ttu-id="3d813-106">Если присвоить параметру **max server memory** минимальное значение, производительность [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] может значительно ухудшиться, иногда сервер даже не будет запускаться.</span><span class="sxs-lookup"><span data-stu-id="3d813-106">Setting **max server memory** to the minimum value can severely reduce [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] performance and even prevent it from starting.</span></span> <span data-ttu-id="3d813-107">Если не удается запустить [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] после изменения этого параметра, запустите его с использованием параметра запуска **-f** и верните параметр **max server memory** к предыдущему значению.</span><span class="sxs-lookup"><span data-stu-id="3d813-107">If you cannot start [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] after changing this option, start it using the **-f** startup option and reset **max server memory** to its previous value.</span></span> <span data-ttu-id="3d813-108">Дополнительные сведения см. в разделе [Параметры запуска службы Database Engine](database-engine-service-startup-options.md).</span><span class="sxs-lookup"><span data-stu-id="3d813-108">For more information, see [Database Engine Service Startup Options](database-engine-service-startup-options.md).</span></span>  
  
 <span data-ttu-id="3d813-109">Когда [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] использует память динамически, он периодически опрашивает систему, чтобы определить объем свободной памяти.</span><span class="sxs-lookup"><span data-stu-id="3d813-109">When [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] is using memory dynamically, it queries the system periodically to determine the amount of free memory.</span></span> <span data-ttu-id="3d813-110">Поддержание достаточного объема свободной памяти позволяет избежать подкачки в операционной системе (ОС).</span><span class="sxs-lookup"><span data-stu-id="3d813-110">Maintaining this free memory prevents the operating system (OS) from paging.</span></span> <span data-ttu-id="3d813-111">Если свободно меньше памяти, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] высвобождает память для ОС.</span><span class="sxs-lookup"><span data-stu-id="3d813-111">If less memory is free, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] releases memory to the OS.</span></span> <span data-ttu-id="3d813-112">Если свободно больше памяти, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] может выделить дополнительный объем памяти.</span><span class="sxs-lookup"><span data-stu-id="3d813-112">If more memory is free, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] may allocate more memory.</span></span> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="3d813-113">добавляет память, только если она требуется для рабочей нагрузки; во время простоя сервера размер виртуального адресного пространства не увеличивается.</span><span class="sxs-lookup"><span data-stu-id="3d813-113">adds memory only when its workload requires more memory; a server at rest does not increase the size of its virtual address space.</span></span>  
  
 <span data-ttu-id="3d813-114">Обратитесь к примеру B для запроса о возврате информации об используемой в настоящий момент памяти.</span><span class="sxs-lookup"><span data-stu-id="3d813-114">See example B for a query to return the currently used memory.</span></span> <span data-ttu-id="3d813-115">**Максимальная память сервера** управляет [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] выделением памяти, включая буферный пул, компиляцией памяти, всеми кэшами, выделениями памяти qe, памятью диспетчера блокировки и памятью clr (фактически любой клерк памяти находится в **sys.dm_os_memory_clerks**).</span><span class="sxs-lookup"><span data-stu-id="3d813-115">**max server memory** controls the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] memory allocation, including the buffer pool, compile memory, all caches, qe memory grants, lock manager memory, and clr memory (essentially any memory clerk found in **sys.dm_os_memory_clerks**).</span></span> <span data-ttu-id="3d813-116">Память для стеки потоков, кучи памяти, связанные поставщики сервера не [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]и память, выделенная не [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] DLL не контролируются параметром max server memory (максимальная память сервера).</span><span class="sxs-lookup"><span data-stu-id="3d813-116">Memory for thread stacks, memory heaps, linked server providers other than [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], and any memory allocated by a non [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] DLL are not controlled by max server memory.</span></span>  
  
 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]<span data-ttu-id="3d813-117">использует API уведомления памяти **QueryMemoryResourceNotification** , чтобы определить, когда диспетчер памяти SQL Server может выделить память и освободить память.</span><span class="sxs-lookup"><span data-stu-id="3d813-117">uses the memory notification API **QueryMemoryResourceNotification** to determine when the SQL Server Memory Manager may allocate memory and release memory.</span></span>  
  
 <span data-ttu-id="3d813-118">Рекомендуется разрешить [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] использовать память динамически; однако существует возможность установить параметры памяти вручную и ограничить объем памяти, доступный серверу [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="3d813-118">Allowing [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] to use memory dynamically is recommended; however, you can set the memory options manually and restrict the amount of memory that [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] can access.</span></span> <span data-ttu-id="3d813-119">Перед настройкой объема памяти для [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]определите подходящее значение путем вычитания из общего объема физической памяти того объема, который требуется операционной системе и другим экземплярам [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] (и для других нужд, если компьютер не выделен полностью под сервер [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]).</span><span class="sxs-lookup"><span data-stu-id="3d813-119">Before you set the amount of memory for [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], determine the appropriate memory setting by subtracting, from the total physical memory, the memory required for the OS and any other instances of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] (and other system uses, if the computer is not wholly dedicated to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]).</span></span> <span data-ttu-id="3d813-120">Разница — максимальный объем памяти, который можно выделить серверу [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="3d813-120">This difference is the maximum amount of memory you can assign to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>  
  
## <a name="setting-the-memory-options-manually"></a><span data-ttu-id="3d813-121">Настройка параметров памяти вручную</span><span class="sxs-lookup"><span data-stu-id="3d813-121">Setting the Memory Options Manually</span></span>  
<span data-ttu-id="3d813-122">Можно установить для параметров сервера **Мин. памяти сервера** и **Макс. памяти сервера** значения, покрывающие весь доступный объем памяти.</span><span class="sxs-lookup"><span data-stu-id="3d813-122">The server options **min server memory** and **max server memory** can be set to span a range of memory values.</span></span> <span data-ttu-id="3d813-123">Этот метод полезен для системных администраторов или администраторов баз данных, когда требуется настроить экземпляр [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] так, чтобы его параметры не противоречили требованиям к памяти других приложений или других экземпляров [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], запущенных на этом узле.</span><span class="sxs-lookup"><span data-stu-id="3d813-123">This method is useful for system or database administrators to configure an instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] in conjunction with the memory requirements of other applications, or other instances of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] that run on the same host.</span></span>

> [!NOTE]
> <span data-ttu-id="3d813-124">Параметры **min server memory** и **max server memory** являются расширенными.</span><span class="sxs-lookup"><span data-stu-id="3d813-124">The **min server memory** and **max server memory** options are advanced options.</span></span> <span data-ttu-id="3d813-125">При использовании системной хранимой процедуры **sp_configure** для изменения этих настроек изменить их можно, только если параметр **show advanced options** установлен в значение 1.</span><span class="sxs-lookup"><span data-stu-id="3d813-125">If you are using the **sp_configure** system stored procedure to change these settings, you can change them only when **show advanced options** is set to 1.</span></span> <span data-ttu-id="3d813-126">Эти параметры вступают в силу сразу же без перезагрузки сервера.</span><span class="sxs-lookup"><span data-stu-id="3d813-126">These settings take effect immediately without a server restart.</span></span>  
  
<a name="min_server_memory"></a><span data-ttu-id="3d813-127">Параметр **min_server_memory** используется для гарантированного предоставления минимального объема памяти, доступного диспетчеру памяти [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] для экземпляра [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="3d813-127">Use **min_server_memory** to guarantee a minimum amount of memory available to the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Memory Manager for an instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="3d813-128">не выделяет немедленно объем памяти, указанный в параметре **min server memory** , после запуска.</span><span class="sxs-lookup"><span data-stu-id="3d813-128">will not immediately allocate the amount of memory specified in **min server memory** on startup.</span></span> <span data-ttu-id="3d813-129">Тем не менее, когда это значение достигается с ростом рабочей нагрузки, экземпляр [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] не может освободить память, выделенную буферному пулу, если не уменьшить значение параметра **min server memory** .</span><span class="sxs-lookup"><span data-stu-id="3d813-129">However, after memory usage has reached this value due to client load, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] cannot free memory unless the value of **min server memory** is reduced.</span></span> <span data-ttu-id="3d813-130">Например, если на одном узле может находиться сразу несколько экземпляров [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], задайте параметр min_server_memory вместо max_server_memory, чтобы зарезервировать память для экземпляра.</span><span class="sxs-lookup"><span data-stu-id="3d813-130">For example, when several instances of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] can exist concurrently in the same host, set the min_server_memory parameter instead of max_server_memory for the purpose of reserving memory for an instance.</span></span> <span data-ttu-id="3d813-131">Кроме того, необходимо задать значение min_server_memory в виртуализированной среде, чтобы гарантировать, что при дефиците памяти на базовом узле не будет попыток выделить больше памяти из буферного пула в гостевой виртуальной машине [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], чем это необходимо для приемлемой производительности.</span><span class="sxs-lookup"><span data-stu-id="3d813-131">Also, setting a min_server_memory value is essential in a virtualized environment to ensure memory pressure from the underlying host does not attempt to deallocate memory from the buffer pool on a guest [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] virtual machine (VM) beyond what is needed for acceptable performance.</span></span>
 
> [!NOTE]  
> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="3d813-132">не гарантирует, что объем памяти, заданный параметром **min server memory**, будет выделен.</span><span class="sxs-lookup"><span data-stu-id="3d813-132">is not guaranteed to allocate the amount of memory specified in **min server memory**.</span></span> <span data-ttu-id="3d813-133">Если нагрузка на сервер никогда не требует выделения всего объема памяти, заданного параметром **min server memory**, сервер [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] будет использовать меньше памяти.</span><span class="sxs-lookup"><span data-stu-id="3d813-133">If the load on the server never requires allocating the amount of memory specified in **min server memory**, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] will run with less memory.</span></span>  
  
<a name="max_server_memory"></a> <span data-ttu-id="3d813-134">Параметр **max_server_memory** гарантирует, что в ОС не возникнет дефицит памяти.</span><span class="sxs-lookup"><span data-stu-id="3d813-134">Use **max_server_memory** to guarantee the OS does not experience detrimental memory pressure.</span></span> <span data-ttu-id="3d813-135">Чтобы задать конфигурацию "Макс. памяти сервера", отследите общее использование памяти процессом [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] и определите требования к памяти.</span><span class="sxs-lookup"><span data-stu-id="3d813-135">To set max server memory configuration, monitor overall consumption of the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] process in order to determine memory requirements.</span></span> <span data-ttu-id="3d813-136">Более точные вычисления для одного экземпляра</span><span class="sxs-lookup"><span data-stu-id="3d813-136">To be more accurate with these calculations for a single instance:</span></span>
 -  <span data-ttu-id="3d813-137">Зарезервируйте 1–4 ГБ от общего объема памяти для ОС.</span><span class="sxs-lookup"><span data-stu-id="3d813-137">From the total OS memory, reserve 1GB-4GB to the OS itself.</span></span>
 -  <span data-ttu-id="3d813-138">Затем вычтите эквивалент потенциального выделения памяти ([!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]), которое не входят в диапазон **max server memory**, состоящий из **_стека <sup>1 </sup> \* вычисляемое максимальное число рабочих потоков <sup>2</sup> + параметр загрузки -g <sup>3</sup>_** (или 256 МБ по умолчанию, если значение *-g* не задано).</span><span class="sxs-lookup"><span data-stu-id="3d813-138">Then subtract the equivalent of potential [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] memory allocations outside the **max server memory** control, which is comprised of **_stack size <sup>1</sup> \* calculated max worker threads <sup>2</sup> + -g startup parameter <sup>3</sup>_** (or 256MB by default if *-g* is not set).</span></span> <span data-ttu-id="3d813-139">Остаток и даст значение параметра max_server_memory в случае установки одного экземпляра.</span><span class="sxs-lookup"><span data-stu-id="3d813-139">What remains should be the max_server_memory setting for a single instance setup.</span></span>
 
<span data-ttu-id="3d813-140"><sup>1</sup> Сведения о размерах стеков потока для различных архитектур см. в разделе [Руководство по архитектуре управления памятью](https://docs.microsoft.com/sql/relational-databases/memory-management-architecture-guide#stacksizes).</span><span class="sxs-lookup"><span data-stu-id="3d813-140"><sup>1</sup> Refer to the [Memory Management Architecture guide](https://docs.microsoft.com/sql/relational-databases/memory-management-architecture-guide#stacksizes) for information on thread stack sizes per architecture.</span></span>

<span data-ttu-id="3d813-141"><sup>2</sup> Сведения о вычислении рабочих потоков по умолчанию для заданного числа сходных ЦП на текущем узле см. в разделе [Настройка параметра конфигурации сервера "Максимальное число рабочих потоков"](../../database-engine/configure-windows/configure-the-max-worker-threads-server-configuration-option.md).</span><span class="sxs-lookup"><span data-stu-id="3d813-141"><sup>2</sup> Refer to the documentation page on how to [Configure the max worker threads Server Configuration Option](../../database-engine/configure-windows/configure-the-max-worker-threads-server-configuration-option.md), for information on the calculated default worker threads for a given number of affinitized CPUs in the current host.</span></span>

<span data-ttu-id="3d813-142"><sup>3</sup> Сведения о параметре запуска *-g* см. на странице документации [Параметры запуска службы ядра СУБД](database-engine-service-startup-options.md?view=sql-server-2014).</span><span class="sxs-lookup"><span data-stu-id="3d813-142"><sup>3</sup> Refer to the documentation page on [Database Engine Service Startup Options](database-engine-service-startup-options.md?view=sql-server-2014) for information on the *-g* startup parameter.</span></span> <span data-ttu-id="3d813-143">Применимо только для 32-разрядной версии [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] (с [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] по [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)]).</span><span class="sxs-lookup"><span data-stu-id="3d813-143">Aplicable only to 32-bit [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ([!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] through [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)]).</span></span>

|<span data-ttu-id="3d813-144">Тип ОС</span><span class="sxs-lookup"><span data-stu-id="3d813-144">OS Type</span></span>|<span data-ttu-id="3d813-145">Минимальный объем памяти, допустимый для параметра **max server memory**</span><span class="sxs-lookup"><span data-stu-id="3d813-145">Minimum Memory Amounts Allowable for **max server memory**</span></span>|  
|-------------|----------------------------------------------------------------|  
|<span data-ttu-id="3d813-146">32-битная</span><span class="sxs-lookup"><span data-stu-id="3d813-146">32-bit</span></span>|<span data-ttu-id="3d813-147">64 МБ</span><span class="sxs-lookup"><span data-stu-id="3d813-147">64 MB</span></span>|  
|<span data-ttu-id="3d813-148">64-разрядная</span><span class="sxs-lookup"><span data-stu-id="3d813-148">64-bit</span></span>|<span data-ttu-id="3d813-149">128 МБ</span><span class="sxs-lookup"><span data-stu-id="3d813-149">128 MB</span></span>| 

## <a name="how-to-configure-memory-options-using-sql-server-management-studio"></a><span data-ttu-id="3d813-150">Настройка параметров памяти с помощью среды SQL Server Management Studio</span><span class="sxs-lookup"><span data-stu-id="3d813-150">How to configure memory options using SQL Server Management Studio</span></span>  
 <span data-ttu-id="3d813-151">Используйте два параметра памяти сервера, **min server memory** и **max server memory**, для настройки объема памяти (в мегабайтах), которая находится в управлении диспетчера памяти SQL Server для экземпляра [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="3d813-151">Use the two server memory options, **min server memory** and **max server memory**, to reconfigure the amount of memory (in megabytes) managed by the SQL Server Memory Manager for an instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="3d813-152">По умолчанию [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] может динамически изменять требования к памяти в зависимости от доступных системных ресурсов.</span><span class="sxs-lookup"><span data-stu-id="3d813-152">By default, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] can change its memory requirements dynamically based on available system resources.</span></span>  
  
### <a name="procedure-for-configuring-a-fixed-amount-of-memory"></a><span data-ttu-id="3d813-153">Настройка фиксированного объема памяти</span><span class="sxs-lookup"><span data-stu-id="3d813-153">Procedure for configuring a fixed amount of memory</span></span>  
 <span data-ttu-id="3d813-154">**Установка фиксированного размера памяти**</span><span class="sxs-lookup"><span data-stu-id="3d813-154">**To set a fixed amount of memory:**</span></span>  
  
1.  <span data-ttu-id="3d813-155">В обозревателе объектов щелкните правой кнопкой мыши сервер и выберите пункт **Свойства**.</span><span class="sxs-lookup"><span data-stu-id="3d813-155">In Object Explorer, right-click a server and select **Properties**.</span></span>  
  
2.  <span data-ttu-id="3d813-156">Щелкните узел **Память** .</span><span class="sxs-lookup"><span data-stu-id="3d813-156">Click the **Memory** node.</span></span>  
  
3.  <span data-ttu-id="3d813-157">В пункте **Параметры памяти сервера**введите нужные значения в поля **Минимальный размер памяти сервера** и **Максимальный размер памяти сервера**.</span><span class="sxs-lookup"><span data-stu-id="3d813-157">Under **Server Memory Options**, enter the amount that you want for **Minimum server memory** and **Maximum server memory**.</span></span>  
  
     <span data-ttu-id="3d813-158">Оставьте параметры по умолчанию, чтобы [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] изменял требования к памяти динамически, исходя из доступности системных ресурсов.</span><span class="sxs-lookup"><span data-stu-id="3d813-158">Use the default settings to allow [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] to change its memory requirements dynamically based on available system resources.</span></span> <span data-ttu-id="3d813-159">По умолчанию параметр **min server memory** имеет значение 0, а параметр **max server memory** — значение 2147483647 MБ.</span><span class="sxs-lookup"><span data-stu-id="3d813-159">The default setting for **min server memory** is 0, and the default setting for **max server memory** is 2147483647 megabytes (MB).</span></span>  
  
## <a name="maximize-data-throughput-for-network-applications"></a><span data-ttu-id="3d813-160">Режим «максимизировать пропускную способность для сетевых приложений»</span><span class="sxs-lookup"><span data-stu-id="3d813-160">Maximize Data Throughput for Network Applications</span></span>  
 <span data-ttu-id="3d813-161">Чтобы оптимизировать использование системной памяти для [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], следует ограничить объем памяти, используемой системой для кэширования файлов.</span><span class="sxs-lookup"><span data-stu-id="3d813-161">To optimize system memory use for [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], you should limit the amount of memory that is used by the system for file caching.</span></span> <span data-ttu-id="3d813-162">Чтобы ограничить кэш файловой системы, убедитесь, что снят флажок **макс. пропускная способность доступа к общим файлам** .</span><span class="sxs-lookup"><span data-stu-id="3d813-162">To limit the file system cache, make sure that **Maximize data throughput for file sharing** is not selected.</span></span> <span data-ttu-id="3d813-163">Можно указать кэш файловой системы минимального размера, выбрав вариант **наименьшая занимаемая память** или **сбалансированный**.</span><span class="sxs-lookup"><span data-stu-id="3d813-163">You can specify the smallest file system cache by selecting **Minimize memory used** or **Balance**.</span></span>  
  
#### <a name="to-check-the-current-setting-on-your-operating-system"></a><span data-ttu-id="3d813-164">Проверка значения параметра в операционной системе</span><span class="sxs-lookup"><span data-stu-id="3d813-164">To check the current setting on your operating system</span></span>  
  
1.  <span data-ttu-id="3d813-165">Нажмите кнопку **Пуск**, выберите пункт **Панель управления**, дважды щелкните **Сетевые подключения**, а затем значок **Подключение по локальной сети**.</span><span class="sxs-lookup"><span data-stu-id="3d813-165">Click **Start**, click **Control Panel**, double-click **Network Connections**, and then double-click **Local Area Connection**.</span></span>  
  
2.  <span data-ttu-id="3d813-166">На вкладке **Общие** нажмите кнопку **Свойства**и выберите **Служба доступа к файлам и принтерам сетей Майкрософт**, затем нажмите кнопку **Свойства**.</span><span class="sxs-lookup"><span data-stu-id="3d813-166">On the **General** tab, click **Properties**, select **File and Printer Sharing Microsoft Networks**, and then click **Properties**.</span></span>  
  
3.  <span data-ttu-id="3d813-167">Если выбран параметр **макс. пропускная способность для сетевых приложений** , выберите любой другой параметр, нажмите кнопку **ОК**и закройте остальные диалоговые окна.</span><span class="sxs-lookup"><span data-stu-id="3d813-167">If **Maximize data throughput for network applications** is selected, choose any other option, click **OK**, and then close the rest of the dialog boxes.</span></span>  
  
## <a name="lock-pages-in-memory"></a><span data-ttu-id="3d813-168">Блокировка страниц в памяти</span><span class="sxs-lookup"><span data-stu-id="3d813-168">Lock Pages in Memory</span></span>  
 <span data-ttu-id="3d813-169">Эта политика Windows определяет, какие учетные записи могут использовать процесс для сохранения данных в физической памяти, чтобы система не отправляла страницы данных в виртуальную память на диске.</span><span class="sxs-lookup"><span data-stu-id="3d813-169">This Windows policy determines which accounts can use a process to keep data in physical memory, preventing the system from paging the data to virtual memory on disk.</span></span> <span data-ttu-id="3d813-170">Блокировка страниц в памяти может обеспечивать отклик сервера, когда содержимое памяти заносится в файл подкачки.</span><span class="sxs-lookup"><span data-stu-id="3d813-170">Locking pages in memory may keep the server responsive when paging memory to disk occurs.</span></span> <span data-ttu-id="3d813-171">Параметр SQL Server **Блокировка страниц в памяти** установлен в значение ON в 32-разрядных и 64-разрядных экземплярах [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] Standard Edition и выше, когда учетной записи с правами на запуск sqlservr.exe предоставлено право пользователя Windows "Блокировка страниц в памяти" (LPIM).</span><span class="sxs-lookup"><span data-stu-id="3d813-171">The SQL Server **Lock Pages in Memory** option is set to ON in 32-bit and 64-bit instances of [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] Standard edition and higher when the account with privileges to run sqlservr.exe has been granted the Windows "Locked Pages in Memory" (LPIM) user right.</span></span> <span data-ttu-id="3d813-172">В более ранних версиях SQL Server задание параметра блокировки страниц для 32-разрядного экземпляра SQL Server требовало, чтобы учетная запись с правами запуска sqlservr.exe имела права пользователя LPIM и параметр конфигурации «awe_enabled» был установлен равным ON.</span><span class="sxs-lookup"><span data-stu-id="3d813-172">In earlier versions of SQL Server, setting the Lock Pages option for a 32-bit instance of SQL Server, requires that the account with privileges to run sqlservr.exe have the LPIM user right and the 'awe_enabled' configuration option is set to ON.</span></span>  
  
 <span data-ttu-id="3d813-173">Чтобы отключить параметр **Блокировка страниц в памяти** для [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , удалите право пользователя "заблокированные страницы в памяти" для стартовой учетной записи SQL Server.</span><span class="sxs-lookup"><span data-stu-id="3d813-173">To disable the **Lock Pages In Memory** option for [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], remove the "Locked Pages in Memory" user right for the SQL Server startup account.</span></span>  
  
### <a name="to-disable-lock-pages-in-memory"></a><span data-ttu-id="3d813-174">Отключение блокировки страниц в памяти</span><span class="sxs-lookup"><span data-stu-id="3d813-174">To Disable Lock Pages in Memory</span></span>  
 <span data-ttu-id="3d813-175">**Чтобы отключить параметр Блокировка страниц в памяти, выполните следующие действия.**</span><span class="sxs-lookup"><span data-stu-id="3d813-175">**To disable the lock pages in memory option:**</span></span>  
  
1.  <span data-ttu-id="3d813-176">В меню **Пуск** выберите команду **Выполнить**.</span><span class="sxs-lookup"><span data-stu-id="3d813-176">On the **Start** menu, click **Run**.</span></span> <span data-ttu-id="3d813-177">В поле **Открыть** введите `gpedit.msc` .</span><span class="sxs-lookup"><span data-stu-id="3d813-177">In the **Open** box, type `gpedit.msc`.</span></span>  
  
     <span data-ttu-id="3d813-178">Откроется диалоговое окно **Групповая политика** .</span><span class="sxs-lookup"><span data-stu-id="3d813-178">The **Group Policy** dialog box opens.</span></span>  
  
2.  <span data-ttu-id="3d813-179">В консоли **Групповая политика** разверните узел **Конфигурация компьютера**, затем узел **Конфигурация Windows**.</span><span class="sxs-lookup"><span data-stu-id="3d813-179">On the **Group Policy** console, expand **Computer Configuration**, and then expand **Windows Settings**.</span></span>  
  
3.  <span data-ttu-id="3d813-180">Разверните узлы **Настройки безопасности**и **Локальные политики**.</span><span class="sxs-lookup"><span data-stu-id="3d813-180">Expand **Security Settings**, and then expand **Local Policies**.</span></span>  
  
4.  <span data-ttu-id="3d813-181">Выберите папку **Назначение прав пользователя** .</span><span class="sxs-lookup"><span data-stu-id="3d813-181">Select the **User Rights Assignment** folder.</span></span>  
  
     <span data-ttu-id="3d813-182">Политики будут показаны на панели подробностей.</span><span class="sxs-lookup"><span data-stu-id="3d813-182">The policies will be displayed in the details pane.</span></span>  
  
5.  <span data-ttu-id="3d813-183">На этой панели дважды щелкните параметр **Блокировка страниц в памяти**.</span><span class="sxs-lookup"><span data-stu-id="3d813-183">In the pane, double-click **Lock pages in memory**.</span></span>  
  
6.  <span data-ttu-id="3d813-184">В диалоговом окне **Параметр политики локальной защиты** выберите учетную запись с правами запуска sqlservr.exe и нажмите **Удалить**.</span><span class="sxs-lookup"><span data-stu-id="3d813-184">In the **Local Security Policy Setting** dialog box, select the account with privileges to run sqlservr.exe and click **Remove**.</span></span>  
  
## <a name="virtual-memory-manager"></a><span data-ttu-id="3d813-185">Диспетчер виртуальной памяти</span><span class="sxs-lookup"><span data-stu-id="3d813-185">Virtual Memory Manager</span></span>  
 <span data-ttu-id="3d813-186">32-разрядная операционная система обеспечивает доступ к 4 ГБ виртуального адресного пространства.</span><span class="sxs-lookup"><span data-stu-id="3d813-186">The 32-bit operating systems provide access to 4 GB of virtual address space.</span></span> <span data-ttu-id="3d813-187">2 ГБ виртуальной памяти предназначены всем процессам и доступны приложениям.</span><span class="sxs-lookup"><span data-stu-id="3d813-187">2 GB of virtual memory is private per process and available for application use.</span></span> <span data-ttu-id="3d813-188">2 ГБ зарезервировано для использования операционной системой.</span><span class="sxs-lookup"><span data-stu-id="3d813-188">2 GB is reserved for operating system use.</span></span> <span data-ttu-id="3d813-189">Все выпуски операционных систем содержат переключатель, предоставляющий приложениям доступ к 3 ГБ виртуального адресного пространства, ограничивая объем памяти, доступный операционной системе, до 1 ГБ.</span><span class="sxs-lookup"><span data-stu-id="3d813-189">All operating system editions include a switch that can provide applications with access up to 3 GB of virtual address space, limiting the operating system to 1 GB.</span></span> <span data-ttu-id="3d813-190">Дополнительные сведения о переключателе конфигурации памяти см. в разделе о настройке памяти объемом 4 ГБ в документации Windows.</span><span class="sxs-lookup"><span data-stu-id="3d813-190">For more information about how to use the switch memory configuration, see the Windows documentation about 4-gigabyte tuning (4GT).</span></span> <span data-ttu-id="3d813-191">Если 32-разрядная версия [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] запущена в 64-разрядной системе, пользователю доступно все 4 ГБ виртуального адресного пространства.</span><span class="sxs-lookup"><span data-stu-id="3d813-191">When the 32-bit [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] is running on 64-bit operating system its user available virtual address space is the full 4 GB.</span></span>  
  
 <span data-ttu-id="3d813-192">Определенные области адресного пространства сопоставляются с физической памятью диспетчером виртуальной памяти Windows (VMM).</span><span class="sxs-lookup"><span data-stu-id="3d813-192">The committed regions of address space are mapped to the available physical memory by the Windows Virtual Memory Manager (VMM).</span></span>  
  
 <span data-ttu-id="3d813-193">Дополнительные сведения об объеме физической памяти, поддерживаемой различными операционными системами, см. в разделе «Ограничения памяти для выпусков Windows» в документации Windows.</span><span class="sxs-lookup"><span data-stu-id="3d813-193">For more information on the amount of physical memory supported by different operating systems, see the Windows documentation "Memory Limits for Windows Releases".</span></span>  
  
 <span data-ttu-id="3d813-194">Система виртуальной памяти позволяет превышать объем физической памяти, при этом соотношение виртуальной памяти к физической может быть больше 1:1.</span><span class="sxs-lookup"><span data-stu-id="3d813-194">Virtual memory systems allow the over-commitment of physical memory, so that the ratio of virtual-to-physical memory can exceed 1:1.</span></span> <span data-ttu-id="3d813-195">В результате чего на компьютерах с разными конфигурациями физической памяти могут работать большие программы.</span><span class="sxs-lookup"><span data-stu-id="3d813-195">As a result, larger programs can run on computers with a variety of physical memory configurations.</span></span> <span data-ttu-id="3d813-196">Тем не менее, если объем используемой виртуальной памяти значительно превышает общий объем рабочих множеств всех процессов, производительность может ухудшиться.</span><span class="sxs-lookup"><span data-stu-id="3d813-196">However, using significantly more virtual memory than the combined average working sets of all the processes can cause poor performance.</span></span>  
  
 <span data-ttu-id="3d813-197">Параметры **min server memory** и **max server memory** являются расширенными.</span><span class="sxs-lookup"><span data-stu-id="3d813-197">The **min server memory** and **max server memory** options are advanced options.</span></span> <span data-ttu-id="3d813-198">При использовании системной хранимой процедуры **sp_configure** для изменения этих настроек изменить их можно, только если параметр **show advanced options** установлен в значение 1.</span><span class="sxs-lookup"><span data-stu-id="3d813-198">If you are using the **sp_configure** system stored procedure to change these settings, you can change them only when **show advanced options** is set to 1.</span></span> <span data-ttu-id="3d813-199">Эти параметры вступают в силу сразу же без перезагрузки сервера.</span><span class="sxs-lookup"><span data-stu-id="3d813-199">These settings take effect immediately without a server restart.</span></span>  
  
## <a name="running-multiple-instances-of-sql-server"></a><span data-ttu-id="3d813-200">Выполнение нескольких экземпляров SQL Server</span><span class="sxs-lookup"><span data-stu-id="3d813-200">Running Multiple Instances of SQL Server</span></span>  
 <span data-ttu-id="3d813-201">При выполнении нескольких экземпляров компонента [!INCLUDE[ssDE](../../includes/ssde-md.md)]существует три подхода к управлению памятью.</span><span class="sxs-lookup"><span data-stu-id="3d813-201">When you are running multiple instances of the [!INCLUDE[ssDE](../../includes/ssde-md.md)], there are three approaches you can use to manage memory:</span></span>  
  
-   <span data-ttu-id="3d813-202">Контроль использования памяти с помощью параметра **max server memory** .</span><span class="sxs-lookup"><span data-stu-id="3d813-202">Use **max server memory** to control memory usage.</span></span> <span data-ttu-id="3d813-203">Установите максимальные значения для каждого экземпляра, учитывая, что их сумма не должна превышать общий объем физической памяти, установленной на компьютере.</span><span class="sxs-lookup"><span data-stu-id="3d813-203">Establish maximum settings for each instance, being careful that the total allowance is not more than the total physical memory on your machine.</span></span> <span data-ttu-id="3d813-204">Рекомендуется выделять каждому экземпляру объем памяти, пропорциональный его ожидаемой рабочей нагрузке или размеру базы данных.</span><span class="sxs-lookup"><span data-stu-id="3d813-204">You might want to give each instance memory proportional to its expected workload or database size.</span></span> <span data-ttu-id="3d813-205">Данный подход имеет то преимущество, что свободная память доступна новым процессам или экземплярам сразу же после их запуска.</span><span class="sxs-lookup"><span data-stu-id="3d813-205">This approach has the advantage that when new processes or instances start up, free memory will be available to them immediately.</span></span> <span data-ttu-id="3d813-206">Недостаток состоит в том, что, когда выполняются не все экземпляры, ни один из выполняющихся экземпляров не сможет использовать память, оставшуюся свободной.</span><span class="sxs-lookup"><span data-stu-id="3d813-206">The drawback is that if you are not running all of the instances, none of the running instances will be able to utilize the remaining free memory.</span></span>  
  
-   <span data-ttu-id="3d813-207">Контроль использования памяти с помощью параметра **min server memory** .</span><span class="sxs-lookup"><span data-stu-id="3d813-207">Use **min server memory** to control memory usage.</span></span> <span data-ttu-id="3d813-208">Установите минимальные значения для каждого экземпляра так, чтобы их сумма была на 1-2 ГБ меньше общего объема физической памяти, установленной на компьютере.</span><span class="sxs-lookup"><span data-stu-id="3d813-208">Establish minimum settings for each instance, so that the sum of these minimums is 1-2 GB less than the total physical memory on your machine.</span></span> <span data-ttu-id="3d813-209">Рекомендуется выделять каждому экземпляру минимальный объем памяти, пропорциональный его ожидаемой рабочей нагрузке.</span><span class="sxs-lookup"><span data-stu-id="3d813-209">Again, you may establish these minimums proportionately to the expected load of that instance.</span></span> <span data-ttu-id="3d813-210">Данный подход имеет то преимущество, что выполняющиеся экземпляры могут использовать оставшуюся свободную память в случае, когда выполняются не все экземпляры.</span><span class="sxs-lookup"><span data-stu-id="3d813-210">This approach has the advantage that if not all instances are running at the same time, the ones that are running can use the remaining free memory.</span></span> <span data-ttu-id="3d813-211">Данный подход также полезен, когда на компьютере выполняется другой процесс, интенсивно потребляющий память, так как при этом обеспечивается удовлетворение как минимум заданных потребностей сервера [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] в памяти.</span><span class="sxs-lookup"><span data-stu-id="3d813-211">This approach is also useful when there is another memory-intensive process on the computer, since it would insure that [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] would at least get a reasonable amount of memory.</span></span> <span data-ttu-id="3d813-212">Недостаток состоит в том, что при запуске нового экземпляра (или любого другого процесса) уже выполняющимся экземплярам требуется некоторое время для освобождения памяти, особенно если для этого им необходимо записать измененные страницы обратно в базу данных.</span><span class="sxs-lookup"><span data-stu-id="3d813-212">The drawback is that when a new instance (or any other process) starts, it may take some time for the running instances to release memory, especially if they must write modified pages back to their databases to do so.</span></span>  
  
-   <span data-ttu-id="3d813-213">Отсутствие действий (не рекомендуется).</span><span class="sxs-lookup"><span data-stu-id="3d813-213">Do nothing (not recommended).</span></span> <span data-ttu-id="3d813-214">Первый экземпляр, столкнувшийся с рабочей нагрузкой, попытается захватить всю память.</span><span class="sxs-lookup"><span data-stu-id="3d813-214">The first instances presented with a workload will tend to allocate all of memory.</span></span> <span data-ttu-id="3d813-215">Простаивающие экземпляры или экземпляры, запущенные позже других, могут в конечном итоге быть вынуждены работать лишь с минимальным доступным объемом памяти.</span><span class="sxs-lookup"><span data-stu-id="3d813-215">Idle instances, or instances started later, may end up running with only a minimal amount of memory available.</span></span> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="3d813-216">не пытается равномерно распределять возможности использования памяти между экземплярами.</span><span class="sxs-lookup"><span data-stu-id="3d813-216">makes no attempt to balance memory usage across instances.</span></span> <span data-ttu-id="3d813-217">Тем не менее все экземпляры будут реагировать на сигналы уведомлений памяти Windows, корректируя объемы используемой ими памяти.</span><span class="sxs-lookup"><span data-stu-id="3d813-217">All instances will, however, respond to Windows Memory Notification signals to adjust the size of their memory footprint.</span></span> <span data-ttu-id="3d813-218">Операционная система Windows не балансирует память между приложениями с помощью уведомлений памяти API-интерфейса.</span><span class="sxs-lookup"><span data-stu-id="3d813-218">Windows does not balance memory across applications with the Memory Notification API.</span></span> <span data-ttu-id="3d813-219">Эти уведомления лишь обеспечивают глобальную обратную связь относительно доступности памяти в системе.</span><span class="sxs-lookup"><span data-stu-id="3d813-219">It merely provides global feedback as to the availability of memory on the system.</span></span>  
  
 <span data-ttu-id="3d813-220">Эти настройки можно изменять без перезапуска экземпляров, поэтому можно легко экспериментировать с целью нахождения наиболее подходящих настроек для данной модели использования.</span><span class="sxs-lookup"><span data-stu-id="3d813-220">You can change these settings without restarting the instances, so you can easily experiment to find the best settings for your usage pattern.</span></span>  
  
## <a name="providing-the-maximum-amount-of-memory-to-sql-server"></a><span data-ttu-id="3d813-221">Выделение SQL Server максимального объема памяти</span><span class="sxs-lookup"><span data-stu-id="3d813-221">Providing the Maximum Amount of Memory to SQL Server</span></span>  
  
||<span data-ttu-id="3d813-222">32-разрядная версия</span><span class="sxs-lookup"><span data-stu-id="3d813-222">32-bit</span></span>|<span data-ttu-id="3d813-223">64-разрядная</span><span class="sxs-lookup"><span data-stu-id="3d813-223">64-bit</span></span>|  
|-|-------------|-------------|  
|<span data-ttu-id="3d813-224">Обычная память</span><span class="sxs-lookup"><span data-stu-id="3d813-224">Conventional memory</span></span>|<span data-ttu-id="3d813-225">Не более ограничения виртуального адресного пространства процесса во всех выпусках [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]:</span><span class="sxs-lookup"><span data-stu-id="3d813-225">Up to process virtual address space limit in all [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] editions:</span></span><br /><br /> <span data-ttu-id="3d813-226">2 ГБ</span><span class="sxs-lookup"><span data-stu-id="3d813-226">2 GB</span></span><br /><br /> <span data-ttu-id="3d813-227">3 ГБ с параметром загрузки **/3gb** \*</span><span class="sxs-lookup"><span data-stu-id="3d813-227">3 GB with **/3gb** boot parameter\*</span></span><br /><br /> <span data-ttu-id="3d813-228">4 ГБ на WOW64\*\*</span><span class="sxs-lookup"><span data-stu-id="3d813-228">4 GB on WOW64\*\*</span></span>|<span data-ttu-id="3d813-229">Не более ограничения виртуального адресного пространства процесса во всех выпусках [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]:</span><span class="sxs-lookup"><span data-stu-id="3d813-229">Up to process virtual address space limit in all [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] editions:</span></span><br /><br /> <span data-ttu-id="3d813-230">8 ТБ для архитектуры x64</span><span class="sxs-lookup"><span data-stu-id="3d813-230">8 TB on x64 architecture</span></span>|  
  
 <span data-ttu-id="3d813-231">\***/3gb** — это параметр загрузки операционной системы.</span><span class="sxs-lookup"><span data-stu-id="3d813-231">\***/3gb** is an operating-system boot parameter.</span></span> <span data-ttu-id="3d813-232">Дополнительные сведения см. в [библиотеке MSDN](https://go.microsoft.com/fwlink/?LinkID=10257&clcid=0x409).</span><span class="sxs-lookup"><span data-stu-id="3d813-232">For more information, visit the [MSDN Library](https://go.microsoft.com/fwlink/?LinkID=10257&clcid=0x409).</span></span>  
  
 <span data-ttu-id="3d813-233">\* \* WOW64 (Windows в Windows 64) — это режим, в котором 32-разрядная версия [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] работает в 64-разрядной операционной системе.</span><span class="sxs-lookup"><span data-stu-id="3d813-233">\*\*WOW64 (Windows on Windows 64) is a mode in which 32-bit [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] runs on a 64-bit operating system.</span></span> <span data-ttu-id="3d813-234">Дополнительные сведения см. в [библиотеке MSDN](https://go.microsoft.com/fwlink/?LinkID=10257&clcid=0x409).</span><span class="sxs-lookup"><span data-stu-id="3d813-234">For more information, visit the [MSDN Library](https://go.microsoft.com/fwlink/?LinkID=10257&clcid=0x409).</span></span>  
  
## <a name="examples"></a><span data-ttu-id="3d813-235">Примеры</span><span class="sxs-lookup"><span data-stu-id="3d813-235">Examples</span></span>  
  
### <a name="example-a"></a><span data-ttu-id="3d813-236">Пример A</span><span class="sxs-lookup"><span data-stu-id="3d813-236">Example A</span></span>  
 <span data-ttu-id="3d813-237">В следующем примере параметр `max server memory` устанавливается равным 4 ГБ.</span><span class="sxs-lookup"><span data-stu-id="3d813-237">The following example sets the `max server memory` option to 4 GB:</span></span>  
  
```  
sp_configure 'show advanced options', 1;  
GO  
RECONFIGURE;  
GO  
sp_configure 'max server memory', 4096;  
GO  
RECONFIGURE;  
GO  
```  
  
### <a name="example-b-determining-current-memory-allocation"></a><span data-ttu-id="3d813-238">Пример Б. Определение текущего распределения памяти</span><span class="sxs-lookup"><span data-stu-id="3d813-238">Example B. Determining Current Memory Allocation</span></span>  
 <span data-ttu-id="3d813-239">Следующий запрос возвращает информацию о текущем распределении памяти.</span><span class="sxs-lookup"><span data-stu-id="3d813-239">The following query returns information about currently allocated memory.</span></span>  
  
```  
SELECT  
(physical_memory_in_use_kb/1024) AS Memory_usedby_Sqlserver_MB,  
(locked_page_allocations_kb/1024) AS Locked_pages_used_Sqlserver_MB,  
(total_virtual_address_space_kb/1024) AS Total_VAS_in_MB,  
process_physical_memory_low,  
process_virtual_memory_low  
FROM sys.dm_os_process_memory;  
```  
  
## <a name="see-also"></a><span data-ttu-id="3d813-240">См. также:</span><span class="sxs-lookup"><span data-stu-id="3d813-240">See Also</span></span>  
 <span data-ttu-id="3d813-241">[Наблюдение и настройка производительности](../../relational-databases/performance/monitor-and-tune-for-performance.md) </span><span class="sxs-lookup"><span data-stu-id="3d813-241">[Monitor and Tune for Performance](../../relational-databases/performance/monitor-and-tune-for-performance.md) </span></span>  
 <span data-ttu-id="3d813-242">[RECONFIGURE (Transact-SQL)](/sql/t-sql/language-elements/reconfigure-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="3d813-242">[RECONFIGURE &#40;Transact-SQL&#41;](/sql/t-sql/language-elements/reconfigure-transact-sql) </span></span>  
 <span data-ttu-id="3d813-243">[Параметры конфигурации сервера (SQL Server)](server-configuration-options-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="3d813-243">[Server Configuration Options &#40;SQL Server&#41;](server-configuration-options-sql-server.md) </span></span>  
 [<span data-ttu-id="3d813-244">sp_configure (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="3d813-244">sp_configure &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-configure-transact-sql)  
  
  
