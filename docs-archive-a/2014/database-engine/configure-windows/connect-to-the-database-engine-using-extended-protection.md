---
title: Соединение с компонентом Database Engine с использованием расширенной защиты | Документы Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: configuration
ms.topic: conceptual
helpviewer_keywords:
- spoofing attacks
- service binding
- luring attacks
- Schannel
- channel binding
- Extended Protection
ms.assetid: ecfd783e-7dbb-4a6c-b5ab-c6c27d5dd57f
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 718e5c9897f0883734d460e34ca26bba4f759a54
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87665542"
---
# <a name="connect-to-the-database-engine-using-extended-protection"></a><span data-ttu-id="f31a3-102">Соединение с компонентом Database Engine с использованием расширенной защиты</span><span class="sxs-lookup"><span data-stu-id="f31a3-102">Connect to the Database Engine Using Extended Protection</span></span>
  [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="f31a3-103">поддерживает **расширенную защиту** , начиная с версии [!INCLUDE[ssKilimanjaro](../../includes/sskilimanjaro-md.md)].</span><span class="sxs-lookup"><span data-stu-id="f31a3-103">supports **Extended Protection** beginning with [!INCLUDE[ssKilimanjaro](../../includes/sskilimanjaro-md.md)].</span></span> <span data-ttu-id="f31a3-104">**Расширенная защита для проверки подлинности** представляет собой функцию сетевых компонентов, реализуемую операционной системой.</span><span class="sxs-lookup"><span data-stu-id="f31a3-104">**Extended Protection for Authentication** is a feature of the network components implemented by the operating system.</span></span> <span data-ttu-id="f31a3-105">**Расширенная защита** поддерживается в Windows 7 и Windows Server 2008 R2.</span><span class="sxs-lookup"><span data-stu-id="f31a3-105">**Extended Protection** is supported in Windows 7 and Windows Server 2008 R2.</span></span> <span data-ttu-id="f31a3-106">**Расширенная защита** входит в пакет обновления для более старых операционных систем [!INCLUDE[msCoName](../../includes/msconame-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="f31a3-106">**Extended Protection** is included in service packs for older [!INCLUDE[msCoName](../../includes/msconame-md.md)] operating systems.</span></span> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="f31a3-107">при помощи **расширенную защиту**.</span><span class="sxs-lookup"><span data-stu-id="f31a3-107">is more secure when connections are made using **Extended Protection**.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="f31a3-108">В Windows **Расширенная защита** не включается по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="f31a3-108">Windows does not enable **Extended Protection** by default.</span></span> <span data-ttu-id="f31a3-109">Дополнительные сведения о включении функции **Расширенная защита** в Windows см. в разделе [Расширенная защита для проверки подлинности](https://support.microsoft.com/kb/968389).</span><span class="sxs-lookup"><span data-stu-id="f31a3-109">For information about how to enable **Extended Protection** in Windows, see [Extended Protection for Authentication](https://support.microsoft.com/kb/968389).</span></span>  
  
## <a name="description-of-extended-protection"></a><span data-ttu-id="f31a3-110">Описание расширенной защиты</span><span class="sxs-lookup"><span data-stu-id="f31a3-110">Description of Extended Protection</span></span>  
 <span data-ttu-id="f31a3-111">**Расширенная защита** предусматривает привязку служб и каналов для предотвращения релейных атак при проверке подлинности.</span><span class="sxs-lookup"><span data-stu-id="f31a3-111">**Extended Protection** uses service binding and channel binding to help prevent an authentication relay attack.</span></span> <span data-ttu-id="f31a3-112">Во время проведения релейной атаки при проверке подлинности клиент, который может выполнить проверку подлинности NTLM (например, через проводник Windows, [!INCLUDE[msCoName](../../includes/msconame-md.md)] Outlook, приложение .NET SqlClient и т. д.), подключается к атакующему (например, злонамеренному файловому серверу CIFS).</span><span class="sxs-lookup"><span data-stu-id="f31a3-112">In an authentication relay attack, a client that can perform NTLM authentication (for example, Windows Explorer, [!INCLUDE[msCoName](../../includes/msconame-md.md)] Outlook, a .NET SqlClient application, etc.), connects to an attacker (for example, a malicious CIFS file server).</span></span> <span data-ttu-id="f31a3-113">Атакующий использует учетные данные клиента, чтобы замаскироваться под него и пройти проверку подлинности службы (например, экземпляра службы [!INCLUDE[ssDE](../../includes/ssde-md.md)]).</span><span class="sxs-lookup"><span data-stu-id="f31a3-113">The attacker uses the client's credentials to masquerade as the client and authenticate to a service (for example, an instance of the [!INCLUDE[ssDE](../../includes/ssde-md.md)] service).</span></span>  
  
 <span data-ttu-id="f31a3-114">Существуют две разновидности этой атаки.</span><span class="sxs-lookup"><span data-stu-id="f31a3-114">There are two variations of this attack:</span></span>  
  
-   <span data-ttu-id="f31a3-115">При атаке с заманиванием клиент добровольно подключается к атакующему.</span><span class="sxs-lookup"><span data-stu-id="f31a3-115">In a luring attack, the client is lured to voluntarily connect to the attacker.</span></span>  
  
-   <span data-ttu-id="f31a3-116">При атаке с подделкой пакетов клиент намеревается подключиться к достоверной службе, но не знает, что маршрутизатор DNS или IP (или оба) заражен и перенаправляет соединение к атакующему, а не к службе.</span><span class="sxs-lookup"><span data-stu-id="f31a3-116">In a spoofing attack, the client intends to connect to a valid service, but is unaware that one or both of DNS and IP routing are poisoned to redirect the connection to the attacker instead.</span></span>  
  
 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="f31a3-117">поддерживает привязку служб и каналов, чтобы сократить возможность проведения таких атак на экземпляр [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="f31a3-117">supports service binding and channel binding to help reduce these attacks on [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instances.</span></span>  
  
### <a name="service-binding"></a><span data-ttu-id="f31a3-118">привязка служб</span><span class="sxs-lookup"><span data-stu-id="f31a3-118">Service Binding</span></span>  
 <span data-ttu-id="f31a3-119">Привязка служб направлена против атак с заманиванием, требуя от клиента отправки подписанного имени участника-службы (SPN) для службы [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , с которой клиент пытается соединиться.</span><span class="sxs-lookup"><span data-stu-id="f31a3-119">Service binding addresses luring attacks by requiring a client to send a signed service principal name (SPN) of the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] service that the client intends to connect to.</span></span> <span data-ttu-id="f31a3-120">При обработке ответа проверки подлинности служба проверяет, совпадает ли полученное в пакете имя участника-службы с ее собственным именем участника-службы.</span><span class="sxs-lookup"><span data-stu-id="f31a3-120">As part of the authentication response, the service validates that the SPN received in the packet matches its own SPN.</span></span> <span data-ttu-id="f31a3-121">Если имеет место заманивающая атака, то клиент включит подписанное имя участника-службы атакующего.</span><span class="sxs-lookup"><span data-stu-id="f31a3-121">If a client is lured to connect to an attacker, the client will include the signed SPN of the attacker.</span></span> <span data-ttu-id="f31a3-122">Атакующий не сможет передать этот пакет, чтобы пойти проверку подлинности как клиент в реальной службе [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , поскольку он включает имя участника-службы атакующего.</span><span class="sxs-lookup"><span data-stu-id="f31a3-122">The attacker cannot relay the packet to authenticate to the real [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] service as the client, because it would include the SPN of the attacker.</span></span> <span data-ttu-id="f31a3-123">Привязка служб требует небольших разовых затрат, но не противодействует атакам с подделкой пакетов.</span><span class="sxs-lookup"><span data-stu-id="f31a3-123">Service binding incurs a one-time, negligible cost, but it does not address spoofing attacks.</span></span> <span data-ttu-id="f31a3-124">Привязка службы происходит, когда клиентское приложение не использует шифрование для подключения к [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="f31a3-124">Service Binding occurs when a client application does not use encryption to connect to the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>  
  
### <a name="channel-binding"></a><span data-ttu-id="f31a3-125">привязка каналов</span><span class="sxs-lookup"><span data-stu-id="f31a3-125">Channel Binding</span></span>  
 <span data-ttu-id="f31a3-126">Привязка канала устанавливает защищенный канал (Schannel) между клиентом и экземпляром службы [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="f31a3-126">Channel binding establishes a secure channel (Schannel) between a client and an instance of the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] service.</span></span> <span data-ttu-id="f31a3-127">Служба проверяет подлинность клиента, сравнивая его токен привязки данного канала (СВТ) со своим собственным токеном СВТ.</span><span class="sxs-lookup"><span data-stu-id="f31a3-127">The service verifies the authenticity of the client by comparing the client's channel binding token (CBT) specific to that channel, with its own CBT.</span></span> <span data-ttu-id="f31a3-128">Привязка канала противодействует как заманивающим атакам, так и атакам с подделкой пакетов.</span><span class="sxs-lookup"><span data-stu-id="f31a3-128">Channel binding addresses both luring and spoofing attacks.</span></span> <span data-ttu-id="f31a3-129">Однако она требует более значительных затрат времени выполнения из-за шифрования системой защиты на транспортном уровне (TLS) всего трафика сеанса.</span><span class="sxs-lookup"><span data-stu-id="f31a3-129">However, it incurs a larger runtime cost, because it requires Transport Layer Security (TLS) encryption of all the session traffic.</span></span> <span data-ttu-id="f31a3-130">Привязка канала происходит, когда клиентское приложение использует шифрование для подключения к [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]вне зависимости от принудительного применения шифрования клиентом или сервером.</span><span class="sxs-lookup"><span data-stu-id="f31a3-130">Channel Binding occurs when a client application uses encryption to connect to the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], regardless of whether encryption is enforced by the client or by the server.</span></span>  
  
> [!WARNING]  
>  [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="f31a3-131">и поставщики данных [!INCLUDE[msCoName](../../includes/msconame-md.md)] для [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] поддерживают протоколы TLS 1.0 и SSL 3.0.</span><span class="sxs-lookup"><span data-stu-id="f31a3-131">and [!INCLUDE[msCoName](../../includes/msconame-md.md)] data providers for [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] support TLS 1.0 and SSL 3.0.</span></span> <span data-ttu-id="f31a3-132">Если применить другой протокол (например, TLS 1.1 или TLS 1.2), внеся изменения на уровне операционной системы SChannel, при подключении к [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] может возникнуть ошибка.</span><span class="sxs-lookup"><span data-stu-id="f31a3-132">If you enforce a different protocol (such as TLS 1.1 or TLS 1.2) by making changes in the operating system SChannel layer, your connections to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] might fail.</span></span>  
  
### <a name="operating-system-support"></a><span data-ttu-id="f31a3-133">Поддержка операционных систем</span><span class="sxs-lookup"><span data-stu-id="f31a3-133">Operating System Support</span></span>  
 <span data-ttu-id="f31a3-134">Дополнительные сведения о поддержке **расширенной защиты**в ОС Windows можно найти по следующим ссылкам:</span><span class="sxs-lookup"><span data-stu-id="f31a3-134">The following links provide more information about how Windows supports **Extended Protection**:</span></span>  
  
-   [<span data-ttu-id="f31a3-135">Интегрированная проверка подлинности Windows с расширенной защитой</span><span class="sxs-lookup"><span data-stu-id="f31a3-135">Integrated Windows Authentication with Extended Protection</span></span>](https://msdn.microsoft.com/library/dd639324.aspx)  
  
-   [<span data-ttu-id="f31a3-136">Советы по безопасности от Microsoft (973811), расширенная защита для проверки подлинности</span><span class="sxs-lookup"><span data-stu-id="f31a3-136">Microsoft Security Advisory (973811), Extended Protection for Authentication</span></span>](https://support.microsoft.com//help/973811/microsoft-security-advisory-extended-protection-for-authentication)  
  
## <a name="settings"></a><span data-ttu-id="f31a3-137">Настройки</span><span class="sxs-lookup"><span data-stu-id="f31a3-137">Settings</span></span>  
 <span data-ttu-id="f31a3-138">Имеются три параметра соединения [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , влияющие на привязку служб и привязку каналов.</span><span class="sxs-lookup"><span data-stu-id="f31a3-138">There are three [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] connection settings that affect service binding and channel binding.</span></span> <span data-ttu-id="f31a3-139">Эти параметры можно настроить с помощью диспетчера конфигурации [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] или с помощью WMI, для их просмотра можно воспользоваться аспектом **Параметры протокола сервера** управления на основе политик.</span><span class="sxs-lookup"><span data-stu-id="f31a3-139">The settings can be configured by using the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Configuration Manager, or by using WMI, and can by viewed by using the **Server Protocol Settings** facet of Policy Based Management.</span></span>  
  
-   <span data-ttu-id="f31a3-140">**Принудительное шифрование**</span><span class="sxs-lookup"><span data-stu-id="f31a3-140">**Force Encryption**</span></span>  
  
     <span data-ttu-id="f31a3-141">Возможные значения — **Вкл.** и **Выкл.**</span><span class="sxs-lookup"><span data-stu-id="f31a3-141">Possible values are **On** and **Off**.</span></span> <span data-ttu-id="f31a3-142">Для использования привязки каналов параметр **Принудительное шифрование** должен быть установлен в значение **Вкл.** и все клиенты должны принудительно выполнять шифрование.</span><span class="sxs-lookup"><span data-stu-id="f31a3-142">To use channel binding, **Force Encryption** must be set to **On**, and all clients will be forced to encrypt.</span></span> <span data-ttu-id="f31a3-143">При значении **Выкл.** гарантируется только привязка служб.</span><span class="sxs-lookup"><span data-stu-id="f31a3-143">If it is **Off**, only service binding is guaranteed.</span></span> <span data-ttu-id="f31a3-144">Параметр**Принудительное шифрование** — это один из флажков на вкладке **Свойства протоколов для MSSQLSERVER (вкладка "Флаги")** в диспетчере конфигурации [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="f31a3-144">**Force Encryption** is on the **Protocols for MSSQLSERVER Properties (Flags Tab)** in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Configuration Manager.</span></span>  
  
-   <span data-ttu-id="f31a3-145">**Расширенная защита**</span><span class="sxs-lookup"><span data-stu-id="f31a3-145">**Extended Protection**</span></span>  
  
     <span data-ttu-id="f31a3-146">Возможными значениями являются **Выкл.** , **Разрешено**и **Обязательно**.</span><span class="sxs-lookup"><span data-stu-id="f31a3-146">Possible values are **Off**, **Allowed**, and **Required**.</span></span> <span data-ttu-id="f31a3-147">Параметр **Расширенная защита** позволяет настраивать уровень **расширенной защиты** для каждого экземпляра [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="f31a3-147">The **Extended Protection** variable lets users configure the **Extended Protection** level for each [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance.</span></span> <span data-ttu-id="f31a3-148">Параметр**Расширенная защита** находится на дополнительной вкладке **Свойства протоколов для MSSQLSERVER** в диспетчере конфигурации [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="f31a3-148">**Extended Protection** is on the **Protocols for MSSQLSERVER Properties (Advanced Tab)** in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Configuration Manager.</span></span>  
  
    -   <span data-ttu-id="f31a3-149">Если задано значение **Выкл.** , **Расширенная защита** отключается.</span><span class="sxs-lookup"><span data-stu-id="f31a3-149">When set to **Off**, **Extended Protection** is disabled.</span></span> <span data-ttu-id="f31a3-150">Экземпляр [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] принимает соединения от всех клиентов, независимо от того, является клиент защищенным или нет.</span><span class="sxs-lookup"><span data-stu-id="f31a3-150">The instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] will accept connections from any client regardless of whether the client is protected or not.</span></span> <span data-ttu-id="f31a3-151">При задании**Выкл.** обеспечивается совместимость с предыдущими версиями операционных систем и версиями без установленных обновлений, но этот режим отличается меньшей безопасностью.</span><span class="sxs-lookup"><span data-stu-id="f31a3-151">**Off** is compatible with older and unpatched operating systems, but is less secure.</span></span> <span data-ttu-id="f31a3-152">Этот параметр может быть использован только в том случае, если известно, что клиентские операционные системы не поддерживают расширенную защиту.</span><span class="sxs-lookup"><span data-stu-id="f31a3-152">Use this setting when you know that the client operating systems do not support extended protection.</span></span>  
  
    -   <span data-ttu-id="f31a3-153">Если задано **Разрешено**, функция **Расширенная защита** требуется для соединений от операционных систем, поддерживающих функцию **Расширенная защита**.</span><span class="sxs-lookup"><span data-stu-id="f31a3-153">When set to **Allowed**, **Extended Protection** is required for connections from operating systems that support **Extended Protection**.</span></span> <span data-ttu-id="f31a3-154">**Расширенная защита** не используется для подключений из операционных систем, не поддерживающих **расширенную защиту**.</span><span class="sxs-lookup"><span data-stu-id="f31a3-154">**Extended Protection** is ignored for connections from operating systems that do not support **Extended Protection**.</span></span> <span data-ttu-id="f31a3-155">Соединения незащищенных клиентских приложений, выполняемых на защищенных клиентских операционных системах, отклоняются.</span><span class="sxs-lookup"><span data-stu-id="f31a3-155">Connections from unprotected client applications that are running on protected client operating systems are rejected.</span></span> <span data-ttu-id="f31a3-156">Этот параметр обеспечивает более высокий уровень защиты, чем **Выкл**, но, тем не менее, не обеспечивает самый высокий уровень защиты.</span><span class="sxs-lookup"><span data-stu-id="f31a3-156">This setting is more secure than **Off**, but is not the most secure setting.</span></span> <span data-ttu-id="f31a3-157">Рекомендуется использовать этот параметр в смешанной среде, где определенные операционные системы поддерживают функцию **Расширенная защита** , а некоторые нет.</span><span class="sxs-lookup"><span data-stu-id="f31a3-157">Use this setting in mixed environments, where some operating systems support **Extended Protection** and some do not.</span></span>  
  
    -   <span data-ttu-id="f31a3-158">Если выбрано **Обязательно**, то будут приниматься только соединения от защищенных приложений на защищенных операционных системах.</span><span class="sxs-lookup"><span data-stu-id="f31a3-158">When set to **Required**, only connections from protected applications on protected operating systems are accepted.</span></span> <span data-ttu-id="f31a3-159">Этот параметр обеспечивает наиболее высокий уровень защиты, но из операционных систем, которые не поддерживают **расширенную защиту** , нельзя будет подключиться к [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="f31a3-159">This setting is the most secure but connections from operating systems or applications that do not support **Extended Protection** will not be able to connect to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>  
  
-   <span data-ttu-id="f31a3-160">**Принятые имена участников-служб NTLM**</span><span class="sxs-lookup"><span data-stu-id="f31a3-160">**Accepted NTLM SPNs**</span></span>  
  
     <span data-ttu-id="f31a3-161">Переменная **Принятые имена участников-служб NTLM** необходима в том случае, когда для сервера известно более одного имени участника-службы.</span><span class="sxs-lookup"><span data-stu-id="f31a3-161">The **Accepted NTLM SPNs** variable is needed when a server is known by more than one SPN.</span></span> <span data-ttu-id="f31a3-162">Когда клиент попытается подключиться к серверу с допустимым именем участника-службы, которое неизвестно серверу, то привязка службы завершится ошибкой.</span><span class="sxs-lookup"><span data-stu-id="f31a3-162">When a client attempts to connect to the server by using a valid SPN that the server does not know, service binding will fail.</span></span> <span data-ttu-id="f31a3-163">Чтобы избежать этого, пользователь может указать несколько имен участников-служб, представляющих сервер, с помощью параметра **Принятые имена участников-служб NTLM**.</span><span class="sxs-lookup"><span data-stu-id="f31a3-163">To avoid this problem, users can specify several SPNs that represent the server by using **Accepted NTLM SPNs**.</span></span> <span data-ttu-id="f31a3-164">Переменная**Принятые имена участников-служб NTLM** содержит последовательность имен участников-служб, перечисленных через точку с запятой.</span><span class="sxs-lookup"><span data-stu-id="f31a3-164">**Accepted NTLM SPNs** is a series of SPNs separated my semicolons.</span></span> <span data-ttu-id="f31a3-165">Например, чтобы разрешить имена участников-служб **MSSQLSvc/ HostName1.Contoso.com** и **MSSQLSvc/ HostName2.Contoso.com**, введите **MSSQLSvc/HostName1.Contoso.com;MSSQLSvc/HostName2.Contoso.com** в поле **Принятые имена участников-служб NTLM** .</span><span class="sxs-lookup"><span data-stu-id="f31a3-165">For example, to allow the SPNs **MSSQLSvc/ HostName1.Contoso.com** and **MSSQLSvc/ HostName2.Contoso.com**, type **MSSQLSvc/HostName1.Contoso.com;MSSQLSvc/HostName2.Contoso.com** in the **Accepted NTLM SPNs** box.</span></span> <span data-ttu-id="f31a3-166">Максимальная длина этой переменной 2 048 символов.</span><span class="sxs-lookup"><span data-stu-id="f31a3-166">The variable has a maximum length of 2,048 characters.</span></span> <span data-ttu-id="f31a3-167">Параметр**Принятые имена участников-служб NTLM** находится на дополнительной вкладке **Свойства протоколов для MSSQLSERVER** в диспетчере конфигурации [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="f31a3-167">**Accepted NTLM SPNs** is on the **Protocols for MSSQLSERVER Properties (Advanced Tab)** in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Configuration Manager.</span></span>  
  
## <a name="enabling-extended-protection-for-the-database-engine"></a><span data-ttu-id="f31a3-168">Включение расширенной защиты для компонента Database Engine</span><span class="sxs-lookup"><span data-stu-id="f31a3-168">Enabling Extended Protection for the Database Engine</span></span>  
 <span data-ttu-id="f31a3-169">Чтобы обеспечить **расширенную защиту**, и на клиенте и на сервере должна работать операционная система, поддерживающая **расширенную защиту**. Кроме того, должно быть включено использование **расширенной защиты** .</span><span class="sxs-lookup"><span data-stu-id="f31a3-169">To use **Extended Protection**, both the server and the client must have an operating system on that supports **Extended Protection**, and **Extended Protection** must be enabled on the operating system.</span></span> <span data-ttu-id="f31a3-170">Дополнительные сведения о включении **расширенной защиты** в операционной системе см. в разделе [Расширенная защита при проверке подлинности](https://support.microsoft.com/kb/968389).</span><span class="sxs-lookup"><span data-stu-id="f31a3-170">For more information about how to enable **Extended Protection** for the operating system, see [Extended Protection for Authentication](https://support.microsoft.com/kb/968389).</span></span>  
  
 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="f31a3-171">поддерживает **расширенную защиту** , начиная с версии [!INCLUDE[ssKilimanjaro](../../includes/sskilimanjaro-md.md)].</span><span class="sxs-lookup"><span data-stu-id="f31a3-171">supports **Extended Protection** beginning with [!INCLUDE[ssKilimanjaro](../../includes/sskilimanjaro-md.md)].</span></span> <span data-ttu-id="f31a3-172">**Расширенная защита** для некоторых предыдущих версий [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] будет доступна в следующих выпусках.</span><span class="sxs-lookup"><span data-stu-id="f31a3-172">**Extended Protection** for some earlier versions of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] will be made available in future updates.</span></span> <span data-ttu-id="f31a3-173">После включения параметра **Расширенная защита** на компьютере сервера выполните следующие шаги, чтобы включить **расширенную защиту**.</span><span class="sxs-lookup"><span data-stu-id="f31a3-173">After enabling **Extended Protection** on the server computer, use the following steps to enable **Extended Protection**:</span></span>  
  
1.  <span data-ttu-id="f31a3-174">В меню **Пуск** выберите последовательно **Все программы**, **Microsoft SQL Server** и **Диспетчер конфигурации SQL Server**.</span><span class="sxs-lookup"><span data-stu-id="f31a3-174">On the **Start** menu, choose **All Programs**, point to **Microsoft SQL Server** and then click **SQL Server Configuration Manager**.</span></span>  
  
2.  <span data-ttu-id="f31a3-175">Разверните **SQL Server конфигурация сети**, щелкните правой кнопкой мыши элемент **протоколы для** *\<*InstanceName*>* и выберите пункт **Свойства**.</span><span class="sxs-lookup"><span data-stu-id="f31a3-175">Expand **SQL Server Network Configuration**, and then right-click **Protocols for** *\<*InstanceName*>*, and then click **Properties**.</span></span>  
  
3.  <span data-ttu-id="f31a3-176">Для привязки каналов и служб на вкладке **Дополнительно** установите значение **Расширенная защита** для соответствующих параметров.</span><span class="sxs-lookup"><span data-stu-id="f31a3-176">For both channel binding and service binding, on the **Advanced** tab, set **Extended Protection** to the appropriate setting.</span></span>  
  
4.  <span data-ttu-id="f31a3-177">Кроме того, если сервер имеет несколько имен участников-служб, то на вкладке **Дополнительно** настройте поле **Принятые имена участников-служб NTLM** , как описано в разделе «Параметры».</span><span class="sxs-lookup"><span data-stu-id="f31a3-177">Optionally, when a server is known by more than one SPN, on the **Advanced** tab configure the **Accepted NTLM SPNs** field as described in the "Settings" section.</span></span>  
  
5.  <span data-ttu-id="f31a3-178">Для привязки канала на вкладке **Флаги** установите параметр **Принудительное шифрование** в значение **Вкл.**</span><span class="sxs-lookup"><span data-stu-id="f31a3-178">For channel binding, on the **Flags** tab, set **Force Encryption** to **On**.</span></span>  
  
6.  <span data-ttu-id="f31a3-179">Перезапустите службу [!INCLUDE[ssDE](../../includes/ssde-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="f31a3-179">Restart the [!INCLUDE[ssDE](../../includes/ssde-md.md)] service.</span></span>  
  
## <a name="configuring-other-sql-server-components"></a><span data-ttu-id="f31a3-180">Настройка других компонентов SQL Server</span><span class="sxs-lookup"><span data-stu-id="f31a3-180">Configuring Other SQL Server Components</span></span>  
 <span data-ttu-id="f31a3-181">Дополнительные сведения о настройке [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)]см. в разделе [Расширенная защита для проверки подлинности служб Reporting Services](../../reporting-services/security/extended-protection-for-authentication-with-reporting-services.md).</span><span class="sxs-lookup"><span data-stu-id="f31a3-181">For more information about how to configure [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)], see [Extended Protection for Authentication with Reporting Services](../../reporting-services/security/extended-protection-for-authentication-with-reporting-services.md).</span></span>  
  
 <span data-ttu-id="f31a3-182">При использовании IIS для получения доступа к данным [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] по соединению с протоколами HTTP или HTTPS службы [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] могут использовать расширенную защиту, реализуемую IIS.</span><span class="sxs-lookup"><span data-stu-id="f31a3-182">When using IIS to access [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] data using an HTTP or HTTPs connection, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] can take advantage of Extended Protection provided by IIS.</span></span> <span data-ttu-id="f31a3-183">Дополнительные сведения о настройке IIS для использования расширенной защиты см. в разделе [Настройка расширенной защиты в IIS 7.5](https://go.microsoft.com/fwlink/?LinkId=181105).</span><span class="sxs-lookup"><span data-stu-id="f31a3-183">For more information about how to configure IIS to use Extended Protection, see [Configure Extended Protection in IIS 7.5](https://go.microsoft.com/fwlink/?LinkId=181105).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="f31a3-184">См. также:</span><span class="sxs-lookup"><span data-stu-id="f31a3-184">See Also</span></span>  
 <span data-ttu-id="f31a3-185">[Сетевая конфигурация сервера](server-network-configuration.md) </span><span class="sxs-lookup"><span data-stu-id="f31a3-185">[Server Network Configuration](server-network-configuration.md) </span></span>  
 <span data-ttu-id="f31a3-186">[Конфигурация клиентской сети](client-network-configuration.md) </span><span class="sxs-lookup"><span data-stu-id="f31a3-186">[Client Network Configuration](client-network-configuration.md) </span></span>  
 <span data-ttu-id="f31a3-187">[Общие сведения о расширенной защите для проверки подлинности](https://go.microsoft.com/fwlink/?LinkID=177943) </span><span class="sxs-lookup"><span data-stu-id="f31a3-187">[Extended Protection for Authentication Overview](https://go.microsoft.com/fwlink/?LinkID=177943) </span></span>  
 [<span data-ttu-id="f31a3-188">Интегрированная проверка подлинности Windows с расширенной защитой</span><span class="sxs-lookup"><span data-stu-id="f31a3-188">Integrated Windows Authentication with Extended Protection</span></span>](https://go.microsoft.com/fwlink/?LinkId=179922)  
  
  
