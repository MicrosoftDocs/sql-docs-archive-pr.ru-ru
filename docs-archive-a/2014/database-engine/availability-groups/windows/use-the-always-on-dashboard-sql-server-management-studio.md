---
title: Использование панели мониторинга AlwaysOn (SQL Server Management Studio) | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
f1_keywords:
- sql12.swb.agdashboard.f1
helpviewer_keywords:
- Availability Groups [SQL Server], policies
- Availability Groups [SQL Server], dashboard
ms.assetid: c9ba2589-139e-42bc-99e1-94546717c64d
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: c4ce0072bcd6642dcb4f3ac63e04c98786bd550e
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87657307"
---
# <a name="use-the-alwayson-dashboard-sql-server-management-studio"></a>Использование панели мониторинга AlwaysOn (среда SQL Server Management Studio)
  Администраторы баз данных используют панель мониторинга AlwaysOn, чтобы быстро определять исправность группы доступности AlwaysOn, а также ее реплик доступности и баз данных в [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)]. Далее приведены некоторые стандартные варианты использования панели мониторинга AlwaysOn.  
  
-   Выбор реплики для выполнения перехода на другой ресурс вручную.  
  
-   Оценка возможных потерь данных при принудительной отработке отказа.  
  
-   Оценка производительности синхронизации данных.  
  
-   Оценка влияния на производительность вторичной реплики с синхронной фиксацией  
  
 Панель мониторинга AlwaysOn отображает ключевые состояния группы доступности и индикаторы производительности, что позволяет принимать решения, необходимые для обеспечения высокого уровня доступности, полагаясь на следующие сведения.  
  
-   Состояние свертки реплики  
  
-   Режим и состояние синхронизации  
  
-   Оценка потерь данных  
  
-   Предполагаемое время восстановления (отставание при накате не происходит)  
  
-   Сведения о реплике базы данных  
  
-   Режим и состояние синхронизации  
  
-   Время на восстановление журнала  
  
 
  
##  <a name="before-you-begin"></a><a name="BeforeYouBegin"></a> Перед началом  
  
###  <a name="prerequisites"></a><a name="Prerequisites"></a> Предварительные требования  
 Необходимо подключение к экземпляру сервера [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , на котором размещена первичная либо вторичная реплика группы доступности.  
  
###  <a name="security"></a><a name="Security"></a> безопасность  
  
####  <a name="permissions"></a><a name="Permissions"></a> Permissions  
 Требуются разрешения CONNECT, VIEW SERVER STATE и VIEW ANY DEFINITION.  
  
##  <a name="to-start-the-alwayson-dashboard"></a><a name="SSMSProcedure"></a>Запуск панели мониторинга AlwaysOn  
  
1.  В обозревателе объектов подключитесь к экземпляру [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , на котором требуется запустить панель мониторинга AlwaysOn.  
  
2.  Разверните узел **Высокий уровень доступности AlwaysOn**, правой кнопкой мыши щелкните узел **Группы доступности** и выберите пункт **Показать панель мониторинга**.  
  
###  <a name="to-change-alwayson-dashboard-options"></a><a name="DashboardOptions"></a>Изменение параметров панели мониторинга AlwaysOn  
 Для настройки поведения панели мониторинга [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] AlwaysOn для выполнения автоматического обновления и включения самостоятельно определяемой политики AlwaysOn можно использовать диалоговое окно **Параметры**[!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)].  
  
1.  В меню **Сервис** щелкните пункт **Параметры**.  
  
2.  Чтобы панель мониторинга обновлялась автоматически, в диалоговом окне **Параметры** выберите **Включить автоматическое обновление**, введите интервал обновления в секундах, после чего введите число попыток подключения.  
  
3.  Чтобы включить определяемую пользователем политику, выберите **Включить определяемую пользователем политику AlwaysOn**.  
  
##  <a name="availability-group-summary"></a><a name="AvGroupsView"></a> Краткие сведения о группе доступности  
 На экране группы доступности отображается строка сводки по каждой группе доступности, реплика которой размещена на подключенном сервере. На этой панели отображаются следующие столбцы.  
  
 **Имя группы доступности**  
 Имя группы доступности, реплика которой размещена на подключенном сервере.  
  
 **Основной экземпляр**  
 Имя экземпляра сервера, на котором размещена первичная реплика группы доступности.  
  
 **Режим отработки отказа**  
 Отображает тип режима отработки отказа, который настроен для реплики. Возможные значения режима отработки отказа:  
  
-   **Автоматически**. Указывает, что одна или несколько реплик работают в режиме автоматического перехода на другой ресурс.  
  
-   **Вручную**. Указывает, что ни одна из реплик не работает в режиме автоматического перехода на другой ресурс.  
  
 **Проблемы**  
 Щелкните ссылку **Проблемы** , чтобы открыть документацию по поиску и устранению данной неисправности. Список всех проблем с политикой AlwaysOn см. в статье [политики AlwaysOn для проблем в работе с группы доступности AlwaysOn (SQL Server)](always-on-policies-for-operational-issues-always-on-availability.md).  
  
> [!TIP]  
>  Чтобы выполнить сортировку сведений о группе доступности по имени группы доступности, основной реплике, режиму отработки отказа или проблеме, щелкайте заголовки столбцов.  
  
##  <a name="availability-group-details"></a><a name="AvGroupDetails"></a> Подробные сведения о группе доступности  
 Для группы доступности, выбранной на экране кратких сведений, отображаются следующие подробные сведения:  
  
 **Состояние группы доступности**  
 Отображает состояние работоспособности этой группы доступности.  
  
 **Primary instance**  
 Имя экземпляра сервера, на котором размещена первичная реплика группы доступности.  
  
 **Failover mode**  
 Отображает тип режима отработки отказа, который настроен для реплики. Возможные значения режима отработки отказа:  
  
-   **Автоматически**. Указывает, что одна или несколько реплик работают в режиме автоматического перехода на другой ресурс.  
  
-   **Вручную**. Указывает, что ни одна из реплик не работает в режиме автоматического перехода на другой ресурс.  
  
 **Состояние кластера**  
 Имя и состояние кластера, для которого экземпляр подключенного сервера и группа доступности являются узлом-участником.  
  
##  <a name="availability-replica-details"></a><a name="AvReplicaDetails"></a> Подробные сведения о реплике доступности  
 На панели **Реплика доступности** отображаются следующие столбцы.  
  
 **имя**;  
 Отображает имя экземпляра сервера, на котором размещена реплика доступности. Этот столбец отображается по умолчанию.  
  
 **Роль**  
 Указывает текущую роль реплики доступности, т. е. **Первичная** или **Вторичная**. Сведения о ролях [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] см. в разделе [Обзор групп доступности AlwaysOn (SQL Server)](overview-of-always-on-availability-groups-sql-server.md). Этот столбец отображается по умолчанию.  
  
 **Режим отработки отказа**  
 Отображает тип режима отработки отказа, который настроен для реплики. Возможные значения режима отработки отказа:  
  
-   **Автоматически**. Указывает, что одна или несколько реплик работают в режиме автоматического перехода на другой ресурс.  
  
-   **Вручную**. Указывает, что ни одна из реплик не работает в режиме автоматического перехода на другой ресурс.  
  
 **Состояние синхронизации**  
 Указывает, синхронизирована ли вторичная реплика с первичной репликой в настоящий момент. Этот столбец отображается по умолчанию. Допустимые значения:  
  
-   **Не синхронизировано**. Одна или несколько баз данных в реплике не синхронизированы или еще присоединены к группе доступности.  
  
-   Идет **Синхронизация**. Одна или несколько баз данных в реплике синхронизированы.  
  
-   **Синхронизировано**. Все базы данных на вторичной реплике синхронизированы с соответствующими базами данных-источниками в текущей первичной реплике, если она имеется, или последней первичной реплике.  
  
    > [!NOTE]  
    >  В режиме приоритета производительности база данных никогда не находится в синхронизированном состоянии.  
  
-   **Значение NULL**. Неизвестное состояние. Это значение возникает, когда экземпляр локального сервера не может обмениваться данными с отказоустойчивым кластером WSFC (то есть этот локальный узел не принадлежит кворуму отказоустойчивого кластера WSFC).  
  
 **Проблемы**  
 Содержит имя проблемы. Это значение отображается по умолчанию. Список всех проблем с политикой AlwaysOn см. в статье [политики AlwaysOn для проблем в работе с группы доступности AlwaysOn (SQL Server)](always-on-policies-for-operational-issues-always-on-availability.md).  
  
 **Режим доступности**  
 Указывает свойство реплики, устанавливаемое отдельно для каждой реплики доступности. Это значение по умолчанию скрыто. Допустимые значения:  
  
-   **Асинхронный**. Вторичная реплика никогда не синхронизируется с первичной репликой.  
  
-   **Синхронный**. В процессе синхронизации с базой данных-источником база данных-получатель входит в это состояние и остается синхронизированной, пока для этой базы данных продолжается синхронизация.  
  
 **Основной режим подключения**  
 Указывает режим, который используется при подключении к первичной реплике.  Это значение по умолчанию скрыто.  
  
 **Вторичный режим подключения**  
 Указывает режим, который используется при подключении к вторичной реплике.  Это значение по умолчанию скрыто.  
  
 **Состояние соединения**  
 Указывает, подключена ли в настоящий момент вторичная реплика к первичной реплике. Этот столбец по умолчанию скрыт. Допустимые значения:  
  
-   **Отключено**. Для удаленной реплики доступности указывает, что она отключена от локальной реплики доступности. Реакция локальной реплики на состояние «Отключена» зависит от ее роли следующим образом.  
  
    -   На первичной реплике при отключении вторичной реплики базы данных-получатели отмечаются как **Не синхронизирована** , а первичная реплика ожидает восстановления подключения от вторичной.  
  
    -   На вторичной реплике при обнаружении разрыва соединения начинаются попытки восстановить соединение с первичной репликой.  
  
-   **Подключено**. Удаленная реплика доступности, которая в настоящее время подключена к локальной реплике.  
  
 **Операционное состояние**  
 Указывает текущее состояние работоспособности вторичной реплики. Это значение по умолчанию скрыто. Допустимые значения:  
  
 **0**. Ожидается отработка отказа  
  
 **1**. Ожидает  
  
 **2**. Справка в Интернете  
  
 **3**. Вне сети  
  
 **4**. Ошибка  
  
 **5**. Ошибка, нет кворума  
  
 **Значение NULL**. Реплика не является локальной  
  
 **№ ошибки последнего подключения**  
 Номер последней возникшей ошибки подключения.  Это значение по умолчанию скрыто.  
  
 **Описание ошибки последнего подключения**  
 Описание ошибки, возникшей во время последнего подключения.  Это значение по умолчанию скрыто.  
  
 **Отметка времени ошибки последнего подключения**  
 Отметка времени последней возникшей ошибки подключения. Это значение по умолчанию скрыто.  
  
> [!NOTE]  
>  Сведения о счетчиках производительности для реплик доступности см. в статье [SQL Server, реплика доступности](../../../relational-databases/performance-monitor/sql-server-availability-replica.md).  
  
##  <a name="to-group-availability-group-information"></a><a name="AvDbDetails"></a> Группирование сведений о группе доступности  
 Чтобы сгруппировать сведения, нажмите **Группировать по**и выберите один из следующих вариантов.  
  
-   **Реплики доступности**  
  
-   **Базы данных доступности**  
  
-   **Состояние синхронизации**  
  
-   **Готовность к отработке отказа**  
  
-   **Проблемы**  
  
 Панель, на которой отображаются сгруппированные сведения, содержит следующие столбцы:  
  
 **имя**;  
 Имя базы данных доступности. Это значение отображается по умолчанию.  
  
 **Реплика**  
 Имя экземпляра [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , в котором размещается группа доступности. Это значение отображается по умолчанию.  
  
 **Состояние синхронизации**  
 Указывает, синхронизирована ли база данных доступности с первичной репликой. Это значение отображается по умолчанию. Возможны следующие состояния синхронизации.  
  
-   **Не синхронизирована**.  
  
    -   Для роли источника указывает, что база данных не готова к синхронизации своего журнала транзакций с соответствующими базами данных-получателями.  
  
    -   Для базы данных-получателя указывает, что на базе данных не запущена синхронизация журнала из-за проблем с соединением, синхронизация приостановлена или же база данных находится в переходных состояниях во время запуска или переключения ролей.  
  
-   Идет **Синхронизация**.  
  
     На первичной реплике:  
  
    -   Для базы данных-источника указывает, что эта база данных готова принимать запросы на просмотр от базы данных-получателя.  
  
    -   На вторичной реплике указывает, что для этой базы данных-получателя происходит активное перемещение данных.  
  
     На вторичной реплике указывает, что для этой реплики происходит активное перемещение данных.  
  
-   **Синхронизировано**.  
  
     Для базы данных-источника указывает, что синхронизирована по крайней мере одна база данных-получатель.  
  
     Для базы данных-получателя указывает, что база данных синхронизирована с соответствующей базой данных-источником.  
  
-   **Возврат**.  
  
     Обозначает этап процесса отката, в котором база данных-получатель активно получает страницы с базы данных-источника.  
  
    > [!CAUTION]  
    >  Когда база данных находится в состоянии REVERTING, принудительный переход на вторичную реплику может оставить эту базу данных в состоянии, при котором ее запуск будет невозможен.  
  
-   **Инициализация**.  
  
     Обозначает этап процесса отката, на котором журнал транзакций, по которому базе данных-получателю необходимо устранить вплоть до номера LSN, который доставляется и фиксируется на вторичной реплике.  
  
    > [!CAUTION]  
    >  Когда база данных находится в состоянии INITIALIZING, принудительная отработка отказа на вторичную реплику всегда оставляет такую базу данных в состоянии, при котором ее запуск будет невозможен.  
  
 **Готовность к отработке отказа**  
 Указывает, какая реплика доступности готова к отработке отказа, которая потенциально может пройти без потерь данных или с потерей данных. Этот столбец отображается по умолчанию. Вы можете выбрать  
  
-   **Потери данных**  
  
-   **Без потерь данных**  
  
 **Проблемы**  
 Содержит имя проблемы. Этот столбец отображается по умолчанию. Вы можете выбрать  
  
-   **Предупреждения**. Щелкните, чтобы отобразить пороговые значения и предупреждения.  
  
-   **Критическое**. Щелкните для отображения критических проблем.  
  
 Список всех проблем с политикой AlwaysOn см. в статье [политики AlwaysOn для проблем в работе с группы доступности AlwaysOn (SQL Server)](always-on-policies-for-operational-issues-always-on-availability.md).  
  
 **Приостановлена**  
 Указывает, что работа базы данных **Приостановлена** или **Возобновлена**. Это значение по умолчанию скрыто.  
  
 **Причина приостановки**  
 Указывает причину приостановки. Это значение по умолчанию скрыто.  
  
 **Оценка потерь данных (в секундах)**  
 Указывает разницу во времени между последними записями журнала транзакций на первичной и на вторичной репликах. Если произойдет отказ в первичной реплике, то все записи журнала транзакций в этом временном окне будут потеряны. Это значение по умолчанию скрыто.  
  
 **Примерное время восстановления (в секундах)**  
 Указывает время в секундах, необходимое для повтора наверстывания времени. *Время наверстывания* — это время, которое потребуется вторичной реплике для того, чтобы догнать первичную реплику. Это значение по умолчанию скрыто.  
  
 **Производительность синхронизации (в секундах)**  
 Указывает время в секундах, необходимое для синхронизации между первичной и вторичной репликами. Это значение по умолчанию скрыто.  
  
 **Размер очереди отправки журнала (KB)**  
 Указывает количество записей журнала в файлах журнала базы данных-источника, которые еще не отправлены вторичной реплике. Это значение по умолчанию скрыто.  
  
 **Скорость отправки журнала (КБ/сек)**  
 Указывает скорость в КБ/сек, с которой записи журнала отправляются вторичной реплике. Это значение скрыто по умолчанию.  
  
 **Размер очереди повторного выполнения (KB)**  
 Указывает количество записей журнала в файлах журнала вторичной реплики, которые еще не были выполнены повторно. Это значение по умолчанию скрыто.  
  
 **Скорость повторного выполнения (КБ/сек)**  
 Указывает скорость в КБ/сек, с которой записи журналов обрабатываются повторно. Это значение по умолчанию скрыто.  
  
 **Скорость отправки FileStream (КБ/сек)**  
 Указывает скорость FileStream в килобайтах в секунду, с которой транзакции отправляются реплике. Это значение по умолчанию скрыто.  
  
 **Номер LSN конца журнала**  
 Указывает регистрационный номер транзакции в журнале (LSN), соответствующий последней записи журнала в кэше журнала на первичной и вторичной репликах. Это значение по умолчанию скрыто.  
  
 **Номер LSN восстановления**  
 Указывает окончание журнала транзакций до того, как реплика внесет любые новые записи журнала после восстановления или отработки отказа на первичной реплике. Это значение по умолчанию скрыто.  
  
 **Номер LSN усечения**  
 Указывает минимальное значение усечения журнала для первичной реплики. Это значение по умолчанию скрыто.  
  
 **Номер LSN последней фиксации**  
 Указывает фактический номер LSN, соответствующий последней записи фиксации в журнале транзакций. Это значение по умолчанию скрыто.  
  
 **Время последней фиксации**  
 Указывает время, соответствующее последней записи фиксации. Это значение по умолчанию скрыто.  
  
 **Номер LSN последней отправки**  
 Указывает точку, до которой все блоки журнала уже отправлены первичной репликой. Это значение по умолчанию скрыто.  
  
 **Время последней отправки**  
 Указывает время отправки последнего блока. Это значение по умолчанию скрыто.  
  
 **Номер LSN последнего получения**  
 Указывает точку, до которой все блоки журнала были получены вторичной репликой, на которой размещена эта база данных-получатель. Это значение по умолчанию скрыто.  
  
 **Время последнего получения**  
 Указывает время, когда идентификатор блока журнала в последнем полученном сообщении был в последний раз прочитан во вторичной реплике. Это значение по умолчанию скрыто.  
  
 **Последний зафиксированный номер LSN**  
 Указывает точку, вплоть до которой все записи журнала были записаны на диск на вторичной реплике. Это значение по умолчанию скрыто.  
  
 **Время последней записи на диск**  
 Указывает время, в которое во вторичной реплике был получен идентификатор блока журнала для последнего зафиксированного номера LSN. Это значение по умолчанию скрыто.  
  
 **Номер LSN последней повторной обработки**  
 Указывает фактический номер LSN записи в журнале, которая была в последний раз повторно обработана во вторичной реплике. Это значение по умолчанию скрыто.  
  
 **Время последней повторной обработки**  
 Указывает время, когда последняя запись журнала была повторно обработана в базе данных-получателе. Это значение по умолчанию скрыто.  
  
##  <a name="related-tasks"></a><a name="RelatedTasks"></a> Связанные задачи  
  
-   [Используйте политики AlwaysOn для просмотра работоспособности группы доступности &#40;SQL Server&#41;](use-always-on-policies-to-view-the-health-of-an-availability-group-sql-server.md)  
  
## <a name="see-also"></a>См. также:  
 [sys.dm_os_performance_counters (Transact-SQL)](/sql/relational-databases/system-dynamic-management-views/sys-dm-os-performance-counters-transact-sql)   
 [Отслеживание групп доступности (SQL Server)](monitoring-of-availability-groups-sql-server.md)  
  
  
