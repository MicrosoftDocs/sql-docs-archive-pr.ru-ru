---
title: Настройка гибкой политики отработки отказа для управления условиями автоматической отработки отказа (Always On групп доступности) | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- Availability Groups [SQL Server], flexible failover policy
- Availability Groups [SQL Server], failover
- failover [SQL Server], AlwaysOn Availability Groups
ms.assetid: 1ed564b4-9835-4245-ae35-9ba67419a4ce
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: c938624a3ed39fe2d41f21a21af5231aa76a8c17
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87740505"
---
# <a name="configure-the-flexible-failover-policy-to-control-conditions-for-automatic-failover-always-on-availability-groups"></a><span data-ttu-id="f457d-102">Настройка гибкой политики отработки отказа для обеспечения контроля над автоматическим переходом на другой ресурс (группы доступности AlwaysOn)</span><span class="sxs-lookup"><span data-stu-id="f457d-102">Configure the Flexible Failover Policy to Control Conditions for Automatic Failover (Always On Availability Groups)</span></span>
  <span data-ttu-id="f457d-103">В данном разделе описывается настройка гибкой политики отработки отказа в группе доступности AlwaysOn при помощи [!INCLUDE[tsql](../../../includes/tsql-md.md)] или PowerShell в [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)].</span><span class="sxs-lookup"><span data-stu-id="f457d-103">This topic describes how to configure the flexible failover policy for an AlwaysOn availability group by using [!INCLUDE[tsql](../../../includes/tsql-md.md)] or PowerShell in [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)].</span></span> <span data-ttu-id="f457d-104">Гибкая политика отработки отказа предоставляет гранулярное управление условиями, которые могут вызвать автоматический переход на другой ресурс для группы доступности.</span><span class="sxs-lookup"><span data-stu-id="f457d-104">A flexible failover policy provides granular control over the conditions that cause automatic failover for an availability group.</span></span> <span data-ttu-id="f457d-105">Изменяя условия отказа, которые инициируют автоматический переход на другой ресурс, и частоту проверки исправности, вы можете увеличить или уменьшить вероятность автоматического перехода на другой ресурс и добиться высокого уровня доступности соглашения об уровне обслуживания.</span><span class="sxs-lookup"><span data-stu-id="f457d-105">By changing the failure conditions that trigger an automatic failover and the frequency of health checks, you can increase or decrease the likelihood of an automatic failover to support your SLA for high availability.</span></span>  
  
  
  
    > [!NOTE]  
    >  The flexible failover policy of an availability group cannot be configured by using [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)].  
  
##  <a name="before-you-begin"></a><a name="BeforeYouBegin"></a> <span data-ttu-id="f457d-106">Перед началом</span><span class="sxs-lookup"><span data-stu-id="f457d-106">Before You Begin</span></span>  
  
###  <a name="limitations-on-automatic-failovers"></a><a name="Limitations"></a> <span data-ttu-id="f457d-107">Ограничения автоматического перехода на другой ресурс</span><span class="sxs-lookup"><span data-stu-id="f457d-107">Limitations on Automatic Failovers</span></span>  
  
-   <span data-ttu-id="f457d-108">Для автоматического перехода на другой ресурс текущая первичная реплика и одна вторичная реплика должны быть настроены в режиме доступности синхронной фиксации с автоматическим переходом на другой ресурс, а вторичная реплика должна быть синхронизирована с первичной.</span><span class="sxs-lookup"><span data-stu-id="f457d-108">For an automatic failover to occur, the current primary replica and one secondary replica must be configured for synchronous-commit availability mode with automatic failover and the secondary replica must be synchronized with the primary replica.</span></span>  
  
-   <span data-ttu-id="f457d-109">Если в группе доступности превышен порог сбоя WSFC, то кластер WSFC не выполняет автоматический переход на другой ресурс для этой группы доступности.</span><span class="sxs-lookup"><span data-stu-id="f457d-109">If an availability group exceeds its WSFC failure threshold, the WSFC cluster will not attempt an automatic failover for the availability group.</span></span> <span data-ttu-id="f457d-110">Более того, группа ресурсов WSFC для группы доступности остается в состоянии сбоя, пока администратор кластера вручную не переведет сбойную группу ресурсов в режим «в сети» или пока администратор базы данных вручную не выполнит переход группы доступности на другой ресурс.</span><span class="sxs-lookup"><span data-stu-id="f457d-110">Furthermore, the WSFC resource group of the availability group remains in a failed state until either the cluster administrator manually brings the failed resource group online or the database administrator performs a manual failover of the availability group.</span></span> <span data-ttu-id="f457d-111">*Порог сбоя WSFC* определяется как максимальное число сбоев, которые могут произойти в группе доступности за заданный период времени.</span><span class="sxs-lookup"><span data-stu-id="f457d-111">The *WSFC failure threshold* is defined as the maximum number of failures supported for the availability group during a given time period.</span></span> <span data-ttu-id="f457d-112">По умолчанию используется период в шесть часов, а максимальное число сбоев за этот период по умолчанию равно *n*-1, где *n* — число узлов WSFC.</span><span class="sxs-lookup"><span data-stu-id="f457d-112">The default time period is six hours, and the default value for the maximum number of failures during this period is *n*-1, where *n* is the number of WSFC nodes.</span></span> <span data-ttu-id="f457d-113">Чтобы изменить пороговые значения сбоя для заданной группы доступности, используйте консоль диспетчера отработки отказа WSFC.</span><span class="sxs-lookup"><span data-stu-id="f457d-113">To change the failure-threshold values for a given availability group, use the WSFC Failover Manager Console.</span></span>  
  
###  <a name="prerequisites"></a><a name="Prerequisites"></a> <span data-ttu-id="f457d-114">Предварительные требования</span><span class="sxs-lookup"><span data-stu-id="f457d-114">Prerequisites</span></span>  
  
-   <span data-ttu-id="f457d-115">Необходимо подключиться к экземпляру сервера, на котором размещена первичная реплика.</span><span class="sxs-lookup"><span data-stu-id="f457d-115">You must be connected to the server instance that hosts the primary replica.</span></span>  
  
###  <a name="security"></a><a name="Security"></a> <span data-ttu-id="f457d-116">безопасность</span><span class="sxs-lookup"><span data-stu-id="f457d-116">Security</span></span>  
  
####  <a name="permissions"></a><a name="Permissions"></a> <span data-ttu-id="f457d-117">Permissions</span><span class="sxs-lookup"><span data-stu-id="f457d-117">Permissions</span></span>  
  
|<span data-ttu-id="f457d-118">Задача</span><span class="sxs-lookup"><span data-stu-id="f457d-118">Task</span></span>|<span data-ttu-id="f457d-119">Разрешения</span><span class="sxs-lookup"><span data-stu-id="f457d-119">Permissions</span></span>|  
|----------|-----------------|  
|<span data-ttu-id="f457d-120">Настройка гибкой политики отработки отказа для новой группы доступности</span><span class="sxs-lookup"><span data-stu-id="f457d-120">To configure the flexible failover policy for a new availability group</span></span>|<span data-ttu-id="f457d-121">Требуется членство в фиксированной роли сервера **sysadmin** и одно из разрешений: CREATE AVAILABILITY GROUP, ALTER ANY AVAILABILITY GROUP или CONTROL SERVER.</span><span class="sxs-lookup"><span data-stu-id="f457d-121">Requires membership in the **sysadmin** fixed server role and either CREATE AVAILABILITY GROUP server permission, ALTER ANY AVAILABILITY GROUP permission, or CONTROL SERVER permission.</span></span>|  
|<span data-ttu-id="f457d-122">Изменение политики существующей группы доступности</span><span class="sxs-lookup"><span data-stu-id="f457d-122">To modify the policy of an existing availability group</span></span>|<span data-ttu-id="f457d-123">Необходимо разрешение ALTER AVAILABILITY GROUP для группы доступности, разрешение CONTROL AVAILABILITY GROUP, разрешение ALTER ANY AVAILABILITY GROUP или разрешение CONTROL SERVER.</span><span class="sxs-lookup"><span data-stu-id="f457d-123">Requires ALTER AVAILABILITY GROUP permission on the availability group, CONTROL AVAILABILITY GROUP permission, ALTER ANY AVAILABILITY GROUP permission, or CONTROL SERVER permission.</span></span>|  
  
##  <a name="using-transact-sql"></a><a name="TsqlProcedure"></a> <span data-ttu-id="f457d-124">Использование Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="f457d-124">Using Transact-SQL</span></span>  
 <span data-ttu-id="f457d-125">**Настройка гибкой политики отработки отказа**</span><span class="sxs-lookup"><span data-stu-id="f457d-125">**To configure the flexible failover policy**</span></span>  
  
1.  <span data-ttu-id="f457d-126">Подключитесь к экземпляру сервера, на котором находится первичная реплика.</span><span class="sxs-lookup"><span data-stu-id="f457d-126">Connect to the server instance that hosts the primary replica.</span></span>  
  
2.  <span data-ttu-id="f457d-127">Для новой группы доступности используйте инструкцию [CREATE Availability Group](/sql/t-sql/statements/create-availability-group-transact-sql) [!INCLUDE[tsql](../../../includes/tsql-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="f457d-127">For a new availability group, use the [CREATE AVAILABILITY GROUP](/sql/t-sql/statements/create-availability-group-transact-sql)[!INCLUDE[tsql](../../../includes/tsql-md.md)] statement.</span></span> <span data-ttu-id="f457d-128">При изменении существующей группы доступности используйте инструкцию [ALTER AVAILABILITY GROUP](/sql/t-sql/statements/alter-availability-group-transact-sql) [!INCLUDE[tsql](../../../includes/tsql-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="f457d-128">If you are modifying an existing availability group, use the [ALTER AVAILABILITY GROUP](/sql/t-sql/statements/alter-availability-group-transact-sql)[!INCLUDE[tsql](../../../includes/tsql-md.md)] statement.</span></span>  
  
    -   <span data-ttu-id="f457d-129">Чтобы установить уровень условий перехода на другой ресурс, используйте параметр FAILURE_CONDITION_LEVEL = *n* , где *n* — это целое число от 1 до 5.</span><span class="sxs-lookup"><span data-stu-id="f457d-129">To set the failover condition level, use the FAILURE_CONDITION_LEVEL = *n* option, where, *n* is an integer from 1 to 5.</span></span>  
  
         <span data-ttu-id="f457d-130">Например, следующая инструкция [!INCLUDE[tsql](../../../includes/tsql-md.md)] изменяет уровень условия сбоя для существующей группы доступности `AG1`до уровня 1:</span><span class="sxs-lookup"><span data-stu-id="f457d-130">For example, the following [!INCLUDE[tsql](../../../includes/tsql-md.md)] statement changes the failure-condition level of an existing availability group, `AG1`, to level one:</span></span>  
  
        ```sql
        ALTER AVAILABILITY GROUP AG1 SET (FAILURE_CONDITION_LEVEL = 1);  
        ```  
  
         <span data-ttu-id="f457d-131">Эти целочисленные значения следующим образом соответствуют уровням условий сбоя.</span><span class="sxs-lookup"><span data-stu-id="f457d-131">The relationship of these integer values to the failure condition levels is as follows:</span></span>  
  
        |<span data-ttu-id="f457d-132">Значение [!INCLUDE[tsql](../../../includes/tsql-md.md)]</span><span class="sxs-lookup"><span data-stu-id="f457d-132">[!INCLUDE[tsql](../../../includes/tsql-md.md)] Value</span></span>|<span data-ttu-id="f457d-133">Level</span><span class="sxs-lookup"><span data-stu-id="f457d-133">Level</span></span>|<span data-ttu-id="f457d-134">Автоматическая отработка отказа запускается при...</span><span class="sxs-lookup"><span data-stu-id="f457d-134">Automatic Is Failover Initiated When...</span></span>|  
        |------------------------------|-----------|-------------------------------------------|  
        |<span data-ttu-id="f457d-135">1</span><span class="sxs-lookup"><span data-stu-id="f457d-135">1</span></span>|<span data-ttu-id="f457d-136">Один</span><span class="sxs-lookup"><span data-stu-id="f457d-136">One</span></span>|<span data-ttu-id="f457d-137">При остановке работы сервера.</span><span class="sxs-lookup"><span data-stu-id="f457d-137">On server down.</span></span> <span data-ttu-id="f457d-138">Служба SQL Server останавливается из-за отработки отказа или перезапуска.</span><span class="sxs-lookup"><span data-stu-id="f457d-138">The SQL Server service stops because of a failover or restart.</span></span>|  
        |<span data-ttu-id="f457d-139">2</span><span class="sxs-lookup"><span data-stu-id="f457d-139">2</span></span>|<span data-ttu-id="f457d-140">Два</span><span class="sxs-lookup"><span data-stu-id="f457d-140">Two</span></span>|<span data-ttu-id="f457d-141">При отсутствии ответа от сервера.</span><span class="sxs-lookup"><span data-stu-id="f457d-141">On server unresponsive.</span></span> <span data-ttu-id="f457d-142">Удовлетворяется любое условие более низкого значения, служба SQL Server подключена к кластеру, а пороговое значение ожидания проверки работоспособности превышено, либо текущая первичная реплика находится в неисправном состоянии.</span><span class="sxs-lookup"><span data-stu-id="f457d-142">Any condition of lower value is satisfied, the SQL Server service is connected to the cluster and the health check timeout threshold is exceeded, or the current primary replica is in a failed state.</span></span>|  
        |<span data-ttu-id="f457d-143">3</span><span class="sxs-lookup"><span data-stu-id="f457d-143">3</span></span>|<span data-ttu-id="f457d-144">Три</span><span class="sxs-lookup"><span data-stu-id="f457d-144">Three</span></span>|<span data-ttu-id="f457d-145">В случае критической ошибки сервера.</span><span class="sxs-lookup"><span data-stu-id="f457d-145">On critical server error.</span></span> <span data-ttu-id="f457d-146">Удовлетворяется любое условие более низкого значения, или возникает внутренняя критическая ошибка сервера.</span><span class="sxs-lookup"><span data-stu-id="f457d-146">Any condition of lower value is satisfied or an internal critical server error occurs.</span></span><br /><br /> <span data-ttu-id="f457d-147">Это уровень, заданный по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="f457d-147">This is the default level.</span></span>|  
        |<span data-ttu-id="f457d-148">4</span><span class="sxs-lookup"><span data-stu-id="f457d-148">4</span></span>|<span data-ttu-id="f457d-149">Четыре</span><span class="sxs-lookup"><span data-stu-id="f457d-149">Four</span></span>|<span data-ttu-id="f457d-150">В случае ошибки сервера средней значимости.</span><span class="sxs-lookup"><span data-stu-id="f457d-150">On moderate server error.</span></span> <span data-ttu-id="f457d-151">Удовлетворяется любое условие более низкого значения, или возникает ошибка сервера средней значимости.</span><span class="sxs-lookup"><span data-stu-id="f457d-151">Any condition of lower value is satisfied or a moderate Server error occurs.</span></span>|  
        |<span data-ttu-id="f457d-152">5</span><span class="sxs-lookup"><span data-stu-id="f457d-152">5</span></span>|<span data-ttu-id="f457d-153">Пять</span><span class="sxs-lookup"><span data-stu-id="f457d-153">Five</span></span>|<span data-ttu-id="f457d-154">При любых подходящих условиях сбоя.</span><span class="sxs-lookup"><span data-stu-id="f457d-154">On any qualified failure conditions.</span></span> <span data-ttu-id="f457d-155">Удовлетворяется любое условие более низкого значения, или возникает подходящее условие сбоя.</span><span class="sxs-lookup"><span data-stu-id="f457d-155">Any condition of lower value is satisfied or a qualifying failure condition occurs.</span></span>|  
  
         <span data-ttu-id="f457d-156">Дополнительные сведения об уровнях условий перехода на другой ресурс см. в статье [Гибкая политика отработки отказа для автоматического перехода на другой ресурс группы доступности (SQL Server)](flexible-automatic-failover-policy-availability-group.md).</span><span class="sxs-lookup"><span data-stu-id="f457d-156">For more information about the failover condition levels, see [Flexible Failover Policy for Automatic Failover of an Availability Group &#40;SQL Server&#41;](flexible-automatic-failover-policy-availability-group.md).</span></span>  
  
    -   <span data-ttu-id="f457d-157">Чтобы настроить пороговое значение ожидания проверки работоспособности, используйте параметр HEALTH_CHECK_TIMEOUT = *n*, где *n* является целым числом от 15000 миллисекунд (15 секунд) до 4294967295 миллисекунд.</span><span class="sxs-lookup"><span data-stu-id="f457d-157">To configure the health check timeout threshold, use the HEALTH_CHECK_TIMEOUT = *n* option, where, *n* is an integer from 15000 milliseconds (15 seconds) to 4294967295 milliseconds.</span></span> <span data-ttu-id="f457d-158">Значение по умолчанию — 30 000 миллисекунд (30 секунд)</span><span class="sxs-lookup"><span data-stu-id="f457d-158">The default value is 30000 milliseconds (30 seconds)</span></span>  
  
         <span data-ttu-id="f457d-159">Например, следующая инструкция [!INCLUDE[tsql](../../../includes/tsql-md.md)] изменяет пороговое значение времени ожидания проверки работоспособности существующей группы доступности `AG1`на значение 60 000 миллисекунд (одна минута).</span><span class="sxs-lookup"><span data-stu-id="f457d-159">For example, the following [!INCLUDE[tsql](../../../includes/tsql-md.md)] statement changes the health-check timeout threshold of an existing availability group, `AG1`, to 60,000 milliseconds (one minute).</span></span>  
  
        ```sql
        ALTER AVAILABILITY GROUP AG1 SET (HEALTH_CHECK_TIMEOUT = 60000);  
        ```  
  
##  <a name="using-powershell"></a><a name="PowerShellProcedure"></a> <span data-ttu-id="f457d-160">Использование PowerShell</span><span class="sxs-lookup"><span data-stu-id="f457d-160">Using PowerShell</span></span>  

### <a name="to-configure-the-flexible-failover-policy"></a><span data-ttu-id="f457d-161">Настройка гибкой политики отработки отказа \* \*</span><span class="sxs-lookup"><span data-stu-id="f457d-161">To configure the flexible failover policy\*\*</span></span>  
  
1.  <span data-ttu-id="f457d-162">Установите значение по умолчанию (`cd`) равным серверу экземпляра, на котором размещена первичная реплика.</span><span class="sxs-lookup"><span data-stu-id="f457d-162">Set default (`cd`) to the server instance that hosts the primary replica.</span></span>  
  
2.  <span data-ttu-id="f457d-163">При добавлении реплики доступности в группу доступности воспользуйтесь командлетом `New-SqlAvailabilityGroup`.</span><span class="sxs-lookup"><span data-stu-id="f457d-163">When adding an availability replica to an availability group, use the `New-SqlAvailabilityGroup` cmdlet.</span></span> <span data-ttu-id="f457d-164">При изменении существующей реплики доступности воспользуйтесь командлетом `Set-SqlAvailabilityGroup`.</span><span class="sxs-lookup"><span data-stu-id="f457d-164">When modifying an existing availability replica, use the `Set-SqlAvailabilityGroup` cmdlet.</span></span>  
  
    -   <span data-ttu-id="f457d-165">Чтобы задать уровень условия отработки отказа, используйте `FailureConditionLevel` параметр *Level* , где *Level* имеет одно из следующих значений:</span><span class="sxs-lookup"><span data-stu-id="f457d-165">To set the failover condition level, use the `FailureConditionLevel`*level* parameter, where, *level* is one of the following values:</span></span>  
  
        |<span data-ttu-id="f457d-166">Значение</span><span class="sxs-lookup"><span data-stu-id="f457d-166">Value</span></span>|<span data-ttu-id="f457d-167">Level</span><span class="sxs-lookup"><span data-stu-id="f457d-167">Level</span></span>|<span data-ttu-id="f457d-168">Автоматическая отработка отказа запускается при...</span><span class="sxs-lookup"><span data-stu-id="f457d-168">Automatic Is Failover Initiated When...</span></span>|  
        |-----------|-----------|-------------------------------------------|  
        |`OnServerDown`|<span data-ttu-id="f457d-169">Один</span><span class="sxs-lookup"><span data-stu-id="f457d-169">One</span></span>|<span data-ttu-id="f457d-170">При остановке работы сервера.</span><span class="sxs-lookup"><span data-stu-id="f457d-170">On server down.</span></span> <span data-ttu-id="f457d-171">Служба SQL Server останавливается из-за отработки отказа или перезапуска.</span><span class="sxs-lookup"><span data-stu-id="f457d-171">The SQL Server service stops because of a failover or restart.</span></span>|  
        |`OnServerUnresponsive`|<span data-ttu-id="f457d-172">Два</span><span class="sxs-lookup"><span data-stu-id="f457d-172">Two</span></span>|<span data-ttu-id="f457d-173">При отсутствии ответа от сервера.</span><span class="sxs-lookup"><span data-stu-id="f457d-173">On server unresponsive.</span></span> <span data-ttu-id="f457d-174">Удовлетворяется любое условие более низкого значения, служба SQL Server подключена к кластеру, а пороговое значение ожидания проверки работоспособности превышено, либо текущая первичная реплика находится в неисправном состоянии.</span><span class="sxs-lookup"><span data-stu-id="f457d-174">Any condition of lower value is satisfied, the SQL Server service is connected to the cluster and the health check timeout threshold is exceeded, or the current primary replica is in a failed state.</span></span>|  
        |`OnCriticalServerError`|<span data-ttu-id="f457d-175">Три</span><span class="sxs-lookup"><span data-stu-id="f457d-175">Three</span></span>|<span data-ttu-id="f457d-176">В случае критической ошибки сервера.</span><span class="sxs-lookup"><span data-stu-id="f457d-176">On critical server error.</span></span> <span data-ttu-id="f457d-177">Удовлетворяется любое условие более низкого значения, или возникает внутренняя критическая ошибка сервера.</span><span class="sxs-lookup"><span data-stu-id="f457d-177">Any condition of lower value is satisfied or an internal critical server error occurs.</span></span><br /><br /> <span data-ttu-id="f457d-178">Это уровень, заданный по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="f457d-178">This is the default level.</span></span>|  
        |`OnModerateServerError`|<span data-ttu-id="f457d-179">Четыре</span><span class="sxs-lookup"><span data-stu-id="f457d-179">Four</span></span>|<span data-ttu-id="f457d-180">В случае ошибки сервера средней значимости.</span><span class="sxs-lookup"><span data-stu-id="f457d-180">On moderate server error.</span></span> <span data-ttu-id="f457d-181">Удовлетворяется любое условие более низкого значения, или возникает ошибка сервера средней значимости.</span><span class="sxs-lookup"><span data-stu-id="f457d-181">Any condition of lower value is satisfied or a moderate Server error occurs.</span></span>|  
        |`OnAnyQualifiedFailureConditions`|<span data-ttu-id="f457d-182">Пять</span><span class="sxs-lookup"><span data-stu-id="f457d-182">Five</span></span>|<span data-ttu-id="f457d-183">При любых подходящих условиях сбоя.</span><span class="sxs-lookup"><span data-stu-id="f457d-183">On any qualified failure conditions.</span></span> <span data-ttu-id="f457d-184">Удовлетворяется любое условие более низкого значения, или возникает подходящее условие сбоя.</span><span class="sxs-lookup"><span data-stu-id="f457d-184">Any condition of lower value is satisfied or a qualifying failure condition occurs.</span></span>|  
  
         <span data-ttu-id="f457d-185">Дополнительные сведения об уровнях условий перехода на другой ресурс см. в статье [Гибкая политика отработки отказа для автоматического перехода на другой ресурс группы доступности (SQL Server)](flexible-automatic-failover-policy-availability-group.md).</span><span class="sxs-lookup"><span data-stu-id="f457d-185">For more information about the failover condition levels, see [Flexible Failover Policy for Automatic Failover of an Availability Group &#40;SQL Server&#41;](flexible-automatic-failover-policy-availability-group.md).</span></span>  
  
         <span data-ttu-id="f457d-186">Например, следующая команда изменяет уровень условия сбоя для существующей группы доступности `AG1`до уровня 1.</span><span class="sxs-lookup"><span data-stu-id="f457d-186">For example, the following command changes the failure-condition level of an existing availability group, `AG1`, to level one.</span></span>  
  
        ```powershell
        Set-SqlAvailabilityGroup `
         -Path SQLSERVER:\Sql\PrimaryServer\InstanceName\AvailabilityGroups\MyAg `
         -FailureConditionLevel OnServerDown  
        ```  
  
    -   <span data-ttu-id="f457d-187">Чтобы установить пороговое значение времени ожидания проверки работоспособности, используйте `HealthCheckTimeout` параметр *n* , где *n* — это целое число от 15000 миллисекунд (15 секунд) до 4294967295 миллисекунд.</span><span class="sxs-lookup"><span data-stu-id="f457d-187">To set the health check timeout threshold, use the `HealthCheckTimeout`*n* parameter, where, *n* is an integer from 15000 milliseconds (15 seconds) to 4294967295 milliseconds.</span></span> <span data-ttu-id="f457d-188">Значение по умолчанию — 30 000 миллисекунд (30 секунд).</span><span class="sxs-lookup"><span data-stu-id="f457d-188">The default value is 30000 milliseconds (30 seconds).</span></span>  
  
         <span data-ttu-id="f457d-189">Например, следующая команда изменяет пороговое значение времени ожидания проверки работоспособности существующей группы доступности `AG1`на значение 120 000 миллисекунд (две минуты).</span><span class="sxs-lookup"><span data-stu-id="f457d-189">For example, the following command changes the health-check timeout threshold of an existing availability group, `AG1`, to 120,000 milliseconds (two minutes).</span></span>  
  
        ```powershell
        Set-SqlAvailabilityGroup `
         -Path SQLSERVER:\Sql\PrimaryServer\InstanceName\AvailabilityGroups\MyAG `
         -HealthCheckTimeout 120000  
        ```  
  
> [!NOTE]  
>  <span data-ttu-id="f457d-190">Чтобы просмотреть синтаксис командлета, воспользуйтесь командлетом `Get-Help` в среде [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] PowerShell.</span><span class="sxs-lookup"><span data-stu-id="f457d-190">To view the syntax of a cmdlet, use the `Get-Help` cmdlet in the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] PowerShell environment.</span></span> <span data-ttu-id="f457d-191">Дополнительные сведения см. в разделе [Get Help SQL Server PowerShell](../../../powershell/sql-server-powershell.md).</span><span class="sxs-lookup"><span data-stu-id="f457d-191">For more information, see [Get Help SQL Server PowerShell](../../../powershell/sql-server-powershell.md).</span></span>  
  
 <span data-ttu-id="f457d-192">**Настройка и использование поставщика SQL Server PowerShell**</span><span class="sxs-lookup"><span data-stu-id="f457d-192">**To set up and use the SQL Server PowerShell provider**</span></span>  
  
-   [<span data-ttu-id="f457d-193">Поставщик SQL Server PowerShell</span><span class="sxs-lookup"><span data-stu-id="f457d-193">SQL Server PowerShell Provider</span></span>](../../../powershell/sql-server-powershell-provider.md)  
  
-   [<span data-ttu-id="f457d-194">Получение справок по SQL Server PowerShell</span><span class="sxs-lookup"><span data-stu-id="f457d-194">Get Help SQL Server PowerShell</span></span>](../../../powershell/sql-server-powershell.md)  
  
## <a name="see-also"></a><span data-ttu-id="f457d-195">См. также:</span><span class="sxs-lookup"><span data-stu-id="f457d-195">See Also</span></span>  
 <span data-ttu-id="f457d-196">[Общие сведения о группы доступности AlwaysOn &#40;SQL Server&#41;](overview-of-always-on-availability-groups-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="f457d-196">[Overview of AlwaysOn Availability Groups &#40;SQL Server&#41;](overview-of-always-on-availability-groups-sql-server.md) </span></span>  
 <span data-ttu-id="f457d-197">[Режимы доступности (группы доступности AlwaysOn)](availability-modes-always-on-availability-groups.md) </span><span class="sxs-lookup"><span data-stu-id="f457d-197">[Availability Modes (AlwaysOn Availability Groups)](availability-modes-always-on-availability-groups.md) </span></span>  
 <span data-ttu-id="f457d-198">[Отказоустойчивость и режимы отработки отказа &#40;группы доступности AlwaysOn&#41;](failover-and-failover-modes-always-on-availability-groups.md) </span><span class="sxs-lookup"><span data-stu-id="f457d-198">[Failover and Failover Modes &#40;AlwaysOn Availability Groups&#41;](failover-and-failover-modes-always-on-availability-groups.md) </span></span>  
 <span data-ttu-id="f457d-199">[Отказоустойчивая кластеризация Windows Server (WSFC) с SQL Server](../../../sql-server/failover-clusters/windows/windows-server-failover-clustering-wsfc-with-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="f457d-199">[Windows Server Failover Clustering &#40;WSFC&#41; with SQL Server](../../../sql-server/failover-clusters/windows/windows-server-failover-clustering-wsfc-with-sql-server.md) </span></span>  
 <span data-ttu-id="f457d-200">[Политика отработки отказа для экземпляров откзоустойчивого кластера](../../../sql-server/failover-clusters/windows/failover-policy-for-failover-cluster-instances.md) </span><span class="sxs-lookup"><span data-stu-id="f457d-200">[Failover Policy for Failover Cluster Instances](../../../sql-server/failover-clusters/windows/failover-policy-for-failover-cluster-instances.md) </span></span>  
 [<span data-ttu-id="f457d-201">sp_server_diagnostics (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="f457d-201">sp_server_diagnostics &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-server-diagnostics-transact-sql)  
