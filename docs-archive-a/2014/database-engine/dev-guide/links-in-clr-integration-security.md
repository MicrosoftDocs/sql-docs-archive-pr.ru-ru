---
title: Ссылки в безопасности интеграции со средой CLR | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: database-engine
ms.topic: reference
helpviewer_keywords:
- table-access links [CLR integration]
- security [CLR integration]
- invocation links [CLR integration]
- gated links [CLR integration]
ms.assetid: 168efd01-d12e-4bdf-a1b3-0b5c76474eaf
author: mashamsft
ms.author: mathoma
ms.openlocfilehash: 52a4f8084a8a90384c8916f2219faaf2c138b11c
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87751388"
---
# <a name="links-in-clr-integration-security"></a><span data-ttu-id="f67dd-102">Ссылки в средствах безопасности интеграции со средой CLR</span><span class="sxs-lookup"><span data-stu-id="f67dd-102">Links in CLR Integration Security</span></span>
  <span data-ttu-id="f67dd-103">В этом разделе описан способ обеспечения взаимного вызова в [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]фрагментов пользовательского кода на языке [!INCLUDE[tsql](../../includes/tsql-md.md)] или на одном из управляемых языков.</span><span class="sxs-lookup"><span data-stu-id="f67dd-103">This section describes how pieces of user code can call each other in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], either in [!INCLUDE[tsql](../../includes/tsql-md.md)] or in one of the managed languages.</span></span> <span data-ttu-id="f67dd-104">Применяемые при этом связи между объектами называются ссылками.</span><span class="sxs-lookup"><span data-stu-id="f67dd-104">These relationships between objects are referred to as links.</span></span>  
  
## <a name="invocation-links"></a><span data-ttu-id="f67dd-105">Ссылки вызова</span><span class="sxs-lookup"><span data-stu-id="f67dd-105">Invocation Links</span></span>  
 <span data-ttu-id="f67dd-106">Ссылки вызова соответствуют вызову кода, который поступает либо от пользователя, вызывающего объект (такой как пакетное задание [!INCLUDE[tsql](../../includes/tsql-md.md)] с вызовом хранимой процедуры), либо из хранимой процедуры или функции среды CLR.</span><span class="sxs-lookup"><span data-stu-id="f67dd-106">Invocation links correspond to a code invocation, either from a user calling an object (such as a [!INCLUDE[tsql](../../includes/tsql-md.md)] batch calling a stored procedure), or a common language runtime (CLR) stored procedure or function.</span></span> <span data-ttu-id="f67dd-107">Применение ссылок вызова влечет за собой выполнение проверки разрешения `EXECUTE` на вызываемый объект.</span><span class="sxs-lookup"><span data-stu-id="f67dd-107">Invocation links cause an `EXECUTE` permission on the callee to be checked.</span></span>  
  
## <a name="table-access-links"></a><span data-ttu-id="f67dd-108">Ссылки доступа к таблицам</span><span class="sxs-lookup"><span data-stu-id="f67dd-108">Table-Access Links</span></span>  
 <span data-ttu-id="f67dd-109">Ссылки доступа к таблицам соответствуют операциям получения или изменения значений в таблице, представлении или функции с табличным значением.</span><span class="sxs-lookup"><span data-stu-id="f67dd-109">Table access links correspond to retrieving or modifying values in a table, view, or a table-valued function.</span></span> <span data-ttu-id="f67dd-110">Ссылки доступа к таблицам аналогичны ссылкам вызова, если не считать того, что они обеспечивают более детализированный контроль доступа в рамках разрешений SELECT, INSERT, UPDATE и DELETE.</span><span class="sxs-lookup"><span data-stu-id="f67dd-110">They are similar to invocation links, except that they have a finer-grained access control in terms of SELECT, INSERT, UPDATE, and DELETE permissions.</span></span>  
  
## <a name="gated-links"></a><span data-ttu-id="f67dd-111">Неконтролируемые ссылки</span><span class="sxs-lookup"><span data-stu-id="f67dd-111">Gated Links</span></span>  
 <span data-ttu-id="f67dd-112">Неконтролируемые ссылки означают, что во время выполнения не происходит проверка разрешений в рамках связей между объектами после установления этих связей.</span><span class="sxs-lookup"><span data-stu-id="f67dd-112">Gated links mean that during execution, permissions are not checked across the object relationship once it has been established.</span></span> <span data-ttu-id="f67dd-113">Если между двумя объектами (например, между объектом **x** и объектом **y**) определена неконтролируемая ссылка, то разрешения на объект **y** и на другие объекты, к которым осуществляется доступ из объекта **y** , проверяются только во время создания объекта **x**.</span><span class="sxs-lookup"><span data-stu-id="f67dd-113">When there is a gated link between two objects (for example, object **x** and object **y**), permissions on object **y** and other objects accessed from object **y** are checked only at the creation time of object **x**.</span></span> <span data-ttu-id="f67dd-114">Во время создания объекта **x** `REFERENCE` разрешение проверяется по **оси y** для владельца **x**.</span><span class="sxs-lookup"><span data-stu-id="f67dd-114">At the creation time of object **x**, `REFERENCE` permission is checked on **y** against the owner of **x**.</span></span> <span data-ttu-id="f67dd-115">А во время выполнения (например, при вызове кем-то объекта **x**) разрешения на объект **y** или другие объекты, на которые в нем заданы статические ссылки, не проверяются.</span><span class="sxs-lookup"><span data-stu-id="f67dd-115">At execution time, (for example, when someone calls object **x**), there are no permissions checked against **y** or other objects it references statically.</span></span> <span data-ttu-id="f67dd-116">Во время выполнения проверяется соответствующее разрешение в отношении самого объекта **x** .</span><span class="sxs-lookup"><span data-stu-id="f67dd-116">At execution time, an appropriate permission will be checked against object **x** itself.</span></span>  
  
 <span data-ttu-id="f67dd-117">Неконтролируемые ссылки всегда используются совместно с зависимостью метаданных между двумя объектами.</span><span class="sxs-lookup"><span data-stu-id="f67dd-117">Gated links are always used in conjunction with a metadata dependency between two objects.</span></span> <span data-ttu-id="f67dd-118">Эта зависимость метаданных представляет собой связь, устанавливаемую в каталогах [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , которая предотвращает удаление объекта, если от него зависит другой объект.</span><span class="sxs-lookup"><span data-stu-id="f67dd-118">This metadata dependency is a relationship established in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] catalogs that prevents an object from being dropped as long as another object depends on it.</span></span>  
  
 <span data-ttu-id="f67dd-119">Неконтролируемые ссылки полезны, если назначение разрешений нескольким зависимым объектам невыполнимо или неудобно.</span><span class="sxs-lookup"><span data-stu-id="f67dd-119">Gated links are useful when it is not appropriate or manageable to give permissions to many dependent objects.</span></span> <span data-ttu-id="f67dd-120">Появились неконтролируемые ссылки между объектами, которые определяют точки входа [!INCLUDE[tsql](../../includes/tsql-md.md)] в сборки CLR (например, процедуры, триггеры, функции, типы и агрегаты) и сборки, в которых они определены.</span><span class="sxs-lookup"><span data-stu-id="f67dd-120">Gated links are introduced between objects that define [!INCLUDE[tsql](../../includes/tsql-md.md)] entry points into CLR assemblies (for example, CLR procedures, triggers, functions, types, and aggregates) and the assemblies from which they are defined.</span></span> <span data-ttu-id="f67dd-121">Исходя из того что требования безопасности по отношению к этим объектам не контролируется следует, что для вызова точки входа [!INCLUDE[tsql](../../includes/tsql-md.md)] , определенной в сборке CLR, вызывающему объекту требуется только соответствующее разрешение на эту точку входа [!INCLUDE[tsql](../../includes/tsql-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="f67dd-121">Gated security against these objects implies that in order to invoke a [!INCLUDE[tsql](../../includes/tsql-md.md)] entry point defined in a CLR assembly, the caller only needs an appropriate permission on that [!INCLUDE[tsql](../../includes/tsql-md.md)] entry point.</span></span> <span data-ttu-id="f67dd-122">Вызывающему объекту не требуются разрешения на эту сборку или другие сборки, на которые имеются статические ссылки.</span><span class="sxs-lookup"><span data-stu-id="f67dd-122">The caller is not required to have permissions on that assembly or any other assemblies it statically references.</span></span> <span data-ttu-id="f67dd-123">Разрешения на сборку проверяются во время создания точки входа [!INCLUDE[tsql](../../includes/tsql-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="f67dd-123">The permissions on the assembly are checked at creation time of the [!INCLUDE[tsql](../../includes/tsql-md.md)] entry point.</span></span>  
  
## <a name="sql-server-authorization-based-security"></a><span data-ttu-id="f67dd-124">Безопасность SQL Server, основанная на авторизации</span><span class="sxs-lookup"><span data-stu-id="f67dd-124">SQL Server Authorization-Based Security</span></span>  
 <span data-ttu-id="f67dd-125">Далее перечислены основные правила, лежащие в основе проверок безопасности [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] для вызовов объектов базы данных в среде CLR и взаимных вызовов таких объектов; первые три правила определяют, какие разрешения проверяются и по отношению к каким объектам; четвертое правило определяет, для какого контекста выполнения проверяется разрешение.</span><span class="sxs-lookup"><span data-stu-id="f67dd-125">The following are the basic rules behind the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] security checks for invocations of and between CLR-based database objects; the first three rules define which permissions are checked and against which object; the fourth rule defines which execution context the permission is checked against.</span></span>  
  
1.  <span data-ttu-id="f67dd-126">Для всех вызовов требуется разрешение `EXECUTE`, если только вызовы не происходят в одном и том же объекте; это означает, что вызовы внутри одной и той же сборки не требуют проверок разрешений.</span><span class="sxs-lookup"><span data-stu-id="f67dd-126">All invocations require `EXECUTE` permission unless the invocations occur within the same object; this means that calls within the same assembly do not require any permission checks.</span></span> <span data-ttu-id="f67dd-127">Разрешение проверяется во время выполнения.</span><span class="sxs-lookup"><span data-stu-id="f67dd-127">The permission is checked at execution time.</span></span>  
  
2.  <span data-ttu-id="f67dd-128">Для неконтролируемых ссылок требуется разрешение `REFERENCE` по отношению к вызываемому объекту при создании вызывающего объекта.</span><span class="sxs-lookup"><span data-stu-id="f67dd-128">Gated links require `REFERENCE` permission against the callee when the calling object is created.</span></span> <span data-ttu-id="f67dd-129">Разрешение проверяется для владельца вызывающего объекта при создании объекта.</span><span class="sxs-lookup"><span data-stu-id="f67dd-129">The permission is checked for the owner of the calling object when the object is created.</span></span>  
  
3.  <span data-ttu-id="f67dd-130">Для ссылок доступа к таблицам требуются соответствующие разрешения `SELECT`, `INSERT`, `UPDATE` или `DELETE` на таблицу или представление, к которому осуществляется доступ.</span><span class="sxs-lookup"><span data-stu-id="f67dd-130">Table-access links require the corresponding `SELECT`, `INSERT`, `UPDATE`, or `DELETE` permission against the table or view being accessed.</span></span>  
  
4.  <span data-ttu-id="f67dd-131">Это разрешение проверяется применительно к текущему контексту выполнения.</span><span class="sxs-lookup"><span data-stu-id="f67dd-131">The permission is checked against the current execution context.</span></span> <span data-ttu-id="f67dd-132">Процедуры и функции могут быть созданы с контекстом выполнения, отличным от такового для вызывающего объекта.</span><span class="sxs-lookup"><span data-stu-id="f67dd-132">Procedures and functions can be created with an execution context that is different from the caller.</span></span> <span data-ttu-id="f67dd-133">Сборки всегда создаются с контекстом выполнения процедуры, функции или триггера, по отношению к которому определен этот объект.</span><span class="sxs-lookup"><span data-stu-id="f67dd-133">Assemblies are always created with the execution context of the procedure, function, or trigger that is defined against it.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="f67dd-134">См. также:</span><span class="sxs-lookup"><span data-stu-id="f67dd-134">See Also</span></span>  
 [<span data-ttu-id="f67dd-135">Безопасность интеграции со средой CLR</span><span class="sxs-lookup"><span data-stu-id="f67dd-135">CLR Integration Security</span></span>](../../relational-databases/clr-integration/security/clr-integration-security.md)  
  
  
