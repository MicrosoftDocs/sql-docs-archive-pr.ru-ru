---
title: Монитор зеркального отображения баз данных (страница "Предупреждения") | Документы Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
f1_keywords:
- sql12.swb.dbmmonitor.warningsandalerts.f1
ms.assetid: 01936122-961d-436b-ba3c-5f79fefe5469
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: e7afc4ff0e6b69c70535ef39677f3d834edbee15
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87751476"
---
# <a name="database-mirroring-monitor-warnings-page"></a><span data-ttu-id="63f8f-102">Монитор зеркального отображения баз данных (страница «Предупреждения»)</span><span class="sxs-lookup"><span data-stu-id="63f8f-102">Database Mirroring Monitor (Warnings Page)</span></span>
  <span data-ttu-id="63f8f-103">Отображает доступный только для чтения список предупреждений в связи с событиями, происходящими при зеркальном отображении баз данных, и пороговые значения, при которых выдаются предупреждения (если они были заданы).</span><span class="sxs-lookup"><span data-stu-id="63f8f-103">Displays a read-only list of warnings supported on database mirroring events and the specified warning threshold values, if available.</span></span>  
  
 <span data-ttu-id="63f8f-104">**Наблюдение за зеркальным отображением базы данных с помощью среды SQL Server Management Studio**</span><span class="sxs-lookup"><span data-stu-id="63f8f-104">**To use SQL Server Management Studio to monitor database mirroring**</span></span>  
  
-   [<span data-ttu-id="63f8f-105">Запуск монитора зеркального отображения баз данных (среда SQL Server Management Studio)</span><span class="sxs-lookup"><span data-stu-id="63f8f-105">Start Database Mirroring Monitor &#40;SQL Server Management Studio&#41;</span></span>](../database-mirroring/start-database-mirroring-monitor-sql-server-management-studio.md)  
  
## <a name="columns"></a><span data-ttu-id="63f8f-106">Столбцы</span><span class="sxs-lookup"><span data-stu-id="63f8f-106">Columns</span></span>  
 <span data-ttu-id="63f8f-107">**Предупреждение**</span><span class="sxs-lookup"><span data-stu-id="63f8f-107">**Warning**</span></span>  
 <span data-ttu-id="63f8f-108">Можно задать пороговые значения для следующих предупреждений.</span><span class="sxs-lookup"><span data-stu-id="63f8f-108">The warnings for which you can define a threshold include:</span></span>  
  
|<span data-ttu-id="63f8f-109">Предупреждение</span><span class="sxs-lookup"><span data-stu-id="63f8f-109">Warning</span></span>|<span data-ttu-id="63f8f-110">Порог</span><span class="sxs-lookup"><span data-stu-id="63f8f-110">Threshold</span></span>|  
|-------------|---------------|  
|<span data-ttu-id="63f8f-111">**Предупреждать, если размер неотправленного журнала превышает пороговое значение.**</span><span class="sxs-lookup"><span data-stu-id="63f8f-111">**Warn if the unsent log exceeds the threshold**</span></span>|<span data-ttu-id="63f8f-112">Указывает размер неотправленного журнала в килобайтах (КБ), при котором экземпляр основного сервера выдаст предупреждение.</span><span class="sxs-lookup"><span data-stu-id="63f8f-112">Specifies how many kilobytes (KB) of unsent log will generate a warning on the principal server instance.</span></span> <span data-ttu-id="63f8f-113">Это предупреждение помогает определить объем возможных потерь данных в КБ, что особенно важно для режима высокой производительности.</span><span class="sxs-lookup"><span data-stu-id="63f8f-113">This warning helps measure the potential for data loss in terms of KB, and is particularly relevant for high-performance mode.</span></span> <span data-ttu-id="63f8f-114">Однако это предупреждение также уместно в режиме высокой безопасности, когда зеркальное отображение приостановлено или прекращено, потому что участники были разъединены.</span><span class="sxs-lookup"><span data-stu-id="63f8f-114">However, the warning is also relevant for high-safety mode when mirroring is paused or suspended because the partners become disconnected.</span></span>|  
|<span data-ttu-id="63f8f-115">**Предупреждать, если размер невосстановленного журнала превысил пороговое значение.**</span><span class="sxs-lookup"><span data-stu-id="63f8f-115">**Warn if the unrestored log exceeds the threshold**</span></span>|<span data-ttu-id="63f8f-116">Указывает размер невосстановленного журнала в килобайтах (КБ), при котором экземпляр зеркального сервера выдаст предупреждение.</span><span class="sxs-lookup"><span data-stu-id="63f8f-116">Specifies how many KB of unrestored log will generate a warning on the mirror server instance.</span></span> <span data-ttu-id="63f8f-117">Это предупреждение удобно для оценки времени отработки отказа по количеству килобайтов.</span><span class="sxs-lookup"><span data-stu-id="63f8f-117">This warning is useful for measuring failover time in terms of kilobytes.</span></span> <span data-ttu-id="63f8f-118">*Время отработки отказа* в основном состоит из времени, необходимого бывшему зеркальному серверу для наката всех журналов, оставшихся в его очереди повторов, и небольшого дополнительного времени.</span><span class="sxs-lookup"><span data-stu-id="63f8f-118">*Failover time* consists mainly of the time that the former mirror server requires to roll forward any log remaining in its redo queue, plus a short additional time.</span></span><br /><br /> <span data-ttu-id="63f8f-119">Примечание. Время, которое потребуется системе, чтобы заметить ошибку, не зависит от времени отработки отказа, если она выполняется автоматически.</span><span class="sxs-lookup"><span data-stu-id="63f8f-119">Note: For an automatic failover, the time for the system to notice the error is independent of the failover time.</span></span><br /><br /> <span data-ttu-id="63f8f-120">Дополнительные сведения см. в статье [Оценка прерывания обслуживания во время переключения ролей (зеркальное отображение базы данных)](estimate-the-interruption-of-service-during-role-switching-database-mirroring.md).</span><span class="sxs-lookup"><span data-stu-id="63f8f-120">For more information, see [Estimate the Interruption of Service During Role Switching &#40;Database Mirroring&#41;](estimate-the-interruption-of-service-during-role-switching-database-mirroring.md).</span></span>|  
|<span data-ttu-id="63f8f-121">**Предупреждать, если время хранения самой старой неотправленной транзакции превысило пороговое значение.**</span><span class="sxs-lookup"><span data-stu-id="63f8f-121">**Warn if the age of the oldest unsent transaction exceeds the threshold**</span></span>|<span data-ttu-id="63f8f-122">Указывает количество транзакций за минуту, которые могут накопиться в очереди передачи перед тем, как будет сформировано предупреждение в экземпляре основного сервера.</span><span class="sxs-lookup"><span data-stu-id="63f8f-122">Specifies the number of minutes worth of transactions that can accumulate in the send queue before a warning is generated on the principal server instance.</span></span> <span data-ttu-id="63f8f-123">Это предупреждение помогает определить возможные потери данных по времени, что особенно важно для режима высокой производительности.</span><span class="sxs-lookup"><span data-stu-id="63f8f-123">This warning helps measure the potential for data loss in terms of time, and is particularly relevant for high-performance mode.</span></span> <span data-ttu-id="63f8f-124">Однако это предупреждение также уместно в режиме высокой безопасности, когда зеркальное отображение приостановлено или прекращено, потому что участники были разъединены.</span><span class="sxs-lookup"><span data-stu-id="63f8f-124">However, the warning is also relevant for high-safety mode when mirroring is paused or suspended because the partners become disconnected.</span></span>|  
|<span data-ttu-id="63f8f-125">**Предупреждать, если затраты на фиксирование изменений на зеркальном сервере превысили пороговое значение.**</span><span class="sxs-lookup"><span data-stu-id="63f8f-125">**Warn if the mirror commit overhead exceeds the threshold**</span></span>|<span data-ttu-id="63f8f-126">Указывает среднее допустимое время задержки на транзакцию в миллисекундах, при превышении которого основной сервер посылает предупреждение.</span><span class="sxs-lookup"><span data-stu-id="63f8f-126">Specifies the number of milliseconds of average delay per transaction tolerated before a warning is generated on the principal server.</span></span> <span data-ttu-id="63f8f-127">Задержка — это объем дополнительной нагрузки во время ожидания экземпляром основного сервера экземпляра зеркального сервера для добавления записи журнала транзакции в очередь повтора.</span><span class="sxs-lookup"><span data-stu-id="63f8f-127">This delay is the amount of overhead incurred while the principal server instance waits for the mirror server instance to write the transaction's log record into the redo queue.</span></span> <span data-ttu-id="63f8f-128">Это значение уместно только в режиме высокой безопасности.</span><span class="sxs-lookup"><span data-stu-id="63f8f-128">This value is relevant only in high-safety mode.</span></span>|  
  
 <span data-ttu-id="63f8f-129">**Пороговое значение на "** _<экземпляр сервера>_ **"**</span><span class="sxs-lookup"><span data-stu-id="63f8f-129">**Threshold at '** _<server_instance>_ **'**</span></span>  
 <span data-ttu-id="63f8f-130">Для каждого предупреждения отображает текущий порог, заданный пользователем для одного из экземпляров сервера (если порог задан).</span><span class="sxs-lookup"><span data-stu-id="63f8f-130">For each of the warnings, displays the current user-specified threshold, if any, for one of the server instances.</span></span> <span data-ttu-id="63f8f-131">Полное имя экземпляра сервера отображается в соответствующем заголовке столбца.</span><span class="sxs-lookup"><span data-stu-id="63f8f-131">The full instance name of the server instance is indicated in the corresponding column heading.</span></span>  
  
 <span data-ttu-id="63f8f-132">Дополнительные сведения см. в подразделе «Примечания» далее в этом разделе.</span><span class="sxs-lookup"><span data-stu-id="63f8f-132">For more information, see "Remarks," later in this topic.</span></span>  
  
 <span data-ttu-id="63f8f-133">**Установить пороги**</span><span class="sxs-lookup"><span data-stu-id="63f8f-133">**Set Thresholds**</span></span>  
 <span data-ttu-id="63f8f-134">Нажмите эту кнопку, чтобы задать порог для одного предупреждения на каждом из партнеров по обеспечению отработки отказа.</span><span class="sxs-lookup"><span data-stu-id="63f8f-134">Click this button to set a threshold for one warning on each of the failover partners.</span></span>  
  
 <span data-ttu-id="63f8f-135">Дополнительные сведения см. в подразделе «Примечания» далее в этом разделе.</span><span class="sxs-lookup"><span data-stu-id="63f8f-135">For more information, see "Remarks," later in this topic.</span></span>  
  
## <a name="remarks"></a><span data-ttu-id="63f8f-136">Remarks</span><span class="sxs-lookup"><span data-stu-id="63f8f-136">Remarks</span></span>  
 <span data-ttu-id="63f8f-137">Если сведения по экземпляру сервера в данный момент недоступны, ячейки соответствующего столбца **Пороговое значение на** показывают серый фон и текст в виде водяных знаков.</span><span class="sxs-lookup"><span data-stu-id="63f8f-137">If information is currently unavailable for a server instance, the cells of the corresponding **Threshold at** column display a gray background and watermark text.</span></span> <span data-ttu-id="63f8f-138">Если монитор не подключен к экземпляру сервера, во всех ячейках сетки отображается либо **Отсутствует соединение с** _<ИМЯ_СИСТЕМЫ>_ , либо **Отсутствует соединение с** _<ИМЯ_СИСТЕМЫ>_ **\\** _<имя_экземпляра>_ , в зависимости от того, используется ли экземпляр по умолчанию или именованный.</span><span class="sxs-lookup"><span data-stu-id="63f8f-138">If the monitor is not connected to the server instance, in every cell the grid displays either **Not connected to** _<SYSTEM_NAME>_ or **Not connected to** _<SYSTEM_NAME>_**\\**_<instance_name>_, depending on whether the instance is the default instance or a named instance.</span></span> <span data-ttu-id="63f8f-139">Если монитор ожидает результатов запроса, сетка отображает **Ожидание данных…** в каждой ячейке.</span><span class="sxs-lookup"><span data-stu-id="63f8f-139">If the monitor is waiting for a query to return, the grid displays **Waiting for data...** in every cell.</span></span>  
  
 <span data-ttu-id="63f8f-140">Если сведения доступны, в ячейке по каждому предупреждению отображается либо указанное пороговое значение (и единица измерения), либо **Не включено**.</span><span class="sxs-lookup"><span data-stu-id="63f8f-140">When information is available, the cell for each warning displays either a specified threshold value (and unit of measurement), or **Not enabled**.</span></span>  
  
 <span data-ttu-id="63f8f-141">Если порог превышен в момент обновления таблицы состояния, это событие регистрируется в журнале событий Windows при записи строки состояния.</span><span class="sxs-lookup"><span data-stu-id="63f8f-141">If a threshold is exceeded at the time the status table is refreshed, an event is logged to the Windows event log when the status row is recorded.</span></span> <span data-ttu-id="63f8f-142">Если монитор не работает, то по умолчанию строка состояния записывается каждую минуту.</span><span class="sxs-lookup"><span data-stu-id="63f8f-142">By default, the status row is recorded once a minute if the monitor is not running.</span></span> <span data-ttu-id="63f8f-143">Для каждого типа регистрируемого события можно задать предупреждение с помощью агента SQL Server или другой программы, например Microsoft Management Operations Manager (MOM).</span><span class="sxs-lookup"><span data-stu-id="63f8f-143">You can configure an alert on each type of logged event by using the SQL Server Agent or another program, such as Microsoft Management Operations Manager (MOM).</span></span>  
  
 <span data-ttu-id="63f8f-144">События, регистрируемые для конкретного участника, зависят от его текущей роли: основной сервер или зеркало.</span><span class="sxs-lookup"><span data-stu-id="63f8f-144">On a given partner, the events logged depend on its current role, principal or mirror.</span></span> <span data-ttu-id="63f8f-145">Однако порог предупреждения для конкретного события рекомендуется задавать для обоих участников, чтобы предупреждения не терялись при переходе базы данных на другой ресурс.</span><span class="sxs-lookup"><span data-stu-id="63f8f-145">However, we recommend that you set a warning threshold for a given event on both partners to ensure that the warning persists if the database fails over.</span></span> <span data-ttu-id="63f8f-146">Соответствующий порог для каждого участника зависит от возможностей производительности системы участника.</span><span class="sxs-lookup"><span data-stu-id="63f8f-146">The appropriate threshold for each partner depends on the performance capabilities of that partner's system.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="63f8f-147">Настроить пороги равнозначных событий (неотправленный журнал, невосстановленный журнал, самая старая неотправленная транзакция и затраты на фиксацию транзакции на зеркальном сервере) можно также с помощью системной хранимой процедуры **sp_dbmmonitorchangealert**.</span><span class="sxs-lookup"><span data-stu-id="63f8f-147">You can also use the **sp_dbmmonitorchangealert** system stored procedure to configure thresholds for the equivalent events-unsent log, unrecovered log, oldest unsent transaction, and mirror commit overhead.</span></span> <span data-ttu-id="63f8f-148">Дополнительные сведения см. в статье [sp_dbmmonitorchangealert (Transact-SQL)](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorchangealert-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="63f8f-148">For more information, see [sp_dbmmonitorchangealert &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorchangealert-transact-sql).</span></span>  
  
 <span data-ttu-id="63f8f-149">В следующей таблице указаны идентификаторы событий, связанные с каждым предупреждением.</span><span class="sxs-lookup"><span data-stu-id="63f8f-149">The following table shows the event ID associated with each warning.</span></span>  
  
|<span data-ttu-id="63f8f-150">Предупреждение монитора зеркального отображения баз данных</span><span class="sxs-lookup"><span data-stu-id="63f8f-150">Database Mirroring Monitor warning</span></span>|<span data-ttu-id="63f8f-151">Имя события</span><span class="sxs-lookup"><span data-stu-id="63f8f-151">Event name</span></span>|<span data-ttu-id="63f8f-152">Идентификатор события</span><span class="sxs-lookup"><span data-stu-id="63f8f-152">Event ID</span></span>|  
|----------------------------------------|----------------|--------------|  
|<span data-ttu-id="63f8f-153">**Предупреждать, если размер неотправленного журнала превышает пороговое значение.**</span><span class="sxs-lookup"><span data-stu-id="63f8f-153">**Warn if the unsent log exceeds the threshold**</span></span>|<span data-ttu-id="63f8f-154">Неотправленный журнал</span><span class="sxs-lookup"><span data-stu-id="63f8f-154">Unsent log</span></span>|<span data-ttu-id="63f8f-155">32042</span><span class="sxs-lookup"><span data-stu-id="63f8f-155">32042</span></span>|  
|<span data-ttu-id="63f8f-156">**Предупреждать, если размер невосстановленного журнала превысил пороговое значение.**</span><span class="sxs-lookup"><span data-stu-id="63f8f-156">**Warn if the unrestored log exceeds the threshold**</span></span>|<span data-ttu-id="63f8f-157">Невосстановленный журнал</span><span class="sxs-lookup"><span data-stu-id="63f8f-157">Unrestored log</span></span>|<span data-ttu-id="63f8f-158">32043</span><span class="sxs-lookup"><span data-stu-id="63f8f-158">32043</span></span>|  
|<span data-ttu-id="63f8f-159">**Предупреждать, если время хранения самой старой неотправленной транзакции превысило пороговое значение.**</span><span class="sxs-lookup"><span data-stu-id="63f8f-159">**Warn if the age of the oldest unsent transaction exceeds the threshold**</span></span>|<span data-ttu-id="63f8f-160">Самая старая неотправленная транзакция</span><span class="sxs-lookup"><span data-stu-id="63f8f-160">Oldest unsent transaction</span></span>|<span data-ttu-id="63f8f-161">32044</span><span class="sxs-lookup"><span data-stu-id="63f8f-161">32044</span></span>|  
|<span data-ttu-id="63f8f-162">**Предупреждать, если затраты на фиксирование изменений на зеркальном сервере превысили пороговое значение.**</span><span class="sxs-lookup"><span data-stu-id="63f8f-162">**Warn if the mirror commit overhead exceeds the threshold**</span></span>|<span data-ttu-id="63f8f-163">Затраты на фиксирование изменений на зеркальном сервере</span><span class="sxs-lookup"><span data-stu-id="63f8f-163">Mirror commit overhead</span></span>|<span data-ttu-id="63f8f-164">32045</span><span class="sxs-lookup"><span data-stu-id="63f8f-164">32045</span></span>|  
  
## <a name="permissions"></a><span data-ttu-id="63f8f-165">Разрешения</span><span class="sxs-lookup"><span data-stu-id="63f8f-165">Permissions</span></span>  
 <span data-ttu-id="63f8f-166">Для полного доступа требуется членство в предопределенной роли сервера **sysadmin** .</span><span class="sxs-lookup"><span data-stu-id="63f8f-166">For full access, requires membership in the **sysadmin** fixed server role.</span></span> <span data-ttu-id="63f8f-167">Только члены роли **sysadmin** могут настраивать и просматривать пороги предупреждений для важнейших показателей производительности.</span><span class="sxs-lookup"><span data-stu-id="63f8f-167">Only members of **sysadmin** can configure and view warning thresholds for key performance metrics.</span></span>  
  
 <span data-ttu-id="63f8f-168">Членство в роли **dbm_monitor** позволяет просматривать только последнюю строку состояния на странице **Предупреждения** .</span><span class="sxs-lookup"><span data-stu-id="63f8f-168">Membership in the **dbm_monitor** role enables you to view only the most recent status row on the **Warnings** Page.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="63f8f-169">См. также:</span><span class="sxs-lookup"><span data-stu-id="63f8f-169">See Also</span></span>  
 <span data-ttu-id="63f8f-170">[Запуск монитора зеркального отображения баз данных (среда SQL Server Management Studio)](../database-mirroring/start-database-mirroring-monitor-sql-server-management-studio.md) </span><span class="sxs-lookup"><span data-stu-id="63f8f-170">[Start Database Mirroring Monitor &#40;SQL Server Management Studio&#41;](../database-mirroring/start-database-mirroring-monitor-sql-server-management-studio.md) </span></span>  
 <span data-ttu-id="63f8f-171">[Мониторинг зеркального отображения базы данных (SQL Server)](database-mirroring-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="63f8f-171">[Monitoring Database Mirroring &#40;SQL Server&#41;](database-mirroring-sql-server.md) </span></span>  
 [<span data-ttu-id="63f8f-172">Запуск мастера настройки безопасности зеркального отображения баз данных (среда SQL Server Management Studio)</span><span class="sxs-lookup"><span data-stu-id="63f8f-172">Start the Configuring Database Mirroring Security Wizard &#40;SQL Server Management Studio&#41;</span></span>](start-the-configuring-database-mirroring-security-wizard.md)  
  
  
