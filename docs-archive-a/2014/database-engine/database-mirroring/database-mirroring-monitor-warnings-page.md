---
title: Монитор зеркального отображения баз данных (страница "Предупреждения") | Документы Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
f1_keywords:
- sql12.swb.dbmmonitor.warningsandalerts.f1
ms.assetid: 01936122-961d-436b-ba3c-5f79fefe5469
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: e7afc4ff0e6b69c70535ef39677f3d834edbee15
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87751476"
---
# <a name="database-mirroring-monitor-warnings-page"></a>Монитор зеркального отображения баз данных (страница «Предупреждения»)
  Отображает доступный только для чтения список предупреждений в связи с событиями, происходящими при зеркальном отображении баз данных, и пороговые значения, при которых выдаются предупреждения (если они были заданы).  
  
 **Наблюдение за зеркальным отображением базы данных с помощью среды SQL Server Management Studio**  
  
-   [Запуск монитора зеркального отображения баз данных (среда SQL Server Management Studio)](../database-mirroring/start-database-mirroring-monitor-sql-server-management-studio.md)  
  
## <a name="columns"></a>Столбцы  
 **Предупреждение**  
 Можно задать пороговые значения для следующих предупреждений.  
  
|Предупреждение|Порог|  
|-------------|---------------|  
|**Предупреждать, если размер неотправленного журнала превышает пороговое значение.**|Указывает размер неотправленного журнала в килобайтах (КБ), при котором экземпляр основного сервера выдаст предупреждение. Это предупреждение помогает определить объем возможных потерь данных в КБ, что особенно важно для режима высокой производительности. Однако это предупреждение также уместно в режиме высокой безопасности, когда зеркальное отображение приостановлено или прекращено, потому что участники были разъединены.|  
|**Предупреждать, если размер невосстановленного журнала превысил пороговое значение.**|Указывает размер невосстановленного журнала в килобайтах (КБ), при котором экземпляр зеркального сервера выдаст предупреждение. Это предупреждение удобно для оценки времени отработки отказа по количеству килобайтов. *Время отработки отказа* в основном состоит из времени, необходимого бывшему зеркальному серверу для наката всех журналов, оставшихся в его очереди повторов, и небольшого дополнительного времени.<br /><br /> Примечание. Время, которое потребуется системе, чтобы заметить ошибку, не зависит от времени отработки отказа, если она выполняется автоматически.<br /><br /> Дополнительные сведения см. в статье [Оценка прерывания обслуживания во время переключения ролей (зеркальное отображение базы данных)](estimate-the-interruption-of-service-during-role-switching-database-mirroring.md).|  
|**Предупреждать, если время хранения самой старой неотправленной транзакции превысило пороговое значение.**|Указывает количество транзакций за минуту, которые могут накопиться в очереди передачи перед тем, как будет сформировано предупреждение в экземпляре основного сервера. Это предупреждение помогает определить возможные потери данных по времени, что особенно важно для режима высокой производительности. Однако это предупреждение также уместно в режиме высокой безопасности, когда зеркальное отображение приостановлено или прекращено, потому что участники были разъединены.|  
|**Предупреждать, если затраты на фиксирование изменений на зеркальном сервере превысили пороговое значение.**|Указывает среднее допустимое время задержки на транзакцию в миллисекундах, при превышении которого основной сервер посылает предупреждение. Задержка — это объем дополнительной нагрузки во время ожидания экземпляром основного сервера экземпляра зеркального сервера для добавления записи журнала транзакции в очередь повтора. Это значение уместно только в режиме высокой безопасности.|  
  
 **Пороговое значение на "** _<экземпляр сервера>_ **"**  
 Для каждого предупреждения отображает текущий порог, заданный пользователем для одного из экземпляров сервера (если порог задан). Полное имя экземпляра сервера отображается в соответствующем заголовке столбца.  
  
 Дополнительные сведения см. в подразделе «Примечания» далее в этом разделе.  
  
 **Установить пороги**  
 Нажмите эту кнопку, чтобы задать порог для одного предупреждения на каждом из партнеров по обеспечению отработки отказа.  
  
 Дополнительные сведения см. в подразделе «Примечания» далее в этом разделе.  
  
## <a name="remarks"></a>Remarks  
 Если сведения по экземпляру сервера в данный момент недоступны, ячейки соответствующего столбца **Пороговое значение на** показывают серый фон и текст в виде водяных знаков. Если монитор не подключен к экземпляру сервера, во всех ячейках сетки отображается либо **Отсутствует соединение с** _<ИМЯ_СИСТЕМЫ>_ , либо **Отсутствует соединение с** _<ИМЯ_СИСТЕМЫ>_ **\\** _<имя_экземпляра>_ , в зависимости от того, используется ли экземпляр по умолчанию или именованный. Если монитор ожидает результатов запроса, сетка отображает **Ожидание данных…** в каждой ячейке.  
  
 Если сведения доступны, в ячейке по каждому предупреждению отображается либо указанное пороговое значение (и единица измерения), либо **Не включено**.  
  
 Если порог превышен в момент обновления таблицы состояния, это событие регистрируется в журнале событий Windows при записи строки состояния. Если монитор не работает, то по умолчанию строка состояния записывается каждую минуту. Для каждого типа регистрируемого события можно задать предупреждение с помощью агента SQL Server или другой программы, например Microsoft Management Operations Manager (MOM).  
  
 События, регистрируемые для конкретного участника, зависят от его текущей роли: основной сервер или зеркало. Однако порог предупреждения для конкретного события рекомендуется задавать для обоих участников, чтобы предупреждения не терялись при переходе базы данных на другой ресурс. Соответствующий порог для каждого участника зависит от возможностей производительности системы участника.  
  
> [!NOTE]  
>  Настроить пороги равнозначных событий (неотправленный журнал, невосстановленный журнал, самая старая неотправленная транзакция и затраты на фиксацию транзакции на зеркальном сервере) можно также с помощью системной хранимой процедуры **sp_dbmmonitorchangealert**. Дополнительные сведения см. в статье [sp_dbmmonitorchangealert (Transact-SQL)](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorchangealert-transact-sql).  
  
 В следующей таблице указаны идентификаторы событий, связанные с каждым предупреждением.  
  
|Предупреждение монитора зеркального отображения баз данных|Имя события|Идентификатор события|  
|----------------------------------------|----------------|--------------|  
|**Предупреждать, если размер неотправленного журнала превышает пороговое значение.**|Неотправленный журнал|32042|  
|**Предупреждать, если размер невосстановленного журнала превысил пороговое значение.**|Невосстановленный журнал|32043|  
|**Предупреждать, если время хранения самой старой неотправленной транзакции превысило пороговое значение.**|Самая старая неотправленная транзакция|32044|  
|**Предупреждать, если затраты на фиксирование изменений на зеркальном сервере превысили пороговое значение.**|Затраты на фиксирование изменений на зеркальном сервере|32045|  
  
## <a name="permissions"></a>Разрешения  
 Для полного доступа требуется членство в предопределенной роли сервера **sysadmin** . Только члены роли **sysadmin** могут настраивать и просматривать пороги предупреждений для важнейших показателей производительности.  
  
 Членство в роли **dbm_monitor** позволяет просматривать только последнюю строку состояния на странице **Предупреждения** .  
  
## <a name="see-also"></a>См. также:  
 [Запуск монитора зеркального отображения баз данных (среда SQL Server Management Studio)](../database-mirroring/start-database-mirroring-monitor-sql-server-management-studio.md)   
 [Мониторинг зеркального отображения базы данных (SQL Server)](database-mirroring-sql-server.md)   
 [Запуск мастера настройки безопасности зеркального отображения баз данных (среда SQL Server Management Studio)](start-the-configuring-database-mirroring-security-wizard.md)  
  
  
