---
title: Наблюдение за зеркальным отображением базы данных (SQL Server) | Документы Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- monitoring [SQL Server], database mirroring
- database mirroring [SQL Server], monitoring
ms.assetid: a7b1b9b0-7c19-4acc-9de3-3a7c5e70694d
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 92179abd47df2ee40b48be8eade7ea3e7b9267af
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87733117"
---
# <a name="monitoring-database-mirroring-sql-server"></a><span data-ttu-id="e3184-102">Наблюдение за зеркальным отображением базы данных (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="e3184-102">Monitoring Database Mirroring (SQL Server)</span></span>
  <span data-ttu-id="e3184-103">В данном разделе приводятся общие сведения о мониторе зеркального отображения баз данных и системных хранимых процедурах **sp_dbmmonitor** , описывается, как работает наблюдение за зеркальным отображением базы данных (включая **задание наблюдения за зеркальным отображением баз данных**), а также приводятся сведения о сеансах зеркального отображения базы данных, которые можно получить при наблюдении.</span><span class="sxs-lookup"><span data-stu-id="e3184-103">This section introduces Database Mirroring Monitor and the **sp_dbmmonitor** system stored procedures, explains how database mirroring monitoring works (including the **Database Mirroring Monitor Job)**, and summarizes the information that you can monitor about database mirroring sessions.</span></span> <span data-ttu-id="e3184-104">Кроме того, в данном разделе описывается определение пороговых значений предупреждений для набора стандартных событий зеркального отражения базы данных и установка предупреждений на любое событие зеркального отображения базы данных.</span><span class="sxs-lookup"><span data-stu-id="e3184-104">Additionally, this section introduces how to define warning thresholds for a set of predefined database mirroring events and how to set up alerts on any database mirroring event.</span></span>  
  
 <span data-ttu-id="e3184-105">В сеансе зеркального отображения может производиться наблюдение за зеркальной базой данных, что позволяет следить за тем, идет ли передача данных и насколько хорошо.</span><span class="sxs-lookup"><span data-stu-id="e3184-105">You can monitor a mirrored database during a mirroring session to verify whether and how well data is flowing.</span></span> <span data-ttu-id="e3184-106">Для контроля за одной или несколькими зеркальными базами данных на экземпляре сервера можно воспользоваться монитором зеркального отображения баз данных или системными хранимыми процедурами **sp_dbmmonitor** .</span><span class="sxs-lookup"><span data-stu-id="e3184-106">To set up and manage monitoring for one or more of the mirrored databases on a server instance, you can use either Database Mirroring Monitor or the **sp_dbmmonitor** system stored procedures.</span></span>  
  
 <span data-ttu-id="e3184-107">**Задание монитора зеркального отображения баз данных**работает независимо от монитора зеркального отображения баз данных.</span><span class="sxs-lookup"><span data-stu-id="e3184-107">A database mirroring monitoring job, **Database Mirroring Monitor Job**, operates in the background, independently of Database Mirroring Monitor.</span></span> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="e3184-108">вызывает **Задание монитора зеркального отображения баз данных** через регулярные интервалы времени (по умолчанию раз в минуту), а оно вызывает хранимую процедуру, обновляющую состояние зеркального отображения.</span><span class="sxs-lookup"><span data-stu-id="e3184-108">Agent calls **Database Mirroring Monitor Job** at regular intervals, the default is once a minute, and the job calls a stored procedure that updates mirroring status.</span></span> <span data-ttu-id="e3184-109">Если запуск сеанса зеркального отображения производился в среде [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] , то **Задание монитора зеркального отображения баз данных** создается автоматически.</span><span class="sxs-lookup"><span data-stu-id="e3184-109">If you use [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] to start a mirroring session, **Database Mirroring Monitor Job** is created automatically.</span></span> <span data-ttu-id="e3184-110">Но если для запуска зеркального отображения использовалась только инструкция ALTER DATABASE *<имя_базы_данных>* SET PARTNER, то необходимо создать задание с помощью хранимой процедуры.</span><span class="sxs-lookup"><span data-stu-id="e3184-110">However, if you only use ALTER DATABASE *<database_name>* SET PARTNER to start mirroring, you must create the job by running a stored procedure.</span></span>  
  
 <span data-ttu-id="e3184-111">**В этом разделе.**</span><span class="sxs-lookup"><span data-stu-id="e3184-111">**In this Topic:**</span></span>  
  
-   [<span data-ttu-id="e3184-112">Наблюдение за состоянием зеркального отображения</span><span class="sxs-lookup"><span data-stu-id="e3184-112">Monitoring Mirroring Status</span></span>](#MonitoringStatus)  
  
-   [<span data-ttu-id="e3184-113">Дополнительные источники сведений о зеркальной базе данных</span><span class="sxs-lookup"><span data-stu-id="e3184-113">Additional Sources of Information About a Mirrored Database</span></span>](#AdditionalSources)  
  
-   [<span data-ttu-id="e3184-114">Связанные задачи</span><span class="sxs-lookup"><span data-stu-id="e3184-114">Related Tasks</span></span>](#RelatedTasks)  
  
##  <a name="monitoring-mirroring-status"></a><a name="MonitoringStatus"></a> <span data-ttu-id="e3184-115">Наблюдение за состоянием зеркального отображения</span><span class="sxs-lookup"><span data-stu-id="e3184-115">Monitoring Mirroring Status</span></span>  
 <span data-ttu-id="e3184-116">Для наблюдения за настройкой и управлением одной или несколькими зеркальными базами данных на экземпляре сервера можно использовать монитор зеркального отображения баз данных или системные хранимые процедуры **dbmmonitor** .</span><span class="sxs-lookup"><span data-stu-id="e3184-116">To set up and manage monitoring for one or more of the mirrored databases on a server instance, you can use either Database Mirroring Monitor or the **dbmmonitor** system stored procedures.</span></span> <span data-ttu-id="e3184-117">В сеансе зеркального отображения может производиться наблюдение за зеркальной базой данных, что позволяет следить за тем, идет ли передача данных и насколько хорошо.</span><span class="sxs-lookup"><span data-stu-id="e3184-117">You can monitor a mirrored database during a mirroring session to verify whether and how well data is flowing.</span></span>  
  
 <span data-ttu-id="e3184-118">В частности, с помощью мониторинга зеркально отображаемой базы данных можно выполнить следующее.</span><span class="sxs-lookup"><span data-stu-id="e3184-118">Specifically, monitoring a mirrored database enables you to:</span></span>  
  
-   <span data-ttu-id="e3184-119">Проверить работу зеркального отображения.</span><span class="sxs-lookup"><span data-stu-id="e3184-119">Verify that mirroring is functioning.</span></span>  
  
     <span data-ttu-id="e3184-120">Основное состояние включает сведения о том, работают ли два экземпляра сервера, соединены ли серверы, перемещается ли журнал с основного сервера на зеркальный.</span><span class="sxs-lookup"><span data-stu-id="e3184-120">Basic status includes knowing if the two server instances are up, that the servers are connected, and that the log is being moved from the principal to the mirror.</span></span>  
  
-   <span data-ttu-id="e3184-121">Определить, согласована ли зеркальная база данных с основной базой данных.</span><span class="sxs-lookup"><span data-stu-id="e3184-121">Determine whether the mirror database is keeping up with the principal database.</span></span>  
  
     <span data-ttu-id="e3184-122">В высокопроизводительном режиме основной сервер может создавать очередь неотправленных записей журнала, которые требуется отправить с основного сервера на зеркальный.</span><span class="sxs-lookup"><span data-stu-id="e3184-122">During high-performance mode, a principal server can develop a backlog of unsent log records that still need to be sent from the principal server to the mirror server.</span></span> <span data-ttu-id="e3184-123">Более того, в любом режиме работы зеркальный сервер может создавать очередь записей журнала, которые были записаны в файл журнала, но все еще нуждаются в восстановлении в зеркальной базе данных.</span><span class="sxs-lookup"><span data-stu-id="e3184-123">Furthermore, in any operating mode, the mirror server can develop a backlog of unrestored log records that have been written to the log file but still need to be restored on the mirror database.</span></span>  
  
-   <span data-ttu-id="e3184-124">Определить, сколько данных было потеряно, пока экземпляр основного сервера оставался недоступным в высокопроизводительном режиме.</span><span class="sxs-lookup"><span data-stu-id="e3184-124">Determine how much data was lost when the principal server instance becomes unavailable during high-performance mode.</span></span>  
  
     <span data-ttu-id="e3184-125">Можно определить потерю данных, посмотрев объем неотправленного журнала транзакций (при наличии) и интервала времени, в течение которого потерянные транзакции были зафиксированы на основном сервере.</span><span class="sxs-lookup"><span data-stu-id="e3184-125">You can determine data loss by looking at the amount of unsent transaction log (if any) and the time interval in which the lost transactions were committed at the principal.</span></span>  
  
-   <span data-ttu-id="e3184-126">Сравнить текущую производительность с прежней производительностью.</span><span class="sxs-lookup"><span data-stu-id="e3184-126">Compare current performance with past performance.</span></span>  
  
     <span data-ttu-id="e3184-127">В случае возникновения ошибок администратор базы данных может просмотреть историю производительности зеркального отображения, чтобы понять текущее состояние.</span><span class="sxs-lookup"><span data-stu-id="e3184-127">When problems are occurring, a database administrator can view a history of the mirroring performance to help in understanding the current state.</span></span> <span data-ttu-id="e3184-128">Просмотр истории может позволить пользователю определить тенденции роста или снижения производительности, определить модели ошибок производительности (такие как время дня, когда у сети низкая пропускная способность или количество команд, входящих в журнал, слишком большое).</span><span class="sxs-lookup"><span data-stu-id="e3184-128">Looking at the history can allow the user to detect trends in performance, identify patterns of performance problems (such as times of day when the network is slow or the number of commands entering the log is very large).</span></span>  
  
-   <span data-ttu-id="e3184-129">Устранить причину снижения потока данных между участниками зеркального отображения.</span><span class="sxs-lookup"><span data-stu-id="e3184-129">Troubleshoot the cause of reduced data flow between mirroring partners.</span></span>  
  
-   <span data-ttu-id="e3184-130">Установить пороги предупреждений для ключевых метрик производительности.</span><span class="sxs-lookup"><span data-stu-id="e3184-130">Set warning thresholds on key performance metrics.</span></span>  
  
     <span data-ttu-id="e3184-131">Если новая строка состояния содержит значение, превышающее порог, в журнал событий Windows записывается информационное событие.</span><span class="sxs-lookup"><span data-stu-id="e3184-131">If a new status row contains a value that exceeds a threshold, an informational event is sent to the Windows event log.</span></span> <span data-ttu-id="e3184-132">Системный администратор может вручную настроить предупреждения по этим событиям.</span><span class="sxs-lookup"><span data-stu-id="e3184-132">A system administrator can then manually configure alerts based on these events.</span></span> <span data-ttu-id="e3184-133">Дополнительные сведения см. в статье [Использование пороговых значений предупреждений и оповещений в метриках производительности зеркального отображения (SQL Server)](use-warning-thresholds-and-alerts-on-mirroring-performance-metrics-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="e3184-133">For more information, see [Use Warning Thresholds and Alerts on Mirroring Performance Metrics &#40;SQL Server&#41;](use-warning-thresholds-and-alerts-on-mirroring-performance-metrics-sql-server.md).</span></span>  
  
###  <a name="tools-for-monitoring-database-mirroring-status"></a><a name="tools_for_monitoring_dbm_status"></a> <span data-ttu-id="e3184-134">Средства для контроля над состоянием зеркального отображения базы данных</span><span class="sxs-lookup"><span data-stu-id="e3184-134">Tools for Monitoring Database Mirroring Status</span></span>  
 <span data-ttu-id="e3184-135">Состояние зеркального отображения можно контролировать с помощью монитора зеркального отображения баз данных или системной хранимой процедуры **sp_dbmmonitorresults** .</span><span class="sxs-lookup"><span data-stu-id="e3184-135">Mirroring status can be monitored using either Database Mirroring Monitor or the **sp_dbmmonitorresults** system stored procedure.</span></span> <span data-ttu-id="e3184-136">Эти средства для наблюдения за зеркальным отображением любой базы данных на экземпляре локального сервера могут использовать как системные администраторы (то есть члены предопределенной роли сервера **sysadmin** ), так и пользователи, добавленные в предопределенную роль **dbm_monitor** базы данных **msdb** системным администратором.</span><span class="sxs-lookup"><span data-stu-id="e3184-136">These tools can be used to monitor database mirroring on any mirrored database on the local server instance by both System administrators, that is, members of the **sysadmin** fixed server role, and user who have been added to the **dbm_monitor** fixed database role in the **msdb** database by a system administrator.</span></span> <span data-ttu-id="e3184-137">При использовании любого из этих средств системный администратор может также вручную обновлять состояние зеркального отображения.</span><span class="sxs-lookup"><span data-stu-id="e3184-137">When using either tool, a system administrator can also manually refresh mirroring status.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="e3184-138">Системные администраторы могут также настраивать и просматривать пороги предупреждений для ключевых метрик производительности.</span><span class="sxs-lookup"><span data-stu-id="e3184-138">System administrators can also configure and view warning thresholds for key performance metrics.</span></span> <span data-ttu-id="e3184-139">Дополнительные сведения см. в статье [Использование пороговых значений предупреждений и оповещений в метриках производительности зеркального отображения (SQL Server)](use-warning-thresholds-and-alerts-on-mirroring-performance-metrics-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="e3184-139">For more information, see [Use Warning Thresholds and Alerts on Mirroring Performance Metrics &#40;SQL Server&#41;](use-warning-thresholds-and-alerts-on-mirroring-performance-metrics-sql-server.md).</span></span>  
  
-   <span data-ttu-id="e3184-140">Монитор зеркального отображения баз данных.</span><span class="sxs-lookup"><span data-stu-id="e3184-140">Database Mirroring Monitor</span></span>  
  
     <span data-ttu-id="e3184-141">Монитор зеркального отображения баз данных представляет собой графический пользовательский интерфейс, позволяющий системным администраторам просматривать и обновлять состояние и настраивать пороги предупреждений на нескольких ключевых метриках производительности.</span><span class="sxs-lookup"><span data-stu-id="e3184-141">Database Mirroring Monitor is a graphical user interface tool that enables system administrators to view and update status and to configure warning thresholds on several key performance metrics.</span></span> <span data-ttu-id="e3184-142">Члены предопределенной роли базы данных **dbm_monitor** также могут использовать монитор зеркального отображения баз данных для просмотра самых последних строк таблицы состояния зеркального отображения, однако обновлять таблицу состояния они не могут.</span><span class="sxs-lookup"><span data-stu-id="e3184-142">Database Mirroring Monitor can also be used by members of the **dbm_monitor** fixed database role to view the most recent row of the mirroring status table, though they cannot update the status table.</span></span>  
  
     <span data-ttu-id="e3184-143">На мониторе отображается состояние, включая показатели производительности выбранной базы данных на вкладке **Состояние** .</span><span class="sxs-lookup"><span data-stu-id="e3184-143">The monitor displays the status, including performance metrics, for a selected database on the **Status** tabbed page.</span></span> <span data-ttu-id="e3184-144">Содержимое данной страницы состоит из экземпляров основного и зеркального серверов.</span><span class="sxs-lookup"><span data-stu-id="e3184-144">The content of this page comes from both the principal and mirror server instances.</span></span> <span data-ttu-id="e3184-145">Эта страница заполняется асинхронно по мере сбора состояния в результате отдельных cоединений с экземплярами основного и зеркального сервера.</span><span class="sxs-lookup"><span data-stu-id="e3184-145">The page is filled asynchronously as status is gathered through separate connections to the principal and mirror server instances.</span></span> <span data-ttu-id="e3184-146">Монитор пытается обновлять таблицу состояния с интервалом в 30 секунд.</span><span class="sxs-lookup"><span data-stu-id="e3184-146">The monitor tries to update the status table at 30-second intervals.</span></span> <span data-ttu-id="e3184-147">Обновление завершается успешно только в случае, если таблица не обновлялась в течение 15 секунд, а пользователь является членом предопределенной роли сервера **sysadmin** .</span><span class="sxs-lookup"><span data-stu-id="e3184-147">The update succeeds only if the table has not been updated within 15 seconds and the user is a member of the **sysadmin** fixed server role.</span></span> <span data-ttu-id="e3184-148">Дополнительные сведения о данных, отображаемых на странице **Состояние** см. в подразделе « [Состояние, отображаемое монитором зеркального отображения баз данных](#perf_metrics_of_dbm_monitor)» далее в этом разделе.</span><span class="sxs-lookup"><span data-stu-id="e3184-148">For a summary of the information reported on the **Status** page, see [Status Displayed by the Database Mirroring Monitor](#perf_metrics_of_dbm_monitor), later in this topic.</span></span>  
  
     <span data-ttu-id="e3184-149">Основные сведения об интерфейсе монитора зеркального отображения баз данных см. в разделе [Database Mirroring Monitor Overview](database-mirroring-monitor-overview.md).</span><span class="sxs-lookup"><span data-stu-id="e3184-149">For an introduction to the Database Mirroring Monitor interface, see [Database Mirroring Monitor Overview](database-mirroring-monitor-overview.md).</span></span> <span data-ttu-id="e3184-150">Сведения о запуске монитора зеркального отображения базы данных см. в статье [Запуск монитора зеркального отображения баз данных (среда SQL Server Management Studio)](../database-mirroring/start-database-mirroring-monitor-sql-server-management-studio.md).</span><span class="sxs-lookup"><span data-stu-id="e3184-150">For information on launching Database Mirroring Monitor, see [Start Database Mirroring Monitor &#40;SQL Server Management Studio&#41;](../database-mirroring/start-database-mirroring-monitor-sql-server-management-studio.md).</span></span>  
  
-   <span data-ttu-id="e3184-151">Системные хранимые процедуры</span><span class="sxs-lookup"><span data-stu-id="e3184-151">System stored procedures</span></span>  
  
     <span data-ttu-id="e3184-152">Получить или обновить текущее состояние можно с помощью системной хранимой процедуры **sp_dbmmonitorresults** .</span><span class="sxs-lookup"><span data-stu-id="e3184-152">You can also retrieve or update the current status by running the **sp_dbmmonitorresults** system stored procedure.</span></span> <span data-ttu-id="e3184-153">Другие хранимые процедуры из группы dbmmonitor позволяют настраивать мониторинг, изменять его параметры, просматривать текущий период обновления и отменять мониторинг на экземпляре сервера.</span><span class="sxs-lookup"><span data-stu-id="e3184-153">Other dbmmonitor stored procedures enable you to set up monitoring, change monitoring parameters, view the current update period, and drop monitoring on the server instance.</span></span>  
  
     <span data-ttu-id="e3184-154">В следующей таблице приведены хранимые процедуры для использования мониторинга зеркального отображения и управления им независимо от монитора зеркального отображения баз данных.</span><span class="sxs-lookup"><span data-stu-id="e3184-154">The following table introduces the stored procedures for managing and using database mirroring monitoring independently of the Database Mirroring Monitor.</span></span>  
  
    |<span data-ttu-id="e3184-155">Процедура</span><span class="sxs-lookup"><span data-stu-id="e3184-155">Procedure</span></span>|<span data-ttu-id="e3184-156">Описание</span><span class="sxs-lookup"><span data-stu-id="e3184-156">Description</span></span>|  
    |---------------|-----------------|  
    |[<span data-ttu-id="e3184-157">sp_dbmmonitoraddmonitoring</span><span class="sxs-lookup"><span data-stu-id="e3184-157">sp_dbmmonitoraddmonitoring</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitoraddmonitoring-transact-sql)|<span data-ttu-id="e3184-158">Создает задание, периодически обновляющее сведения о состоянии по каждой зеркально отображаемой базе данных на экземпляре сервера.</span><span class="sxs-lookup"><span data-stu-id="e3184-158">Creates a job that periodically updates the status information for every mirrored database on the server instance.</span></span>|  
    |[<span data-ttu-id="e3184-159">sp_dbmmonitorchangemonitoring</span><span class="sxs-lookup"><span data-stu-id="e3184-159">sp_dbmmonitorchangemonitoring</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorchangemonitoring-transact-sql)|<span data-ttu-id="e3184-160">Изменяет значение параметра мониторинга зеркального отображения базы данных.</span><span class="sxs-lookup"><span data-stu-id="e3184-160">Changes the value of a database mirroring monitoring parameter.</span></span>|  
    |[<span data-ttu-id="e3184-161">sp_dbmmonitorhelpmonitoring</span><span class="sxs-lookup"><span data-stu-id="e3184-161">sp_dbmmonitorhelpmonitoring</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorhelpmonitoring-transact-sql)|<span data-ttu-id="e3184-162">Возвращает текущий интервал обновления.</span><span class="sxs-lookup"><span data-stu-id="e3184-162">Returns the current update period.</span></span>|  
    |[<span data-ttu-id="e3184-163">sp_dbmmonitorresults</span><span class="sxs-lookup"><span data-stu-id="e3184-163">sp_dbmmonitorresults</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorresults-transact-sql)|<span data-ttu-id="e3184-164">Возвращает строки состояния для контролируемой базы данных и позволяет выбрать, будет ли эта процедура получать последнее состояние заблаговременно.</span><span class="sxs-lookup"><span data-stu-id="e3184-164">Returns status rows for a monitored database and allows you to choose whether the procedure obtains the latest status beforehand.</span></span>|  
    |[<span data-ttu-id="e3184-165">sp_dbmmonitordropmonitoring</span><span class="sxs-lookup"><span data-stu-id="e3184-165">sp_dbmmonitordropmonitoring</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitordropmonitoring-transact-sql)|<span data-ttu-id="e3184-166">Останавливает и удаляет задания слежения за зеркальным отображением для всех баз данных на экземпляре сервера.</span><span class="sxs-lookup"><span data-stu-id="e3184-166">Stops and deletes the mirroring monitor job for all the databases on the server instance.</span></span>|  
  
     <span data-ttu-id="e3184-167">Системные хранимые процедуры из группы **dbmmonitor** можно использовать в качестве дополнения к монитору зеркального отображения баз данных.</span><span class="sxs-lookup"><span data-stu-id="e3184-167">The **dbmmonitor** system stored procedures can be used as an adjunct to the Database Mirroring Monitor.</span></span> <span data-ttu-id="e3184-168">Например, даже если мониторинг был настроен при помощи процедуры **sp_dbmmonitoraddmonitoring**, для просмотра состояния может использоваться монитор зеркального отображения баз данных.</span><span class="sxs-lookup"><span data-stu-id="e3184-168">For example, even if monitoring was configured using **sp_dbmmonitoraddmonitoring**, Database Mirroring Monitor can be used to view the status.</span></span>  
  
### <a name="how-monitoring-works"></a><span data-ttu-id="e3184-169">Как работает мониторинг</span><span class="sxs-lookup"><span data-stu-id="e3184-169">How Monitoring Works</span></span>  
 <span data-ttu-id="e3184-170">Этот раздел знакомит с таблицей состояния зеркального отображения баз данных, заданием монитора зеркального отображения баз данных и самим монитором, с тем, как пользователи могут контролировать состояние зеркального отображения баз данных и удалять задания зеркального отображения.</span><span class="sxs-lookup"><span data-stu-id="e3184-170">This section introduces the database mirroring status table, database mirroring monitor job and the monitor, how users can monitor database mirroring status, and how the monitoring job can be dropped.</span></span>  
  
#### <a name="database-mirroring-status-table"></a><span data-ttu-id="e3184-171">Таблица состояния зеркального отображения базы данных</span><span class="sxs-lookup"><span data-stu-id="e3184-171">Database Mirroring Status Table</span></span>  
 <span data-ttu-id="e3184-172">Состояние зеркального отображения базы данных хранится во внутренней, недокументированной таблице состояния зеркального отображения базы данных в базе данных **msdb** .</span><span class="sxs-lookup"><span data-stu-id="e3184-172">Database mirroring status is stored in an internal, undocumented database mirroring status table in the **msdb** database.</span></span> <span data-ttu-id="e3184-173">Эта таблица создается автоматически при первом обновлении состояния зеркального отображения на экземпляре сервера.</span><span class="sxs-lookup"><span data-stu-id="e3184-173">This status table is automatically created the first time the mirroring status is updated on the server instance.</span></span>  
  
 <span data-ttu-id="e3184-174">Таблица состояния может обновляться автоматически или вручную системным администратором с минимальным интервалом обновления 15 секунд.</span><span class="sxs-lookup"><span data-stu-id="e3184-174">The status table may be updated either automatically or manually by a system administrator, with a minimum update interval of 15 seconds.</span></span> <span data-ttu-id="e3184-175">Минимальный интервал 15 секунд предотвращает перегрузку экземпляров сервера запросами о состоянии.</span><span class="sxs-lookup"><span data-stu-id="e3184-175">The 15 second minimum prevents server instances from being overloaded with status requests.</span></span>  
  
 <span data-ttu-id="e3184-176">Таблица состояния обновляется автоматически как монитором зеркального отображения баз данных, так и заданием монитора зеркального отображения баз данных (если она запущена).</span><span class="sxs-lookup"><span data-stu-id="e3184-176">The status table is updated automatically by both Database Mirroring Monitor and the database mirroring monitor job, if running.</span></span> <span data-ttu-id="e3184-177">**Задание монитора зеркального отображения баз данных** по умолчанию обновляет эту таблицу раз в минуту (системный администратор может изменять интервал от 1 до 120 минут).</span><span class="sxs-lookup"><span data-stu-id="e3184-177">**Database Mirroring Monitor Job** updates the table once a minute by default (a system administrator can specify an update period of 1 to 120 minutes).</span></span> <span data-ttu-id="e3184-178">Для сравнения: монитор зеркального отображения баз данных обновляет эту таблицу автоматически каждые 30 секунд.</span><span class="sxs-lookup"><span data-stu-id="e3184-178">Database Mirroring Monitor, in contrast, updates the table automatically every 30 seconds.</span></span> <span data-ttu-id="e3184-179">Для выполнения этих обновлений как **Задание монитора зеркального отображения баз данных** , так и монитор зеркального отображения баз данных вызывают процедуру **sp_dbmmonitorupdate**.</span><span class="sxs-lookup"><span data-stu-id="e3184-179">For these updates, **Database Mirroring Monitor Job** and Database Mirroring Monitor call **sp_dbmmonitorupdate**.</span></span>  
  
 <span data-ttu-id="e3184-180">При первом запуске процедуры **sp_dbmmonitorupdate** создается **таблица состояний зеркального отображения баз данных** и предопределенная роль базы данных **dbm_monitor** в базе данных **msdb** .</span><span class="sxs-lookup"><span data-stu-id="e3184-180">The first time **sp_dbmmonitorupdate** runs, it creates the **database mirroring status** table and the **dbm_monitor** fixed database role in the **msdb** database.</span></span> <span data-ttu-id="e3184-181">Хранимая процедура**sp_dbmmonitorupdate** обычно обновляет состояние зеркального отображения, вставляя новую строку в таблицу состояний для каждой отображаемой базы данных на экземпляре сервера. Дополнительные сведения см. в статье "Таблица состояния зеркального отображения базы данных" далее в этом разделе.</span><span class="sxs-lookup"><span data-stu-id="e3184-181">**sp_dbmmonitorupdate** usually updates the mirroring status by inserting a new row into the status table for every mirrored database on the server instance; for more information, see "Database Mirroring Status Table," later in this topic.</span></span> <span data-ttu-id="e3184-182">Эта процедура также оценивает метрики производительности в новых строках и отсекает строки, превышающие текущий срок хранения (по умолчанию — 7 дней).</span><span class="sxs-lookup"><span data-stu-id="e3184-182">This procedure also evaluates the performance metrics in the new rows and truncates rows older than the current retention period (the default is 7 days).</span></span> <span data-ttu-id="e3184-183">Дополнительные сведения см. в статье [sp_dbmmonitorupdate (Transact-SQL)](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorupdate-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="e3184-183">For more information, see [sp_dbmmonitorupdate &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorupdate-transact-sql).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="e3184-184">Если монитор зеркального отображения базы данных не используется в данный момент членом предопределенной роли сервера **sysadmin** , таблица состояния автоматически обновляется только в том случае, если существует **Задание монитора зеркального отображения баз данных** и запущен агент [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="e3184-184">Unless Database Mirroring Monitor is currently being used by a member of the **sysadmin** fixed server role, the status table is automatically updated only if the **Database Mirroring Monitor Job** exists and [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent is running.</span></span>  
  
#### <a name="database-mirroring-monitor-job"></a><span data-ttu-id="e3184-185">Задание монитора зеркального отображения баз данных</span><span class="sxs-lookup"><span data-stu-id="e3184-185">Database Mirroring Monitor Job</span></span>  
 <span data-ttu-id="e3184-186">Задание, контролирующее зеркальное отображение базы данных, **Задание монитора зеркального отображения баз данных**, работает независимо от монитора зеркального отображения баз данных.</span><span class="sxs-lookup"><span data-stu-id="e3184-186">The database mirroring monitoring job, **Database Mirroring Monitor Job**, operates independently of Database Mirroring Monitor.</span></span> <span data-ttu-id="e3184-187">**Задание монитора зеркального отображения баз данных** создается автоматически только в том случае, если для запуска сеанса зеркального отображения используется среда [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="e3184-187">**Database Mirroring Monitor Job** is created automatically only if [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] is used to start a mirroring session.</span></span> <span data-ttu-id="e3184-188">Если для запуска зеркального отображения всегда используются инструкции ALTER DATABASE *имя_базы_данных* SET PARTNER, это задание существует, только если администратор выполнит хранимую процедуру **sp_dbmmonitoraddmonitoring** .</span><span class="sxs-lookup"><span data-stu-id="e3184-188">If ALTER DATABASE *database_name* SET PARTNER commands are always used to start mirroring, the job exists only if the system administrator runs the **sp_dbmmonitoraddmonitoring** stored procedure.</span></span>  
  
 <span data-ttu-id="e3184-189">После создания **Задания монитора зеркального отображения баз данных** при условии, что агент [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] запущен, это задание вызывается по умолчанию раз в минуту.</span><span class="sxs-lookup"><span data-stu-id="e3184-189">After **Database Mirroring Monitor Job** is created, assuming that [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent is running, the job is called once a minute, by default.</span></span> <span data-ttu-id="e3184-190">Затем оно вызывает системную хранимую процедуру **sp_dbmmonitorupdate** .</span><span class="sxs-lookup"><span data-stu-id="e3184-190">The job then calls the **sp_dbmmonitorupdate** system stored procedure.</span></span>  
  
 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="e3184-191">По умолчанию агент раз в минуту вызывает **Задание монитора зеркального отображения баз данных** , после чего это задание вызывает процедуру **sp_dbmmonitorupdate** для обновления таблицы состояния.</span><span class="sxs-lookup"><span data-stu-id="e3184-191">Agent calls **Database Mirroring Monitor Job** once a minute, by default, and the job calls **sp_dbmmonitorupdate** to update the status table.</span></span> <span data-ttu-id="e3184-192">Системные администраторы могут изменить периодичность с помощью системной хранимой процедуры **sp_dbmmonitorchangemonitoring** и просмотреть текущий период обновления с помощью системной хранимой процедуры **sp_dbmmonitorchangemonitoring** .</span><span class="sxs-lookup"><span data-stu-id="e3184-192">System administrators can change the update period by using the **sp_dbmmonitorchangemonitoring** system stored procedure, and they can view the current update period by using the **sp_dbmmonitorchangemonitoring** system stored procedure.</span></span> <span data-ttu-id="e3184-193">Дополнительные сведения см. в статье [sp_dbmmonitoraddmonitoring (Transact-SQL)](/sql/relational-databases/system-stored-procedures/sp-dbmmonitoraddmonitoring-transact-sql) и [sp_dbmmonitorchangemonitoring (Transact-SQL)](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorchangemonitoring-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="e3184-193">For more information, see [sp_dbmmonitoraddmonitoring &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-dbmmonitoraddmonitoring-transact-sql) and [sp_dbmmonitorchangemonitoring &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorchangemonitoring-transact-sql).</span></span>  
  
#### <a name="monitoring-database-mirroring-status-by-system-administrators"></a><span data-ttu-id="e3184-194">Контроль над состоянием зеркального отображения базы данных (системными администраторами)</span><span class="sxs-lookup"><span data-stu-id="e3184-194">Monitoring Database Mirroring Status (by System Administrators)</span></span>  
 <span data-ttu-id="e3184-195">Члены предопределенной роли сервера **sysadmin** могут просматривать и обновлять таблицу состояния.</span><span class="sxs-lookup"><span data-stu-id="e3184-195">Members of the **sysadmin** fixed server role can view and update the status table</span></span>  
  
-   <span data-ttu-id="e3184-196">Использование монитора зеркального отображения баз данных.</span><span class="sxs-lookup"><span data-stu-id="e3184-196">Using Database Mirroring Monitor</span></span>  
  
     <span data-ttu-id="e3184-197">С помощью монитора зеркального отображения баз данных системный администратор может вручную обновлять страницу **Состояние** , дерево навигации или страницу **Журнал** .</span><span class="sxs-lookup"><span data-stu-id="e3184-197">When using Database Mirroring Monitor, a system administrator can manually refresh the **Status** page, navigation tree, or **History** page.</span></span> <span data-ttu-id="e3184-198">При этом также обновляется таблица состояния, если она еще не была обновлена в течение предыдущего 15-секундного периода.</span><span class="sxs-lookup"><span data-stu-id="e3184-198">This also updates the status table, unless it has already been updated within the previous 15 seconds.</span></span>  
  
     <span data-ttu-id="e3184-199">Чтобы просмотреть журнал состояния зеркального отображения на данном экземпляре сервера, системный администратор может также нажать кнопку **Журнал** для экземпляра сервера (на странице **Состояние** ).</span><span class="sxs-lookup"><span data-stu-id="e3184-199">To view the history of mirroring status on a given server instance, the system administrator can also click the **History** button for a server instance (on the **Status** page).</span></span> <span data-ttu-id="e3184-200">Журнал отобразится в диалоговом окне **Журнал зеркального отображения базы данных** .</span><span class="sxs-lookup"><span data-stu-id="e3184-200">The history is displayed in the **Database Mirroring History** dialog box.</span></span> <span data-ttu-id="e3184-201">В этом окне системный администратор может просматривать несколько или все строки таблицы состояния экземпляра сервера.</span><span class="sxs-lookup"><span data-stu-id="e3184-201">There, the system administrator can view some or all of the rows in the status table of the server instance.</span></span>  
  
     <span data-ttu-id="e3184-202">Дополнительные сведения о метриках страницы **Состояние** см. в подразделе «Метрики производительности, отображаемые монитором зеркального отображения баз данных» далее в этом разделе.</span><span class="sxs-lookup"><span data-stu-id="e3184-202">For information about the **Status** page metrics, see Performance Metrics Displayed by the "Database Mirroring Monitor," later in this topic.</span></span>  
  
-   <span data-ttu-id="e3184-203">Использование процедуры **sp_dbmmonitorresults**.</span><span class="sxs-lookup"><span data-stu-id="e3184-203">Using **sp_dbmmonitorresults**</span></span>  
  
     <span data-ttu-id="e3184-204">Системные администраторы могут использовать системную хранимую процедуру **sp_dbmmonitorresults** для просмотра и, при необходимости, для обновления таблицы состояния, если она не была обновлена в предыдущие 15 секунд.</span><span class="sxs-lookup"><span data-stu-id="e3184-204">System administrators can use the **sp_dbmmonitorresults** system stored procedure to view and, optionally, to update the status table, if it has not been updated within the previous 15 seconds.</span></span> <span data-ttu-id="e3184-205">Эта процедура в свою очередь вызывает процедуру **sp_dbmmonitorupdate** и возвращает одну или более строк журнала, в зависимости от количества, запрашиваемого при вызове процедуры.</span><span class="sxs-lookup"><span data-stu-id="e3184-205">This procedure calls the **sp_dbmmonitorupdate** procedure and returns one or more history rows, depending on the amount requested in the procedure call.</span></span> <span data-ttu-id="e3184-206">Дополнительные сведения о состоянии в результирующем наборе см. в статье [sp_dbmmonitorresults (Transact-SQL)](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorresults-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="e3184-206">For information about the status in its results set, see [sp_dbmmonitorresults &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorresults-transact-sql).</span></span>  
  
#### <a name="monitoring-database-mirroring-status-by-dbm_monitor-members"></a><span data-ttu-id="e3184-207">Контроль над состоянием зеркального отображения базы данных (членами роли dbm_monitor)</span><span class="sxs-lookup"><span data-stu-id="e3184-207">Monitoring Database Mirroring Status (by dbm_monitor Members)</span></span>  
 <span data-ttu-id="e3184-208">Как уже упоминалось, при первом выполнении процедуры **sp_dbmmonitorupdate** в базе данных **msdb** создается предопределенная роль **dbm_monitor** .</span><span class="sxs-lookup"><span data-stu-id="e3184-208">As mentioned, the first time **sp_dbmmonitorupdate** runs, it creates the **dbm_monitor** fixed database role in the **msdb** database.</span></span> <span data-ttu-id="e3184-209">Члены предопределенной роли базы данных **dbm_monitor** могут просматривать текущее состояние зеркального отображения при помощи монитора зеркального отображения баз данных или хранимой процедуры **sp_dbmmonitorresults** .</span><span class="sxs-lookup"><span data-stu-id="e3184-209">Members of the **dbm_monitor** fixed database role can view the existing mirroring status by using either Database Mirroring Monitor or the **sp_dbmmonitorresults** stored procedure.</span></span> <span data-ttu-id="e3184-210">Но эти пользователи не могут обновлять таблицу состояния.</span><span class="sxs-lookup"><span data-stu-id="e3184-210">But these users cannot update the status table.</span></span> <span data-ttu-id="e3184-211">Чтобы узнать возраст отображаемого состояния, пользователь может просмотреть время в метках **Журнал основного сервера ( ***\<time>*** )** и **Журнал зеркальной базы данных ( ***\<time>*** )** на странице **состояние** .</span><span class="sxs-lookup"><span data-stu-id="e3184-211">To learn the age of the displayed status a user can look at the times in the **Principal log (***\<time>***)** and **Mirror log (***\<time>***)** labels on the **Status** page.</span></span>  
  
 <span data-ttu-id="e3184-212">Члены предопределенной роли базы данных **dbm_monitor** для обновления таблицы состояния через определенные промежутки времени полагаются на **Задание монитора зеркального отображения баз данных** .</span><span class="sxs-lookup"><span data-stu-id="e3184-212">Members of the **dbm_monitor** fixed database role depend on the **Database Mirroring Monitor Job** to update the status table at regular intervals.</span></span> <span data-ttu-id="e3184-213">Если это задание не существует или агент [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] остановлен, состояние постепенно устаревает и может более не отражать реальную конфигурацию сеанса зеркального отображения.</span><span class="sxs-lookup"><span data-stu-id="e3184-213">If the job does not exist or [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent is stopped, the status becomes increasingly stale and may no longer reflect the configuration of the mirroring session.</span></span> <span data-ttu-id="e3184-214">Например, после отработки отказа может оказаться, что партнеры используют одинаковую роль основного или зеркального сервера или текущий основной сервер может отображаться как зеркальный, в то время как текущий зеркальный сервер отображается как основной.</span><span class="sxs-lookup"><span data-stu-id="e3184-214">For example, after a failover, the partners might appear to share the same role-principal or mirror, or the current principal server might be shown as the mirror, while the current mirror server is shown as the principal.</span></span>  
  
#### <a name="dropping-the-database-mirroring-monitor-job"></a><span data-ttu-id="e3184-215">Удаление задания монитора зеркального отображения баз данных</span><span class="sxs-lookup"><span data-stu-id="e3184-215">Dropping the Database Mirroring Monitor Job</span></span>  
 <span data-ttu-id="e3184-216">Задание, контролирующее зеркальное отображение баз данных ( **Задание монитора зеркального отображения баз данных**) работает до своего удаления.</span><span class="sxs-lookup"><span data-stu-id="e3184-216">The database mirroring monitor job, **Database Mirroring Monitor Job**, remains until it is dropped.</span></span> <span data-ttu-id="e3184-217">Контролирующее задание должно управляться системным администратором.</span><span class="sxs-lookup"><span data-stu-id="e3184-217">The monitoring job must be managed by the system administrator.</span></span> <span data-ttu-id="e3184-218">Чтобы удалить **Задание монитора зеркального отображения баз данных**, используйте процедуру **sp_dbmmonitordropmonitoring**.</span><span class="sxs-lookup"><span data-stu-id="e3184-218">To drop **Database Mirroring Monitor Job**, use **sp_dbmmonitordropmonitoring**.</span></span> <span data-ttu-id="e3184-219">Дополнительные сведения см. в статье [sp_dbmmonitordropmonitoring (Transact-SQL)](/sql/relational-databases/system-stored-procedures/sp-dbmmonitordropmonitoring-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="e3184-219">For more information, see [sp_dbmmonitordropmonitoring &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-dbmmonitordropmonitoring-transact-sql).</span></span>  
  
###  <a name="status-displayed-by-the-database-mirroring-monitor"></a><a name="perf_metrics_of_dbm_monitor"></a> <span data-ttu-id="e3184-220">Состояние, отображаемое монитором зеркального отображения баз данных</span><span class="sxs-lookup"><span data-stu-id="e3184-220">Status Displayed by the Database Mirroring Monitor</span></span>  
 <span data-ttu-id="e3184-221">На странице **Состояние** монитора зеркального отображения баз данных описываются участники, а также состояние сеанса зеркального отображения.</span><span class="sxs-lookup"><span data-stu-id="e3184-221">The **Status** page of the Database Mirroring Monitor describes the partners, and also the state of the mirroring session.</span></span> <span data-ttu-id="e3184-222">Состояние включает метрики производительности, такие как состояние журнала транзакций, и другие сведения, позволяющие оценить время, необходимое для завершения отработки отказа, а также возможные потери данных, если сеанс не синхронизован.</span><span class="sxs-lookup"><span data-stu-id="e3184-222">The status includes performance metrics such as the state of the transaction log and other information that is intended to help currently estimate the time required to complete a failover and the potential of data loss, if the session is not synchronized.</span></span> <span data-ttu-id="e3184-223">Кроме того, на странице **Состояние** отображается состояние и сведения о сеансе зеркального отображения в общем.</span><span class="sxs-lookup"><span data-stu-id="e3184-223">In addition, the **Status** page displays status and information about the mirroring session in general.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="e3184-224">Основные сведения о мониторе зеркального отображения баз данных и странице **Состояние** см. в подразделе " [Средства для контроля над состоянием зеркального отображения базы данных](#tools_for_monitoring_dbm_status)" выше в этом разделе.</span><span class="sxs-lookup"><span data-stu-id="e3184-224">For an introduction to the Database Mirroring Monitor and **Status** page, see [Tools for Monitoring Database Mirroring Status](#tools_for_monitoring_dbm_status), earlier in this topic.</span></span>  
  
 <span data-ttu-id="e3184-225">Краткая информация о каждом из них приведена в следующих разделах.</span><span class="sxs-lookup"><span data-stu-id="e3184-225">The information provided for each of these is summarized in the following sections.</span></span>  
  
#### <a name="partners"></a><span data-ttu-id="e3184-226">Участники</span><span class="sxs-lookup"><span data-stu-id="e3184-226">Partners</span></span>  
 <span data-ttu-id="e3184-227">На странице **Состояние** отображаются следующие сведения о каждом из участников.</span><span class="sxs-lookup"><span data-stu-id="e3184-227">The **Status** page displays the following information for each of the partners:</span></span>  
  
-   <span data-ttu-id="e3184-228">Экземпляр сервера</span><span class="sxs-lookup"><span data-stu-id="e3184-228">Server instance</span></span>  
  
     <span data-ttu-id="e3184-229">Имя экземпляра сервера, состояние которого отображается в строке **Состояние** .</span><span class="sxs-lookup"><span data-stu-id="e3184-229">Name of the server instance whose status is displayed in the **Status** row.</span></span>  
  
-   <span data-ttu-id="e3184-230">Текущая роль.</span><span class="sxs-lookup"><span data-stu-id="e3184-230">Current role</span></span>  
  
     <span data-ttu-id="e3184-231">Текущая роль этого экземпляра сервера.</span><span class="sxs-lookup"><span data-stu-id="e3184-231">Current role of the server instance.</span></span> <span data-ttu-id="e3184-232">Возможные состояния:</span><span class="sxs-lookup"><span data-stu-id="e3184-232">The possible states are:</span></span>  
  
    -   <span data-ttu-id="e3184-233">Основной</span><span class="sxs-lookup"><span data-stu-id="e3184-233">Principal</span></span>  
  
    -   <span data-ttu-id="e3184-234">Зеркальное отображение</span><span class="sxs-lookup"><span data-stu-id="e3184-234">Mirror</span></span>  
  
-   <span data-ttu-id="e3184-235">Состояние зеркального отображения.</span><span class="sxs-lookup"><span data-stu-id="e3184-235">Mirroring state</span></span>  
  
     <span data-ttu-id="e3184-236">Возможные состояния:</span><span class="sxs-lookup"><span data-stu-id="e3184-236">The possible states are:</span></span>  
  
    -   <span data-ttu-id="e3184-237">Неизвестно</span><span class="sxs-lookup"><span data-stu-id="e3184-237">Unknown</span></span>  
  
    -   <span data-ttu-id="e3184-238">Синхронизация</span><span class="sxs-lookup"><span data-stu-id="e3184-238">Synchronizing</span></span>  
  
    -   <span data-ttu-id="e3184-239">синхронизировано;</span><span class="sxs-lookup"><span data-stu-id="e3184-239">Synchronized</span></span>  
  
    -   <span data-ttu-id="e3184-240">Приостановлена</span><span class="sxs-lookup"><span data-stu-id="e3184-240">Suspended</span></span>  
  
    -   <span data-ttu-id="e3184-241">Отключено</span><span class="sxs-lookup"><span data-stu-id="e3184-241">Disconnected</span></span>  
  
-   <span data-ttu-id="e3184-242">Соединение следящего сервера.</span><span class="sxs-lookup"><span data-stu-id="e3184-242">Witness connection</span></span>  
  
     <span data-ttu-id="e3184-243">Состояние соединение следящего сервера.</span><span class="sxs-lookup"><span data-stu-id="e3184-243">Connection status of the witness.</span></span> <span data-ttu-id="e3184-244">Возможные состояния:</span><span class="sxs-lookup"><span data-stu-id="e3184-244">The possible states are:</span></span>  
  
    -   <span data-ttu-id="e3184-245">Неизвестно</span><span class="sxs-lookup"><span data-stu-id="e3184-245">Unknown</span></span>  
  
    -   <span data-ttu-id="e3184-246">Подключен</span><span class="sxs-lookup"><span data-stu-id="e3184-246">Connected</span></span>  
  
    -   <span data-ttu-id="e3184-247">отключен.</span><span class="sxs-lookup"><span data-stu-id="e3184-247">Disconnected.</span></span>  
  
#### <a name="log-on-the-principal-server"></a><span data-ttu-id="e3184-248">Журнал основного сервера</span><span class="sxs-lookup"><span data-stu-id="e3184-248">Log on the Principal Server</span></span>  
 <span data-ttu-id="e3184-249">На странице **Состояние** отображаются следующие сведения о состоянии журнала на основном сервере на указанный момент времени.</span><span class="sxs-lookup"><span data-stu-id="e3184-249">The **Status** page displays the following information about the status of the log on the principal server as of the indicated time:</span></span>  
  
-   <span data-ttu-id="e3184-250">Неотправленный журнал</span><span class="sxs-lookup"><span data-stu-id="e3184-250">Unsent log</span></span>  
  
     <span data-ttu-id="e3184-251">Объем данных журнала в очереди на отправку в килобайтах (КБ).</span><span class="sxs-lookup"><span data-stu-id="e3184-251">The amount of log waiting in the send queue in kilobytes (KB).</span></span>  
  
-   <span data-ttu-id="e3184-252">Самая старая неотправленная транзакция</span><span class="sxs-lookup"><span data-stu-id="e3184-252">Oldest unsent transaction</span></span>  
  
     <span data-ttu-id="e3184-253">Возраст самой старой неотправленной транзакции в очереди на отправку.</span><span class="sxs-lookup"><span data-stu-id="e3184-253">Age of the oldest unsent transaction in the send queue.</span></span> <span data-ttu-id="e3184-254">Этот срок указывает, сколько минут транзакции не отправлялись на экземпляр зеркального сервера.</span><span class="sxs-lookup"><span data-stu-id="e3184-254">The age of this transaction indicates how many minutes of transactions have not yet been sent to the mirror server instance.</span></span> <span data-ttu-id="e3184-255">Это значение позволяет оценить потенциальные потери данных по времени.</span><span class="sxs-lookup"><span data-stu-id="e3184-255">This value helps measure the potential for data loss in terms of time.</span></span>  
  
-   <span data-ttu-id="e3184-256">Время на отправку журнала (предполагаемое).</span><span class="sxs-lookup"><span data-stu-id="e3184-256">Time to send log (estimated)</span></span>  
  
     <span data-ttu-id="e3184-257">Предполагаемое количество минут, необходимых экземпляру основного сервера для отправки журнала, находящегося в очереди на отправку на экземпляр зеркального сервера, на основании текущей скорости отправки.</span><span class="sxs-lookup"><span data-stu-id="e3184-257">Estimated number of minutes the principal server instance requires to send the log that is currently in the send queue to the mirror server instance based on the current send rate.</span></span> <span data-ttu-id="e3184-258">Фактическое время отправки журнала будет зависеть от скорости входящих транзакций, которая может сильно различаться.</span><span class="sxs-lookup"><span data-stu-id="e3184-258">The actual time to send the log will be affected by the rate of incoming transactions, which can vary significantly.</span></span> <span data-ttu-id="e3184-259">Однако значение **Время на отправку журнала (предполагаемое)** может быть полезно для приблизительной оценки времени, необходимого для отработки отказа вручную.</span><span class="sxs-lookup"><span data-stu-id="e3184-259">However, the **Time to send log (estimated)** value can be useful for roughly estimating the time required for a manual failover.</span></span>  
  
-   <span data-ttu-id="e3184-260">Текущая скорость отправки</span><span class="sxs-lookup"><span data-stu-id="e3184-260">Current send rate</span></span>  
  
     <span data-ttu-id="e3184-261">Скорость, с которой транзакции отправляются на экземпляр зеркального сервера, в КБ в секунду.</span><span class="sxs-lookup"><span data-stu-id="e3184-261">Rate at which transactions are being sent to the mirror server instance in KB per second.</span></span>  
  
-   <span data-ttu-id="e3184-262">Текущая скорость новых транзакций.</span><span class="sxs-lookup"><span data-stu-id="e3184-262">Current rate of new transactions</span></span>  
  
     <span data-ttu-id="e3184-263">Скорость, с которой входящие транзакции попадают в журнал основного сервера, в КБ в секунду.</span><span class="sxs-lookup"><span data-stu-id="e3184-263">Rate at which incoming transactions are being entered into the principal's log in KB per second.</span></span> <span data-ttu-id="e3184-264">Чтобы определить отставание зеркального отображения, задержку или запаздывание, сравните это значение со значением **Предполагаемое время на отправку журнала** .</span><span class="sxs-lookup"><span data-stu-id="e3184-264">To determine whether mirroring is falling behind, staying up, or catching up, compare this value to the **Estimated time to send log** value.</span></span>  
  
#### <a name="log-on-the-mirror-server"></a><span data-ttu-id="e3184-265">Журнал зеркального сервера</span><span class="sxs-lookup"><span data-stu-id="e3184-265">Log on the Mirror Server</span></span>  
 <span data-ttu-id="e3184-266">На странице **Состояние** отображаются следующие сведения о состоянии журнала на зеркальном сервере на указанный момент времени.</span><span class="sxs-lookup"><span data-stu-id="e3184-266">The **Status** page displays the following information about the status of the log on the mirror server as of the indicated time:</span></span>  
  
-   <span data-ttu-id="e3184-267">Невосстановленный журнал</span><span class="sxs-lookup"><span data-stu-id="e3184-267">Unrestored log</span></span>  
  
     <span data-ttu-id="e3184-268">Объем данных журнала в очереди повторов в килобайтах (КБ).</span><span class="sxs-lookup"><span data-stu-id="e3184-268">The amount of log waiting in the redo queue in KB.</span></span>  
  
-   <span data-ttu-id="e3184-269">Время на восстановление журнала (предполагаемое).</span><span class="sxs-lookup"><span data-stu-id="e3184-269">Time to restore log (estimated)</span></span>  
  
     <span data-ttu-id="e3184-270">Приблизительное количество минут, необходимых для применения журнала, находящегося в очереди повторов, к зеркальной базе данных.</span><span class="sxs-lookup"><span data-stu-id="e3184-270">Approximate number of minutes required for the log currently in the redo queue to be applied to the mirror database.</span></span>  
  
-   <span data-ttu-id="e3184-271">Текущая скорость восстановления</span><span class="sxs-lookup"><span data-stu-id="e3184-271">Current restore rate</span></span>  
  
     <span data-ttu-id="e3184-272">Скорость, с которой транзакции восстанавливаются в зеркальной базе данных (в КБ в секунду).</span><span class="sxs-lookup"><span data-stu-id="e3184-272">Rate at which transactions are being restored into the mirror database (in KB per second).</span></span>  
  
#### <a name="mirroring-session"></a><span data-ttu-id="e3184-273">Сеанс зеркального отображения</span><span class="sxs-lookup"><span data-stu-id="e3184-273">Mirroring Session</span></span>  
 <span data-ttu-id="e3184-274">Кроме того, на странице **Состояние** отображаются следующие сведения о сеансе зеркального отображения.</span><span class="sxs-lookup"><span data-stu-id="e3184-274">In addition, the **Status** page displays the following information about the mirroring session:</span></span>  
  
-   <span data-ttu-id="e3184-275">Затраты на фиксацию изменений на зеркальном сервере.</span><span class="sxs-lookup"><span data-stu-id="e3184-275">Mirroring commit overhead</span></span>  
  
     <span data-ttu-id="e3184-276">Среднее значение задержки на транзакцию в миллисекундах (имеет смысл только в режиме высокой безопасности).</span><span class="sxs-lookup"><span data-stu-id="e3184-276">Average delay per transaction in milliseconds (relevant only in high-safety mode).</span></span> <span data-ttu-id="e3184-277">Задержка — это объем дополнительной нагрузки во время ожидания экземпляром основного сервера экземпляра зеркального сервера для добавления записи журнала транзакции в очередь повтора.</span><span class="sxs-lookup"><span data-stu-id="e3184-277">This delay is the amount of overhead incurred while the principal server instance waits for the mirror server instance to write the transaction's log record into the redo queue.</span></span>  
  
-   <span data-ttu-id="e3184-278">Время, необходимое для отправки и восстановления всего текущего журнала (предполагаемое).</span><span class="sxs-lookup"><span data-stu-id="e3184-278">Time to send and restore all current log (estimated)</span></span>  
  
     <span data-ttu-id="e3184-279">Предполагаемое время, необходимое для отправки всего неотправленного журнала, который был зафиксирован на основном сервере и для восстановления всего журнала, находящегося в очереди повторов.</span><span class="sxs-lookup"><span data-stu-id="e3184-279">Estimated time needed to send all of the unsent log that has been committed at the principal and to restore all of the log currently in the redo queue.</span></span> <span data-ttu-id="e3184-280">Это предполагаемое значение может быть меньше суммы значений полей **Время на отправку журнала (предполагаемое)** и **Время на восстановление журнала (предполагаемое)** , так как отправка и восстановление могут выполняться параллельно.</span><span class="sxs-lookup"><span data-stu-id="e3184-280">This estimate may be less than the sum of the values of the **Time to send log (estimated)** and **Time to restore log (estimated)** fields, because sending and restoring can operate in parallel.</span></span>  
  
-   <span data-ttu-id="e3184-281">Адрес следящего сервера.</span><span class="sxs-lookup"><span data-stu-id="e3184-281">Witness address</span></span>  
  
     <span data-ttu-id="e3184-282">Сетевой адрес экземпляра следящего сервера.</span><span class="sxs-lookup"><span data-stu-id="e3184-282">Network address of the witness server instance.</span></span> <span data-ttu-id="e3184-283">Сведения о формате этого адреса см. в разделе [Указание сетевого адреса сервера (зеркальное отображение базы данных)](specify-a-server-network-address-database-mirroring.md).</span><span class="sxs-lookup"><span data-stu-id="e3184-283">For information about the format of this address, see [Specify a Server Network Address &#40;Database Mirroring&#41;](specify-a-server-network-address-database-mirroring.md).</span></span>  
  
-   <span data-ttu-id="e3184-284">Режим работы</span><span class="sxs-lookup"><span data-stu-id="e3184-284">Operating mode</span></span>  
  
     <span data-ttu-id="e3184-285">Режим работы сеанса зеркального отображения базы данных.</span><span class="sxs-lookup"><span data-stu-id="e3184-285">The operating mode of the database mirroring session:</span></span>  
  
    -   <span data-ttu-id="e3184-286">Высокая производительность (асинхронный)</span><span class="sxs-lookup"><span data-stu-id="e3184-286">High performance (asynchronous)</span></span>  
  
    -   <span data-ttu-id="e3184-287">Высокий уровень безопасности без автоматического перехода на другой ресурс (синхронного)</span><span class="sxs-lookup"><span data-stu-id="e3184-287">High safety without automatic failover (synchronous)</span></span>  
  
    -   <span data-ttu-id="e3184-288">Высокий уровень безопасности с автоматическим переходом на другой ресурс (синхронным)</span><span class="sxs-lookup"><span data-stu-id="e3184-288">High safety with automatic failover (synchronous)</span></span>  
  
##  <a name="additional-sources-of-information-about-a-mirrored-database"></a><a name="AdditionalSources"></a> <span data-ttu-id="e3184-289">Дополнительные источники сведений о зеркальной базе данных</span><span class="sxs-lookup"><span data-stu-id="e3184-289">Additional Sources of Information About a Mirrored Database</span></span>  
 <span data-ttu-id="e3184-290">Помимо использования монитора зеркального отображения баз данных и хранимых процедур dbmmonitor для наблюдения за зеркальной базой данных и установки предупреждений в переменных мониторинга производительности, [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] предоставляет представления каталога, счетчики производительности и уведомления о событиях для зеркального отображения базы данных.</span><span class="sxs-lookup"><span data-stu-id="e3184-290">In addition to using the Database Mirroring Monitor and dbmmonitor stored procedures to monitor a mirrored database and set up alerts on monitored performance variables, [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] provides catalog views, performance counters, and event notifications for database mirroring.</span></span>  
  
 <span data-ttu-id="e3184-291">**В этом разделе.**</span><span class="sxs-lookup"><span data-stu-id="e3184-291">**In This Section:**</span></span>  
  
-   [<span data-ttu-id="e3184-292">Метаданные зеркального отображения базы данных</span><span class="sxs-lookup"><span data-stu-id="e3184-292">Database Mirroring Metadata</span></span>](#DbmMetadata)  
  
-   [<span data-ttu-id="e3184-293">Счетчики производительности зеркального отображения базы данных</span><span class="sxs-lookup"><span data-stu-id="e3184-293">Database Mirroring Performance Counters</span></span>](#DbmPerfCounters)  
  
-   [<span data-ttu-id="e3184-294">Уведомления о событиях зеркального отображения базы данных</span><span class="sxs-lookup"><span data-stu-id="e3184-294">Database Mirroring Event Notifications</span></span>](#DbmEventNotif)  
  
###  <a name="database-mirroring-metadata"></a><a name="DbmMetadata"></a> <span data-ttu-id="e3184-295">Метаданные зеркального отображения базы данных</span><span class="sxs-lookup"><span data-stu-id="e3184-295">Database Mirroring Metadata</span></span>  
 <span data-ttu-id="e3184-296">Каждый сеанс зеркального отображения базы данных описывается в метаданных, доступных через следующие динамические административные представления или представления каталога.</span><span class="sxs-lookup"><span data-stu-id="e3184-296">Each database mirroring session is described in metadata that is exposed through the following catalog or dynamic management views:</span></span>  
  
-   <span data-ttu-id="e3184-297">**sys.database_mirroring**</span><span class="sxs-lookup"><span data-stu-id="e3184-297">**sys.database_mirroring**</span></span>  
  
     <span data-ttu-id="e3184-298">Это представление отображает метаданные зеркального отображения базы данных для каждой зеркально отображаемой базы данных на экземпляре сервера.</span><span class="sxs-lookup"><span data-stu-id="e3184-298">This view displays the database mirroring metadata for each mirrored database in a server instance.</span></span> <span data-ttu-id="e3184-299">Дополнительные сведения см. в разделе [sys.database_mirroring (Transact-SQL)](/sql/relational-databases/system-catalog-views/sys-database-mirroring-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="e3184-299">For more information, see [sys.database_mirroring &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-database-mirroring-transact-sql).</span></span>  
  
-   <span data-ttu-id="e3184-300">**sys.database_mirroring_endpoints**</span><span class="sxs-lookup"><span data-stu-id="e3184-300">**sys.database_mirroring_endpoints**</span></span>  
  
     <span data-ttu-id="e3184-301">Представление каталога **sys.database_mirroring_endpoints** отображает сведения о конечной точке зеркального отображения базы данных на экземпляре сервера.</span><span class="sxs-lookup"><span data-stu-id="e3184-301">The **sys.database_mirroring_endpoints** catalog view displays information about the database mirroring endpoint of the server instance.</span></span> <span data-ttu-id="e3184-302">Дополнительные сведения см. в статье [sys.database_mirroring_endpoints (Transact-SQL)](/sql/relational-databases/system-catalog-views/sys-database-mirroring-endpoints-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="e3184-302">For more information, see [sys.database_mirroring_endpoints &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-database-mirroring-endpoints-transact-sql).</span></span>  
  
-   <span data-ttu-id="e3184-303">**sys.database_mirroring_witnesses**</span><span class="sxs-lookup"><span data-stu-id="e3184-303">**sys.database_mirroring_witnesses**</span></span>  
  
     <span data-ttu-id="e3184-304">Это представление каталога отображает метаданные зеркального отображения базы данных для каждого сеанса, в котором экземпляр сервера является следящим сервером.</span><span class="sxs-lookup"><span data-stu-id="e3184-304">This catalog view displays the database mirroring metadata for each session in which a server instance is the witness.</span></span> <span data-ttu-id="e3184-305">Дополнительные сведения см. в статье [sys.database_mirroring_witnesses (Transact-SQL)](/sql/relational-databases/system-catalog-views/database-mirroring-witness-catalog-views-sys-database-mirroring-witnesses).</span><span class="sxs-lookup"><span data-stu-id="e3184-305">For more information, see [sys.database_mirroring_witnesses &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/database-mirroring-witness-catalog-views-sys-database-mirroring-witnesses).</span></span>  
  
-   <span data-ttu-id="e3184-306">**sys.dm_db_mirroring_connections**</span><span class="sxs-lookup"><span data-stu-id="e3184-306">**sys.dm_db_mirroring_connections**</span></span>  
  
     <span data-ttu-id="e3184-307">Это динамическое административное представление возвращает по одной строке для каждого сетевого подключения зеркального отображения базы данных.</span><span class="sxs-lookup"><span data-stu-id="e3184-307">This dynamic management view returns a row for each database mirroring network connection.</span></span>  
  
     <span data-ttu-id="e3184-308">Дополнительные сведения см. в статье [sys.dm_db_mirroring_connections (Transact-SQL)](/sql/relational-databases/system-dynamic-management-views/database-mirroring-sys-dm-db-mirroring-connections).</span><span class="sxs-lookup"><span data-stu-id="e3184-308">For more information, see [sys.dm_db_mirroring_connections &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/database-mirroring-sys-dm-db-mirroring-connections).</span></span>  
  
###  <a name="database-mirroring-performance-counters"></a><a name="DbmPerfCounters"></a> <span data-ttu-id="e3184-309">Счетчики производительности зеркального отображения базы данных</span><span class="sxs-lookup"><span data-stu-id="e3184-309">Database Mirroring Performance Counters</span></span>  
 <span data-ttu-id="e3184-310">Счетчики производительности позволяют отслеживать производительность при зеркальном отображении баз данных.</span><span class="sxs-lookup"><span data-stu-id="e3184-310">Performance counters let you monitor database mirroring performance.</span></span> <span data-ttu-id="e3184-311">Например, можно просмотреть счетчик **Задержка транзакции** , чтобы узнать, влияет ли зеркальное отображение базы данных на производительность основного сервера, или просмотреть счетчики **Очередь на повтор** и **Очередь отправки журнала** , чтобы узнать, насколько быстро зеркальная база данных воспроизводит изменения основной базы данных.</span><span class="sxs-lookup"><span data-stu-id="e3184-311">For example, you can examine the **Transaction Delay** counter to see if database mirroring is impacting performance on the principal server, you can examine the **Redo Queue** and **Log Send Queue** counters to see how well the mirror database is keeping up with the principal database.</span></span> <span data-ttu-id="e3184-312">Можно просмотреть счетчик **Отправлено байтов журнала/с** , чтобы отследить объем данных журнала, пересылаемый за секунду.</span><span class="sxs-lookup"><span data-stu-id="e3184-312">You can examine the **Log Bytes Sent/sec** counter to monitor the amount of log sent per second.</span></span>  
  
 <span data-ttu-id="e3184-313">В системном мониторе любого из участников зеркального отображения базы данных счетчики производительности находятся в объекте производительности зеркального отображения базы данных (**SQLServer:Database Mirroring**).</span><span class="sxs-lookup"><span data-stu-id="e3184-313">In Performance Monitor on either partner, performance counters are available in the database mirroring performance object (**SQLServer:Database Mirroring**).</span></span> <span data-ttu-id="e3184-314">Дополнительные сведения см. в статье [SQL Server, Database Mirroring Object](../../relational-databases/performance-monitor/sql-server-database-mirroring-object.md).</span><span class="sxs-lookup"><span data-stu-id="e3184-314">For more information, see [SQL Server, Database Mirroring Object](../../relational-databases/performance-monitor/sql-server-database-mirroring-object.md).</span></span>  
  
 <span data-ttu-id="e3184-315">**Запуск системного монитора**</span><span class="sxs-lookup"><span data-stu-id="e3184-315">**To start the performance monitor**</span></span>  
  
-   [<span data-ttu-id="e3184-316">Запуск системного монитора (Windows)</span><span class="sxs-lookup"><span data-stu-id="e3184-316">Start System Monitor &#40;Windows&#41;</span></span>](../../relational-databases/performance/start-system-monitor-windows.md)  
  
###  <a name="database-mirroring-event-notifications"></a><a name="DbmEventNotif"></a> <span data-ttu-id="e3184-317">Уведомления о событиях зеркального отображения базы данных</span><span class="sxs-lookup"><span data-stu-id="e3184-317">Database Mirroring Event Notifications</span></span>  
 <span data-ttu-id="e3184-318">Уведомление о событии является особым типом объекта базы данных.</span><span class="sxs-lookup"><span data-stu-id="e3184-318">Event notifications are a special kind of database object.</span></span> <span data-ttu-id="e3184-319">Уведомления о событиях выполняются в ответ на множество инструкций языка DDL Transact-SQL и на события трассировки SQL. Уведомления отправляют сведения о событиях сервера и базы данных службе [!INCLUDE[ssSB](../../includes/sssb-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="e3184-319">Event notifications execute in response to a variety of Transact-SQL data definition language (DDL) statements and SQL Trace events and send information about server and database events to a [!INCLUDE[ssSB](../../includes/sssb-md.md)] service.</span></span>  
  
 <span data-ttu-id="e3184-320">При зеркальном отображении базы данных доступны следующие события.</span><span class="sxs-lookup"><span data-stu-id="e3184-320">The following events are available for database mirroring:</span></span>  
  
-   <span data-ttu-id="e3184-321">Класс событий**Database Mirroring State Change**</span><span class="sxs-lookup"><span data-stu-id="e3184-321">**Database Mirroring State Change** event class</span></span>  
  
     <span data-ttu-id="e3184-322">Указывает, что состояние зеркального отображения зеркальной базы данных изменилось.</span><span class="sxs-lookup"><span data-stu-id="e3184-322">This indicates when the mirroring state of a mirrored database changes.</span></span> <span data-ttu-id="e3184-323">Дополнительные сведения см. в статье [Database Mirroring State Change Event Class](../../relational-databases/event-classes/database-mirroring-state-change-event-class.md).</span><span class="sxs-lookup"><span data-stu-id="e3184-323">For more information, see [Database Mirroring State Change Event Class](../../relational-databases/event-classes/database-mirroring-state-change-event-class.md).</span></span>  
  
-   <span data-ttu-id="e3184-324">Класс событий**Audit Database Mirroring Login**</span><span class="sxs-lookup"><span data-stu-id="e3184-324">**Audit Database Mirroring Login** event class</span></span>  
  
     <span data-ttu-id="e3184-325">Содержит сведения о сообщениях аудита, связанных с безопасностью транспорта зеркального отображения базы данных.</span><span class="sxs-lookup"><span data-stu-id="e3184-325">This reports audit messages related to database mirroring transport security.</span></span> <span data-ttu-id="e3184-326">Дополнительные сведения см. в статье [Audit Database Mirroring Login Event Class](../../relational-databases/event-classes/audit-database-mirroring-login-event-class.md).</span><span class="sxs-lookup"><span data-stu-id="e3184-326">For more information, see [Audit Database Mirroring Login Event Class](../../relational-databases/event-classes/audit-database-mirroring-login-event-class.md).</span></span>  
  
##  <a name="related-tasks"></a><a name="RelatedTasks"></a> <span data-ttu-id="e3184-327">Связанные задачи</span><span class="sxs-lookup"><span data-stu-id="e3184-327">Related Tasks</span></span>  
  
-   [<span data-ttu-id="e3184-328">Использование пороговых значений предупреждений и оповещений в метриках производительности зеркального отображения (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="e3184-328">Use Warning Thresholds and Alerts on Mirroring Performance Metrics &#40;SQL Server&#41;</span></span>](use-warning-thresholds-and-alerts-on-mirroring-performance-metrics-sql-server.md)  
  
-   [<span data-ttu-id="e3184-329">Запуск монитора зеркального отображения баз данных (среда SQL Server Management Studio)</span><span class="sxs-lookup"><span data-stu-id="e3184-329">Start Database Mirroring Monitor &#40;SQL Server Management Studio&#41;</span></span>](../database-mirroring/start-database-mirroring-monitor-sql-server-management-studio.md)  
  
-   [<span data-ttu-id="e3184-330">Просмотр состояния зеркального отображения базы данных (среда SQL Server Management Studio)</span><span class="sxs-lookup"><span data-stu-id="e3184-330">View the State of a Mirrored Database &#40;SQL Server Management Studio&#41;</span></span>](view-the-state-of-a-mirrored-database-sql-server-management-studio.md)  
  
 <span data-ttu-id="e3184-331">**Хранимые процедуры**</span><span class="sxs-lookup"><span data-stu-id="e3184-331">**Stored procedures**</span></span>  
  
-   [<span data-ttu-id="e3184-332">sp_dbmmonitoraddmonitoring (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="e3184-332">sp_dbmmonitoraddmonitoring &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitoraddmonitoring-transact-sql)  
  
-   [<span data-ttu-id="e3184-333">sp_dbmmonitorchangealert (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="e3184-333">sp_dbmmonitorchangealert &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorchangealert-transact-sql)  
  
-   [<span data-ttu-id="e3184-334">sp_dbmmonitorchangemonitoring (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="e3184-334">sp_dbmmonitorchangemonitoring &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorchangemonitoring-transact-sql)  
  
-   [<span data-ttu-id="e3184-335">sp_dbmmonitordropalert (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="e3184-335">sp_dbmmonitordropalert &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitordropalert-transact-sql)  
  
-   [<span data-ttu-id="e3184-336">sp_dbmmonitordropmonitoring (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="e3184-336">sp_dbmmonitordropmonitoring &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitordropmonitoring-transact-sql)  
  
-   [<span data-ttu-id="e3184-337">sp_dbmmonitorhelpalert (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="e3184-337">sp_dbmmonitorhelpalert &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorhelpalert-transact-sql)  
  
-   [<span data-ttu-id="e3184-338">sp_dbmmonitorhelpmonitoring (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="e3184-338">sp_dbmmonitorhelpmonitoring &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorhelpmonitoring-transact-sql)  
  
-   [<span data-ttu-id="e3184-339">sp_dbmmonitorresults (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="e3184-339">sp_dbmmonitorresults &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorresults-transact-sql)  
  
-   [<span data-ttu-id="e3184-340">sp_dbmmonitorupdate (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="e3184-340">sp_dbmmonitorupdate &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorupdate-transact-sql)  
  
## <a name="see-also"></a><span data-ttu-id="e3184-341">См. также:</span><span class="sxs-lookup"><span data-stu-id="e3184-341">See Also</span></span>  
 <span data-ttu-id="e3184-342">[Зеркальное отображение базы данных (SQL Server)](database-mirroring-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="e3184-342">[Database Mirroring &#40;SQL Server&#41;](database-mirroring-sql-server.md) </span></span>  
 [<span data-ttu-id="e3184-343">Основные понятия о поставщике WMI для событий сервера</span><span class="sxs-lookup"><span data-stu-id="e3184-343">WMI Provider for Server Events Concepts</span></span>](../../relational-databases/wmi-provider-server-events/wmi-provider-for-server-events-concepts.md)  
  
  
