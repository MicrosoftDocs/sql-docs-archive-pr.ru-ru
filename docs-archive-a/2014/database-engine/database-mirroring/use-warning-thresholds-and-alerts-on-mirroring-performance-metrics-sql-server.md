---
title: Использование пороговых значений предупреждений и предупреждений для метрик производительности зеркального отображения (SQL Server) | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- monitoring database mirroring [SQL Server]
- thresholds [SQL Server]
- database mirroring [SQL Server], managing in SQL Server Management Studio
- alerts [SQL Server], database mirroring
- database mirroring [SQL Server], monitoring
- warnings [database mirroring]
ms.assetid: 8cdd1515-0bd7-4f8c-a7fc-a33b575e20f6
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 908b234143bc7e2140fe1c98d85ba150ea69b28d
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87658387"
---
# <a name="use-warning-thresholds-and-alerts-on-mirroring-performance-metrics-sql-server"></a><span data-ttu-id="8280f-102">Использование пороговых значений предупреждений и оповещений в метриках производительности зеркального отображения (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="8280f-102">Use Warning Thresholds and Alerts on Mirroring Performance Metrics (SQL Server)</span></span>
  <span data-ttu-id="8280f-103">В этом разделе содержатся сведения о событиях [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , для которых можно настраивать пороговые значения предупреждений и управлять ими для зеркального отображения базы данных.</span><span class="sxs-lookup"><span data-stu-id="8280f-103">This topic contains information about the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] events for which warning thresholds can be configured and managed for database mirroring.</span></span> <span data-ttu-id="8280f-104">Это можно сделать с помощью монитора зеркального отображения баз данных или хранимых процедур **sp_dbmmonitorchangealert**, **sp_dbmmonitorhelpalert**и **sp_dbmmonitordropalert** .</span><span class="sxs-lookup"><span data-stu-id="8280f-104">You can use the  Database Mirroring Monitor or the **sp_dbmmonitorchangealert**, **sp_dbmmonitorhelpalert**, and **sp_dbmmonitordropalert** stored procedures.</span></span> <span data-ttu-id="8280f-105">В этом разделе содержатся также сведения о настройке предупреждений о событиях зеркального отображения баз данных.</span><span class="sxs-lookup"><span data-stu-id="8280f-105">This topic also contains information about configuring alerts on database mirroring events.</span></span>  
  
 <span data-ttu-id="8280f-106">После того как установлено наблюдение в зеркальной базе данных, системный администратор может настроить пороговые значения предупреждений по нескольким метрикам производительности,</span><span class="sxs-lookup"><span data-stu-id="8280f-106">After monitoring is established for a mirrored database, a system administrator can configure warning thresholds on several key performance metrics.</span></span> <span data-ttu-id="8280f-107">а также предупреждения для этих и других событий зеркального отображения базы данных.</span><span class="sxs-lookup"><span data-stu-id="8280f-107">Also, an administrator can configure alerts on these and other database mirroring events.</span></span>  
  
 <span data-ttu-id="8280f-108">**В этом разделе:**</span><span class="sxs-lookup"><span data-stu-id="8280f-108">**In This Topic:**</span></span>  
  
-   [<span data-ttu-id="8280f-109">Метрики производительности и пороговые значения предупреждений</span><span class="sxs-lookup"><span data-stu-id="8280f-109">Performance Metrics and Warning Thresholds</span></span>](#PerfMetricsAndWarningThresholds)  
  
-   [<span data-ttu-id="8280f-110">Настройка пороговых значений предупреждений и управление ими</span><span class="sxs-lookup"><span data-stu-id="8280f-110">Setting Up and Managing Warning Thresholds</span></span>](#SetUpManageWarningThresholds)  
  
-   [<span data-ttu-id="8280f-111">Использование предупреждений для зеркальной базы данных</span><span class="sxs-lookup"><span data-stu-id="8280f-111">Using Alerts for a Mirrored Database</span></span>](#UseAlerts)  
  
-   [<span data-ttu-id="8280f-112">Связанные задачи</span><span class="sxs-lookup"><span data-stu-id="8280f-112">Related Tasks</span></span>](#RelatedTasks)  
  
##  <a name="performance-metrics-and-warning-thresholds"></a><a name="PerfMetricsAndWarningThresholds"></a> <span data-ttu-id="8280f-113">Метрики производительности и пороговые значения предупреждений</span><span class="sxs-lookup"><span data-stu-id="8280f-113">Performance Metrics and Warning Thresholds</span></span>  
 <span data-ttu-id="8280f-114">В следующей таблице перечислены метрики производительности, для которых можно настроить предупреждения, описаны пороговые значения и перечислены соответствующие им метки монитора зеркального отображения баз данных.</span><span class="sxs-lookup"><span data-stu-id="8280f-114">The following table lists the performance metrics for which warnings can be configured, describes the corresponding warning threshold, and lists the corresponding Database Mirroring Monitor label.</span></span>  
  
|<span data-ttu-id="8280f-115">Метрика производительности</span><span class="sxs-lookup"><span data-stu-id="8280f-115">Performance metric</span></span>|<span data-ttu-id="8280f-116">Пороговое значение предупреждения</span><span class="sxs-lookup"><span data-stu-id="8280f-116">Warning threshold</span></span>|<span data-ttu-id="8280f-117">Метка монитора зеркального отображения баз данных</span><span class="sxs-lookup"><span data-stu-id="8280f-117">Database Mirroring Monitor label</span></span>|  
|------------------------|-----------------------|--------------------------------------|  
|<span data-ttu-id="8280f-118">Неотправленный журнал</span><span class="sxs-lookup"><span data-stu-id="8280f-118">Unsent log</span></span>|<span data-ttu-id="8280f-119">Указывает, какое количество килобайтов (КБ) неотправленного журнала формирует предупреждение в экземпляре основного сервера.</span><span class="sxs-lookup"><span data-stu-id="8280f-119">Specifies how many kilobytes (KB) of unsent log generate a warning on the principal server instance.</span></span> <span data-ttu-id="8280f-120">Это предупреждение помогает измерить объем возможных потерь данных в килобайтах и особенно подходит для режима высокой производительности,</span><span class="sxs-lookup"><span data-stu-id="8280f-120">This warning helps measure the potential for data loss in terms of KB and is especially relevant for high-performance mode.</span></span> <span data-ttu-id="8280f-121">Однако это предупреждение также уместно в режиме высокой безопасности, когда зеркальное отображение приостановлено или прекращено, потому что участники были разъединены.</span><span class="sxs-lookup"><span data-stu-id="8280f-121">However, the warning is also relevant for high-safety mode when mirroring is paused or suspended because the partners become disconnected.</span></span>|<span data-ttu-id="8280f-122">**Предупреждать, если размер неотправленного журнала превышает пороговое значение.**</span><span class="sxs-lookup"><span data-stu-id="8280f-122">**Warn if the unsent log exceeds the threshold**</span></span>|  
|<span data-ttu-id="8280f-123">Невосстановленный журнал</span><span class="sxs-lookup"><span data-stu-id="8280f-123">Unrestored log</span></span>|<span data-ttu-id="8280f-124">Указывает, какое количество килобайтов (КБ) невосстановленного журнала формирует предупреждение в экземпляре зеркального сервера.</span><span class="sxs-lookup"><span data-stu-id="8280f-124">Specifies how many KB of unrestored log generate a warning on the mirror server instance.</span></span> <span data-ttu-id="8280f-125">Это предупреждение помогает вычислить время отработки отказа.</span><span class="sxs-lookup"><span data-stu-id="8280f-125">This warning helps measure failover time.</span></span> <span data-ttu-id="8280f-126">*Время отработки отказа* в основном состоит из времени, необходимого бывшему зеркальному серверу для наката всех журналов, оставшихся в его очереди повторов, и небольшого дополнительного времени.</span><span class="sxs-lookup"><span data-stu-id="8280f-126">*Failover time* consists mainly of the time that the former mirror server requires to roll forward any log remaining in its redo queue, plus a short additional time.</span></span><br /><br /> <span data-ttu-id="8280f-127">Примечание. Время, которое потребуется системе, чтобы заметить ошибку, не зависит от времени отработки отказа, если она выполняется автоматически.</span><span class="sxs-lookup"><span data-stu-id="8280f-127">Note: For an automatic failover, the time for the system to notice the error is independent of the failover time.</span></span><br /><br /> <span data-ttu-id="8280f-128">Дополнительные сведения см. в статье [Оценка прерывания обслуживания во время переключения ролей (зеркальное отображение базы данных)](estimate-the-interruption-of-service-during-role-switching-database-mirroring.md).</span><span class="sxs-lookup"><span data-stu-id="8280f-128">For more information, see [Estimate the Interruption of Service During Role Switching &#40;Database Mirroring&#41;](estimate-the-interruption-of-service-during-role-switching-database-mirroring.md).</span></span>|<span data-ttu-id="8280f-129">**Предупреждать, если размер невосстановленного журнала превысил пороговое значение.**</span><span class="sxs-lookup"><span data-stu-id="8280f-129">**Warn if the unrestored log exceeds the threshold**</span></span>|  
|<span data-ttu-id="8280f-130">Самая старая неотправленная транзакция</span><span class="sxs-lookup"><span data-stu-id="8280f-130">Oldest unsent transaction</span></span>|<span data-ttu-id="8280f-131">Указывает количество транзакций за минуту, которые могут накопиться в очереди передачи перед тем, как будет сформировано предупреждение в экземпляре основного сервера.</span><span class="sxs-lookup"><span data-stu-id="8280f-131">Specifies the number of minutes worth of transactions that can accumulate in the send queue before a warning is generated on the principal server instance.</span></span> <span data-ttu-id="8280f-132">Это предупреждение помогает измерить возможные потери времени, что особенно актуально для режима высокой производительности,</span><span class="sxs-lookup"><span data-stu-id="8280f-132">This warning helps measure the potential for data loss in terms of time and is especially relevant for high-performance mode.</span></span> <span data-ttu-id="8280f-133">Однако это предупреждение также уместно в режиме высокой безопасности, когда зеркальное отображение приостановлено или прекращено, потому что участники были разъединены.</span><span class="sxs-lookup"><span data-stu-id="8280f-133">However, the warning is also relevant for high-safety mode when mirroring is paused or suspended because the partners become disconnected.</span></span>|<span data-ttu-id="8280f-134">**Предупреждать, если время хранения самой старой неотправленной транзакции превысило пороговое значение.**</span><span class="sxs-lookup"><span data-stu-id="8280f-134">**Warn if the age of the oldest unsent transaction exceeds the threshold**</span></span>|  
|<span data-ttu-id="8280f-135">Затраты на фиксирование изменений на зеркальном сервере</span><span class="sxs-lookup"><span data-stu-id="8280f-135">Mirror commit overhead</span></span>|<span data-ttu-id="8280f-136">Указывает количество миллисекунд средней задержки транзакции, которая допустима перед формированием предупреждения на основном сервере.</span><span class="sxs-lookup"><span data-stu-id="8280f-136">Specifies the number of milliseconds of average delay per transaction that are tolerated before a warning is generated on the principal server.</span></span> <span data-ttu-id="8280f-137">Задержка — это объем дополнительной нагрузки во время ожидания экземпляром основного сервера экземпляра зеркального сервера для добавления записи журнала транзакции в очередь повтора.</span><span class="sxs-lookup"><span data-stu-id="8280f-137">This delay is the amount of overhead incurred while the principal server instance waits for the mirror server instance to write the transaction's log record into the redo queue.</span></span> <span data-ttu-id="8280f-138">Это значение уместно только в режиме высокой безопасности.</span><span class="sxs-lookup"><span data-stu-id="8280f-138">This value is relevant only in high-safety mode.</span></span>|<span data-ttu-id="8280f-139">**Предупреждать, если затраты на фиксирование изменений на зеркальном сервере превысили пороговое значение.**</span><span class="sxs-lookup"><span data-stu-id="8280f-139">**Warn if the mirror commit overhead exceeds the threshold**</span></span>|  
  
 <span data-ttu-id="8280f-140">Администратор может задать в зеркальной базе данных пороговое значение для любой из этих метрик производительности.</span><span class="sxs-lookup"><span data-stu-id="8280f-140">For any one of these performance metrics, a system administrator can specify a threshold on a mirrored database.</span></span> <span data-ttu-id="8280f-141">Дополнительные сведения см. в подразделе [Установка пороговых значений предупреждений и управление ими](#SetUpManageWarningThresholds)ниже в этом разделе.</span><span class="sxs-lookup"><span data-stu-id="8280f-141">For more information, see [Setting Up and Managing Warning Thresholds](#SetUpManageWarningThresholds), later in this topic.</span></span>  
  
##  <a name="setting-up-and-managing-warning-thresholds"></a><a name="SetUpManageWarningThresholds"></a> <span data-ttu-id="8280f-142">Установка и управление пороговыми значениями предупреждений</span><span class="sxs-lookup"><span data-stu-id="8280f-142">Setting Up and Managing Warning Thresholds</span></span>  
 <span data-ttu-id="8280f-143">Системным администратором может быть настроено одно или несколько пороговых значений предупреждений для ключевых метрик производительности зеркального отображения.</span><span class="sxs-lookup"><span data-stu-id="8280f-143">A system administrator can configure one or more warning thresholds for the key mirroring performance metrics.</span></span> <span data-ttu-id="8280f-144">Рекомендуется это делать на обоих участниках, чтобы гарантировать сохранение предупреждения при переходе базы данных на другой ресурс.</span><span class="sxs-lookup"><span data-stu-id="8280f-144">We recommend setting a threshold for a given warning on both partners to make sure that the warning persists if the database fails over.</span></span> <span data-ttu-id="8280f-145">Соответствующее пороговое значение на каждом из участников зависит от производительности системы на нем.</span><span class="sxs-lookup"><span data-stu-id="8280f-145">The appropriate threshold on each partner depends on the performance capabilities of that partner's system.</span></span>  
  
 <span data-ttu-id="8280f-146">Пороговые значения предупреждений можно настраивать и контролировать одним из следующих способов.</span><span class="sxs-lookup"><span data-stu-id="8280f-146">Warning thresholds can be configured and managed by using either of the following:</span></span>  
  
-   <span data-ttu-id="8280f-147">Монитор зеркального отображения баз данных.</span><span class="sxs-lookup"><span data-stu-id="8280f-147">Database Mirroring Monitor</span></span>  
  
     <span data-ttu-id="8280f-148">В мониторе зеркального отображения баз данных администратор может одновременно просматривать текущую конфигурацию предупреждений для выделенной базы данных на экземплярах как основного, так и зеркального сервера, выбрав страницу со вкладками **Предупреждения** .</span><span class="sxs-lookup"><span data-stu-id="8280f-148">In Database Mirroring Monitor, the administrator can view the current configuration of warnings for a selected database at both the principal and mirror server instances at the same time by selecting the **Warnings** tabbed page.</span></span> <span data-ttu-id="8280f-149">Доступное на странице диалоговое окно **Установка пороговых значений предупреждений** позволяет включить и настроить одно или несколько пороговых значений предупреждений.</span><span class="sxs-lookup"><span data-stu-id="8280f-149">From there, the administrator can open the **Set Warning Thresholds** dialog box to enable and configure one or more warning thresholds.</span></span>  
  
     <span data-ttu-id="8280f-150">Основные сведения об интерфейсе монитора зеркального отображения баз данных см. в разделе [Database Mirroring Monitor Overview](database-mirroring-monitor-overview.md).</span><span class="sxs-lookup"><span data-stu-id="8280f-150">For an introduction to the Database Mirroring Monitor interface, see [Database Mirroring Monitor Overview](database-mirroring-monitor-overview.md).</span></span> <span data-ttu-id="8280f-151">Сведения о запуске монитора зеркального отображения базы данных см. в разделе [Запуск монитора зеркального отображения баз данных (среда SQL Server Management Studio)](../database-mirroring/start-database-mirroring-monitor-sql-server-management-studio.md).</span><span class="sxs-lookup"><span data-stu-id="8280f-151">For information about launching Database Mirroring Monitor, see [Start Database Mirroring Monitor &#40;SQL Server Management Studio&#41;](../database-mirroring/start-database-mirroring-monitor-sql-server-management-studio.md).</span></span>  
  
-   <span data-ttu-id="8280f-152">Системные хранимые процедуры</span><span class="sxs-lookup"><span data-stu-id="8280f-152">System stored procedures</span></span>  
  
     <span data-ttu-id="8280f-153">Следующий набор системных хранимых процедур позволяет администратору устанавливать пороговые значения предупреждений и управлять ими в зеркальной базе данных одного из участников.</span><span class="sxs-lookup"><span data-stu-id="8280f-153">The following set of system stored procedures enable an administrator to set up and manage warning thresholds on mirrored databases of one partner at a time.</span></span>  
  
    |<span data-ttu-id="8280f-154">Процедура</span><span class="sxs-lookup"><span data-stu-id="8280f-154">Procedure</span></span>|<span data-ttu-id="8280f-155">Описание</span><span class="sxs-lookup"><span data-stu-id="8280f-155">Description</span></span>|  
    |---------------|-----------------|  
    |[<span data-ttu-id="8280f-156">sp_dbmmonitorchangealert (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="8280f-156">sp_dbmmonitorchangealert &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorchangealert-transact-sql)|<span data-ttu-id="8280f-157">Добавляет или изменяет пороговое значение предупреждения для указанной метрики производительности зеркального отображения баз данных.</span><span class="sxs-lookup"><span data-stu-id="8280f-157">Adds or changes warning threshold for a specified mirroring performance metric.</span></span>|  
    |[<span data-ttu-id="8280f-158">sp_dbmmonitorhelpalert (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="8280f-158">sp_dbmmonitorhelpalert &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorhelpalert-transact-sql)|<span data-ttu-id="8280f-159">Возвращает сведения о порогах предупреждения для одной или всех ключевых метрик производительности монитора зеркального отображения базы данных.</span><span class="sxs-lookup"><span data-stu-id="8280f-159">Returns information about warning thresholds on one or all of several key database mirroring monitor performance metrics.</span></span>|  
    |[<span data-ttu-id="8280f-160">sp_dbmmonitordropalert (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="8280f-160">sp_dbmmonitordropalert &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitordropalert-transact-sql)|<span data-ttu-id="8280f-161">Удаляет предупреждение для указанной метрики производительности.</span><span class="sxs-lookup"><span data-stu-id="8280f-161">Drops the warning for a specified performance metric.</span></span>|  
  
## <a name="performance-threshold-events-sent-to-the-windows-event-log"></a><span data-ttu-id="8280f-162">Пороговые события производительности, отправляемые в журнал событий Windows</span><span class="sxs-lookup"><span data-stu-id="8280f-162">Performance-Threshold Events Sent to the Windows Event Log</span></span>  
 <span data-ttu-id="8280f-163">Если для метрики производительности определено пороговое значение предупреждения, то при обновлении таблицы состояния последнее значение сравнивается с пороговым.</span><span class="sxs-lookup"><span data-stu-id="8280f-163">If warning thresholdis defined for a performance metric, when the status table is updated, the latest value is evaluated against the threshold.</span></span> <span data-ttu-id="8280f-164">При достижении порогового значения процедура обновления, **sp_dbmmonitorupdate**, создает информационное событие — *пороговое событие производительности*для метрики и записывает событие в [!INCLUDE[msCoName](../../includes/msconame-md.md)] журнал событий Windows.</span><span class="sxs-lookup"><span data-stu-id="8280f-164">If the threshold has been reached, the update procedure, **sp_dbmmonitorupdate**, generates an informational event-a *performance-threshold event*- for the metric and writes the event to the [!INCLUDE[msCoName](../../includes/msconame-md.md)] Windows event log.</span></span> <span data-ttu-id="8280f-165">В следующей таблице приведены идентификаторы пороговых событий производительности.</span><span class="sxs-lookup"><span data-stu-id="8280f-165">The following table lists the event IDs of the performance-threshold events.</span></span>  
  
|<span data-ttu-id="8280f-166">Метрика производительности</span><span class="sxs-lookup"><span data-stu-id="8280f-166">Performance metric</span></span>|<span data-ttu-id="8280f-167">Идентификатор события</span><span class="sxs-lookup"><span data-stu-id="8280f-167">Event ID</span></span>|  
|------------------------|--------------|  
|<span data-ttu-id="8280f-168">Неотправленный журнал</span><span class="sxs-lookup"><span data-stu-id="8280f-168">Unsent log</span></span>|<span data-ttu-id="8280f-169">32042</span><span class="sxs-lookup"><span data-stu-id="8280f-169">32042</span></span>|  
|<span data-ttu-id="8280f-170">Невосстановленный журнал</span><span class="sxs-lookup"><span data-stu-id="8280f-170">Unrestored log</span></span>|<span data-ttu-id="8280f-171">32043</span><span class="sxs-lookup"><span data-stu-id="8280f-171">32043</span></span>|  
|<span data-ttu-id="8280f-172">Самая старая неотправленная транзакция</span><span class="sxs-lookup"><span data-stu-id="8280f-172">Oldest unsent transaction</span></span>|<span data-ttu-id="8280f-173">32040</span><span class="sxs-lookup"><span data-stu-id="8280f-173">32040</span></span>|  
|<span data-ttu-id="8280f-174">Затраты на фиксирование изменений на зеркальном сервере</span><span class="sxs-lookup"><span data-stu-id="8280f-174">Mirror commit overhead</span></span>|<span data-ttu-id="8280f-175">32044</span><span class="sxs-lookup"><span data-stu-id="8280f-175">32044</span></span>|  
  
> [!NOTE]  
>  <span data-ttu-id="8280f-176">Администратор может определить оповещения для одного или нескольких таких событий.</span><span class="sxs-lookup"><span data-stu-id="8280f-176">An administrator can define alerts on any one or more of these events.</span></span> <span data-ttu-id="8280f-177">Дополнительные сведения см. в подразделе [Использование предупреждений для зеркальной базы данных](#UseAlerts)ниже в этом</span><span class="sxs-lookup"><span data-stu-id="8280f-177">For more information, see [Using Alerts for a Mirrored Database](#UseAlerts), later in this</span></span>  
>   
>  <span data-ttu-id="8280f-178">разделе.</span><span class="sxs-lookup"><span data-stu-id="8280f-178">topic.</span></span>  
  
##  <a name="using-alerts-for-a-mirrored-database"></a><a name="UseAlerts"></a><span data-ttu-id="8280f-179">Использование предупреждений для зеркальной базы данных</span><span class="sxs-lookup"><span data-stu-id="8280f-179">Using Alerts for a Mirrored Database</span></span>  
 <span data-ttu-id="8280f-180">Существенной частью наблюдения за зеркальной базой данных является настройка предупреждений о важных событиях зеркального отображения базы данных.</span><span class="sxs-lookup"><span data-stu-id="8280f-180">An important part of monitoring a mirrored database is configuring alerts on significant database mirro events.</span></span> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="8280f-181">формирует следующие типы событий зеркального отображения базы данных.</span><span class="sxs-lookup"><span data-stu-id="8280f-181">generates the following types of database mirroring events:</span></span>  
  
-   <span data-ttu-id="8280f-182">Пороговые события производительности</span><span class="sxs-lookup"><span data-stu-id="8280f-182">Performance threshold events</span></span>  
  
     <span data-ttu-id="8280f-183">Дополнительные сведения см. выше в разделе «Пороговые события производительности, отправляемые в журнал событий Windows».</span><span class="sxs-lookup"><span data-stu-id="8280f-183">For more information, see "Performance-Threshold Events Sent to the Windows Event Log" earlier in this topic.</span></span>  
  
-   <span data-ttu-id="8280f-184">События изменения состояния</span><span class="sxs-lookup"><span data-stu-id="8280f-184">State-change events</span></span>  
  
     <span data-ttu-id="8280f-185">Это события инструментария управления Windows (WMI), которые возникают при изменениях внутреннего состояния сеанса зеркального отображения базы данных.</span><span class="sxs-lookup"><span data-stu-id="8280f-185">These are Windows Management Instrumentation (WMI) events that are generated when changes occur in the internal state of a database mirroring session.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="8280f-186">Дополнительные сведения см. в разделе [Основные понятия о поставщике WMI для событий сервера](../../relational-databases/wmi-provider-server-events/wmi-provider-for-server-events-concepts.md).</span><span class="sxs-lookup"><span data-stu-id="8280f-186">For more information, see [WMI Provider for Server Events Concepts](../../relational-databases/wmi-provider-server-events/wmi-provider-for-server-events-concepts.md).</span></span>  
  
 <span data-ttu-id="8280f-187">Системный администратор может настроить оповещения об этих событиях с помощью агента [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] или других приложений (например [!INCLUDE[msCoName](../../includes/msconame-md.md)] Operations Manager).</span><span class="sxs-lookup"><span data-stu-id="8280f-187">A system administrator can configure alerts on these by using [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent or other applications, such as [!INCLUDE[msCoName](../../includes/msconame-md.md)] Operations Manager.</span></span>  
  
 <span data-ttu-id="8280f-188">При определении оповещений о событиях зеркального отображения базы данных рекомендуется задавать пороговые значения предупреждений и оповещения на обоих экземплярах сервера-участника.</span><span class="sxs-lookup"><span data-stu-id="8280f-188">When you define alerts on database mirroring events, we recommend that you define warning thresholds and alerts at both partner server instances.</span></span> <span data-ttu-id="8280f-189">Отдельные события формируются и на основном, и на зеркальном сервере, но каждый из участников в любой момент времени может выполнять любую роль.</span><span class="sxs-lookup"><span data-stu-id="8280f-189">Individual events are generated at either the principal server or the mirror server, but each partner can perform either role at any time.</span></span> <span data-ttu-id="8280f-190">Чтобы гарантировать работу оповещений после отработки отказа, они должны быть определены на обоих участниках.</span><span class="sxs-lookup"><span data-stu-id="8280f-190">To make sure that an alert continues to operate after a failover, the alert must be defined at both partners.</span></span>  
  
 <span data-ttu-id="8280f-191">Дополнительные сведения см. в техническом документе о событиях зеркального отображения базы данных на [веб-сайте SQL Server](../../database-engine/database-mirroring/use-warning-thresholds-and-alerts-on-mirroring-performance-metrics-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="8280f-191">For more information, see the white paper about alerting on database mirroring events at this [SQL Server Web site](../../database-engine/database-mirroring/use-warning-thresholds-and-alerts-on-mirroring-performance-metrics-sql-server.md).</span></span> <span data-ttu-id="8280f-192">В нем содержатся сведения о способах настройки предупреждений с помощью агента [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , о событиях зеркального отображения базы данных WMI и образцы скриптов.</span><span class="sxs-lookup"><span data-stu-id="8280f-192">This white paper contains information about how to configure alerts using [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent, the database mirroring WMI events, and sample scripts.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="8280f-193">Для всех сеансов зеркального отображения настоятельно рекомендуется настроить базу данных для отправки предупреждений обо всех событиях изменения состояния.</span><span class="sxs-lookup"><span data-stu-id="8280f-193">For all mirroring sessions, we strongly recommend that you configure the database to send an alert on any state-change events.</span></span> <span data-ttu-id="8280f-194">Такое событие означает, что произошло нечто, способное скомпрометировать данные, если это не изменение, связанное с ручной настройкой базы данных.</span><span class="sxs-lookup"><span data-stu-id="8280f-194">Unless a state change is expected as the result of a manual configuration change, something has occurred that could compromise your data.</span></span> <span data-ttu-id="8280f-195">Чтобы защитить данные, необходимо определить и устранить причину непредвиденного изменения состояния.</span><span class="sxs-lookup"><span data-stu-id="8280f-195">To help protect your data, identify and fix the cause of an unexpected state change.</span></span>  
  
##  <a name="related-tasks"></a><a name="RelatedTasks"></a> <span data-ttu-id="8280f-196">Связанные задачи</span><span class="sxs-lookup"><span data-stu-id="8280f-196">Related Tasks</span></span>  
 <span data-ttu-id="8280f-197">**Создание предупреждения в среде SQL Server Management Studio**</span><span class="sxs-lookup"><span data-stu-id="8280f-197">**To create an alert using SQL Server Management Studio**</span></span>  
  
-   [<span data-ttu-id="8280f-198">Создание предупреждения по номеру сообщения</span><span class="sxs-lookup"><span data-stu-id="8280f-198">Create an Alert Using an Error Number</span></span>](../../ssms/agent/create-an-alert-using-an-error-number.md)  
  
-   [<span data-ttu-id="8280f-199">Создание предупреждения о событии WMI</span><span class="sxs-lookup"><span data-stu-id="8280f-199">Create a WMI Event Alert</span></span>](../../ssms/agent/create-a-wmi-event-alert.md)  
  
 <span data-ttu-id="8280f-200">**Слежение за зеркальным отображением базы данных**</span><span class="sxs-lookup"><span data-stu-id="8280f-200">**To monitor database mirroring**</span></span>  
  
-   [<span data-ttu-id="8280f-201">Запуск монитора зеркального отображения баз данных (среда SQL Server Management Studio)</span><span class="sxs-lookup"><span data-stu-id="8280f-201">Start Database Mirroring Monitor &#40;SQL Server Management Studio&#41;</span></span>](../database-mirroring/start-database-mirroring-monitor-sql-server-management-studio.md)  
  
-   [<span data-ttu-id="8280f-202">sp_dbmmonitoraddmonitoring (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="8280f-202">sp_dbmmonitoraddmonitoring &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitoraddmonitoring-transact-sql)  
  
-   [<span data-ttu-id="8280f-203">sp_dbmmonitorchangealert (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="8280f-203">sp_dbmmonitorchangealert &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorchangealert-transact-sql)  
  
-   [<span data-ttu-id="8280f-204">sp_dbmmonitorchangemonitoring (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="8280f-204">sp_dbmmonitorchangemonitoring &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorchangemonitoring-transact-sql)  
  
-   [<span data-ttu-id="8280f-205">sp_dbmmonitordropalert (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="8280f-205">sp_dbmmonitordropalert &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitordropalert-transact-sql)  
  
-   [<span data-ttu-id="8280f-206">sp_dbmmonitordropmonitoring (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="8280f-206">sp_dbmmonitordropmonitoring &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitordropmonitoring-transact-sql)  
  
-   [<span data-ttu-id="8280f-207">sp_dbmmonitorhelpalert (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="8280f-207">sp_dbmmonitorhelpalert &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorhelpalert-transact-sql)  
  
-   [<span data-ttu-id="8280f-208">sp_dbmmonitorhelpmonitoring (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="8280f-208">sp_dbmmonitorhelpmonitoring &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorhelpmonitoring-transact-sql)  
  
-   [<span data-ttu-id="8280f-209">sp_dbmmonitorresults (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="8280f-209">sp_dbmmonitorresults &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorresults-transact-sql)  
  
-   [<span data-ttu-id="8280f-210">sp_dbmmonitorupdate (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="8280f-210">sp_dbmmonitorupdate &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorupdate-transact-sql)  
  
## <a name="see-also"></a><span data-ttu-id="8280f-211">См. также:</span><span class="sxs-lookup"><span data-stu-id="8280f-211">See Also</span></span>  
 <span data-ttu-id="8280f-212">[Зеркальное отображение базы данных (SQL Server)](database-mirroring-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="8280f-212">[Database Mirroring &#40;SQL Server&#41;](database-mirroring-sql-server.md) </span></span>  
 [<span data-ttu-id="8280f-213">Наблюдение за зеркальным отображением базы данных (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="8280f-213">Monitoring Database Mirroring &#40;SQL Server&#41;</span></span>](monitoring-database-mirroring-sql-server.md)  
  
  
