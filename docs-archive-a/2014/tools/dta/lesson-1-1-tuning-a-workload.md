---
title: Настройка рабочей нагрузки | Документация Майкрософт
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: database-engine
ms.topic: conceptual
helpviewer_keywords:
- workloads [SQL Server], tuning
ms.assetid: 6229bf3f-1182-4bc6-8451-cedc37f4b62e
author: stevestein
ms.author: sstein
ms.openlocfilehash: f95aab55d402ac72228dcc4326ad00ea15e7471f
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87734793"
---
# <a name="tuning-a-workload"></a><span data-ttu-id="79944-102">Настройка рабочей нагрузки</span><span class="sxs-lookup"><span data-stu-id="79944-102">Tuning a Workload</span></span>
  <span data-ttu-id="79944-103">Помощник по настройке ядра СУБД можно использовать для определения физической структуры базы данных и выбранных таблиц, оптимальной с точки зрения производительности запросов.</span><span class="sxs-lookup"><span data-stu-id="79944-103">The Database Engine Tuning Advisor can be used to find the best physical database design for query performance on the databases and tables that you select for tuning.</span></span>  
  
 <span data-ttu-id="79944-104">В данной задаче используется образец базы данных [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="79944-104">This task uses the [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] sample database.</span></span> <span data-ttu-id="79944-105">В целях повышения безопасности образцы баз данных по умолчанию не устанавливаются.</span><span class="sxs-lookup"><span data-stu-id="79944-105">To enhance security, the sample databases are not installed by default.</span></span> <span data-ttu-id="79944-106">Дополнительные сведения об установке образцов баз данных см. в статье [Установка образцов SQL Server и образцов баз данных](http://sqlserversamples.codeplex.com).</span><span class="sxs-lookup"><span data-stu-id="79944-106">To install the sample databases, see [Installing SQL Server Samples and Sample Databases](http://sqlserversamples.codeplex.com).</span></span>  
  
### <a name="tune-a-workload-transact-sql-script-file"></a><span data-ttu-id="79944-107">Настройка файла скрипта рабочей нагрузки Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="79944-107">Tune a workload Transact-SQL script file</span></span>  
  
1.  <span data-ttu-id="79944-108">Скопируйте образец инструкции или инструкций SELECT из примера «А.</span><span class="sxs-lookup"><span data-stu-id="79944-108">Copy a sample SELECT statement or statements from "A.</span></span> <span data-ttu-id="79944-109">Использование инструкции SELECT для получения строк и столбцов" в разделе [Примеры использования инструкции SELECT (Transact-SQL)](/sql/t-sql/queries/select-examples-transact-sql) и вставьте их в редактор запросов среды [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span><span class="sxs-lookup"><span data-stu-id="79944-109">Using SELECT to retrieve rows and columns" in [SELECT Examples &#40;Transact-SQL&#41;](/sql/t-sql/queries/select-examples-transact-sql) and paste the statements into the Query Editor of [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span></span> <span data-ttu-id="79944-110">Сохраните файл с именем **MyScript.sql** в каталог, где его будет легко найти.</span><span class="sxs-lookup"><span data-stu-id="79944-110">Save the file as **MyScript.sql** in a directory where you can easily find it.</span></span>  
  
2.  <span data-ttu-id="79944-111">Запустите помощник по настройке ядра СУБД.</span><span class="sxs-lookup"><span data-stu-id="79944-111">Start Database Engine Tuning Advisor.</span></span> <span data-ttu-id="79944-112">См. раздел [Запуск помощника по настройке ядра СУБД](../../relational-databases/performance/database-engine-tuning-advisor.md).</span><span class="sxs-lookup"><span data-stu-id="79944-112">See [Launching Database Engine Tuning Advisor](../../relational-databases/performance/database-engine-tuning-advisor.md).</span></span>  
  
3.  <span data-ttu-id="79944-113">На правой панели графического пользовательского интерфейса помощника по настройке ядра СУБД в поле **Имя сеанса** введите **MySession**.</span><span class="sxs-lookup"><span data-stu-id="79944-113">In the right pane of the Database Engine Tuning Advisor GUI, type **MySession** in **Session name**.</span></span>  
  
4.  <span data-ttu-id="79944-114">В поле **Рабочая нагрузка** выберите значение **Файл**, нажмите кнопку **Выберите файл рабочей нагрузки** и выберите файл **MyScript.sql** , сохраненный в шаге 1.</span><span class="sxs-lookup"><span data-stu-id="79944-114">Select **File** for your **Workload**, and click the **Browse for a workload file** button to locate the **MyScript.sql** file that you saved in Step 1.</span></span>  
  
5.  <span data-ttu-id="79944-115">Выберите в списке [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] База данных для анализа нагрузки **значение** , выберите [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] в сетке **Выберите базы данных и таблицы для настройки** и оставьте установленным флажок **Сохранить журнал настройки** .</span><span class="sxs-lookup"><span data-stu-id="79944-115">Select [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] in the **Database for workload analysis** list, select [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] in the **Select databases and tables to tune** grid, and leave **Save tuning log** selected.</span></span> <span data-ttu-id="79944-116">В поле**База данных для анализа рабочей нагрузки** указывается первая база данных, к которой будет подключаться помощник по настройке ядра СУБД при настройке рабочей нагрузки.</span><span class="sxs-lookup"><span data-stu-id="79944-116">**Database for workload analysis** specifies the first database to which Database Engine Tuning Advisor connects when tuning a workload.</span></span> <span data-ttu-id="79944-117">После начала настройки помощник по настройке ядра СУБД подключается к базам данных, определенным в инструкциях `USE DATABASE` , которые содержатся в рабочей нагрузке.</span><span class="sxs-lookup"><span data-stu-id="79944-117">After tuning begins, Database Engine Tuning Advisor connects to the databases specified by the `USE DATABASE` statements contained in the workload.</span></span>  
  
6.  <span data-ttu-id="79944-118">Перейдите на вкладку **Параметры настройки** . Для этой практики не будут заданы какие-либо параметры настройки, но необходимо проанализировать параметры настройки по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="79944-118">Click the **Tuning Options** tab. You will not set any tuning options for this practice, but take a moment to review the default tuning options.</span></span> <span data-ttu-id="79944-119">Нажмите клавишу F1, чтобы вызвать справку для этой страницы с вкладками.</span><span class="sxs-lookup"><span data-stu-id="79944-119">Press F1 to view the Help for this tabbed page.</span></span> <span data-ttu-id="79944-120">Нажмите кнопку **Дополнительные параметры** , чтобы просмотреть дополнительные параметры настройки.</span><span class="sxs-lookup"><span data-stu-id="79944-120">Click **Advanced Options** to view additional tuning options.</span></span> <span data-ttu-id="79944-121">Нажмите кнопку **Справка** в диалоговом окне **Расширенные параметры настройки** , чтобы просмотреть дополнительные сведения о параметрах настройки.</span><span class="sxs-lookup"><span data-stu-id="79944-121">Click **Help** in the **Advanced Tuning Options** dialog box for information about the tuning options that are displayed there.</span></span> <span data-ttu-id="79944-122">Нажмите кнопку **Отмена** , чтобы закрыть диалоговое окно **Расширенные параметры настройки** и оставить заданные по умолчанию параметры.</span><span class="sxs-lookup"><span data-stu-id="79944-122">Click **Cancel** to close the **Advanced Tuning Options** dialog box, leaving the default options selected.</span></span>  
  
7.  <span data-ttu-id="79944-123">На панели инструментов нажмите кнопку **Начать анализ** .</span><span class="sxs-lookup"><span data-stu-id="79944-123">Click the **Start Analysis** button on the toolbar.</span></span> <span data-ttu-id="79944-124">Хотя помощник по настройке ядра СУБД анализирует рабочую нагрузку, вы можете отслеживать ее состояние на вкладке **выполнение** . После завершения настройки отобразится вкладка **рекомендации** .</span><span class="sxs-lookup"><span data-stu-id="79944-124">While Database Engine Tuning Advisor is analyzing the workload, you can monitor the status on the **Progress** tab. When tuning is complete, the **Recommendations** tab is displayed.</span></span>  
  
     <span data-ttu-id="79944-125">При возникновении ошибки даты и времени завершения настройки проверьте **время ожидания на** главной вкладке **Параметры настройки** . Убедитесь, что значение параметра время **окончания** в дате и времени превышает текущую дату и время, и при необходимости измените их.</span><span class="sxs-lookup"><span data-stu-id="79944-125">If you receive an error about the tuning stop date and time, check the **Stop at** time on the main **Tuning Options** tab. Make sure the **Stop at** date and time are greater than the current date and time, and if necessary, change them.</span></span>  
  
8.  <span data-ttu-id="79944-126">После завершения анализа сохраните рекомендации в виде скрипта [!INCLUDE[tsql](../../includes/tsql-md.md)] , выбрав пункт **Сохранить рекомендации** в меню **Действия** .</span><span class="sxs-lookup"><span data-stu-id="79944-126">After the analysis completes, save your recommendation as a [!INCLUDE[tsql](../../includes/tsql-md.md)] script by clicking **Save Recommendations** on the **Actions** menu.</span></span> <span data-ttu-id="79944-127">В диалоговом окне **Сохранить как** перейдите в каталог, где требуется сохранить скрипт рекомендаций, и введите имя файла **MyRecommendations**.</span><span class="sxs-lookup"><span data-stu-id="79944-127">In the **Save As** dialog box, navigate to the directory where you want to save the recommendations script, and type the file name **MyRecommendations**.</span></span>  
  
## <a name="summary"></a><span data-ttu-id="79944-128">Итоги</span><span class="sxs-lookup"><span data-stu-id="79944-128">Summary</span></span>  
 <span data-ttu-id="79944-129">Настройка простой рабочей нагрузки инструкции SELECT для базы данных [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] завершена.</span><span class="sxs-lookup"><span data-stu-id="79944-129">You have completed tuning a simple SELECT statement workload on the [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] database.</span></span> <span data-ttu-id="79944-130">Помощник по настройке ядра СУБД в качестве рабочих нагрузок может также принимать файлы трассировки приложения [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] или таблицы.</span><span class="sxs-lookup"><span data-stu-id="79944-130">The Database Engine Tuning Advisor can also take [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] trace files and tables as tuning workloads.</span></span> <span data-ttu-id="79944-131">В следующей задаче рассматривается, как просмотреть рекомендации настройки, полученные в результате учебной настройки, и что они означают.</span><span class="sxs-lookup"><span data-stu-id="79944-131">The next task shows you how to view and interpret the tuning recommendations that you received as a result of the practice tuning.</span></span>  
  
## <a name="next-task-in-lesson"></a><span data-ttu-id="79944-132">Следующая задача занятия</span><span class="sxs-lookup"><span data-stu-id="79944-132">Next Task in Lesson</span></span>  
 [<span data-ttu-id="79944-133">Просмотр рекомендаций по настройке</span><span class="sxs-lookup"><span data-stu-id="79944-133">Viewing Tuning Recommendations</span></span>](lesson-1-2-viewing-tuning-recommendations.md)  
  
  
