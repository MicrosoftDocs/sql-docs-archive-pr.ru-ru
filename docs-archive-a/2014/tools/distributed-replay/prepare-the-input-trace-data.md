---
title: Подготовка входных данных трассировки | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: tools-other
ms.topic: conceptual
ms.assetid: c14fd3d2-5770-47c2-a851-cc13ddbc9bf5
author: stevestein
ms.author: sstein
ms.openlocfilehash: c13dddcf29f93940fa4eae6b2849dcfb278ae3b6
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87734813"
---
# <a name="prepare-the-input-trace-data"></a><span data-ttu-id="ce962-102">Подготовка входных данных трассировки</span><span class="sxs-lookup"><span data-stu-id="ce962-102">Prepare the Input Trace Data</span></span>
  <span data-ttu-id="ce962-103">Прежде чем начинать распределенное воспроизведение с помощью функции распределенного воспроизведения [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], необходимо подготовить входные данные трассировки, а для этого инициировать стадию предварительной подготовки с помощью средства администрирования распределенного воспроизведения.</span><span class="sxs-lookup"><span data-stu-id="ce962-103">Before you can start a distributed replay with the [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Distributed Replay feature, you must prepare the input trace data by initiating the preprocess stage from the distributed replay administration tool.</span></span> <span data-ttu-id="ce962-104">На стадии предварительной обработки контроллер распределенного воспроизведения обрабатывает данные трассировки и формирует промежуточный файл:</span><span class="sxs-lookup"><span data-stu-id="ce962-104">In the preprocess stage, the distributed replay controller processes the trace data and generates an intermediate file:</span></span>  
  
 <span data-ttu-id="ce962-105">![Стадия предварительной обработки распределенного воспроизведения](../../database-engine/media/preprocess.gif "Стадия предварительной обработки распределенного воспроизведения")</span><span class="sxs-lookup"><span data-stu-id="ce962-105">![Distributed replay preprocess stage](../../database-engine/media/preprocess.gif "Distributed replay preprocess stage")</span></span>  
  
 <span data-ttu-id="ce962-106">Дополнительные сведения о программе распределенного воспроизведения см. в разделе [Распределенное воспроизведение SQL Server](sql-server-distributed-replay.md).</span><span class="sxs-lookup"><span data-stu-id="ce962-106">For more information about the preprocess stage, see [SQL Server Distributed Replay](sql-server-distributed-replay.md).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="ce962-107">Входные данные трассировки должны быть получены в версии [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , совместимой с распределенным воспроизведением.</span><span class="sxs-lookup"><span data-stu-id="ce962-107">The input trace data must be captured in a version of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] that is compatible with Distributed Replay.</span></span> <span data-ttu-id="ce962-108">Кроме того, эти данные должны быть совместимы с целевым сервером, на котором планируется их воспроизведение.</span><span class="sxs-lookup"><span data-stu-id="ce962-108">The input trace data must also be compatible with the target server that you want to replay the trace data against.</span></span> <span data-ttu-id="ce962-109">Дополнительные сведения о требованиях к версии см. в разделе [Distributed Replay Requirements](distributed-replay-requirements.md).</span><span class="sxs-lookup"><span data-stu-id="ce962-109">For more information about version requirements, see [Distributed Replay Requirements](distributed-replay-requirements.md).</span></span>  
  
### <a name="to-prepare-the-input-trace-data"></a><span data-ttu-id="ce962-110">Подготовка входных данных трассировки</span><span class="sxs-lookup"><span data-stu-id="ce962-110">To prepare the input trace data</span></span>  
  
1.  <span data-ttu-id="ce962-111">**(Необязательно) Измените параметры конфигурации предварительной подготовки**. Если нужно изменить параметры конфигурации предварительной подготовки, например указать, следует ли фильтровать системные сеансы или настроить максимальное время простоя, нужно изменить элемент `<PreprocessModifiers>` в файле конфигурации `DReplay.exe.preprocess.config` для предварительной подготовки на основе XML.</span><span class="sxs-lookup"><span data-stu-id="ce962-111">**(Optional) Modify preprocess configuration settings**: If you want to modify the preprocess configuration settings, such as whether to filter system sessions or to configure the maximum idle time, you must modify the `<PreprocessModifiers>` element of the XML-based preprocess configuration file, `DReplay.exe.preprocess.config`.</span></span> <span data-ttu-id="ce962-112">При изменении файла конфигурации предварительной подготовки рекомендуется изменять его копию, а не оригинал.</span><span class="sxs-lookup"><span data-stu-id="ce962-112">If you modify the preprocess configuration file, we recommend that you modify a copy rather than the original.</span></span> <span data-ttu-id="ce962-113">Чтобы изменить параметры, выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="ce962-113">To modify settings, follow these steps:</span></span>  
  
    1.  <span data-ttu-id="ce962-114">Скопируйте файл конфигурации предварительной подготовки по умолчанию, `DReplay.exe.preprocess.config`, и переименуйте копию.</span><span class="sxs-lookup"><span data-stu-id="ce962-114">Make a copy of the default preprocess configuration file, `DReplay.exe.preprocess.config`, and rename the new file.</span></span> <span data-ttu-id="ce962-115">Файл конфигурации предварительной подготовки по умолчанию расположен в папке установки средства администрирования.</span><span class="sxs-lookup"><span data-stu-id="ce962-115">The default preprocess configuration file is located in the administration tool installation folder.</span></span>  
  
    2.  <span data-ttu-id="ce962-116">Измените параметры конфигурации предварительной подготовки в новом файле конфигурации.</span><span class="sxs-lookup"><span data-stu-id="ce962-116">Modify the preprocess configuration settings in the new configuration file.</span></span>  
  
    3.  <span data-ttu-id="ce962-117">При запуске этапа предварительной обработки (следующий шаг) используйте параметр *config_file* параметра **preprocess** , чтобы задать расположение измененного файла конфигурации.</span><span class="sxs-lookup"><span data-stu-id="ce962-117">When initiating the preprocess stage (the next step), use the *config_file* parameter of the **preprocess** option to specify the location of the modified configuration file.</span></span>  
  
     <span data-ttu-id="ce962-118">Дополнительные сведения о файле конфигурации предварительной обработки см. в разделе [Настройка распределенного воспроизведения](configure-distributed-replay.md).</span><span class="sxs-lookup"><span data-stu-id="ce962-118">For more information about the preprocess configuration file, see [Configure Distributed Replay](configure-distributed-replay.md).</span></span>  
  
2.  <span data-ttu-id="ce962-119">**Инициация стадии предварительной обработки.** Для подготовки входных данных трассировки необходимо запустить средство администрирования с параметром **preprocess**.</span><span class="sxs-lookup"><span data-stu-id="ce962-119">**Initiate the preprocess stage**: To prepare the input trace data, you must run the administration tool with the **preprocess** option.</span></span> <span data-ttu-id="ce962-120">Дополнительные сведения см. в разделе [Параметр предварительной обработки (средство администрирования распределенного воспроизведения)](preprocess-option-distributed-replay-administration-tool.md).</span><span class="sxs-lookup"><span data-stu-id="ce962-120">For more information, see [Preprocess Option &#40;Distributed Replay Administration Tool&#41;](preprocess-option-distributed-replay-administration-tool.md).</span></span>  
  
    1.  <span data-ttu-id="ce962-121">Откройте программу командной строки Windows (`CMD.exe`) и перейдите в место установки средства администрирования распределенного воспроизведения (`DReplay.exe`).</span><span class="sxs-lookup"><span data-stu-id="ce962-121">Open the Windows Command Prompt utility (`CMD.exe`), and navigate to the installation location of the Distributed Replay administration tool (`DReplay.exe`).</span></span>  
  
    2.  <span data-ttu-id="ce962-122">(Необязательно.) Используйте параметр *controller* , **-m**, чтобы указать контроллер, если служба контроллера и инструмент администрирования работают на разных компьютерах.</span><span class="sxs-lookup"><span data-stu-id="ce962-122">(Optional) Use the *controller* parameter, **-m**, to specify the controller, if the controller service is running on a computer different from the administration tool.</span></span>  
  
    3.  <span data-ttu-id="ce962-123">Используйте параметр *input_trace_file* , **-i**, чтобы указать расположение и имена входных файлов трассировки.</span><span class="sxs-lookup"><span data-stu-id="ce962-123">Use the *input_trace_file* parameter, **-i**, to specify the location and name of the input trace files.</span></span>  
  
    4.  <span data-ttu-id="ce962-124">Используйте параметр *controller_working_directory* , **-d**, чтобы указать место сохранения промежуточного файла на контроллере.</span><span class="sxs-lookup"><span data-stu-id="ce962-124">Use the *controller_working_directory* parameter, **-d**, to specify where the intermediate file should be saved on the controller.</span></span>  
  
    5.  <span data-ttu-id="ce962-125">Используйте параметр *config_file* , **-c**, чтобы указать расположение файла конфигурации предварительной обработки (необязательно).</span><span class="sxs-lookup"><span data-stu-id="ce962-125">(Optional) Use the *config_file* parameter, **-c**, to specify location of the preprocess configuration file.</span></span> <span data-ttu-id="ce962-126">Этот параметр позволяет указать новый файл конфигурации, если используется измененная копия файла конфигурации предварительной подготовки по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="ce962-126">Use this parameter to point to the new configuration file if you have modified a copy of the default preprocess configuration file.</span></span>  
  
    6.  <span data-ttu-id="ce962-127">Используйте параметр *status_interval* , **-f**, если нужно, чтобы средство администрирования отображало сообщения о состоянии не каждые 30 секунд, а с другим интервалом (необязательно).</span><span class="sxs-lookup"><span data-stu-id="ce962-127">(Optional) Use the *status_interval* parameter, **-f**, to specify if you want the administration tool to display status messages at a frequency different than 30 seconds.</span></span>  
  
     <span data-ttu-id="ce962-128">Например, для запуска этапа предварительной обработки на компьютере, на котором выполняется служба контроллера, с файлом трассировки, расположенным по адресу `c:\trace1.trc`, рабочим каталогом контроллера, расположенным в по адресу `c:\WorkingDir` , и сообщением о состоянии, по умолчанию отображаемым каждые 30 секунд, требуется следующий синтаксис: `dreplay preprocess -i c:\trace1.trc -d c:\WorkingDir`</span><span class="sxs-lookup"><span data-stu-id="ce962-128">For example, initiating the preprocess stage on the same computer as the controller service, for a trace file located at `c:\trace1.trc`, a controller working directory located at `c:\WorkingDir` , and a status message displayed at the default value of 30 seconds, requires the syntax: `dreplay preprocess -i c:\trace1.trc -d c:\WorkingDir`</span></span>  
  
3.  <span data-ttu-id="ce962-129">После завершения предварительной подготовки промежуточный файл сохраняется в рабочем каталоге контроллера.</span><span class="sxs-lookup"><span data-stu-id="ce962-129">After the preprocess stage is complete, the intermediate file is stored in the controller working directory.</span></span> <span data-ttu-id="ce962-130">Для воспроизведения событий необходимо запустить средство администрирования с параметром **replay** .</span><span class="sxs-lookup"><span data-stu-id="ce962-130">To initiate the event replay stage, you must run the administration tool with the **replay** option.</span></span> <span data-ttu-id="ce962-131">Дополнительные сведения см. в разделе [Воспроизведение данных трассировки](replay-trace-data.md).</span><span class="sxs-lookup"><span data-stu-id="ce962-131">For more information, see [Replay Trace Data](replay-trace-data.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="ce962-132">См. также:</span><span class="sxs-lookup"><span data-stu-id="ce962-132">See Also</span></span>  
 <span data-ttu-id="ce962-133">[Распределенное воспроизведение SQL Server](sql-server-distributed-replay.md) </span><span class="sxs-lookup"><span data-stu-id="ce962-133">[SQL Server Distributed Replay](sql-server-distributed-replay.md) </span></span>  
 <span data-ttu-id="ce962-134">[Distributed Replay Requirements](distributed-replay-requirements.md) </span><span class="sxs-lookup"><span data-stu-id="ce962-134">[Distributed Replay Requirements](distributed-replay-requirements.md) </span></span>  
 <span data-ttu-id="ce962-135">[Параметры командной строки средства администрирования (программа распределенного воспроизведения)](administration-tool-command-line-options-distributed-replay-utility.md) </span><span class="sxs-lookup"><span data-stu-id="ce962-135">[Administration Tool Command-line Options &#40;Distributed Replay Utility&#41;](administration-tool-command-line-options-distributed-replay-utility.md) </span></span>  
 [<span data-ttu-id="ce962-136">Настройка распределенного воспроизведения</span><span class="sxs-lookup"><span data-stu-id="ce962-136">Configure Distributed Replay</span></span>](configure-distributed-replay.md)  
  
  
