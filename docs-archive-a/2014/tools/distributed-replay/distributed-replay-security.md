---
title: распределенное воспроизведение безопасность | Документация Майкрософт
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: tools-other
ms.topic: conceptual
ms.assetid: 7e2e586d-947d-4fe2-86c5-f06200ebf139
author: stevestein
ms.author: sstein
ms.openlocfilehash: 7b05c6bbe3998faa46d56684b77b8d2a4dec4466
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87659036"
---
# <a name="distributed-replay-security"></a><span data-ttu-id="3280f-102">Безопасность распределенного воспроизведения</span><span class="sxs-lookup"><span data-stu-id="3280f-102">Distributed Replay Security</span></span>
  <span data-ttu-id="3280f-103">Перед установкой и использованием компонента распределенного воспроизведения [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ознакомьтесь с важной информацией о безопасности, представленной в этой статье.</span><span class="sxs-lookup"><span data-stu-id="3280f-103">Before you install and use the [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Distributed Replay feature, you should review the important security information in this topic.</span></span> <span data-ttu-id="3280f-104">В этом разделе описываются шаги настройки мер безопасности после установки, необходимые перед началом использования распределенного воспроизведения.</span><span class="sxs-lookup"><span data-stu-id="3280f-104">This topic describes the post-installation security configuration steps that are required before you can use Distributed Replay.</span></span> <span data-ttu-id="3280f-105">В этом разделе также описываются важные соображения по защите данных и важные шаги удаления.</span><span class="sxs-lookup"><span data-stu-id="3280f-105">This topic also describes important considerations with regard to data protection and important removal steps.</span></span>  
  
## <a name="user-and-service-accounts"></a><span data-ttu-id="3280f-106">Учетные записи пользователей и служб</span><span class="sxs-lookup"><span data-stu-id="3280f-106">User and Service Accounts</span></span>  
 <span data-ttu-id="3280f-107">В следующей таблице приведены описания учетных записей, применяемых для распределенного воспроизведения.</span><span class="sxs-lookup"><span data-stu-id="3280f-107">The following table describes the accounts that are used for Distributed Replay.</span></span> <span data-ttu-id="3280f-108">После установки распределенного воспроизведения необходимо назначить субъектов безопасности для запуска учетных записей контроллера и службы клиента распределенного воспроизведения.</span><span class="sxs-lookup"><span data-stu-id="3280f-108">After the Distributed Replay installation, you must assign the security principals that the controller and client service accounts will run as.</span></span> <span data-ttu-id="3280f-109">Таким образом, рекомендуется настроить соответствующие учетные записи пользователей домена перед установкой компонентов распределенного воспроизведения.</span><span class="sxs-lookup"><span data-stu-id="3280f-109">Therefore, we recommend that you configure the corresponding domain user accounts before you install the Distributed Replay features.</span></span>  
  
|<span data-ttu-id="3280f-110">Учетная запись пользователя</span><span class="sxs-lookup"><span data-stu-id="3280f-110">User Account</span></span>|<span data-ttu-id="3280f-111">Требования</span><span class="sxs-lookup"><span data-stu-id="3280f-111">Requirements</span></span>|  
|------------------|------------------|  
|[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="3280f-112">Учетная запись службы контроллера распределенного воспроизведения</span><span class="sxs-lookup"><span data-stu-id="3280f-112">Distributed Replay controller service account</span></span>|<span data-ttu-id="3280f-113">Эта учетная запись может быть учетной записью пользователя домена или учетной записью локального пользователя.</span><span class="sxs-lookup"><span data-stu-id="3280f-113">Can be a domain user account or local user account.</span></span> <span data-ttu-id="3280f-114">Если используется учетная запись локального пользователя, средство администрирования, контроллер и клиент должны быть запущены на одном компьютере.</span><span class="sxs-lookup"><span data-stu-id="3280f-114">If you use a local user account, the administration tool, controller, and client must all be running on the same computer.</span></span><br /><br /> <span data-ttu-id="3280f-115">**\*\* Примечание о безопасности. \*\*** Мы рекомендуем не делать эту учетную запись членом локальной группы администраторов Windows.</span><span class="sxs-lookup"><span data-stu-id="3280f-115">**\*\* Security Note \*\*** We recommend that the account is not a member of the local Administrators group in Windows.</span></span>|  
|[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="3280f-116">Учетная запись службы клиента распределенного воспроизведения</span><span class="sxs-lookup"><span data-stu-id="3280f-116">Distributed Replay client service account</span></span>|<span data-ttu-id="3280f-117">Эта учетная запись может быть учетной записью пользователя домена или учетной записью локального пользователя.</span><span class="sxs-lookup"><span data-stu-id="3280f-117">Can be a domain user account or local user account.</span></span> <span data-ttu-id="3280f-118">Для использования учетной записи локального пользователя контроллер, клиент и целевой сервер SQL Server должны быть запущены на одном компьютере.</span><span class="sxs-lookup"><span data-stu-id="3280f-118">If you use a local user account, the controller, client, and target SQL Server must all be running on the same computer.</span></span><br /><br /> <span data-ttu-id="3280f-119">**\*\* Примечание о безопасности. \*\*** Мы рекомендуем не делать эту учетную запись членом локальной группы администраторов Windows.</span><span class="sxs-lookup"><span data-stu-id="3280f-119">**\*\* Security Note \*\*** We recommend that the account is not a member of the local Administrators group in Windows.</span></span>|  
|<span data-ttu-id="3280f-120">Интерактивная учетная запись пользователя, которая используется для запуска средства администрирования распределенного воспроизведения</span><span class="sxs-lookup"><span data-stu-id="3280f-120">Interactive user account that is used to run the Distributed Replay administration tool</span></span>|<span data-ttu-id="3280f-121">Эта учетная запись может быть учетной записью локального пользователя или учетной записью пользователя домена.</span><span class="sxs-lookup"><span data-stu-id="3280f-121">Can be either a local user or a domain user account.</span></span> <span data-ttu-id="3280f-122">Для использования учетной записи локального пользователя средство администрирования и контроллер должны быть запущены на одном компьютере.</span><span class="sxs-lookup"><span data-stu-id="3280f-122">To use a local user account, the administration tool and controller must be running on the same computer.</span></span>|  
  
 <span data-ttu-id="3280f-123">**Важно!** При настройке контроллера распределенного воспроизведения можно указать одну или несколько учетных записей, которые будут использоваться для запуска клиентских служб распределенного воспроизведения.</span><span class="sxs-lookup"><span data-stu-id="3280f-123">**Important**: When you configure Distributed Replay controller, you can specify one or more user accounts that will be used to run the Distributed Replay client services.</span></span> <span data-ttu-id="3280f-124">Далее представлен список поддерживаемых учетных записей.</span><span class="sxs-lookup"><span data-stu-id="3280f-124">The following is the list of supported accounts:</span></span>  
  
-   <span data-ttu-id="3280f-125">Учетная запись пользователя домена</span><span class="sxs-lookup"><span data-stu-id="3280f-125">Domain user account</span></span>  
  
-   <span data-ttu-id="3280f-126">Пользователь, который создал учетную запись локального пользователя</span><span class="sxs-lookup"><span data-stu-id="3280f-126">User created local user account</span></span>  
  
-   <span data-ttu-id="3280f-127">Администратор</span><span class="sxs-lookup"><span data-stu-id="3280f-127">Administrator</span></span>  
  
-   <span data-ttu-id="3280f-128">Виртуальная учетная запись и управляемая учетная запись службы (MSA)</span><span class="sxs-lookup"><span data-stu-id="3280f-128">Virtual account and MSA (Managed Service Account)</span></span>  
  
-   <span data-ttu-id="3280f-129">Сетевые службы, локальные службы и система</span><span class="sxs-lookup"><span data-stu-id="3280f-129">Network Services, Local Services, and System</span></span>  
  
 <span data-ttu-id="3280f-130">Учетные записи групп (локальные или доменные) и другие встроенные учетные записи (например, «Все») не принимаются.</span><span class="sxs-lookup"><span data-stu-id="3280f-130">Group accounts (local or domain) and other built-in accounts (like Everyone) are not accepted.</span></span>  
  
 <span data-ttu-id="3280f-131">Для настройки учетных записей службы или их паролей после установки распределенного воспроизведения вы можете использовать службы Windows.</span><span class="sxs-lookup"><span data-stu-id="3280f-131">To set the service accounts or their passwords after you install Distributed Replay, you can use the Windows Services tool.</span></span> <span data-ttu-id="3280f-132">Чтобы изменить учетные записи службы, связанные со службами контроллера или клиента распределенного воспроизведения, выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="3280f-132">To change the service accounts associated with the Distributed Replay controller or client services, follow these steps:</span></span>  
  
1.  <span data-ttu-id="3280f-133">Для этого выполните одно из следующих действий в зависимости от операционной системы.</span><span class="sxs-lookup"><span data-stu-id="3280f-133">Do either of the following, depending on the operating system:</span></span>  
  
    -   <span data-ttu-id="3280f-134">Нажмите кнопку **Пуск**, введите `services.msc` в поле **поиска** и нажмите клавишу ВВОД.</span><span class="sxs-lookup"><span data-stu-id="3280f-134">Click **Start**, type `services.msc` in the **Search** box, and then press ENTER.</span></span>  
  
    -   <span data-ttu-id="3280f-135">Нажмите кнопку **Пуск**, выберите команду **выполнить**, введите `services.msc` и нажмите клавишу ВВОД.</span><span class="sxs-lookup"><span data-stu-id="3280f-135">Click **Start**, click **Run**, type `services.msc`, and then press ENTER.</span></span>  
  
2.  <span data-ttu-id="3280f-136">В диалоговом окне **Службы** щелкните правой кнопкой мыши службу, которую требуется настроить, и выберите пункт **Свойства**.</span><span class="sxs-lookup"><span data-stu-id="3280f-136">In the **Services** dialog box, right-click the service that you want to configure, and then click **Properties**.</span></span>  
  
3.  <span data-ttu-id="3280f-137">На вкладке **Вход в систему** выберите **Указанная учетная запись**.</span><span class="sxs-lookup"><span data-stu-id="3280f-137">On the **Log On** tab, click **This account**.</span></span>  
  
4.  <span data-ttu-id="3280f-138">Настройте учетную запись пользователя, которую предстоит использовать.</span><span class="sxs-lookup"><span data-stu-id="3280f-138">Configure the user account that you want to use.</span></span>  
  
## <a name="file-and-folder-permissions"></a><span data-ttu-id="3280f-139">Разрешения для папок и файлов</span><span class="sxs-lookup"><span data-stu-id="3280f-139">File and Folder Permissions</span></span>  
 <span data-ttu-id="3280f-140">После того как были заданы учетные записи службы, необходимо предоставить этим учетным записям службы необходимые разрешения для файла и папок.</span><span class="sxs-lookup"><span data-stu-id="3280f-140">After the service accounts have been specified, you must grant the necessary file and folder permissions to those service accounts.</span></span> <span data-ttu-id="3280f-141">Настройте разрешения для файлов и папок в соответствии со следующей таблицей.</span><span class="sxs-lookup"><span data-stu-id="3280f-141">Configure file and folder permissions according to the following table:</span></span>  
  
|<span data-ttu-id="3280f-142">Учетная запись</span><span class="sxs-lookup"><span data-stu-id="3280f-142">Account</span></span>|<span data-ttu-id="3280f-143">Разрешения папки</span><span class="sxs-lookup"><span data-stu-id="3280f-143">Folder Permissions</span></span>|  
|-------------|------------------------|  
|[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="3280f-144">Учетная запись службы контроллера распределенного воспроизведения</span><span class="sxs-lookup"><span data-stu-id="3280f-144">Distributed Replay controller service account</span></span>|<span data-ttu-id="3280f-145">`<Controller_Installation_Path>\DReplayController` (чтение, запись и удаление)</span><span class="sxs-lookup"><span data-stu-id="3280f-145">`<Controller_Installation_Path>\DReplayController` (Read, Write, Delete)</span></span><br /><br /> <span data-ttu-id="3280f-146">`DReplayServer.xml` файл (чтение, запись)</span><span class="sxs-lookup"><span data-stu-id="3280f-146">`DReplayServer.xml` file (Read, Write)</span></span>|  
|[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="3280f-147">Учетная запись службы клиента распределенного воспроизведения</span><span class="sxs-lookup"><span data-stu-id="3280f-147">Distributed Replay client service account</span></span>|<span data-ttu-id="3280f-148">`<Client_Installation_Path>\DReplayClient` (чтение, запись и удаление)</span><span class="sxs-lookup"><span data-stu-id="3280f-148">`<Client_Installation_Path>\DReplayClient` (Read, Write, Delete)</span></span><br /><br /> <span data-ttu-id="3280f-149">`DReplayClient.xml` файл (чтение, запись)</span><span class="sxs-lookup"><span data-stu-id="3280f-149">`DReplayClient.xml` file (Read, Write)</span></span><br /><br /> <span data-ttu-id="3280f-150">Рабочие и результирующие каталоги, как указано в файле конфигурации клиента элементами `WorkingDirectory` и `ResultDirectory` соответственно.</span><span class="sxs-lookup"><span data-stu-id="3280f-150">The working and result directories, as specified in the client configuration file by the `WorkingDirectory` and `ResultDirectory` elements, respectively.</span></span> <span data-ttu-id="3280f-151">(Чтение и запись)</span><span class="sxs-lookup"><span data-stu-id="3280f-151">(Read, Write)</span></span>|  
  
## <a name="dcom-permissions"></a><span data-ttu-id="3280f-152">Разрешения DCOM</span><span class="sxs-lookup"><span data-stu-id="3280f-152">DCOM Permissions</span></span>  
 <span data-ttu-id="3280f-153">DCOM используется для связи через удаленный вызов процедур (RPC) между контроллером и средством администрирования и между контроллером и всеми клиентами.</span><span class="sxs-lookup"><span data-stu-id="3280f-153">DCOM is used for remote procedure call (RPC) communication between the controller and the administration tool, and between the controller and all clients.</span></span> <span data-ttu-id="3280f-154">После установки компонентов распределенного воспроизведения необходимо настроить разрешения DCOM на контроллере для компьютера и конкретных приложений на контроллере.</span><span class="sxs-lookup"><span data-stu-id="3280f-154">You must configure computer-wide and application-specific DCOM permissions on the controller after the Distributed Replay features have been installed.</span></span>  
  
 <span data-ttu-id="3280f-155">Чтобы настроить разрешения DCOM на контроллере, выполните следующие шаги.</span><span class="sxs-lookup"><span data-stu-id="3280f-155">To configure the controller DCOM permissions, follow these steps:</span></span>  
  
1.  <span data-ttu-id="3280f-156">**Откройте оснастку "Службы компонентов", выполнив файл dcomcnfg.exe**: Это средство используется для настройки разрешений DCOM.</span><span class="sxs-lookup"><span data-stu-id="3280f-156">**Open dcomcnfg.exe, the Component Services snap-in**: This is the tool that is used to configure DCOM permissions.</span></span>  
  
    1.  <span data-ttu-id="3280f-157">На компьютере контроллера нажмите кнопку **Пуск**.</span><span class="sxs-lookup"><span data-stu-id="3280f-157">On the controller computer, click **Start**.</span></span>  
  
    2.  <span data-ttu-id="3280f-158">Введите `dcomcnfg.exe` в поле **поиска** .</span><span class="sxs-lookup"><span data-stu-id="3280f-158">Type `dcomcnfg.exe` in the **Search** box.</span></span>  
  
    3.  <span data-ttu-id="3280f-159">Нажмите клавишу ВВОД.</span><span class="sxs-lookup"><span data-stu-id="3280f-159">Press ENTER.</span></span>  
  
2.  <span data-ttu-id="3280f-160">**Настройте разрешения DCOM для всего компьютера**. В контексте всего компьютера предоставьте соответствующие разрешения DCOM для каждой учетной записи, перечисленной в следующей таблице.</span><span class="sxs-lookup"><span data-stu-id="3280f-160">**Configure computer-wide DCOM permissions**: Grant the corresponding computer-wide DCOM permissions for each account listed in the following table.</span></span> <span data-ttu-id="3280f-161">Дополнительные сведения о том, как настроить разрешения в контексте компьютера, см. в статье [Контрольный список: Управление приложениями DCOM](https://go.microsoft.com/fwlink/?LinkId=185842).</span><span class="sxs-lookup"><span data-stu-id="3280f-161">For more information about how to set computer-wide permissions, see [Checklist: Manage DCOM Applications](https://go.microsoft.com/fwlink/?LinkId=185842).</span></span>  
  
3.  <span data-ttu-id="3280f-162">**Настройте разрешения DCOM для конкретного приложения.** В контексте конкретного приложения предоставьте соответствующие разрешения DCOM каждой учетной записи, перечисленной в следующей таблице.</span><span class="sxs-lookup"><span data-stu-id="3280f-162">**Configure application-specific DCOM permissions**: Grant the corresponding application-specific DCOM permissions for each account listed in the following table.</span></span> <span data-ttu-id="3280f-163">Имя приложения DCOM для контроллера службы — **DReplayController**.</span><span class="sxs-lookup"><span data-stu-id="3280f-163">The DCOM application name for the controller service is **DReplayController**.</span></span> <span data-ttu-id="3280f-164">Дополнительные сведения о том, как настроить разрешения для конкретного приложения, см. в статье [Контрольный список: Управление приложениями DCOM](https://go.microsoft.com/fwlink/?LinkId=185842).</span><span class="sxs-lookup"><span data-stu-id="3280f-164">For more information about how to set application-specific permissions, see [Checklist: Manage DCOM Applications](https://go.microsoft.com/fwlink/?LinkId=185842).</span></span>  
  
 <span data-ttu-id="3280f-165">В следующей таблице описаны разрешения DCOM, необходимые для интерактивной учетной записи пользователя средства администрирования и учетных записей службы клиента.</span><span class="sxs-lookup"><span data-stu-id="3280f-165">The following table describes which DCOM permissions are required for the administration tool interactive user account and the client service accounts:</span></span>  
  
|<span data-ttu-id="3280f-166">Компонент</span><span class="sxs-lookup"><span data-stu-id="3280f-166">Feature</span></span>|<span data-ttu-id="3280f-167">Учетная запись</span><span class="sxs-lookup"><span data-stu-id="3280f-167">Account</span></span>|<span data-ttu-id="3280f-168">Требуемые разрешения DCOM на контроллере</span><span class="sxs-lookup"><span data-stu-id="3280f-168">Required DCOM Permissions on Controller</span></span>|  
|-------------|-------------|---------------------------------------------|  
|<span data-ttu-id="3280f-169">Средство администрирования распределенного воспроизведения</span><span class="sxs-lookup"><span data-stu-id="3280f-169">Distributed Replay administration tool</span></span>|<span data-ttu-id="3280f-170">Интерактивная учетная запись пользователя</span><span class="sxs-lookup"><span data-stu-id="3280f-170">The interactive user account</span></span>|<span data-ttu-id="3280f-171">Локальный доступ</span><span class="sxs-lookup"><span data-stu-id="3280f-171">Local Access</span></span><br /><br /> <span data-ttu-id="3280f-172">Удаленный доступ</span><span class="sxs-lookup"><span data-stu-id="3280f-172">Remote Access</span></span><br /><br /> <span data-ttu-id="3280f-173">Локальный запуск</span><span class="sxs-lookup"><span data-stu-id="3280f-173">Local Launch</span></span><br /><br /> <span data-ttu-id="3280f-174">Удаленный запуск</span><span class="sxs-lookup"><span data-stu-id="3280f-174">Remote Launch</span></span><br /><br /> <span data-ttu-id="3280f-175">Локальная активация</span><span class="sxs-lookup"><span data-stu-id="3280f-175">Local Activation</span></span><br /><br /> <span data-ttu-id="3280f-176">Удаленная активация</span><span class="sxs-lookup"><span data-stu-id="3280f-176">Remote Activation</span></span>|  
|<span data-ttu-id="3280f-177">Клиент распределенного воспроизведения</span><span class="sxs-lookup"><span data-stu-id="3280f-177">Distributed Replay client</span></span>|[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="3280f-178">Учетная запись службы клиента распределенного воспроизведения</span><span class="sxs-lookup"><span data-stu-id="3280f-178">Distributed Replay client service account</span></span>|<span data-ttu-id="3280f-179">Локальный доступ</span><span class="sxs-lookup"><span data-stu-id="3280f-179">Local Access</span></span><br /><br /> <span data-ttu-id="3280f-180">Удаленный доступ</span><span class="sxs-lookup"><span data-stu-id="3280f-180">Remote Access</span></span><br /><br /> <span data-ttu-id="3280f-181">Локальный запуск</span><span class="sxs-lookup"><span data-stu-id="3280f-181">Local Launch</span></span><br /><br /> <span data-ttu-id="3280f-182">Удаленный запуск</span><span class="sxs-lookup"><span data-stu-id="3280f-182">Remote Launch</span></span><br /><br /> <span data-ttu-id="3280f-183">Локальная активация</span><span class="sxs-lookup"><span data-stu-id="3280f-183">Local Activation</span></span><br /><br /> <span data-ttu-id="3280f-184">Удаленная активация</span><span class="sxs-lookup"><span data-stu-id="3280f-184">Remote Activation</span></span>|  
  
> [!IMPORTANT]  
>  <span data-ttu-id="3280f-185">Для защиты от вредоносных запросов или атак типа «отказ в обслуживании» проверьте, что используется только доверенная учетная запись пользователя для учетной записи службы клиента.</span><span class="sxs-lookup"><span data-stu-id="3280f-185">To help protect against malicious queries or denial of service attacks, make sure that you only use a trusted user account for the client service account.</span></span> <span data-ttu-id="3280f-186">Эта учетная запись будет иметь возможность подключения и воспроизведения рабочей нагрузки на целевом экземпляре [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="3280f-186">This account will be able to connect and replay workloads against the target instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>  
  
## <a name="sql-server-permissions"></a><span data-ttu-id="3280f-187">Разрешения SQL Server</span><span class="sxs-lookup"><span data-stu-id="3280f-187">SQL Server Permissions</span></span>  
 <span data-ttu-id="3280f-188">Учетные записи службы клиента распределенного воспроизведения [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] используются для подключения к целевому экземпляру рабочей нагрузки [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="3280f-188">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Distributed Replay client service accounts are used to connect to the workload's target instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="3280f-189">Для этих соединений поддерживается только режим проверки подлинности Windows.</span><span class="sxs-lookup"><span data-stu-id="3280f-189">Only Windows Authentication mode is supported for these connections.</span></span>  
  
 <span data-ttu-id="3280f-190">После установки службы клиента распределенного воспроизведения [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] на нескольких компьютерах субъекту безопасности, используемому для этих учетных записей службы, необходимо предоставить роль сервера sysadmin в экземпляре [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , в котором предстоит воспроизвести рабочую нагрузку трассировки.</span><span class="sxs-lookup"><span data-stu-id="3280f-190">After you install the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Distributed Replay client service on a set of computers, the security principal used for those service accounts must be granted the sysadmin server role on the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] that you intend to replay the trace workload against.</span></span> <span data-ttu-id="3280f-191">Этот шаг не выполняется автоматически во время установки распределенного воспроизведения.</span><span class="sxs-lookup"><span data-stu-id="3280f-191">This step is not performed automatically during Distributed Replay Setup.</span></span>  
  
## <a name="data-protection"></a><span data-ttu-id="3280f-192">Защита данных</span><span class="sxs-lookup"><span data-stu-id="3280f-192">Data Protection</span></span>  
 <span data-ttu-id="3280f-193">В среде распределенного воспроизведения следующим учетным записям пользователя предоставляется полный доступ к экземпляру целевого сервера [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], входным данным трассировки и файлам результатов трассировки:</span><span class="sxs-lookup"><span data-stu-id="3280f-193">In the Distributed Replay environment, the following user accounts are granted full access to the target server instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], the input trace data and result trace files:</span></span>  
  
-   <span data-ttu-id="3280f-194">Интерактивная учетная запись пользователя, которая используется для запуска средства администрирования.</span><span class="sxs-lookup"><span data-stu-id="3280f-194">The interactive user account that is used to run the administration tool.</span></span>  
  
-   <span data-ttu-id="3280f-195">Учетная запись службы контроллера.</span><span class="sxs-lookup"><span data-stu-id="3280f-195">The controller service account.</span></span>  
  
-   <span data-ttu-id="3280f-196">Учетная запись службы клиента.</span><span class="sxs-lookup"><span data-stu-id="3280f-196">The client service account.</span></span>  
  
-   <span data-ttu-id="3280f-197">Члены локальной группы администраторов на контроллере.</span><span class="sxs-lookup"><span data-stu-id="3280f-197">Members of the local Administrators group on the controller.</span></span>  
  
-   <span data-ttu-id="3280f-198">Члены локальной группы администраторов на клиентах.</span><span class="sxs-lookup"><span data-stu-id="3280f-198">Members of the local Administrators group on the clients.</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="3280f-199">Эти учетные записи имеют полный доступ к любой личной информации, идентифицирующей конкретного пользователя (PII), или конфиденциальным сведениям, содержащимся в файлах данных трассировки, промежуточных данных, данных диспетчеризации или данных [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , использованных распределенным воспроизведением.</span><span class="sxs-lookup"><span data-stu-id="3280f-199">These accounts have full access to any personally identifiable information (PII) or sensitive information that is contained in the trace, intermediate, dispatch, or [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] data files that were used by Distributed Replay.</span></span>  
  
 <span data-ttu-id="3280f-200">Рекомендуется применить следующие меры безопасности.</span><span class="sxs-lookup"><span data-stu-id="3280f-200">We recommend that you take the following security precautions:</span></span>  
  
-   <span data-ttu-id="3280f-201">Сохраните входные данные трассировки, выходные результаты трассировки и файлы базы данных в местонахождении с файловой системой NTFS и примените соответствующие списки управления доступом (ACL).</span><span class="sxs-lookup"><span data-stu-id="3280f-201">Store the input trace data, output trace results, and database files in a location that uses the NTFS file system (NTFS), and apply the appropriate access control lists (ACLs).</span></span> <span data-ttu-id="3280f-202">При необходимости зашифруйте данные, сохраненные на компьютере [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="3280f-202">If it is needed, encrypt the data that is stored on the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] computer.</span></span> <span data-ttu-id="3280f-203">Учтите, что списки ACL не применяются к файлам трассировки и не происходит маскирования или запутывания данных.</span><span class="sxs-lookup"><span data-stu-id="3280f-203">Be aware that ACLs are not applied to the trace files and there is no data masking or obfuscation.</span></span> <span data-ttu-id="3280f-204">Эти файлы следует удалить немедленно после использования.</span><span class="sxs-lookup"><span data-stu-id="3280f-204">You should delete these files quickly after use.</span></span>  
  
-   <span data-ttu-id="3280f-205">Примените соответствующие списки ACL и политики сохранения ко всем промежуточным файлам и файлам сообщений, которые создаются при распределенном воспроизведении.</span><span class="sxs-lookup"><span data-stu-id="3280f-205">Apply the appropriate ACLs and retention policy to all intermediate and dispatch files that are generated by Distributed Replay.</span></span>  
  
-   <span data-ttu-id="3280f-206">Используйте протокол SSL для защиты сетевого транспорта.</span><span class="sxs-lookup"><span data-stu-id="3280f-206">Use Secure Sockets Layer (SSL) to help secure the network transport.</span></span>  
  
## <a name="important-removal-steps"></a><span data-ttu-id="3280f-207">Важные шаги удаления</span><span class="sxs-lookup"><span data-stu-id="3280f-207">Important Removal Steps</span></span>  
 <span data-ttu-id="3280f-208">Рекомендуется использовать распределенное воспроизведение только в тестовой среде.</span><span class="sxs-lookup"><span data-stu-id="3280f-208">We recommend that you only use Distributed Replay in a test environment.</span></span> <span data-ttu-id="3280f-209">После завершения тестирования и перед предоставлением этих компьютеров для выполнения другого задания обязательно выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="3280f-209">After you have completed testing, and before you provision those computers for a different task, make sure that you do the following:</span></span>  
  
-   <span data-ttu-id="3280f-210">Удалите компоненты распределенного воспроизведения и удалите соответствующие файлы конфигурации из контроллера и всех клиентов.</span><span class="sxs-lookup"><span data-stu-id="3280f-210">Uninstall the Distributed Replay features and remove the related configuration files from the controller and all clients.</span></span>  
  
-   <span data-ttu-id="3280f-211">Удалите все файлы трассировки, промежуточные, сообщений и базы данных [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , которые использовались в ходе тестирования.</span><span class="sxs-lookup"><span data-stu-id="3280f-211">Delete any trace, intermediate, dispatch, and [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] database files that were used for testing.</span></span> <span data-ttu-id="3280f-212">Промежуточные и переданные файлы хранятся в рабочем каталоге на контроллере и клиенте соответственно.</span><span class="sxs-lookup"><span data-stu-id="3280f-212">The intermediate and dispatch files are stored in the working directory on the controller and client, respectively.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="3280f-213">См. также:</span><span class="sxs-lookup"><span data-stu-id="3280f-213">See Also</span></span>  
 <span data-ttu-id="3280f-214">[Распределенное воспроизведение SQL Server](sql-server-distributed-replay.md) </span><span class="sxs-lookup"><span data-stu-id="3280f-214">[SQL Server Distributed Replay](sql-server-distributed-replay.md) </span></span>  
 [<span data-ttu-id="3280f-215">Установка распределенного воспроизведения</span><span class="sxs-lookup"><span data-stu-id="3280f-215">Install Distributed Replay</span></span>](install-distributed-replay-overview.md)  
  
  
