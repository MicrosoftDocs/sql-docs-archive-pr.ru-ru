---
title: SQL Server распределенное воспроизведение | Документация Майкрософт
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: tools-other
ms.topic: conceptual
helpviewer_keywords:
- Distributed Replay
- SQL Server Distributed Replay
ms.assetid: 58ef7016-b105-42c2-90a0-364f411849a4
author: stevestein
ms.author: sstein
ms.openlocfilehash: b832cb8a8d8a38815b13b82a7af8eefc2fb81427
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87727689"
---
# <a name="sql-server-distributed-replay"></a><span data-ttu-id="65c64-102">Распределенное воспроизведение SQL Server</span><span class="sxs-lookup"><span data-stu-id="65c64-102">SQL Server Distributed Replay</span></span>
  <span data-ttu-id="65c64-103">Функция распределенного воспроизведения [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] позволяет оценить влияние будущих обновлений [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="65c64-103">The [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Distributed Replay feature helps you assess the impact of future [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] upgrades.</span></span> <span data-ttu-id="65c64-104">Ее также можно использовать для оценки влияния обновления аппаратной части и операционной системы, а также для настройки [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="65c64-104">You can also use it to help assess the impact of hardware and operating system upgrades, and [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] tuning.</span></span>

## <a name="benefits-of-distributed-replay"></a><span data-ttu-id="65c64-105">Преимущества распределенного воспроизведения</span><span class="sxs-lookup"><span data-stu-id="65c64-105">Benefits of Distributed Replay</span></span>
 <span data-ttu-id="65c64-106">Как и приложение [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)], распределенное воспроизведение можно использовать для воспроизведения записанной трассировки в обновленной тестовой среде.</span><span class="sxs-lookup"><span data-stu-id="65c64-106">Similar to [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)], you can use Distributed Replay to replay a captured trace against an upgraded test environment.</span></span> <span data-ttu-id="65c64-107">В отличие от приложения [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)], распределенное воспроизведение не ограничено воспроизведением рабочих нагрузок с одного компьютера.</span><span class="sxs-lookup"><span data-stu-id="65c64-107">Unlike [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)], Distributed Replay is not limited to replaying the workload from a single computer.</span></span>

 <span data-ttu-id="65c64-108">Распределенное воспроизведение является лучше масштабируемым решением, чем [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)].</span><span class="sxs-lookup"><span data-stu-id="65c64-108">Distributed Replay offers a more scalable solution than [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)].</span></span> <span data-ttu-id="65c64-109">Распределенное воспроизведение используется для воспроизведения рабочих нагрузок со многих компьютеров и лучше моделирует важные реальные рабочие нагрузки.</span><span class="sxs-lookup"><span data-stu-id="65c64-109">With Distributed Replay, you can replay a workload from multiple computers and better simulate a mission-critical workload.</span></span>

 <span data-ttu-id="65c64-110">Функция распределенного воспроизведения [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] позволяет использовать несколько компьютеров для воспроизведения данных трассировки и моделирования критически важной рабочей нагрузки.</span><span class="sxs-lookup"><span data-stu-id="65c64-110">The [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Distributed Replay feature can use multiple computers to replay trace data and simulate a mission-critical workload.</span></span> <span data-ttu-id="65c64-111">Программу распределенного воспроизведения можно использовать для тестирования совместимости приложений, производительности и планирования загрузки.</span><span class="sxs-lookup"><span data-stu-id="65c64-111">Use Distributed Replay for application compatibility testing, performance testing, or capacity planning.</span></span>

## <a name="when-to-use-distributed-replay"></a><span data-ttu-id="65c64-112">Применение распределенного воспроизведения</span><span class="sxs-lookup"><span data-stu-id="65c64-112">When to Use Distributed Replay</span></span>
 [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)] <span data-ttu-id="65c64-113">и распределенного воспроизведения частично совпадают.</span><span class="sxs-lookup"><span data-stu-id="65c64-113">and Distributed Replay provide some overlap in functionality.</span></span>

 <span data-ttu-id="65c64-114">С помощью приложения [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)] можно воспроизводить записанную трассировку в обновленной тестовой среде.</span><span class="sxs-lookup"><span data-stu-id="65c64-114">You may use [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)] to replay a captured trace against an upgraded test environment.</span></span> <span data-ttu-id="65c64-115">Кроме того, результаты воспроизведения можно анализировать с целью поиска потенциальных функциональных несовместимостей и проблем производительности.</span><span class="sxs-lookup"><span data-stu-id="65c64-115">You can also analyze the replay results to look for potential functional and performance incompatibilities.</span></span> <span data-ttu-id="65c64-116">Однако приложение [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)] позволяет воспроизводить рабочую нагрузку только с одного компьютера.</span><span class="sxs-lookup"><span data-stu-id="65c64-116">However, [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)] can only replay a workload from a single computer.</span></span> <span data-ttu-id="65c64-117">При воспроизведении работы загруженного приложения OLTP с большим числом активных параллельных соединений или пропускной способностью на сеть приложению [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)] может не хватить ресурсов.</span><span class="sxs-lookup"><span data-stu-id="65c64-117">When replaying an intensive OLTP application that has many active concurrent connections or high throughput, [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)] can become a resource bottleneck.</span></span>

 <span data-ttu-id="65c64-118">Распределенное воспроизведение является лучше масштабируемым решением, чем [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)].</span><span class="sxs-lookup"><span data-stu-id="65c64-118">Distributed Replay offers a more scalable solution than [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)].</span></span> <span data-ttu-id="65c64-119">Распределенное воспроизведение используется для воспроизведения рабочих нагрузок с нескольких компьютеров и лучше моделирует важные реальные рабочие нагрузки.</span><span class="sxs-lookup"><span data-stu-id="65c64-119">Use Distributed Replay to replay a workload from multiple computers and better simulate a mission-critical workload.</span></span>

 <span data-ttu-id="65c64-120">В следующей таблице описывается, когда нужно использовать каждое средство.</span><span class="sxs-lookup"><span data-stu-id="65c64-120">The following table describes when to use each tool.</span></span>

|<span data-ttu-id="65c64-121">Инструмент</span><span class="sxs-lookup"><span data-stu-id="65c64-121">Tool</span></span>|<span data-ttu-id="65c64-122">Применение</span><span class="sxs-lookup"><span data-stu-id="65c64-122">Use When...</span></span>|
|----------|---------------|
|[!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)]|<span data-ttu-id="65c64-123">Нужно использовать обычный механизм воспроизведения на одном компьютере.</span><span class="sxs-lookup"><span data-stu-id="65c64-123">You want to use the conventional replay mechanism on a single computer.</span></span> <span data-ttu-id="65c64-124">В частности, если необходимы возможности построчной отладки, такие как команды **По шагам**, **Выполнить до текущей позиции**и **Точка останова** .</span><span class="sxs-lookup"><span data-stu-id="65c64-124">In particular, you need line-by-line debugging capabilities, such as the **Step**, **Run to Cursor**, and **Toggle Breakpoint** commands.</span></span><br /><br /> <span data-ttu-id="65c64-125">Необходимо воспроизвести трассировку служб [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="65c64-125">You want to replay an [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] trace.</span></span>|
|<span data-ttu-id="65c64-126">Распределенное воспроизведение</span><span class="sxs-lookup"><span data-stu-id="65c64-126">Distributed Replay</span></span>|<span data-ttu-id="65c64-127">Необходимо оценить совместимость приложений.</span><span class="sxs-lookup"><span data-stu-id="65c64-127">You want to evaluate application compatibility.</span></span> <span data-ttu-id="65c64-128">Например, нужно протестировать варианты обновления [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] и операционной системы, модернизацию оборудования или настройку индекса.</span><span class="sxs-lookup"><span data-stu-id="65c64-128">For example, you want to test [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] and operating system upgrade scenarios, hardware upgrades, or index tuning.</span></span><br /><br /> <span data-ttu-id="65c64-129">Уровень параллелизма в записанной трассировке настолько высок, что один клиент воспроизведения не сможет ее смоделировать.</span><span class="sxs-lookup"><span data-stu-id="65c64-129">The concurrency in the captured trace is so high that a single replay client cannot sufficiently simulate it.</span></span>|

## <a name="distributed-replay-concepts"></a><span data-ttu-id="65c64-130">Основные понятия распределенного воспроизведения</span><span class="sxs-lookup"><span data-stu-id="65c64-130">Distributed Replay Concepts</span></span>
 <span data-ttu-id="65c64-131">Среда распределенного воспроизведения включает следующие компоненты.</span><span class="sxs-lookup"><span data-stu-id="65c64-131">The following components make up the Distributed Replay environment:</span></span>

-   <span data-ttu-id="65c64-132">**Средство администрирования распределенное воспроизведение**: консольное приложение, `DReplay.exe` используемое для взаимодействия с контроллером распределенного воспроизведения.</span><span class="sxs-lookup"><span data-stu-id="65c64-132">**Distributed Replay administration tool**: A console application, `DReplay.exe`, used to communicate with the distributed replay controller.</span></span> <span data-ttu-id="65c64-133">Используйте средство администрирования для управления распределенным воспроизведением.</span><span class="sxs-lookup"><span data-stu-id="65c64-133">Use the administration tool to control the distributed replay.</span></span>

-   <span data-ttu-id="65c64-134">**Контроллер распределенного воспроизведения**. Компьютер, на котором выполняется служба Windows "Контроллер распределенного воспроизведения [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]".</span><span class="sxs-lookup"><span data-stu-id="65c64-134">**Distributed Replay controller**: A computer running the Windows service named [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Distributed Replay controller.</span></span> <span data-ttu-id="65c64-135">Контроллер распределенного воспроизведения управляет согласованными действиями клиентов распределенного воспроизведения.</span><span class="sxs-lookup"><span data-stu-id="65c64-135">The Distributed Replay controller orchestrates the actions of the distributed replay clients.</span></span> <span data-ttu-id="65c64-136">В каждой среде распределенного воспроизведения можно установить только один экземпляр контроллера.</span><span class="sxs-lookup"><span data-stu-id="65c64-136">There can only be one controller instance in each Distributed Replay environment.</span></span>

-   <span data-ttu-id="65c64-137">**Клиенты распределенного воспроизведения.** Один или несколько компьютеров (физических или виртуальных), на которых запущена служба Windows "Клиент распределенного воспроизведения [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]".</span><span class="sxs-lookup"><span data-stu-id="65c64-137">**Distributed Replay clients**: One or more computers (physical or virtual) running the Windows service named [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Distributed Replay client.</span></span> <span data-ttu-id="65c64-138">Клиенты распределенного воспроизведения работают совместно для имитации рабочей нагрузки на экземпляре [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="65c64-138">The Distributed Replay clients work together to simulate workloads against an instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="65c64-139">В каждой среде распределенного воспроизведения можно установить один или несколько клиентов.</span><span class="sxs-lookup"><span data-stu-id="65c64-139">There can be one or more clients in each Distributed Replay environment.</span></span>

-   <span data-ttu-id="65c64-140">**Целевой сервер.** Экземпляр [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], который клиенты распределенного воспроизведения могут использовать для воспроизведения данных трассировки.</span><span class="sxs-lookup"><span data-stu-id="65c64-140">**Target server**: An instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] that the Distributed Replay clients can use to replay trace data.</span></span> <span data-ttu-id="65c64-141">Рекомендуется размещать целевой сервер в среде тестирования.</span><span class="sxs-lookup"><span data-stu-id="65c64-141">We recommend that the target server be located in a test environment.</span></span>

 <span data-ttu-id="65c64-142">Средство администрирования, контроллер и клиент распределенного воспроизведения могут быть установлены на одном компьютере или на разных компьютерах.</span><span class="sxs-lookup"><span data-stu-id="65c64-142">The Distributed Replay administration tool, controller, and client can be installed on different computers or the same computer.</span></span> <span data-ttu-id="65c64-143">На одном компьютере может выполняться только один экземпляр контроллера распределенного воспроизведения или службы клиента.</span><span class="sxs-lookup"><span data-stu-id="65c64-143">There can be only one instance of the Distributed Replay controller or client service that is running on the same computer.</span></span>

 <span data-ttu-id="65c64-144">На следующем рисунке показана физическая архитектура распределенного воспроизведения в [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="65c64-144">The following figure shows the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Distributed Replay physical architecture:</span></span>

 <span data-ttu-id="65c64-145">![Архитектура распределенного воспроизведения](../../database-engine/media/distributedreplayarch.gif "Архитектура распределенного воспроизведения")</span><span class="sxs-lookup"><span data-stu-id="65c64-145">![Distributed Replay Architecture](../../database-engine/media/distributedreplayarch.gif "Distributed Replay Architecture")</span></span>

## <a name="distributed-replay-tasks"></a><span data-ttu-id="65c64-146">Задачи распределенного воспроизведения</span><span class="sxs-lookup"><span data-stu-id="65c64-146">Distributed Replay Tasks</span></span>

|<span data-ttu-id="65c64-147">Описание задачи</span><span class="sxs-lookup"><span data-stu-id="65c64-147">Task Description</span></span>|<span data-ttu-id="65c64-148">Раздел</span><span class="sxs-lookup"><span data-stu-id="65c64-148">Topic</span></span>|
|----------------------|-----------|
|<span data-ttu-id="65c64-149">Настройка распределенного воспроизведения.</span><span class="sxs-lookup"><span data-stu-id="65c64-149">Describes how to configure Distributed Replay.</span></span>|[<span data-ttu-id="65c64-150">Настройка распределенного воспроизведения</span><span class="sxs-lookup"><span data-stu-id="65c64-150">Configure Distributed Replay</span></span>](configure-distributed-replay.md)|
|<span data-ttu-id="65c64-151">Описывает подготовку входных данных трассировки.</span><span class="sxs-lookup"><span data-stu-id="65c64-151">Describes how to prepare the input trace data.</span></span>|[<span data-ttu-id="65c64-152">Подготовка входных данных трассировки</span><span class="sxs-lookup"><span data-stu-id="65c64-152">Prepare the Input Trace Data</span></span>](prepare-the-input-trace-data.md)|
|<span data-ttu-id="65c64-153">Описывает процесс воспроизведения данных трассировки.</span><span class="sxs-lookup"><span data-stu-id="65c64-153">Describes how to replay trace data.</span></span>|[<span data-ttu-id="65c64-154">Воспроизведение данные трассировки</span><span class="sxs-lookup"><span data-stu-id="65c64-154">Replay Trace Data</span></span>](replay-trace-data.md)|
|<span data-ttu-id="65c64-155">Описывает просмотр результатов данных трассировки распределенного воспроизведения.</span><span class="sxs-lookup"><span data-stu-id="65c64-155">Describes how to review the Distributed Replay trace data results.</span></span>|[<span data-ttu-id="65c64-156">Просмотр результатов воспроизведения</span><span class="sxs-lookup"><span data-stu-id="65c64-156">Review the Replay Results</span></span>](review-the-replay-results.md)|
|<span data-ttu-id="65c64-157">Описывает, как при помощи средства администрирования можно инициировать операции на контроллере, наблюдать за ними и отменять их.</span><span class="sxs-lookup"><span data-stu-id="65c64-157">Describes how to use the administration tool to initiate, monitor, and cancel operations on the controller.</span></span>|[<span data-ttu-id="65c64-158">Параметры командной строки средства администрирования (программа распределенного воспроизведения)</span><span class="sxs-lookup"><span data-stu-id="65c64-158">Administration Tool Command-line Options &#40;Distributed Replay Utility&#41;</span></span>](administration-tool-command-line-options-distributed-replay-utility.md)|

## <a name="see-also"></a><span data-ttu-id="65c64-159">См. также:</span><span class="sxs-lookup"><span data-stu-id="65c64-159">See Also</span></span>
 <span data-ttu-id="65c64-160">[SQL Server распределенное воспроизведение форуме](https://social.technet.microsoft.com/Forums/sl/sqldru/) [Использование распределенное воспроизведение для нагрузочного тестирования SQL Server. часть 2](https://docs.microsoft.com/archive/blogs/msdn/mspfe/using-distributed-replay-to-load-test-your-sql-serverpart-2) . [Использование распределенное воспроизведение для нагрузочного тестирования SQL Server. часть 1](https://docs.microsoft.com/archive/blogs/batuhanyildiz/using-distributed-replay-to-load-test-your-sql-serverpart-1)</span><span class="sxs-lookup"><span data-stu-id="65c64-160">[SQL Server Distributed Replay Forum](https://social.technet.microsoft.com/Forums/sl/sqldru/) [Using Distributed Replay to Load Test Your SQL Server - Part 2](https://docs.microsoft.com/archive/blogs/msdn/mspfe/using-distributed-replay-to-load-test-your-sql-serverpart-2) [Using Distributed Replay to Load Test Your SQL Server - Part 1](https://docs.microsoft.com/archive/blogs/batuhanyildiz/using-distributed-replay-to-load-test-your-sql-serverpart-1)</span></span>


