---
title: Занятие 7. Создание мер | Документация Майкрософт
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: 01bd2ad7-09b7-49ae-ad80-83f25da301aa
author: minewiskan
ms.author: owend
ms.openlocfilehash: d89ea5c847276c7a34b4fc800d8bed7b9cd8ad34
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87658490"
---
# <a name="lesson-7-create-measures"></a>Занятие 7: Создание мер
  На этом занятии мы создадим меры, которые можно будет добавить в модель. Как и вычисляемые столбцы, созданные на предыдущем занятии, мера — это вычисление, создаваемое с помощью DAX-формулы. Однако в отличие от вычисляемых столбцов меры вычисляются на основе выбранного пользователем *фильтра*, например на основе выбора пользователя, определенного столбца или среза, добавленного в поле «Метки строк» в сводной таблице.   Значение для каждой ячейки в фильтре вычисляется с учетом применимой меры. Меры — это мощные гибкие вычисления, которые могут быть включены практически во все табличные модели для выполнения динамических вычислений с числовыми данными. Дополнительные сведения см. в разделе [Меры (табличные службы SSAS)](tabular-models/measures-ssas-tabular.md).  
  
 Создание мер производится в сетке мер. По умолчанию каждая таблица имеет пустую сетку мер. Однако обычно меры для каждой таблицы не создаются. Сетка мер появляется внизу таблицы в конструкторе моделей, когда открыто представление данных. Чтобы скрыть или отобразить сетку мер для таблицы, откройте меню **Таблица** и выберите **Показать сетку мер**.  
  
 Меру можно создать, щелкнув по пустой ячейке в сетке мер и введя DAX-формулу в строке формул. Если после создания формулы нажать клавишу ВВОД, мера появится в ячейке. Кроме того, можно создать меры с помощью стандартной статистической функции, щелкнув столбец и нажав кнопку "Автосумма" (**∑**) на панели инструментов. Меры, созданные с помощью кнопки автосуммирования, будут всегда отображаться в сетке мер под столбцом, но при необходимости их можно переместить.  
  
 На этом занятии меры будут созданы как с помощью ввода DAX-формулы в строке формул, так и с помощью функции автосуммирования.  
  
 Предполагаемое время выполнения этого занятия: **30 минут**  
  
## <a name="prerequisites"></a>Предварительные требования  
 Этот раздел входит в учебник по табличному моделированию, который следует изучать в предложенном порядке. Прежде чем выполнять задания в этом занятии, необходимо завершить предыдущее занятие: [Занятие 6. Создание вычисляемых столбцов](lesson-5-create-calculated-columns.md).  
  
## <a name="create-measures"></a>Создание мер  
  
#### <a name="to-create-a-days-current-quarter-to-date-measure-in-the-date-table"></a>Создание меры «Дней в текущем квартале до даты» в таблице дат  
  
1.  В конструкторе моделей щелкните таблицу **Дата** .  
  
2.  Если пустая сетка мер не отображена под таблицей, в меню **Таблица** выберите команду **Показать сетку мер**.  
  
3.  В сетке мер щелкните верхнюю левую пустую ячейку.  
  
4.  В строке формул над таблицей введите следующую формулу:  
  
     `=COUNTROWS( DATESQTD( 'Date'[Date]))`  
  
     Завершив построение формулы, нажмите клавишу ВВОД.  
  
     Обратите внимание, что верхняя левая ячейка теперь содержит имя меры **Мера 1**и результат **30**. Имя меры также стоит перед формулой в строке формул.  
  
5.  Чтобы переименовать меру, в строке формул выделите имя, **меру 1**, затем введите `Days Current Quarter to Date` и нажмите клавишу ВВОД.  
  
    > [!TIP]  
    >  Во время ввода формулы в строке формул можно также сначала ввести имя меры, поставить двоеточие (:), пробел и затем вписать формулу. При использовании этого метода не нужно переименовывать меру.  
  
#### <a name="to-create-a-days-in-current-quarter-measure-in-the-date-table"></a>Создание меры «Дней в текущем квартале до даты» в таблице дат  
  
1.  В сетке мер щелкните пустую ячейку под только что созданной мерой, при этом таблица **Дата** должна быть все еще активна в конструкторе моделей.  
  
2.  В строке формул введите следующую формулу:  
  
     `Days in Current Quarter :=COUNTROWS( DATESBETWEEN( 'Date'[Date], STARTOFQUARTER( LASTDATE('Date'[Date])), ENDOFQUARTER('Date'[Date])))`  
  
     Обратите внимание, что в эту формулу сначала включено имя меры, за которым следует двоеточие (:).  
  
     Завершив построение формулы, нажмите клавишу ВВОД.  
  
 Во время создания пропорции сравнения между одним неполным периодом и предыдущим периодом формула должна учитывать пропорцию периода, который истек, и сравнивать ее с той же пропорцией в предыдущем периоде. В этом случае деление [Дней текущего квартала до даты] / [Дней в текущем квартале] дает пропорцию, прошедшую в текущем периоде.  
  
#### <a name="to-create-an-internet-distinct-count-sales-order-measure-in-the-internet-sales-table"></a>Создание меры «Отдельный счетчик заказов на продажу в Интернет» в таблице «Интернет-продажи»  
  
1.  В конструкторе моделей щелкните таблицу (вкладку) **Интернет-продажи** .  
  
     Если сетка мер не отображается, щелкните правой кнопкой мыши таблицу (вкладку) **Интернет-продажи** и выберите пункт **Показать сетку мер**.  
  
2.  Щелкните заголовок столбца **Номер заказа продаж** .  
  
3.  На панели инструментов щелкните стрелку вниз рядом с кнопкой "Автосумма" (**∑**) и выберите **DistinctCount**.  
  
     Функция "Автосумма" автоматически создает меру для выбранного столбца с помощью стандартной статистической формулы DistinctCount.  
  
     Обратите внимание, что верхняя ячейка внизу столбца в сетке мер теперь содержит имя меры **Отдельный счетчик заказов на продажу**. Меры, созданные с помощью автосуммирования, размещаются автоматически в самой верхней ячейке в сетке мер под связанным столбцом.  
  
4.  В сетке мер щелкните новую меру, затем в окне **Свойства** с помощью поля **Имя меры**переименуйте меру на **Отдельный счетчик заказов на продажу в Интернет**.  
  
#### <a name="to-create-additional-measures-in-the-internet-sales-table"></a>Создание дополнительных мер в таблице «Интернет-продажи»  
  
1.  С помощью функции "Автосумма" создайте и назовите следующие меры:  
  
    |Имя меры|Столбец|Автосуммирование (∑)|Формула|  
    |------------------|------------|-------------------|-------------|  
    |Число строк интернет-заказов|Число линий заказов на продажу|Count|=COUNT([Число линий заказов на продажу])|  
    |Всего единиц на продажу в Интернете|Заказанное количество|Sum|=SUM([заказанное количество])|  
    |Общая сумма скидки для заказов в Интернет|Discount Amount|Sum|=SUM([сумма скидки])|  
    |Общая себестоимость продукции для заказов в Интернете|Total Product Cost|Sum|=SUM([общая себестоимость продукции])|  
    |общие продажи в Интернете|Объем продаж|Sum|=SUM([объем продаж])|  
    |Общая маржа для заказов в Интернете|Маржа|Sum|=SUM([маржа])|  
    |Общая сумма налогов для заказов в Интернете|Tax Amt|Sum|=SUM([сумма налогов])|  
    |Общая стоимость фрахта для заказов в Интернете|Freight|Sum|=SUM([Freight])|  
  
2.  Щелкая по пустой ячейке в сетке мер и используя строку формул, создайте и назовите следующие меры.  
  
    > [!IMPORTANT]  
    >  Необходимо создать следующие меры в правильном порядке. Формулы в более поздних мерах ссылаются на более ранние меры.  
  
    |Имя меры|Формула|  
    |------------------|-------------|  
    |Маржа предыдущего квартала для заказов в Интернете|=CALCULATE([общая маржа для заказов в Интернете],PREVIOUSQUARTER('Date'[Date]))|  
    |Маржа текущего квартала для заказов в Интернете|=TOTALQTD([общая маржа для заказов в Интернете],'Date'[Date])|  
    |Пропорция маржи предыдущего квартала для заказов в Интернете к текущему кварталу|=[маржа предыдущего квартала для заказов в Интернете]*([дней текущего квартала до даты]/[дней в текущем квартале])|  
    |Интернет-продажи предыдущего квартала|=CALCULATE([общие продажи в Интернете],PREVIOUSQUARTER('Date'[Date]))|  
    |Интернет-продажи текущего квартала|=TOTALQTD([общие продажи в Интернете],'Date'[Date])|  
    |Пропорция продаж предыдущего квартала в Интернете к текущему кварталу|=[Интернет-продажи предыдущего квартала]*([дней текущего квартала до даты]/[дней в текущем квартале])|  
  
 Меры, созданные для таблицы «Интернет-продажи», могут быть использованы для анализа критических финансовых данных, таких как продажи, издержки и маржа прибыли для элементов, определенных фильтром, выбранным пользователем.  
  
## <a name="next-step"></a>Следующий шаг  
 Чтобы продолжить изучение этого учебника, перейдите к следующему занятию: [Занятие 8. Создание ключевых показателей эффективности](lesson-7-create-key-performance-indicators.md).  
  
  
