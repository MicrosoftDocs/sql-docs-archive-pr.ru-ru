---
title: Перекрестная проверка (SQL Server надстроек интеллектуального анализа данных) | Документация Майкрософт
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
helpviewer_keywords:
- cross-validation
- partitioning data [data mining]
- mining models, testing
ms.assetid: bf9483b3-4099-41c4-bbc5-da7005e07bcd
author: minewiskan
ms.author: owend
ms.openlocfilehash: a615de9d20106041f2f01e9912928b64597bc895
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87658574"
---
# <a name="cross-validation-sql-server-data-mining-add-ins"></a>Перекрестная проверка (надстройки интеллектуального анализа данных SQL Server)
  ![Кнопка «Перекрестная проверка» на ленте «Интеллектуальный анализ данных»](media/dmc-xvalid.gif "Кнопка «Перекрестная проверка» на ленте «Интеллектуальный анализ данных»")  
  
 Перекрестная проверка — стандартное средство в аналитике, она очень важна при разработке и настройке моделей интеллектуального анализа данных. Перекрестная проверка используется после создания модели, чтобы проверить достоверность модели и сравнить ее результаты с результатами других, связанных моделей интеллектуального анализа данных.  
  
 Перекрестная проверка состоит из двух этапов: обучение и создание отчетов. Необходимо выполнить следующие шаги.  
  
-   Выбрать целевую структуру или модель интеллектуального анализа данных.  
  
-   Указать целевое значение (если применимо).  
  
-   Укажите число перекрестных разделов или *сверток*, в которые следует секционировать данные структуры.  
  
 После этого мастер **перекрестной проверки** создает новую модель на каждом из сверток, проверяет модель на основе других сверток, а затем сообщает о точности модели. По завершении мастера **перекрестной проверки** создается отчет, в котором отображаются метрики для каждого из сверток, а также приводится сводка по модели в статистическом выражении. Эти сведения можно использовать, чтобы определить полезность базовых данных для модели или сравнить различные модели, построенные на одних и тех же данных.  
  
## <a name="using-the-cross-validation-wizard"></a>Использование мастера перекрестной проверки  
 Перекрестную проверку можно применять как к временным моделям, так и к моделям, хранимым в экземпляре служб [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)].  
  
#### <a name="to-create-a-cross-validation-report"></a>Создание отчета перекрестной проверки  
  
1.  В группе **точность и проверка** на ленте **интеллектуальный анализ данных** щелкните **Перекрестная проверка**.  
  
2.  В диалоговом окне **Выбор структуры или модели** выберите существующую структуру или модель интеллектуального анализа данных. Если была выбрана структура, мастер применит перекрестную проверку ко всем моделям, основанным на этой структуре, в которых присутствует один и тот же прогнозируемый атрибут. Если была выбрана модель, мастер использует перекрестную проверку только для этой модели.  
  
3.  В диалоговом окне **Укажите параметры перекрестной проверки** в поле **число сверток** выберите число сверток, по которым будет разбиваться набор данных. Свертка — это случайно выбранный разрез данных.  
  
4.  При необходимости задайте максимальное число строк, используемых при перекрестной проверке, введя число в текстовом поле Максимальное количество **строк** .  
  
    > [!NOTE]  
    >  Чем больше строк используется, тем точнее будут результаты. Однако время обработки также может значительно возрасти. Выбор числа зависит от данных, но обычно рекомендуется устанавливать наибольшее возможное число, не уменьшающее производительность. Чтобы увеличить производительность, также можно указать меньшее число сверток.  
  
5.  Выберите столбец из раскрывающегося списка **целевой атрибут** . В списке отображаются только столбцы, которые были заданы как прогнозируемые атрибуты при первоначальном создании модели. Модель может содержать несколько прогнозируемых атрибутов, но выбрать можно только один.  
  
6.  Выберите значение из раскрывающегося списка **целевое состояние** .  
  
     Если в прогнозируемом столбце содержатся непрерывные числовые данные, этот параметр будет недоступен.  
  
7.  При необходимости укажите значение, которое будет использоваться в качестве **целевого порога** при подсчете прогнозов в точности. Это значение выражается в виде вероятности, представленной в виде числа между 0 и 1 (1 означает гарантированную точность, 0 означает нулевую вероятность, 0,5 означает случайный выбор).  
  
     Если в прогнозируемом столбце содержатся непрерывные числовые данные, этот параметр будет недоступен.  
  
8.  Нажмите кнопку **Готово**. Создается новый лист с именем **Перекрестная проверка**.  
  
    > [!NOTE]  
    >  Во время разбиения модели на свертки и проверки каждой свертки электронная таблица Microsoft Excel может перестать реагировать на команды.  
  
### <a name="requirements"></a>Требования  
 Чтобы создать отчет перекрестной проверки, необходимы уже созданная структура интеллектуального анализа данных и связанные с ней модели. Мастер предоставляет диалоговое окно, помогающее выбрать существующие структуры и модели.  
  
 Если была выбрана структура интеллектуального анализа данных, поддерживающая несколько моделей интеллектуального анализа данных, а в моделях используются различные прогнозируемые атрибуты, мастер перекрестной проверки выполнит проверку только тех моделей, которые имеют общий прогнозируемый атрибут.  
  
 Если была выбрана структура, поддерживающая и модели кластеризации, и другие виды моделей, модели кластеризации не будут проверяться.  
  
## <a name="understanding-cross-validation-results"></a>Основные сведения о результатах перекрестной проверки  
 Результаты перекрестной проверки отображаются на новом листе с названием **отчет перекрестной проверки для \<attribute name> **. Новый лист содержит несколько разделов: первый раздел представляет собой сводку, в которой содержатся важные метаданные о тестируемой модели, чтобы вы могли узнать, для какой модели или структуры нужны результаты.  
  
 Во втором разделе отчета предоставляется статистическая сводка, показывающая, насколько хороша исходная модель. В этой сводке различия между моделями, создаваемыми для каждого из сверток, анализируются по трем ключевым мерам: *корневое среднее значение ошибки*, *Средняя абсолютная ошибка*и *Оценка журнала*. Эти стандартные статистические меры используются не только в интеллектуальном анализе данных, но и в большинстве других видов статистического анализа.  
  
 Для каждой из этих мер мастер перекрестной проверки вычисляет среднее и стандартное отклонение для всей модели. Это показывает, насколько согласована модель при выполнении прогнозов для различных подмножеств данных. Например, если стандартное отклонение очень велико, это показывает, что модели, созданные для каждой свертки, имеют сильно отличающиеся результаты, и, следовательно, модель могла быть слишком сильно обучена на определенной группе данных и может быть неприменима к другим наборам данных.  
  
 В следующем разделе описываются меры, используемые для оценки моделей.  
  
### <a name="tests-and-measures"></a>Проверки и меры  
 Кроме некоторых основных сведений о количестве сверток данных и объеме данных в каждой свертке, на листе отображается набор метрик для каждой модели, распределенных по типу проверки. Например, точность модели кластеризации оценивается с помощью проверок, отличающихся от проверок, используемых для моделей прогнозирования.  
  
 Следующая таблица содержит проверки и метрики с объяснением значений каждой метрики.  
  
#### <a name="aggregates-and-general-statistical-measures"></a>Статистические обработки и общие статистические меры  
 Совокупные меры, предоставленные в отчете, показывают, насколько сильно созданные в данных свертки отличаются друг от друга.  
  
-   Среднее и стандартное отклонение.  
  
-   Среднее отклонение от среднего арифметического для конкретной меры, с учетом всех секций модели.  
  
#### <a name="classification-passfail"></a>Классификация: успех или неудача  
 Эта мера используется в моделях классификации, если для прогнозируемого атрибута не было указано целевое значение. Например, если была создана модель, прогнозирующая различные вероятности, эта мера показывает, насколько хорошо модель прогнозировала все возможные значения.  
  
 Успех или неудача вычисляется путем подсчета вариантов, которые отвечают следующим условиям: **Pass** , если прогнозируемое состояние с наибольшей вероятностью совпадает с состоянием входа, а вероятность больше, чем значение, указанное для **порогового значения состояния**; в противном случае **произойдет сбой**.  
  
#### <a name="classification-true-or-false-positives-and-negatives"></a>Классификация: положительные или ложные срабатывания и отрицательные значения  
 Эта проверка используется для всех моделей классификации, имеющих указанную цель. Мера показывает, как каждый вариант классифицируется в ответ на следующие вопросы: что делало модельным прогнозом и каков фактический результат.  
  
|Measure|Описание|  
|-------------|-----------------|  
|Истинный положительный результат|Число вариантов, удовлетворяющих этим условиям.<br /><br /> Вариант содержит целевое значение.<br /><br /> Модель предсказала, что вариант содержит целевое значение.|  
|Ложный положительный результат|Число вариантов, удовлетворяющих этим условиям.<br /><br /> Фактическое значение равно целевому.<br /><br /> Модель предсказала, что вариант содержит целевое значение.|  
|Истинный отрицательный результат|Число вариантов, удовлетворяющих этим условиям.<br /><br /> Вариант не содержит целевого значения.<br /><br /> Модель предсказала, что вариант не содержит целевого значения.|  
|Ложный отрицательный результат|Число вариантов, удовлетворяющих этим условиям.<br /><br /> Фактическое значение не равно целевому.<br /><br /> Модель предсказала, что вариант не содержит целевого значения.|  
  
#### <a name="lift"></a>Точность прогноза  
 *Точность* — это мера, связанная с правдоподобием. Если при использовании модели возникнет более вероятный результат, чем при случайном предположении, то говорят, что модель предоставляет *положительный прогноз*. Однако если модель делает прогнозы менее вероятными, чем случайные, оценка точности *отрицательна*. Следовательно, эта метрика показывает улучшение, которое можно достичь при использовании модели, и чем выше оценка, тем лучше.  
  
 Точность прогноза рассчитывается как отношение фактической вероятности прогноза к граничной вероятности в проверочных вариантах.  
  
#### <a name="log-score"></a>Логарифмическая оценка  
 *Оценка журнала*, также называемая *оценкой вероятности журнала* для прогноза, представляет отношение между двумя вероятностями, преобразованное в логарифмическую шкалу. Поскольку вероятность выражается десятичной дробью, логарифмическая оценка — это всегда отрицательное число. Чем ближе число к 0, тем выше оценка.  
  
 Тогда как необработанные оценки могут содержать очень нерегулярные и асимметричные распределения, логарифмическая оценка подобна процентной доле.  
  
#### <a name="root-mean-square-error"></a>Корень среднеквадратичной погрешности  
 *Средняя квадратная ошибка* (Корень среднеквадратичной погрешности) — это стандартный метод в статистике, позволяющий узнать, как сравниваются разные наборы данных, и сгладить различия, которые могут быть представлены масштабом входных значений.  
  
 Корень среднеквадратичной погрешности представляет среднюю погрешность спрогнозированного значения относительно фактического значения. Оценка вычисляется как квадратный корень из средней погрешности для всех вариантов в секции к количеству вариантов, за исключением строк, в которых нет значения для целевых атрибутов.  
  
#### <a name="mean-absolute-error"></a>Средняя абсолютная погрешность  
 Средная *абсолютная ошибка* — это средняя ошибка прогнозируемого значения в фактическом значении. Она рассчитывается путем получения абсолютной суммы значений погрешностей и нахождения среднего значения этих погрешностей.  
  
 Данное значение помогает понять, насколько сильно оценки отклоняются от средних значений.  
  
#### <a name="case-likelihood"></a>Вероятность варианта  
 Эта мера используется только для моделей кластеризации и показывает вероятность принадлежности нового варианта к определенному кластеру.  
  
 В моделях кластеризации существует два вида членства в кластере, которые зависят от метода, использованного при создании модели. В некоторых моделях, созданных на основе алгоритма K-средние, ожидается, что новый вариант будет принадлежать только одному кластеру. Однако по умолчанию алгоритм кластеризации (Майкрософт) использует метод максимизации ожиданий, который предполагает, что новый вариант потенциально может принадлежать к любому кластеру. Следовательно, в данных моделях может содержаться несколько значений `CaseLikelihood`, но по умолчанию в отчет добавляется только одна вероятность принадлежности варианта кластеру — наиболее подходящая для нового варианта.  
  
## <a name="see-also"></a>См. также:  
 [Проверка моделей и использование моделей для прогнозирования &#40;надстройки интеллектуального анализа данных для Excel&#41;](validating-models-and-using-models-for-prediction-data-mining-add-ins-for-excel.md)  
  
  
