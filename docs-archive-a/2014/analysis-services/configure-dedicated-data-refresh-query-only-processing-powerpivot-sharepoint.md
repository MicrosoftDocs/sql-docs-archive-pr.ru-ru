---
title: Настройка выделенного обновления данных или обработки только запросов (PowerPivot для SharePoint) | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: 5e027605-1086-4941-bb01-f315df8f829b
author: minewiskan
ms.author: owend
ms.openlocfilehash: 6aa98f16a8a607f5f65f15bc921d0cc42ae1cd1c
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87656763"
---
# <a name="configure-dedicated-data-refresh-or-query-only-processing-powerpivot-for-sharepoint"></a>Настройка выделенного обновления данных или обработки только запросов (PowerPivot для SharePoint)
  В режиме интеграции с SharePoint можно настроить экземпляр сервера служб Analysis Services для поддержки обработки определенного типа запросов, таких как обновление данных или обработка только запросов. По умолчанию включены оба типа запросов. Можно отключить один из этих типов запросов, чтобы создать выделенное ядро запросов или сервер обновления данных.  
  
 **[!INCLUDE[applies](../includes/applies-md.md)]** SharePoint 2010  
  
> [!NOTE]  
>  В этой версии отсутствуют параметры конфигурации, ограничивающие использование памяти или процессора для заданий обновления данных или запросов по требованию. Экземпляр [!INCLUDE[ssGeminiSrv](../includes/ssgeminisrv-md.md)] будет использовать все ресурсы, доступные для выполнения управляемых им запросов и заданий обновления данных.  
  
 Этот раздел состоит из следующих подразделов.  
  
 [Настройка режима обработки](#config)  
  
 [Изменение числа заданий обновления данных, которые могут выполняться параллельно](#change)  
  
##  <a name="configure-a-processing-mode"></a><a name="config"></a>Настройка режима обработки  
  
1.  В центре администрирования в окне «Системные параметры» выберите пункт **Управление службами на сервере**.  
  
2.  В разделе «Сервер» в верхней части страницы щелкните стрелку вниз и выберите пункт **Изменить сервер**.  
  
3.  Выберите сервер SharePoint, на котором имеется экземпляр сервера служб Analysis Services, который необходимо настроить.  
  
4.  Нажмите **Службы SQL Server Analysis Services**.  
  
5.  В окне «Использование экземпляра службы» выполните одно из следующих действий.  
  
    1.  Снимите флажок **включить загрузку баз данных только для чтения** , чтобы отключить обработку запросов по требованию, которая происходит каждый раз, когда пользователь открывает книгу, содержащую данные PowerPivot.  
  
    2.  Снимите флажок **включить загрузку баз данных для обновления** , чтобы отключить обновление данных по расписанию.  
  
    > [!NOTE]  
    >  При отключении обновления данных параметры обновления данных не удаляются с сайтов SharePoint. Пользователи, которые являются владельцами книг PowerPivot, в этом случае могут создавать расписания обновления данных, но обновление данных не будет выполняться на этом сервере.  
  
6.  При необходимости для операций обновления данных можно изменить количество одновременно выполняемых заданий. Количество одновременно выполняемых заданий рекомендуется увеличить в случае, если сервер настроен только для обновления данных, или при наличии дополнительных процессоров на сервере. Количество одновременно выполняемых заданий рекомендуется уменьшить, если необходимо освободить системные ресурсы для выполнения дополнительных запросов по требованию.  
  
7.  Сохраните изменения. Сервер не будет выполнять проверку записей до выполнения задания обработки. При вводе недопустимого значения количества одновременно выполняемых заданий при обработке следующего запроса будет обнаружена и зарегистрирована ошибка.  
  
##  <a name="change-the-number-of-data-refresh-jobs-that-can-run-in-parallel"></a><a name="change"></a>Изменение числа заданий обновления данных, которые могут выполняться параллельно  
 Задание обновления данных представляет собой запланированную задачу, которая добавляется к очереди обработки, обслуживаемой и отслеживаемой приложением службы PowerPivot. Задание состоит из данных расписания для одного или нескольких источников данных в книге PowerPivot. Для каждого расписания создается отдельное задание. Если владелец книги определяет одно расписание для всех источников данных, то для всей операции обновления будет создано только одно задание. Если владелец книги создает отдельные расписания для внешних источников данных, то будет создано несколько заданий, которые будут выполнены для полного обновления данных этой книги.  
  
 Если характеристики системы допускают увеличение нагрузки, можно увеличить количество одновременно выполняемых заданий обновления.  
  
|Параметр|Допустимые значения|Описание|  
|-------------|------------------|-----------------|  
|Значение по умолчанию|Расчет на основе ОЗУ|Значение по умолчанию рассчитывается по следующей формуле: объем доступной памяти делится на 4 гигабайта. Расчет значения по умолчанию выполняется с помощью формулы, поэтому настройки могут быть изменены в зависимости от характеристик системы.<br /><br /> Примечание. делитель с 4 гигабайтами был выбран на основе использования ОЗУ для большой выборки реальных источников данных PowerPivot. При его выборе не учитывалась физическая или логическая архитектура PowerPivot.|  
|Максимальное значение|Расчет на основе количества ЦП|Максимальное количество одновременно выполняемых заданий, которое можно указать, зависит от количества процессоров компьютера. Например, на компьютере с четырьмя четырехъядерными процессорами максимально возможное количество одновременно выполняемых заданий равно 16.|  
  
#### <a name="increasing-the-default-value-to-a-higher-value"></a>Увеличение значения по умолчанию  
 На следующей диаграмме показаны максимальные значения и значения по умолчанию, которые вычисляются исходя из характеристик системы, для различных сочетаний объема ОЗУ и количества ЦП. Помните, что значение по умолчанию для количества одновременно выполняемых заданий по обновлению данных вычисляется исходя из объема системной памяти, тогда как максимальное — исходя из количества ЦП. В последнем столбце показано, можно ли увеличить максимальное количество одновременно выполняемых заданий по обновлению данных.  
  
|Фактический объем ОЗУ (в гигабайтах)|Рассчитываемое значение по умолчанию|Фактическое количество ЦП|Рассчитываемое максимальное значение|Увеличить количество заданий, выполняемых одновременно?|  
|---------------------------------|------------------------------|------------------------|------------------------------|-------------------------------|  
|4|1|1|1|Нет. Значение по умолчанию равно максимальному значению.|  
|4|1|4|4|Да. Количество одновременно выполняемых заданий можно увеличить до 2, 3 или 4.|  
|8|2|4|4|Да. Количество одновременно выполняемых заданий можно увеличить до 3 или 4.|  
|16|4|4|4|Нет. Значение по умолчанию равно максимальному значению.|  
|32|Значение по умолчанию, рассчитанное по формуле, равно 8. Поскольку значение по умолчанию выше максимально допустимого, вычисленное значение по умолчанию в данном случае не используется.|4|4|Нет. Хотя большой объем ОЗУ позволяет увеличить количество одновременно выполняемых заданий до 8, на компьютере с 4 процессорами может выполняться одновременно только 4 задания.|  
|32|8|8|8|Нет.|  
|32|8|16|16|Да.|  
|64|16|16|16|Нет.|  
  
 Поскольку невозможно узнать заранее, будет ли успешно выполняться одновременно несколько заданий, следует увеличивать количество одновременно выполняемых заданий только после анализа потребления ресурсов памяти за определенный период времени, результаты которого укажут на недостаточный уровень использования памяти сервера.  
  
 Все задания обновления данных имеют различные характеристики загрузки в зависимости от количества и размера обновляемых источников данных. Рабочая загрузка книг с одним источником данных и небольшим количеством строк меньше рабочей загрузки книг с несколькими источниками данных с очень большим набором строк.  
  
## <a name="see-also"></a>См. также:  
 [Обновление данных PowerPivot с SharePoint 2010](powerpivot-data-refresh-with-sharepoint-2010.md)  
  
  
