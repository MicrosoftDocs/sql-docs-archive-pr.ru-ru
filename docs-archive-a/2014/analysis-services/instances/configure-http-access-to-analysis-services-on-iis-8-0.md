---
title: Настройка доступа по протоколу HTTP к Analysis Services на службы IIS (IIS) 8,0 | Документация Майкрософт
ms.custom: ''
ms.date: 06/19/2019
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: cf2e2c84-0a69-4cdd-90a1-fb4021936513
author: minewiskan
ms.author: owend
ms.openlocfilehash: 00fc6fcdf059bb26602e20d4c7fc8fb46edcfb9c
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87731129"
---
# <a name="configure-http-access-to-analysis-services-on-internet-information-services-iis-80"></a><span data-ttu-id="d31ce-102">Настройка HTTP-доступа к службам Analysis Services в службах Internet Information Services (IIS) 8.0</span><span class="sxs-lookup"><span data-stu-id="d31ce-102">Configure HTTP Access to Analysis Services on Internet Information Services (IIS) 8.0</span></span>
  <span data-ttu-id="d31ce-103">В этой статье объясняется, как настроить конечную точку HTTP для доступа к экземпляру служб Analysis Services.</span><span class="sxs-lookup"><span data-stu-id="d31ce-103">This article explains how to set up an HTTP endpoint for accessing an Analysis Services instance.</span></span> <span data-ttu-id="d31ce-104">Доступ по протоколу HTTP к службам Analysis Services можно включить путем настройки MSMDPUMP.dll — расширения ISAPI, которое работает на сервере IIS и переносит данные между клиентским приложением и сервером служб Analysis Services.</span><span class="sxs-lookup"><span data-stu-id="d31ce-104">You can enable HTTP access by configuring MSMDPUMP.dll, an ISAPI extension that runs in Internet Information Services (IIS) and pumps data to and from client applications and an Analysis Services server.</span></span> <span data-ttu-id="d31ce-105">Такой подход предоставляет альтернативные способы подключения к службам Analysis Services, если применяемое решение бизнес-аналитики требует получения следующих возможностей.</span><span class="sxs-lookup"><span data-stu-id="d31ce-105">This approach provides an alternative means for connecting to Analysis Services when your BI solution calls for the following capabilities:</span></span>  
  
-   <span data-ttu-id="d31ce-106">Доступ клиентов осуществляется по Интернету или экстрасети, с учетом ограничений на то, какие порты могут быть включены.</span><span class="sxs-lookup"><span data-stu-id="d31ce-106">Client access is over Internet or extranet connections, with restrictions on which ports can be enabled.</span></span>  
  
-   <span data-ttu-id="d31ce-107">Клиентские запросы на установление соединений поступают из не заслуживающих доверия доменов, находящихся в той же сети.</span><span class="sxs-lookup"><span data-stu-id="d31ce-107">Client connections are from non-trusted domains in the same network.</span></span>  
  
-   <span data-ttu-id="d31ce-108">Клиентское приложение работает в сетевой среде, где разрешены соединения HTTP, но не разрешены соединения TCP/IP.</span><span class="sxs-lookup"><span data-stu-id="d31ce-108">Client application runs in a network environment that allows HTTP but not TCP/IP connections.</span></span>  
  
-   <span data-ttu-id="d31ce-109">Клиентские приложения не могут использовать клиентские библиотеки служб Analysis Services (в качестве примера можно указать приложение Java, работающее на сервере UNIX).</span><span class="sxs-lookup"><span data-stu-id="d31ce-109">Client applications cannot use the Analysis Services client libraries (for example, a Java application running on a UNIX server).</span></span> <span data-ttu-id="d31ce-110">Если нет возможности использовать для доступа к данным клиентские библиотеки служб Analysis Services, то можно использовать для доступа SOAP и XML/A по прямому HTTP-соединению с экземпляром служб Analysis Services.</span><span class="sxs-lookup"><span data-stu-id="d31ce-110">If you cannot use the Analysis Services client libraries for data access, you can use SOAP and XML/A over a direct HTTP connection to an Analysis Services instance.</span></span>  
  
-   <span data-ttu-id="d31ce-111">Требуются методы проверки подлинности, отличные от встроенной безопасности Windows.</span><span class="sxs-lookup"><span data-stu-id="d31ce-111">Authentication methods other than Windows integrated security are required.</span></span> <span data-ttu-id="d31ce-112">В частности, при настройке служб Analysis Services для доступа по протоколу HTTP можно использовать анонимные соединения и обычную проверку подлинности.</span><span class="sxs-lookup"><span data-stu-id="d31ce-112">Specifically, you can use Anonymous connections and Basic authentication when configuring Analysis Services for HTTP access.</span></span> <span data-ttu-id="d31ce-113">Проверка подлинности с помощью дайджестов, форм и ASP.NET не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="d31ce-113">Digest, Forms, and ASP.NET authentication are not supported.</span></span> <span data-ttu-id="d31ce-114">Требование для обычной проверки подлинности является одной из основных причин для включения доступа по протоколу HTTP.</span><span class="sxs-lookup"><span data-stu-id="d31ce-114">A requirement of Basic authentication is one of the primary reasons for enabling HTTP access.</span></span> <span data-ttu-id="d31ce-115">Подробнее см. в разделе [Проверка подлинности для бизнес-аналитики Майкрософт и делегирование удостоверений](https://go.microsoft.com/fwlink/?LinkId=286576).</span><span class="sxs-lookup"><span data-stu-id="d31ce-115">To learn more, see [Microsoft BI Authentication and Identity Delegation](https://go.microsoft.com/fwlink/?LinkId=286576).</span></span>  
  
 <span data-ttu-id="d31ce-116">Доступ по протоколу HTTP можно настроить для любой поддерживаемой версии или выпуска служб Analysis Services, работающих в табличном или многомерном режиме.</span><span class="sxs-lookup"><span data-stu-id="d31ce-116">You can configure HTTP access for any supported version or edition of Analysis Services, running either tabular mode or multidimensional mode.</span></span> <span data-ttu-id="d31ce-117">Исключением являются локальные кубы.</span><span class="sxs-lookup"><span data-stu-id="d31ce-117">Local cubes are an exception.</span></span> <span data-ttu-id="d31ce-118">Установить подключение к локальному кубу через конечную точку HTTP нельзя.</span><span class="sxs-lookup"><span data-stu-id="d31ce-118">You cannot connect to a local cube via an HTTP endpoint.</span></span>  
  
 <span data-ttu-id="d31ce-119">Настройка доступа по протоколу HTTP является задачей, выполняемой после установки.</span><span class="sxs-lookup"><span data-stu-id="d31ce-119">Setting up HTTP access is a post-installation task.</span></span> <span data-ttu-id="d31ce-120">Сначала необходимо установить службы Analysis Services, а затем их можно настроить для доступа по протоколу HTTP.</span><span class="sxs-lookup"><span data-stu-id="d31ce-120">Analysis Services must be installed before you can configure it for HTTP access.</span></span> <span data-ttu-id="d31ce-121">Администратор служб Analysis Services должен предоставить разрешения учетным записям Windows перед активацией доступа по протоколу HTTP.</span><span class="sxs-lookup"><span data-stu-id="d31ce-121">As the Analysis Services administrator, you will need to grant permissions to Windows accounts before HTTP access is possible.</span></span> <span data-ttu-id="d31ce-122">Кроме того, сначала рекомендуется проверить установку, чтобы убедиться в ее полной функциональности, и только после этого выполнять дальнейшие действия по настройке сервера.</span><span class="sxs-lookup"><span data-stu-id="d31ce-122">Additionally, it is a best practice to validate your installation first, ensuring that it is fully operational before configuring the server any further.</span></span> <span data-ttu-id="d31ce-123">После настройки доступа по протоколу HTTP можно использовать и конечную точку HTTP, и обычное сетевое имя сервера по протоколу TCP/IP.</span><span class="sxs-lookup"><span data-stu-id="d31ce-123">After HTTP access is configured, you can use both the HTTP endpoint and the regular network name of the server over TCP/IP.</span></span> <span data-ttu-id="d31ce-124">Настройка доступа по протоколу HTTP не отменяет других способов доступа к данным.</span><span class="sxs-lookup"><span data-stu-id="d31ce-124">Setting up HTTP access does not invalidate other approaches for data access.</span></span>  
  
 <span data-ttu-id="d31ce-125">Выполняя дальнейшую настройку MSMDPUMP, необходимо принять во внимание наличие двух типов подключения: подключение клиента к службам IIS и подключение служб IIS к службам SSAS.</span><span class="sxs-lookup"><span data-stu-id="d31ce-125">As you move forward with MSMDPUMP configuration, remember there are two connections to consider: client-to-IIS, IIS-to-SSAS.</span></span> <span data-ttu-id="d31ce-126">Приведенные в данной статье инструкции относятся к подключению служб IIS к SSAS.</span><span class="sxs-lookup"><span data-stu-id="d31ce-126">The instructions in this article are about IIS-to-SSAS.</span></span> <span data-ttu-id="d31ce-127">Перед подключением к серверу IIS может потребоваться дополнительная настройка клиентского приложения.</span><span class="sxs-lookup"><span data-stu-id="d31ce-127">Your client application might require additional configuration before it can connect to IIS.</span></span> <span data-ttu-id="d31ce-128">Вопросы о том, почему следует использовать протокол SSL и как настроить привязки, выходят за рамки данной статьи.</span><span class="sxs-lookup"><span data-stu-id="d31ce-128">Decisions such as whether to use SSL, or how to configure bindings, are out of scope for this article.</span></span> <span data-ttu-id="d31ce-129">Подробнее о службах IIS см. в разделе [Веб-сервер (IIS)](https://technet.microsoft.com/library/hh831725.aspx) .</span><span class="sxs-lookup"><span data-stu-id="d31ce-129">See [Web Server (IIS)](https://technet.microsoft.com/library/hh831725.aspx) for more information about IIS.</span></span>  
  
 <span data-ttu-id="d31ce-130">Этот раздел включает следующие подразделы:</span><span class="sxs-lookup"><span data-stu-id="d31ce-130">This topic includes the following sections:</span></span>  
  
-   [<span data-ttu-id="d31ce-131">Обзор</span><span class="sxs-lookup"><span data-stu-id="d31ce-131">Overview</span></span>](#bkmk_overview)  
  
-   [<span data-ttu-id="d31ce-132">Предварительные требования</span><span class="sxs-lookup"><span data-stu-id="d31ce-132">Prerequisites</span></span>](#bkmk_prereq)  
  
-   [<span data-ttu-id="d31ce-133">Копирование MSMDPUMP.dll в папку на веб-сервере</span><span class="sxs-lookup"><span data-stu-id="d31ce-133">Copy the MSMDPUMP.dll to a folder on the Web server</span></span>](#bkmk_copy)  
  
-   [<span data-ttu-id="d31ce-134">Создайте пул приложений и виртуальный каталог на сервере IIS</span><span class="sxs-lookup"><span data-stu-id="d31ce-134">Create an application pool and virtual directory in IIS</span></span>](#bkmk_appPool)  
  
-   [<span data-ttu-id="d31ce-135">Настройка аутентификации IIS и добавление расширения</span><span class="sxs-lookup"><span data-stu-id="d31ce-135">Configure IIS authentication and add the extension</span></span>](#bkmk_auth)  
  
-   [<span data-ttu-id="d31ce-136">В файле MSMDPUMP.INI укажите целевой сервер</span><span class="sxs-lookup"><span data-stu-id="d31ce-136">Edit the MSMDPUMP.INI file to set the target server</span></span>](#bkmk_edit)  
  
-   [<span data-ttu-id="d31ce-137">Проверка конфигурации</span><span class="sxs-lookup"><span data-stu-id="d31ce-137">Test your configuration</span></span>](#bkmk_test)  
  
##  <a name="overview"></a><a name="bkmk_overview"></a> <span data-ttu-id="d31ce-138">Обзор</span><span class="sxs-lookup"><span data-stu-id="d31ce-138">Overview</span></span>  
 <span data-ttu-id="d31ce-139">MSMDPUMP является расширением ISAPI, которое загружается в службы IIS и обеспечивает перенаправление на локальный или удаленный экземпляр служб Analysis Services.</span><span class="sxs-lookup"><span data-stu-id="d31ce-139">MSMDPUMP is an ISAPI extension that loads into IIS and provides redirection to a local or remote Analysis Services instance.</span></span> <span data-ttu-id="d31ce-140">В процессе настройки данного расширения ISAPI создается конечная точка HTTP для экземпляра служб Analysis Services.</span><span class="sxs-lookup"><span data-stu-id="d31ce-140">By configuring this ISAPI extension, you create an HTTP endpoint to an Analysis Services instance.</span></span>  
  
 <span data-ttu-id="d31ce-141">Для каждой конечной точки HTTP необходимо создать и настроить по одному виртуальному каталогу.</span><span class="sxs-lookup"><span data-stu-id="d31ce-141">You must create and configure one virtual directory for each HTTP endpoint.</span></span> <span data-ttu-id="d31ce-142">Для каждой конечной точки потребуется собственный набор файлов MSMDPUMP, для каждого экземпляра служб Analysis Services, соединение с которым требуется обеспечить.</span><span class="sxs-lookup"><span data-stu-id="d31ce-142">Each endpoint will need its own set of MSMDPUMP files, for each Analysis Services instance you want to connect to.</span></span> <span data-ttu-id="d31ce-143">В файле конфигурации из этого набора файлов задается имя экземпляра служб Analysis Services, используемого для каждой конечной точки HTTP.</span><span class="sxs-lookup"><span data-stu-id="d31ce-143">A configuration file in this file set specifies the name of the Analysis Services instance used for each HTTP endpoint.</span></span>  
  
 <span data-ttu-id="d31ce-144">При работе с сервером IIS MSMDPUMP обеспечивает подключение к службам Analysis Services с помощью поставщика OLE DB служб Analysis Services по протоколу TCP/IP.</span><span class="sxs-lookup"><span data-stu-id="d31ce-144">On IIS, MSMDPUMP connects to Analysis Services using the Analysis Services OLE DB provider over TCP/IP.</span></span> <span data-ttu-id="d31ce-145">Хотя клиентские запросы могут исходить и не от надежных доменов, для успешного выполнения собственного соединения службы Analysis Services и IIS должны находиться в одном и том же домене или в надежных доменах.</span><span class="sxs-lookup"><span data-stu-id="d31ce-145">Although client requests can originate outside of domain trust, both Analysis Services and IIS must be in the same domain or in trusted domains in order for the native connection to succeed.</span></span>  
  
 <span data-ttu-id="d31ce-146">Когда MSMDPUMP подключается к службам Analysis Services, используется идентификатор пользователя Windows.</span><span class="sxs-lookup"><span data-stu-id="d31ce-146">When MSMDPUMP connects to Analysis Services, it does so under a Windows user identity.</span></span> <span data-ttu-id="d31ce-147">Эта учетная запись должна быть либо анонимной учетной записью (если выполнена настройка виртуального каталога для анонимных соединений), либо учетной записью пользователя Windows.</span><span class="sxs-lookup"><span data-stu-id="d31ce-147">This account will either be the Anonymous account if you configured the virtual directory for anonymous connections, or a Windows user account.</span></span> <span data-ttu-id="d31ce-148">Эта учетная запись должна иметь соответствующие права доступа к данным на сервере и в базе данных служб Analysis Services.</span><span class="sxs-lookup"><span data-stu-id="d31ce-148">The account must have the appropriate data access rights on the Analysis Services server and database.</span></span>  
  
 <span data-ttu-id="d31ce-149">![Диаграмма, показывающая соединения между компонентами](../media/ssas.gif "Диаграмма, показывающая соединения между компонентами")</span><span class="sxs-lookup"><span data-stu-id="d31ce-149">![Diagram showing connections between components](../media/ssas.gif "Diagram showing connections between components")</span></span>  
  
 <span data-ttu-id="d31ce-150">В следующей таблице приведены дополнительные соображения, касающиеся разрешения доступа по протоколу HTTP в различных сценариях.</span><span class="sxs-lookup"><span data-stu-id="d31ce-150">The following table lists additional considerations when you enable HTTP access for different scenarios.</span></span>  
  
|<span data-ttu-id="d31ce-151">Сценарий</span><span class="sxs-lookup"><span data-stu-id="d31ce-151">Scenario</span></span>|<span data-ttu-id="d31ce-152">Параметр Configuration</span><span class="sxs-lookup"><span data-stu-id="d31ce-152">Configuration</span></span>|  
|--------------|-------------------|  
|<span data-ttu-id="d31ce-153">Размещение служб IIS и Analysis Services на одном и том же компьютере</span><span class="sxs-lookup"><span data-stu-id="d31ce-153">IIS and Analysis Services on the same computer</span></span>|<span data-ttu-id="d31ce-154">Это простейший вариант настройки конфигурации, поскольку позволяет использовать конфигурацию по умолчанию (где именем сервера является localhost), локальный поставщик OLE DB служб Analysis Services и встроенную безопасность Windows с NTLM.</span><span class="sxs-lookup"><span data-stu-id="d31ce-154">This is the simplest configuration because it allows you to use the default configuration (where the server name is localhost), the local Analysis Services OLE DB provider, and Windows integrated security with NTLM.</span></span> <span data-ttu-id="d31ce-155">При условии, что клиент находится в том же домене, проверка подлинности становится прозрачной для пользователя, без каких-либо дополнительных действий с вашей стороны.</span><span class="sxs-lookup"><span data-stu-id="d31ce-155">Assuming that the client is also in the same domain, authentication is transparent to the user, with no additional work on your part.</span></span>|  
|<span data-ttu-id="d31ce-156">Размещение служб IIS и Analysis Services на разных компьютерах</span><span class="sxs-lookup"><span data-stu-id="d31ce-156">IIS and Analysis Services on different computers</span></span>|<span data-ttu-id="d31ce-157">Для реализации этой топологии необходимо установить поставщик OLE DB для служб Analysis Services на веб-сервере.</span><span class="sxs-lookup"><span data-stu-id="d31ce-157">For this topology, you must install the Analysis Services OLE DB provider on the web server.</span></span> <span data-ttu-id="d31ce-158">Необходимо также изменить файл msmdpump.ini, чтобы указать местоположение экземпляра служб Analysis Services на удаленном компьютере.</span><span class="sxs-lookup"><span data-stu-id="d31ce-158">You must also edit the msmdpump.ini file to specify the location of Analysis Services instance on the remote computer.</span></span><br /><br /> <span data-ttu-id="d31ce-159">В этой топологии происходит добавление шага проверки подлинности в виде двойного транзитного перехода, при котором учетные данные должны передаваться от клиента к веб-серверу, а затем к внутреннему серверу служб Analysis Services.</span><span class="sxs-lookup"><span data-stu-id="d31ce-159">This topology adds a double-hop authentication step, where credentials must flow from the client to the web server, and on to the backend Analysis Services server.</span></span> <span data-ttu-id="d31ce-160">При использовании учетных данных Windows и NTLM возвращается ошибка, поскольку NTLM не допускает делегирования учетных данных клиента второму серверу.</span><span class="sxs-lookup"><span data-stu-id="d31ce-160">If you are using Windows credentials and NTLM, you will get an error because NTLM does not allow delegation of client credentials to a second server.</span></span> <span data-ttu-id="d31ce-161">Чаще всего используемое решение заключается в использовании обычной проверки подлинности по протоколу SSL, но для этого при доступе к виртуальному каталогу MSMDPUMP пользователь должен указывать имя пользователя и пароль.</span><span class="sxs-lookup"><span data-stu-id="d31ce-161">The most common solution is to use Basic authentication with Secure Sockets Layer (SSL), but this will require users to provide a user name and password when accessing the MSMDPUMP virtual directory.</span></span> <span data-ttu-id="d31ce-162">Более простой подход может состоять во включении протокола Kerberos и настройке ограниченного делегирования служб Analysis Services, чтобы пользователи могли получать прозрачный доступ к службам Analysis Services.</span><span class="sxs-lookup"><span data-stu-id="d31ce-162">A more straightforward approach might be to enable Kerberos and configure Analysis Services constrained delegation so that users can access Analysis Services in a transparent manner.</span></span> <span data-ttu-id="d31ce-163">Дополнительные сведения см. в разделе [Configure Analysis Services for Kerberos constrained delegation](configure-analysis-services-for-kerberos-constrained-delegation.md) .</span><span class="sxs-lookup"><span data-stu-id="d31ce-163">See [Configure Analysis Services for Kerberos constrained delegation](configure-analysis-services-for-kerberos-constrained-delegation.md) for details.</span></span><br /><br /> <span data-ttu-id="d31ce-164">Обдумайте, какие порты следует разблокировать в брандмауэре Windows.</span><span class="sxs-lookup"><span data-stu-id="d31ce-164">Consider which ports to unblock in Windows Firewall.</span></span> <span data-ttu-id="d31ce-165">Необходимо открыть порты на обоих серверах, чтобы разрешить доступ к веб-приложению на сервере IIS, а также доступ к службам Analysis Services на удаленном сервере.</span><span class="sxs-lookup"><span data-stu-id="d31ce-165">You will need to unblock ports on both servers to allow access to the web application on IIS, and to Analysis Services on a remote server.</span></span>|  
|<span data-ttu-id="d31ce-166">Клиентские соединения осуществляются из недоверенных доменов или из соединений экстрасети.</span><span class="sxs-lookup"><span data-stu-id="d31ce-166">Client connections are from a non-trusted domain or an extranet connection</span></span>|<span data-ttu-id="d31ce-167">Клиентские соединения из недоверенных доменов влекут дополнительные ограничения на процесс проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="d31ce-167">Client connections from a non-trusted domain introduce further restrictions on authentication.</span></span> <span data-ttu-id="d31ce-168">По умолчанию в службах Analysis Services используется встроенная проверка подлинности Windows, которая требует, чтобы пользователи находились в том же домене, что и сервер.</span><span class="sxs-lookup"><span data-stu-id="d31ce-168">By default, Analysis Services uses Windows integrated authentication, which requires users to be on the same domain as the server.</span></span> <span data-ttu-id="d31ce-169">Если имеются пользователи экстрасети, подключающиеся к серверу IIS из-за пределов домена, то при настройке сервера с параметрами по умолчанию для таких пользователей будет выводиться сообщение об ошибке.</span><span class="sxs-lookup"><span data-stu-id="d31ce-169">If you have Extranet users who connect to IIS from outside the domain, those users will get a connection error if the server is configured to use the default settings.</span></span><br /><br /> <span data-ttu-id="d31ce-170">В качестве обходного пути решения проблемы можно настроить подключение пользователей из экстрасети по виртуальной частной сети (VPN) с использованием учетных данных домена.</span><span class="sxs-lookup"><span data-stu-id="d31ce-170">Workarounds include having Extranet users connect through a VPN using domain credentials.</span></span> <span data-ttu-id="d31ce-171">Однако лучшим вариантом может быть включение обычной проверки подлинности и SSL на веб-сайте служб IIS.</span><span class="sxs-lookup"><span data-stu-id="d31ce-171">However, a better approach might be to enable Basic authentication and SSL on your IIS web site.</span></span>|  
  
##  <a name="prerequisites"></a><a name="bkmk_prereq"></a> <span data-ttu-id="d31ce-172">Предварительные требования</span><span class="sxs-lookup"><span data-stu-id="d31ce-172">Prerequisites</span></span>  
 <span data-ttu-id="d31ce-173">В инструкциях данной статьи предполагается, что службы IIS уже настроены, а службы Analysis Services уже установлены.</span><span class="sxs-lookup"><span data-stu-id="d31ce-173">The instructions in this article assume IIS is already configured and that Analysis Services is already installed.</span></span> <span data-ttu-id="d31ce-174">Windows Server 2012 поставляется с IIS 8.x в виде роли сервера, которую можно включить в системе.</span><span class="sxs-lookup"><span data-stu-id="d31ce-174">Windows Server 2012 ships with IIS 8.x as a server role that you can enable on the system.</span></span>  
  
 <span data-ttu-id="d31ce-175">**Дополнительная настройка в IIS 8.0**</span><span class="sxs-lookup"><span data-stu-id="d31ce-175">**Extra configuration in IIS 8.0**</span></span>  
  
 <span data-ttu-id="d31ce-176">В конфигурациях по умолчанию служб IIS 8.0 отсутствуют компоненты, необходимые для доступа к службам Analysis Services по протоколу HTTP.</span><span class="sxs-lookup"><span data-stu-id="d31ce-176">The default configuration of IIS 8.0 is missing components that are necessary for HTTP access to Analysis Services.</span></span> <span data-ttu-id="d31ce-177">В число таких компонентов, которые находятся в областях компонентов **Безопасность** и **Разработка приложений** роли **Веб-сервер (IIS)** , входят следующие.</span><span class="sxs-lookup"><span data-stu-id="d31ce-177">These components, found in the **Security** and **Application Development** feature areas of the **Web Server (IIS)** role, include the following:</span></span>  
  
-   <span data-ttu-id="d31ce-178">**Безопасность**  |  **Проверка подлинности Windows**, **Обычная проверка подлинности**и другие функции безопасности, необходимые для сценария доступа к данным.</span><span class="sxs-lookup"><span data-stu-id="d31ce-178">**Security** | **Windows Authentication**, or **Basic Authentication**, and any other security features required for your data access scenario.</span></span>  
  
-   <span data-ttu-id="d31ce-179">**Разработка приложений**  |  **CGI**</span><span class="sxs-lookup"><span data-stu-id="d31ce-179">**Application Development** | **CGI**</span></span>  
  
-   <span data-ttu-id="d31ce-180">**Разработка приложений**  |  **Расширения ISAPI**</span><span class="sxs-lookup"><span data-stu-id="d31ce-180">**Application Development** | **ISAPI Extensions**</span></span>  
  
 <span data-ttu-id="d31ce-181">Чтобы проверить или добавить эти компоненты, используйте **Диспетчер сервера**  |  **Управление**  |  **добавлением ролей и компонентов**.</span><span class="sxs-lookup"><span data-stu-id="d31ce-181">To verify or add these components, use **Server Manager** | **Manage** | **Add Roles and Features**.</span></span> <span data-ttu-id="d31ce-182">Выполните все шаги мастера, пока не дойдете до страницы **Роли сервера**.</span><span class="sxs-lookup"><span data-stu-id="d31ce-182">Step through the wizard until you get to **Server Roles**.</span></span> <span data-ttu-id="d31ce-183">Прокрутите вниз, чтобы найти пункт **Веб-сервер (IIS)**.</span><span class="sxs-lookup"><span data-stu-id="d31ce-183">Scroll down to find **Web Server (IIS)**.</span></span>  
  
1.  <span data-ttu-id="d31ce-184">Откройте **безопасность веб-сервера**  |  **Security** и выберите методы проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="d31ce-184">Open **Web Server** | **Security** and choose the authentication methods.</span></span>  
  
2.  <span data-ttu-id="d31ce-185">Откройте разработку приложений **веб-сервера**  |  **Application Development** и выберите расширения **CGI** и **ISAPI**.</span><span class="sxs-lookup"><span data-stu-id="d31ce-185">Open **Web Server** | **Application Development** and choose **CGI** and **ISAPI Extensions**.</span></span>  
  
     <span data-ttu-id="d31ce-186">![Добавление страницы функций для роли веб-сервера](../media/ssas-httpaccess-isapicgi.png "Добавление страницы функций для роли веб-сервера")</span><span class="sxs-lookup"><span data-stu-id="d31ce-186">![Add features page for Web server role](../media/ssas-httpaccess-isapicgi.png "Add features page for Web server role")</span></span>  
  
 <span data-ttu-id="d31ce-187">**Если службы IIS запущены на удаленном сервере**</span><span class="sxs-lookup"><span data-stu-id="d31ce-187">**When IIS is on a remote server**</span></span>  
  
 <span data-ttu-id="d31ce-188">Для удаленного подключения между службами IIS и Analysis Services необходимо установить поставщик OLE DB служб Analysis Services (MSOLAP) на сервере Windows, где запущены службы IIS.</span><span class="sxs-lookup"><span data-stu-id="d31ce-188">A remote connection between IIS and Analysis Services requires that you install the Analysis Services OLE DB provider (MSOLAP) on the Windows server running IIS.</span></span>  
  
1.  <span data-ttu-id="d31ce-189">Перейдите на страницу загрузки [пакета дополнительных компонентов SQL Server 2014](https://www.microsoft.com/download/details.aspx?id=42295)</span><span class="sxs-lookup"><span data-stu-id="d31ce-189">Go to the download page for [SQL Server 2014 Feature Pack](https://www.microsoft.com/download/details.aspx?id=42295)</span></span>  
  
2.  <span data-ttu-id="d31ce-190">Щелкните красную кнопку "Скачать".</span><span class="sxs-lookup"><span data-stu-id="d31ce-190">Click the red Download button.</span></span>  
  
3.  <span data-ttu-id="d31ce-191">Прокрутите вниз, чтобы найти ENU\x64\SQL_AS_OLEDB.msi</span><span class="sxs-lookup"><span data-stu-id="d31ce-191">Scroll down to find ENU\x64\SQL_AS_OLEDB.msi</span></span>  
  
4.  <span data-ttu-id="d31ce-192">Выполните инструкции мастера, чтобы завершить установку.</span><span class="sxs-lookup"><span data-stu-id="d31ce-192">Follow the instructions in the wizard to complete the installation.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="d31ce-193">Не забудьте разблокировать порты в брандмауэре Windows, чтобы он разрешал клиентские подключения к удаленному серверу служб Analysis Services.</span><span class="sxs-lookup"><span data-stu-id="d31ce-193">Remember to unblock the ports in Windows Firewall to allow client connections to a remote Analysis Services server.</span></span> <span data-ttu-id="d31ce-194">Дополнительные сведения см. в статье [Configure the Windows Firewall to Allow Analysis Services Access](configure-the-windows-firewall-to-allow-analysis-services-access.md).</span><span class="sxs-lookup"><span data-stu-id="d31ce-194">For more information, see [Configure the Windows Firewall to Allow Analysis Services Access](configure-the-windows-firewall-to-allow-analysis-services-access.md).</span></span>  
  
##  <a name="step-1-copy-the-msmdpump-files-to-a-folder-on-the-web-server"></a><a name="bkmk_copy"></a><span data-ttu-id="d31ce-195">Шаг 1. копирование файлов MSMDPUMP в папку на веб-сервере</span><span class="sxs-lookup"><span data-stu-id="d31ce-195">Step 1: Copy the MSMDPUMP files to a folder on the Web server</span></span>  
 <span data-ttu-id="d31ce-196">Каждая создаваемая конечная точка HTTP должна иметь собственный набор файлов MSMDPUMP.</span><span class="sxs-lookup"><span data-stu-id="d31ce-196">Each HTTP endpoint that you create must have its own set of MSMDPUMP files.</span></span> <span data-ttu-id="d31ce-197">На этом этапе необходимо скопировать исполняемый файл MSMDPUMP, файл конфигурации и папку ресурсов из папок программ служб Analysis Services в новую папку виртуального каталога. Эта папка будет создана в файловой системе компьютера, на котором выполняется служба IIS.</span><span class="sxs-lookup"><span data-stu-id="d31ce-197">In this step, you copy the MSMDPUMP executable, configuration file, and resource folder from the Analysis Services program folders to a new virtual directory folder that you will create on the file system of the computer running IIS.</span></span>  
  
 <span data-ttu-id="d31ce-198">Диск должен быть отформатирован для работы с файловой системой NTFS.</span><span class="sxs-lookup"><span data-stu-id="d31ce-198">The drive must be formatted for the NTFS file system.</span></span> <span data-ttu-id="d31ce-199">Путь к создаваемой папке не должен содержать пробелов.</span><span class="sxs-lookup"><span data-stu-id="d31ce-199">The path to the folder that you create must not contain any spaces.</span></span>  
  
1.  <span data-ttu-id="d31ce-200">Скопируйте следующие файлы, расположенные в \<drive> папке: \Program Files\Microsoft SQL Server \\<instance \> \OLAP\bin\isapi: MSMDPUMP.DLL, MSMDPUMP.INI и папку ресурсов.</span><span class="sxs-lookup"><span data-stu-id="d31ce-200">Copy the following files, found at \<drive>:\Program Files\Microsoft SQL Server\\<instance\>\OLAP\bin\isapi: MSMDPUMP.DLL, MSMDPUMP.INI, and a Resources folder.</span></span>  
  
     <span data-ttu-id="d31ce-201">![Файлы в проводнике для копирования](../media/ssas-httpaccess-msmdpumpfilecopy.PNG "Файлы в проводнике для копирования")</span><span class="sxs-lookup"><span data-stu-id="d31ce-201">![File Explorer showing files to copy](../media/ssas-httpaccess-msmdpumpfilecopy.PNG "File Explorer showing files to copy")</span></span>  
  
2.  <span data-ttu-id="d31ce-202">На веб-сервере создайте новую папку: \<drive> : \Inetpub\wwwroot \\ **OLAP**</span><span class="sxs-lookup"><span data-stu-id="d31ce-202">On the web server, create a new folder: \<drive>:\inetpub\wwwroot\\**OLAP**</span></span>  
  
3.  <span data-ttu-id="d31ce-203">Вставьте ранее скопированные файлы в эту новую папку.</span><span class="sxs-lookup"><span data-stu-id="d31ce-203">Paste the files that you previously copied into this new folder.</span></span>  
  
4.  <span data-ttu-id="d31ce-204">Проверьте, чтобы в папке \inetpub\wwwroot\OLAP на веб-сервере содержалось следующее: файлы MSMDPUMP.DLL, MSMDPUMP.INI и папка Resources.</span><span class="sxs-lookup"><span data-stu-id="d31ce-204">Verify that the \inetpub\wwwroot\OLAP folder on your web server contains the following: MSMDPUMP.DLL, MSMDPUMP.INI, and a Resources folder.</span></span> <span data-ttu-id="d31ce-205">Структура папки должна выглядеть следующим образом:</span><span class="sxs-lookup"><span data-stu-id="d31ce-205">Your folder structure should look like this:</span></span>  
  
    -   <span data-ttu-id="d31ce-206">\<drive>:\inetpub\wwwroot\OLAP\MSMDPUMP.dll</span><span class="sxs-lookup"><span data-stu-id="d31ce-206">\<drive>:\inetpub\wwwroot\OLAP\MSMDPUMP.dll</span></span>  
  
    -   <span data-ttu-id="d31ce-207">\<drive>:\inetpub\wwwroot\OLAP\MSMDPUMP.ini</span><span class="sxs-lookup"><span data-stu-id="d31ce-207">\<drive>:\inetpub\wwwroot\OLAP\MSMDPUMP.ini</span></span>  
  
    -   <span data-ttu-id="d31ce-208">\<drive>: \Инетпуб\ввврут\олап\ресаурцес</span><span class="sxs-lookup"><span data-stu-id="d31ce-208">\<drive>:\inetpub\wwwroot\OLAP\Resources</span></span>  
  
##  <a name="step-2-create-an-application-pool-and-virtual-directory-in-iis"></a><a name="bkmk_appPool"></a> <span data-ttu-id="d31ce-209">Шаг 2. Создание пула приложений и виртуального каталога на сервере IIS</span><span class="sxs-lookup"><span data-stu-id="d31ce-209">Step 2: Create an application pool and virtual directory in IIS</span></span>  
 <span data-ttu-id="d31ce-210">Затем создайте пул приложений и конечную точку для средства переноса.</span><span class="sxs-lookup"><span data-stu-id="d31ce-210">Next, create an application pool and an endpoint to the pump.</span></span>  
  
#### <a name="create-an-application-pool"></a><span data-ttu-id="d31ce-211">Создание пула приложений</span><span class="sxs-lookup"><span data-stu-id="d31ce-211">Create an application pool</span></span>  
  
1.  <span data-ttu-id="d31ce-212">Запустите диспетчер IIS.</span><span class="sxs-lookup"><span data-stu-id="d31ce-212">Start IIS Manager.</span></span>  
  
2.  <span data-ttu-id="d31ce-213">Откройте папку сервера, щелкните правой кнопкой мыши **Пулы приложений** и выберите пункт **Добавить пул приложений**.</span><span class="sxs-lookup"><span data-stu-id="d31ce-213">Open the server folder, right-click **Application Pools** and then click **Add Application Pool**.</span></span> <span data-ttu-id="d31ce-214">Используя .NET Framework, создайте пул приложений с именем **OLAP**, а для управляемого конвейера установите режим **Классический**.</span><span class="sxs-lookup"><span data-stu-id="d31ce-214">Create an application pool named **OLAP**, using the .NET Framework, with Managed pipeline mode set to **Classic**.</span></span>  
  
     <span data-ttu-id="d31ce-215">![Снимок экрана: диалоговое окно «Добавление пула приложений»](../media/ssas-httpaccess.PNG "Снимок экрана: диалоговое окно «Добавление пула приложений»")</span><span class="sxs-lookup"><span data-stu-id="d31ce-215">![Screenshot of Add Application Pool dialog](../media/ssas-httpaccess.PNG "Screenshot of Add Application Pool dialog")</span></span>  
  
3.  <span data-ttu-id="d31ce-216">По умолчанию службы IIS создают пулы приложений с использованием **ApplicationPoolIdentity** в качестве удостоверения безопасности, которое является допустимым выбором для доступа к службам Analysis Services по протоколу HTTP.</span><span class="sxs-lookup"><span data-stu-id="d31ce-216">By default, IIS creates application pools using **ApplicationPoolIdentity** as the security identity, which is a valid choice for HTTP access to Analysis Services.</span></span> <span data-ttu-id="d31ce-217">Если вам по какой-либо причине нужно изменить удостоверение, щелкните правой кнопкой мыши **OLAP**и выберите пункт **Дополнительные параметры**.</span><span class="sxs-lookup"><span data-stu-id="d31ce-217">If you have specific reasons for changing the identity, right-click **OLAP**, and then select **Advanced Settings**.</span></span> <span data-ttu-id="d31ce-218">Выберите **ApplicationPoolIdentity**.</span><span class="sxs-lookup"><span data-stu-id="d31ce-218">Select **ApplicationPoolIdentity**.</span></span> <span data-ttu-id="d31ce-219">Нажмите кнопку **Изменить** , относящуюся к этому свойству, чтобы заменить встроенную учетную запись пользовательской учетной записью, которая будет использоваться.</span><span class="sxs-lookup"><span data-stu-id="d31ce-219">Click the **Change** button for this property to replace the built-in account with the custom account you want to use.</span></span>  
  
     <span data-ttu-id="d31ce-220">![Снимок экрана: страница свойств «Дополнительные параметры»](../media/ssas-httpaccess-advsettings.PNG "Снимок экрана: страница свойств «Дополнительные параметры»")</span><span class="sxs-lookup"><span data-stu-id="d31ce-220">![Screenshot of Advanced Settings property page](../media/ssas-httpaccess-advsettings.PNG "Screenshot of Advanced Settings property page")</span></span>  
  
4.  <span data-ttu-id="d31ce-221">По умолчанию в 64-разрядной версии операционной системы служба IIS присваивает свойству **Разрешить 32-разрядные приложения** значение **false**.</span><span class="sxs-lookup"><span data-stu-id="d31ce-221">By default, on a 64-bit operating system, IIS sets the **Enable 32-bit Applications** property to **false**.</span></span> <span data-ttu-id="d31ce-222">Если файл msmdpump.dll скопирован из 64-разрядной установки служб Analysis Services, то настройка модуля MSMDPUMP на 64-разрядном сервере IIS уже выполнена правильно.</span><span class="sxs-lookup"><span data-stu-id="d31ce-222">If you copied msmdpump.dll from a 64-bit installation of Analysis Services, this is the correct setting for the MSMDPUMP extension on a 64-bit IIS server.</span></span> <span data-ttu-id="d31ce-223">Если двоичные файлы MSMDPUMP скопированы из 32-разрядной установки, присвойте этому параметру значение **true**.</span><span class="sxs-lookup"><span data-stu-id="d31ce-223">If you copied the MSMDPUMP binaries from a 32-bit installation, set it to **true**.</span></span> <span data-ttu-id="d31ce-224">Проверьте это свойство в разделе **Дополнительные параметры** , чтобы убедиться, что оно задано правильно.</span><span class="sxs-lookup"><span data-stu-id="d31ce-224">Check this property now in **Advanced Settings** to ensure it is set correctly.</span></span>  
  
#### <a name="create-an-application"></a><span data-ttu-id="d31ce-225">Создание приложения</span><span class="sxs-lookup"><span data-stu-id="d31ce-225">Create an application</span></span>  
  
1.  <span data-ttu-id="d31ce-226">В диспетчере IIS откройте **Сайты**, а затем откройте **Веб-сайт по умолчанию**.</span><span class="sxs-lookup"><span data-stu-id="d31ce-226">In IIS Manager, open **Sites**, open **Default Web Site**.</span></span> <span data-ttu-id="d31ce-227">Должна появиться папка с именем **Olap**.</span><span class="sxs-lookup"><span data-stu-id="d31ce-227">You should see a folder named **Olap**.</span></span> <span data-ttu-id="d31ce-228">Это ссылка на папку OLAP, созданную в каталоге \inetpub\wwwroot.</span><span class="sxs-lookup"><span data-stu-id="d31ce-228">This is a reference to the OLAP folder you created under \inetpub\wwwroot.</span></span>  
  
     <span data-ttu-id="d31ce-229">![Папка OLAP на веб-узле по умолчанию](../media/ssas-httpaccess-convertfolderbefore.png "Папка OLAP на веб-узле по умолчанию")</span><span class="sxs-lookup"><span data-stu-id="d31ce-229">![OLAP folder under default web site](../media/ssas-httpaccess-convertfolderbefore.png "OLAP folder under default web site")</span></span>  
  
2.  <span data-ttu-id="d31ce-230">Щелкните правой кнопкой мыши папку и выберите пункт **Преобразовать в приложение**.</span><span class="sxs-lookup"><span data-stu-id="d31ce-230">Right-click the folder and choose **Convert to Application**.</span></span>  
  
3.  <span data-ttu-id="d31ce-231">В окне "Добавление приложения" введите **OLAP** для псевдонима.</span><span class="sxs-lookup"><span data-stu-id="d31ce-231">In Add Application, enter **OLAP** for the alias.</span></span> <span data-ttu-id="d31ce-232">Щелкните **Выбрать** , чтобы выбрать пул приложений OLAP.</span><span class="sxs-lookup"><span data-stu-id="d31ce-232">Click **Select** to choose the OLAP application pool.</span></span> <span data-ttu-id="d31ce-233">Физический путь должен иметь значение C:\inetpub\wwwroot\OLAP</span><span class="sxs-lookup"><span data-stu-id="d31ce-233">Physical Path should be set to C:\inetpub\wwwroot\OLAP</span></span>  
  
     <span data-ttu-id="d31ce-234">![Диалоговое окно «Добавление приложения»](../media/ssas-httpaccess-convertedapp.png "Диалоговое окно «Добавление приложения»")</span><span class="sxs-lookup"><span data-stu-id="d31ce-234">![Add Application dialog box](../media/ssas-httpaccess-convertedapp.png "Add Application dialog box")</span></span>  
  
4.  <span data-ttu-id="d31ce-235">Нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="d31ce-235">Click **OK**.</span></span> <span data-ttu-id="d31ce-236">Обновите веб-сайт и обратите внимание, что теперь папка OLAP является приложением на веб-сайте по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="d31ce-236">Refresh the web site and notice that the OLAP folder is now an application under the default web site.</span></span> <span data-ttu-id="d31ce-237">Виртуальный путь к файлу MSMDPUMP установлен.</span><span class="sxs-lookup"><span data-stu-id="d31ce-237">The virtual path to the MSMDPUMP file is now established.</span></span>  
  
     <span data-ttu-id="d31ce-238">![Папка OLAP после преобразования приложения](../media/ssas-httpaccess-convertfolderafter.png "Папка OLAP после преобразования приложения")</span><span class="sxs-lookup"><span data-stu-id="d31ce-238">![OLAP folder after app conversion](../media/ssas-httpaccess-convertfolderafter.png "OLAP folder after app conversion")</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="d31ce-239">В предыдущие версии этих инструкций входили действия по созданию виртуального каталога.</span><span class="sxs-lookup"><span data-stu-id="d31ce-239">Previous versions of these instructions included steps for creating a virtual directory.</span></span> <span data-ttu-id="d31ce-240">Теперь они не требуются.</span><span class="sxs-lookup"><span data-stu-id="d31ce-240">That step is no longer necessary.</span></span>  
  
##  <a name="step-3-configure-iis-authentication-and-add-the-extension"></a><a name="bkmk_auth"></a> <span data-ttu-id="d31ce-241">Шаг 3. Настройка аутентификации IIS и добавление расширения</span><span class="sxs-lookup"><span data-stu-id="d31ce-241">Step 3: Configure IIS authentication and add the extension</span></span>  
 <span data-ttu-id="d31ce-242">В этом шаге продолжается настройка только что созданного виртуального каталога SSAS.</span><span class="sxs-lookup"><span data-stu-id="d31ce-242">In this step, you further configure the SSAS virtual directory you just created.</span></span> <span data-ttu-id="d31ce-243">Должен быть указан метод проверки подлинности, а затем добавлена схема скриптов.</span><span class="sxs-lookup"><span data-stu-id="d31ce-243">You will specify an authentication method and then add a script map.</span></span> <span data-ttu-id="d31ce-244">Поддерживаемые методы проверки подлинности для доступа к службам Analysis Services по протоколу HTTP:</span><span class="sxs-lookup"><span data-stu-id="d31ce-244">Supported authentication methods for Analysis Services over HTTP include:</span></span>  
  
-   <span data-ttu-id="d31ce-245">Проверка подлинности Windows (Kerberos или NTLM)</span><span class="sxs-lookup"><span data-stu-id="d31ce-245">Windows authentication (Kerberos or NTLM)</span></span>  
  
-   <span data-ttu-id="d31ce-246">Обычная проверка подлинности</span><span class="sxs-lookup"><span data-stu-id="d31ce-246">Basic authentication</span></span>  
  
-   <span data-ttu-id="d31ce-247">анонимная аутентификация;</span><span class="sxs-lookup"><span data-stu-id="d31ce-247">Anonymous authentication</span></span>  
  
 <span data-ttu-id="d31ce-248">**Проверка подлинности Windows** считается наиболее безопасной и предусматривает применение существующей инфраструктуры для сетей, в которых используется Active Directory.</span><span class="sxs-lookup"><span data-stu-id="d31ce-248">**Windows authentication** is considered the most secure, and leverages existing infrastructure for networks that use Active Directory.</span></span> <span data-ttu-id="d31ce-249">Чтобы проверка подлинности Windows использовалась эффективно, ее должны поддерживать все браузеры, клиентские и серверные приложения.</span><span class="sxs-lookup"><span data-stu-id="d31ce-249">To use Windows authentication effectively, all browsers, client applications, and server applications must support it.</span></span> <span data-ttu-id="d31ce-250">Это — наиболее безопасный режим, который рекомендуется использовать. Но для этого серверу IIS требуется доступ к контроллеру домена Windows, который может проверить подлинность идентификатора пользователя, запрашивающего подключение.</span><span class="sxs-lookup"><span data-stu-id="d31ce-250">This is the most secure and recommended mode, but it requires that IIS be able to access a Windows domain controller that can authenticate the identity of the user requesting a connection.</span></span>  
  
 <span data-ttu-id="d31ce-251">В таких топологиях, которые предусматривают размещение служб Analysis Services и IIS на разных компьютерах, приходится решать проблемы двойного транзитного перехода, которые возникают в связи с необходимостью делегировать проверку учетных данных пользователя второй службе на удаленном компьютере, как правило, путем включения служб Analysis Services для ограниченного делегирования Kerberos.</span><span class="sxs-lookup"><span data-stu-id="d31ce-251">For topologies that put Analysis Services and IIS on different computers, you will need to address double-hop issues that arise when a user identity needs to be delegated to a second service on a remote machine, typically by enabling Analysis Services for Kerberos constrained delegation.</span></span> <span data-ttu-id="d31ce-252">Дополнительные сведения см. в разделе [Configure Analysis Services for Kerberos constrained delegation](configure-analysis-services-for-kerberos-constrained-delegation.md).</span><span class="sxs-lookup"><span data-stu-id="d31ce-252">For more information, see [Configure Analysis Services for Kerberos constrained delegation](configure-analysis-services-for-kerberos-constrained-delegation.md).</span></span>  
  
 <span data-ttu-id="d31ce-253">**Обычная проверка подлинности** используется при наличии идентификаторов Windows, но пользовательские запросы на подключение поступают из недоверенных доменов, что не позволяет устанавливать делегированные или олицетворяемые подключения.</span><span class="sxs-lookup"><span data-stu-id="d31ce-253">**Basic authentication** is used when you have Windows identities, but user connections are from non-trusted domains, prohibiting the use of delegated or impersonated connections.</span></span> <span data-ttu-id="d31ce-254">Обычная проверка подлинности позволяет указать учетные данные пользователя и пароль в строке подключения.</span><span class="sxs-lookup"><span data-stu-id="d31ce-254">Basic authentication lets you specify a user identity and password on a connection string.</span></span> <span data-ttu-id="d31ce-255">Для подключения к службам Analysis Services вместо контекста безопасности текущего пользователя применяются учетные данные из строки подключения.</span><span class="sxs-lookup"><span data-stu-id="d31ce-255">Instead of using the security context of the current user, credentials on the connection string are used to connect to Analysis Services.</span></span> <span data-ttu-id="d31ce-256">Службы Analysis Services поддерживают только проверку подлинности Windows, поэтому любые передаваемые им учетные данные должны представлять пользователя (или группу) Windows, который является членом домена, где размещены службы Analysis Services.</span><span class="sxs-lookup"><span data-stu-id="d31ce-256">Because Analysis Services supports only Windows authentication, any credentials passed to it must be a Windows user or group that is a member of the domain in which Analysis Services is hosted.</span></span>  
  
 <span data-ttu-id="d31ce-257">**Анонимная проверка подлинности** часто используется во время начального тестирования, поскольку при этом настройка является несложной и это позволяет быстро проверить возможность подключения к службам Analysis Services по протоколу HTTP.</span><span class="sxs-lookup"><span data-stu-id="d31ce-257">**Anonymous authentication** is often used during initial testing because its ease of configuration helps you to quickly validate HTTP connectivity to Analysis Services.</span></span> <span data-ttu-id="d31ce-258">С помощью всего лишь нескольких шагов можно назначить уникальную учетную запись пользователя в качестве идентификатора, предоставить этой учетной записи разрешения в службах Analysis Services, воспользоваться учетной записью для проверки возможности доступа к данным в клиентском приложении, а затем отключить анонимную проверку подлинности по завершении тестирования.</span><span class="sxs-lookup"><span data-stu-id="d31ce-258">In just a few steps, you can assign a unique user account as the identity, grant that account permissions in Analysis Services, use the account to verify data access in a client application, and then disable Anonymous authentication when testing is complete.</span></span>  
  
 <span data-ttu-id="d31ce-259">Анонимную проверку подлинности можно также использовать в рабочей среде, если у пользователей нет учетных записей Windows, но они следуют рекомендациям (блокируют распространение разрешений на хост-систему), приведенным в статье [Включение анонимной проверки подлинности (IIS 7)](https://technet.microsoft.com/library/cc731244\(v=ws.10\).aspx).</span><span class="sxs-lookup"><span data-stu-id="d31ce-259">You can also use Anonymous authentication in a production environment if your users do not have Windows user accounts, but follow best practices by locking down permissions on the host system, as called out in this article: [Enable Anonymous Authentication (IIS 7)](https://technet.microsoft.com/library/cc731244\(v=ws.10\).aspx).</span></span> <span data-ttu-id="d31ce-260">Проверка подлинности должна задаваться применительно к виртуальному каталогу, а не к родительскому веб-сайту, что позволяет дополнительно понизить уровень доступа учетной записи.</span><span class="sxs-lookup"><span data-stu-id="d31ce-260">Be sure that authentication is set on the virtual directory, and not on the parent web site, to further reduce the level of account access.</span></span>  
  
 <span data-ttu-id="d31ce-261">Если включена анонимная проверка подлинности, то любое пользовательское соединение с конечной точкой HTTP получает разрешение на подключение в качестве анонимного пользователя.</span><span class="sxs-lookup"><span data-stu-id="d31ce-261">When Anonymous is enabled, any user connection to the HTTP endpoint is allowed to connect as the anonymous user.</span></span> <span data-ttu-id="d31ce-262">Вы не сможете проводить аудит подключений отдельных пользователей, а также использовать удостоверение пользователя для выбора данных из модели.</span><span class="sxs-lookup"><span data-stu-id="d31ce-262">You won't be able to audit individual user connections, nor use the user identity to select data from a model.</span></span> <span data-ttu-id="d31ce-263">Вполне очевидно, что применение анонимной проверки подлинности затрагивает все, начиная от проектирования модели и заканчивая обновлением данных и доступом к ним.</span><span class="sxs-lookup"><span data-stu-id="d31ce-263">As you can see, using Anonymous impacts everything from model design, to data refresh and access.</span></span> <span data-ttu-id="d31ce-264">Но если пользователи не имеют имен входа пользователей Windows, с которых можно было бы начать, то единственным вариантом становится применение анонимной учетной записи.</span><span class="sxs-lookup"><span data-stu-id="d31ce-264">However, if users do not have a Windows user login to start with, using the Anonymous account might be your only option.</span></span>  
  
#### <a name="set-the-authentication-type-and-add-a-script-map"></a><span data-ttu-id="d31ce-265">Задание типа проверки подлинности и добавление сопоставления скриптов</span><span class="sxs-lookup"><span data-stu-id="d31ce-265">Set the authentication type and add a script map</span></span>  
  
1.  <span data-ttu-id="d31ce-266">В диспетчере служб IIS откройте **Веб-сайты**, откройте **Веб-сайт по умолчанию**и выберите виртуальный каталог **OLAP** .</span><span class="sxs-lookup"><span data-stu-id="d31ce-266">In IIS Manager, open **Sites**, open **Default Web Site**, and then select the **OLAP** virtual directory.</span></span>  
  
2.  <span data-ttu-id="d31ce-267">Дважды щелкните элемент **Проверка подлинности** в разделе IIS на главной странице.</span><span class="sxs-lookup"><span data-stu-id="d31ce-267">Double-click **Authentication** in the IIS section of the main page.</span></span>  
  
     <span data-ttu-id="d31ce-268">![Снимок экрана: главная страница диспетчера служб IIS](../media/ssas-httpaccess-iis.png "Снимок экрана: главная страница диспетчера служб IIS")</span><span class="sxs-lookup"><span data-stu-id="d31ce-268">![Screenshot of IIS Manager main page](../media/ssas-httpaccess-iis.png "Screenshot of IIS Manager main page")</span></span>  
  
3.  <span data-ttu-id="d31ce-269">Если используется встроенная безопасность Windows, выберите пункт **Проверка подлинности Windows** .</span><span class="sxs-lookup"><span data-stu-id="d31ce-269">Enable **Windows Authentication** if you are using Windows integrated security.</span></span>  
  
     <span data-ttu-id="d31ce-270">![Снимок экрана: параметры проверки подлинности Vdir](../media/ssas-httpaccess-iisauth.png "Снимок экрана: параметры проверки подлинности Vdir")</span><span class="sxs-lookup"><span data-stu-id="d31ce-270">![Screenshot of Vdir Authentication settings](../media/ssas-httpaccess-iisauth.png "Screenshot of Vdir Authentication settings")</span></span>  
  
4.  <span data-ttu-id="d31ce-271">Или включите **обычную проверку подлинности** , если клиентские и серверные приложения находятся в разных доменах.</span><span class="sxs-lookup"><span data-stu-id="d31ce-271">Alternatively, enable **Basic Authentication** if your client and server applications are in different domains.</span></span> <span data-ttu-id="d31ce-272">В этом режиме пользователь должен вводить имя пользователя и пароль.</span><span class="sxs-lookup"><span data-stu-id="d31ce-272">This mode requires the user to enter a user name and password.</span></span> <span data-ttu-id="d31ce-273">Имя пользователя и пароль передаются через HTTP-соединение в службы IIS.</span><span class="sxs-lookup"><span data-stu-id="d31ce-273">The user name and password are transmitted over the HTTP connection to IIS.</span></span> <span data-ttu-id="d31ce-274">При подключении к MSMDPUMP в службах IIS предпринимается попытка олицетворения пользователя с применением предоставленных учетных данных, но эти учетные данные не будут делегированы в службы Analysis Services.</span><span class="sxs-lookup"><span data-stu-id="d31ce-274">IIS will try to impersonate the user using the provided credentials when connecting to MSMDPUMP, but the credentials will not be delegated to Analysis Services.</span></span> <span data-ttu-id="d31ce-275">Вместо этого необходимо передать через подключение допустимое имя пользователя и пароль, как описано в шаге 6 этого документа.</span><span class="sxs-lookup"><span data-stu-id="d31ce-275">Instead, you will need to pass a valid user name and password on a connection, as described in Step 6 in this document.</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="d31ce-276">Следует учитывать, что при построении системы, в которой пароль передается по каналу связи, необходимо предусмотреть способ защиты этого канала.</span><span class="sxs-lookup"><span data-stu-id="d31ce-276">Please note that it is imperative for anyone building a system where the password is transmitted to have ways of securing the communication channel.</span></span> <span data-ttu-id="d31ce-277">Службы IIS предоставляют набор средств, помогающих защитить канал.</span><span class="sxs-lookup"><span data-stu-id="d31ce-277">IIS provides a set of tools that help you secure the channel.</span></span> <span data-ttu-id="d31ce-278">Дополнительные сведения см. в разделе [Настройка SSL в IIS 7](https://go.microsoft.com/fwlink/?LinkId=207562).</span><span class="sxs-lookup"><span data-stu-id="d31ce-278">For more information, see [How to Set Up SSL on IIS 7](https://go.microsoft.com/fwlink/?LinkId=207562).</span></span>  
  
5.  <span data-ttu-id="d31ce-279">Отключите **анонимную проверку подлинности** , если используется проверка подлинности Windows или обычная проверка подлинности.</span><span class="sxs-lookup"><span data-stu-id="d31ce-279">Disable **Anonymous Authentication** if you are using Windows or Basic authentication.</span></span> <span data-ttu-id="d31ce-280">Если включена анонимная проверка подлинности, в службах IIS она всегда используется в первую очередь, даже если включены другие методы проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="d31ce-280">When Anonymous authentication is enabled, IIS will always use it first, even if other authentication methods are enabled.</span></span>  
  
     <span data-ttu-id="d31ce-281">При анонимной проверке подлинности средство ввода-вывода (msmdpump.dll) работает в качестве учетной записи пользователя, установленной для анонимного пользователя.</span><span class="sxs-lookup"><span data-stu-id="d31ce-281">Under Anonymous authentication, the pump (msmdpump.dll) runs as the user account you established for anonymous user.</span></span> <span data-ttu-id="d31ce-282">Нет никакого различия между пользователем, подключающимся к службам IIS, и пользователем, подключающимся к службам Analysis Services.</span><span class="sxs-lookup"><span data-stu-id="d31ce-282">There is no distinction between the user connecting to IIS and the user connecting to Analysis Services.</span></span> <span data-ttu-id="d31ce-283">По умолчанию в службах IIS используется учетная запись IUSR, но можно сменить ее на учетную запись пользователя домена, которая имеет разрешения в сети.</span><span class="sxs-lookup"><span data-stu-id="d31ce-283">By default, IIS uses the IUSR account, but you can change it to a domain user account that has network permissions.</span></span> <span data-ttu-id="d31ce-284">Эта возможность необходима, если службы IIS и Analysis Services находятся на разных компьютерах.</span><span class="sxs-lookup"><span data-stu-id="d31ce-284">You'll need this capability if IIS and Analysis Services are on different computers.</span></span>  
  
     <span data-ttu-id="d31ce-285">Инструкции по настройке учетных данных для анонимной проверки подлинности см. в разделе [Анонимная проверка подлинности](http://www.iis.net/configreference/system.webserver/security/authentication/anonymousauthentication).</span><span class="sxs-lookup"><span data-stu-id="d31ce-285">For instructions on how to configure credentials for Anonymous authentication, see [Anonymous Authentication](http://www.iis.net/configreference/system.webserver/security/authentication/anonymousauthentication).</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="d31ce-286">Наиболее велика вероятность того, что с анонимной проверкой подлинности придется столкнуться в чрезвычайно строго контролируемой среде, где предоставление доступа или отказ в доступе для пользователей осуществляются с помощью списков управления доступом в файловой системе.</span><span class="sxs-lookup"><span data-stu-id="d31ce-286">Anonymous authentication is most likely found in an extremely controlled environment, where users are given or denied access by way of access control lists in the file system.</span></span> <span data-ttu-id="d31ce-287">Рекомендации см. в статье [Включение анонимной проверки подлинности (IIS 7)](https://technet.microsoft.com/library/cc731244\(v=ws.10\).aspx).</span><span class="sxs-lookup"><span data-stu-id="d31ce-287">For best practices, see [Enable Anonymous Authentication (IIS 7)](https://technet.microsoft.com/library/cc731244\(v=ws.10\).aspx).</span></span>  
  
6.  <span data-ttu-id="d31ce-288">Щелкните виртуальный каталог **OLAP** , чтобы открыть главную страницу.</span><span class="sxs-lookup"><span data-stu-id="d31ce-288">Click the **OLAP** virtual directory to open the main page.</span></span> <span data-ttu-id="d31ce-289">Дважды щелкните элемент **Сопоставления обработчика**.</span><span class="sxs-lookup"><span data-stu-id="d31ce-289">Double-click **Handler Mappings**.</span></span>  
  
     <span data-ttu-id="d31ce-290">![Значок сопоставления обработчика на странице компонента](../media/ssas-httpaccess-handlermapping.png "Значок сопоставления обработчика на странице компонента")</span><span class="sxs-lookup"><span data-stu-id="d31ce-290">![Handler mapping icon in feature page](../media/ssas-httpaccess-handlermapping.png "Handler mapping icon in feature page")</span></span>  
  
7.  <span data-ttu-id="d31ce-291">Щелкните правой кнопкой мыши в любом месте страницы и выберите пункт **Добавить карту скриптов**.</span><span class="sxs-lookup"><span data-stu-id="d31ce-291">Right-click anywhere on the page and then select **Add Script Map**.</span></span> <span data-ttu-id="d31ce-292">В диалоговом окне Добавление схемы скрипта в качестве пути запроса укажите \*\* \* . dll\*\* , укажите c:\inetpub\wwwroot\OLAP\msmdpump.dll в качестве исполняемого файла и введите в качестве имени **OLAP** .</span><span class="sxs-lookup"><span data-stu-id="d31ce-292">In the Add Script Map dialog box, specify **\*.dll** as the request path, specify c:\inetpub\wwwroot\OLAP\msmdpump.dll as the executable, and type **OLAP** as the name.</span></span> <span data-ttu-id="d31ce-293">Сохраните все ограничения по умолчанию, связанные с этой картой скриптов.</span><span class="sxs-lookup"><span data-stu-id="d31ce-293">Keep all of the default restrictions associated with this script map.</span></span>  
  
     <span data-ttu-id="d31ce-294">![Снимок экрана: диалоговое окно «Добавление карты скрипта»](../media/ssas-httpaccess-addscript.png "Снимок экрана: диалоговое окно «Добавление карты скрипта»")</span><span class="sxs-lookup"><span data-stu-id="d31ce-294">![Screenshot of Add Script Map dialog box](../media/ssas-httpaccess-addscript.png "Screenshot of Add Script Map dialog box")</span></span>  
  
8.  <span data-ttu-id="d31ce-295">При запросе на включение расширения ISAPI нажмите кнопку **Да**.</span><span class="sxs-lookup"><span data-stu-id="d31ce-295">When prompted to allow the ISAPI extension, click **Yes**.</span></span>  
  
     <span data-ttu-id="d31ce-296">![Снимок экрана: подтверждение добавления расширения ISAPI](../media/ssas-httpaccess-isapiprompt.png "Снимок экрана: подтверждение добавления расширения ISAPI")</span><span class="sxs-lookup"><span data-stu-id="d31ce-296">![Screenshot of confirmation to add ISAPI extension](../media/ssas-httpaccess-isapiprompt.png "Screenshot of confirmation to add ISAPI extension")</span></span>  
  
##  <a name="step-4-edit-the-msmdpumpini-file-to-set-the-target-server"></a><a name="bkmk_edit"></a> <span data-ttu-id="d31ce-297">Шаг 4. Указание целевого сервера в файле MSMDPUMP.INI</span><span class="sxs-lookup"><span data-stu-id="d31ce-297">Step 4: Edit the MSMDPUMP.INI file to set the target server</span></span>  
 <span data-ttu-id="d31ce-298">В файле MSMDPUMP.INI указан экземпляр служб Analysis Services, к которому подключается MSMDPUMP.DLL.</span><span class="sxs-lookup"><span data-stu-id="d31ce-298">The MSMDPUMP.INI file specifies the Analysis Services instance that MSMDPUMP.DLL connects to.</span></span> <span data-ttu-id="d31ce-299">Этот экземпляр может быть локальным или удаленным, установленным как применяемый по умолчанию или как именованный.</span><span class="sxs-lookup"><span data-stu-id="d31ce-299">This instance can be local or remote, installed as the default or as a named instance.</span></span>  
  
 <span data-ttu-id="d31ce-300">Откройте файл msmdpump.ini, расположенный в папке «C:\inetpub\wwwroot\OLAP», и изучите содержимое этого файла.</span><span class="sxs-lookup"><span data-stu-id="d31ce-300">Open the msmdpump.ini file located in folder C:\inetpub\wwwroot\OLAP and take a look at the contents of this file.</span></span> <span data-ttu-id="d31ce-301">Это должно выглядеть примерно так:</span><span class="sxs-lookup"><span data-stu-id="d31ce-301">It should look like the following:</span></span>  
  
```  
<ConfigurationSettings>  
<ServerName>localhost</ServerName>  
<SessionTimeout>3600</SessionTimeout>  
<ConnectionPoolSize>100</ConnectionPoolSize>  
</ConfigurationSettings>  
  
```  
  
 <span data-ttu-id="d31ce-302">Если экземпляр служб Analysis Services, для которого настраивается доступ через HTTP, расположен на локальном компьютере и является экземпляром по умолчанию, нет причин для изменения этого параметра.</span><span class="sxs-lookup"><span data-stu-id="d31ce-302">If the Analysis Services instance for which you are configuring HTTP access is located on the local computer and installed as a default instance, there is no reason to change this setting.</span></span> <span data-ttu-id="d31ce-303">В противном случае необходимо указать имя сервера (например, \<ServerName> ADWRKS-SRV01 \</ServerName> ).</span><span class="sxs-lookup"><span data-stu-id="d31ce-303">Otherwise, you must specify the server name (for example, \<ServerName>ADWRKS-SRV01\</ServerName>).</span></span> <span data-ttu-id="d31ce-304">Для сервера, установленного как именованный экземпляр, обязательно добавьте имя экземпляра (например, \<ServerName> ADWRKS-SRV01\Tabular \</ServerName> ).</span><span class="sxs-lookup"><span data-stu-id="d31ce-304">For a server that is installed as a named instance, be sure to append the instance name (for example, \<ServerName>ADWRKS-SRV01\Tabular\</ServerName>).</span></span>  
  
 <span data-ttu-id="d31ce-305">По умолчанию экземпляр служб Analysis Services прослушивает TCP/IP-порт 2383.</span><span class="sxs-lookup"><span data-stu-id="d31ce-305">By default, Analysis Services listens on TCP/IP port 2383.</span></span> <span data-ttu-id="d31ce-306">Если вы установили Analysis Services в качестве экземпляра по умолчанию, вам не нужно указывать какой-либо порт, \<ServerName> так как Analysis Services знает, как прослушивать порт 2383 автоматически.</span><span class="sxs-lookup"><span data-stu-id="d31ce-306">If you installed Analysis Services as the default instance, you do not need to specify any port in \<ServerName> because Analysis Services knows how to listen on port 2383 automatically.</span></span> <span data-ttu-id="d31ce-307">Тем не менее необходимо разрешить входящие соединения с этим портом в брандмауэре Windows.</span><span class="sxs-lookup"><span data-stu-id="d31ce-307">However, you do need to allow inbound connections to that port in Windows Firewall.</span></span> <span data-ttu-id="d31ce-308">Дополнительные сведения см. в статье [Configure the Windows Firewall to Allow Analysis Services Access](configure-the-windows-firewall-to-allow-analysis-services-access.md).</span><span class="sxs-lookup"><span data-stu-id="d31ce-308">For more information, see [Configure the Windows Firewall to Allow Analysis Services Access](configure-the-windows-firewall-to-allow-analysis-services-access.md).</span></span>  
  
 <span data-ttu-id="d31ce-309">Если вы настроили именованный или заданный по умолчанию экземпляр Analysis Services для прослушивания фиксированного порта, необходимо добавить номер порта к имени сервера (например, \<ServerName> AW-SRV01:55555 \</ServerName> ) и разрешить входящие подключения в брандмауэре Windows к этому порту.</span><span class="sxs-lookup"><span data-stu-id="d31ce-309">If you configured a named or default instance of Analysis Services to listen on a fixed port, you must add the port number to the server name (for example, \<ServerName>AW-SRV01:55555\</ServerName>) and you must allow inbound connections in Windows Firewall to that port.</span></span>  
  
## <a name="step-5-grant-data-access-permissions"></a><span data-ttu-id="d31ce-310">Шаг 5. Предоставление разрешений на доступ к данным</span><span class="sxs-lookup"><span data-stu-id="d31ce-310">Step 5: Grant data access permissions</span></span>  
 <span data-ttu-id="d31ce-311">Как было отмечено выше, необходимо предоставить разрешения на доступ к экземпляру служб Analysis Services.</span><span class="sxs-lookup"><span data-stu-id="d31ce-311">As previously noted, you will need to grant permissions on the Analysis Services instance.</span></span> <span data-ttu-id="d31ce-312">Каждый объект базы данных имеет роли, предоставляющие заданный уровень разрешений (на чтение или чтение и запись), а каждая роль имеет членов, состоящих из учетных данных пользователей Windows.</span><span class="sxs-lookup"><span data-stu-id="d31ce-312">Each database object will have roles that provide a given level of permissions (read or read/write), and each role will have members consisting of Windows user identities.</span></span>  
  
 <span data-ttu-id="d31ce-313">Для задания разрешений можно использовать среду SQL Server Management Studio.</span><span class="sxs-lookup"><span data-stu-id="d31ce-313">To set permissions, you can use SQL Server Management Studio.</span></span> <span data-ttu-id="d31ce-314">В папке "роли **базы данных**"  |  **Roles** можно создавать роли, задавать разрешения базы данных, назначать членство в учетных записях пользователей или групп Windows, а затем предоставлять разрешения на чтение или запись для конкретных объектов.</span><span class="sxs-lookup"><span data-stu-id="d31ce-314">Under the **Database** | **Roles** folder, you can create roles, specify database permissions, assign membership to Windows user or group accounts, and then grant read or write permissions on specific objects.</span></span> <span data-ttu-id="d31ce-315">Как правило, для клиентских подключений, в которых используются, но не обновляются, данные модели, достаточно разрешений **на чтение** применительно к кубу.</span><span class="sxs-lookup"><span data-stu-id="d31ce-315">Typically, **Read** permissions on a cube are sufficient for client connections that use, but do not update, model data.</span></span>  
  
 <span data-ttu-id="d31ce-316">Назначение ролей зависит от того, как настроена проверка подлинности.</span><span class="sxs-lookup"><span data-stu-id="d31ce-316">Role assignment varies depending on how you configured authentication.</span></span>  
  
|||  
|-|-|  
|<span data-ttu-id="d31ce-317">Анонимный</span><span class="sxs-lookup"><span data-stu-id="d31ce-317">Anonymous</span></span>|<span data-ttu-id="d31ce-318">Добавьте к списку Membership учетную запись, указанную в окне **Редактирование учетных данных анонимной проверки подлинности** в службах IIS.</span><span class="sxs-lookup"><span data-stu-id="d31ce-318">Add to the Membership list the account specified in **Edit Anonymous Authentication Credentials** in IIS.</span></span> <span data-ttu-id="d31ce-319">Дополнительные сведения см. в разделе [Анонимная проверка подлинности](http://www.iis.net/configreference/system.webserver/security/authentication/anonymousauthentication),</span><span class="sxs-lookup"><span data-stu-id="d31ce-319">For more information, see [Anonymous Authentication](http://www.iis.net/configreference/system.webserver/security/authentication/anonymousauthentication),</span></span>|  
|<span data-ttu-id="d31ce-320">Проверка подлинности Windows</span><span class="sxs-lookup"><span data-stu-id="d31ce-320">Windows authentication</span></span>|<span data-ttu-id="d31ce-321">Добавьте к списку Membership учетные записи пользователей или групп Windows, запрашивающих данные служб Analysis Services с помощью олицетворения или делегирования.</span><span class="sxs-lookup"><span data-stu-id="d31ce-321">Add to the Membership list the Windows user or group accounts requesting Analysis Services data via impersonation or delegation.</span></span><br /><br /> <span data-ttu-id="d31ce-322">Если используется ограниченное делегирование Kerberos, единственными учетными записями, которым требуются разрешения, являются учетные записи пользователей и групп Windows, запрашивающие доступ.</span><span class="sxs-lookup"><span data-stu-id="d31ce-322">Assuming Kerberos constrained delegation is used, the only accounts that need permissions are the Windows user and group accounts requesting access.</span></span> <span data-ttu-id="d31ce-323">Для удостоверения пула приложений разрешения не нужны.</span><span class="sxs-lookup"><span data-stu-id="d31ce-323">No permissions are necessary for the application pool identity.</span></span>|  
|<span data-ttu-id="d31ce-324">Обычная проверка подлинности</span><span class="sxs-lookup"><span data-stu-id="d31ce-324">Basic authentication</span></span>|<span data-ttu-id="d31ce-325">Добавьте к списку Membership учетные записи пользователей или групп Windows, которые будут передаваться в строке подключения.</span><span class="sxs-lookup"><span data-stu-id="d31ce-325">Add to the Membership list the Windows user or group accounts that will be passed on the connection string.</span></span><br /><br /> <span data-ttu-id="d31ce-326">Кроме того, если учетные данные передаются через `EffectiveUserName` в строке подключения, удостоверение пула приложений должно иметь права администратора в экземпляре служб Analysis Services.</span><span class="sxs-lookup"><span data-stu-id="d31ce-326">In addition, if you are passing credentials via `EffectiveUserName` on the connection string, then the application pool identity must have administrator rights on the Analysis Services instance.</span></span> <span data-ttu-id="d31ce-327">В среде SSMS щелкните правой кнопкой мыши экземпляр &#124; **свойства** &#124; **Безопасность** &#124; **добавить**.</span><span class="sxs-lookup"><span data-stu-id="d31ce-327">In SSMS, right-click the instance &#124; **Properties** &#124; **Security** &#124; **Add**.</span></span> <span data-ttu-id="d31ce-328">Введите удостоверение пула приложений.</span><span class="sxs-lookup"><span data-stu-id="d31ce-328">Enter the application pool identity.</span></span> <span data-ttu-id="d31ce-329">Если используется встроенное удостоверение по умолчанию, то учетная запись указывается как **IIS AppPool\DefaultAppPool**.</span><span class="sxs-lookup"><span data-stu-id="d31ce-329">If you used the built-in default identity, the account is specified as **IIS AppPool\DefaultAppPool**.</span></span><br /><br /> ![](../media/ssas-httpaccess-iisapppoolidentity.png)|  
  
 <span data-ttu-id="d31ce-330">Дополнительные сведения см. в разделе [Предоставление доступа к объектам и операциям (службы Analysis Services)](../multidimensional-models/authorizing-access-to-objects-and-operations-analysis-services.md).</span><span class="sxs-lookup"><span data-stu-id="d31ce-330">For more information about setting permissions, see [Authorizing access to objects and operations &#40;Analysis Services&#41;](../multidimensional-models/authorizing-access-to-objects-and-operations-analysis-services.md).</span></span>  
  
##  <a name="step-6-test-your-configuration"></a><a name="bkmk_test"></a> <span data-ttu-id="d31ce-331">Шаг 6. Проверка конфигурации</span><span class="sxs-lookup"><span data-stu-id="d31ce-331">Step 6: Test your configuration</span></span>  
 <span data-ttu-id="d31ce-332">Синтаксис строки подключения для MSMDPUMP определен — это URL-адрес файла MSMDPUMP.dll.</span><span class="sxs-lookup"><span data-stu-id="d31ce-332">The connection string syntax for MSMDPUMP is the URL to the MSMDPUMP.dll file.</span></span>  
  
 <span data-ttu-id="d31ce-333">Если веб-приложение прослушивает фиксированный порт, добавьте номер порта к имени или IP-адресу сервера, например, `http://my-web-srv01:8080/OLAP/msmdpump.dll` или `http://123.456.789.012:8080/OLAP/msmdpump.dll` .</span><span class="sxs-lookup"><span data-stu-id="d31ce-333">If the web application is listening on a fixed port, append the port number to the server name or IP address, for example, `http://my-web-srv01:8080/OLAP/msmdpump.dll` or `http://123.456.789.012:8080/OLAP/msmdpump.dll`.</span></span>  
  
 <span data-ttu-id="d31ce-334">Чтобы быстро проверить подключение, можно открыть его с помощью Microsoft Excel или среды SQL Server Management Studio.</span><span class="sxs-lookup"><span data-stu-id="d31ce-334">To quickly test the connection, you can open a connection using Microsoft Excel or SQL Server Management Studio</span></span>  
  
 <span data-ttu-id="d31ce-335">**Тестирование подключений с использованием среды SQL Server Management Studio**</span><span class="sxs-lookup"><span data-stu-id="d31ce-335">**Test connections using SQL Server Management Studio**</span></span>  
  
1.  <span data-ttu-id="d31ce-336">В диалоговом окне «Подключение к серверу» среды Management Studio в качестве типа сервера выберите **Службы Analysis Services** .</span><span class="sxs-lookup"><span data-stu-id="d31ce-336">In Management Studio, in the Connect to Server dialog box, select **Analysis Services** as the server type.</span></span> <span data-ttu-id="d31ce-337">В поле "Имя сервера" введите адрес HTTP расширения msmdpump: `http://my-web-srv01/OLAP/msmdpump.dll`.</span><span class="sxs-lookup"><span data-stu-id="d31ce-337">In Server name, enter the HTTP address of the msmdpump extension: `http://my-web-srv01/OLAP/msmdpump.dll`.</span></span>  
  
     <span data-ttu-id="d31ce-338">HTTP-подключение отображается в обозревателе объектов.</span><span class="sxs-lookup"><span data-stu-id="d31ce-338">Object Explorer displays the HTTP connection:</span></span>  
  
     <span data-ttu-id="d31ce-339">![HTTP-соединение с SSAS в обозревателе объектов](../media/ssas-httpaccess-ssms.PNG "HTTP-соединение с SSAS в обозревателе объектов")</span><span class="sxs-lookup"><span data-stu-id="d31ce-339">![Object Explorer showing http connection to SSAS](../media/ssas-httpaccess-ssms.PNG "Object Explorer showing http connection to SSAS")</span></span>  
  
2.  <span data-ttu-id="d31ce-340">Проверка подлинности должна быть задана как проверка подлинности Windows, а лицом, использующим среду Management Studio, должен быть администратор служб Analysis Services.</span><span class="sxs-lookup"><span data-stu-id="d31ce-340">Authentication must be Windows authentication, and the person using Management Studio must be an Analysis Services administrator.</span></span> <span data-ttu-id="d31ce-341">Администратор может предоставить дополнительные разрешения для доступа других пользователей.</span><span class="sxs-lookup"><span data-stu-id="d31ce-341">An administrator can grant further permissions to enable access by other users.</span></span>  
  
 <span data-ttu-id="d31ce-342">**Тестирование подключений с использованием Excel**</span><span class="sxs-lookup"><span data-stu-id="d31ce-342">**Test connections using Excel**</span></span>  
  
1.  <span data-ttu-id="d31ce-343">На вкладке "Данные" в Excel в группе "Получить внешние данные" нажмите кнопку **Из других источников**, а затем выберите **Из служб аналитики** , чтобы запустить мастер подключения данных.</span><span class="sxs-lookup"><span data-stu-id="d31ce-343">On the Data tab in Excel, in Get External Data, click **From Other Sources**, and then choose **From Analysis Services** to start the Data Connection wizard.</span></span>  
  
2.  <span data-ttu-id="d31ce-344">В поле "Имя сервера" введите адрес HTTP расширения msmdpump: `http://my-web-srv01/OLAP/msmdpump.dll`.</span><span class="sxs-lookup"><span data-stu-id="d31ce-344">In Server name, enter the HTTP address of the msmdpump extension: `http://my-web-srv01/OLAP/msmdpump.dll`.</span></span>  
  
3.  <span data-ttu-id="d31ce-345">В качестве значения «Учетные данные входа в систему» выберите **Проверка подлинности Windows** , если применяется встроенная безопасность Windows, NTLM или анонимный пользователь.</span><span class="sxs-lookup"><span data-stu-id="d31ce-345">For Log on credentials, choose **Use Windows Authentication** if you are using Windows integrated security or NTLM, or Anonymous user.</span></span>  
  
     <span data-ttu-id="d31ce-346">Применительно к обычной проверке подлинности выберите **Использовать следующее имя пользователя и пароль**, затем укажите учетные данные, применяемые для входа в систему.</span><span class="sxs-lookup"><span data-stu-id="d31ce-346">For Basic authentication, choose **Use the following User Name and Password**, and then specify the credentials used to sign on.</span></span> <span data-ttu-id="d31ce-347">Предоставленные вами учетные данные будут переданы в службы Analysis Services в строке подключения.</span><span class="sxs-lookup"><span data-stu-id="d31ce-347">The credentials you provide will be passed on the connection string to Analysis Services.</span></span>  
  
 <span data-ttu-id="d31ce-348">**Тестирование подключений с использованием AMO**</span><span class="sxs-lookup"><span data-stu-id="d31ce-348">**Test connections using AMO**</span></span>  
  
 <span data-ttu-id="d31ce-349">Можно проверить доступ по HTTP программным путем с использованием AMO, подставляя URL-адрес конечной точки вместо имени сервера.</span><span class="sxs-lookup"><span data-stu-id="d31ce-349">You can test HTTP access programmatically using AMO, substituting the URL of the endpoint for the server name.</span></span> <span data-ttu-id="d31ce-350">Дополнительные сведения см. в записи форума [How to sync SSAS 2008 R2 databases via HTTPS across domain/forest and firewall boundaries](https://social.msdn.microsoft.com/Forums/en/sqlanalysisservices/thread/c4249d55-914d-4c81-9980-44d0b8df9c3e)(Как синхронизировать базы данных SSAS 2008 R2 по HTTPS через границы домена или леса и брандмауэра).</span><span class="sxs-lookup"><span data-stu-id="d31ce-350">For details, see [Forum Post (How to sync SSAS 2008 R2 databases via HTTPS across domain/forest and firewall boundaries)](https://social.msdn.microsoft.com/Forums/en/sqlanalysisservices/thread/c4249d55-914d-4c81-9980-44d0b8df9c3e).</span></span>  
  
 <span data-ttu-id="d31ce-351">Ниже приведен пример строки подключения, который иллюстрирует синтаксис для доступа по HTTP(S) с использованием обычной проверки подлинности:</span><span class="sxs-lookup"><span data-stu-id="d31ce-351">An example connection string illustrating the syntax for HTTP(S) access using Basic authentication:</span></span>  
  
 `Data Source=https://<servername>/olap/msmdpump.dll; Initial Catalog=AdventureWorksDW2012; Integrated Security=Basic; User ID=XXXX; Password=XXXXX;`  
  
 <span data-ttu-id="d31ce-352">Дополнительные сведения о настройке подключения программным путем см. в разделе [Establishing Secure Connections in ADOMD.NET](https://docs.microsoft.com/analysis-services/adomd/multidimensional-models-adomd-net-client/connections-in-adomd-net-establishing-secure-connections).</span><span class="sxs-lookup"><span data-stu-id="d31ce-352">For more information about setting up the connection programmatically, see [Establishing Secure Connections in ADOMD.NET](https://docs.microsoft.com/analysis-services/adomd/multidimensional-models-adomd-net-client/connections-in-adomd-net-establishing-secure-connections).</span></span>  
  
 <span data-ttu-id="d31ce-353">В качестве конечного шага следует обязательно провести более строгое тестирование с использованием клиентского компьютера, эксплуатируемого в сетевой среде, из которого исходят запросы на подключение.</span><span class="sxs-lookup"><span data-stu-id="d31ce-353">As a final step, be sure to follow-up with more rigorous testing by using a client computer that runs in the network environment from which the connections will originate.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="d31ce-354">См. также:</span><span class="sxs-lookup"><span data-stu-id="d31ce-354">See Also</span></span>  
 <span data-ttu-id="d31ce-355">[Сообщение на форуме (доступ по протоколу HTTP с использованием MSMDPUMP и обычной проверки подлинности)](https://social.msdn.microsoft.com/Forums/en/sqlanalysisservices/thread/79d2f225-df35-46da-aa22-d06e98f7d658) </span><span class="sxs-lookup"><span data-stu-id="d31ce-355">[Forum post (http access using msmdpump and basic authentication)](https://social.msdn.microsoft.com/Forums/en/sqlanalysisservices/thread/79d2f225-df35-46da-aa22-d06e98f7d658) </span></span>  
 <span data-ttu-id="d31ce-356">[Настройка брандмауэра Windows на разрешение доступа к Analysis Services](configure-the-windows-firewall-to-allow-analysis-services-access.md) </span><span class="sxs-lookup"><span data-stu-id="d31ce-356">[Configure the Windows Firewall to Allow Analysis Services Access](configure-the-windows-firewall-to-allow-analysis-services-access.md) </span></span>  
 <span data-ttu-id="d31ce-357">[Авторизация доступа к объектам и операциям &#40;Analysis Services&#41;](../multidimensional-models/authorizing-access-to-objects-and-operations-analysis-services.md) </span><span class="sxs-lookup"><span data-stu-id="d31ce-357">[Authorizing access to objects and operations &#40;Analysis Services&#41;](../multidimensional-models/authorizing-access-to-objects-and-operations-analysis-services.md) </span></span>  
 <span data-ttu-id="d31ce-358">[Методы проверки подлинности IIS](https://go.microsoft.com/fwlink/?LinkdID=208461) </span><span class="sxs-lookup"><span data-stu-id="d31ce-358">[IIS Authentication Methods](https://go.microsoft.com/fwlink/?LinkdID=208461) </span></span>  
 [<span data-ttu-id="d31ce-359">Как выполнить настройку SSL для работы с IIS 7</span><span class="sxs-lookup"><span data-stu-id="d31ce-359">How to Set Up SSL on IIS 7</span></span>](https://go.microsoft.com/fwlink/?LinkId=207562)  
  
