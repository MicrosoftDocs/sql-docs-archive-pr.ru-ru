---
title: Основные сведения об DAX в табличных моделях (табличные службы SSAS) | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: b2693985-1bea-4861-a100-cea4761ba809
author: minewiskan
ms.author: owend
ms.openlocfilehash: 4bf7dc2f41a1d42e8b565459c3b094479d937a91
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87667407"
---
# <a name="understanding-dax-in-tabular-models-ssas-tabular"></a><span data-ttu-id="f5e31-102">Основные сведения о DAX в табличных моделях (табличные службы SSAS)</span><span class="sxs-lookup"><span data-stu-id="f5e31-102">Understanding DAX in Tabular Models (SSAS Tabular)</span></span>
  <span data-ttu-id="f5e31-103">Выражения анализа данных (DAX) — это язык формул, используемый для создания пользовательских вычислений в [!INCLUDE[ssGemini](../../includes/ssgemini-md.md)] для книг Microsoft Excel и проектов табличных моделей служб [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="f5e31-103">Data Analysis Expressions (DAX) is the formula language used to create custom calculations in [!INCLUDE[ssGemini](../../includes/ssgemini-md.md)] for Microsoft Excel workbooks and [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] tabular model projects.</span></span> <span data-ttu-id="f5e31-104">К формулам DAX относятся функции, операторы и значения, позволяющие проводить расширенные вычисления над данными в таблицах и столбцах.</span><span class="sxs-lookup"><span data-stu-id="f5e31-104">DAX formulas include functions, operators, and values to perform advanced calculations on data in tables and columns.</span></span>  
  
 <span data-ttu-id="f5e31-105">В то время как DAX может использоваться и в книгах [!INCLUDE[ssGemini](../../includes/ssgemini-md.md)] , и в проектах табличной модели, описание в этом разделе сосредоточено больше на проектах табличной модели, разрабатываемых в среде [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)].</span><span class="sxs-lookup"><span data-stu-id="f5e31-105">While DAX applies to both [!INCLUDE[ssGemini](../../includes/ssgemini-md.md)] workbooks and tabular model projects, this topic applies more to tabular model projects authored in [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)].</span></span> <span data-ttu-id="f5e31-106">Перед прочтением этого раздела следует хорошо ознакомиться с табличными моделями и средой разработки проектов табличных моделей в среде [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)].</span><span class="sxs-lookup"><span data-stu-id="f5e31-106">Before reading this topic, you should have a good understanding of tabular models and the tabular model project authoring environment in [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)].</span></span>  
  
 <span data-ttu-id="f5e31-107">Разделы данной темы:</span><span class="sxs-lookup"><span data-stu-id="f5e31-107">Sections in this topic:</span></span>  
  
-   [<span data-ttu-id="f5e31-108">DAX в табличных моделях</span><span class="sxs-lookup"><span data-stu-id="f5e31-108">DAX in Tabular Models</span></span>](#bkmk_DAXintm)  
  
-   [<span data-ttu-id="f5e31-109">Формулы DAX в вычисляемых столбцах, мерах и фильтрах строк</span><span class="sxs-lookup"><span data-stu-id="f5e31-109">DAX Formulas in Calculated Columns, Measures, and Row Filters</span></span>](#bkmk_DAX)  
  
-   [<span data-ttu-id="f5e31-110">Типы данных DAX</span><span class="sxs-lookup"><span data-stu-id="f5e31-110">DAX Data Types</span></span>](#bkmk_DAX_datatypes)  
  
-   [<span data-ttu-id="f5e31-111">Операторы DAX</span><span class="sxs-lookup"><span data-stu-id="f5e31-111">DAX Operators</span></span>](#bkmk_DAX_opertors)  
  
-   [<span data-ttu-id="f5e31-112">Формулы DAX</span><span class="sxs-lookup"><span data-stu-id="f5e31-112">DAX Formulas</span></span>](#bkmk_DAX_Formulas)  
  
-   [<span data-ttu-id="f5e31-113">Функции DAX</span><span class="sxs-lookup"><span data-stu-id="f5e31-113">DAX Functions</span></span>](#bkmk_DAX_functions)  
  
-   [<span data-ttu-id="f5e31-114">Контекст в формулах DAX</span><span class="sxs-lookup"><span data-stu-id="f5e31-114">Context in DAX Formulas</span></span>](#bkmk_context)  
  
-   [<span data-ttu-id="f5e31-115">Формулы и табличная модель</span><span class="sxs-lookup"><span data-stu-id="f5e31-115">Formulas and the Tabular Model</span></span>](#bkmk_RelModel)  
  
-   [<span data-ttu-id="f5e31-116">Работа с таблицами и столбцами</span><span class="sxs-lookup"><span data-stu-id="f5e31-116">Working with Tables and Columns</span></span>](#bkmk_tables)  
  
-   [<span data-ttu-id="f5e31-117">Обновление результатов формул (обработка)</span><span class="sxs-lookup"><span data-stu-id="f5e31-117">Updating the Results of Formulas (Process)</span></span>](#bkmk_RefreshRecalc)  
  
-   [<span data-ttu-id="f5e31-118">Устранение ошибок в формулах</span><span class="sxs-lookup"><span data-stu-id="f5e31-118">Troubleshooting Errors in Formulas</span></span>](#bkmk_troubleshoot)  
  
-   [<span data-ttu-id="f5e31-119">Дополнительные ресурсы</span><span class="sxs-lookup"><span data-stu-id="f5e31-119">Additional Resources</span></span>](#bkmk_addional_resources)  
  
##  <a name="dax-in-tabular-models"></a><a name="bkmk_DAXintm"></a><span data-ttu-id="f5e31-120">DAX в табличных моделях</span><span class="sxs-lookup"><span data-stu-id="f5e31-120">DAX in Tabular Models</span></span>  
 <span data-ttu-id="f5e31-121">И в [!INCLUDE[ssGemini](../../includes/ssgemini-md.md)] , и в табличных моделях функционально формулы DAX одинаковым образом обрабатывают значения в соответствующих наборах данных.</span><span class="sxs-lookup"><span data-stu-id="f5e31-121">In both [!INCLUDE[ssGemini](../../includes/ssgemini-md.md)] and tabular models, functionally, there is no difference in how DAX formulas calculate values from their respective data sets.</span></span> <span data-ttu-id="f5e31-122">Однако имеются различия между созданием формул DAX в книге и в средствах разработки моделей, а также в месте вычисления контекста некоторых мер.</span><span class="sxs-lookup"><span data-stu-id="f5e31-122">However, where DAX formulas are created in the workbook and model authoring tools is different, as well as where context in certain measures is evaluated.</span></span>  
  
 <span data-ttu-id="f5e31-123">В [!INCLUDE[ssGemini](../../includes/ssgemini-md.md)]формулы вычислений обычно создаются пользователем книги для самостоятельного ведения бизнес-аналитики.</span><span class="sxs-lookup"><span data-stu-id="f5e31-123">In [!INCLUDE[ssGemini](../../includes/ssgemini-md.md)], calculation formulas are typically created by the workbook user for self-service business intelligence analysis.</span></span> <span data-ttu-id="f5e31-124">Вычисляемые столбцы создаются для таблицы в окне PowerPivot, а меры создаются в сводных таблицах или в области вычислений.</span><span class="sxs-lookup"><span data-stu-id="f5e31-124">Calculated columns are created for a table in the PowerPivot window, and measures are created in PivotTables or the calculation area.</span></span> <span data-ttu-id="f5e31-125">В отличие от проектов табличных моделей, книги PowerPivot не предоставляют роли безопасности, в которых формулы DAX могут использоваться для защиты данных.</span><span class="sxs-lookup"><span data-stu-id="f5e31-125">Unlike tabular model projects, PowerPivot workbooks do not provide role-based security, which can use DAX formulas to secure data.</span></span>  
  
 <span data-ttu-id="f5e31-126">В проектах табличных моделей формулы вычислений создаются в конструкторе моделей в среде [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)] авторами моделей.</span><span class="sxs-lookup"><span data-stu-id="f5e31-126">In tabular model projects, calculation formulas are created in the model designer in [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)] by model authors.</span></span> <span data-ttu-id="f5e31-127">Значения вычисляемых столбцов, вычисляемые по формулам DAX, немедленно отображаются в таблице в конструкторе моделей, за исключением функции просмотра мер в сетке мер, но меры не вычисляются, пока пользователь не укажет фильтр в клиенте для составления отчетов, например [!INCLUDE[ssCrescent](../../includes/sscrescent-md.md)] , или в сводных таблицах в Microsoft Excel.</span><span class="sxs-lookup"><span data-stu-id="f5e31-127">While values for calculated columns, calculated by using DAX formulas, appear immediately in the table in the model designer, with exception to the measure preview feature in the measure grid, measures are not calculated until a user specifies a filter in a reporting client such as [!INCLUDE[ssCrescent](../../includes/sscrescent-md.md)] or in PivotTables in Microsoft Excel.</span></span>  
  
 <span data-ttu-id="f5e31-128">При импорте книги PowerPivot в новый проект табличной модели с помощью функции «Импорт» из шаблона проекта PowerPivot в новой табличной модели автоматически создаются формулы DAX для вычисляемых столбцов.</span><span class="sxs-lookup"><span data-stu-id="f5e31-128">If you import a PowerPivot workbook into a new tabular model project by using the Import from PowerPivot project template, DAX formulas for calculated columns will be automatically created in the new tabular model.</span></span> <span data-ttu-id="f5e31-129">Формулы DAX для неявных и явных мер в книге автоматически создаются в новой табличной модели в качестве явных мер.</span><span class="sxs-lookup"><span data-stu-id="f5e31-129">DAX formulas for implicit and explicit measures in the workbook will be automatically created in the new tabular model as explicit measures.</span></span> <span data-ttu-id="f5e31-130">Поскольку в книгах PowerPivot еще не существуют функции ролей и фильтра защищенных строк, потребуется создать как минимум одну роль в новой табличной модели, чтобы предоставить доступ к данным модели членам этой роли.</span><span class="sxs-lookup"><span data-stu-id="f5e31-130">Because role and secure row filter functionality do not already exist in PowerPivot workbooks, you will need to create at least one role in the new tabular model to provide model data access to role members.</span></span> <span data-ttu-id="f5e31-131">Формулы DAX в фильтрах строк необходимы лишь в случае, если необходимо защитить данные таблицы на уровне строк.</span><span class="sxs-lookup"><span data-stu-id="f5e31-131">DAX formulas in row filters are necessary only if you want to secure table data at the row-level.</span></span>  
  
##  <a name="dax-formulas-in-calculated-columns-measures-and-row-filters"></a><a name="bkmk_DAX"></a><span data-ttu-id="f5e31-132">Формулы DAX в вычисляемых столбцах, мерах и фильтрах строк</span><span class="sxs-lookup"><span data-stu-id="f5e31-132">DAX Formulas in Calculated Columns, Measures, and Row Filters</span></span>  
 <span data-ttu-id="f5e31-133">Для табличных моделей, созданных в среде [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)], формулы DAX используются в вычисляемых столбцах, мерах и фильтрах строк.</span><span class="sxs-lookup"><span data-stu-id="f5e31-133">For tabular models authored in [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)], DAX formulas are used in calculated columns, measures, and row filters.</span></span>  
  
### <a name="calculated-columns"></a><span data-ttu-id="f5e31-134">Вычисляемые столбцы</span><span class="sxs-lookup"><span data-stu-id="f5e31-134">Calculated Columns</span></span>  
 <span data-ttu-id="f5e31-135">Вычисляемый столбец — это столбец, добавляемый к существующей таблице (в конструкторе моделей), в котором затем создается формула DAX, определяющая значения столбца.</span><span class="sxs-lookup"><span data-stu-id="f5e31-135">A calculated column is a column that you add to an existing table (in the model designer) and then create a DAX formula that defines the column values.</span></span> <span data-ttu-id="f5e31-136">Формулы для вычисляемых столбцов создаются в конструкторе моделей с помощью строки формул.</span><span class="sxs-lookup"><span data-stu-id="f5e31-136">You create formulas for calculated columns in the model designer by using the formula bar.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="f5e31-137">Вычисляемые столбцы не поддерживаются для моделей, получающих данные из реляционного источника данных в режиме DirectQuery.</span><span class="sxs-lookup"><span data-stu-id="f5e31-137">Calculated columns are not supported for models that retrieve data from a relational data source using DirectQuery mode.</span></span>  
  
 <span data-ttu-id="f5e31-138">Если вычисляемый столбец содержит допустимую формулу DAX, значения для каждой из строк вычисляются сразу после ввода формулы.</span><span class="sxs-lookup"><span data-stu-id="f5e31-138">When a calculated column contains a valid DAX formula, values are calculated for each row as soon as the formula is entered.</span></span> <span data-ttu-id="f5e31-139">Затем значения сохраняются в базе данных.</span><span class="sxs-lookup"><span data-stu-id="f5e31-139">Values are then stored in the database.</span></span> <span data-ttu-id="f5e31-140">Например, в таблице Date, если в строку формул вводится формула `=[Calendar Year] & " Q" & [Calendar Quarter]` , для каждой строки таблицы значение рассчитывается следующим образом: берется значение из столбца Calendar Year (в той же таблице Date), к нему добавляется пробел и заглавная буква Q, а затем добавляются значения из столбца Calendar Quarter (в той же таблице Date).</span><span class="sxs-lookup"><span data-stu-id="f5e31-140">For example, in a Date table, when the formula `=[Calendar Year] & " Q" & [Calendar Quarter]` is entered into the formula bar, a value for each row in the table is calculated by taking values from the Calendar Year column (in the same Date table), adding a space and the capital letter Q, and then adding the values from the Calendar Quarter column (in the same Date table).</span></span> <span data-ttu-id="f5e31-141">Результат для каждой из строк в вычисляемом столбце рассчитывается немедленно и выглядит, к примеру, как **2010 Q1**.</span><span class="sxs-lookup"><span data-stu-id="f5e31-141">The result for each row in the calculated column is calculated immediately and appears, for example, as **2010 Q1**.</span></span> <span data-ttu-id="f5e31-142">Значения столбца вычисляются повторно лишь при повторной обработке данных.</span><span class="sxs-lookup"><span data-stu-id="f5e31-142">Column values are only recalculated if the data is re-processed.</span></span>  
  
 <span data-ttu-id="f5e31-143">Дополнительные сведения см. в разделе [Вычисляемые столбцы (табличные службы SSAS)](ssas-calculated-columns.md).</span><span class="sxs-lookup"><span data-stu-id="f5e31-143">For more information, see [Calculated Columns &#40;SSAS Tabular&#41;](ssas-calculated-columns.md).</span></span>  
  
### <a name="measures"></a><span data-ttu-id="f5e31-144">Меры</span><span class="sxs-lookup"><span data-stu-id="f5e31-144">Measures</span></span>  
 <span data-ttu-id="f5e31-145">Меры являются динамическими формулами, результаты которых изменяются в зависимости от контекста.</span><span class="sxs-lookup"><span data-stu-id="f5e31-145">Measures are dynamic formulas where the results change depending on context.</span></span> <span data-ttu-id="f5e31-146">Меры используются в форматах отчетов, поддерживающих объединение и фильтрацию данных модели с помощью нескольких атрибутов, например в отчетах [!INCLUDE[ssCrescent](../../includes/sscrescent-md.md)] , сводных таблицах и диаграммах Excel.</span><span class="sxs-lookup"><span data-stu-id="f5e31-146">Measures are used in reporting formats that support combining and filtering model data by using multiple attributes such as a [!INCLUDE[ssCrescent](../../includes/sscrescent-md.md)] report or Excel PivotTable or PivotChart.</span></span> <span data-ttu-id="f5e31-147">В проектах табличных моделей меры определяются разработчиком модели с помощью сетки мер (и строки формул) в конструкторе моделей среды [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)].</span><span class="sxs-lookup"><span data-stu-id="f5e31-147">In tabular model projects, measures are defined by the model author by using the measure grid (and formula bar) in the model designer in [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)].</span></span>  
  
 <span data-ttu-id="f5e31-148">Формулы в мерах могут использовать стандартные агрегатные функции, автоматически создаваемые с использованием автосуммирования, такие как COUNT или SUM, либо пользовательские формулы, созданные на языке DAX.</span><span class="sxs-lookup"><span data-stu-id="f5e31-148">A formula in a measure can use standard aggregation functions automatically created by using the Autosum feature, such as COUNT or SUM, or you can define your own formula by using DAX.</span></span> <span data-ttu-id="f5e31-149">При определении формулы для меры в строке формул в компоненте подсказки отображается предварительный просмотр будущих результатов во всем текущем контексте, но в других местах результаты не обновляются сразу же.</span><span class="sxs-lookup"><span data-stu-id="f5e31-149">When you define a formula for a measure in the formula bar, a Tooltip feature shows a preview of what the results would be for the total in the current context, but otherwise the results are not immediately output anywhere.</span></span> <span data-ttu-id="f5e31-150">Другие сведения о мере также отображаются на панели **Свойства** .</span><span class="sxs-lookup"><span data-stu-id="f5e31-150">Other measure details also appear in the **Properties** pane.</span></span>  
  
 <span data-ttu-id="f5e31-151">Результаты вычисления (отфильтрованные) не отображаются немедленно потому, что результат меры нельзя определить без контекста.</span><span class="sxs-lookup"><span data-stu-id="f5e31-151">The reason you cannot see the (filtered) results of the calculation immediately is because the result of a measure cannot be determined without context.</span></span> <span data-ttu-id="f5e31-152">Для вычисления меры требуется клиентское приложение создания отчетов, которое может предоставить контекст, необходимый для получения данных для каждой из ячеек, а затем вычислить выражения для ячеек.</span><span class="sxs-lookup"><span data-stu-id="f5e31-152">To evaluate a measure requires a reporting client application that can provide the context needed to retrieve the data relevant to each cell and then evaluate the expression for each cell.</span></span> <span data-ttu-id="f5e31-153">Таким клиентом может быть сводная таблица или диаграмма Excel, отчет [!INCLUDE[ssCrescent](../../includes/sscrescent-md.md)] или запрос многомерных выражений.</span><span class="sxs-lookup"><span data-stu-id="f5e31-153">That client might be an Excel PivotTable or PivotChart, a [!INCLUDE[ssCrescent](../../includes/sscrescent-md.md)] report, or an MDX query.</span></span> <span data-ttu-id="f5e31-154">Вне зависимости от используемого клиентского средства создания отчетов для каждой из ячеек в результатах выполняется отдельный запрос.</span><span class="sxs-lookup"><span data-stu-id="f5e31-154">Regardless of the reporting client, a separate query is run for each cell in the results.</span></span> <span data-ttu-id="f5e31-155">Иными словами, каждое сочетание заголовков строки и столбца в сводной таблице и каждая выборка срезов и фильтров в отчете [!INCLUDE[ssCrescent](../../includes/sscrescent-md.md)] создает уникальное подмножество данных, по которым и вычисляется мера.</span><span class="sxs-lookup"><span data-stu-id="f5e31-155">That is to say, each combination of row and column headers in a PivotTable, or each selection of slicers and filters in a [!INCLUDE[ssCrescent](../../includes/sscrescent-md.md)] report, generates a different subset of data over which the measure is calculated.</span></span> <span data-ttu-id="f5e31-156">Например, в мере с формулой `Total Sales:=SUM([Sales Amount])`, когда пользователь помещает меру «Total Sales» (Сумма продаж) в окно «Значения» в сводной таблице, а затем помещает столбец «Product Category» (Категория продукта) из таблицы «Product» (Продукт) в окно «Фильтры», величина «Sales Amount» (Сумма продаж) рассчитывается и отображается для каждой категории продуктов.</span><span class="sxs-lookup"><span data-stu-id="f5e31-156">For example, in a measure with the formula, `Total Sales:=SUM([Sales Amount])`, when a user places the Total Sales measure in the Values window in a PivotTable, and then places the Product Category column from a Product table into the Filters window, the sum of Sales Amount is calculated and displayed for each product category.</span></span>  
  
 <span data-ttu-id="f5e31-157">В отличие от вычисляемых столбцов и фильтров строк, синтаксис меры предусматривает размещение имени меры перед формулой.</span><span class="sxs-lookup"><span data-stu-id="f5e31-157">Unlike calculated columns and row filters, the syntax for a measure includes the measure's name preceding the formula.</span></span> <span data-ttu-id="f5e31-158">В предыдущем примере имя **Total Sales** (Сумма продаж) предшествует формуле.</span><span class="sxs-lookup"><span data-stu-id="f5e31-158">In the example just provided, the name **Total Sales:** appears preceding the formula.</span></span> <span data-ttu-id="f5e31-159">После создания меры ее имя и атрибуты появятся в списке полей клиентского приложения создания отчетов, а мера станет доступной всем пользователям модели, в зависимости от их перспектив и ролей.</span><span class="sxs-lookup"><span data-stu-id="f5e31-159">After you have created a measure, the name and its definition appear in the reporting client application Field List and depending on perspectives and roles is available to all users of the model.</span></span>  
  
 <span data-ttu-id="f5e31-160">Дополнительные сведения см. в разделе [Меры (табличные службы SSAS)](measures-ssas-tabular.md).</span><span class="sxs-lookup"><span data-stu-id="f5e31-160">For more information, see [Measures &#40;SSAS Tabular&#41;](measures-ssas-tabular.md).</span></span>  
  
### <a name="row-filters"></a><span data-ttu-id="f5e31-161">Фильтры строк</span><span class="sxs-lookup"><span data-stu-id="f5e31-161">Row Filters</span></span>  
 <span data-ttu-id="f5e31-162">Фильтры строк определяют, какие строки таблицы могут видеть члены определенной роли.</span><span class="sxs-lookup"><span data-stu-id="f5e31-162">Row filters define which rows in a table are visible to members of a particular role.</span></span> <span data-ttu-id="f5e31-163">Фильтры строк можно создать для каждой из таблиц в модели с помощью формул DAX.</span><span class="sxs-lookup"><span data-stu-id="f5e31-163">Row filters can be created for each table in a model by using DAX formulas.</span></span> <span data-ttu-id="f5e31-164">Фильтры строк создаются для конкретной роли с помощью диспетчера ролей в среде [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span><span class="sxs-lookup"><span data-stu-id="f5e31-164">Row filters are created for a particular role by using Role Manager in [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span></span> <span data-ttu-id="f5e31-165">В среде [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]фильтры строк также можно определить для развернутой модели с помощью диалогового окна «Свойства роли».</span><span class="sxs-lookup"><span data-stu-id="f5e31-165">Row filters can also be defined for a deployed model by using Role Properties in [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span></span>  
  
 <span data-ttu-id="f5e31-166">В фильтре строк формула DAX, результат вычисления которой должен быть равен логическому значению TRUE или FALSE, определяет строки, которые могут возвращаться результатами запроса, выполняемого членами определенной роли.</span><span class="sxs-lookup"><span data-stu-id="f5e31-166">In a row filter, a DAX formula, which must evaluate to a Boolean TRUE/FALSE condition, defines which rows can be returned by the results of a query by members of that particular role.</span></span> <span data-ttu-id="f5e31-167">Строки, не включенные в формулу DAX, возвращать нельзя.</span><span class="sxs-lookup"><span data-stu-id="f5e31-167">Rows not included in the DAX formula cannot be returned.</span></span> <span data-ttu-id="f5e31-168">Например, при использовании в таблице Customers (Клиенты) выражения DAX `=Customers[Country] = "USA"`члены роли Sales (Продажи) смогут просматривать только данные для клиентов из США, а агрегаты (SUM и др.) возвращаются только для клиентов из США.</span><span class="sxs-lookup"><span data-stu-id="f5e31-168">For example, for members of the Sales role, the Customers table with the following DAX formula, `=Customers[Country] = "USA"`, members of the Sales role will only be able to view data for customers in the USA, and aggregates, such as SUM are returned only for customers in the USA.</span></span>  
  
 <span data-ttu-id="f5e31-169">При определении фильтра строк с помощью формулы DAX создается допустимый набор строк.</span><span class="sxs-lookup"><span data-stu-id="f5e31-169">When you define a row filter by using DAX formula, you are creating an allowed row set.</span></span> <span data-ttu-id="f5e31-170">Доступ к другим строкам не запрещается, но они не возвращаются в составе допустимого набора строк.</span><span class="sxs-lookup"><span data-stu-id="f5e31-170">This does not deny access to other rows; rather, they are simply not returned as part of the allowed row set.</span></span> <span data-ttu-id="f5e31-171">Другие роли могут разрешать доступ к строкам, исключаемым формулой DAX.</span><span class="sxs-lookup"><span data-stu-id="f5e31-171">Other roles can allow access to the rows excluded by the DAX formula.</span></span> <span data-ttu-id="f5e31-172">Если пользователь является членом другой роли и ее фильтры строк разрешают доступ к определенному набору строк, пользователь может просматривать данные из этих строк.</span><span class="sxs-lookup"><span data-stu-id="f5e31-172">If a user is a member of another role, and that role's row filters allow access to that particular row set, the user can view data for that row.</span></span>  
  
 <span data-ttu-id="f5e31-173">Фильтры строк применяются к указанным, а также к связанным строкам.</span><span class="sxs-lookup"><span data-stu-id="f5e31-173">Row filters apply to the specified rows as well as related rows.</span></span> <span data-ttu-id="f5e31-174">Когда таблица содержит несколько связей, фильтры применяют защиту к связи, которая является активной.</span><span class="sxs-lookup"><span data-stu-id="f5e31-174">When a table has multiple relationships, filters apply security for the relationship that is active.</span></span> <span data-ttu-id="f5e31-175">Фильтры строк пересекаются с другими фильтрами строк, определенными в связанных таблицах.</span><span class="sxs-lookup"><span data-stu-id="f5e31-175">Row filters will be intersected with other row filters defined for related tables.</span></span>  
  
 <span data-ttu-id="f5e31-176">Дополнительные сведения см. в разделе [Роли (табличные службы SSAS)](roles-ssas-tabular.md).</span><span class="sxs-lookup"><span data-stu-id="f5e31-176">For more information, see [Roles &#40;SSAS Tabular&#41;](roles-ssas-tabular.md).</span></span>  
  
##  <a name="dax-data-types"></a><a name="bkmk_DAX_datatypes"></a> <span data-ttu-id="f5e31-177">Типы данных DAX</span><span class="sxs-lookup"><span data-stu-id="f5e31-177">DAX Data Types</span></span>  
 <span data-ttu-id="f5e31-178">Данные в модель можно импортировать из множества различных источников данных, которые могут поддерживать различные типы данных.</span><span class="sxs-lookup"><span data-stu-id="f5e31-178">You can import data into a model from many different data sources that might support different data types.</span></span> <span data-ttu-id="f5e31-179">При импорте данных в модель данные преобразуются в один из типов данных табличной модели.</span><span class="sxs-lookup"><span data-stu-id="f5e31-179">When you import data into a model, the data is converted to one of the tabular model data types.</span></span> <span data-ttu-id="f5e31-180">При использовании данных модели в вычислениях тип данных меняется на DAX на время проведения вычислений и выведения результата.</span><span class="sxs-lookup"><span data-stu-id="f5e31-180">When the model data is used in a calculation, the data is then converted to a DAX data type for the duration and output of the calculation.</span></span> <span data-ttu-id="f5e31-181">При создании формулы DAX термы, используемые в формуле, автоматически определяют тип возвращаемого значения данных.</span><span class="sxs-lookup"><span data-stu-id="f5e31-181">When you create a DAX formula, the terms used in the formula will automatically determine the value data type returned.</span></span>  
  
 <span data-ttu-id="f5e31-182">Табличные модели и DAX поддерживают следующие типы данных:</span><span class="sxs-lookup"><span data-stu-id="f5e31-182">Tabular models, and DAX, support the following data types:</span></span>  
  
|<span data-ttu-id="f5e31-183">Тип данных в модели</span><span class="sxs-lookup"><span data-stu-id="f5e31-183">Data type in model</span></span>|<span data-ttu-id="f5e31-184">Тип данных в DAX</span><span class="sxs-lookup"><span data-stu-id="f5e31-184">Data type in DAX</span></span>|<span data-ttu-id="f5e31-185">Описание</span><span class="sxs-lookup"><span data-stu-id="f5e31-185">Description</span></span>|  
|------------------------|----------------------|-----------------|  
|<span data-ttu-id="f5e31-186">Whole Number</span><span class="sxs-lookup"><span data-stu-id="f5e31-186">Whole Number</span></span>|<span data-ttu-id="f5e31-187">64-разрядное (8-байтовое) целочисленное значение <sup>1, 2</sup></span><span class="sxs-lookup"><span data-stu-id="f5e31-187">A 64 bit (eight-bytes) integer value <sup>1, 2</sup></span></span>|<span data-ttu-id="f5e31-188">Числа без десятичных разрядов.</span><span class="sxs-lookup"><span data-stu-id="f5e31-188">Numbers that have no decimal places.</span></span> <span data-ttu-id="f5e31-189">Целые числа могут быть положительными или отрицательными, но не могут содержать дробную часть в диапазоне -9,223,372,036,854,775,808 (-2^63) и 9,223,372,036,854,775,807 (2^63-1).</span><span class="sxs-lookup"><span data-stu-id="f5e31-189">Integers can be positive or negative numbers, but must be whole numbers between -9,223,372,036,854,775,808 (-2^63) and 9,223,372,036,854,775,807 (2^63-1).</span></span>|  
|<span data-ttu-id="f5e31-190">Десятичное число</span><span class="sxs-lookup"><span data-stu-id="f5e31-190">Decimal Number</span></span>|<span data-ttu-id="f5e31-191">64-разрядное (8 байтовое) вещественное число <sup>1, 2</sup></span><span class="sxs-lookup"><span data-stu-id="f5e31-191">A 64 bit (eight-bytes) real number <sup>1, 2</sup></span></span>|<span data-ttu-id="f5e31-192">Вещественные числа — это числа, которые могут иметь знаки после запятой.</span><span class="sxs-lookup"><span data-stu-id="f5e31-192">Real numbers are numbers that can have decimal places.</span></span> <span data-ttu-id="f5e31-193">Вещественные числа включают широкий диапазон значений.</span><span class="sxs-lookup"><span data-stu-id="f5e31-193">Real numbers cover a wide range of values:</span></span><br /><br /> <span data-ttu-id="f5e31-194">Отрицательные числа от -1.79E +308 до -2.23E -308</span><span class="sxs-lookup"><span data-stu-id="f5e31-194">Negative values from -1.79E +308 through -2.23E -308</span></span><br /><br /> <span data-ttu-id="f5e31-195">Нуль</span><span class="sxs-lookup"><span data-stu-id="f5e31-195">Zero</span></span><br /><br /> <span data-ttu-id="f5e31-196">Положительные числа от 2.23E -308 до 1.79E + 308</span><span class="sxs-lookup"><span data-stu-id="f5e31-196">Positive values from 2.23E -308 through 1.79E + 308</span></span><br /><br /> <span data-ttu-id="f5e31-197">Однако количество значащих цифр ограничено 17 знаками после запятой.</span><span class="sxs-lookup"><span data-stu-id="f5e31-197">However, the number of significant digits is limited to 17 decimal digits.</span></span>|  
|<span data-ttu-id="f5e31-198">Логический</span><span class="sxs-lookup"><span data-stu-id="f5e31-198">Boolean</span></span>|<span data-ttu-id="f5e31-199">Логический</span><span class="sxs-lookup"><span data-stu-id="f5e31-199">Boolean</span></span>|<span data-ttu-id="f5e31-200">Значение True или False.</span><span class="sxs-lookup"><span data-stu-id="f5e31-200">Either a True or False value.</span></span>|  
|<span data-ttu-id="f5e31-201">Text</span><span class="sxs-lookup"><span data-stu-id="f5e31-201">Text</span></span>|<span data-ttu-id="f5e31-202">Строка</span><span class="sxs-lookup"><span data-stu-id="f5e31-202">String</span></span>|<span data-ttu-id="f5e31-203">Строка символьных данных в Юникоде.</span><span class="sxs-lookup"><span data-stu-id="f5e31-203">A Unicode character data string.</span></span> <span data-ttu-id="f5e31-204">Могут быть строками, числами или датами, представленными в текстовом формате.</span><span class="sxs-lookup"><span data-stu-id="f5e31-204">Can be strings, numbers or dates represented in a text format.</span></span>|  
|<span data-ttu-id="f5e31-205">Дата</span><span class="sxs-lookup"><span data-stu-id="f5e31-205">Date</span></span>|<span data-ttu-id="f5e31-206">Дата и время</span><span class="sxs-lookup"><span data-stu-id="f5e31-206">Date/time</span></span>|<span data-ttu-id="f5e31-207">Значения даты и времени в принятом представлении даты-времени.</span><span class="sxs-lookup"><span data-stu-id="f5e31-207">Dates and times in an accepted date-time representation.</span></span><br /><br /> <span data-ttu-id="f5e31-208">Допустимый диапазон дат включает значения после 1 марта 1900г.</span><span class="sxs-lookup"><span data-stu-id="f5e31-208">Valid dates are all dates after March 1, 1900.</span></span>|  
|<span data-ttu-id="f5e31-209">Валюта</span><span class="sxs-lookup"><span data-stu-id="f5e31-209">Currency</span></span>|<span data-ttu-id="f5e31-210">Валюта</span><span class="sxs-lookup"><span data-stu-id="f5e31-210">Currency</span></span>|<span data-ttu-id="f5e31-211">Тип данных "Валюта" включает значения в диапазоне от -922,337,203,685,477.5808 до 922,337,203,685,477.5807 с четырьмя десятичными знаками заданной точности.</span><span class="sxs-lookup"><span data-stu-id="f5e31-211">Currency data type allows values between -922,337,203,685,477.5808 to 922,337,203,685,477.5807 with four decimal digits of fixed precision.</span></span>|  
|<span data-ttu-id="f5e31-212">Недоступно</span><span class="sxs-lookup"><span data-stu-id="f5e31-212">N/A</span></span>|<span data-ttu-id="f5e31-213">Пустое</span><span class="sxs-lookup"><span data-stu-id="f5e31-213">Blank</span></span>|<span data-ttu-id="f5e31-214">Тип данных с пустыми значениями в DAX представляет и заменяет пустые значения NULL в SQL.</span><span class="sxs-lookup"><span data-stu-id="f5e31-214">A blank is a data type in DAX that represents and replaces SQL nulls.</span></span> <span data-ttu-id="f5e31-215">Пустое значение создается с помощью функции BLANK, а проверяется с помощью логической функции ISBLANK.</span><span class="sxs-lookup"><span data-stu-id="f5e31-215">You can create a blank by using the BLANK function, and test for blanks by using the logical function, ISBLANK.</span></span>|  
  
 <span data-ttu-id="f5e31-216">Табличные модели также включают тип данных Table, используемый как входной или выходной многими функциями DAX.</span><span class="sxs-lookup"><span data-stu-id="f5e31-216">Tabular models also include the Table data type as the input or output to many DAX functions.</span></span> <span data-ttu-id="f5e31-217">Например, функция FILTER принимает в качестве входного аргумента таблицу и возвращает другую таблицу, которая содержит только строки, удовлетворяющие условиям фильтра.</span><span class="sxs-lookup"><span data-stu-id="f5e31-217">For example, the FILTER function takes a table as input and outputs another table that contains only the rows that meet the filter conditions.</span></span> <span data-ttu-id="f5e31-218">Применение табличных функций в сочетании с агрегатными функциями позволяет выполнять сложные вычисления с динамически определяемыми наборами данных.</span><span class="sxs-lookup"><span data-stu-id="f5e31-218">By combining table functions with aggregation functions, you can perform complex calculations over dynamically defined data sets.</span></span>  
  
 <span data-ttu-id="f5e31-219">Хотя типы данных обычно устанавливаются автоматически, важно понимать, как они работают, в особенности в формулах DAX.</span><span class="sxs-lookup"><span data-stu-id="f5e31-219">While data types are typically automatically set, it is important to understand data types and how they apply, in-particular, to DAX formulas.</span></span> <span data-ttu-id="f5e31-220">Например, ошибки в формулах или непредвиденных результаты часто связаны с использованием определенного оператора, который недопустим для указанного в аргументе типа данных.</span><span class="sxs-lookup"><span data-stu-id="f5e31-220">Errors in formulas or unexpected results, for example, are often caused by using a particular operator that cannot be used with a data type specified in an argument.</span></span> <span data-ttu-id="f5e31-221">Например, формула `= 1 & 2`возвращает строковое значение 12.</span><span class="sxs-lookup"><span data-stu-id="f5e31-221">For example, the formula, `= 1 & 2`, returns a string result of 12.</span></span> <span data-ttu-id="f5e31-222">В то же время формула `= "1" + "2"`возвращает целочисленный результат 3.</span><span class="sxs-lookup"><span data-stu-id="f5e31-222">The formula, `= "1" + "2"`, however, returns an integer result of 3.</span></span>  
  
 <span data-ttu-id="f5e31-223">Подробные сведения о типах данных в табличной модели и о явных и неявных преобразованиях типов данных в DAX см. в разделе [Поддерживаемые типы данных (табличные службы SSAS)](data-types-supported-ssas-tabular.md).</span><span class="sxs-lookup"><span data-stu-id="f5e31-223">For detailed information about data types in tabular models and explicit and implicit conversions of data types in DAX, see [Data Types Supported &#40;SSAS Tabular&#41;](data-types-supported-ssas-tabular.md).</span></span>  
  
##  <a name="dax-operators"></a><a name="bkmk_DAX_opertors"></a><span data-ttu-id="f5e31-224">Операторы DAX</span><span class="sxs-lookup"><span data-stu-id="f5e31-224">DAX Operators</span></span>  
 <span data-ttu-id="f5e31-225">В языке DAX используются четыре различных типа операторов вычислений в формулах:</span><span class="sxs-lookup"><span data-stu-id="f5e31-225">The DAX language uses four different types of calculation operators in formulas:</span></span>  
  
-   <span data-ttu-id="f5e31-226">Операторы сравнения, которые сравнивают значения и возвращают логические значения (TRUE/FALSE).</span><span class="sxs-lookup"><span data-stu-id="f5e31-226">Comparison operators to compare values and return a logical TRUE\FALSE value.</span></span>  
  
-   <span data-ttu-id="f5e31-227">Арифметические операторы, которые выполняют арифметические вычисления и возвращают числовые значения.</span><span class="sxs-lookup"><span data-stu-id="f5e31-227">Arithmetic operators to perform arithmetic calculations that return numeric values.</span></span>  
  
-   <span data-ttu-id="f5e31-228">Операторы объединения текста, которые соединяют две и более текстовые строки.</span><span class="sxs-lookup"><span data-stu-id="f5e31-228">Text concatenation operators to join two or more text strings.</span></span>  
  
-   <span data-ttu-id="f5e31-229">Логические операторы, которые объединяют два и более выражения, возвращая один результат.</span><span class="sxs-lookup"><span data-stu-id="f5e31-229">Logical operators that combine two or more expressions to return a single result.</span></span>  
  
 <span data-ttu-id="f5e31-230">Подробные сведения об операторах, используемых в формулах DAX, см. в разделе [Справочник по операторам DAX для PowerPivot](/dax/dax-operator-reference).</span><span class="sxs-lookup"><span data-stu-id="f5e31-230">For detailed information about operators used in DAX formulas, see [DAX Operator Reference for PowerPivot](/dax/dax-operator-reference).</span></span>  
  
##  <a name="dax-formulas"></a><a name="bkmk_DAX_Formulas"></a><span data-ttu-id="f5e31-231">Формулы DAX</span><span class="sxs-lookup"><span data-stu-id="f5e31-231">DAX Formulas</span></span>  
 <span data-ttu-id="f5e31-232">Формулы DAX необходимы для создания вычислений в вычисляемых столбцах и мерах, а также для защиты данных с помощью фильтров уровня строк.</span><span class="sxs-lookup"><span data-stu-id="f5e31-232">DAX formulas are essential for creating calculations in calculated columns and measures, and securing your data by using row level filters.</span></span> <span data-ttu-id="f5e31-233">Для создания формул для вычисляемых столбцов и мер используется строка формул, расположенная в верхней части окна конструктора моделей.</span><span class="sxs-lookup"><span data-stu-id="f5e31-233">To create formulas for calculated columns and measures, you will use the formula bar along the top of the model designer window.</span></span> <span data-ttu-id="f5e31-234">Для создания формул для фильтров строк используется диалоговое окно диспетчера ролей.</span><span class="sxs-lookup"><span data-stu-id="f5e31-234">To create formulas for row filters, you will use the Role Manager dialog box.</span></span> <span data-ttu-id="f5e31-235">Сведения в этом разделе позволят вам получить представление об основах работы с формулами DAX.</span><span class="sxs-lookup"><span data-stu-id="f5e31-235">Information in this section is meant to get you started with understanding the basics of DAX formulas.</span></span>  
  
###  <a name="formula-basics"></a><a name="basics"></a> <span data-ttu-id="f5e31-236">Основные сведения о формулах</span><span class="sxs-lookup"><span data-stu-id="f5e31-236">Formula Basics</span></span>  
 <span data-ttu-id="f5e31-237">Язык DAX позволяет разработчикам табличных моделей определять нестандартные вычисления как в таблицах моделей (в составе вычисляемых столбцов), так и в мерах, связанных с таблицами, но неотображаемых в них напрямую.</span><span class="sxs-lookup"><span data-stu-id="f5e31-237">DAX enables tabular model authors to define custom calculations in both model tables, as part of calculated columns, and as measures associated with tables, but not appearing directly in them.</span></span> <span data-ttu-id="f5e31-238">Язык DAX также позволяет разработчикам моделей защищать данные посредством создания вычислений, которые возвращают логическое значение; это значение определяет, разрешено ли пользователям-членам определенной роли запрашивать строки в заданной или в связанной таблице.</span><span class="sxs-lookup"><span data-stu-id="f5e31-238">DAX also enables model authors to secure data, by creating calculations that return a Boolean value defining which rows in a particular or related table can be queried by member users of the associated role.</span></span>  
  
 <span data-ttu-id="f5e31-239">Формулы DAX могут быть как очень простыми, так и довольно сложными.</span><span class="sxs-lookup"><span data-stu-id="f5e31-239">DAX formulas can be very simple or quite complex.</span></span> <span data-ttu-id="f5e31-240">В следующей таблице показаны некоторые примеры простых формул, которые могут использоваться в вычисляемом столбце.</span><span class="sxs-lookup"><span data-stu-id="f5e31-240">The following table shows some examples of simple formulas that could be used in a calculated column.</span></span>  
  
|||  
|-|-|  
|<span data-ttu-id="f5e31-241">Формула</span><span class="sxs-lookup"><span data-stu-id="f5e31-241">Formula</span></span>|<span data-ttu-id="f5e31-242">Описание</span><span class="sxs-lookup"><span data-stu-id="f5e31-242">Description</span></span>|  
|`=TODAY()`|<span data-ttu-id="f5e31-243">Вставляет текущую дату в каждую строку столбца.</span><span class="sxs-lookup"><span data-stu-id="f5e31-243">Inserts today's date in every row of the column.</span></span>|  
|`=3`|<span data-ttu-id="f5e31-244">Вставляет значение 3 в каждую строку столбца.</span><span class="sxs-lookup"><span data-stu-id="f5e31-244">Inserts the value 3 in every row of the column.</span></span>|  
|`=[Column1] + [Column2]`|<span data-ttu-id="f5e31-245">Добавляет значения в столбцы [Column1] и [Column2] одной строки и вставляет результаты в вычисляемый столбец той же строки.</span><span class="sxs-lookup"><span data-stu-id="f5e31-245">Adds the values in the same row of [Column1] and [Column2] and puts the results in the calculated column of the same row.</span></span>|  
  
 <span data-ttu-id="f5e31-246">И при создании простых формул, и при создании сложных достаточно выполнять следующие указания.</span><span class="sxs-lookup"><span data-stu-id="f5e31-246">Whether the formula you create is simple or complex, you can use the following steps when building a formula:</span></span>  
  
1.  <span data-ttu-id="f5e31-247">Каждая формула должна начинаться со знака равенства.</span><span class="sxs-lookup"><span data-stu-id="f5e31-247">Each formula must begin with an equal sign.</span></span>  
  
2.  <span data-ttu-id="f5e31-248">Введите или выберите имя функции либо введите выражение.</span><span class="sxs-lookup"><span data-stu-id="f5e31-248">You can either type or select a function name, or type an expression.</span></span>  
  
3.  <span data-ttu-id="f5e31-249">Введите несколько первых букв имени нужной функции, и автозаполнение отобразит список доступных функций, таблиц и столбцов.</span><span class="sxs-lookup"><span data-stu-id="f5e31-249">Begin to type the first few letters of the function or name you want, and AutoComplete displays a list of available functions, tables, and columns.</span></span> <span data-ttu-id="f5e31-250">Чтобы добавить элемент из списка автозаполнения в формулу, нажмите клавишу TAB.</span><span class="sxs-lookup"><span data-stu-id="f5e31-250">Press TAB to add an item from the AutoComplete list to the formula.</span></span>  
  
     <span data-ttu-id="f5e31-251">Также можно нажать кнопку **Fx** , чтобы отобразить список доступных функций.</span><span class="sxs-lookup"><span data-stu-id="f5e31-251">You can also click the **Fx** button to display a list of available functions.</span></span> <span data-ttu-id="f5e31-252">Чтобы выбрать функцию из раскрывающегося списка, выделите ее с помощью клавиш со стрелками, затем нажмите кнопку **OК** , чтобы добавить функцию в формулу.</span><span class="sxs-lookup"><span data-stu-id="f5e31-252">To select a function from the dropdown list, use the arrow keys to highlight the item, and click **OK** to add the function to the formula.</span></span>  
  
4.  <span data-ttu-id="f5e31-253">Укажите аргументы функции, выбрав их из раскрывающегося списка возможных таблиц и столбцов или путем ввода значений.</span><span class="sxs-lookup"><span data-stu-id="f5e31-253">Supply the arguments to the function by selecting them from a dropdown list of possible tables and columns, or by typing in values.</span></span>  
  
5.  <span data-ttu-id="f5e31-254">Проверьте возможные ошибки синтаксиса: убедитесь, что закрыты все скобки и правильно указаны ссылки на столбцы, таблицы и значения.</span><span class="sxs-lookup"><span data-stu-id="f5e31-254">Check for syntax errors: ensure that all parentheses are closed and columns, tables and values are referenced correctly.</span></span>  
  
6.  <span data-ttu-id="f5e31-255">Нажмите клавишу ВВОД, чтобы принять формулу.</span><span class="sxs-lookup"><span data-stu-id="f5e31-255">Press ENTER to accept the formula.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="f5e31-256">В вычисляемом столбце после принятия формулы и ее проверки столбец заполняется значениями.</span><span class="sxs-lookup"><span data-stu-id="f5e31-256">In a calculated column, as soon as you accept the formula and the formula is validated, the column is populated with values.</span></span> <span data-ttu-id="f5e31-257">В мере нажатие клавиши ВВОД сохраняет определение меры в сетке мер в таблице.</span><span class="sxs-lookup"><span data-stu-id="f5e31-257">In a measure, pressing ENTER saves the measure definition in the measure grid with the table.</span></span> <span data-ttu-id="f5e31-258">Если формула является недопустимой, отображается ошибка.</span><span class="sxs-lookup"><span data-stu-id="f5e31-258">If a formula is invalid, an error will be displayed.</span></span>  
  
 <span data-ttu-id="f5e31-259">В этом примере рассматривается более сложная формула в мере «Days in Current Quarter» (Дни в текущем квартале):</span><span class="sxs-lookup"><span data-stu-id="f5e31-259">In this example, we will look at a more complex formula in a measure named Days in Current Quarter:</span></span>  
  
```  
Days in Current Quarter:=COUNTROWS( DATESBETWEEN( 'Date'[Date], STARTOFQUARTER( LASTDATE('Date'[Date])), ENDOFQUARTER('Date'[Date])))  
```  
  
 <span data-ttu-id="f5e31-260">Эта мера используется для расчета коэффициента сопоставления между текущим неполным периодом и предыдущим периодом.</span><span class="sxs-lookup"><span data-stu-id="f5e31-260">This measure is used to create a comparison ratio between an incomplete period and the previous period.</span></span> <span data-ttu-id="f5e31-261">Формула должна учитывать долю прошедшего времени текущего периода, чтобы сравнение с предыдущим периодом проводилось в правильном соотношении.</span><span class="sxs-lookup"><span data-stu-id="f5e31-261">The formula must take into account the proportion of the period that has elapsed, and compare it to the same proportion in the previous period.</span></span> <span data-ttu-id="f5e31-262">В этом случае деление [Дней текущего квартала до даты] / [Дней в текущем квартале] дает пропорцию, прошедшую в текущем периоде.</span><span class="sxs-lookup"><span data-stu-id="f5e31-262">In this case, [Days Current Quarter to Date]/[Days in Current Quarter] gives the proportion elapsed in the current period.</span></span>  
  
 <span data-ttu-id="f5e31-263">Эта формула содержит следующие элементы:</span><span class="sxs-lookup"><span data-stu-id="f5e31-263">This formula contains the following elements:</span></span>  
  
|<span data-ttu-id="f5e31-264">Элемент формулы</span><span class="sxs-lookup"><span data-stu-id="f5e31-264">Formula element</span></span>|<span data-ttu-id="f5e31-265">Описание</span><span class="sxs-lookup"><span data-stu-id="f5e31-265">Description</span></span>|  
|---------------------|-----------------|  
|`Days in Current Quarter:=`|<span data-ttu-id="f5e31-266">Имя меры.</span><span class="sxs-lookup"><span data-stu-id="f5e31-266">The name of the measure.</span></span>|  
|`=`|<span data-ttu-id="f5e31-267">Формула начинается со знака равенства (=).</span><span class="sxs-lookup"><span data-stu-id="f5e31-267">The equals sign (=) begins the formula.</span></span>|  
|`COUNTROWS`|<span data-ttu-id="f5e31-268">[Функция COUNTROWS &#40;DAX&#41;](/dax/countrows-function-dax) подсчитывает количество строк в таблице дат</span><span class="sxs-lookup"><span data-stu-id="f5e31-268">The [COUNTROWS Function &#40;DAX&#41;](/dax/countrows-function-dax) counts the number of rows in the Date table</span></span>|  
|`()`|<span data-ttu-id="f5e31-269">Открывающая и закрывающая скобки указывают аргументы.</span><span class="sxs-lookup"><span data-stu-id="f5e31-269">Open and closing parenthesis specifies arguments.</span></span>|  
|`DATESBETWEEN`|<span data-ttu-id="f5e31-270">Функция DATESBETWEEN возвращает даты между последней датой каждого из значений в столбце Date (Дата) таблицы Date.</span><span class="sxs-lookup"><span data-stu-id="f5e31-270">The DATESBETWEEN function returns the dates between the last date for each value in the Date column in the Date table.</span></span>|  
|`'Date'`|<span data-ttu-id="f5e31-271">Задает таблицу Date (Дата).</span><span class="sxs-lookup"><span data-stu-id="f5e31-271">Specifies the Date table.</span></span> <span data-ttu-id="f5e31-272">Имена таблиц заключаются в одинарные кавычки.</span><span class="sxs-lookup"><span data-stu-id="f5e31-272">Tables are in single quotes.</span></span>|  
|`[Date]`|<span data-ttu-id="f5e31-273">Задает столбец Date в таблице Date.</span><span class="sxs-lookup"><span data-stu-id="f5e31-273">Specifies the Date column in the Date table.</span></span> <span data-ttu-id="f5e31-274">Имена столбцов заключаются в квадратные скобки.</span><span class="sxs-lookup"><span data-stu-id="f5e31-274">Columns are in brackets.</span></span>|  
|`,`||  
|`STARTOFQUARTER`|<span data-ttu-id="f5e31-275">Функция STARTOFQUARTER возвращает дату начала квартала.</span><span class="sxs-lookup"><span data-stu-id="f5e31-275">The STARTOFQUARTER function returns the date of the start of the quarter.</span></span>|  
|`LASTDATE`|<span data-ttu-id="f5e31-276">Функция LASTDATE возвращает последнюю дату квартала.</span><span class="sxs-lookup"><span data-stu-id="f5e31-276">The LASTDATE function returns the last date of the quarter.</span></span>|  
|`'Date'`|<span data-ttu-id="f5e31-277">Задает таблицу Date (Дата).</span><span class="sxs-lookup"><span data-stu-id="f5e31-277">Specifies the Date table.</span></span>|  
|`[Date]`|<span data-ttu-id="f5e31-278">Задает столбец Date в таблице Date.</span><span class="sxs-lookup"><span data-stu-id="f5e31-278">Specifies the Date column in the Date table.</span></span>|  
|`,`||  
|`ENDOFQUARTER`|<span data-ttu-id="f5e31-279">Функция The ENDOFQUARTER</span><span class="sxs-lookup"><span data-stu-id="f5e31-279">The ENDOFQUARTER function</span></span>|  
|`'Date'`|<span data-ttu-id="f5e31-280">Задает таблицу Date (Дата).</span><span class="sxs-lookup"><span data-stu-id="f5e31-280">Specifies the Date table.</span></span>|  
|`[Date]`|<span data-ttu-id="f5e31-281">Задает столбец Date в таблице Date.</span><span class="sxs-lookup"><span data-stu-id="f5e31-281">Specifies the Date column in the Date table.</span></span>|  
  
#### <a name="using-formula-autocomplete"></a><span data-ttu-id="f5e31-282">Использование автозаполнения формул</span><span class="sxs-lookup"><span data-stu-id="f5e31-282">Using Formula AutoComplete</span></span>  
 <span data-ttu-id="f5e31-283">И в строке формул в конструкторе моделей, и в окне формулы фильтров строк в диалоговом окне «Диспетчер ролей» реализована функция автозаполнения.</span><span class="sxs-lookup"><span data-stu-id="f5e31-283">Both the formula bar in the model designer and the formula Row Filters window in the Role Manager dialog box provide an AutoComplete feature.</span></span> <span data-ttu-id="f5e31-284">Автозаполнение помогает соблюдать правильный синтаксис формул, предлагая варианты для каждого из элементов в формуле.</span><span class="sxs-lookup"><span data-stu-id="f5e31-284">AutoComplete helps you enter a valid formula syntax by providing you with options for each element in the formula.</span></span>  
  
-   <span data-ttu-id="f5e31-285">Функцию автозаполнения формул можно использовать в середине существующей формулы со вложенными функциями.</span><span class="sxs-lookup"><span data-stu-id="f5e31-285">You can use Formula AutoComplete in the middle of an existing formula with nested functions.</span></span> <span data-ttu-id="f5e31-286">Текст, расположенный непосредственно перед точкой вставки, используется для отображения значений раскрывающегося списка, а остальной текст остается без изменений.</span><span class="sxs-lookup"><span data-stu-id="f5e31-286">The text immediately before the insertion point is used to display values in the drop-down list, and all of the text after the insertion point remains unchanged.</span></span>  
  
-   <span data-ttu-id="f5e31-287">При использовании функции автозаполнения для функций закрывающая скобка не добавляется, а также не выполняется автоматическое добавление сходных скобок.</span><span class="sxs-lookup"><span data-stu-id="f5e31-287">AutoComplete does not add the closing parenthesis of functions or automatically match parentheses.</span></span> <span data-ttu-id="f5e31-288">Необходимо проверить синтаксическую правильность каждой функции, иначе ее будет нельзя сохранить и использовать.</span><span class="sxs-lookup"><span data-stu-id="f5e31-288">You must make sure that each function is syntactically correct or you cannot save or use the formula.</span></span>  
  
#### <a name="using-multiple-functions-in-a-formula"></a><span data-ttu-id="f5e31-289">Использование нескольких функций в одной формуле</span><span class="sxs-lookup"><span data-stu-id="f5e31-289">Using Multiple Functions in a Formula</span></span>  
 <span data-ttu-id="f5e31-290">Функции можно вкладывать, то есть использовать результаты одной функции в качестве аргумента другой функции.</span><span class="sxs-lookup"><span data-stu-id="f5e31-290">You can nest functions, meaning that you use the results from one function as an argument of another function.</span></span> <span data-ttu-id="f5e31-291">В вычисляемых столбцах поддерживается до 64 уровней вложенности функций.</span><span class="sxs-lookup"><span data-stu-id="f5e31-291">You can nest up to 64 levels of functions in calculated columns.</span></span> <span data-ttu-id="f5e31-292">Однако вложенность функций может усложнить создание формул и диагностику ошибок.</span><span class="sxs-lookup"><span data-stu-id="f5e31-292">However, nesting can make it difficult to create or troubleshoot formulas.</span></span>  
  
 <span data-ttu-id="f5e31-293">Многие функции предназначены для использования исключительно в качестве вложенных.</span><span class="sxs-lookup"><span data-stu-id="f5e31-293">Many functions are designed to be used solely as nested functions.</span></span> <span data-ttu-id="f5e31-294">Эти функции возвращают таблицу, которая не может быть непосредственно сохранена в качестве результата, но может быть передана табличной функции в качестве входного параметра.</span><span class="sxs-lookup"><span data-stu-id="f5e31-294">These functions return a table, which cannot be directly saved as a result; it must be provided as input to a table function.</span></span> <span data-ttu-id="f5e31-295">Например, в качестве первого аргумента функций SUMX, AVERAGEX и MINX требуется таблица.</span><span class="sxs-lookup"><span data-stu-id="f5e31-295">For example, the functions SUMX, AVERAGEX, and MINX all require a table as the first argument.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="f5e31-296">На вложенность функций в мерах существуют некоторые ограничения, которые обеспечивают необходимую производительность в том случае, если зависимости между столбцами потребуют большого объема вычислений.</span><span class="sxs-lookup"><span data-stu-id="f5e31-296">Some limits are applied within measures on nesting of functions to ensure that performance is not affected by the many calculations required by dependencies among columns.</span></span>  
  
##  <a name="dax-functions"></a><a name="bkmk_DAX_functions"></a> <span data-ttu-id="f5e31-297">Функции языка DAX</span><span class="sxs-lookup"><span data-stu-id="f5e31-297">DAX Functions</span></span>  
 <span data-ttu-id="f5e31-298">В этом разделе приводится общее описание *типов* функций, поддерживаемых языком DAX.</span><span class="sxs-lookup"><span data-stu-id="f5e31-298">This section provides an overview of the *types* of functions supported in DAX.</span></span> <span data-ttu-id="f5e31-299">Дополнительные сведения см. в [справочнике по функциям DAX](/dax/dax-function-reference).</span><span class="sxs-lookup"><span data-stu-id="f5e31-299">For more detailed information, see [DAX Function Reference](/dax/dax-function-reference).</span></span>  
  
 <span data-ttu-id="f5e31-300">DAX реализует ряд функций, которые могут использоваться для выполнения вычислений со значениями даты и времени, создания условных значений, операций над строками, выполнения поиска в таблицах на основе связей и выполнения итераций по таблице для выполнения рекурсивных вычислений.</span><span class="sxs-lookup"><span data-stu-id="f5e31-300">DAX provides a variety of functions you can use perform calculations using dates and times, create conditional values, work with strings, perform lookups based on relationships, and the ability to iterate over a table to perform recursive calculations.</span></span> <span data-ttu-id="f5e31-301">Многие из этих функций очень похожи на формулы Excel, однако формулы DAX отличаются в следующих важных аспектах.</span><span class="sxs-lookup"><span data-stu-id="f5e31-301">If you are familiar with Excel formulas, many of these functions will appear very similar; however, DAX formulas are different in the following important ways:</span></span>  
  
-   <span data-ttu-id="f5e31-302">Функция DAX всегда ссылается на столбец или таблицу целиком.</span><span class="sxs-lookup"><span data-stu-id="f5e31-302">A DAX function always references a complete column or a table.</span></span> <span data-ttu-id="f5e31-303">В формулу можно добавить фильтры, чтобы использовать только определенные значения из таблицы или столбца.</span><span class="sxs-lookup"><span data-stu-id="f5e31-303">If you want to use only particular values from a table or column, you can add filters to the formula.</span></span>  
  
-   <span data-ttu-id="f5e31-304">Если нужно настроить вычисления на уровне строк, то в языке DAX имеются функции, использующие в зависимости от контекста либо текущее значение строки, либо связанное значение в качестве своего рода параметра.</span><span class="sxs-lookup"><span data-stu-id="f5e31-304">If you need to customize calculations on a row-by-row basis, DAX provides functions that let you use the current row value or a related value as a kind of parameter, to perform calculations that vary by context.</span></span> <span data-ttu-id="f5e31-305">Основные сведения о работе этих функций см. в далее в подразделе "Контекст в формулах DAX".</span><span class="sxs-lookup"><span data-stu-id="f5e31-305">To understand how these functions work, see Context in DAX Formulas later in this topic.</span></span>  
  
-   <span data-ttu-id="f5e31-306">В языке DAX имеется множество функций, возвращающих таблицу, а не значение.</span><span class="sxs-lookup"><span data-stu-id="f5e31-306">DAX includes many functions that return a table, rather than a value.</span></span> <span data-ttu-id="f5e31-307">Таблица не отображается в клиенте отчетов, она служит для передачи данных другим функциям.</span><span class="sxs-lookup"><span data-stu-id="f5e31-307">The table is not displayed in a reporting client, but is used to provide input to other functions.</span></span> <span data-ttu-id="f5e31-308">Например, можно получить таблицу, а затем подсчитать уникальные значения в ней или вычислить динамические суммы по отфильтрованным таблицам или столбцам.</span><span class="sxs-lookup"><span data-stu-id="f5e31-308">For example, you can retrieve a table and then count the distinct values in it, or calculate dynamic sums across filtered tables or columns.</span></span>  
  
-   <span data-ttu-id="f5e31-309">В число функций языка DAX входят и различные функции *логики операций со временем* .</span><span class="sxs-lookup"><span data-stu-id="f5e31-309">DAX functions include a variety of *time intelligence* functions.</span></span> <span data-ttu-id="f5e31-310">Они позволяют определять или выбирать диапазоны дат, а также выполнять динамические вычисления на основе этих дат или диапазонов.</span><span class="sxs-lookup"><span data-stu-id="f5e31-310">These functions let you define or select date ranges, and perform dynamic calculations based on these dates or range.</span></span> <span data-ttu-id="f5e31-311">Например, можно сравнить суммы по параллельным периодам.</span><span class="sxs-lookup"><span data-stu-id="f5e31-311">For example, you can compare sums across parallel periods.</span></span>  
  
### <a name="date-and-time-functions"></a><span data-ttu-id="f5e31-312">Функции даты и времени</span><span class="sxs-lookup"><span data-stu-id="f5e31-312">Date and Time Functions</span></span>  
 <span data-ttu-id="f5e31-313">Функции даты и времени в DAX схожи с функциями даты и времени Microsoft Excel.</span><span class="sxs-lookup"><span data-stu-id="f5e31-313">The date and time functions in DAX are similar to date and time functions in Microsoft Excel.</span></span> <span data-ttu-id="f5e31-314">Однако функции DAX основаны на типах данных `datetime`, используемых в Microsoft SQL Server.</span><span class="sxs-lookup"><span data-stu-id="f5e31-314">However, DAX functions are based on the `datetime` data types used by Microsoft SQL Server.</span></span> <span data-ttu-id="f5e31-315">Дополнительные сведения см. в разделе [функции даты и времени &#40;DAX&#41;](/dax/date-and-time-functions-dax).</span><span class="sxs-lookup"><span data-stu-id="f5e31-315">For more information, see [Date and Time Functions &#40;DAX&#41;](/dax/date-and-time-functions-dax).</span></span>  
  
### <a name="filter-functions"></a><span data-ttu-id="f5e31-316">Функции фильтров</span><span class="sxs-lookup"><span data-stu-id="f5e31-316">Filter Functions</span></span>  
 <span data-ttu-id="f5e31-317">Функции фильтра в DAX возвращают определенные типы данных, выполняют поиск значений в связанных таблицах и применяют фильтры по связанным значениям.</span><span class="sxs-lookup"><span data-stu-id="f5e31-317">The filter functions in DAX return specific data types, look up values in related tales, and filter by related values.</span></span> <span data-ttu-id="f5e31-318">Функции поиска работают с использованием таблиц и связей, как в базе данных.</span><span class="sxs-lookup"><span data-stu-id="f5e31-318">The lookup functions work by using tables and relationships, like a database.</span></span> <span data-ttu-id="f5e31-319">Функции фильтрации дают возможность управлять контекстом данных для создания динамических вычислений.</span><span class="sxs-lookup"><span data-stu-id="f5e31-319">The filtering functions let you manipulate data context to create dynamic calculations.</span></span> <span data-ttu-id="f5e31-320">Дополнительные сведения см. в разделе [функции фильтров &#40;DAX&#41;](/dax/filter-functions-dax).</span><span class="sxs-lookup"><span data-stu-id="f5e31-320">For more information, see [Filter Functions &#40;DAX&#41;](/dax/filter-functions-dax).</span></span>  
  
### <a name="information-functions"></a><span data-ttu-id="f5e31-321">Информационные функции</span><span class="sxs-lookup"><span data-stu-id="f5e31-321">Information Functions</span></span>  
 <span data-ttu-id="f5e31-322">Информационная функция проверяет ячейку или строку, указанные в качестве аргумента, и сообщает, соответствует ли значение ожидаемому типу.</span><span class="sxs-lookup"><span data-stu-id="f5e31-322">An information function looks at the cell or row that is provided as an argument and tells you whether the value matches the expected type.</span></span> <span data-ttu-id="f5e31-323">Например, функция ISERROR возвращает значение TRUE, если упоминаемое значение содержит ошибку.</span><span class="sxs-lookup"><span data-stu-id="f5e31-323">For example, the ISERROR function returns TRUE if the value that you reference contains an error.</span></span> <span data-ttu-id="f5e31-324">Дополнительные сведения см. в разделе [информационные функции &#40;DAX&#41;](/dax/information-functions-dax).</span><span class="sxs-lookup"><span data-stu-id="f5e31-324">For more information, see [Information Functions &#40;DAX&#41;](/dax/information-functions-dax).</span></span>  
  
### <a name="logical-functions"></a><span data-ttu-id="f5e31-325">Логические функции</span><span class="sxs-lookup"><span data-stu-id="f5e31-325">Logical Functions</span></span>  
 <span data-ttu-id="f5e31-326">Логические функции обрабатывают выражение и возвращают сведения о значениях в выражении.</span><span class="sxs-lookup"><span data-stu-id="f5e31-326">Logical functions act upon an expression to return information about the values in the expression.</span></span> <span data-ttu-id="f5e31-327">Например, функция TRUE позволяет определить, возвращает ли выражение значение TRUE.</span><span class="sxs-lookup"><span data-stu-id="f5e31-327">For example, the TRUE function lets you know whether an expression that you are evaluating returns a TRUE value.</span></span> <span data-ttu-id="f5e31-328">Дополнительные сведения см. в разделе [логические функции &#40;DAX&#41;](/dax/logical-functions-dax).</span><span class="sxs-lookup"><span data-stu-id="f5e31-328">For more information, see [Logical Functions &#40;DAX&#41;](/dax/logical-functions-dax).</span></span>  
  
### <a name="mathematical-and-trigonometric-functions"></a><span data-ttu-id="f5e31-329">Математические и тригонометрические функции</span><span class="sxs-lookup"><span data-stu-id="f5e31-329">Mathematical and Trigonometric Functions</span></span>  
 <span data-ttu-id="f5e31-330">Математические функции в DAX весьма схожи с математическими и тригонометрическими функциями Excel.</span><span class="sxs-lookup"><span data-stu-id="f5e31-330">The mathematical functions in DAX are very similar to the Excel mathematical and trigonometric functions.</span></span> <span data-ttu-id="f5e31-331">Числовые типы данных, используемые в функциях DAX, имеют незначительные отличия.</span><span class="sxs-lookup"><span data-stu-id="f5e31-331">Some minor differences exist in the numeric data types used by DAX functions.</span></span> <span data-ttu-id="f5e31-332">Дополнительные сведения см. в разделе [математические и тригонометрические функции &#40;DAX&#41;](/dax/math-and-trig-functions-dax).</span><span class="sxs-lookup"><span data-stu-id="f5e31-332">For more information, see [Math and Trig Functions &#40;DAX&#41;](/dax/math-and-trig-functions-dax).</span></span>  
  
### <a name="statistical-functions"></a><span data-ttu-id="f5e31-333">Статистические функции</span><span class="sxs-lookup"><span data-stu-id="f5e31-333">Statistical Functions</span></span>  
 <span data-ttu-id="f5e31-334">DAX предоставляет статистические функции, выполняющие статистическую обработку данных.</span><span class="sxs-lookup"><span data-stu-id="f5e31-334">DAX provides statistical functions that perform aggregations.</span></span> <span data-ttu-id="f5e31-335">Помимо вычисления сумм и средних значений, нахождения минимального и максимального значений, DAX также позволяет отфильтровать столбец, прежде чем выполнять статистическую обработку или создавать статистические выражения на основе связанных таблиц.</span><span class="sxs-lookup"><span data-stu-id="f5e31-335">In addition to creating sums and averages, or finding the minimum and maximum values, in DAX you can also filter a column before aggregating or create aggregations based on related tables.</span></span> <span data-ttu-id="f5e31-336">Дополнительные сведения см. в разделе [статистические функции &#40;DAX&#41;](/dax/statistical-functions-dax).</span><span class="sxs-lookup"><span data-stu-id="f5e31-336">For more information, see [Statistical Functions &#40;DAX&#41;](/dax/statistical-functions-dax).</span></span>  
  
### <a name="text-functions"></a><span data-ttu-id="f5e31-337">Текстовые функции</span><span class="sxs-lookup"><span data-stu-id="f5e31-337">Text Functions</span></span>  
 <span data-ttu-id="f5e31-338">Текстовые функции DAX во многом схожи со своими аналогами в Excel.</span><span class="sxs-lookup"><span data-stu-id="f5e31-338">The text functions in DAX are very similar to their counterparts in Excel.</span></span> <span data-ttu-id="f5e31-339">Можно вернуть часть строки, искать текст в строке или объединить строковые значения.</span><span class="sxs-lookup"><span data-stu-id="f5e31-339">You can return part of a string, search for text within a string, or concatenate string values.</span></span> <span data-ttu-id="f5e31-340">DAX также предоставляет функции для управления форматами дат, времени и чисел.</span><span class="sxs-lookup"><span data-stu-id="f5e31-340">DAX also provides functions for controlling the formats for dates, times, and numbers.</span></span> <span data-ttu-id="f5e31-341">Дополнительные сведения см. в разделе [текстовые функции &#40;DAX&#41;](/dax/text-functions-dax).</span><span class="sxs-lookup"><span data-stu-id="f5e31-341">For more information, see [Text Functions &#40;DAX&#41;](/dax/text-functions-dax).</span></span>  
  
### <a name="time-intelligence-functions"></a><span data-ttu-id="f5e31-342">Функции логики операций со временем</span><span class="sxs-lookup"><span data-stu-id="f5e31-342">Time Intelligence Functions</span></span>  
 <span data-ttu-id="f5e31-343">Функции логики операций со временем в DAX позволяют выполнять вычисления с использованием встроенных наборов знаний о календарях и датах.</span><span class="sxs-lookup"><span data-stu-id="f5e31-343">The time intelligence functions provided in DAX let you create calculations that use built-in knowledge about calendars and dates.</span></span> <span data-ttu-id="f5e31-344">Используя диапазоны времени и дат в сочетании с агрегатами или вычислениями, можно производить осмысленные сравнения объемов продаж, запасов и других показателей за сопоставимые периоды времени.</span><span class="sxs-lookup"><span data-stu-id="f5e31-344">By using time and date ranges in combination with aggregations or calculations, you can build meaningful comparisons across comparable time periods for sales, inventory, and so on.</span></span> <span data-ttu-id="f5e31-345">Дополнительные сведения см. в разделе [функции логики операций со временем &#40;DAX&#41;](/dax/time-intelligence-functions-dax).</span><span class="sxs-lookup"><span data-stu-id="f5e31-345">For more information, see [Time Intelligence Functions &#40;DAX&#41;](/dax/time-intelligence-functions-dax).</span></span>  
  
###  <a name="table-valued-functions"></a><a name="bkmk_TableFunc"></a><span data-ttu-id="f5e31-346">Функции с табличным значением</span><span class="sxs-lookup"><span data-stu-id="f5e31-346">Table-Valued Functions</span></span>  
 <span data-ttu-id="f5e31-347">Имеются функции DAX, возвращающие таблицы, принимающие таблицы на входе или использующие таблицы и на входе, и на выходе.</span><span class="sxs-lookup"><span data-stu-id="f5e31-347">There are DAX functions that output tables, take tables as input, or do both.</span></span> <span data-ttu-id="f5e31-348">Поскольку таблица может иметь единственный столбец, функции, возвращающие табличное значение, также принимают отдельные столбцы в качестве входных аргументов.</span><span class="sxs-lookup"><span data-stu-id="f5e31-348">Because a table can have a single column, table-valued functions also take single columns as inputs.</span></span> <span data-ttu-id="f5e31-349">Для оптимального использования всех возможностей формул DAX важно понимать особенности использования таких функций с табличными значениями.</span><span class="sxs-lookup"><span data-stu-id="f5e31-349">Understanding how to use these table-valued functions is important for fully utilizing DAX formulas.</span></span> <span data-ttu-id="f5e31-350">DAX включает следующие типы функций, возвращающих табличное значение.</span><span class="sxs-lookup"><span data-stu-id="f5e31-350">DAX includes the following types of table-valued functions:</span></span>  
  
 <span data-ttu-id="f5e31-351">**Функции фильтров** Возвращают столбец, таблицу или значения, относящиеся к текущей строке.</span><span class="sxs-lookup"><span data-stu-id="f5e31-351">**Filter functions** Return a column, table, or values related to the current row.</span></span>  
  
 <span data-ttu-id="f5e31-352">**Агрегатные функции** Выполняют агрегатные вычисления с любыми выражениями, заданными на строках таблицы.</span><span class="sxs-lookup"><span data-stu-id="f5e31-352">**Aggregation functions** Aggregate any expression over the rows of a table.</span></span>  
  
 <span data-ttu-id="f5e31-353">**Функции логики операций со временем.** Возвращают таблицу дат или используют таблицу дат для вычисления агрегата.</span><span class="sxs-lookup"><span data-stu-id="f5e31-353">**Time intelligence functions** Return a table of dates, or use a table of dates to calculate an aggregation.</span></span>  
  
##  <a name="context-in-dax-formulas"></a><a name="bkmk_context"></a> <span data-ttu-id="f5e31-354">Контекст в формулах DAX</span><span class="sxs-lookup"><span data-stu-id="f5e31-354">Context in DAX Formulas</span></span>  
 <span data-ttu-id="f5e31-355">*Контекст* является важным понятием, которое следует учитывать при создании формул на языке DAX.</span><span class="sxs-lookup"><span data-stu-id="f5e31-355">*Context* is an important concept to understand when creating formulas using DAX.</span></span> <span data-ttu-id="f5e31-356">Контекст позволяет выполнять динамический анализ, при котором результаты формулы могут изменяться в зависимости от выделенной строки или ячейки и любых взаимосвязанных данных.</span><span class="sxs-lookup"><span data-stu-id="f5e31-356">Context is what enables you to perform dynamic analysis, as the results of a formula change to reflect the current row or cell selection and also any related data.</span></span> <span data-ttu-id="f5e31-357">Понимание и эффективное использование контекста важно для построения высокопроизводительного динамического анализа и для устранения неполадок в формулах.</span><span class="sxs-lookup"><span data-stu-id="f5e31-357">Understanding context and using context effectively are critical for building high-performing, dynamic analyses, and for troubleshooting problems in formulas.</span></span>  
  
 <span data-ttu-id="f5e31-358">Формулы в табличных моделях могут вычисляться в разном контексте в зависимости от других структурных элементов, например на них влияет следующее:</span><span class="sxs-lookup"><span data-stu-id="f5e31-358">Formulas in tabular models can be evaluated in a different context, depending on other design elements:</span></span>  
  
-   <span data-ttu-id="f5e31-359">Фильтры, примененные в сводной таблице или отчете</span><span class="sxs-lookup"><span data-stu-id="f5e31-359">Filters applied in a PivotTable or report</span></span>  
  
-   <span data-ttu-id="f5e31-360">Фильтры, определенные в формуле</span><span class="sxs-lookup"><span data-stu-id="f5e31-360">Filters defined within a formula</span></span>  
  
-   <span data-ttu-id="f5e31-361">Отношения, указанные с помощью специальных функций в формуле</span><span class="sxs-lookup"><span data-stu-id="f5e31-361">Relationships specified by using special functions within a formula</span></span>  
  
 <span data-ttu-id="f5e31-362">Существуют различные типы контекста: *контекст строки*, *контекст запроса*и *контекст фильтра*.</span><span class="sxs-lookup"><span data-stu-id="f5e31-362">There are different types of context: *row context*, *query context*, and *filter context*.</span></span>  
  
###  <a name="row-context"></a><a name="bkmk_row_context"></a><span data-ttu-id="f5e31-363">Контекст строки</span><span class="sxs-lookup"><span data-stu-id="f5e31-363">Row Context</span></span>  
 <span data-ttu-id="f5e31-364">*Контекст строки* можно рассматривать как "текущую строку".</span><span class="sxs-lookup"><span data-stu-id="f5e31-364">*Row context* can be thought of as "the current row".</span></span> <span data-ttu-id="f5e31-365">Если формула создана в вычисляемом столбце, то контекст строки для этой формулы включает в себя значения всех столбцов в текущей строке.</span><span class="sxs-lookup"><span data-stu-id="f5e31-365">If you create a formula in a calculated column, the row context for that formula includes the values from all columns in the current row.</span></span> <span data-ttu-id="f5e31-366">Если таблица связана с другой таблицей, содержимое также включает в себя все значения из другой таблицы, связанные с текущей строкой.</span><span class="sxs-lookup"><span data-stu-id="f5e31-366">If the table is related to another table, the content also includes all the values from the other table that are related to the current row.</span></span>  
  
 <span data-ttu-id="f5e31-367">Предположим, создается вычисляемый столбец `=[Freight] + [Tax]`, который складывает значения из двух столбцов Freight и Tax одной таблицы.</span><span class="sxs-lookup"><span data-stu-id="f5e31-367">For example, suppose you create a calculated column, `=[Freight] + [Tax]`, that adds together values from two columns, Freight and Tax, from the same table.</span></span> <span data-ttu-id="f5e31-368">Эта формула автоматически возвращает только значения из текущей строки в указанных столбцах.</span><span class="sxs-lookup"><span data-stu-id="f5e31-368">This formula automatically gets only the values from the current row in the specified columns.</span></span>  
  
 <span data-ttu-id="f5e31-369">Контекст строки также учитывает любые связи, определенные между таблицами, в том числе связи, заданные в пределах вычисляемого столбца при помощи формул DAX, чтобы определить, какие строки в связанных таблицах связаны с текущим рядом.</span><span class="sxs-lookup"><span data-stu-id="f5e31-369">Row context also follows any relationships that have been defined between tables, including relationships defined within a calculated column by using DAX formulas, to determine which rows in related tables are associated with the current row.</span></span>  
  
 <span data-ttu-id="f5e31-370">Например, в следующей формуле функция RELATED используется для выборки значения суммы налогов из связанной таблицы в зависимости от региона, в который отправлен заказ.</span><span class="sxs-lookup"><span data-stu-id="f5e31-370">For example, the following formula uses the RELATED function to fetch a tax value from a related table, based on the region that the order was shipped to.</span></span> <span data-ttu-id="f5e31-371">Значение суммы налогов определяется с использованием значения для региона из текущей таблицы путем поиска этого региона в связанной таблице и получения ставки налога для этого региона из связанной таблицы.</span><span class="sxs-lookup"><span data-stu-id="f5e31-371">The tax value is determined by using the value for region in the current table, looking up the region in the related table, and then getting the tax rate for that region from the related table.</span></span>  
  
```  
= [Freight] + RELATED('Region'[TaxRate])  
```  
  
 <span data-ttu-id="f5e31-372">Эта формула получает налоговую ставку в текущем регионе из таблицы Region и складывает ее со значением столбца Freight.</span><span class="sxs-lookup"><span data-stu-id="f5e31-372">This formula gets the tax rate for the current region from the Region table and adds it to the value of the Freight column.</span></span> <span data-ttu-id="f5e31-373">В формулах DAX не обязательно знать или задавать особые связи, соединяющие таблицы.</span><span class="sxs-lookup"><span data-stu-id="f5e31-373">In DAX formulas, you do not need to know or specify the specific relationship that connects the tables.</span></span>  
  
#### <a name="multiple-row-context"></a><span data-ttu-id="f5e31-374">Контекст нескольких строк</span><span class="sxs-lookup"><span data-stu-id="f5e31-374">Multiple Row Context</span></span>  
 <span data-ttu-id="f5e31-375">Язык DAX включает функции, которые повторяют вычисления над таблицей.</span><span class="sxs-lookup"><span data-stu-id="f5e31-375">DAX includes functions that iterate calculations over a table.</span></span> <span data-ttu-id="f5e31-376">Эти функции могут содержать несколько текущих строк, каждая из которых может обладать собственным контекстом строки.</span><span class="sxs-lookup"><span data-stu-id="f5e31-376">These functions can have multiple current rows, each with its own row context.</span></span>  <span data-ttu-id="f5e31-377">В сущности, эти функции позволяют создавать формулы, выполняющие рекурсию по внутреннему или внешнему циклу.</span><span class="sxs-lookup"><span data-stu-id="f5e31-377">In essence, these functions let you create formulas that perform operations recursively over an inner and outer loop.</span></span>  
  
 <span data-ttu-id="f5e31-378">Предположим, модель содержит таблицы **Products** и **Sales** .</span><span class="sxs-lookup"><span data-stu-id="f5e31-378">For example, suppose your model contains a **Products** table and a **Sales** table.</span></span> <span data-ttu-id="f5e31-379">Пользователю может потребоваться просмотреть всю таблицу продаж, содержащую транзакции с множеством продуктов, и найти самый крупный заказ по каждому из продуктов в одной отдельной транзакции.</span><span class="sxs-lookup"><span data-stu-id="f5e31-379">Users might want to go through the entire sales table, which is full of transactions involving multiple products, and find the largest quantity ordered for each product in any one transaction.</span></span>  
  
 <span data-ttu-id="f5e31-380">С помощью DAX можно создать одну формулу, возвращающую необходимое значение, причем ее результаты будут автоматически обновляться при каждом добавлении пользователем данных в таблицы.</span><span class="sxs-lookup"><span data-stu-id="f5e31-380">With DAX you can build a single formula that returns the correct value, and the results are automatically updated any time a user adds data to the tables.</span></span>  
  
```  
=MAXX(FILTER(Sales,[ProdKey]=EARLIER([ProdKey])),Sales[OrderQty])  
```  
  
 <span data-ttu-id="f5e31-381">Подробное пошаговое руководство по этой формуле см. в описании [предыдущей функции](/dax/earlier-function-dax).</span><span class="sxs-lookup"><span data-stu-id="f5e31-381">For a detailed walkthrough of this formula, see the [EARLIER Function](/dax/earlier-function-dax).</span></span>  
  
 <span data-ttu-id="f5e31-382">Иначе говоря, функция EARLIER сохраняет контекст строки из операции, предшествующей текущей.</span><span class="sxs-lookup"><span data-stu-id="f5e31-382">To summarize, the EARLIER function stores the row context from the operation that preceded the current operation.</span></span> <span data-ttu-id="f5e31-383">Функция всегда хранит в памяти два набора контекстов: один набор контекста представляет текущую строку для внутреннего цикла формулы, а другой набор контекста представляет текущую строку для внешнего цикла формулы.</span><span class="sxs-lookup"><span data-stu-id="f5e31-383">At all times, the function stores in memory two sets of context: one set of context represents the current row for the inner loop of the formula, and another set of context represents the current row for the outer loop of the formula.</span></span> <span data-ttu-id="f5e31-384">DAX автоматически формирует поток значений между двумя циклами, чтобы можно было создавать сложные агрегаты.</span><span class="sxs-lookup"><span data-stu-id="f5e31-384">DAX automatically feeds values between the two loops so that you can create complex aggregates.</span></span>  
  
####  <a name="query-context"></a><a name="bkmk_query_context"></a><span data-ttu-id="f5e31-385">Контекст запроса</span><span class="sxs-lookup"><span data-stu-id="f5e31-385">Query Context</span></span>  
 <span data-ttu-id="f5e31-386">*Контекст запроса* представляет подмножество данных, которое неявным образом возвращается для формулы.</span><span class="sxs-lookup"><span data-stu-id="f5e31-386">*Query context* refers to the subset of data that is implicitly retrieved for a formula.</span></span> <span data-ttu-id="f5e31-387">При помещении меры или другого значения в сводную таблицу или в отчет, основанный на табличной модели, модуль обработки просматривает заголовки строки и столбца, срезы и фильтры отчетов для определения контекста.</span><span class="sxs-lookup"><span data-stu-id="f5e31-387">When a user places a measure or other value field into a PivotTable or into a report based on a tabular model, the engine examines the row and column headers, Slicers, and report filters to determine the context.</span></span> <span data-ttu-id="f5e31-388">После этого необходимые запросы выполняются с привлечением источника данных, что позволяет получить нужное подмножество данных, выполнить вычисления, заданные в формуле, а затем заполнить каждую из ячеек сводной таблицы или отчета.</span><span class="sxs-lookup"><span data-stu-id="f5e31-388">Then, the necessary queries are run against the data source to get the correct subset of data, make the calculations defined by the formula, and then populate each cell in the PivotTable or report.</span></span> <span data-ttu-id="f5e31-389">Полученный набор данных является контекстом запроса для каждой ячейки.</span><span class="sxs-lookup"><span data-stu-id="f5e31-389">The set of data that is retrieved is the query context for each cell.</span></span>  
  
> [!WARNING]  
>  <span data-ttu-id="f5e31-390">Для модели в режиме DirectQuery вычисляется контекст, а затем заданные операции для получения правильного подмножества данных и вычисления результатов преобразуются в инструкции SQL.</span><span class="sxs-lookup"><span data-stu-id="f5e31-390">For a model in DirectQuery mode, the context is evaluated, and then the set operations to retrieve the correct subset of data and calculate the results are translated to SQL statements.</span></span> <span data-ttu-id="f5e31-391">Затем эти инструкции непосредственно выполняются в реляционном хранилище данных.</span><span class="sxs-lookup"><span data-stu-id="f5e31-391">Those statements are then directly run against the relational data store.</span></span> <span data-ttu-id="f5e31-392">Таким образом, хотя метод извлечения данных и вычисления результатов отличен, сам контекст остается неизменным.</span><span class="sxs-lookup"><span data-stu-id="f5e31-392">Therefore, although the method of getting the data and calculating the results is different, the context itself does not change.</span></span>  
  
 <span data-ttu-id="f5e31-393">Поскольку контекст изменяется в зависимости от места размещения формулы, то также могут меняться и результаты ее выполнения.</span><span class="sxs-lookup"><span data-stu-id="f5e31-393">Because context changes depending on where you place the formula, the results of the formula can also change.</span></span>  
  
 <span data-ttu-id="f5e31-394">Предположим, создана простая формула, которая выполняет суммирование значений в столбце **Profit** таблицы **Sales** : `=SUM('Sales'[Profit])`.</span><span class="sxs-lookup"><span data-stu-id="f5e31-394">For example, suppose you create a formula that sums the values in the **Profit** column of the **Sales** table: `=SUM('Sales'[Profit])`.</span></span>  <span data-ttu-id="f5e31-395">Если эта формула используется в вычисляемом столбце таблицы **Sales** , результаты формулы будут одинаковыми для всей таблицы, так как контекстом запроса для формулы всегда является весь набор данных в таблице **Sales** .</span><span class="sxs-lookup"><span data-stu-id="f5e31-395">If you use this formula in a calculated column within the **Sales** table, the results for the formula will be the same for the entire table, because the query context for the formula is always the entire data set of the **Sales** table.</span></span> <span data-ttu-id="f5e31-396">Результаты будут включать значения прибыли для всех регионов, всех товаров, всех лет и т. д.</span><span class="sxs-lookup"><span data-stu-id="f5e31-396">Results will have profit for all regions, all products, all years, and so on.</span></span>  
  
 <span data-ttu-id="f5e31-397">Однако обычно пользователю не требуется получать одни и те же результаты сотни раз подряд, но вместо этого необходимо узнать прибыль за определенный год, в определенной стране, по определенному продукту или некоторое сочетание этих значений, а затем получить общий итог.</span><span class="sxs-lookup"><span data-stu-id="f5e31-397">However, users typically don't want to see the same result hundreds of times, but instead want to get the profit for a particular year, a particular country, a particular product, or some combination of these, and then get a grand total.</span></span>  
  
 <span data-ttu-id="f5e31-398">Контекст в сводной таблице можно изменить путем добавления или удаления заголовков столбцов и строк, а также путем добавления и удаления срезов.</span><span class="sxs-lookup"><span data-stu-id="f5e31-398">In a PivotTable, context can be changed by adding or removing column and row headers and by adding or removing Slicers.</span></span> <span data-ttu-id="f5e31-399">Каждый раз при добавлении пользователем заголовков столбцов или строк в сводную таблицу изменяется контекст запроса, в котором вычисляется мера.</span><span class="sxs-lookup"><span data-stu-id="f5e31-399">Whenever users add column or row headings to the PivotTable, they change the query context in which the measure is evaluated.</span></span> <span data-ttu-id="f5e31-400">Операции создания срезов и фильтрации также влияют на контекст.</span><span class="sxs-lookup"><span data-stu-id="f5e31-400">Slicing and filtering operations also affect context.</span></span> <span data-ttu-id="f5e31-401">Поэтому та же формула при использовании в мере вычисляется в различных *контекстах запроса* для каждой ячейки.</span><span class="sxs-lookup"><span data-stu-id="f5e31-401">Therefore, the same formula, used in a measure, is evaluated in a different *query context* for each cell.</span></span>  
  
####  <a name="filter-context"></a><a name="bkmk_filter_context"></a><span data-ttu-id="f5e31-402">Контекст фильтра</span><span class="sxs-lookup"><span data-stu-id="f5e31-402">Filter Context</span></span>  
 <span data-ttu-id="f5e31-403">*Контекст фильтра* — это набор значений, допустимых для каждого столбца или для конкретных значений, извлекаемых из связанной таблицы.</span><span class="sxs-lookup"><span data-stu-id="f5e31-403">*Filter context* is the set of values allowed in each column, or in the values retrieved from a related table.</span></span> <span data-ttu-id="f5e31-404">Фильтры могут применяться к столбцу в конструкторе или на уровне представления (отчеты и сводные таблицы).</span><span class="sxs-lookup"><span data-stu-id="f5e31-404">Filters can be applied to the column in the designer, or in the presentation layer (reports and PivotTables).</span></span> <span data-ttu-id="f5e31-405">Фильтры также можно определить явным образом с помощью критериев фильтров в формуле.</span><span class="sxs-lookup"><span data-stu-id="f5e31-405">Filters can also be defined explicitly by filter expressions within the formula.</span></span>  
  
 <span data-ttu-id="f5e31-406">Контекст фильтра добавляется при задании ограничений фильтра для набора значений, допустимых в столбце или таблице, с помощью аргументов в формуле.</span><span class="sxs-lookup"><span data-stu-id="f5e31-406">Filter context is added when you specify filter constraints on the set of values allowed in a column or table, by using arguments to a formula.</span></span> <span data-ttu-id="f5e31-407">Контекст фильтра применяется поверх других контекстов, например контекста строки или контекста запроса.</span><span class="sxs-lookup"><span data-stu-id="f5e31-407">Filter context applies on top of other contexts, such as row context or query context.</span></span>  
  
 <span data-ttu-id="f5e31-408">В табличных моделях существует много способов создания контекста фильтра.</span><span class="sxs-lookup"><span data-stu-id="f5e31-408">In tabular models, there are many ways to create filter context.</span></span> <span data-ttu-id="f5e31-409">В контексте клиентов, способных работать с моделью, например в отчетах [!INCLUDE[ssCrescent](../../includes/sscrescent-md.md)] , можно создавать фильтры на лету, добавляя срезы или фильтры отчетов по заголовкам строк и столбцов.</span><span class="sxs-lookup"><span data-stu-id="f5e31-409">Within the context of clients that can consume the model, such as [!INCLUDE[ssCrescent](../../includes/sscrescent-md.md)] reports, users can create filters on the fly by adding slicers or report filters on the row and column headings.</span></span> <span data-ttu-id="f5e31-410">Также можно указать критерии фильтров прямо в формуле, задав связанные значения для фильтрации таблиц, используемых в качестве входных, либо для динамического получения контекста для значений, используемых в вычислениях.</span><span class="sxs-lookup"><span data-stu-id="f5e31-410">You can also specify filter expressions directly within the formula, to specify related values, to filter tables that are used as inputs, or to dynamically get context for the values that are used in calculations.</span></span> <span data-ttu-id="f5e31-411">Можно также полностью или выборочно очищать фильтры для определенных столбцов.</span><span class="sxs-lookup"><span data-stu-id="f5e31-411">You can also completely clear or selectively clear the filters on particular columns.</span></span> <span data-ttu-id="f5e31-412">Это очень полезная возможность при создании формул для вычисления итогов.</span><span class="sxs-lookup"><span data-stu-id="f5e31-412">This is very useful when creating formulas that calculate grand totals.</span></span>  
  
 <span data-ttu-id="f5e31-413">Дополнительные сведения о создании фильтров в формулах см. в разделе [функция Filter](/dax/filter-function-dax).</span><span class="sxs-lookup"><span data-stu-id="f5e31-413">For more information about how to create filters within formulas, see the [FILTER Function](/dax/filter-function-dax).</span></span>  
  
 <span data-ttu-id="f5e31-414">Пример того, как можно очистить фильтры для создания общих итогов, см. в разделе [функция ALL](/dax/all-function-dax).</span><span class="sxs-lookup"><span data-stu-id="f5e31-414">For an example of how filters can be cleared to create grand totals, see the [ALL Function](/dax/all-function-dax).</span></span>  
  
 <span data-ttu-id="f5e31-415">Примеры выборочного удаления и применения фильтров в формулах см. в разделе [Функция ALLEXCEPT](/dax/allexcept-function-dax).</span><span class="sxs-lookup"><span data-stu-id="f5e31-415">For examples of how to selectively clear and apply filters within formulas, see the [ALLEXCEPT Function](/dax/allexcept-function-dax).</span></span>  
  
####  <a name="determining-context-in-formulas"></a><a name="bkmk_determine_context"></a> <span data-ttu-id="f5e31-416">Определение контекста в формулах</span><span class="sxs-lookup"><span data-stu-id="f5e31-416">Determining Context in Formulas</span></span>  
 <span data-ttu-id="f5e31-417">При создании формулы DAX сначала проверяется допустимость ее синтаксиса, после чего проверяется возможность найти имена столбцов и таблиц из формулы в текущем контексте.</span><span class="sxs-lookup"><span data-stu-id="f5e31-417">When you create a DAX formula, the formula is first tested for valid syntax, and then tested to make sure the names of the columns and tables included in the formula can be found in the current context.</span></span> <span data-ttu-id="f5e31-418">Если не удается найти какие-либо указанные в формуле столбец или таблицу, то возвращается ошибка.</span><span class="sxs-lookup"><span data-stu-id="f5e31-418">If any column or table specified by the formula cannot be found, an error is returned.</span></span>  
  
 <span data-ttu-id="f5e31-419">Контекст во время проверки (а также во время операций повторного вычисления) определяется так, как описано в предыдущих разделах, с учетом доступных таблиц в модели, любых связей между таблицами и применяемых фильтров.</span><span class="sxs-lookup"><span data-stu-id="f5e31-419">Context during validation (and recalculation operations) is determined as described in the preceding sections, by using the available tables in the model, any relationships between the tables, and any filters that have been applied.</span></span>  
  
 <span data-ttu-id="f5e31-420">Например, если данные импортированы в новую таблицу и не связаны с любыми другими таблицами, но фильтры еще не применены, то в *текущий контекст* будет входить весь набор столбцов в таблице.</span><span class="sxs-lookup"><span data-stu-id="f5e31-420">For example, if you have just imported some data into a new table and it is not related to any other tables (and you have not applied any filters), the *current context* is the entire set of columns in the table.</span></span> <span data-ttu-id="f5e31-421">Если между этой и другими таблицами существуют связи, то текущий контекст будет включать связанные таблицы.</span><span class="sxs-lookup"><span data-stu-id="f5e31-421">If the table is linked by relationships to other tables, the current context includes the related tables.</span></span> <span data-ttu-id="f5e31-422">При добавлении столбца из таблицы в отчет, где есть срезы и, возможно, некоторые фильтры отчетов, контекст формулы представляет собой подмножество данных в каждой ячейке отчета.</span><span class="sxs-lookup"><span data-stu-id="f5e31-422">If you add a column from the table to a report that has Slicers and maybe some report filters, the context for the formula is the subset of data in each cell of the report.</span></span>  
  
 <span data-ttu-id="f5e31-423">Контекст — это мощная концепция, которая может также усложнять поиск и исправление ошибок в формулах.</span><span class="sxs-lookup"><span data-stu-id="f5e31-423">Context is a powerful concept that can also make it difficult to troubleshoot formulas.</span></span> <span data-ttu-id="f5e31-424">Рекомендуется начать работу с простых формул и связей, чтобы понять, как работает контекст.</span><span class="sxs-lookup"><span data-stu-id="f5e31-424">We recommend that you begin with simple formulas and relationships to see how context works.</span></span> <span data-ttu-id="f5e31-425">В следующем разделе приведены несколько примеров использования формул в различных типах контекстов для возвращения динамических результатов.</span><span class="sxs-lookup"><span data-stu-id="f5e31-425">The following section provides some examples of how formulas use different types of context to dynamically return results.</span></span>  
  
##### <a name="examples-of-context-in-formulas"></a><span data-ttu-id="f5e31-426">Примеры контекста в формулах</span><span class="sxs-lookup"><span data-stu-id="f5e31-426">Examples of Context in Formulas</span></span>  
  
1.  <span data-ttu-id="f5e31-427">Функция, [связанная с функцией](/dax/related-function-dax) , расширяет контекст текущей строки, добавляя значения в связанный столбец.</span><span class="sxs-lookup"><span data-stu-id="f5e31-427">The [RELATED Function](/dax/related-function-dax) function expands the context of the current row to include values in a related column.</span></span> <span data-ttu-id="f5e31-428">Это позволяет выполнять уточняющие запросы.</span><span class="sxs-lookup"><span data-stu-id="f5e31-428">This lets you perform lookups.</span></span> <span data-ttu-id="f5e31-429">Пример в этом разделе показывает взаимодействие между контекстом строки и фильтрации.</span><span class="sxs-lookup"><span data-stu-id="f5e31-429">The example in this topic illustrates the interaction of filtering and row context.</span></span>  
  
2.  <span data-ttu-id="f5e31-430">Функция [Filter](/dax/filter-function-dax) позволяет указать строки для включения в текущий контекст.</span><span class="sxs-lookup"><span data-stu-id="f5e31-430">The [FILTER Function](/dax/filter-function-dax) function lets you specify the rows to include in the current context.</span></span> <span data-ttu-id="f5e31-431">Примеры в этом разделе также показывают порядок внедрения фильтров в другие функции, которые выполняют агрегатную обработку.</span><span class="sxs-lookup"><span data-stu-id="f5e31-431">The examples in this topic also illustrate how to embed filters within other functions that perform aggregates.</span></span>  
  
3.  <span data-ttu-id="f5e31-432">Функция [ALL](/dax/all-function-dax) задает контекст в формуле.</span><span class="sxs-lookup"><span data-stu-id="f5e31-432">The [ALL Function](/dax/all-function-dax) function sets context within a formula.</span></span> <span data-ttu-id="f5e31-433">Ее можно использовать для переопределения фильтров, которые применяются к результату контекста запроса.</span><span class="sxs-lookup"><span data-stu-id="f5e31-433">You can use it to override filters that are applied as result of query context.</span></span>  
  
4.  <span data-ttu-id="f5e31-434">Функция [ALLEXCEPT](/dax/allexcept-function-dax) позволяет удалить все фильтры, кроме указанных вами.</span><span class="sxs-lookup"><span data-stu-id="f5e31-434">The [ALLEXCEPT Function](/dax/allexcept-function-dax) function lets you remove all filters except one that you specify.</span></span> <span data-ttu-id="f5e31-435">Оба раздела содержат примеры, демонстрирующие построение формул и дающие представление о сложных контекстах.</span><span class="sxs-lookup"><span data-stu-id="f5e31-435">Both topics include examples that walk you through building formulas and understanding complex contexts.</span></span>  
  
5.  <span data-ttu-id="f5e31-436">[Функция предыдущей](/dax/earlier-function-dax) функции и [самые ранние](/dax/earliest-function-dax) функции функций позволяют перебирать таблицы, выполняя вычисления при ссылке на значение из внутреннего цикла.</span><span class="sxs-lookup"><span data-stu-id="f5e31-436">The [EARLIER Function](/dax/earlier-function-dax) and [EARLIEST Function](/dax/earliest-function-dax) functions let you loop through tables by performing calculations, while referencing a value from an inner loop.</span></span> <span data-ttu-id="f5e31-437">Пользователи, знакомые с понятием рекурсии, внутренними и внешними циклами, по достоинству оценят возможности, которые предоставляют функции EARLIER и EARLIEST.</span><span class="sxs-lookup"><span data-stu-id="f5e31-437">If you are familiar with the concept of recursion and with inner and outer loops, you will appreciate the power that the EARLIER and EARLIEST functions provide.</span></span> <span data-ttu-id="f5e31-438">Пользователям, незнакомым с этими основными понятиями, рекомендуется пошагово выполнить примеры, чтобы понять, как внутренний и внешний контексты используются при вычислениях.</span><span class="sxs-lookup"><span data-stu-id="f5e31-438">If you are new to these concepts, you should follow the steps in the example carefully to see how the inner and outer contexts are used in calculations.</span></span>  
  
##  <a name="formulas-and-the-tabular-model"></a><a name="bkmk_RelModel"></a><span data-ttu-id="f5e31-439">Формулы и табличная модель</span><span class="sxs-lookup"><span data-stu-id="f5e31-439">Formulas and the Tabular Model</span></span>  
 <span data-ttu-id="f5e31-440">Конструктор моделей в среде [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)]представляет собой область, в которой можно работать с множеством таблиц данных и связывать таблицы в табличную модель.</span><span class="sxs-lookup"><span data-stu-id="f5e31-440">The model designer, in [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)], is an area where you can work with multiple tables of data and connect the tables in a tabular model.</span></span> <span data-ttu-id="f5e31-441">В этой модели таблицы соединяются связями по столбцам с общими значениями (ключами).</span><span class="sxs-lookup"><span data-stu-id="f5e31-441">Within this model, tables are joined by relationships on columns with common values (keys).</span></span> <span data-ttu-id="f5e31-442">Табличная модель позволяет связывать значения со столбцами из других таблиц и создавать более содержательные вычисления.</span><span class="sxs-lookup"><span data-stu-id="f5e31-442">The tabular model lets you link values to columns in other tables and create more interesting calculations.</span></span> <span data-ttu-id="f5e31-443">Как и в реляционной базе данных, поддерживается соединение множества уровней связанных таблиц и использование в результатах столбцов из любых таблиц.</span><span class="sxs-lookup"><span data-stu-id="f5e31-443">Just as in a relational database, you can connect many levels of related tables and use columns from any of the tables in the results.</span></span>  
  
 <span data-ttu-id="f5e31-444">Например, можно связать таблицу продаж, таблицу продуктов и таблицу категорий продуктов, и пользователи смогут работать с различными сочетаниями столбцов в сводных таблицах и отчетах.</span><span class="sxs-lookup"><span data-stu-id="f5e31-444">For example, you can link a sales table, a products table, and a product categories table, and users can use various combinations of the columns in PivotTables and reports.</span></span> <span data-ttu-id="f5e31-445">Связанные поля могут быть использованы для фильтрации связанных таблиц или для создания вычислений над подмножествами.</span><span class="sxs-lookup"><span data-stu-id="f5e31-445">Related fields can be used to filter connected tables, or to create calculations over subsets.</span></span> <span data-ttu-id="f5e31-446">(Сведения о реляционных базах данных и о работе с таблицами и соединениями см. в разделе [Связи (табличные службы SSAS)](relationships-ssas-tabular.md).)</span><span class="sxs-lookup"><span data-stu-id="f5e31-446">(If you are not familiar with relational database and working with tables and joins, see [Relationships &#40;SSAS Tabular&#41;](relationships-ssas-tabular.md).)</span></span>  
  
 <span data-ttu-id="f5e31-447">В табличных моделях поддерживаются множественные связи между таблицами.</span><span class="sxs-lookup"><span data-stu-id="f5e31-447">Tabular models support multiple relationships among tables.</span></span> <span data-ttu-id="f5e31-448">Во избежание путаницы или неверных результатов активной может одновременно быть только одна связь, однако можно изменять активную связь по необходимости для прохода по различным соединениям между данными в вычислениях.</span><span class="sxs-lookup"><span data-stu-id="f5e31-448">To avoid confusion or wrong results, only one relationship at a time is designated as the active relationship, but you can change the active relationship as necessary to traverse different connections in the data in calculations.</span></span> <span data-ttu-id="f5e31-449">[Функция USERELATIONSHIP &#40;DAX&#41;](/dax/userelationship-function-dax) может использоваться для указания одной или нескольких связей, которые будут использоваться в конкретном вычислении.</span><span class="sxs-lookup"><span data-stu-id="f5e31-449">The [USERELATIONSHIP Function &#40;DAX&#41;](/dax/userelationship-function-dax) can be used to specify one or more relationships to be used in a specific calculation.</span></span>  
  
 <span data-ttu-id="f5e31-450">В табличной модели должны соблюдаться следующие правила создания формул.</span><span class="sxs-lookup"><span data-stu-id="f5e31-450">In a tabular model, you should observe these formula design rules:</span></span>  
  
-   <span data-ttu-id="f5e31-451">Если таблицы соединены с помощью связи, то необходимо сделать так, чтобы в тех двух столбцах, которые используются в качестве ключа, были совпадающие значения.</span><span class="sxs-lookup"><span data-stu-id="f5e31-451">When tables are connected by a relationship, you must ensure that the two columns used as keys have values that match.</span></span> <span data-ttu-id="f5e31-452">Ссылочная целостность принудительно не включается, поэтому наличие несоответствующих значений в столбце, используемом в качестве ключевого, не препятствует созданию связи.</span><span class="sxs-lookup"><span data-stu-id="f5e31-452">Referential integrity is not enforced, however; therefore it is possible to have non-matching values in a key column and still create a relationship.</span></span> <span data-ttu-id="f5e31-453">В этом случае следует помнить, что наличие пустых или несоответствующих значений может повлиять на результаты вычисления формул.</span><span class="sxs-lookup"><span data-stu-id="f5e31-453">If this happens, you should be aware that blank values or non-matching values might affect the results of formulas.</span></span>  
  
-   <span data-ttu-id="f5e31-454">При соединении таблиц в модели с помощью связей увеличивается размер *контекста*, в котором вычисляются формулы.</span><span class="sxs-lookup"><span data-stu-id="f5e31-454">When you link tables in your model by using relationships, you enlarge the scope, or *context*, in which your formulas are evaluated.</span></span> <span data-ttu-id="f5e31-455">Изменения контекста, являющиеся итогом добавления новых таблиц, новых связей или смены активной связи, могут привести к совершенно непредвиденным изменениям результатов.</span><span class="sxs-lookup"><span data-stu-id="f5e31-455">Changes in context resulting from the addition of new tables, new relationships, or from changes in the active relationship can cause your results to change in ways that you might not anticipate.</span></span> <span data-ttu-id="f5e31-456">Дополнительные сведения см. в подразделе [Контекст в формулах DAX](#bkmk_context) ранее в этом разделе.</span><span class="sxs-lookup"><span data-stu-id="f5e31-456">For more information, see [Context in DAX Formulas](#bkmk_context) earlier in this topic.</span></span>  
  
##  <a name="working-with-tables-and-columns"></a><a name="bkmk_tables"></a><span data-ttu-id="f5e31-457">Работа с таблицами и столбцами</span><span class="sxs-lookup"><span data-stu-id="f5e31-457">Working with Tables and Columns</span></span>  
 <span data-ttu-id="f5e31-458">Таблицы в табличных моделях сходны с таблицами Excel, но отличаются тем, что работают с данными и формулами.</span><span class="sxs-lookup"><span data-stu-id="f5e31-458">Tables in tabular models look like Excel tables, but are different in the way they work with data and with formulas:</span></span>  
  
-   <span data-ttu-id="f5e31-459">Формулы работают только с таблицами и столбцами, а не с отдельными ячейками, ссылками на диапазоны и массивами.</span><span class="sxs-lookup"><span data-stu-id="f5e31-459">Formulas work only with tables and columns, not with individual cells, range references, or arrays.</span></span>  
  
-   <span data-ttu-id="f5e31-460">В формулах можно использовать связи для получения значений из связанных таблиц.</span><span class="sxs-lookup"><span data-stu-id="f5e31-460">Formulas can use relationships to get values from related tables.</span></span> <span data-ttu-id="f5e31-461">Возвращаемые значения всегда связаны со значением в текущей строке.</span><span class="sxs-lookup"><span data-stu-id="f5e31-461">The values that are retrieved are always related to the current row value.</span></span>  
  
-   <span data-ttu-id="f5e31-462">Нельзя иметь неупорядоченные или неоднородные данные, как это возможно на листе Excel.</span><span class="sxs-lookup"><span data-stu-id="f5e31-462">You cannot have irregular or "ragged" data like you can in an Excel worksheet.</span></span> <span data-ttu-id="f5e31-463">Каждая строка в таблице должна содержать одинаковое количество столбцов.</span><span class="sxs-lookup"><span data-stu-id="f5e31-463">Each row in a table must contain the same number of columns.</span></span> <span data-ttu-id="f5e31-464">Однако некоторые столбцы могут иметь пустые значения.</span><span class="sxs-lookup"><span data-stu-id="f5e31-464">However, you can have empty values in some columns.</span></span> <span data-ttu-id="f5e31-465">Таблицы данных Excel и таблицы данных табличной модели не являются взаимозаменяемыми.</span><span class="sxs-lookup"><span data-stu-id="f5e31-465">Excel data tables and tabular model data tables are not interchangeable.</span></span>  
  
-   <span data-ttu-id="f5e31-466">Поскольку тип данных задается для каждого столбца, все значения в столбце должны иметь один тип.</span><span class="sxs-lookup"><span data-stu-id="f5e31-466">Because a data type is set for each column, each value in that column must be of the same type.</span></span>  
  
### <a name="referring-to-tables-and-columns-in-formulas"></a><span data-ttu-id="f5e31-467">Ссылки на таблицы и столбцы в формулах</span><span class="sxs-lookup"><span data-stu-id="f5e31-467">Referring to Tables and Columns in Formulas</span></span>  
 <span data-ttu-id="f5e31-468">На любую таблицу и любой столбец можно ссылаться по имени.</span><span class="sxs-lookup"><span data-stu-id="f5e31-468">You can refer to any table and column by using its name.</span></span> <span data-ttu-id="f5e31-469">Например, следующая формула показывает, как ссылаться на столбцы из двух таблиц по *полному* имени:</span><span class="sxs-lookup"><span data-stu-id="f5e31-469">For example, the following formula illustrates how to refer to columns from two tables by using the *fully qualified* name:</span></span>  
  
```  
=SUM('New Sales'[Amount]) + SUM('Past Sales'[Amount])  
```  
  
 <span data-ttu-id="f5e31-470">При вычислении формулы конструктор моделей сначала проверяет общий синтаксис, а затем сравнивает указанные имена столбцов и таблиц с возможными столбцами и таблицами в текущем контексте.</span><span class="sxs-lookup"><span data-stu-id="f5e31-470">When a formula is evaluated, the model designer first checks for general syntax, and then checks the names of columns and tables that you provide against possible columns and tables in the current context.</span></span> <span data-ttu-id="f5e31-471">Если имя, использованное в формуле, определено неоднозначно либо столбец или таблица не найдены, будет выдана ошибка (строка #ERROR вместо значения данных в ячейках, в которых произошла ошибка).</span><span class="sxs-lookup"><span data-stu-id="f5e31-471">If the name is ambiguous or if the column or table cannot be found, you will get an error on your formula (an #ERROR string instead of a data value in cells where the error occurs).</span></span> <span data-ttu-id="f5e31-472">Дополнительные сведения о требованиях к именованию таблиц, столбцов и других объектов см. в разделе "требования к именованию" в [спецификации синтаксиса DAX для PowerPivot](/dax/dax-syntax-reference).</span><span class="sxs-lookup"><span data-stu-id="f5e31-472">For more information about naming requirements for tables, columns, and other objects, see "Naming Requirements" in [DAX Syntax Specification for PowerPivot](/dax/dax-syntax-reference).</span></span>  
  
### <a name="table-relationships"></a><span data-ttu-id="f5e31-473">Связи между таблицами</span><span class="sxs-lookup"><span data-stu-id="f5e31-473">Table Relationships</span></span>  
 <span data-ttu-id="f5e31-474">Создание связей между таблицами дает возможность выполнять уточняющие запросы данных из другой таблицы и сложные вычисления с помощью связанных значений.</span><span class="sxs-lookup"><span data-stu-id="f5e31-474">By creating relationships between tables, you gain the ability to look up data in another table and use related values to perform complex calculations.</span></span> <span data-ttu-id="f5e31-475">Например, можно использовать вычисляемый столбец для поиска всех заказов, связанных с текущим посредником, а затем суммировать их стоимость.</span><span class="sxs-lookup"><span data-stu-id="f5e31-475">For example, you can use a calculated column to look up all the shipping records related to the current reseller, and then sum the shipping costs for each.</span></span> <span data-ttu-id="f5e31-476">Однако во многих случаях связь не является обязательной.</span><span class="sxs-lookup"><span data-stu-id="f5e31-476">In many cases, however, a relationship might not be necessary.</span></span> <span data-ttu-id="f5e31-477">Можно использовать функцию LOOKUPVALUE в формуле, чтобы вернуть значение в столбце *result_columnName* для строки, удовлетворяющей критериям, которые указаны в параметрах *search_column* и *search_value* .</span><span class="sxs-lookup"><span data-stu-id="f5e31-477">You can use the LOOKUPVALUE function in a formula to return the value in *result_columnName* for the row that meets criteria specified in the *search_column* and *search_value* parameters.</span></span>  
  
 <span data-ttu-id="f5e31-478">Многие функции DAX требуют наличия связи между двумя или несколькими таблицами, чтобы найти столбцы, на которые сделана ссылка, и возвратить осмысленные результаты.</span><span class="sxs-lookup"><span data-stu-id="f5e31-478">Many DAX functions require that a relationship exist between the tables, or among multiple tables, in order to locate the columns that you have referenced and return results that make sense.</span></span> <span data-ttu-id="f5e31-479">Некоторые функции пытаются определить такую связь, но для получения наилучших результатов нужно всегда создавать связь, если это возможно.</span><span class="sxs-lookup"><span data-stu-id="f5e31-479">Other functions will attempt to identify the relationship; however, for best results you should always create a relationship where possible.</span></span> <span data-ttu-id="f5e31-480">Дополнительные сведения см. в подразделе [Формулы и табличная модель](#bkmk_RelModel) ранее в этом разделе.</span><span class="sxs-lookup"><span data-stu-id="f5e31-480">For more information, see [Formulas and the Tabular Model](#bkmk_RelModel) earlier in this topic.</span></span>  
  
##  <a name="updating-the-results-of-formulas-process"></a><a name="bkmk_RefreshRecalc"></a> <span data-ttu-id="f5e31-481">Обновление результатов формул (обработка)</span><span class="sxs-lookup"><span data-stu-id="f5e31-481">Updating the Results of Formulas (Process)</span></span>  
 <span data-ttu-id="f5e31-482">*Обработка данных* и *повторное вычисление* — это две отдельные, но связанные между собой операции.</span><span class="sxs-lookup"><span data-stu-id="f5e31-482">*Data process* and *recalculation* are two separate but related operations.</span></span> <span data-ttu-id="f5e31-483">Ими необходимо уметь пользоваться при создании модели со сложными формулами, большим объемом данных или данными из внешних источников данных.</span><span class="sxs-lookup"><span data-stu-id="f5e31-483">You should thoroughly understand these concepts when designing a model that contains complex formulas, large amounts of data, or data that is obtained from external data sources.</span></span>  
  
 <span data-ttu-id="f5e31-484">*Обработка данных* — это процесс замещения данных в модели новыми данными из внешнего источника данных.</span><span class="sxs-lookup"><span data-stu-id="f5e31-484">*Processing data* is the process of updating the data in a model with new data from an external data source.</span></span>  
  
 <span data-ttu-id="f5e31-485">*Повторным вычислением* называется процесс обновления результатов формул для отражения изменений в самих формулах, а также изменений в базовых данных.</span><span class="sxs-lookup"><span data-stu-id="f5e31-485">*Recalculation* is the process of updating the results of formulas to reflect any changes to the formulas themselves and to reflect changes in the underlying data.</span></span> <span data-ttu-id="f5e31-486">Повторное вычисление влияет на общую производительность в следующих случаях:</span><span class="sxs-lookup"><span data-stu-id="f5e31-486">Recalculation can affect performance in the following ways:</span></span>  
  
-   <span data-ttu-id="f5e31-487">Значения в вычисляемом столбце вычисляются и хранятся в модели.</span><span class="sxs-lookup"><span data-stu-id="f5e31-487">The values in a calculated column are computed and stored in the model.</span></span> <span data-ttu-id="f5e31-488">Чтобы обновить значения в вычисляемом столбце, необходимо обработать модель с помощью одной из трех команд обработки: Обработка полных операций, обработка данных или перерасчет процесса.</span><span class="sxs-lookup"><span data-stu-id="f5e31-488">To update the values in the calculated column, you must process the model using one of three processing commands - Process Full, Process Data, or Process Recalc.</span></span> <span data-ttu-id="f5e31-489">При любом изменении формулы ее результат должен всегда повторно вычисляться для всего столбца.</span><span class="sxs-lookup"><span data-stu-id="f5e31-489">The result of the formula must always be recalculated for the entire column, whenever you change the formula.</span></span>  
  
-   <span data-ttu-id="f5e31-490">Значения, вычисленные мерами, динамически оцениваются, когда пользователь добавляет меру в сводную таблицу или открывает отчет; при изменении контекста пользователем изменяются и значения, возвращаемые мерами.</span><span class="sxs-lookup"><span data-stu-id="f5e31-490">The values calculated by measures are dynamically evaluated whenever a user adds the measure to a pivot table or open a report; as the user modifies the context, values returned by the measure change.</span></span> <span data-ttu-id="f5e31-491">Результаты меры всегда отражают последнее состояние кэша в памяти.</span><span class="sxs-lookup"><span data-stu-id="f5e31-491">The results of the measure always reflect the latest in the in-memory cache.</span></span>  
  
 <span data-ttu-id="f5e31-492">Обработка и повторное вычисление не влияют на формулы фильтров строк, кроме случая, когда в результате повторного вычисления возвращается другое значение, вследствие чего строка становится доступна или недоступна для запросов членов ролей.</span><span class="sxs-lookup"><span data-stu-id="f5e31-492">Processing and recalculation have no effect on row filter formulas unless the result of a recalculation returns a different value, thus making the row queryable or not queryable by role members.</span></span>  
  
 <span data-ttu-id="f5e31-493">Дополнительные сведения см. в разделе [Обработка данных (табличные службы SSAS)](../process-data-ssas-tabular.md).</span><span class="sxs-lookup"><span data-stu-id="f5e31-493">For more information, see [Process Data &#40;SSAS Tabular&#41;](../process-data-ssas-tabular.md).</span></span>  
  
##  <a name="troubleshooting-errors-in-formulas"></a><a name="bkmk_troubleshoot"></a><span data-ttu-id="f5e31-494">Устранение ошибок в формулах</span><span class="sxs-lookup"><span data-stu-id="f5e31-494">Troubleshooting Errors in Formulas</span></span>  
 <span data-ttu-id="f5e31-495">Если во время определения формулы выводится ошибка, значит формула может содержать *синтаксическую ошибку*, *семантическую ошибку*или *ошибку вычисления*.</span><span class="sxs-lookup"><span data-stu-id="f5e31-495">If you get an error when defining a formula, the formula might contain either a *syntactic error*, *semantic error*, or *calculation error*.</span></span>  
  
 <span data-ttu-id="f5e31-496">Синтаксические ошибки устранять проще всего.</span><span class="sxs-lookup"><span data-stu-id="f5e31-496">Syntactic errors are the easiest to resolve.</span></span> <span data-ttu-id="f5e31-497">Они обычно вызваны пропущенной скобкой или запятой.</span><span class="sxs-lookup"><span data-stu-id="f5e31-497">They typically involve a missing parenthesis or comma.</span></span> <span data-ttu-id="f5e31-498">Дополнительные сведения по синтаксису отдельных функций см. в разделе [Спецификация синтаксиса DAX](/dax/dax-function-reference).</span><span class="sxs-lookup"><span data-stu-id="f5e31-498">For help with the syntax of individual functions, see [DAX Function Reference](/dax/dax-function-reference).</span></span>  
  
 <span data-ttu-id="f5e31-499">Ошибки другого типа происходят, когда синтаксис задан правильно, но значение упоминаемого столбца не имеет смысла в контексте формулы.</span><span class="sxs-lookup"><span data-stu-id="f5e31-499">The other type of error occurs when the syntax is correct, but the value or the column referenced does not make sense in the context of the formula.</span></span> <span data-ttu-id="f5e31-500">Семантические ошибки и ошибки вычисления могут вызываться следующими причинами.</span><span class="sxs-lookup"><span data-stu-id="f5e31-500">Such semantic and calculation errors might be caused by any of the following problems:</span></span>  
  
-   <span data-ttu-id="f5e31-501">Формула ссылается на несуществующий столбец, таблицу или функцию.</span><span class="sxs-lookup"><span data-stu-id="f5e31-501">The formula refers to a non-existing column, table, or function.</span></span>  
  
-   <span data-ttu-id="f5e31-502">Формула верна, но подсистема данных в процессе поиска данных обнаруживает несоответствие типов и возвращает ошибку.</span><span class="sxs-lookup"><span data-stu-id="f5e31-502">The formula appears to be correct, but when the data engine fetches the data it finds a type mismatch, and raises an error.</span></span>  
  
-   <span data-ttu-id="f5e31-503">Формула передает функции неверное число или тип параметров.</span><span class="sxs-lookup"><span data-stu-id="f5e31-503">The formula passes an incorrect number or type of parameters to a function.</span></span>  
  
-   <span data-ttu-id="f5e31-504">Формула ссылается на другой столбец, который содержит ошибку, поэтому ее значения недопустимы.</span><span class="sxs-lookup"><span data-stu-id="f5e31-504">The formula refers to a different column that has an error, and therefore its values are invalid.</span></span>  
  
-   <span data-ttu-id="f5e31-505">Формула обращается к необработанному столбцу, в котором есть метаданные, однако отсутствуют данные, пригодные для использования в вычислениях.</span><span class="sxs-lookup"><span data-stu-id="f5e31-505">The formula refers to a column that has not been processed, meaning it has metadata but no actual data to use for calculations.</span></span>  
  
 <span data-ttu-id="f5e31-506">В первых четырех случаях DAX помечает весь столбец, содержащий недопустимую формулу.</span><span class="sxs-lookup"><span data-stu-id="f5e31-506">In the first four cases, DAX flags the entire column that contains the invalid formula.</span></span> <span data-ttu-id="f5e31-507">В последнем случае DAX выделяет имя столбца серым цветом, чтобы показать, что он находится в необработанном состоянии.</span><span class="sxs-lookup"><span data-stu-id="f5e31-507">In the last case, DAX grays out the column to indicate that the column is in an unprocessed state.</span></span>  
  
##  <a name="additional-resources"></a><a name="bkmk_addional_resources"></a> <span data-ttu-id="f5e31-508">Дополнительные ресурсы</span><span class="sxs-lookup"><span data-stu-id="f5e31-508">Additional Resources</span></span>  
 <span data-ttu-id="f5e31-509">Раздел [Табличное моделирование (учебник по Adventure Works)](../tabular-modeling-adventure-works-tutorial.md) содержит пошаговые указания по созданию табличной модели, содержащей много вычислений в вычисляемых столбцах, мерах и фильтрах строк.</span><span class="sxs-lookup"><span data-stu-id="f5e31-509">The [Tabular Modeling &#40;Adventure Works Tutorial&#41;](../tabular-modeling-adventure-works-tutorial.md) provides step-by-step instructions on how to create a tabular model that includes many calculations in calculated columns, measures, and row filters.</span></span> <span data-ttu-id="f5e31-510">Для большинства формул приводится описание предназначения формулы.</span><span class="sxs-lookup"><span data-stu-id="f5e31-510">For most formulas, a description about what the formula is meant to do is provided.</span></span>  
  
 <span data-ttu-id="f5e31-511">В [блоге Analysis Services и команды PowerPivot](https://go.microsoft.com/fwlink/?LinkID=220949&clcid=0x409) содержатся сведения, советы, Новости и объявления о [!INCLUDE[ssASCurrent](../../includes/ssascurrent-md.md)] и PowerPivot.</span><span class="sxs-lookup"><span data-stu-id="f5e31-511">The [Analysis Services and PowerPivot Team Blog](https://go.microsoft.com/fwlink/?LinkID=220949&clcid=0x409) provides information, tips, news and announcements about [!INCLUDE[ssASCurrent](../../includes/ssascurrent-md.md)] and PowerPivot.</span></span>  
  
 <span data-ttu-id="f5e31-512">[Центр ресурсов DAX](https://go.microsoft.com/fwlink/?LinkID=220966&clcid=0x409) содержит внутреннюю и внешнюю информацию по DAX, включая многочисленные решения на языке DAX, предоставленные ведущими специалистами в области бизнес-аналитики.</span><span class="sxs-lookup"><span data-stu-id="f5e31-512">The [DAX Resource Center](https://go.microsoft.com/fwlink/?LinkID=220966&clcid=0x409) provides both internal and external information on DAX, including numerous DAX solutions submitted by leading Business Intelligence professionals.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="f5e31-513">См. также:</span><span class="sxs-lookup"><span data-stu-id="f5e31-513">See Also</span></span>  
 <span data-ttu-id="f5e31-514">[Выражения анализа данных &#40;Справочник по DAX&#41;](/dax/data-analysis-expressions-dax-reference) </span><span class="sxs-lookup"><span data-stu-id="f5e31-514">[Data Analysis Expressions &#40;DAX&#41; Reference](/dax/data-analysis-expressions-dax-reference) </span></span>  
 <span data-ttu-id="f5e31-515">[Меры &#40;табличных&#41;SSAS](measures-ssas-tabular.md) </span><span class="sxs-lookup"><span data-stu-id="f5e31-515">[Measures &#40;SSAS Tabular&#41;](measures-ssas-tabular.md) </span></span>  
 <span data-ttu-id="f5e31-516">[Вычисляемые столбцы &#40;табличные&#41;SSAS](ssas-calculated-columns.md) </span><span class="sxs-lookup"><span data-stu-id="f5e31-516">[Calculated Columns &#40;SSAS Tabular&#41;](ssas-calculated-columns.md) </span></span>  
 <span data-ttu-id="f5e31-517">[Роли &#40;табличные&#41;SSAS](roles-ssas-tabular.md) </span><span class="sxs-lookup"><span data-stu-id="f5e31-517">[Roles &#40;SSAS Tabular&#41;](roles-ssas-tabular.md) </span></span>  
 <span data-ttu-id="f5e31-518">[Ключевые показатели эффективности &#40;табличные&#41;SSAS](kpis-ssas-tabular.md) </span><span class="sxs-lookup"><span data-stu-id="f5e31-518">[KPIs &#40;SSAS Tabular&#41;](kpis-ssas-tabular.md) </span></span>  
 [<span data-ttu-id="f5e31-519">Поддерживаемые источники данных (табличные службы SSAS)</span><span class="sxs-lookup"><span data-stu-id="f5e31-519">Data Sources Supported &#40;SSAS Tabular&#41;</span></span>](data-sources-supported-ssas-tabular.md)  
  
  
