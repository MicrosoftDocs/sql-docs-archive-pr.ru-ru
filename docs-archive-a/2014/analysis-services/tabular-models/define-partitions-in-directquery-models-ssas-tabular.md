---
title: Секции и режим DirectQuery (табличные службы SSAS) | Документация Майкрософт
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: 5f179ba9-6efb-46ae-90e5-945bbfddb719
author: minewiskan
ms.author: owend
ms.openlocfilehash: 5957ed919f15a5c7f39c3c78133786ae6687a2d2
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87666740"
---
# <a name="partitions-and-directquery-mode-ssas-tabular"></a><span data-ttu-id="12ea1-102">Секции и режим DirectQuery (табличные службы SSAS)</span><span class="sxs-lookup"><span data-stu-id="12ea1-102">Partitions and DirectQuery Mode (SSAS Tabular)</span></span>
  <span data-ttu-id="12ea1-103">В этом разделе объясняется использование секций в моделях DirectQuery.</span><span class="sxs-lookup"><span data-stu-id="12ea1-103">This section explains how partitions are used in DirectQuery models.</span></span> <span data-ttu-id="12ea1-104">Дополнительные общие сведения о секциях в табличных моделях см. в разделе [Секции (табличные службы SSAS)](partitions-ssas-tabular.md).</span><span class="sxs-lookup"><span data-stu-id="12ea1-104">For more general information about partitions in tabular models, see [Partitions &#40;SSAS Tabular&#41;](partitions-ssas-tabular.md).</span></span>  
  
 <span data-ttu-id="12ea1-105">Инструкции по изменению используемой секции или просмотру сведений о секции см. в разделе [изменение секции DirectQuery &#40;табличных&#41;SSAS ](../change-the-directquery-partition-ssas-tabular.md).</span><span class="sxs-lookup"><span data-stu-id="12ea1-105">For instructions on how to change the partition that is used, or view information about the partition, see [Change the DirectQuery Partition &#40;SSAS Tabular&#41;](../change-the-directquery-partition-ssas-tabular.md).</span></span>  
  
## <a name="using-partitions-in-directquery-mode"></a><span data-ttu-id="12ea1-106">Использование секций в режиме Direct Query</span><span class="sxs-lookup"><span data-stu-id="12ea1-106">Using Partitions in DirectQuery Mode</span></span>  
 <span data-ttu-id="12ea1-107">Для каждой таблицы следует указать одну секцию, которая будет использоваться в качестве источника данных DirectQuery.</span><span class="sxs-lookup"><span data-stu-id="12ea1-107">For each table, you must specify a single partition to use as the DirectQuery data source.</span></span>  <span data-ttu-id="12ea1-108">Если есть несколько секций, при переводе модели в режим DirectQuery по умолчанию первая секция, которая была создана в таблице, будет отмечена как секция DirectQuery.</span><span class="sxs-lookup"><span data-stu-id="12ea1-108">If there are multiple partitions, when you switch the model to enable DirectQuery mode, by default the first partition that was created in the table is flagged as the DirectQuery partition.</span></span> <span data-ttu-id="12ea1-109">Ее можно будет изменить позже с помощью диспетчера секций в среде [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)].</span><span class="sxs-lookup"><span data-stu-id="12ea1-109">You can change this later by using the Partition Manager in [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)].</span></span>  
  
 <span data-ttu-id="12ea1-110">Почему в режиме DirectQuery разрешена только одна секция?</span><span class="sxs-lookup"><span data-stu-id="12ea1-110">Why allow only a single partition in DirectQuery mode?</span></span>  
  
 <span data-ttu-id="12ea1-111">В табличных моделях, таких как OLAP-модели, секции таблицы определяются с помощью SQL-запросов.</span><span class="sxs-lookup"><span data-stu-id="12ea1-111">In tabular models (as in OLAP models), the partitions of a table are defined by SQL queries.</span></span> <span data-ttu-id="12ea1-112">Разработчик, создающий определение секции, должен следить за тем, чтобы секции не пересекались.</span><span class="sxs-lookup"><span data-stu-id="12ea1-112">The developer who creates the partition definition is responsible for ensuring that partitions do not overlap.</span></span> <span data-ttu-id="12ea1-113">Службы Analysis Services не проверяют принадлежность записей к одной или нескольким секциям.</span><span class="sxs-lookup"><span data-stu-id="12ea1-113">Analysis Services does not check whether records belong in one or multiple partitions.</span></span>  
  
 <span data-ttu-id="12ea1-114">Секции в кэшированной табличной модели ведут себя одинаково.</span><span class="sxs-lookup"><span data-stu-id="12ea1-114">Partitions in a cached tabular model behave the same way.</span></span> <span data-ttu-id="12ea1-115">При использовании модели, находящейся в памяти во время доступа к кэшу, DAX-формулы вычисляются для каждой секции, а результаты объединяются.</span><span class="sxs-lookup"><span data-stu-id="12ea1-115">If you are using an in-memory model, while the cache is being accessed, DAX formulas are evaluated for each partition, and the results are combined.</span></span> <span data-ttu-id="12ea1-116">Тем не менее, когда табличная модель работает в режиме DirectQuery, невозможно выполнить вычисление для нескольких секций, объединить результаты и преобразовать их в одну инструкцию SQL для отправки в реляционное хранилище данных.</span><span class="sxs-lookup"><span data-stu-id="12ea1-116">However, when a tabular model uses DirectQuery mode, it would be impossible to evaluate multiple partitions, combine the results, and convert that into a SQL statement for sending to the relational data store.</span></span> <span data-ttu-id="12ea1-117">Это может привести к неприемлемой потере производительности, а также к потенциально неточным результатам после их объединения.</span><span class="sxs-lookup"><span data-stu-id="12ea1-117">Doing so could lead to unacceptable loss of performance, as well as potential inaccuracies as the results are aggregated.</span></span>  
  
 <span data-ttu-id="12ea1-118">Поэтому для запросов, ответ на которые создается в режиме DirectQuery, сервер использует одну секцию, которая была помечена как первичная секция для доступа DirectQuery. Она называется *секцией DirectQuery*.</span><span class="sxs-lookup"><span data-stu-id="12ea1-118">Therefore, for queries answered in DirectQuery mode, the server uses a single partition that has been marked as the primary partition for DirectQuery access, called the *DirectQuery partition*.</span></span>  <span data-ttu-id="12ea1-119">SQL-запрос, указанный в определении этой секции, определяет полный набор данных, которые могут использоваться для ответов на запросы в режиме DirectQuery.</span><span class="sxs-lookup"><span data-stu-id="12ea1-119">The SQL query specified in the definition of this partition defines the complete set of data that can be used to answer queries in DirectQuery mode.</span></span>  
  
 <span data-ttu-id="12ea1-120">Если явно определенных секций нет, ядро просто создает SQL-запрос для всего реляционного источника данных, выполняет операции на основе наборов, определяемые DAX-формулой, и возвращает результаты запроса.</span><span class="sxs-lookup"><span data-stu-id="12ea1-120">If you do not explicitly define a partition, the engine simply issues a SQL query to the entire relational data source, performs any set-based operations dictated by the DAX formula, and returns the query results.</span></span>  
  
 <span data-ttu-id="12ea1-121">Если в таблице имеется несколько секций и одна из их выбрана в качестве секции DirectQuery, все остальные секции автоматически отмечаются для использования только в памяти.</span><span class="sxs-lookup"><span data-stu-id="12ea1-121">If you have multiple partitions in a table, and select one partition as the DirectQuery partition, by default all other partitions are marked as being for in-memory use only.</span></span>  
  
## <a name="partitions-in-cached-models-and-in-directquery-models"></a><span data-ttu-id="12ea1-122">Секции в кэшированных моделях и в моделях DirectQuery</span><span class="sxs-lookup"><span data-stu-id="12ea1-122">Partitions in Cached Models and in DirectQuery Models</span></span>  
 <span data-ttu-id="12ea1-123">Во время настройки секции DirectQuery следует указать параметры обработки для секции.</span><span class="sxs-lookup"><span data-stu-id="12ea1-123">When you configure a DirectQuery partition, you must specify processing options for the partition.</span></span>  
  
 <span data-ttu-id="12ea1-124">Для секции DirectQuery есть два параметра обработки.</span><span class="sxs-lookup"><span data-stu-id="12ea1-124">There are two processing options for the DirectQuery partition.</span></span> <span data-ttu-id="12ea1-125">Чтобы задать это свойство, воспользуйтесь **Диспетчером секций** в [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)]или [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]и выберите свойство **Параметр обработки** .</span><span class="sxs-lookup"><span data-stu-id="12ea1-125">To set this property, use the **Partition Manager** in [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)], or [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], and select the **Processing Option** property.</span></span> <span data-ttu-id="12ea1-126">В следующей таблице перечислены значения этого свойства и описан результат применения каждого значения при объединении со свойством DirectQueryUsage в строке подключения.</span><span class="sxs-lookup"><span data-stu-id="12ea1-126">The following table lists the values of this property, and describes the effects of each value when combined with the DirectQueryUsage property on the connection string:</span></span>  
  
|<span data-ttu-id="12ea1-127">**DirectQueryUsage** , свойство</span><span class="sxs-lookup"><span data-stu-id="12ea1-127">**DirectQueryUsage** property</span></span>|<span data-ttu-id="12ea1-128">Свойство**Параметр обработки**</span><span class="sxs-lookup"><span data-stu-id="12ea1-128">**Processing Option** property</span></span>|<span data-ttu-id="12ea1-129">Примечания</span><span class="sxs-lookup"><span data-stu-id="12ea1-129">Notes</span></span>|  
|-----------------------------------|------------------------------------|-----------|  
|<span data-ttu-id="12ea1-130">DirectQuery</span><span class="sxs-lookup"><span data-stu-id="12ea1-130">DirectQuery</span></span>|<span data-ttu-id="12ea1-131">Никогда не обрабатывать эту секцию</span><span class="sxs-lookup"><span data-stu-id="12ea1-131">Never process this partition</span></span>|<span data-ttu-id="12ea1-132">Когда модель использует только DirectQuery, обработка не требуется.</span><span class="sxs-lookup"><span data-stu-id="12ea1-132">When the model is using DirectQuery only, processing is never necessary.</span></span><br /><br /> <span data-ttu-id="12ea1-133">В гибридных моделях можно настроить секцию DirectQuery так, чтобы она никогда не обрабатывалась.</span><span class="sxs-lookup"><span data-stu-id="12ea1-133">In hybrid models, you can configure the DirectQuery partition to never be processed.</span></span> <span data-ttu-id="12ea1-134">Например, если выполняется работа с большим набором данных, при этом нет необходимости добавлять все результаты в кэш, можно указать, чтобы секция DirectQuery включала объединение результатов для всех других секций в таблице и не обрабатывала объединение.</span><span class="sxs-lookup"><span data-stu-id="12ea1-134">For example, if you are operating over a very large data set and do not want the full results added to the cache, you can specify that the DirectQuery partition include the union of results for all other partitions in the table, and then never process the union.</span></span> <span data-ttu-id="12ea1-135">Это не касается запросов к реляционному источнику, а запросы к кэшированным данным будут содержать объединенные данные из других секций.</span><span class="sxs-lookup"><span data-stu-id="12ea1-135">Queries that go to the relational source will not be affected, and queries against cached data will combine data from the other partitions</span></span>|  
|<span data-ttu-id="12ea1-136">InMemory с DirectQuery</span><span class="sxs-lookup"><span data-stu-id="12ea1-136">InMemory With DirectQuery</span></span>|<span data-ttu-id="12ea1-137">Разрешить обработку секции</span><span class="sxs-lookup"><span data-stu-id="12ea1-137">Allow partition to be processed</span></span>|<span data-ttu-id="12ea1-138">Если модель использует гибридный режим, то для запросов в памяти и запросов к источнику данных DirectQuery следует использовать одну и ту же секцию.</span><span class="sxs-lookup"><span data-stu-id="12ea1-138">If the model is using hybrid mode, you should use the same partition for queries against the in-memory and queries against the DirectQuery data source.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="12ea1-139">См. также:</span><span class="sxs-lookup"><span data-stu-id="12ea1-139">See Also</span></span>  
 [<span data-ttu-id="12ea1-140">Секции (табличные службы SSAS)</span><span class="sxs-lookup"><span data-stu-id="12ea1-140">Partitions &#40;SSAS Tabular&#41;</span></span>](partitions-ssas-tabular.md)  
  
  
