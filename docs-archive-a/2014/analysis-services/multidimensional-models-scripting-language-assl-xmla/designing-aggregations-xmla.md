---
title: Проектирование агрегатов (XMLA) | Документация Майкрософт
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: reference
helpviewer_keywords:
- statistical information [XML for Analysis]
- batches [XML for Analysis]
- aggregations [Analysis Services], XML for Analysis
- XMLA, aggregations
- queries [XMLA]
- XML for Analysis, aggregations
- iterative aggregation process [XMLA]
ms.assetid: 4dd27afa-10c7-408d-bc24-ca74217ddbcb
author: minewiskan
ms.author: owend
ms.openlocfilehash: 632cc071605cff6e42adec4acd32c9bd9949fc77
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87667451"
---
# <a name="designing-aggregations-xmla"></a><span data-ttu-id="eeb8d-102">Создание агрегатов (XMLA)</span><span class="sxs-lookup"><span data-stu-id="eeb8d-102">Designing Aggregations (XMLA)</span></span>
  <span data-ttu-id="eeb8d-103">Статические схемы связываются с секциями определенных групп мер, чтобы эти секции при хранении агрегатов использовали одинаковую структуру.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-103">Aggregation designs are associated with the partitions of a particular measure group to make sure that the partitions use the same structure when storing aggregations.</span></span> <span data-ttu-id="eeb8d-104">Использование одной структуры хранилища для секций позволяет легко определять секции, которые позднее можно объединить с помощью команды [MergePartitions](https://docs.microsoft.com/bi-reference/xmla/xml-elements-commands/mergepartitions-element-xmla) .</span><span class="sxs-lookup"><span data-stu-id="eeb8d-104">Using the same storage structure for partitions lets you to easily define partitions that can be later merged using the [MergePartitions](https://docs.microsoft.com/bi-reference/xmla/xml-elements-commands/mergepartitions-element-xmla) command.</span></span> <span data-ttu-id="eeb8d-105">Дополнительные сведения о статистических схемах см. в разделе [агрегаты и статистические](../multidimensional-models-olap-logical-cube-objects/aggregations-and-aggregation-designs.md)схемы.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-105">For more information about aggregation designs, see [Aggregations and Aggregation Designs](../multidimensional-models-olap-logical-cube-objects/aggregations-and-aggregation-designs.md).</span></span>  
  
 <span data-ttu-id="eeb8d-106">Чтобы определить агрегаты для статистической схемы, можно использовать команду [DesignAggregations](https://docs.microsoft.com/bi-reference/xmla/xml-elements-commands/designaggregations-element-xmla) в XML для АНАЛИТИКИ (XMLA).</span><span class="sxs-lookup"><span data-stu-id="eeb8d-106">To define aggregations for an aggregation design, you can use the [DesignAggregations](https://docs.microsoft.com/bi-reference/xmla/xml-elements-commands/designaggregations-element-xmla) command in XML for Analysis (XMLA).</span></span> <span data-ttu-id="eeb8d-107">Команда `DesignAggregations` имеет свойства, которые указывают, какая статическая схема должна использоваться в качестве ссылки и каким образом производится управление процессом проектирования по этой ссылке.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-107">The `DesignAggregations` command has properties that identify which aggregation design to use as a reference and how to control the design process based upon that reference.</span></span> <span data-ttu-id="eeb8d-108">Команда `DesignAggregations` и ее свойства позволяют спроектировать агрегаты последовательно или в пакете, а затем просмотреть итоговую статистику создания для оценки процесса проектирования.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-108">Using the `DesignAggregations` command and its properties, you can design aggregations iteratively or in batch, and then view the resulting design statistics to evaluate the design process.</span></span>  
  
## <a name="specifying-an-aggregation-design"></a><span data-ttu-id="eeb8d-109">Задание статистической схемы</span><span class="sxs-lookup"><span data-stu-id="eeb8d-109">Specifying an Aggregation Design</span></span>  
 <span data-ttu-id="eeb8d-110">Свойство [объекта](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/object-element-xmla) `DesignAggregations` команды должно содержать ссылку на существующую статистическую схему.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-110">The [Object](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/object-element-xmla) property of the `DesignAggregations` command must contain an object reference to an existing aggregation design.</span></span> <span data-ttu-id="eeb8d-111">Ссылка содержит идентификаторы базы данных, куба, группы мер и статистической схемы.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-111">The object reference contains a database identifier, cube identifier, measure group identifier, and aggregation design identifier.</span></span> <span data-ttu-id="eeb8d-112">Если этой статистической схемы еще не существует, то возникнет ошибка.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-112">If the aggregation design does not already exist, an error occurs.</span></span>  
  
## <a name="controlling-the-design-process"></a><span data-ttu-id="eeb8d-113">Управление процессом проектирования</span><span class="sxs-lookup"><span data-stu-id="eeb8d-113">Controlling the Design Process</span></span>  
 <span data-ttu-id="eeb8d-114">Управление алгоритмом, используемым для определения агрегатов для статистической схемы, производится при помощи следующих свойств команды `DesignAggregations`.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-114">You can use the following properties of the `DesignAggregations` command to control the algorithm used to define aggregations for the aggregation design:</span></span>  
  
-   <span data-ttu-id="eeb8d-115">Свойство [шаги](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/steps-element-xmla) определяет, сколько итераций `DesignAggregations` должна предпринять команда, прежде чем она вернет управление клиентскому приложению.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-115">The [Steps](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/steps-element-xmla) property determines how many iterations the `DesignAggregations` command should take before it returns control to the client application.</span></span>  
  
-   <span data-ttu-id="eeb8d-116">Свойство [time](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/time-element-xmla) определяет, сколько миллисекунд `DesignAggregations` должна предпринять команда, прежде чем она вернет управление клиентскому приложению.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-116">The [Time](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/time-element-xmla) property determines how many milliseconds the `DesignAggregations` command should take before it returns control to the client application.</span></span>  
  
-   <span data-ttu-id="eeb8d-117">Свойство [оптимизации](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/optimization-element-xmla) определяет предполагаемый процент улучшения производительности, который `DesignAggregations` должна попытаться достичь команда.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-117">The [Optimization](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/optimization-element-xmla) property determines the estimated percentage of performance improvement the `DesignAggregations` command should try to achieve.</span></span> <span data-ttu-id="eeb8d-118">При итеративном проектировании агрегатов это свойство необходимо передавать только в первой команде.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-118">If you are iteratively designing aggregations, you only have to send this property on the first command.</span></span>  
  
-   <span data-ttu-id="eeb8d-119">Свойство [Storage](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/storage-element-xmla) определяет предполагаемый объем дискового пространства в байтах, используемого `DesignAggregations` командой.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-119">The [Storage](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/storage-element-xmla) property determines the estimated amount of disk storage, in bytes, used by the `DesignAggregations` command.</span></span> <span data-ttu-id="eeb8d-120">При итеративном проектировании агрегатов это свойство необходимо передавать только в первой команде.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-120">If you are iteratively designing aggregations, you only have to send this property on the first command.</span></span>  
  
-   <span data-ttu-id="eeb8d-121">Свойство [материализации](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/materialize-element-xmla) определяет, должна ли `DesignAggregations` команда создавать агрегаты, определенные в процессе разработки.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-121">The [Materialize](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/materialize-element-xmla) property determines whether the `DesignAggregations` command should create the aggregations defined during the design process.</span></span> <span data-ttu-id="eeb8d-122">При последовательном проектировании агрегатов на время, пока они ни будут готовы к сохранению, этому свойству следует присвоить значение FALSE.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-122">If you are iteratively designing aggregations, this property should be set to false until you are ready to save the designed aggregations.</span></span> <span data-ttu-id="eeb8d-123">При присваивании этому свойству значения TRUE текущий процесс проектирования завершается, а определенные агрегаты добавляются в указанную статистическую схему.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-123">When set to true, the current design process ends and the defined aggregations are added to the specified aggregation design.</span></span>  
  
## <a name="specifying-queries"></a><span data-ttu-id="eeb8d-124">Задание запросов</span><span class="sxs-lookup"><span data-stu-id="eeb8d-124">Specifying Queries</span></span>  
 <span data-ttu-id="eeb8d-125">Команда DesignAggregations поддерживает команду оптимизации с учетом использования, включая один или несколько `Query` элементов в свойстве [Queries](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/queries-element-xmla) .</span><span class="sxs-lookup"><span data-stu-id="eeb8d-125">The DesignAggregations command supports usage-based optimization command by including one or more `Query` elements in the [Queries](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/queries-element-xmla) property.</span></span> <span data-ttu-id="eeb8d-126">`Queries`Свойство может содержать один или несколько элементов [запроса](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/query-element-xmla) .</span><span class="sxs-lookup"><span data-stu-id="eeb8d-126">The `Queries` property can contain one or more [Query](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/query-element-xmla) elements.</span></span> <span data-ttu-id="eeb8d-127">Если свойство `Queries` не содержит ни одного элемента `Query`, то в указанной в элементе `Object` статистической схеме будет использоваться структура по умолчанию, которая содержит общий набор агрегатов.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-127">If the `Queries` property does not contain any `Query` elements, the aggregation design specified in the `Object` element uses a default structure that contains a general set of aggregations.</span></span> <span data-ttu-id="eeb8d-128">Этот набор разработан с учетом критериев, указанных в свойствах `Optimization``Storage` команды `DesignAggregations`.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-128">This general set of aggregations is designed to meet the criteria specified in the `Optimization` and `Storage` properties of the `DesignAggregations` command.</span></span>  
  
 <span data-ttu-id="eeb8d-129">Каждый элемент `Query` представляет собой целевой запрос, с помощью которого при проектировании можно определить агрегаты, охватывающие наиболее часто используемые запросы.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-129">Each `Query` element represents a goal query that the design process uses to define aggregations that target the most frequently used queries.</span></span> <span data-ttu-id="eeb8d-130">Можно либо указать собственные целевые запросы, либо использовать сведения, хранящиеся в экземпляре [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] в журнале запросов, для получения сведений о наиболее часто используемых запросах.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-130">You can either specify your own goal queries, or you can use the information stored by an instance of [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] in the query log to retrieve information about the most frequently used queries.</span></span> <span data-ttu-id="eeb8d-131">При отправке команды `DesignAggregations` мастер оптимизации с учетом использования извлекает целевые запросы с помощью журнала запросов, основываясь на времени, использовании или указанном пользователе.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-131">The Usage-Based Optimization Wizard uses the query log to retrieve goal queries based on time, usage, or a specified user when it sends a `DesignAggregations` command.</span></span> <span data-ttu-id="eeb8d-132">Дополнительные сведения см. в разделе [Справка F1 мастера оптимизации с учетом использования](../usage-based-optimization-wizard-f1-help.md).</span><span class="sxs-lookup"><span data-stu-id="eeb8d-132">For more information, see [Usage-Based Optimization Wizard F1 Help](../usage-based-optimization-wizard-f1-help.md).</span></span>  
  
 <span data-ttu-id="eeb8d-133">При многократном проектировании агрегатов поисковые запросы необходимо передать только в первой команде `DesignAggregations`, поскольку экземпляр служб [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] сохраняет целевые запросы и использует их при выполнении последующих команд `DesignAggregations`.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-133">If you are iteratively designing aggregations, you only have to pass goal queries in the first `DesignAggregations` command because the [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] instance stores these goal queries and uses these queries during subsequent `DesignAggregations` commands.</span></span> <span data-ttu-id="eeb8d-134">После передачи целевых запросов в первой команде `DesignAggregations` многократной обработки, любые последующие команды `DesignAggregations`, в свойстве `Queries` которых содержатся поисковые запросы, приведут к формированию ошибки.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-134">After you pass goal queries in the first `DesignAggregations` command of an iterative process, any subsequent `DesignAggregations` command that contains goal queries in the `Queries` property generates an error.</span></span>  
  
 <span data-ttu-id="eeb8d-135">Элемент `Query` содержит значение с разделителями-запятыми, включающее следующие аргументы.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-135">The `Query` element contains a comma-delimited value that contains the following arguments:</span></span>  
  
 <span data-ttu-id="eeb8d-136">*Frequency*,*Dataset*[,*Dataset*...]</span><span class="sxs-lookup"><span data-stu-id="eeb8d-136">*Frequency*,*Dataset*[,*Dataset*...]</span></span>  
  
 <span data-ttu-id="eeb8d-137">*Частота*</span><span class="sxs-lookup"><span data-stu-id="eeb8d-137">*Frequency*</span></span>  
 <span data-ttu-id="eeb8d-138">Весовой коэффициент, соответствующий количеству предыдущих выполнений данного запроса.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-138">A weighting factor that corresponds to the number of times that the query has previously been executed.</span></span> <span data-ttu-id="eeb8d-139">Если `Query` элемент представляет новый запрос, значение *Frequency* представляет коэффициент взвешивания, используемый процессом разработки для вычисления запроса.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-139">If the `Query` element represents a new query, the *Frequency* value represents the weighting factor used by the design process to evaluate the query.</span></span> <span data-ttu-id="eeb8d-140">По мере увеличения частоты, увеличивается и вес, присвоенный запросу во время проектирования.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-140">As the frequency value becomes larger, the weight that is put on the query during the design process increases.</span></span>  
  
 <span data-ttu-id="eeb8d-141">*Набор данных*</span><span class="sxs-lookup"><span data-stu-id="eeb8d-141">*Dataset*</span></span>  
 <span data-ttu-id="eeb8d-142">Числовая строка, определяющая атрибуты измерения, включаемые в запрос.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-142">A numeric string that specifies which attributes from a dimension are to be included in the query.</span></span> <span data-ttu-id="eeb8d-143">Количество символов в данной строке должно совпадать с количеством атрибутов в измерении.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-143">This string must have the same number of characters as the number of attributes in the dimension.</span></span> <span data-ttu-id="eeb8d-144">Ноль (0) обозначает, что атрибут, находящийся на указанной порядковой позиции, в запрос для указанного измерения не включается, тогда как единица (1) обозначает включение атрибута, находящегося на указанной порядковой позиции, в запрос для указанного измерения.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-144">Zero (0) indicates that the attribute in the specified ordinal position is not included in the query for the specified dimension, while one (1) indicates that the attribute in the specified ordinal position is included in the query for the specified dimension.</span></span>  
  
 <span data-ttu-id="eeb8d-145">Так, например, строка «011» относится к запросу, в котором задействовано измерение с тремя атрибутами, причем в запрос включены только второй и третий атрибут.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-145">For example, the string "011" would refer to a query involving a dimension with three attributes, from which the second and third attributes are included in the query.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="eeb8d-146">Некоторые атрибуты не рассматриваются в наборе данных.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-146">Some attributes are excluded from consideration in the dataset.</span></span> <span data-ttu-id="eeb8d-147">Дополнительные сведения об исключенных атрибутах см. в статье [элемент Query &#40;XMLA&#41;](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/query-element-xmla).</span><span class="sxs-lookup"><span data-stu-id="eeb8d-147">For more information about excluded attributes, see [Query Element &#40;XMLA&#41;](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/query-element-xmla).</span></span>  
  
 <span data-ttu-id="eeb8d-148">Каждое измерение в группе мер, содержащей статистическую схему, представлено значением *набора данных* в `Query` элементе.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-148">Each dimension in the measure group that contains the aggregation design is represented by a *Dataset* value in the `Query` element.</span></span> <span data-ttu-id="eeb8d-149">Порядок значений *Dataset* должен соответствовать порядку измерений, включенных в группу мер.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-149">The order of *Dataset* values must match the order of dimensions included in the measure group.</span></span>  
  
## <a name="designing-aggregations-using-iterative-or-batch-processes"></a><span data-ttu-id="eeb8d-150">Проектирование агрегатов при помощи последовательного или пакетного процесса</span><span class="sxs-lookup"><span data-stu-id="eeb8d-150">Designing Aggregations Using Iterative or Batch Processes</span></span>  
 <span data-ttu-id="eeb8d-151">В зависимости того, какие интерактивные возможности необходимы процессу проектирования, команду `DesignAggregations` можно использовать в составе итеративного или пакетного процесса.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-151">You can use the `DesignAggregations` command as part of an iterative process or a batch process, depending on the interactivity required by the design process.</span></span>  
  
### <a name="designing-aggregations-using-an-iterative-process"></a><span data-ttu-id="eeb8d-152">Проектирование агрегатов при помощи последовательного процесса</span><span class="sxs-lookup"><span data-stu-id="eeb8d-152">Designing Aggregations Using an Iterative Process</span></span>  
 <span data-ttu-id="eeb8d-153">Чтобы проектировать агрегаты последовательно, отправляют несколько команд `DesignAggregations` для обеспечения точности управления процессом проектирования.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-153">To iteratively design aggregations, you send multiple `DesignAggregations` commands to provide fine control over the design process.</span></span> <span data-ttu-id="eeb8d-154">Мастер статистических схем использует этот же подход для точного управления процессом проектирования.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-154">The Aggregation Design Wizard uses this same approach to provide fine control over the design process.</span></span> <span data-ttu-id="eeb8d-155">Дополнительные сведения см. в разделе [Справка F1 мастера статистических схем](../aggregation-design-wizard-f1-help.md).</span><span class="sxs-lookup"><span data-stu-id="eeb8d-155">For more information, see [Aggregation Design Wizard F1 Help](../aggregation-design-wizard-f1-help.md).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="eeb8d-156">Для последовательного проектирования агрегатов требуется явный сеанс.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-156">An explicit session is required to iteratively design aggregations.</span></span> <span data-ttu-id="eeb8d-157">Дополнительные сведения о явных сеансах см. в статье [Управление подключениями и сеансами &#40;XMLA&#41;](managing-connections-and-sessions-xmla.md).</span><span class="sxs-lookup"><span data-stu-id="eeb8d-157">For more information about explicit sessions, see [Managing Connections and Sessions &#40;XMLA&#41;](managing-connections-and-sessions-xmla.md).</span></span>  
  
 <span data-ttu-id="eeb8d-158">Чтобы начать последовательный процесс, сначала отправляется команда `DesignAggregations`, которая содержит следующие данные.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-158">To start the iterative process, you first send a `DesignAggregations` command that contains the following information:</span></span>  
  
-   <span data-ttu-id="eeb8d-159">Значения свойств `Storage` и `Optimization`, которые являются целевыми для всего процесса проектирования.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-159">The `Storage` and `Optimization` property values on which the whole design process is targeted.</span></span>  
  
-   <span data-ttu-id="eeb8d-160">Значения свойств `Steps` и `Time`, которыми ограничен первый шаг процесса проектирования.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-160">The `Steps` and `Time` property values on which the first step of the design process is limited.</span></span>  
  
-   <span data-ttu-id="eeb8d-161">Если необходима оптимизация на основе использования, свойство `Queries` должно содержать запросы, которые являются целью всего процесса проектирования.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-161">If you want usage-based optimization, the `Queries` property that contains the goal queries on which the whole design process is targeted.</span></span>  
  
-   <span data-ttu-id="eeb8d-162">Свойству `Materialize` присваивается значение FALSE.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-162">The `Materialize` property set to false.</span></span> <span data-ttu-id="eeb8d-163">Присваивание этому свойству значения FALSE показывает, что по завершении этой команды процесс проектирования не будет сохранять определенные агрегаты в статистической схеме.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-163">Setting this property to false indicates that the design process does not save the defined aggregations to the aggregation design when the command is completed.</span></span>  
  
 <span data-ttu-id="eeb8d-164">Первая команда `DesignAggregations` после завершения возвращает набор строк, содержащий статистику проектирования.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-164">When the first `DesignAggregations` command finishes, the command returns a rowset that contains design statistics.</span></span> <span data-ttu-id="eeb8d-165">Оценка этих данных позволит определить, следует ли продолжать процесс проектирования или же его необходимо завершить.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-165">You can evaluate these design statistics to determine whether the design process should continue or whether the design process is finished.</span></span> <span data-ttu-id="eeb8d-166">Если процесс стоит продолжить, то отправляется еще одна команда `DesignAggregations`, содержащая значения `Steps` и `Time`, которыми будет ограничен данный шаг процесса проектирования.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-166">If the process should continue, you then send another `DesignAggregations` command that contains the `Steps` and `Time` values with which this step of the design process is limited.</span></span> <span data-ttu-id="eeb8d-167">После этого производится оценка итоговой статистики и определяется, следует ли продолжать процесс проектирования.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-167">You evaluate the resulting statistics and then determine whether the design process should continue.</span></span> <span data-ttu-id="eeb8d-168">Такой последовательный процесс отправки команд `DesignAggregations` и оценки результатов продолжается до тех пор, пока не будут достигнуты поставленные цели и создан соответствующий набор определенных агрегатов.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-168">This iterative process of sending `DesignAggregations` commands and evaluating the results continues until you reach your goals and have a appropriate set of aggregations defined.</span></span>  
  
 <span data-ttu-id="eeb8d-169">После получения требуемого набора агрегатов отправляется одна завершающая команда `DesignAggregations`.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-169">After you have reached the set of aggregations that you want, you send one final `DesignAggregations` command.</span></span> <span data-ttu-id="eeb8d-170">Свойству `DesignAggregations` этой конечной команды `Steps` следует присвоить значение 1, а его свойству `Materialize` — значение TRUE.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-170">This final `DesignAggregations` command should have its `Steps` property set to 1 and its `Materialize` property set to true.</span></span> <span data-ttu-id="eeb8d-171">Завершающая команда `DesignAggregations` с такими параметрами заканчивает процесс проектирования и сохраняет определенный агрегат в статистической схеме.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-171">By using these settings, this final `DesignAggregations` command completes the design process and saves the defined aggregation to the aggregation design.</span></span>  
  
### <a name="designing-aggregations-using-a-batch-process"></a><span data-ttu-id="eeb8d-172">Проектирование агрегатов при помощи пакетного процесса</span><span class="sxs-lookup"><span data-stu-id="eeb8d-172">Designing Aggregations Using a Batch Process</span></span>  
 <span data-ttu-id="eeb8d-173">Проектирование агрегатов также может производиться в рамках пакетного процесса путем отправки одной команды `DesignAggregations`, содержащей значения свойств `Steps`, `Time`, `Storage` и `Optimization`, которые являются целевыми и ограничивающими для всего процесса проектирования.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-173">You can also design aggregations in a batch process by sending a single `DesignAggregations` command that contains the `Steps`, `Time`, `Storage`, and `Optimization` property values on which the whole design process is targeted and limited.</span></span> <span data-ttu-id="eeb8d-174">Если необходима оптимизация на основе использования, то в свойство `Queries` следует также включить запросы, которые являются целью процесса проектирования.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-174">If you want usage-based optimization, the goal queries on which the design process is targeted should also be included in the `Queries` property.</span></span> <span data-ttu-id="eeb8d-175">Проверьте также, что свойство `Materialize` имеет значение TRUE, чтобы после завершения команды процесс проектирования сохранил определенные агрегаты в статистической схеме.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-175">Also make sure that the `Materialize` property is set to true, so that the design process saves the defined aggregations to the aggregation design when the command finishes.</span></span>  
  
 <span data-ttu-id="eeb8d-176">Пакетный процесс позволяет проектировать агрегаты как в рамках явного, так и неявного сеанса.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-176">You can design aggregations using a batch process in either an implicit or explicit session.</span></span> <span data-ttu-id="eeb8d-177">Дополнительные сведения о неявных и явных сеансах см. в разделе [Управление подключениями и сеансами &#40;XMLA&#41;](managing-connections-and-sessions-xmla.md).</span><span class="sxs-lookup"><span data-stu-id="eeb8d-177">For more information about implicit and explicit sessions, see [Managing Connections and Sessions &#40;XMLA&#41;](managing-connections-and-sessions-xmla.md).</span></span>  
  
## <a name="returning-design-statistics"></a><span data-ttu-id="eeb8d-178">Возврат статистики проектирования</span><span class="sxs-lookup"><span data-stu-id="eeb8d-178">Returning Design Statistics</span></span>  
 <span data-ttu-id="eeb8d-179">При передаче управления клиентскому приложению команда `DesignAggregations` возвращает набор строк, состоящий из одной строки, в которой представлена статистика проектирования для этой команды.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-179">When the `DesignAggregations` command returns control to the client application, the command returns a rowset that contains a single row representing the design statistics for the command.</span></span> <span data-ttu-id="eeb8d-180">Набор строк содержит столбцы, перечисленные в следующей таблице.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-180">The rowset contains the columns listed in the following table.</span></span>  
  
|<span data-ttu-id="eeb8d-181">Столбец</span><span class="sxs-lookup"><span data-stu-id="eeb8d-181">Column</span></span>|<span data-ttu-id="eeb8d-182">Тип данных</span><span class="sxs-lookup"><span data-stu-id="eeb8d-182">Data type</span></span>|<span data-ttu-id="eeb8d-183">Описание</span><span class="sxs-lookup"><span data-stu-id="eeb8d-183">Description</span></span>|  
|------------|---------------|-----------------|  
|<span data-ttu-id="eeb8d-184">Этапы</span><span class="sxs-lookup"><span data-stu-id="eeb8d-184">Steps</span></span>|<span data-ttu-id="eeb8d-185">Целое число</span><span class="sxs-lookup"><span data-stu-id="eeb8d-185">Integer</span></span>|<span data-ttu-id="eeb8d-186">Число шагов, выполняемых командой перед возвратом управления клиентскому приложению.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-186">The number of steps taken by the command before returning control to the client application.</span></span>|  
|<span data-ttu-id="eeb8d-187">Time</span><span class="sxs-lookup"><span data-stu-id="eeb8d-187">Time</span></span>|<span data-ttu-id="eeb8d-188">Long integer</span><span class="sxs-lookup"><span data-stu-id="eeb8d-188">Long integer</span></span>|<span data-ttu-id="eeb8d-189">Время (в миллисекундах), прошедшее до того момента, когда команда вернула управление клиентскому приложению.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-189">The number of milliseconds taken by the command before returning control to the client application.</span></span>|  
|<span data-ttu-id="eeb8d-190">Оптимизация</span><span class="sxs-lookup"><span data-stu-id="eeb8d-190">Optimization</span></span>|<span data-ttu-id="eeb8d-191">Double</span><span class="sxs-lookup"><span data-stu-id="eeb8d-191">Double</span></span>|<span data-ttu-id="eeb8d-192">Примерный процент прироста производительности, достигнутый командой перед возвратом управления клиентскому приложению.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-192">The estimated percentage of performance improvement achieved by the command before returning control to the client application.</span></span>|  
|<span data-ttu-id="eeb8d-193">Память</span><span class="sxs-lookup"><span data-stu-id="eeb8d-193">Storage</span></span>|<span data-ttu-id="eeb8d-194">Long integer</span><span class="sxs-lookup"><span data-stu-id="eeb8d-194">Long integer</span></span>|<span data-ttu-id="eeb8d-195">Примерный объем в байтах, занятый командой перед возвратом управления клиентскому приложению.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-195">The estimated number of bytes taken by the command before returning control to the client application.</span></span>|  
|<span data-ttu-id="eeb8d-196">Агрегации</span><span class="sxs-lookup"><span data-stu-id="eeb8d-196">Aggregations</span></span>|<span data-ttu-id="eeb8d-197">Long integer</span><span class="sxs-lookup"><span data-stu-id="eeb8d-197">Long integer</span></span>|<span data-ttu-id="eeb8d-198">Число статических схем, определенных командой перед возвратом управления клиентскому приложению.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-198">The number of aggregations defined by the command before returning control to the client application.</span></span>|  
|<span data-ttu-id="eeb8d-199">LastStep</span><span class="sxs-lookup"><span data-stu-id="eeb8d-199">LastStep</span></span>|<span data-ttu-id="eeb8d-200">Логическое</span><span class="sxs-lookup"><span data-stu-id="eeb8d-200">Boolean</span></span>|<span data-ttu-id="eeb8d-201">Указывает, представляют ли данные в наборе строк последний шаг в процессе проектирования.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-201">Indicates whether the data in the rowset represents the last step in the design process.</span></span> <span data-ttu-id="eeb8d-202">Если свойству `Materialize` команды было присвоено значение TRUE, то этот столбец установлен в значение TRUE. </span><span class="sxs-lookup"><span data-stu-id="eeb8d-202">If the `Materialize` property of the command was set to true,  the value of this column is set to true.</span></span>|  
  
 <span data-ttu-id="eeb8d-203">Статистика проектирования, которая содержится в наборе строк, возвращаемом после выполнения каждой команды `DesignAggregations`, может быть использована как при последовательном, так и при пакетном проектировании.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-203">You can use the design statistics that are contained in the rowset returned after each `DesignAggregations` command in both iterative and batch design.</span></span> <span data-ttu-id="eeb8d-204">При последовательном проектировании она может использоваться для определения и отображения хода выполнения.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-204">In iterative design, you can use the design statistics to determine and display progress.</span></span> <span data-ttu-id="eeb8d-205">При проектировании агрегатов в пакетном режиме эту статистику можно использовать для определения количества агрегатов, созданных командой.</span><span class="sxs-lookup"><span data-stu-id="eeb8d-205">When you are designing aggregations in batch, you can use the design statistics to determine the number of aggregations created by the command.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="eeb8d-206">См. также:</span><span class="sxs-lookup"><span data-stu-id="eeb8d-206">See Also</span></span>  
 [<span data-ttu-id="eeb8d-207">Разработка с использованием XMLA в службах Analysis Services</span><span class="sxs-lookup"><span data-stu-id="eeb8d-207">Developing with XMLA in Analysis Services</span></span>](developing-with-xmla-in-analysis-services.md)  
  
  
