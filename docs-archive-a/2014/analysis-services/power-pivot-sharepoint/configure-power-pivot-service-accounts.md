---
title: Настройка учетных записей служб PowerPivot | Документация Майкрософт
ms.custom: ''
ms.date: 03/09/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: 76a85cd0-af93-40c9-9adf-9eb0f80b30c1
author: minewiskan
ms.author: owend
ms.openlocfilehash: aac841c3f88d8c43680d1414a50687e9de1d5a3c
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87666230"
---
# <a name="configure-powerpivot-service-accounts"></a>Указание учетных записей служб PowerPivot
  Установка [!INCLUDE[ssGeminiShort](../../includes/ssgeminishort-md.md)] включает в себя две службы, поддерживающие операции сервера. Службы **SQL Server Analysis Services (PowerPivot)** — это службы Windows, обеспечивающие обработку данных PowerPivot и поддержку запросов на сервере приложений. Учетная запись входа для этих служб всегда указывается во время настройки SQL Server при установке служб Analysis Services в режиме интеграции SharePoint.  
  
 Для приложения службы PowerPivot, которая является общей веб-службой, работающей под идентификатором пула приложений на ферме SharePoint, необходимо указать вторую учетную запись. Эта учетная запись указывается при настройке установки [!INCLUDE[ssGeminiShort](../../includes/ssgeminishort-md.md)] с помощью средства настройки PowerPivot или PowerShell.  
  
 Все службы должны запускаться под выделенной специальной учетной записью, чтобы у пользователя была возможность аудита подключений и включения протокола проверки подлинности Kerberos в ферме.  
  
 После настройки учетных записей служб все изменения любой из этих учетных записей должны выполняться в центре администрирования SharePoint. При использовании других средств (таких как консольное приложение «Службы», диспетчер служб IIS или диспетчер конфигурации SQL Server) разрешения не будут обновляться для доступа к базам данных на ферме или для доступа к локальным файлам на физическом сервере.  
  
 Этот раздел состоит из следующих подразделов.  
  
 [Обновление пароля, срок действия которого истек, для экземпляра служб SQL Server Analysis Services (PowerPivot)](#bkmk_passwordssas)  
  
 [Обновление пароля, срок действия которого истек, для приложения службы PowerPivot](configure-power-pivot-service-accounts.md#bkmk_passwordapp)  
  
 [Изменение учетной записи, под которой выполняется служба](#bkmk_newacct)  
  
 [Создание или изменение пула приложений для приложения службы PowerPivot](#bkmk_appPool)  
  
 [Требования к учетной записи и разрешения](#requirements)  
  
 [Устранение неполадок: предоставление административных разрешений вручную](#updatemanually)  
  
 [Устранение неполадок: устранение ошибок HTTP 503, вызванных истечением срока действия паролей для службы центра администрирования или службы веб-приложения SharePoint Foundation](#expired)  
  
##  <a name="update-an-expired-password-for-sql-server-analysis-services-powerpivot-instance"></a><a name="bkmk_passwordssas"></a>Обновление пароля с истекшим сроком действия для экземпляра SQL Server Analysis Services (PowerPivot)  
  
1.  Укажите «Пуск», выберите пункт **Администрирование**, а затем **Службы**. Дважды щелкните службу **SQL Server Analysis Services (PowerPivot)**. Откройте вкладку **Вход в систему**и введите новый пароль для учетной записи.  
  
2.  В центре администрирования в разделе «Безопасность» щелкните ссылку **Настройка управляемых учетных записей**.  
  
3.  Чтобы изменить нужную учетную запись, нажмите кнопку **Изменить** .  
  
4.  Установите флажок **Изменить пароль сейчас**.  
  
5.  Установите флажок **Задать новое значение для пароля учетной записи**. Все службы, работающие с управляемой учетной записью, будут использовать обновленные учетные данные.  
  
##  <a name="update-an-expired-password-for-the-powerpivot-service-application"></a><a name="bkmk_passwordapp"></a>Обновление пароля, срок действия которого истек, для приложения службы PowerPivot  
  
1.  В центре администрирования в разделе «Безопасность» щелкните ссылку **Настройка управляемых учетных записей**.  
  
2.  Чтобы изменить нужную учетную запись, нажмите кнопку **Изменить** .  
  
3.  Установите флажок **Изменить пароль сейчас**.  
  
4.  Установите флажок **Задать новое значение для пароля учетной записи**. Все службы, работающие с управляемой учетной записью, будут использовать обновленные учетные данные.  
  
##  <a name="change-the-account-under-which-each-service-runs"></a><a name="bkmk_newacct"></a>Изменение учетной записи, под которой выполняется каждая служба  
  
1.  В центре администрирования в разделе «Безопасность» щелкните ссылку **Настройка учетных записей служб**.  
  
2.  Выберите **Служба Windows — службы SQL Server Analysis Services** и измените учетную запись службы Analysis Services.  
  
3.  В списке **Выберите учетную запись для этой службы**выберите существующую управляемую учетную запись или создайте новую. Это должна быть учетная запись пользователя домена.  
  
4.  Выберите **Пул приложений службы — система веб-служб SharePoint** и измените удостоверение пула приложений для приложения службы PowerPivot по умолчанию. В зависимости от настройки установки, служба должна выполняться с использованием существующего пула приложений службы, созданного для служб SharePoint. По умолчанию средство настройки PowerPivot регистрирует службу как **Приложение службы PowerPivot по умолчанию (приложение службы PowerPivot)**.  
  
     Если служба настроена вручную администратором SharePoint, то, скорее всего, будет иметь собственный пул приложений службы.  
  
5.  В списке **Выберите учетную запись для этой службы**выберите существующую управляемую учетную запись или создайте новую. Это должна быть учетная запись пользователя домена.  
  
6.  Нажмите кнопку **ОК**.  
  
##  <a name="create-or-change-the-application-pool-for-a-powerpivot-service-application"></a><a name="bkmk_appPool"></a>Создание или изменение пула приложений для приложения службы PowerPivot  
  
1.  В разделе «Управление приложениями» центра администрирования выберите пункт **Управление приложениями служб**.  
  
2.  Выделите, но не щелкайте ссылку на приложение службы PowerPivot. Если щелкнуть имя приложения, то откроется панель управления PowerPivot, в которой не предусмотрена ссылка на страницу свойств, где указывается пул приложений.  Можно щелкнуть пустое место в строке или щелкнуть имя типа, чтобы выбрать приложение службы PowerPivot.  
  
3.  На ленте нажмите **Свойства** .  
  
4.  Выберите команду **Создать новый пул приложений**. Укажите имя пула приложений и управляемую учетную запись для этого удостоверения.  
  
##  <a name="account-requirements-and-permissions"></a><a name="requirements"></a> Требования к учетным записям и разрешения  
 В плане развертывания PowerPivot для SharePoint необходимо предусмотреть следующие учетные записи служб.  
  
-   Учетная запись службы Analysis Services. Службы Analysis Services обрабатывают запросы и задания обновления данных PowerPivot в ферме. Эта учетная запись всегда указывается при установке SQL Server, когда происходит установка PowerPivot для SharePoint.  
  
-   Пул приложений службы PowerPivot. Приложение службы PowerPivot связано с системной службой PowerPivot, которая обеспечивает интеграцию с SharePoint и инфраструктуру для обработки запросов PowerPivot в ферме. Пул приложений, указанный для приложения службы PowerPivot, является удостоверением системной службы PowerPivot. В ферме может применяться несколько приложений службы PowerPivot. Каждое из созданных приложений должно запускаться в собственном пуле приложений.  
  
#### <a name="analysis-services-service-account"></a>Учетная запись службы Analysis Services  
  
|Требование|Описание|  
|-----------------|-----------------|  
|Требования провизионирования|Эта учетная запись должна быть указана во время установки SQL Server на **странице настройки Analysis Services** мастера установки (или в `ASSVCACCOUNT` параметре установки в командной строке).<br /><br /> Имя пользователя или пароль могут быть изменены с помощью центра администрирования, PowerShell или средства настройки PowerPivot. Использование других средств для изменения учетных записей и паролей не поддерживается.|  
|Требования к учетной записи пользователя домена|Эта учетная запись должна быть учетной записью пользователя домена Windows. Использование встроенных учетных записей компьютера (таких как учетные записи локальной или сетевой службы) недопустимо. Программа установки SQL Server обеспечивает выполнение требования использовать учетную запись пользователя домена, блокируя установку при указании учетной записи компьютера.|  
|Требования к разрешениям|Эта учетная запись должна быть членом группы безопасности SQLServerMSASUser $ \<server> $PowerPivot и групп безопасности WSS_WPG на локальном компьютере. Эти разрешения должны предоставляться автоматически. Дополнительные сведения о том, как проверить или предоставить разрешения, см. в разделе [предоставление административных разрешений учетной записи службы PowerPivot вручную](#updatemanually) в этой статье и [начальной конфигурации &#40;PowerPivot для SharePoint&#41;](../../sql-server/install/initial-configuration-powerpivot-for-sharepoint.md).|  
|Требования к масштабированию|Если в ферме устанавливается несколько экземпляров PowerPivot для сервера SharePoint, то все экземпляры сервера служб Analysis Services должны запускаться от имени одной и той же учетной записи пользователя домена. Например, если первый экземпляр [!INCLUDE[ssGeminiSrv](../../includes/ssgeminisrv-md.md)] настроен для запуска от имени Contoso\ssas-srv01, то все остальные экземпляры [!INCLUDE[ssGeminiSrv](../../includes/ssgeminisrv-md.md)] , развернутые в той же ферме, также должны запускаться от имени Contoso\ssas-srv01 (имя учетной записи приведено для примера и может отличаться).<br /><br /> Настройка всех экземпляров службы для запуска под одной и той же учетной записью позволяет системной службе PowerPivot назначать задания по обработке запросов или обновлению данных любому экземпляру службы Analysis Services в ферме. Кроме того, это дает возможность администрировать экземпляры сервера служб Analysis Services с помощью функции управления учетными записями центра администрирования. Поскольку для всех экземпляров [!INCLUDE[ssGeminiSrv](../../includes/ssgeminisrv-md.md)] используется одна и та же учетная запись, появляется возможность изменить учетную запись или пароль только один раз, после чего все экземпляры службы, в которых используются эти учетные данные, будут обновлены автоматически.<br /><br /> Программа установки SQL Server обеспечивает соблюдение требования по использованию одной и той же учетной записи. В масштабном развертывании, когда в ферме SharePoint уже имеется экземпляр PowerPivot для установленного сервера SharePoint, программа установки блокирует новую установку, если указанная учетная запись [!INCLUDE[ssGeminiSrv](../../includes/ssgeminisrv-md.md)] отличается от уже используемой в ферме.|  
  
#### <a name="powerpivot-service-application-pool"></a>Пул приложений службы PowerPivot  
  
|Требование|Описание|  
|-----------------|-----------------|  
|Требования провизионирования|Служба PowerPivot System Service является общим ресурсом фермы, который становится доступным после создания приложения службы. Пул приложений службы должен быть указан при его создании. Его можно указать двумя способами: с помощью средства настройки PowerPivot или помощью команд PowerShell.<br /><br /> Удостоверение пула приложений можно настроить для запуска под уникальной учетной записью. Но если вы этого не сделали, попробуйте изменить его сейчас, чтобы он выполнялся под другой учетной записью.|  
|Требования к учетной записи пользователя домена|Это удостоверение пула приложений должно быть учетной записью пользователя домена Windows. Использование встроенных учетных записей компьютера (таких как учетные записи локальной или сетевой службы) недопустимо.|  
|Требования к разрешениям|Для этой учетной записи не требуется наличие разрешений администратора локальной системы на компьютере. Однако эта учетная запись должна иметь разрешения системного администратора службы Analysis Services на локальном экземпляре [!INCLUDE[ssGeminiSrv](../../includes/ssgeminisrv-md.md)] , установленном на том же компьютере. Эти разрешения предоставляются либо автоматически программой установки SQL Server, либо при задании или смене удостоверения пула приложений в центре администрирования.<br /><br /> Административные разрешения требуются для перенаправления запросов [!INCLUDE[ssGeminiSrv](../../includes/ssgeminisrv-md.md)]. Они также необходимы для наблюдения за исправностью, закрытия неактивных сеансов и прослушивания событий трассировки.<br /><br /> Учетная запись должна иметь разрешения на подключение, чтение и запись для базы данных приложения службы PowerPivot. Эти разрешения предоставляются автоматически при автоматическом создании и обновлении приложения в случае смены учетной записи или пароля в центре администрирования.<br /><br /> Перед получением файла приложение службы PowerPivot проверяет, что пользователь SharePoint имеет право просматривать данные, однако оно не олицетворяет пользователя. Требований в отношении разрешений для олицетворения нет.|  
|Требования к масштабированию|Нет.|  
  
##  <a name="troubleshooting-grant-administrative-permissions-manually"></a><a name="updatemanually"></a>Устранение неполадок: предоставление административных разрешений вручную  
 Обновление административных разрешений невозможно, если пользователь, обновляющий учетные данные, не является локальным администратором на компьютере. В таком случае можно предоставить административные разрешения вручную. Простейшим способом для этого является выполнение задания таймера конфигурации PowerPivot в центре администрирования. Такой подход позволяет сбрасывать разрешения для всех серверов PowerPivot в пределах фермы. Учтите, что данный метод работает только в случае, если задание таймера SharePoint выполняется одновременно с правами администратора фермы и локального администратора на компьютере.  
  
1.  В разделе «Наблюдение» щелкните ссылку **Пересмотр определений заданий**.  
  
2.  Выберите пункт **Задание таймера конфигурации PowerPivot**.  
  
3.  Нажмите кнопку **Запустить сейчас**.  
  
 В качестве последнего средства вы можете обеспечить правильные разрешения, предоставив Analysis Services разрешения системного администрирования приложению службы PowerPivot, а затем, в частности, добавьте удостоверение приложения службы в \<servername> группу безопасности Windows SQLServerMSASUser $ $PowerPivot. Эти действия необходимо повторить для каждого экземпляра служб Analysis Services, интегрированного с фермой SharePoint.  
  
 Группы безопасности Windows может обновить только локальный администратор.  
  
1.  В SQL Server Management Studio подключитесь к экземпляру Analysis Services как \<server name> \POWERPIVOT.  
  
2.  Щелкните имя сервера правой кнопкой мыши и выберите пункт **Свойства**.  
  
3.  Перейдите на вкладку **Безопасность**.  
  
4.  Нажмите кнопку **Добавить**.  
  
5.  Введите имя учетной записи, которая используется для пула приложений службы PowerPivot, и нажмите кнопку **ОК**.  
  
6.  В меню «Администрирование» выберите пункт **Управление компьютером**.  
  
7.  Откройте папку **Локальные пользователи и группы**.  
  
8.  Откройте **Группы**.  
  
9. Дважды щелкните SQLServerMSASUser $ \<servername> $PowerPivot.  
  
10. Нажмите кнопку **Добавить**.  
  
11. Введите имя учетной записи, которая используется для пула приложений службы PowerPivot, и нажмите кнопку **ОК**.  
  
##  <a name="troubleshooting-resolve-http-503-errors-due-to-expired-passwords-for-central-administration-or-the-sharepoint-foundation-web-application-service"></a><a name="expired"></a>Устранение неполадок: устранение ошибок HTTP 503 из-за просроченных паролей для центра администрирования или службы веб-приложения SharePoint Foundation  
 Если служба центра администрирования или служба веб-приложения SharePoint Foundation перестает работать из-за сброса учетной записи или истечения срока действия пароля, то при открытии центра администрирования SharePoint или сайта SharePoint будет выводиться сообщение об ошибке HTTP 503 «Служба недоступна». Чтобы восстановить работу сервера, выполните следующие действия. Когда центр администрирования станет доступен, можно продолжить обновление данных учетной записи с истекшим сроком действия.  
  
1.  В окне «Администрирование» выберите пункт **Диспетчер служб IIS**.  
  
2.  Для учетной записи пользователя домена, которая служит удостоверением для сайта или пула приложений центра администрирования и имеет пароль с истекшим сроком действия, выполните следующие действия.  
  
    1.  Щелкните имя пула приложений правой кнопкой мыши и выберите пункт **Дополнительные параметры**.  
  
    2.  Выберите **удостоверение** и нажмите кнопку... Нажмите кнопку, чтобы открыть диалоговое окно удостоверение пула приложений.  
  
    3.  Нажмите кнопку **Установить**.  
  
    4.  Введите имя пользователя и пароль.  
  
3.  Запустите IISRESET. Для этого откройте командную строку администратора и введите команду `iisreset`.  
  
4.  В центре администрирования SharePoint в разделе «Безопасность» щелкните ссылку **Настройка управляемых учетных записей**.  
  
5.  Нажмите кнопку **Изменить** , чтобы обновить данные для управляемой учетной записи с истекшим сроком действия пароля.  
  
6.  Установите флажок **Изменить пароль сейчас**.  
  
7.  Установите флажок **Использовать существующий пароль**.  
  
8.  Введите пароль и нажмите кнопку **ОК**.  
  
 Если установлены службы Reporting Services, используйте диспетчер конфигурации служб Reporting Services для обновления паролей сервера отчетов и соединения с базой данных сервера отчетов. Дополнительные сведения см. в разделе [Настройка и администрирование сервера отчетов (режим интеграции с SharePoint служб Reporting Services)](../../reporting-services/configure-administer-report-server-reporting-services-sharepoint-mode.md).  
  
## <a name="see-also"></a>См. также:  
 [Запуск или завершение работы сервера PowerPivot для SharePoint](start-or-stop-a-power-pivot-for-sharepoint-server.md)   
 [Настройте учетную запись автоматического обновления данных PowerPivot &#40;PowerPivot для SharePoint&#41;](../configure-unattended-data-refresh-account-powerpivot-sharepoint.md)  
  
  
