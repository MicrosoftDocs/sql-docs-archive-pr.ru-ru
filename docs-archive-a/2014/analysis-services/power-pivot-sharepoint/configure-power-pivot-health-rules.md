---
title: Правила определения исправности PowerPivot — Настройка | Документация Майкрософт
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: a01e63e6-97dc-43e5-ad12-ae6580afc606
author: minewiskan
ms.author: owend
ms.openlocfilehash: 2c16db9ca1ba0e66402f5c157b44a38c45eb0852
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87734482"
---
# <a name="powerpivot-health-rules---configure"></a>Правила определения исправности PowerPivot — настройка
  PowerPivot для SharePoint включает правила выявления неисправностей SharePoint, позволяющие отслеживать и устранять проблемы доступности и конфигурации сервера. Правила выявления неисправностей, применимые к PowerPivot для SharePoint, отображаются на странице «Просмотр определений правил».  
  
 Правила определения исправности позволяют заранее выявлять проблемы сервера, которые в итоге могут привести к нарушениям работы служб. PowerPivot для SharePoint предоставляет ряд правил, позволяющих выявлять и устранять проблемы, прежде чем они коснутся пользователей. Многие из этих правил можно настроить в соответствии с уникальными характеристиками конкретного развертывания. Например, если требуется больше времени на принятие мер в ответ на нехватку места на диске, можно увеличить пороговое значение доступного пространства с 5 до 10 %, чтобы предупреждение поступало раньше.  
  
 Существует возможность настройки правил, сигнализирующих о потреблении ресурсов или доступности сервера. Настройка полезна в этих областях, поскольку емкость базовой системы значительно различается в зависимости от используемых серверов и топологий развертывания. В то же время настройка недоступна для правил, которые следят за конфигурацией сервера или аспектами, связанными с безопасностью. Эти правила должны действовать одинаково на всех установленных экземплярах.  
  
||  
|-|  
|**[!INCLUDE[applies](../../includes/applies-md.md)]** SharePoint 2013 &#124; SharePoint 2010|  
  
 **Примечание.** Параметры правил определения исправности настраиваются независимо для экземпляра служб SQL Server Analysis Services и приложения службы PowerPivot. Инструкции данного раздела позволяют настроить правила определения исправности для каждой службы. В развертывании SharePoint 2013 [!INCLUDE[ssGeminiShort](../../includes/ssgeminishort-md.md)] использует только приложение службы. Поэтому [!INCLUDE[ssGeminiShort](../../includes/ssgeminishort-md.md)] устанавливает разные наборы правил определения исправности для разных версий SharePoint. Сведения о установленных правилах см. в столбце "версия" в разделе " [правила определения исправности" &#40;PowerPivot для SharePoint&#41;](health-rules-reference-power-pivot-for-sharepoint.md). также можно выполнить следующую команду Windows PowerShell, чтобы ознакомиться с установленными правилами.  
  
```powershell
Get-SPHealthAnalysisRule | Select name, enabled, summary | Where {$_.summary -like "*power*"}  | Format-Table -Property * -AutoSize | Out-Default  
```  
  
 **В этом разделе:**  
  
 [Просмотр правил определения исправности PowerPivot](#bkmk_view)  
  
 [Настройка правил определения исправности, используемых для оценки стабильности сервера (службы SQL Server Analysis Services)](#bkmk_HR_SSAS)  
  
 [Настройка правил определения исправности, используемых для оценки стабильности приложения (приложение службы PowerPivot)](#bkmk_evaluate_application_stability)  
  
## <a name="prerequisites"></a>Предварительные требования  
 Для изменения свойств конфигурации экземпляра служб Analysis Services и приложения службы PowerPivot необходимы права администратора приложений службы.  
  
##  <a name="view-powerpivot-health-rules"></a><a name="bkmk_view"></a>Просмотр правил определения исправности PowerPivot  
  
1.  В центре администрирования SharePoint выберите **Отслеживание**, а в разделе **Анализатор исправности** щелкните **Просмотр определений правил**.  
  
2.  Найдите в разделе «Настройка» правила с префиксом **PowerPivot:** . Все правила определения исправности, относящиеся к PowerPivot, имеют этот префикс, что позволяет отличить их от встроенных правил SharePoint.  
  
 Эти правила отображаются на странице **Обзор проблем и решений** при обнаружении проблем.  
  
 Если есть основания полагать, что возникла проблема, которую необходимо исследовать немедленно, проверку правила можно выполнить вручную, чтобы выяснить, имеется ли проблема.  
  
 Для этого щелкните правило, чтобы открыть его определение, а затем нажмите кнопку **Выполнить** на ленте. Щелкните **Закрыть** , чтобы вернуться на страницу **Обзор проблем и решений** для просмотра отчета. Если правилом обнаружена проблема, на странице появится предупреждение или сообщение об ошибке. В некоторых случаях сообщение об ошибке или предупреждение появляется только через несколько минут.  
  
##  <a name="configure-health-rules-used-to-evaluate-server-stability-sql-server-analysis-services"></a><a name="bkmk_HR_SSAS"></a>Настройка правил определения исправности, используемых для вычисления стабильности сервера (SQL Server Analysis Services)  
 Экземпляр служб Analysis Services содержит правила определения исправности, которые позволяют обнаружить проблемы на системном уровне (ЦП, память и место на диске, используемое в целях кэширования). Следуйте приведенным далее инструкциям для изменения пороговых значений, вызывающих срабатывание конкретных правил определения исправности.  
  
1.  В центре администрирования SharePoint в разделе **Системные параметры** щелкните **Управление службами на сервере**.  
  
2.  В верхней части страницы выберите сервер фермы SharePoint, на котором имеется экземпляр служб Analysis Services (на следующем рисунке имя сервера — AW-SRV033). В списке служб появятся службы**SQL Server Analysis Services** .  
  
     ![Снимок экрана: раздел «Управление службами» на странице «Сервер»](../media/ssas-centraladmin-servicesonserver.gif "Снимок экрана: раздел «Управление службами» на странице «Сервер»")  
  
3.  Нажмите **Службы SQL Server Analysis Services**.  
  
4.  На страницах свойств служб в разделе «Параметры правил определения исправности» измените следующие настройки.  
  
     Недостаточный объем выделенных ресурсов ЦП (по умолчанию 80 %)  
     Это правило определения исправности срабатывает, если загрузка ресурсов ЦП, используемых процессом сервера служб Analysis Services (msmdsrv.exe), остается на уровне 80% или выше в течение более чем 4 часов (как указано параметром «Интервал сбора данных»).  
  
     Этот параметр конфигурации соответствует следующему определению правила на странице **Обзор проблем и решений** : **PowerPivot: ресурсы ЦП недостаточны для выполнения запрошенных операций службами Analysis Services.**  
  
     Недостаточный объем ресурсов ЦП в системе (по умолчанию 90 %)  
     Это правило определения исправности срабатывает, если загрузка ресурсов ЦП, используемых сервером, остается на уровне 90% или выше в течение более чем 4 часов (как указано параметром «Интервал сбора данных»). Чрезмерная загрузка ЦП измеряется в рамках алгоритма распределения нагрузки с учетом исправности, который отслеживает загрузку ЦП в качестве показателя исправности сервера.  
  
     Этот параметр конфигурации соответствует следующему определению правила на странице **Обзор проблем и решений** : **PowerPivot: общая загрузка ЦП слишком велика.**  
  
     Пороговое значение недостаточного объема памяти (по умолчанию 5 %)  
     На сервере приложений SharePoint для экземпляра служб SQL Server Analysis Services должен быть всегда зарезервирован небольшой объем памяти, который никогда не используется. Так как большая часть операций на сервере связана с использованием памяти, сервер работает лучше, если загружен не полностью. Величина 5 % от неиспользуемой памяти вычисляется относительно объема, выделенного службам Analysis Services. Например, если общий объем памяти составляет 200 ГБ и службам Analysis Services выделено 80 % (или 160 ГБ), то 5 % неиспользуемой памяти — это 5 % от 160 ГБ (или 8 ГБ).  
  
     Этот параметр конфигурации соответствует следующему определению правила на странице **Обзор проблем и решений** : **PowerPivot: службы Analysis Services не имеют достаточно памяти для выполнения запрошенных операций.**  
  
     Максимальное количество соединений (по умолчанию 100).  
     Это правило определения исправности срабатывает, если количество подключений к экземпляру служб Analysis Services остается на уровне 100 или выше в течение более чем 4 часов (как указано параметром «Интервал сбора данных»). Это значение по умолчанию задается произвольно (не зависит от характеристик оборудования сервера и от активности пользователей), и его можно изменять в любую сторону в зависимости от объема ресурсов сервера и типичных показателей активности пользователей в среде.  
  
     Этот параметр конфигурации соответствует следующему определению правила на странице **Обзор проблем и решений** : **PowerPivot: большое число подключений свидетельствует о необходимости задействовать дополнительные серверы, чтобы справиться с нагрузкой.**  
  
     Недостаточный объем места на диске (по умолчанию 5 %)  
     Место на диске, используемое для кэширования данных PowerPivot при каждом запросе базы данных. Это правило позволяет узнать о нехватке места на диске. По умолчанию это правило определения исправности срабатывает, когда объем свободного места на диске становится меньше 5 % объема диска, на котором расположена папка резервного копирования. Дополнительные сведения об использовании дискового пространства см. в разделе [Настройка использования места на диске &#40;PowerPivot для SharePoint&#41;](configure-disk-space-usage-power-pivot-for-sharepoint.md).  
  
     Этот параметр конфигурации соответствует следующему определению правила на странице **Обзор проблем и решений** : **PowerPivot: недостаток места на диске, на который кэшируются данные PowerPivot.**  
  
     Интервал сбора данных (в часах)  
     Можно указать период сбора данных, используемый для вычисления числовых значений, вызывающих срабатывание правил определения исправности. Хотя система постоянно отслеживается, пороговые значения, вызывающие срабатывание предупреждений правил определения исправности, вычисляются с использованием данных, созданных в течение стандартного интервала. Интервал по умолчанию равен 4 часам. Сервер извлекает данные о системе и загрузке, собранные в течение предыдущих 4 часов, для вычисления количества соединений пользователей, использования места на диске и коэффициентов загрузки ЦП и памяти.  
  
##  <a name="configure-health-rules-used-to-evaluate-application-stability-powerpivot-service-application"></a><a name="bkmk_evaluate_application_stability"></a>Настройка правил определения исправности, используемых для вычисления стабильности приложения (приложение службы PowerPivot)  
  
1.  В разделе «Управление приложениями» центра администрирования выберите пункт **Управление приложениями служб**.  
  
2.  На странице «Приложения службы» нажмите кнопку **Приложение службы PowerPivot по умолчанию**.  
  
     ![Снимок экрана: страница приложения ManageService](../media/ssas-centraladmin-app.gif "Снимок экрана: страница приложения ManageService")  
  
3.  Откроется панель мониторинга PowerPivot. В списке **Действия** выберите **Настройка параметров приложения службы** , чтобы открыть страницу параметров приложений службы.  
  
     ![Снимок экрана: панель мониторинга, фокус на списке «Действия»](../media/ssas-centraladmin-actionslist.gif "Снимок экрана: панель мониторинга, фокус на списке «Действия»")  
  
4.  В разделе «Параметры правил определения исправности» измените следующие параметры.  
  
     Отношение числа загрузок к числу соединений (по умолчанию 20 %)  
     Это правило определения исправности срабатывает, если число событий загрузки относительно велико по сравнению с числом событий соединения. Это означает, что сервер слишком быстро выгружает базы данных или что параметры сокращения объема кэша слишком ограничительны.  
  
     Этот параметр конфигурации соответствует следующему определению правила на странице **Обзор проблем и решений** : **PowerPivot: слушком высокое отношение события загрузки к числу соединений.**  
  
     Интервал сбора данных (по умолчанию 4 часа)  
     Можно указать период сбора данных, используемый для вычисления числовых значений, вызывающих срабатывание правил определения исправности. Хотя система постоянно отслеживается, пороговые значения, вызывающие срабатывание предупреждений правил определения исправности, вычисляются с использованием данных, созданных в течение стандартного интервала. Интервал по умолчанию равен 4 часам. Сервер извлекает данные о системе и загрузке, собранные в течение предыдущих 4 часов, для вычисления соотношения загрузки к сбору.  
  
     Проверка обновлений файла PowerPivot Management Dashboard.xlsx (по умолчанию 5 дней)  
     Файл PowerPivot Management Dashboard.xlsx является источником данных, используемым в отчетах панели управления PowerPivot. В конфигурации сервера по умолчанию XLSX-файл обновляется каждый день данными об использовании, собранными SharePoint и системной службой PowerPivot. В случае необновления файла правило определения исправности сообщает об этом как о проблеме. По умолчанию правило срабатывает, если метка времени файла не изменялась в течение 5 дней.  
  
     Дополнительные сведения о сборе данных об использовании см. в разделе [Настройка сбора данных об использовании для &#40;PowerPivot для SharePoint](configure-usage-data-collection-for-power-pivot-for-sharepoint.md).  
  
     Этот параметр конфигурации соответствует следующему определению правила на странице **Обзор проблем и решений** : **PowerPivot: данные об использовании обновляются с ожидаемой частотой.**  
  
## <a name="see-also"></a>См. также:  
 [Настройка &#40;использования места на диске PowerPivot для SharePoint&#41;](configure-disk-space-usage-power-pivot-for-sharepoint.md)   
 [Панель мониторинга управления PowerPivot и данные об использовании](power-pivot-management-dashboard-and-usage-data.md)  
