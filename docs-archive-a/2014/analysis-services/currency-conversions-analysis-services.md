---
title: Конвертации валют (Analysis Services) | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
helpviewer_keywords:
- multiple currency conversions
- monetary data [SQL Server]
- currency [Analysis Services]
- converting currency
- one-to-many currency conversions
- many-to-many currency conversions [Analysis Services]
- many-to-one currency conversions [Analysis Services]
ms.assetid: e03f491c-7df8-46a0-ade9-f2e55b68db85
author: minewiskan
ms.author: owend
ms.openlocfilehash: b4fee100dea2b3aff99516175bf688337a33592e
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87667503"
---
# <a name="currency-conversions-analysis-services"></a><span data-ttu-id="1d066-102">Преобразования валюты (службы Analysis Services)</span><span class="sxs-lookup"><span data-stu-id="1d066-102">Currency Conversions (Analysis Services)</span></span>
  <span data-ttu-id="1d066-103">**[!INCLUDE[applies](../includes/applies-md.md)]** Только многомерные</span><span class="sxs-lookup"><span data-stu-id="1d066-103">**[!INCLUDE[applies](../includes/applies-md.md)]**  Multidimensional only</span></span>  
  
 [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] <span data-ttu-id="1d066-104">используют сочетания функций под управлением сценариев многомерных выражений для обеспечения поддержки преобразований валюты в кубах, поддерживающих несколько валют.</span><span class="sxs-lookup"><span data-stu-id="1d066-104">uses a combination of features, guided by Multidimensional Expressions (MDX) scripts, to provide currency conversion support in cubes supporting multiple currencies.</span></span>  
  
## <a name="currency-conversion-terminology"></a><span data-ttu-id="1d066-105">Терминология конвертации валют</span><span class="sxs-lookup"><span data-stu-id="1d066-105">Currency Conversion Terminology</span></span>  
 <span data-ttu-id="1d066-106">В службах [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] используется следующая терминология для описания функционала конвертации валют.</span><span class="sxs-lookup"><span data-stu-id="1d066-106">The following terminology is used in [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] to describe currency conversion functionality:</span></span>  
  
 <span data-ttu-id="1d066-107">Основная валюта</span><span class="sxs-lookup"><span data-stu-id="1d066-107">Pivot currency</span></span>  
 <span data-ttu-id="1d066-108">Валюта, по отношению к которой обменные курсы вводятся в группу меры курсов.</span><span class="sxs-lookup"><span data-stu-id="1d066-108">The currency against which exchange rates are entered in the rate measure group.</span></span>  
  
 <span data-ttu-id="1d066-109">Местная валюта</span><span class="sxs-lookup"><span data-stu-id="1d066-109">Local currency</span></span>  
 <span data-ttu-id="1d066-110">Валюта, используемая для хранения транзакций, на которых основаны меры, подлежащие конвертации.</span><span class="sxs-lookup"><span data-stu-id="1d066-110">The currency used to store transactions on which measures to be converted are based.</span></span>  
  
 <span data-ttu-id="1d066-111">Местная валюта может быть идентифицирована следующим способом.</span><span class="sxs-lookup"><span data-stu-id="1d066-111">The local currency can be identified by either:</span></span>  
  
-   <span data-ttu-id="1d066-112">Идентификатором валюты в таблице фактов, хранимым вместе с транзакцией, как это обычно бывает в банковских приложениях, в которых сама транзакция идентифицирует используемую для нее валюту.</span><span class="sxs-lookup"><span data-stu-id="1d066-112">A currency identifier in the fact table stored with the transaction, as is commonly the case with banking applications where the transaction itself identifies the currency used for that transaction.</span></span>  
  
-   <span data-ttu-id="1d066-113">Идентификатором валюты, связанным с атрибутом в таблице измерения, который затем связывается с транзакцией в таблице фактов, как это обычно бывает в финансовых приложениях, где местоположение или другой идентификатор, например дочерняя компания, идентифицирует валюту, используемую для соответствующей транзакции.</span><span class="sxs-lookup"><span data-stu-id="1d066-113">A currency identifier associated with an attribute in a dimension table that is then associated with a transaction in the fact table, as is commonly the case in financial applications where a location or other identifier, such as a subsidiary, identifies the currency used for an associated transaction.</span></span>  
  
 <span data-ttu-id="1d066-114">Валюта отчета</span><span class="sxs-lookup"><span data-stu-id="1d066-114">Reporting currency</span></span>  
 <span data-ttu-id="1d066-115">Валюта, в которую транзакции конвертируются из основной валюты.</span><span class="sxs-lookup"><span data-stu-id="1d066-115">The currency to which transactions are converted from the pivot currency.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="1d066-116">Для конвертаций валют «многие к одному» основная валюта и валюта отчета одинаковы.</span><span class="sxs-lookup"><span data-stu-id="1d066-116">For many-to-one currency conversions, the pivot currency and reporting currency are the same.</span></span>  
  
 <span data-ttu-id="1d066-117">Измерение валюты</span><span class="sxs-lookup"><span data-stu-id="1d066-117">Currency dimension</span></span>  
 <span data-ttu-id="1d066-118">Измерение базы данных, определенное следующими настройками.</span><span class="sxs-lookup"><span data-stu-id="1d066-118">A database dimension defined with the following settings:</span></span>  
  
-   <span data-ttu-id="1d066-119">Свойству `Type` измерения присвоено значение Currency.</span><span class="sxs-lookup"><span data-stu-id="1d066-119">The `Type` property of the dimension is set to Currency.</span></span>  
  
-   <span data-ttu-id="1d066-120">Свойству `Type` одного из атрибутов измерения присвоено значение CurrencyName.</span><span class="sxs-lookup"><span data-stu-id="1d066-120">The `Type` property of one attribute for the dimension is set to CurrencyName.</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="1d066-121">Значения этого атрибута должны использоваться во всех столбцах, которые должны содержать идентификатор валюты.</span><span class="sxs-lookup"><span data-stu-id="1d066-121">The values of this attribute must be used in all columns that should contain a currency identifier.</span></span>  
  
 <span data-ttu-id="1d066-122">Группа мер курсов</span><span class="sxs-lookup"><span data-stu-id="1d066-122">Rate measure group</span></span>  
 <span data-ttu-id="1d066-123">Группа мер в кубе, определенная следующими настройками.</span><span class="sxs-lookup"><span data-stu-id="1d066-123">A measure group in a cube, defined with the following settings:</span></span>  
  
-   <span data-ttu-id="1d066-124">Существует связь обычного измерения между измерением валют и группой мер курсов.</span><span class="sxs-lookup"><span data-stu-id="1d066-124">A regular dimension relationship exists between a currency dimension and the rate measure group.</span></span>  
  
-   <span data-ttu-id="1d066-125">Существует связь обычного измерения между измерением времени и группой мер курсов.</span><span class="sxs-lookup"><span data-stu-id="1d066-125">A regular dimension relationship exists between a time dimension and the rate measure group.</span></span>  
  
-   <span data-ttu-id="1d066-126">Дополнительно свойство `Type` установлено равным ExchangeRate.</span><span class="sxs-lookup"><span data-stu-id="1d066-126">Optionally, the `Type` property is set to ExchangeRate.</span></span> <span data-ttu-id="1d066-127">В то время как мастер бизнес-аналитики использует связи с измерениями валют и времени для идентификации вероятных групп мер курсов, установка свойства `Type` равным ExchangeRate позволяет клиентским приложениям легче идентифицировать группы мер курсов.</span><span class="sxs-lookup"><span data-stu-id="1d066-127">While the Business Intelligence Wizard uses the relationships with the currency and time dimensions to identify likely rate measure groups, setting the `Type` property to ExchangeRate allows client applications to more easily identify rate measure groups.</span></span>  
  
-   <span data-ttu-id="1d066-128">Одна или несколько мер, представляющих обменные курсы, содержащиеся в группе мер курсов.</span><span class="sxs-lookup"><span data-stu-id="1d066-128">One or more measures, representing the exchange rates contained by the rate measure group.</span></span>  
  
 <span data-ttu-id="1d066-129">Измерение валют отчета</span><span class="sxs-lookup"><span data-stu-id="1d066-129">Reporting currency dimension</span></span>  
 <span data-ttu-id="1d066-130">Измерение, определенное мастером бизнес-аналитики после определения конвертации валюты, содержащее валюты отчета для этой конвертации валюты.</span><span class="sxs-lookup"><span data-stu-id="1d066-130">The dimension, defined by the Business Intelligence Wizard after a currency conversion is defined, that contains the reporting currencies for that currency conversion.</span></span> <span data-ttu-id="1d066-131">Измерение валют отчета основано на именованном запросе, определенном в представлении источника данных, на котором основано измерение валют, связанное с группой мер курсов, из главной таблицы измерения валют.</span><span class="sxs-lookup"><span data-stu-id="1d066-131">The reporting currency dimension is based on a named query, defined in the data source view on which the currency dimension associated with the rate measure group is based, from the dimension main table of the currency dimension.</span></span> <span data-ttu-id="1d066-132">Это измерение определено со следующими настройками.</span><span class="sxs-lookup"><span data-stu-id="1d066-132">The dimension is defined with the following settings:</span></span>  
  
-   <span data-ttu-id="1d066-133">Свойству `Type` измерения присвоено значение Currency.</span><span class="sxs-lookup"><span data-stu-id="1d066-133">The `Type` property of the dimension is set to Currency.</span></span>  
  
-   <span data-ttu-id="1d066-134">Свойству `Type` ключевого атрибута измерения присвоено значение CurrencyName.</span><span class="sxs-lookup"><span data-stu-id="1d066-134">The `Type` property of the key attribute for the dimension is set to CurrencyName.</span></span>  
  
-   <span data-ttu-id="1d066-135">Свойству `Type` одного из атрибутов измерения присвоено значение CurrencyDestination, и столбец, связанный с атрибутом, содержит идентификаторы валют, представляющие валюты отчета для этой конвертации валюты.</span><span class="sxs-lookup"><span data-stu-id="1d066-135">The `Type` property of one attribute within the dimension is set to CurrencyDestination, and the column bound to the attribute contains the currency identifiers that represent the reporting currencies for the currency conversion.</span></span>  
  
## <a name="defining-currency-conversions"></a><span data-ttu-id="1d066-136">Определение конвертаций валют</span><span class="sxs-lookup"><span data-stu-id="1d066-136">Defining Currency Conversions</span></span>  
 <span data-ttu-id="1d066-137">Можно использовать мастер бизнес-аналитики, чтобы определить функционал конвертации валют для куба, также можно вручную определить конвертации валют, используя скрипты многомерных выражений.</span><span class="sxs-lookup"><span data-stu-id="1d066-137">You can use the Business Intelligence Wizard to define currency conversion functionality for a cube, or you can manually define currency conversions using MDX scripts.</span></span>  
  
### <a name="prerequisites"></a><span data-ttu-id="1d066-138">Предварительные требования</span><span class="sxs-lookup"><span data-stu-id="1d066-138">Prerequisites</span></span>  
 <span data-ttu-id="1d066-139">Перед тем как определять конвертацию валюты в кубе, используя мастер бизнес-аналитики, вначале необходимо определить хотя бы одно измерение валют, одно измерение времени и одну группу мер курсов.</span><span class="sxs-lookup"><span data-stu-id="1d066-139">Before you can define a currency conversion in a cube using the Business Intelligence Wizard, you must first define at least one currency dimension, at least one time dimension, and at least one rate measure group.</span></span> <span data-ttu-id="1d066-140">Из этих объектов мастер бизнес-аналитики может получать данные и метаданные, используемые для построения измерения валют отчета и скрипта многомерных выражений, необходимых для обеспечения функционала конвертации валют.</span><span class="sxs-lookup"><span data-stu-id="1d066-140">From these objects, the Business Intelligence Wizard can retrieve the data and metadata used to construct the reporting currency dimension and MDX script needed to provide currency conversion functionality.</span></span>  
  
### <a name="decisions"></a><span data-ttu-id="1d066-141">Решения</span><span class="sxs-lookup"><span data-stu-id="1d066-141">Decisions</span></span>  
 <span data-ttu-id="1d066-142">Необходимо принять следующие решения перед тем, как мастер бизнес-аналитики сможет построить измерение валют отчета и скрипт многомерных выражений, необходимые для обеспечения функционала конвертации валют.</span><span class="sxs-lookup"><span data-stu-id="1d066-142">You need to make the following decisions before the Business Intelligence Wizard can construct the reporting currency dimension and MDX script needed to provide currency conversion functionality:</span></span>  
  
-   <span data-ttu-id="1d066-143">Направление обменного курса</span><span class="sxs-lookup"><span data-stu-id="1d066-143">Exchange rate direction</span></span>  
  
-   <span data-ttu-id="1d066-144">Конвертируемые элементы</span><span class="sxs-lookup"><span data-stu-id="1d066-144">Converted members</span></span>  
  
-   <span data-ttu-id="1d066-145">Тип конвертации</span><span class="sxs-lookup"><span data-stu-id="1d066-145">Conversion type</span></span>  
  
-   <span data-ttu-id="1d066-146">Местные валюты</span><span class="sxs-lookup"><span data-stu-id="1d066-146">Local currencies</span></span>  
  
-   <span data-ttu-id="1d066-147">Валюты отчета.</span><span class="sxs-lookup"><span data-stu-id="1d066-147">Reporting currencies</span></span>  
  
### <a name="exchange-rate-directions"></a><span data-ttu-id="1d066-148">Направления обменных курсов</span><span class="sxs-lookup"><span data-stu-id="1d066-148">Exchange Rate Directions</span></span>  
 <span data-ttu-id="1d066-149">Группа мер курсов содержит меры, представляющие обменные курсы между местными валютами и основной валютой (обычно называемой корпоративной валютой).</span><span class="sxs-lookup"><span data-stu-id="1d066-149">The rate measure group contains measures representing exchange rates between local currencies and the pivot currency (commonly referred to as the corporate currency).</span></span> <span data-ttu-id="1d066-150">Сочетание направления обменного курса и типа конвертации определяет операцию, выполняемую по отношению к мерам, подлежащим конвертации скриптом многомерных выражений, сформированным с использованием мастера бизнес-аналитики.</span><span class="sxs-lookup"><span data-stu-id="1d066-150">The combination of exchange rate direction and conversion type determines the operation performed on measures to be converted by the MDX script generated using the Business Intelligence Wizard.</span></span> <span data-ttu-id="1d066-151">В следующей таблице содержатся описания операций, выполняемых в зависимости от направления обменного курса и типа конвертации, на основе параметров направления обменного курса и направлений конвертации, доступных в мастере бизнес-аналитики.</span><span class="sxs-lookup"><span data-stu-id="1d066-151">The following table describes the operations performed depending on the exchange rate direction and conversion type, based on the exchange rate direction options and conversion directions available in the Business Intelligence Wizard.</span></span>  
  
|||||  
|-|-|-|-|  
|<span data-ttu-id="1d066-152">Направление обменного курса</span><span class="sxs-lookup"><span data-stu-id="1d066-152">Exchange rate direction</span></span>|<span data-ttu-id="1d066-153">**«многие к одному»**</span><span class="sxs-lookup"><span data-stu-id="1d066-153">**Many-to-one**</span></span>|<span data-ttu-id="1d066-154">**«Один ко многим»**</span><span class="sxs-lookup"><span data-stu-id="1d066-154">**One-to-many**</span></span>|<span data-ttu-id="1d066-155">**«Многие ко многим»**</span><span class="sxs-lookup"><span data-stu-id="1d066-155">**Many-to-many**</span></span>|  
|<span data-ttu-id="1d066-156">**n в основной валюте к 1 в валюте образца**</span><span class="sxs-lookup"><span data-stu-id="1d066-156">**n pivot currency to 1 sample currency**</span></span>|<span data-ttu-id="1d066-157">Умножьте показатель, подлежащий конвертации, на показатель обменного курса для местной валюты, чтобы сконвертировать эту меру в основную валюту.</span><span class="sxs-lookup"><span data-stu-id="1d066-157">Multiply the measure to be converted by the exchange rate measure for the local currency in order to convert the measure into the pivot currency.</span></span>|<span data-ttu-id="1d066-158">Разделите меру, подлежащую конвертации, на меру обменного курса для валюты отчета, чтобы сконвертировать эту меру в основную валюту.</span><span class="sxs-lookup"><span data-stu-id="1d066-158">Divide the measure to be converted by the exchange rate measure for the reporting currency in order to convert the measure into the reporting currency.</span></span>|<span data-ttu-id="1d066-159">Умножьте меру, подлежащую конвертации, на меру обменного курса для местной валюты, чтобы сконвертировать эту меру в основную валюту, затем разделите сконвертированную меру на меру обменного курса для валюты отчета, чтобы сконвертировать эту меру в валюту отчета.</span><span class="sxs-lookup"><span data-stu-id="1d066-159">Multiply the measure to be converted by the exchange rate measure for the local currency in order to convert the measure into the pivot currency, then divide the converted measure by the exchange rate measure for the reporting currency in order to convert the measure into the reporting currency.</span></span>|  
|<span data-ttu-id="1d066-160">**n в валюте образца к 1 в основной валюте**</span><span class="sxs-lookup"><span data-stu-id="1d066-160">**n sample currency to 1 pivot currency**</span></span>|<span data-ttu-id="1d066-161">Разделите меру, подлежащую конвертации, на меру обменного курса для местной валюты, чтобы сконвертировать эту меру в основную валюту.</span><span class="sxs-lookup"><span data-stu-id="1d066-161">Divide the measure to be converted by the exchange rate measure for the local currency in order to convert the measure into the pivot currency.</span></span>|<span data-ttu-id="1d066-162">Умножьте меру, подлежащую конвертации, на меру обменного курса для валюты отчета, чтобы сконвертировать эту меру в основную валюту.</span><span class="sxs-lookup"><span data-stu-id="1d066-162">Multiply the measure to be converted by the exchange rate measure for the reporting currency in order to convert the measure into the reporting currency.</span></span>|<span data-ttu-id="1d066-163">Разделите меру, подлежащую конвертации, на меру обменного курса для местной валюты, чтобы сконвертировать эту меру в основную валюту, затем умножьте сконвертированную меру на меру обменного курса для валюты отчета, чтобы сконвертировать эту меру в валюту отчета.</span><span class="sxs-lookup"><span data-stu-id="1d066-163">Divide the measure to be converted by the exchange rate measure for the local currency in order to convert the measure into the pivot currency, then multiply the converted measure by the exchange rate measure for the reporting currency in order to convert the measure into the reporting currency.</span></span>|  
  
 <span data-ttu-id="1d066-164">Направление обменного курса выбирается на странице **Установка параметров конвертации валют** мастера бизнес-аналитики.</span><span class="sxs-lookup"><span data-stu-id="1d066-164">You choose the exchange rate direction on the **Set currency conversion options** page of the Business Intelligence Wizard.</span></span> <span data-ttu-id="1d066-165">Дополнительные сведения о настройке направлений конвертации валют см. в разделе [Установка параметров конвертации валюты (мастер бизнес-аналитики)](set-currency-conversion-options-business-intelligence-wizard.md).</span><span class="sxs-lookup"><span data-stu-id="1d066-165">For more information about setting conversion direction, see [Set Currency Conversion Options &#40;Business Intelligence Wizard&#41;](set-currency-conversion-options-business-intelligence-wizard.md).</span></span>  
  
### <a name="converted-members"></a><span data-ttu-id="1d066-166">Конвертируемые элементы</span><span class="sxs-lookup"><span data-stu-id="1d066-166">Converted Members</span></span>  
 <span data-ttu-id="1d066-167">Можно использовать мастер бизнес-аналитики, чтобы указать, какие меры из группы мер курсов используются для конвертации значений для:</span><span class="sxs-lookup"><span data-stu-id="1d066-167">You can use the Business Intelligence Wizard to specify which measures from the rate measure group are used to convert values for:</span></span>  
  
-   <span data-ttu-id="1d066-168">Меры в других группах мер;</span><span class="sxs-lookup"><span data-stu-id="1d066-168">Measures in other measure groups.</span></span>  
  
-   <span data-ttu-id="1d066-169">элементов в иерархии атрибутов для атрибута счета в измерении базы данных;</span><span class="sxs-lookup"><span data-stu-id="1d066-169">Members of an attribute hierarchy for an account attribute in a database dimension.</span></span>  
  
-   <span data-ttu-id="1d066-170">типов счетов, используемых элементами иерархии атрибутов для атрибута счета в измерении базы данных.</span><span class="sxs-lookup"><span data-stu-id="1d066-170">Account types, used by members of an attribute hierarchy for an account attribute in a database dimension.</span></span>  
  
 <span data-ttu-id="1d066-171">Мастер бизнес-аналитики использует эти данные в скрипте многомерных выражений, сформированном мастером, чтобы определить область вычислений конвертации валют.</span><span class="sxs-lookup"><span data-stu-id="1d066-171">The Business Intelligence Wizard uses this information within the MDX script generated by the wizard to determine the scope of the currency conversion calculation.</span></span> <span data-ttu-id="1d066-172">Дополнительные сведения об указании элементов для конвертации валют см. в разделе [Выбор элементов (мастер бизнес-аналитики)](select-members-business-intelligence-wizard.md).</span><span class="sxs-lookup"><span data-stu-id="1d066-172">For more information about specifying members for currency conversion, see [Select Members &#40;Business Intelligence Wizard&#41;](select-members-business-intelligence-wizard.md).</span></span>  
  
### <a name="conversion-types"></a><span data-ttu-id="1d066-173">Типы конвертации</span><span class="sxs-lookup"><span data-stu-id="1d066-173">Conversion Types</span></span>  
 <span data-ttu-id="1d066-174">Мастер бизнес-аналитики поддерживает три различных типа конвертации валют.</span><span class="sxs-lookup"><span data-stu-id="1d066-174">The Business Intelligence Wizard supports three different types of currency conversion:</span></span>  
  
-   <span data-ttu-id="1d066-175">**«Один ко многим»**</span><span class="sxs-lookup"><span data-stu-id="1d066-175">**One-to-many**</span></span>  
  
     <span data-ttu-id="1d066-176">Транзакции хранятся в таблице фактов в основной валюте, а затем конвертируются в одну или несколько валют отчета.</span><span class="sxs-lookup"><span data-stu-id="1d066-176">Transactions are stored in the fact table in the pivot currency, and then converted to one or more other reporting currencies.</span></span>  
  
     <span data-ttu-id="1d066-177">Например, в качестве основной валюты может быть установлен доллар США (USD), и в таблице фактов хранятся транзакции в долларах США.</span><span class="sxs-lookup"><span data-stu-id="1d066-177">For example, the pivot currency can be set to United States dollars (USD), and the fact table stores transactions in USD.</span></span> <span data-ttu-id="1d066-178">Этот тип конвертации конвертирует эти транзакции из основной валюты в указанные валюты отчета.</span><span class="sxs-lookup"><span data-stu-id="1d066-178">This conversion type converts these transactions from the pivot currency to the specified reporting currencies.</span></span> <span data-ttu-id="1d066-179">В результате эти транзакции можно хранить в указанной основной валюте и просматривать либо в указанной основной валюте, либо в одной из валют отчета, указанных в измерении валют отчета, определенном для конвертации валют.</span><span class="sxs-lookup"><span data-stu-id="1d066-179">The result is that transactions can be stored in the specified pivot currency and viewed either in the specified pivot currency or in any of the reporting currencies specified in the reporting currency dimension defined for the currency conversion.</span></span>  
  
-   <span data-ttu-id="1d066-180">**«многие к одному»**</span><span class="sxs-lookup"><span data-stu-id="1d066-180">**Many-to-one**</span></span>  
  
     <span data-ttu-id="1d066-181">Транзакции хранятся в таблице фактов в местных валютах, а затем конвертируются в основную валюту.</span><span class="sxs-lookup"><span data-stu-id="1d066-181">Transactions are stored in the fact table in local currencies, and then converted into the pivot currency.</span></span> <span data-ttu-id="1d066-182">Основная валюта служит в качестве единственной указанной валюты отчета в измерении валют отчета.</span><span class="sxs-lookup"><span data-stu-id="1d066-182">The pivot currency serves as the only specified reporting currency in the reporting currency dimension.</span></span>  
  
     <span data-ttu-id="1d066-183">Например, в качестве основной валюты может быть установлен доллар США (USD), а в таблице фактов хранятся транзакции в евро (EUR), австралийских долларах (AUD) и мексиканских песо (MXN).</span><span class="sxs-lookup"><span data-stu-id="1d066-183">For example, the pivot currency can be set to United States dollars (USD), and the fact table stores transactions in euros (EUR), Australian dollars (AUD), and Mexican pesos (MXN).</span></span> <span data-ttu-id="1d066-184">Этот тип конвертации конвертирует эти транзакции из их указанных местных валют в основную валюту.</span><span class="sxs-lookup"><span data-stu-id="1d066-184">This conversion type converts these transactions from their specified local currencies to the pivot currency.</span></span> <span data-ttu-id="1d066-185">В результате эти транзакции можно хранить в указанных местных валютах и просматривать в основной валюте, которая указана в измерении валют отчета, определенном для конвертации валют.</span><span class="sxs-lookup"><span data-stu-id="1d066-185">The result is that transactions can be stored in the specified local currencies and viewed in the pivot currency, which is specified in the reporting currency dimension defined for the currency conversion.</span></span>  
  
-   <span data-ttu-id="1d066-186">**«Многие ко многим»**</span><span class="sxs-lookup"><span data-stu-id="1d066-186">**Many-to-many**</span></span>  
  
     <span data-ttu-id="1d066-187">Транзакции хранятся в таблице фактов в местных валютах.</span><span class="sxs-lookup"><span data-stu-id="1d066-187">Transactions are stored in the fact table in local currencies.</span></span> <span data-ttu-id="1d066-188">Функционал конвертации валют конвертирует подобные транзакции в основную валюту, а затем в одну или несколько валют отчета.</span><span class="sxs-lookup"><span data-stu-id="1d066-188">The currency conversion functionality converts such transactions into the pivot currency, and then to one or more other reporting currencies.</span></span>  
  
     <span data-ttu-id="1d066-189">Например, в качестве основной валюты может быть установлен доллар США (USD), а в таблице фактов хранятся транзакции в евро (EUR), австралийских долларах (AUD) и мексиканских песо (MXN).</span><span class="sxs-lookup"><span data-stu-id="1d066-189">For example, the pivot currency can be set to United States dollars (USD), and the fact table stores transactions in euros (EUR), Australian dollars (AUD), and Mexican pesos (MXN).</span></span> <span data-ttu-id="1d066-190">Этот тип конвертации конвертирует эти транзакции из их указанных местных валют в основную валюту, а затем сконвертированные транзакции конвертируются вновь из основной валюты в указанные валюты отчета.</span><span class="sxs-lookup"><span data-stu-id="1d066-190">This conversion type converts these transactions from their specified local currencies to the pivot currency, and then the converted transactions are converted again from the pivot currency to the specified reporting currencies.</span></span> <span data-ttu-id="1d066-191">В результате эти транзакции можно хранить в указанных местных валютах и просматривать либо в указанной основной валюте, либо в любой из валют отчета, указанных в измерении валют отчета, определенном для конвертации валют.</span><span class="sxs-lookup"><span data-stu-id="1d066-191">The result is that transactions can be stored in the specified local currencies and viewed either in the specified pivot currency or in any of the reporting currencies that are specified in the reporting currency dimension defined for the currency conversion.</span></span>  
  
 <span data-ttu-id="1d066-192">Указание типа конвертации позволяет мастеру бизнес-аналитики определить именованный запрос и структуру измерения валют отчета, а также структуру скрипта многомерных выражений, определенного для конвертации валют.</span><span class="sxs-lookup"><span data-stu-id="1d066-192">Specifying the conversion type allows the Business Intelligence Wizard to define the named query and dimension structure of the reporting currency dimension, as well as the structure of the MDX script defined for the currency conversion.</span></span>  
  
### <a name="local-currencies"></a><span data-ttu-id="1d066-193">Местные валюты</span><span class="sxs-lookup"><span data-stu-id="1d066-193">Local Currencies</span></span>  
 <span data-ttu-id="1d066-194">При выборе типа конвертации «многие ко многим» или «многие к одному» для конвертации валют необходимо указать способ идентификации местных валют, на основе которых скрипт многомерных выражений, сформированный мастером бизнес-аналитики, выполняет вычисления конвертации валют.</span><span class="sxs-lookup"><span data-stu-id="1d066-194">If you choose a many-to-many or many-to-one conversion type for your currency conversion, you need to specify how to identify the local currencies from which the MDX script generated by the Business Intelligence Wizard performs the currency conversion calculations.</span></span> <span data-ttu-id="1d066-195">Местная валюта для транзакции в таблице фактов может быть идентифицирована одним из двух способов.</span><span class="sxs-lookup"><span data-stu-id="1d066-195">The local currency for a transaction in a fact table can be identified in one of two ways:</span></span>  
  
-   <span data-ttu-id="1d066-196">Группа мер содержит связь обычного измерения с измерением валют.</span><span class="sxs-lookup"><span data-stu-id="1d066-196">The measure group contains a regular dimension relationship to the currency dimension.</span></span> <span data-ttu-id="1d066-197">Например, в образце [!INCLUDE[ssAWDWsp](../includes/ssawdwsp-md.md)] базы данных служб [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] группа мер «Интернет-продажи» имеет связь обычного измерения с измерением «Валюта».</span><span class="sxs-lookup"><span data-stu-id="1d066-197">For example, in the [!INCLUDE[ssAWDWsp](../includes/ssawdwsp-md.md)] sample [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] database, the Internet Sales measure group has a regular dimension relationship to the Currency dimension.</span></span> <span data-ttu-id="1d066-198">Таблица фактов для группы мер содержит внешний ключевой столбец, который связывает идентификаторы валют в таблице измерений и это измерение.</span><span class="sxs-lookup"><span data-stu-id="1d066-198">The fact table for that measure group contains a foreign key column that references the currency identifiers in the dimension table for that dimension.</span></span> <span data-ttu-id="1d066-199">В этом случае можно выбрать атрибут из измерения валют, на который ссылается группа мер, чтобы идентифицировать местную валюту для транзакций в таблице фактов для этой группы мер.</span><span class="sxs-lookup"><span data-stu-id="1d066-199">In this case, you can select the attribute from the currency dimension that is referenced by the measure group to identify the local currency for transactions in the fact table for that measure group.</span></span> <span data-ttu-id="1d066-200">Эта ситуация наиболее часто возникает в банковских приложениях, где сама транзакция определяет используемую в ней валюту.</span><span class="sxs-lookup"><span data-stu-id="1d066-200">This situation most often occurs in banking applications, where the transaction itself determines the currency used within the transaction.</span></span>  
  
-   <span data-ttu-id="1d066-201">Группа мер содержит ссылочную связь измерений с измерением валют через другое измерение, которое непосредственно ссылается на измерение валют.</span><span class="sxs-lookup"><span data-stu-id="1d066-201">The measure group contains a referenced dimension relationship to the currency dimension, through another dimension that directly references the currency dimension.</span></span> <span data-ttu-id="1d066-202">Например, в образце [!INCLUDE[ssAWDWsp](../includes/ssawdwsp-md.md)] базы данных [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] группа мер «Финансовая отчетность» имеет связь обычного измерения с измерением «Валюта» через измерение «Организация».</span><span class="sxs-lookup"><span data-stu-id="1d066-202">For example, in the [!INCLUDE[ssAWDWsp](../includes/ssawdwsp-md.md)] sample [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] database, the Financial Reporting measure group has a referenced dimension relationship to the Currency dimension through the Organization dimension.</span></span> <span data-ttu-id="1d066-203">Таблица фактов для этой группы мер содержит внешний ключевой столбец, который ссылается на элементы в таблице измерения «Организация».</span><span class="sxs-lookup"><span data-stu-id="1d066-203">The fact table for that measure group contains a foreign key column that references members in the dimension table for the Organization dimension.</span></span> <span data-ttu-id="1d066-204">Таблица измерения «Организация», в свою очередь, содержит внешний ключевой столбец, который ссылается на идентификаторы валют в таблице измерения «Валюта».</span><span class="sxs-lookup"><span data-stu-id="1d066-204">The dimension table for the Organization dimension, in turn, contains a foreign key column that references the currency identifiers in the dimension table for the Currency dimension.</span></span> <span data-ttu-id="1d066-205">Эта ситуация наиболее часто возникает в приложениях для финансовой отчетности, где местоположение дочерней компании, участвующей в транзакции, определяет валюту для этой транзакции.</span><span class="sxs-lookup"><span data-stu-id="1d066-205">This situation most often occurs in financial reporting applications, where the location or subsidiary for a transaction determines the currency for the transaction.</span></span> <span data-ttu-id="1d066-206">В этом случае можно выбрать атрибут, который ссылается на измерение валют из измерения для бизнес-сущности.</span><span class="sxs-lookup"><span data-stu-id="1d066-206">In this case, you can select the attribute that references the currency dimension from the dimension for the business entity.</span></span>  
  
### <a name="reporting-currencies"></a><span data-ttu-id="1d066-207">Валюты отчета.</span><span class="sxs-lookup"><span data-stu-id="1d066-207">Reporting Currencies</span></span>  
 <span data-ttu-id="1d066-208">При выборе типа конвертации «многие ко многим» или «один ко многим» для конвертации валют необходимо указать валюты отчета, на основе которых скрипт многомерных выражений, сформированный мастером бизнес-аналитики, выполняет вычисления конвертации валют.</span><span class="sxs-lookup"><span data-stu-id="1d066-208">If you choose a many-to-many or one-to-many conversion type for your currency conversion, you need to specify the reporting currencies for which the MDX script generated by the Business Intelligence Wizard performs the currency conversion calculations.</span></span> <span data-ttu-id="1d066-209">Можно либо указать все элементы измерения валют, связанные с группой мер курсов, либо выбрать отдельные элементы из измерения.</span><span class="sxs-lookup"><span data-stu-id="1d066-209">You can either specify all the members of the currency dimension related to the rate measure group, or select individual members from the dimension.</span></span>  
  
 <span data-ttu-id="1d066-210">Мастер бизнес-аналитики создает измерение валют отчета на основе именованного запроса, построенного из таблицы измерения валют с использованием выбранных валют отчета.</span><span class="sxs-lookup"><span data-stu-id="1d066-210">The Business Intelligence Wizard creates a reporting currency dimension, based on a named query constructed from the dimension table for the currency dimension using the selected reporting currencies.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="1d066-211">При выборе типа конвертации «один ко многим» также создается измерение валют отчета.</span><span class="sxs-lookup"><span data-stu-id="1d066-211">If you select the one-to-many conversion type, a reporting currency dimension is also created.</span></span> <span data-ttu-id="1d066-212">Это измерение содержит только один элемент, представляющий основную валюту, поскольку она также используется в качестве валюты отчета для конвертации «один ко многим».</span><span class="sxs-lookup"><span data-stu-id="1d066-212">The dimension contains only one member representing the pivot currency, because the pivot currency is also used as the reporting currency for a one-to-many currency conversion.</span></span>  
  
 <span data-ttu-id="1d066-213">Для каждой конвертации валют, определенной в кубе, определяется отдельное измерение валют отчета.</span><span class="sxs-lookup"><span data-stu-id="1d066-213">A separate reporting currency dimension is defined for each currency conversion defined in a cube.</span></span> <span data-ttu-id="1d066-214">Можно изменить имена измерений валют отчета после их создания, но при этом необходимо также обновить скрипт многомерных выражений, сформированный для этой конвертации валют, чтобы гарантировать использование правильного имени командой скрипта при ссылке на измерение валют отчета.</span><span class="sxs-lookup"><span data-stu-id="1d066-214">You can change the name of the reporting currency dimensions after creation, but if you do so you must also update the MDX script generated for that currency conversion to ensure that the correct name is used by the script command when referencing the reporting currency dimension.</span></span>  
  
## <a name="defining-multiple-currency-conversions"></a><span data-ttu-id="1d066-215">Определение нескольких конвертаций валют</span><span class="sxs-lookup"><span data-stu-id="1d066-215">Defining Multiple Currency Conversions</span></span>  
 <span data-ttu-id="1d066-216">Используя мастер бизнес-аналитики, можно определить столько конвертаций валют, сколько необходимо для решения бизнес-аналитики.</span><span class="sxs-lookup"><span data-stu-id="1d066-216">Using the Business Intelligence Wizard, you can define as many currency conversions as needed for your business intelligence solution.</span></span> <span data-ttu-id="1d066-217">Можно либо перезаписывать существующую конвертацию валют, либо добавлять новую конвертацию валют в скрипт многомерных выражений для куба.</span><span class="sxs-lookup"><span data-stu-id="1d066-217">You can either overwrite an existing currency conversion or append a new currency conversion to the MDX script for a cube.</span></span> <span data-ttu-id="1d066-218">Несколько конвертаций валют, определенных в одном кубе, обеспечивают гибкость в приложениях бизнес-аналитики, имеющих сложные требования к отчетности, например в приложениях для финансовой отчетности, поддерживающих несколько различных требований конвертации для международной отчетности.</span><span class="sxs-lookup"><span data-stu-id="1d066-218">Multiple currency conversions defined in a single cube provide flexibility in business intelligence applications that have complex reporting requirements, such as financial reporting applications that support multiple, separate conversion requirements for international reporting.</span></span>  
  
### <a name="identifying-currency-conversions"></a><span data-ttu-id="1d066-219">Идентификация конвертаций валют</span><span class="sxs-lookup"><span data-stu-id="1d066-219">Identifying Currency Conversions</span></span>  
 <span data-ttu-id="1d066-220">Мастер бизнес-аналитики идентифицирует каждую конвертацию валют по разбиению команд скрипта для конвертации валют следующими комментариями:</span><span class="sxs-lookup"><span data-stu-id="1d066-220">The Business Intelligence Wizard identifies each currency conversion by framing the script commands for the currency conversion in the following comments:</span></span>  
  
 `//<Currency conversion>`  
  
 `...`  
  
 `[MDX statements for the currency conversion]`  
  
 `...`  
  
 `//</Currency conversion>`  
  
 <span data-ttu-id="1d066-221">При изменении или удалении этих комментариев мастер бизнес-аналитики не способен обнаружить конвертацию валют, поэтому эти комментарии изменять не следует.</span><span class="sxs-lookup"><span data-stu-id="1d066-221">If you change or remove these comments, the Business Intelligence Wizard is unable to detect the currency conversion, so you should not change these comments.</span></span>  
  
 <span data-ttu-id="1d066-222">Мастер также хранит метаданные в комментариях внутри этих комментариев, включая дату и время создания, пользователя и тип конвертации.</span><span class="sxs-lookup"><span data-stu-id="1d066-222">The wizard also stores metadata in comments within these comments, including the creation date and time, the user, and the conversion type.</span></span> <span data-ttu-id="1d066-223">Эти комментарии также не следует изменять, поскольку мастер бизнес-аналитики использует эти метаданные при отображении существующих конвертаций валют.</span><span class="sxs-lookup"><span data-stu-id="1d066-223">These comments should also not be changed because the Business Intelligence Wizard uses this metadata when displaying existing currency conversions.</span></span>  
  
 <span data-ttu-id="1d066-224">При необходимости можно изменять команды скрипта, содержащиеся в конвертации валют.</span><span class="sxs-lookup"><span data-stu-id="1d066-224">You can change the script commands contained in a currency conversion as needed.</span></span> <span data-ttu-id="1d066-225">Однако при перезаписи конвертации валют эти изменения будут утеряны.</span><span class="sxs-lookup"><span data-stu-id="1d066-225">If you overwrite the currency conversion, however, your changes will be lost.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="1d066-226">См. также:</span><span class="sxs-lookup"><span data-stu-id="1d066-226">See Also</span></span>  
 [<span data-ttu-id="1d066-227">Сценарии глобализации для многомерных служб Analysis Services</span><span class="sxs-lookup"><span data-stu-id="1d066-227">Globalization scenarios for Analysis Services Multiidimensional</span></span>](globalization-scenarios-for-analysis-services-multiidimensional.md)  
  
  
