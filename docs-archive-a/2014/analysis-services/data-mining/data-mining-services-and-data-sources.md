---
title: Службы интеллектуального анализа данных и источники данных | Документация Майкрософт
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: b26fd6e3-7d87-4f66-ab47-5303b51b87da
author: minewiskan
ms.author: owend
ms.openlocfilehash: f4b86ff2603e58210a66e7b40401ff8da7c938b1
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87666892"
---
# <a name="data-mining-services-and-data-sources"></a>Службы интеллектуального анализа данных и источники данных
  Для интеллектуального анализа данных требуется соединение с экземпляром служб SQL Server Analysis Services. Данные из куба не требуются для интеллектуального анализа данных, и рекомендуется использовать реляционные источники данных. Однако интеллектуальный анализ данных использует компоненты, предоставляемые службами [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] .  
  
 В этом разделе представлены необходимые сведения по соединению с экземпляром служб SQL Server [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] для создания, обработки и развертывания моделей интеллектуального анализа данных и выполнения запросов к ним.  
  
## <a name="data-mining-services"></a>Службы интеллектуального анализа данных  
 Серверный компонент компонента [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] — это msmdsrv.exe приложение, которое обычно выполняется как служба Windows. Оно состоит из компонентов безопасности, компонента прослушивания XML для аналитики (XMLA), компонента обработчика запросов и множества других внутренних компонентов, выполняющих следующие функции:  
  
-   Синтаксический анализ инструкций, получаемых от клиентов  
  
-   Управление метаданными  
  
-   Обработка транзакций  
  
-   Обработка вычислений  
  
-   Сохранение измерения и данных ячеек  
  
-   Создание агрегатов  
  
-   Планирование запросов  
  
-   Кэширование объектов  
  
-   Управление ресурсами сервера  
  
### <a name="xmla-listener"></a>Прослушиватель XML для аналитики  
 Компонент прослушивателя XML для аналитики обрабатывает все XMLA-взаимодействия между службами [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] и их клиентами. [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] `Port` Параметр конфигурации в файле msmdsrv.ini можно использовать для указания порта, который [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] прослушивает экземпляр. Значение 0 указывает на то, что [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] прослушивает порт по умолчанию. По умолчанию службы [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] пользуются следующими TCP-портами:  
  
|Порт|Описание|  
|----------|-----------------|  
|2383|Экземпляр по умолчанию [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] .|  
|2382|Перенаправитель для других экземпляров [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] .|  
|Динамически назначается при запуске сервера|Именованный экземпляр [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] .|  
  
 Дополнительные сведения об управлении портами, используемыми этой службой, см. в разделе [Настройка брандмауэра Windows на разрешение доступа к службам Analysis Services](../instances/configure-the-windows-firewall-to-allow-analysis-services-access.md).  
  
## <a name="connecting-to-data-sources"></a>Подключение к источникам данных  
 Каждый раз при создании и обновлении структуры или модели интеллектуального анализа данных используются данные, определяемые источником данных. Источник данных не содержит данных, которые могли бы включать книги Excel, текстовые файлы и базы данных SQL Server. Он только определяет информацию для подключения.  Представление источника данных (DSV) представляет собой уровень абстракции поверх этого источника, который изменяет или связывает данные из этого источника.  
  
 Описание требований для соединения с каждым из этих источников выходит за рамки этого раздела. Дополнительные сведения см. в документации для поставщика. Однако, взаимодействуя с поставщиками, следует помнить о следующих требованиях служб Analysis Services.  
  
-   Так как интеллектуальный анализ данных — это услуга, предоставляемая сервером, экземпляр служб [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] должен иметь доступ к источнику данных.  У такого доступа есть два аспекта: расположение и идентификатор.  
  
     **Расположение** означает, что если создать модель, которая использует только данные на локальном компьютере, а затем развернуть ее на сервере, то модель не сможет работать, так как не найдет источник данных. Для решения этой проблемы может потребоваться передача данных на экземпляр SQL Server, на котором работают службы [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] , или в общее хранилище.  
  
     **Идентификатор** означает, что службы [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] должны быть в состоянии открыть файл данных или источник данных с соответствующими учетными данными. Например, на момент создания модели у вас могли быть неограниченные права на просмотр данных, но у пользователя, который обрабатывает и обновляет модели, права доступа к данным могут быть ограничены, либо их может не быть вообще, что не позволит выполнить обработку или повлияет на содержимое модели. Для подключения к удаленному источнику данных учетная запись должна, как минимум, иметь разрешения на чтение данных.  
  
-   При перемещении модели действуют те же требования. Необходимо обеспечить доступ к месту, где находится старый источник данных, скопировать источники данных и задать параметры нового источника данных. Необходимо также передать имена входа и роли или создать разрешения, которые позволят обрабатывать и обновлять объекты интеллектуального анализа данных в новом месте.  
  
## <a name="configuring-permissions-and-server-properties"></a>Настройка разрешений и свойств сервера  
 Интеллектуальный анализ данных требует дополнительных разрешений в базе данных служб [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] . Большинство свойств интеллектуального анализа данных можно задать с помощью [диалогового окна "Свойства сервера анализа данных" (службы Analysis Services)](../analysis-server-properties-dialog-box-analysis-services.md).  
  
 Дополнительные сведения о свойствах, которые можно настроить, см. [в разделе Настройка свойств сервера в Analysis Services](../server-properties/server-properties-in-analysis-services.md).  
  
 Следующие свойства сервера имеют особую релевантность для интеллектуального анализа данных.  
  
-   `AllowAdHocOpenRowsetQueries`Управляет нерегламентированным доступом к поставщикам OLE DB, которые загружаются непосредственно в пространство памяти сервера.  
  
    > [!IMPORTANT]  
    >  Чтобы повысить безопасность, рекомендуется присвоить этому свойству значение `false`. Значение по умолчанию — `false`. Однако, если это свойство имеет значение `false`, пользователи могут продолжать создавать одноэлементные запросы и использовать функцию OPENQUERY в разрешенных источниках данных.  
  
-   **AllowedProvidersInOpenRowset** Задает поставщика, если включен нерегламентированный доступ. Можно указать нескольких поставщиков, введя список идентификаторов ProgID с разделителями-запятыми.  
  
-   **MaxConcurrentPredictionQueries** Управляет нагрузкой сервера, вызываемой прогнозами. Значение по умолчанию 0 позволяет выполнять неограниченное число запросов в выпуске [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Enterprise и максимум пять параллельных запросов в выпуске [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Standard. Лишние запросы сериализуются и могут превысить время ожидания.  
  
 Сервер предоставляет дополнительные свойства, управляющие доступностью алгоритмов интеллектуального анализа данных, включая все ограничения алгоритмов, и настройками по умолчанию всех служб интеллектуального анализа данных. Тем не менее, не имеется параметров, управляющих доступом к хранимым процедурам интеллектуального анализа данных. Дополнительные сведения см. в статье [Data Mining Properties](../server-properties/data-mining-properties.md).  
  
 Можно также установить свойства, позволяющие тонко настраивать сервер и управлять безопасностью использования клиента. Дополнительные сведения см. в статье [Feature Properties](../server-properties/feature-properties.md).  
  
> [!NOTE]  
>  Дополнительные сведения о поддержке подключаемых алгоритмов в выпусках [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] см. в разделе [функции, поддерживаемые различными выпусками SQL Server 2012](https://go.microsoft.com/fwlink/?linkid=232473) ( https://go.microsoft.com/fwlink/?linkid=232473) .  
  
## <a name="programmatic-access-to-data-mining-objects"></a>Программный доступ к объектам интеллектуального анализа данных  
 Можно использовать следующие модели объектов для создания соединения с базой данных служб Analysis Services и работы с объектами интеллектуального анализа данных.  
  
 **ADO** Использует OLE DB для соединения с сервером служб Analysis Services. При использовании ADO клиент ограничен запросами к набору строк схемы и инструкциями DMX.  
  
 **ADO.NET** Эффективнее взаимодействует с поставщиками SQL Server, чем с другими поставщиками. Использует адаптеры обработки данных для хранения динамических наборов строк. Использует объект набора данных, представляющий собой кэш данных сервера, хранящихся в виде таблиц данных, которые можно обновлять и сохранять в XML-формате.  
  
 **ADOMD.NET** Управляемый поставщик данных, который оптимизируется для работы с интеллектуальным анализом данных и OLAP. ADOMD.NET быстрее ADO.NET и более эффективно использует память. ADOMD.NET также позволяет получать метаданные серверных объектов. Рекомендуется для клиентских приложений, за исключением случаев, когда отсутствует платформа .NET.  
  
 **Сервер ADOMD** Модель объектов для доступа к объектам служб Analysis Services непосредственно на сервере. Используется хранимыми процедурами служб Analysis Services, не предназначена для клиентов.  
  
 **AMO** Интерфейс управления для служб Analysis Services, заменяющий объекты DSO. Такие операции, как просмотр объектов, требуют более высоких разрешений при применении объектов AMO, чем при использовании других интерфейсов. Это объясняется тем, что объекты AMO получают прямой доступ к метаданным, в то время как ADOMD.NET и другие интерфейсы получают доступ только к схемам баз данных.  
  
### <a name="browse-and-query-access-to-servers"></a>Доступ к серверам для просмотра и запросов  
 Можно выполнять все виды прогнозов, используя экземпляр служб Analysis Services в режиме OLAP/интеллектуального анализа данных со следующими ограничениями.  
  
-   Если используется сервер ADOMD, можно использовать расширения интеллектуального анализа данных для доступа к серверу без соединения. Затем можно скопировать результаты прямо в таблицу данных. Но сервер ADOMD не используется с удаленными экземплярами, можно выполнять запросы только к локальному серверу.  
  
-   ADO.NET не поддерживает именованные параметры интеллектуального анализа данных. Необходимо использовать ADOMD.NET.  
  
-   ADOMD.NET позволяет передавать в качестве параметра всю таблицу, поэтому можно пользоваться данными на клиенте или данными, недоступными серверу. В качестве входных данных прогноза можно использовать фигурные таблицы.  
  
### <a name="using-data-mining-stored-procedures"></a>Использование хранимых процедур интеллектуального анализа данных  
 Хранимые процедуры обычно используются, чтобы инкапсулировать запросы для повторного применения. Клиент может использовать инструкцию CALL для вызова хранимых процедур, включая системные хранимые процедуры служб [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] .  
  
 Если процедура возвратит набор данных, клиент получит набор данных или таблицу данных с вложенной таблицей, содержащей строки. Например, если создать запрос к содержимому модели, запрос вернет всю модель. Чтобы не получать слишком много строк, можно написать хранимую процедуру с помощью объектной модели ADOMD+.  
  
 Чтобы написать серверную хранимую процедуру, необходимо сослаться на пространство имен Microsoft.AnalysisServices.AdomdServer. Дополнительные сведения о создании и использовании хранимых процедур см. в разделе [User Defined Functions and Stored Procedures](https://docs.microsoft.com/analysis-services/adomd/multidimensional-models-adomd-net-server/user-defined-functions-and-stored-procedures).  
  
> [!NOTE]  
>  Хранимые процедуры нельзя использовать для изменения безопасности в серверных объектах базы данных. При выполнении хранимой процедуры для определения доступа ко всем серверным объектам используется текущий контекст пользователя. Поэтому пользователи должны иметь соответствующие разрешения для всех объектов базы данных, к которым они получают доступ.  
  
## <a name="see-also"></a>См. также:  
 [Физическая архитектура &#40;Analysis Services многомерных данных&#41;](../multidimensional-models/olap-physical/understanding-microsoft-olap-physical-architecture.md)   
 [Физическая архитектура &#40;Analysis Services-интеллектуальный анализ данных&#41;](physical-architecture-analysis-services-data-mining.md)   
 [Управление решениями и объектами интеллектуального анализа данных](management-of-data-mining-solutions-and-objects.md)  
  
  
