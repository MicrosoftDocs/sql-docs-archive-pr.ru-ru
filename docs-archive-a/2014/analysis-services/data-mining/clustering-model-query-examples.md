---
title: Примеры запросов к модели кластеризации | Документация Майкрософт
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
helpviewer_keywords:
- clustering [Data Mining]
- content queries [DMX]
- clustering algorithms [Analysis Services]
ms.assetid: bf2ba332-9bc6-411a-a3af-b919c52432c8
author: minewiskan
ms.author: owend
ms.openlocfilehash: fe12b82ce2d237acd060b1e387e7a6dfbf958851
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87669193"
---
# <a name="clustering-model-query-examples"></a><span data-ttu-id="362e5-102">Примеры запросов к модели кластеризации</span><span class="sxs-lookup"><span data-stu-id="362e5-102">Clustering Model Query Examples</span></span>
  <span data-ttu-id="362e5-103">С помощью запроса к модели интеллектуального анализа данных можно получать метаданные о модели, а также, с помощью запросов к содержимому, подробную информацию о закономерностях, обнаруженных при анализе.</span><span class="sxs-lookup"><span data-stu-id="362e5-103">When you create a query against a data mining model, you can retrieve metadata about the model, or create a content query that provides details about the patterns discovered in analysis.</span></span> <span data-ttu-id="362e5-104">Кроме того, можно создавать прогнозирующие запросы, которые на основе закономерностей модели создают прогнозы новых данных.</span><span class="sxs-lookup"><span data-stu-id="362e5-104">Alternatively, you can create a prediction query, which uses the patterns in the model to make predictions for new data.</span></span> <span data-ttu-id="362e5-105">Разные типы запросов предоставляют различные виды информации.</span><span class="sxs-lookup"><span data-stu-id="362e5-105">Each type of query will provide different information.</span></span> <span data-ttu-id="362e5-106">Например, запрос к содержимому предоставит дополнительные сведения о найденных кластерах, а прогнозирующий запрос определит, к какому кластеру с наибольшей вероятностью будет относиться новая точка данных.</span><span class="sxs-lookup"><span data-stu-id="362e5-106">For example, a content query might provide additional details about the clusters that were found, whereas a prediction query might tell you in which cluster a new data point is most likely to belong.</span></span>  
  
 <span data-ttu-id="362e5-107">В данном разделе рассматривается создание запросов для моделей, основанных на алгоритме кластеризации Майкрософт [!INCLUDE[msCoName](../../includes/msconame-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="362e5-107">This section explains how to create queries for models that are based on the [!INCLUDE[msCoName](../../includes/msconame-md.md)] Clustering algorithm.</span></span>  
  
 <span data-ttu-id="362e5-108">**Запросы содержимого**</span><span class="sxs-lookup"><span data-stu-id="362e5-108">**Content Queries**</span></span>  
  
 [<span data-ttu-id="362e5-109">Получение метаданных модели с помощью расширений интеллектуального анализа данных</span><span class="sxs-lookup"><span data-stu-id="362e5-109">Getting Model Metadata by Using DMX</span></span>](#bkmk_Query1)  
  
 [<span data-ttu-id="362e5-110">Получение метаданных модели из набора строк схемы</span><span class="sxs-lookup"><span data-stu-id="362e5-110">Retrieving Model Metadata from the Schema Rowset</span></span>](#bkmk_Query2)  
  
 [<span data-ttu-id="362e5-111">Возврат кластера или список кластеров</span><span class="sxs-lookup"><span data-stu-id="362e5-111">Returning a Cluster or a List of Clusters</span></span>](#bkmk_Query3)  
  
 [<span data-ttu-id="362e5-112">Возврат атрибутов кластера</span><span class="sxs-lookup"><span data-stu-id="362e5-112">Returning Attributes for a Cluster</span></span>](#bkmk_Query4)  
  
 [<span data-ttu-id="362e5-113">Возврат профиля кластера с помощью системных хранимых процедур</span><span class="sxs-lookup"><span data-stu-id="362e5-113">Returning a Cluster Profile Using System Stored Procedures</span></span>](#bkmk_Query5)  
  
 [<span data-ttu-id="362e5-114">Нахождение отличительных признаков кластеров</span><span class="sxs-lookup"><span data-stu-id="362e5-114">Finding Discriminating Factors for a Cluster</span></span>](#bkmk_Query6)  
  
 [<span data-ttu-id="362e5-115">Возврат вариантов, принадлежащих кластеру</span><span class="sxs-lookup"><span data-stu-id="362e5-115">Returning Cases that Belong to a Cluster</span></span>](#bkmk_Query7)  
  
 <span data-ttu-id="362e5-116">**Прогнозирующие запросы**</span><span class="sxs-lookup"><span data-stu-id="362e5-116">**Prediction Queries**</span></span>  
  
 [<span data-ttu-id="362e5-117">Прогноз результатов на основании модели кластеризации</span><span class="sxs-lookup"><span data-stu-id="362e5-117">Predicting Outcomes from a Clustering Model</span></span>](#bkmk_Query8)  
  
 [<span data-ttu-id="362e5-118">Определение принадлежности к кластеру</span><span class="sxs-lookup"><span data-stu-id="362e5-118">Determining Cluster Membership</span></span>](#bkmk_Query9)  
  
 [<span data-ttu-id="362e5-119">Возврат всех возможных кластеров, вероятности и расстояния</span><span class="sxs-lookup"><span data-stu-id="362e5-119">Returning All Possible Clusters with Probability and Distance</span></span>](#bkmk_Query10)  
  
##  <a name="finding-information-about-the-model"></a><a name="bkmk_top2"></a> <span data-ttu-id="362e5-120">Поиск сведений о модели</span><span class="sxs-lookup"><span data-stu-id="362e5-120">Finding Information about the Model</span></span>  
 <span data-ttu-id="362e5-121">Все модели интеллектуального анализа данных возвращают содержимое, полученное алгоритмом, в соответствии со стандартизованной схемой — набором строк схемы модели интеллектуального анализа данных.</span><span class="sxs-lookup"><span data-stu-id="362e5-121">All mining models expose the content learned by the algorithm according to a standardized schema, the mining model schema rowset.</span></span> <span data-ttu-id="362e5-122">Запросы к набору строк схемы модели интеллектуального анализа данных создаются при помощи инструкций расширений интеллектуального анализа данных.</span><span class="sxs-lookup"><span data-stu-id="362e5-122">You can create queries against the mining model schema rowset by using Data Mining Extension (DMX) statements.</span></span> <span data-ttu-id="362e5-123">В [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]возможны также запросы непосредственно к наборам строк схемы модели интеллектуального анализа данных, как к системным таблицам.</span><span class="sxs-lookup"><span data-stu-id="362e5-123">In [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], you can also query the schema rowsets directly as system tables.</span></span>  
  
 [<span data-ttu-id="362e5-124">Вернуться к началу</span><span class="sxs-lookup"><span data-stu-id="362e5-124">Return to Top</span></span>](#bkmk_top2)  
  
###  <a name="sample-query-1-getting-model-metadata-by-using-dmx"></a><a name="bkmk_Query1"></a> <span data-ttu-id="362e5-125">Образец запроса 1. Получение метаданных модели с помощью расширений интеллектуального анализа данных</span><span class="sxs-lookup"><span data-stu-id="362e5-125">Sample Query 1: Getting Model Metadata by Using DMX</span></span>  
 <span data-ttu-id="362e5-126">Следующий запрос возвращает основные метаданные модели кластеризации, `TM_Clustering`, созданной при выполнении заданий из учебника по основам интеллектуального анализа данных.</span><span class="sxs-lookup"><span data-stu-id="362e5-126">The following query returns basic metadata about the clustering model, `TM_Clustering`, that you created in the Basic Data Mining Tutorial.</span></span> <span data-ttu-id="362e5-127">Метаданные, доступные в родительском узле модели кластеризации, включают в себя имя модели, базу данных, где она хранится, и количество дочерних узлов модели.</span><span class="sxs-lookup"><span data-stu-id="362e5-127">The metadata available in the parent node of a clustering model includes the name of the model, the database where the model is stored, and the number of child nodes in the model.</span></span> <span data-ttu-id="362e5-128">В этом запросе для получения метаданных из родительского узла модели применяется DMX-запрос содержимого.</span><span class="sxs-lookup"><span data-stu-id="362e5-128">This query uses a DMX content query to retrieve the metadata from the parent node of the model:</span></span>  
  
```  
SELECT MODEL_CATALOG, MODEL_NAME, NODE_CAPTION,   
NODE_SUPPORT, [CHILDREN_CARDINALITY], NODE_DESCRIPTION  
FROM TM_Clustering.CONTENT  
WHERE NODE_TYPE = 1  
```  
  
> [!NOTE]  
>  <span data-ttu-id="362e5-129">Имя столбца CHILDREN_CARDINALITY следует заключить в квадратные скобки, чтобы отличить его от одноименного зарезервированного ключевого слова языка многомерных выражений.</span><span class="sxs-lookup"><span data-stu-id="362e5-129">You must enclose the name of the column, CHILDREN_CARDINALITY, in brackets to distinguish it from the Multidimensional Expressions (MDX) reserved keyword of the same name.</span></span>  
  
 <span data-ttu-id="362e5-130">Пример результатов:</span><span class="sxs-lookup"><span data-stu-id="362e5-130">Example results:</span></span>  
  
|||  
|-|-|  
|<span data-ttu-id="362e5-131">MODEL_CATALOG</span><span class="sxs-lookup"><span data-stu-id="362e5-131">MODEL_CATALOG</span></span>|<span data-ttu-id="362e5-132">TM_Clustering</span><span class="sxs-lookup"><span data-stu-id="362e5-132">TM_Clustering</span></span>|  
|<span data-ttu-id="362e5-133">MODEL_NAME</span><span class="sxs-lookup"><span data-stu-id="362e5-133">MODEL_NAME</span></span>|<span data-ttu-id="362e5-134">Adventure Works DW</span><span class="sxs-lookup"><span data-stu-id="362e5-134">Adventure Works DW</span></span>|  
|<span data-ttu-id="362e5-135">NODE_CAPTION</span><span class="sxs-lookup"><span data-stu-id="362e5-135">NODE_CAPTION</span></span>|<span data-ttu-id="362e5-136">Кластерная модель</span><span class="sxs-lookup"><span data-stu-id="362e5-136">Cluster Model</span></span>|  
|<span data-ttu-id="362e5-137">NODE_SUPPORT</span><span class="sxs-lookup"><span data-stu-id="362e5-137">NODE_SUPPORT</span></span>|<span data-ttu-id="362e5-138">12939</span><span class="sxs-lookup"><span data-stu-id="362e5-138">12939</span></span>|  
|<span data-ttu-id="362e5-139">CHILDREN_CARDINALITY</span><span class="sxs-lookup"><span data-stu-id="362e5-139">CHILDREN_CARDINALITY</span></span>|<span data-ttu-id="362e5-140">10</span><span class="sxs-lookup"><span data-stu-id="362e5-140">10</span></span>|  
|<span data-ttu-id="362e5-141">NODE_DESCRIPTION</span><span class="sxs-lookup"><span data-stu-id="362e5-141">NODE_DESCRIPTION</span></span>|<span data-ttu-id="362e5-142">Все</span><span class="sxs-lookup"><span data-stu-id="362e5-142">All</span></span>|  
  
 <span data-ttu-id="362e5-143">Значение этих столбцов в модели кластеризации см. в разделе [Содержимое моделей интеллектуального анализа данных для моделей кластеризации (службы Analysis Services — интеллектуальный анализ данных)](mining-model-content-for-clustering-models-analysis-services-data-mining.md).</span><span class="sxs-lookup"><span data-stu-id="362e5-143">For a definition of what these columns mean in a clustering model, see [Mining Model Content for Clustering Models &#40;Analysis Services - Data Mining&#41;](mining-model-content-for-clustering-models-analysis-services-data-mining.md).</span></span>  
  
 [<span data-ttu-id="362e5-144">Вернуться к началу</span><span class="sxs-lookup"><span data-stu-id="362e5-144">Return to Top</span></span>](#bkmk_top2)  
  
###  <a name="sample-query-2-retrieving-model-metadata-from-the-schema-rowset"></a><a name="bkmk_Query2"></a><span data-ttu-id="362e5-145">Образец запроса 2. Получение метаданных модели из набора строк схемы</span><span class="sxs-lookup"><span data-stu-id="362e5-145">Sample Query 2: Retrieving Model Metadata from the Schema Rowset</span></span>  
 <span data-ttu-id="362e5-146">Выполнение запроса набора строк схемы интеллектуального анализа данных позволяет получить те же сведения, которые возвращаются DMX-запросом содержимого.</span><span class="sxs-lookup"><span data-stu-id="362e5-146">By querying the data mining schema rowset, you can find the same information that is returned in a DMX content query.</span></span> <span data-ttu-id="362e5-147">Однако в наборе строк схемы содержатся и дополнительные столбцы.</span><span class="sxs-lookup"><span data-stu-id="362e5-147">However, the schema rowset provides some additional columns.</span></span> <span data-ttu-id="362e5-148">Они содержат параметры, которые использовались при создании модели, дату и время последней обработки модели и сведения о владельце модели.</span><span class="sxs-lookup"><span data-stu-id="362e5-148">These include the parameters that were used when the model was created, the date and time that the model was last processed, and the owner of the model.</span></span>  
  
 <span data-ttu-id="362e5-149">В следующем запросе возвращаются даты создания, изменения и последней обработки модели, а также параметры кластеризации, которые использовались при построении модели, и размер обучающего набора.</span><span class="sxs-lookup"><span data-stu-id="362e5-149">The following example returns the date the model was created, modified, and last processed, together with the clustering parameters that were used to build the model, and the size of the training set.</span></span> <span data-ttu-id="362e5-150">Эти сведения полезны для документирования модели и выяснения того, какие параметры кластеризации использовались при создании существующей модели.</span><span class="sxs-lookup"><span data-stu-id="362e5-150">This information can be useful for documenting the model, or for determining which of the clustering options were used to create an existing model.</span></span>  
  
```  
SELECT MODEL_NAME, DATE_CREATED, LAST_PROCESSED, PREDICTION_ENTITY, MINING_PARAMETERS   
from $system.DMSCHEMA_MINING_MODELS  
WHERE MODEL_NAME = 'TM_Clustering'  
```  
  
 <span data-ttu-id="362e5-151">Пример результатов:</span><span class="sxs-lookup"><span data-stu-id="362e5-151">Example results:</span></span>  
  
|||  
|-|-|  
|<span data-ttu-id="362e5-152">MODEL_NAME</span><span class="sxs-lookup"><span data-stu-id="362e5-152">MODEL_NAME</span></span>|<span data-ttu-id="362e5-153">TM_Clustering</span><span class="sxs-lookup"><span data-stu-id="362e5-153">TM_Clustering</span></span>|  
|<span data-ttu-id="362e5-154">DATE_CREATED</span><span class="sxs-lookup"><span data-stu-id="362e5-154">DATE_CREATED</span></span>|<span data-ttu-id="362e5-155">10/12/2007 19:42:51</span><span class="sxs-lookup"><span data-stu-id="362e5-155">10/12/2007 7:42:51 PM</span></span>|  
|<span data-ttu-id="362e5-156">LAST_PROCESSED</span><span class="sxs-lookup"><span data-stu-id="362e5-156">LAST_PROCESSED</span></span>|<span data-ttu-id="362e5-157">10/12/2007 20:09:54</span><span class="sxs-lookup"><span data-stu-id="362e5-157">10/12/2007 8:09:54 PM</span></span>|  
|<span data-ttu-id="362e5-158">PREDICTION_ENTITY</span><span class="sxs-lookup"><span data-stu-id="362e5-158">PREDICTION_ENTITY</span></span>|<span data-ttu-id="362e5-159">Покупатель велосипеда</span><span class="sxs-lookup"><span data-stu-id="362e5-159">Bike Buyer</span></span>|  
|<span data-ttu-id="362e5-160">MINING_PARAMETERS</span><span class="sxs-lookup"><span data-stu-id="362e5-160">MINING_PARAMETERS</span></span>|<span data-ttu-id="362e5-161">CLUSTER_COUNT=10,</span><span class="sxs-lookup"><span data-stu-id="362e5-161">CLUSTER_COUNT=10,</span></span><br /><br /> <span data-ttu-id="362e5-162">CLUSTER_SEED=0,</span><span class="sxs-lookup"><span data-stu-id="362e5-162">CLUSTER_SEED=0,</span></span><br /><br /> <span data-ttu-id="362e5-163">CLUSTERING_METHOD=1,</span><span class="sxs-lookup"><span data-stu-id="362e5-163">CLUSTERING_METHOD=1,</span></span><br /><br /> <span data-ttu-id="362e5-164">MAXIMUM_INPUT_ATTRIBUTES=255,</span><span class="sxs-lookup"><span data-stu-id="362e5-164">MAXIMUM_INPUT_ATTRIBUTES=255,</span></span><br /><br /> <span data-ttu-id="362e5-165">MAXIMUM_STATES=100,</span><span class="sxs-lookup"><span data-stu-id="362e5-165">MAXIMUM_STATES=100,</span></span><br /><br /> <span data-ttu-id="362e5-166">MINIMUM_SUPPORT=1,</span><span class="sxs-lookup"><span data-stu-id="362e5-166">MINIMUM_SUPPORT=1,</span></span><br /><br /> <span data-ttu-id="362e5-167">MODELLING_CARDINALITY=10,</span><span class="sxs-lookup"><span data-stu-id="362e5-167">MODELLING_CARDINALITY=10,</span></span><br /><br /> <span data-ttu-id="362e5-168">SAMPLE_SIZE=50000,</span><span class="sxs-lookup"><span data-stu-id="362e5-168">SAMPLE_SIZE=50000,</span></span><br /><br /> <span data-ttu-id="362e5-169">STOPPING_TOLERANCE=10</span><span class="sxs-lookup"><span data-stu-id="362e5-169">STOPPING_TOLERANCE=10</span></span>|  
  
 [<span data-ttu-id="362e5-170">Вернуться к началу</span><span class="sxs-lookup"><span data-stu-id="362e5-170">Return to Top</span></span>](#bkmk_top2)  
  
## <a name="finding-information-about-clusters"></a><span data-ttu-id="362e5-171">Поиск сведений о кластерах</span><span class="sxs-lookup"><span data-stu-id="362e5-171">Finding Information about Clusters</span></span>  
 <span data-ttu-id="362e5-172">Самые полезные запросы к содержимому моделей кластеризации обычно возвращают сведения, которые можно просмотреть с помощью **Средства просмотра кластеров**.</span><span class="sxs-lookup"><span data-stu-id="362e5-172">The most useful content queries on clustering models generally return the same type of information that you can browse by using the **Cluster Viewer**.</span></span> <span data-ttu-id="362e5-173">Сюда входят профили, характеристики и сравнение кластеров.</span><span class="sxs-lookup"><span data-stu-id="362e5-173">This includes cluster profiles, cluster characteristics, and cluster discrimination.</span></span> <span data-ttu-id="362e5-174">В данном разделе будут приведены примеры запросов, получающих эти сведения.</span><span class="sxs-lookup"><span data-stu-id="362e5-174">This section provides examples of queries that retrieve this information.</span></span>  
  
###  <a name="sample-query-3-returning-a-cluster-or-list-of-clusters"></a><a name="bkmk_Query3"></a> <span data-ttu-id="362e5-175">Образец запроса 3. Возврат кластера или списка кластеров</span><span class="sxs-lookup"><span data-stu-id="362e5-175">Sample Query 3: Returning a Cluster or List of Clusters</span></span>  
 <span data-ttu-id="362e5-176">Поскольку у всех кластеров тип узла — 5, список кластеров легко получить, выбрав из содержимого модели узлы именно этого типа.</span><span class="sxs-lookup"><span data-stu-id="362e5-176">Because all clusters have a node type of 5, you can easily retrieve a list of the clusters by querying the model content for only the nodes of that type.</span></span> <span data-ttu-id="362e5-177">Возвращенные узлы можно также фильтровать по вероятности или по мощности несущего множества, как показано в данном примере.</span><span class="sxs-lookup"><span data-stu-id="362e5-177">You can also filter the nodes that are returned by probability or by support, as shown in this example.</span></span>  
  
```  
SELECT NODE_NAME, NODE_CAPTION ,NODE_SUPPORT, NODE_DESCRIPTION  
FROM TM_Clustering.CONTENT  
WHERE NODE_TYPE = 5 AND NODE_SUPPORT > 1000  
```  
  
 <span data-ttu-id="362e5-178">Пример результатов:</span><span class="sxs-lookup"><span data-stu-id="362e5-178">Example results:</span></span>  
  
|||  
|-|-|  
|<span data-ttu-id="362e5-179">NODE_NAME</span><span class="sxs-lookup"><span data-stu-id="362e5-179">NODE_NAME</span></span>|<span data-ttu-id="362e5-180">002</span><span class="sxs-lookup"><span data-stu-id="362e5-180">002</span></span>|  
|<span data-ttu-id="362e5-181">NODE_CAPTION</span><span class="sxs-lookup"><span data-stu-id="362e5-181">NODE_CAPTION</span></span>|<span data-ttu-id="362e5-182">Кластер 2</span><span class="sxs-lookup"><span data-stu-id="362e5-182">Cluster 2</span></span>|  
|<span data-ttu-id="362e5-183">NODE_SUPPORT</span><span class="sxs-lookup"><span data-stu-id="362e5-183">NODE_SUPPORT</span></span>|<span data-ttu-id="362e5-184">1649</span><span class="sxs-lookup"><span data-stu-id="362e5-184">1649</span></span>|  
|<span data-ttu-id="362e5-185">NODE_DESCRIPTION</span><span class="sxs-lookup"><span data-stu-id="362e5-185">NODE_DESCRIPTION</span></span>|<span data-ttu-id="362e5-186">English Education=Graduate Degree , 32 <=Age <=48 , Number Cars Owned=0 , 35964.0771121808 <=Yearly Income <=97407.7163393957 , English Occupation=Professional , Commute Distance=2-5 Miles , Region=North America , Bike Buyer=1 , Number Children At Home=0 , Number Cars Owned=1 , Commute Distance=0-1 Miles , English Education=Bachelors , Total Children=1 , Number Children At Home=2 , English Occupation=Skilled Manual , Marital Status=S , Total Children=0 , House Owner Flag=0 , Gender=F , Total Children=2 , Region=Pacific</span><span class="sxs-lookup"><span data-stu-id="362e5-186">English Education=Graduate Degree , 32 <=Age <=48 , Number Cars Owned=0 , 35964.0771121808 <=Yearly Income <=97407.7163393957 , English Occupation=Professional , Commute Distance=2-5 Miles , Region=North America , Bike Buyer=1 , Number Children At Home=0 , Number Cars Owned=1 , Commute Distance=0-1 Miles , English Education=Bachelors , Total Children=1 , Number Children At Home=2 , English Occupation=Skilled Manual , Marital Status=S , Total Children=0 , House Owner Flag=0 , Gender=F , Total Children=2 , Region=Pacific</span></span>|  
  
 <span data-ttu-id="362e5-187">Атрибуты, определяющие кластер, можно найти в двух столбцах набора строк схемы интеллектуального анализа данных.</span><span class="sxs-lookup"><span data-stu-id="362e5-187">The attributes that define the cluster can be found in two columns in the data mining schema rowset.</span></span>  
  
-   <span data-ttu-id="362e5-188">Столбец NODE_DESCRIPTION содержит список атрибутов с разделителями-запятыми.</span><span class="sxs-lookup"><span data-stu-id="362e5-188">The NODE_DESCRIPTION column contains a comma-separated list of attributes.</span></span> <span data-ttu-id="362e5-189">Обратите внимание, что для целей просмотра список атрибутов можно сократить.</span><span class="sxs-lookup"><span data-stu-id="362e5-189">Note that the list of attributes might be abbreviated for display purposes.</span></span>  
  
-   <span data-ttu-id="362e5-190">Вложенная таблица в столбце NODE_DISTRIBUTION содержит полный список атрибутов кластера.</span><span class="sxs-lookup"><span data-stu-id="362e5-190">The nested table in the NODE_DISTRIBUTION column contains the full list of attributes for the cluster.</span></span> <span data-ttu-id="362e5-191">Если клиент не поддерживает иерархические наборы строк, для возврата вложенной таблицы перед списком выбираемых столбцов нужно добавить ключевое слово FLATTENED.</span><span class="sxs-lookup"><span data-stu-id="362e5-191">If your client does not support hierarchical rowsets, you can return the nested table by adding the FLATTENED keyword before the SELECT column list.</span></span> <span data-ttu-id="362e5-192">Дополнительные сведения об использовании ключевого слова FLATTENED см. в разделе [SELECT FROM <модель>.CONTENT (расширения интеллектуального анализа данных)](/sql/dmx/select-from-model-dimension-content-dmx).</span><span class="sxs-lookup"><span data-stu-id="362e5-192">For more information about the use of the FLATTENED keyword, see [SELECT FROM &#60;model&#62;.CONTENT &#40;DMX&#41;](/sql/dmx/select-from-model-dimension-content-dmx).</span></span>  
  
 [<span data-ttu-id="362e5-193">Вернуться к началу</span><span class="sxs-lookup"><span data-stu-id="362e5-193">Return to Top</span></span>](#bkmk_top2)  
  
###  <a name="sample-query-4-returning-attributes-for-a-cluster"></a><a name="bkmk_Query4"></a> <span data-ttu-id="362e5-194">Образец запроса 4. Возврат атрибутов кластера</span><span class="sxs-lookup"><span data-stu-id="362e5-194">Sample Query 4: Returning Attributes for a Cluster</span></span>  
 <span data-ttu-id="362e5-195">**Средство просмотра кластеров** отображает профиль каждого кластера со списком атрибутов и их значений.</span><span class="sxs-lookup"><span data-stu-id="362e5-195">For every cluster, the **Cluster Viewer** displays a profile that lists the attributes and their values.</span></span> <span data-ttu-id="362e5-196">Кроме того, это средство просмотра выводит гистограмму, представляющую распределение значений для всей совокупности значений элементов модели.</span><span class="sxs-lookup"><span data-stu-id="362e5-196">The viewer also displays a histogram that shows the distribution of values for the whole population of cases in the model.</span></span> <span data-ttu-id="362e5-197">При просмотре модели с помощью средства просмотра кластеров, гистограмму из условных обозначений интеллектуального анализа можно легко скопировать и вставить ее в электронную таблицу Excel или документ Word.</span><span class="sxs-lookup"><span data-stu-id="362e5-197">If you are browsing the model in the viewer, you can easily copy the histogram from the Mining Legend and then paste it to Excel or a Word document.</span></span> <span data-ttu-id="362e5-198">Можно также использовать панель «Характеристики кластеров» средства просмотра кластеров для наглядного сравнения атрибутов различных кластеров.</span><span class="sxs-lookup"><span data-stu-id="362e5-198">You can also use the Cluster Characteristics pane of the viewer to graphically compare the attributes of different clusters.</span></span>  
  
 <span data-ttu-id="362e5-199">Однако, если данные для этого приходится получать из нескольких кластеров одновременно, легче создать запрос к модели.</span><span class="sxs-lookup"><span data-stu-id="362e5-199">However, if you must obtain values for more than one cluster at a time, it is easier to query the model.</span></span> <span data-ttu-id="362e5-200">Например, при просмотре модели оказалось, что два верхних кластера различаются значениями одного атрибута — `Number Cars Owned`.</span><span class="sxs-lookup"><span data-stu-id="362e5-200">For example, when you browse the model, you might notice that the top two clusters differ with regard to one attribute, `Number Cars Owned`.</span></span> <span data-ttu-id="362e5-201">Значит, нужно извлечь значения этого атрибута для обоих кластеров.</span><span class="sxs-lookup"><span data-stu-id="362e5-201">Therefore, you want to extract the values for each cluster.</span></span>  
  
```  
SELECT TOP 2 NODE_NAME,   
(SELECT ATTRIBUTE_VALUE, [PROBABILITY] FROM NODE_DISTRIBUTION WHERE ATTRIBUTE_NAME = 'Number Cars Owned')  
AS t  
FROM [TM_Clustering].CONTENT  
WHERE NODE_TYPE = 5  
```  
  
 <span data-ttu-id="362e5-202">Первая строка кода указывает, что требуются только два верхних кластера.</span><span class="sxs-lookup"><span data-stu-id="362e5-202">The first line of the code specifies that you want only the top two clusters.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="362e5-203">По умолчанию кластеры сортируются по мощности несущего множества.</span><span class="sxs-lookup"><span data-stu-id="362e5-203">By default, the clusters are ordered by support.</span></span> <span data-ttu-id="362e5-204">Поэтому столбец NODE_SUPPORT можно исключить.</span><span class="sxs-lookup"><span data-stu-id="362e5-204">Therefore, the NODE_SUPPORT column can be omitted.</span></span>  
  
 <span data-ttu-id="362e5-205">Вторая строка кода добавляет инструкцию подзапроса выборки, возвращающую только определенные столбцы из столбца вложенной таблицы.</span><span class="sxs-lookup"><span data-stu-id="362e5-205">The second line of the code adds a sub-select statement that returns only certain columns from the nested table column.</span></span> <span data-ttu-id="362e5-206">Кроме того, запрос выбирает только строки вложенной таблицы, связанные с целевым атрибутом `Number Cars Owned`.</span><span class="sxs-lookup"><span data-stu-id="362e5-206">Furthermore, it restricts the rows from the nested table to those related to the target attribute, `Number Cars Owned`.</span></span> <span data-ttu-id="362e5-207">Для упрощения отображения вложенной таблице присваивается псевдоним.</span><span class="sxs-lookup"><span data-stu-id="362e5-207">To simplify the display, the nested table is aliased.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="362e5-208">Имя столбца вложенной таблицы, `PROBABILITY`, следует заключить в квадратные скобки, так как его имя совпадает с именем зарезервированного ключевого слова из языка многомерных выражений.</span><span class="sxs-lookup"><span data-stu-id="362e5-208">The nested table column, `PROBABILITY`, must be enclosed in brackets because it is also the name of a reserved MDX keyword.</span></span>  
>   
>  <span data-ttu-id="362e5-209">Пример результатов:</span><span class="sxs-lookup"><span data-stu-id="362e5-209">Example results:</span></span>  
  
|<span data-ttu-id="362e5-210">NODE_NAME</span><span class="sxs-lookup"><span data-stu-id="362e5-210">NODE_NAME</span></span>|<span data-ttu-id="362e5-211">T.ATTRIBUTE_VALUE</span><span class="sxs-lookup"><span data-stu-id="362e5-211">T.ATTRIBUTE_VALUE</span></span>|<span data-ttu-id="362e5-212">T.PROBABILITY</span><span class="sxs-lookup"><span data-stu-id="362e5-212">T.PROBABILITY</span></span>|  
|----------------|------------------------|-------------------|  
|<span data-ttu-id="362e5-213">001</span><span class="sxs-lookup"><span data-stu-id="362e5-213">001</span></span>|<span data-ttu-id="362e5-214">2</span><span class="sxs-lookup"><span data-stu-id="362e5-214">2</span></span>|<span data-ttu-id="362e5-215">0.829207754</span><span class="sxs-lookup"><span data-stu-id="362e5-215">0.829207754</span></span>|  
|<span data-ttu-id="362e5-216">001</span><span class="sxs-lookup"><span data-stu-id="362e5-216">001</span></span>|<span data-ttu-id="362e5-217">1</span><span class="sxs-lookup"><span data-stu-id="362e5-217">1</span></span>|<span data-ttu-id="362e5-218">0.109354156</span><span class="sxs-lookup"><span data-stu-id="362e5-218">0.109354156</span></span>|  
|<span data-ttu-id="362e5-219">001</span><span class="sxs-lookup"><span data-stu-id="362e5-219">001</span></span>|<span data-ttu-id="362e5-220">3</span><span class="sxs-lookup"><span data-stu-id="362e5-220">3</span></span>|<span data-ttu-id="362e5-221">0.034481552</span><span class="sxs-lookup"><span data-stu-id="362e5-221">0.034481552</span></span>|  
|<span data-ttu-id="362e5-222">001</span><span class="sxs-lookup"><span data-stu-id="362e5-222">001</span></span>|<span data-ttu-id="362e5-223">4</span><span class="sxs-lookup"><span data-stu-id="362e5-223">4</span></span>|<span data-ttu-id="362e5-224">0.013503302</span><span class="sxs-lookup"><span data-stu-id="362e5-224">0.013503302</span></span>|  
|<span data-ttu-id="362e5-225">001</span><span class="sxs-lookup"><span data-stu-id="362e5-225">001</span></span>|<span data-ttu-id="362e5-226">0</span><span class="sxs-lookup"><span data-stu-id="362e5-226">0</span></span>|<span data-ttu-id="362e5-227">0.013453236</span><span class="sxs-lookup"><span data-stu-id="362e5-227">0.013453236</span></span>|  
|<span data-ttu-id="362e5-228">001</span><span class="sxs-lookup"><span data-stu-id="362e5-228">001</span></span>|<span data-ttu-id="362e5-229">Missing</span><span class="sxs-lookup"><span data-stu-id="362e5-229">Missing</span></span>|<span data-ttu-id="362e5-230">0</span><span class="sxs-lookup"><span data-stu-id="362e5-230">0</span></span>|  
|<span data-ttu-id="362e5-231">002</span><span class="sxs-lookup"><span data-stu-id="362e5-231">002</span></span>|<span data-ttu-id="362e5-232">0</span><span class="sxs-lookup"><span data-stu-id="362e5-232">0</span></span>|<span data-ttu-id="362e5-233">0.576980023</span><span class="sxs-lookup"><span data-stu-id="362e5-233">0.576980023</span></span>|  
|<span data-ttu-id="362e5-234">002</span><span class="sxs-lookup"><span data-stu-id="362e5-234">002</span></span>|<span data-ttu-id="362e5-235">1</span><span class="sxs-lookup"><span data-stu-id="362e5-235">1</span></span>|<span data-ttu-id="362e5-236">0.406623939</span><span class="sxs-lookup"><span data-stu-id="362e5-236">0.406623939</span></span>|  
|<span data-ttu-id="362e5-237">002</span><span class="sxs-lookup"><span data-stu-id="362e5-237">002</span></span>|<span data-ttu-id="362e5-238">2</span><span class="sxs-lookup"><span data-stu-id="362e5-238">2</span></span>|<span data-ttu-id="362e5-239">0.016380082</span><span class="sxs-lookup"><span data-stu-id="362e5-239">0.016380082</span></span>|  
|<span data-ttu-id="362e5-240">002</span><span class="sxs-lookup"><span data-stu-id="362e5-240">002</span></span>|<span data-ttu-id="362e5-241">3</span><span class="sxs-lookup"><span data-stu-id="362e5-241">3</span></span>|<span data-ttu-id="362e5-242">1.60E-05</span><span class="sxs-lookup"><span data-stu-id="362e5-242">1.60E-05</span></span>|  
|<span data-ttu-id="362e5-243">002</span><span class="sxs-lookup"><span data-stu-id="362e5-243">002</span></span>|<span data-ttu-id="362e5-244">4</span><span class="sxs-lookup"><span data-stu-id="362e5-244">4</span></span>|<span data-ttu-id="362e5-245">0</span><span class="sxs-lookup"><span data-stu-id="362e5-245">0</span></span>|  
|<span data-ttu-id="362e5-246">002</span><span class="sxs-lookup"><span data-stu-id="362e5-246">002</span></span>|<span data-ttu-id="362e5-247">Missing</span><span class="sxs-lookup"><span data-stu-id="362e5-247">Missing</span></span>|<span data-ttu-id="362e5-248">0</span><span class="sxs-lookup"><span data-stu-id="362e5-248">0</span></span>|  
  
 [<span data-ttu-id="362e5-249">Вернуться к началу</span><span class="sxs-lookup"><span data-stu-id="362e5-249">Return to Top</span></span>](#bkmk_top2)  
  
###  <a name="sample-query-5-return-a-cluster-profile-using-system-stored-procedures"></a><a name="bkmk_Query5"></a> <span data-ttu-id="362e5-250">Образец запроса 5. Возврат профиля кластера с помощью системных хранимых процедур</span><span class="sxs-lookup"><span data-stu-id="362e5-250">Sample Query 5: Return a Cluster Profile Using System Stored Procedures</span></span>  
 <span data-ttu-id="362e5-251">Для простоты, вместо написания собственных запросов с помощью расширений интеллектуального анализа данных, можно вызывать системные хранимые процедуры, используемые службами [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] для работы с кластерами.</span><span class="sxs-lookup"><span data-stu-id="362e5-251">As a shortcut, rather than writing your own queries by using DMX, you can also call the system stored procedures that [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] uses to work with clusters.</span></span> <span data-ttu-id="362e5-252">Далее приводится пример использования внутренних хранимых процедур для возврата профиля кластера с идентификатором 002.</span><span class="sxs-lookup"><span data-stu-id="362e5-252">The following example illustrates how to use the internal stored procedures to return the profile for a cluster with the ID of 002.</span></span>  
  
```  
CALL System.Microsoft.AnalysisServices.System.DataMining.Clustering.GetClusterProfiles('TM_Clustering", '002',0.0005  
```  
  
 <span data-ttu-id="362e5-253">Аналогично можно использовать системные хранимые процедуры для получения характеристик конкретного кластера, как показано в следующем примере.</span><span class="sxs-lookup"><span data-stu-id="362e5-253">Similarly, you can use a system stored procedure to return the characteristics of a specific cluster, as shown in the following example:</span></span>  
  
```  
CALL System.Microsoft.AnalysisServices.System.DataMining.Clustering.GetClusterCharacteristics('TM_Clustering", '009',0.0005  
```  
  
 <span data-ttu-id="362e5-254">Пример результатов:</span><span class="sxs-lookup"><span data-stu-id="362e5-254">Example results:</span></span>  
  
|<span data-ttu-id="362e5-255">Атрибуты</span><span class="sxs-lookup"><span data-stu-id="362e5-255">Attributes</span></span>|<span data-ttu-id="362e5-256">Значения</span><span class="sxs-lookup"><span data-stu-id="362e5-256">Values</span></span>|<span data-ttu-id="362e5-257">Частота</span><span class="sxs-lookup"><span data-stu-id="362e5-257">Frequency</span></span>|<span data-ttu-id="362e5-258">Поддержка</span><span class="sxs-lookup"><span data-stu-id="362e5-258">Support</span></span>|  
|----------------|------------|---------------|-------------|  
|<span data-ttu-id="362e5-259">Количество детей в доме</span><span class="sxs-lookup"><span data-stu-id="362e5-259">Number Children at Home</span></span>|<span data-ttu-id="362e5-260">0</span><span class="sxs-lookup"><span data-stu-id="362e5-260">0</span></span>|<span data-ttu-id="362e5-261">0.999999829076798</span><span class="sxs-lookup"><span data-stu-id="362e5-261">0.999999829076798</span></span>|<span data-ttu-id="362e5-262">899</span><span class="sxs-lookup"><span data-stu-id="362e5-262">899</span></span>|  
|<span data-ttu-id="362e5-263">Регион</span><span class="sxs-lookup"><span data-stu-id="362e5-263">Region</span></span>|<span data-ttu-id="362e5-264">Северная Америка</span><span class="sxs-lookup"><span data-stu-id="362e5-264">North America</span></span>|<span data-ttu-id="362e5-265">0.999852875241508</span><span class="sxs-lookup"><span data-stu-id="362e5-265">0.999852875241508</span></span>|<span data-ttu-id="362e5-266">899</span><span class="sxs-lookup"><span data-stu-id="362e5-266">899</span></span>|  
|<span data-ttu-id="362e5-267">Общее количество детей</span><span class="sxs-lookup"><span data-stu-id="362e5-267">Total Children</span></span>|<span data-ttu-id="362e5-268">0</span><span class="sxs-lookup"><span data-stu-id="362e5-268">0</span></span>|<span data-ttu-id="362e5-269">0.993860958572323</span><span class="sxs-lookup"><span data-stu-id="362e5-269">0.993860958572323</span></span>|<span data-ttu-id="362e5-270">893</span><span class="sxs-lookup"><span data-stu-id="362e5-270">893</span></span>|  
  
> [!NOTE]  
>  <span data-ttu-id="362e5-271">Системные хранимые процедуры интеллектуального анализа данных предназначены для внутреннего использования. [!INCLUDE[msCoName](../../includes/msconame-md.md)] оставляет за собой право изменить их в случае необходимости.</span><span class="sxs-lookup"><span data-stu-id="362e5-271">The data mining system stored procedures are for internal use and [!INCLUDE[msCoName](../../includes/msconame-md.md)] reserves the right to change them as needed.</span></span> <span data-ttu-id="362e5-272">Для применения в рабочей среде рекомендуется создавать запросы с помощью расширений интеллектуального анализа данных, объектов AMO или XML для аналитики.</span><span class="sxs-lookup"><span data-stu-id="362e5-272">For production use, we recommend that you create queries by using DMX, AMO, or XMLA.</span></span>  
  
 [<span data-ttu-id="362e5-273">Вернуться к началу</span><span class="sxs-lookup"><span data-stu-id="362e5-273">Return to Top</span></span>](#bkmk_top2)  
  
###  <a name="sample-query-6-find-discriminating-factors-for-a-cluster"></a><a name="bkmk_Query6"></a> <span data-ttu-id="362e5-274">Образец запроса 6. Поиск отличительных признаков кластеров</span><span class="sxs-lookup"><span data-stu-id="362e5-274">Sample Query 6: Find Discriminating Factors for a Cluster</span></span>  
 <span data-ttu-id="362e5-275">Вкладка **Сравнение кластеров** в **Средстве просмотра кластеров** позволяет легко сравнивать кластеры между собой, а также варианты из кластера с вариантами, в него не вошедшими (дополнением кластера).</span><span class="sxs-lookup"><span data-stu-id="362e5-275">The **Cluster Discrimination** tab of the **Cluster Viewer** enables you to easily compare a cluster with another cluster, or compare a cluster with all remaining cases (the complement of the cluster).</span></span>  
  
 <span data-ttu-id="362e5-276">Однако создание запросов для возврата этих сведений — довольно сложный процесс. Может понадобиться дополнительная обработка на клиенте для хранения временных результатов и сравнение результатов нескольких запросов.</span><span class="sxs-lookup"><span data-stu-id="362e5-276">However, creating queries to return this information can be complex, and you might need some additional processing on the client to store the temporary results and compare the results of two or more queries.</span></span> <span data-ttu-id="362e5-277">Для упрощения этой задачи можно использовать системные хранимые процедуры.</span><span class="sxs-lookup"><span data-stu-id="362e5-277">As a shortcut, you can use the system stored procedures.</span></span>  
  
 <span data-ttu-id="362e5-278">Следующий запрос возвращает единственную таблицу, в которой содержатся основные отличительные признаки кластеров с идентификаторами узлов 009 и 007.</span><span class="sxs-lookup"><span data-stu-id="362e5-278">The following query returns a single table that indicates the primary discriminating factors between the two clusters that have the node IDs of 009 and 007.</span></span> <span data-ttu-id="362e5-279">Для атрибутов с положительными значениями предпочтителен кластер 009, а с отрицательными — кластер 007</span><span class="sxs-lookup"><span data-stu-id="362e5-279">Attributes with positive values favor cluster 009, whereas attributes with negative values favor cluster 007.</span></span>  
  
```  
CALL System.Microsoft.AnalysisServices.System.DataMining.Clustering.GetClusterDiscrimination('TM_Clustering','009','007',0.0005,true)  
```  
  
 <span data-ttu-id="362e5-280">Пример результатов:</span><span class="sxs-lookup"><span data-stu-id="362e5-280">Example results:</span></span>  
  
|<span data-ttu-id="362e5-281">Атрибуты</span><span class="sxs-lookup"><span data-stu-id="362e5-281">Attributes</span></span>|<span data-ttu-id="362e5-282">Значения</span><span class="sxs-lookup"><span data-stu-id="362e5-282">Values</span></span>|<span data-ttu-id="362e5-283">Оценка</span><span class="sxs-lookup"><span data-stu-id="362e5-283">Score</span></span>|  
|----------------|------------|-----------|  
|<span data-ttu-id="362e5-284">Регион</span><span class="sxs-lookup"><span data-stu-id="362e5-284">Region</span></span>|<span data-ttu-id="362e5-285">Северная Америка</span><span class="sxs-lookup"><span data-stu-id="362e5-285">North America</span></span>|<span data-ttu-id="362e5-286">100</span><span class="sxs-lookup"><span data-stu-id="362e5-286">100</span></span>|  
|<span data-ttu-id="362e5-287">English Occupation</span><span class="sxs-lookup"><span data-stu-id="362e5-287">English Occupation</span></span>|<span data-ttu-id="362e5-288">Квалифицированный ручной труд</span><span class="sxs-lookup"><span data-stu-id="362e5-288">Skilled Manual</span></span>|<span data-ttu-id="362e5-289">94.9003803898654</span><span class="sxs-lookup"><span data-stu-id="362e5-289">94.9003803898654</span></span>|  
|<span data-ttu-id="362e5-290">Регион</span><span class="sxs-lookup"><span data-stu-id="362e5-290">Region</span></span>|<span data-ttu-id="362e5-291">Европа</span><span class="sxs-lookup"><span data-stu-id="362e5-291">Europe</span></span>|<span data-ttu-id="362e5-292">-72.5041051379789</span><span class="sxs-lookup"><span data-stu-id="362e5-292">-72.5041051379789</span></span>|  
|<span data-ttu-id="362e5-293">English Occupation</span><span class="sxs-lookup"><span data-stu-id="362e5-293">English Occupation</span></span>|<span data-ttu-id="362e5-294">Вручную</span><span class="sxs-lookup"><span data-stu-id="362e5-294">Manual</span></span>|<span data-ttu-id="362e5-295">-69.6503163202722</span><span class="sxs-lookup"><span data-stu-id="362e5-295">-69.6503163202722</span></span>|  
  
 <span data-ttu-id="362e5-296">Эти же сведения будут представлены на диаграмме в средстве просмотра **Сравнение кластеров** , если выбрать кластер 9 из первого раскрывающегося списка и кластер 7 из второго.</span><span class="sxs-lookup"><span data-stu-id="362e5-296">This is the same information that is presented in the chart of the **Cluster Discrimination** viewer if you select Cluster 9 from the first drop-down list and Cluster 7 from the second drop-down list.</span></span> <span data-ttu-id="362e5-297">Чтобы сравнить кластер 9 с его дополнением, в качестве значения второго параметра используется пустая строка, как показано в следующем примере.</span><span class="sxs-lookup"><span data-stu-id="362e5-297">To compare cluster 9 with its complement, you use the empty string in the second parameter, as shown in the following example:</span></span>  
  
```  
CALL System.Microsoft.AnalysisServices.System.DataMining.Clustering.GetClusterDiscrimination('TM_Clustering','009','',0.0005,true)  
```  
  
> [!NOTE]  
>  <span data-ttu-id="362e5-298">Системные хранимые процедуры интеллектуального анализа данных предназначены для внутреннего использования. [!INCLUDE[msCoName](../../includes/msconame-md.md)] оставляет за собой право изменить их в случае необходимости.</span><span class="sxs-lookup"><span data-stu-id="362e5-298">The data mining system stored procedures are for internal use and [!INCLUDE[msCoName](../../includes/msconame-md.md)] reserves the right to change them as needed.</span></span> <span data-ttu-id="362e5-299">Для применения в рабочей среде рекомендуется создавать запросы с помощью расширений интеллектуального анализа данных, объектов AMO или XML для аналитики.</span><span class="sxs-lookup"><span data-stu-id="362e5-299">For production use, we recommend that you create queries by using DMX, AMO, or XMLA.</span></span>  
  
 [<span data-ttu-id="362e5-300">Вернуться к началу</span><span class="sxs-lookup"><span data-stu-id="362e5-300">Return to Top</span></span>](#bkmk_top2)  
  
###  <a name="sample-query-7-returning-cases-that-belong-to-a-cluster"></a><a name="bkmk_Query7"></a> <span data-ttu-id="362e5-301">Образец запроса 7. Возврат вариантов, принадлежащих кластеру</span><span class="sxs-lookup"><span data-stu-id="362e5-301">Sample Query 7: Returning Cases that Belong to a Cluster</span></span>  
 <span data-ttu-id="362e5-302">Если в модели интеллектуального анализа данных разрешена детализация, можно создавать запросы, возвращающие подробные сведения об использованных в модели вариантах.</span><span class="sxs-lookup"><span data-stu-id="362e5-302">If drillthrough has been enabled on the mining model, you can create queries that return detailed information about the cases used in the model.</span></span> <span data-ttu-id="362e5-303">Кроме того, если детализация разрешена в структуре интеллектуального анализа данных, с помощью функции [StructureColumn (расширения интеллектуального анализа данных)](/sql/dmx/structurecolumn-dmx) можно включать в запрос столбцы базовой структуры.</span><span class="sxs-lookup"><span data-stu-id="362e5-303">Moreover, if drillthrough has been enabled on the mining structure, you can include columns from the underlying structure by using the [StructureColumn &#40;DMX&#41;](/sql/dmx/structurecolumn-dmx) function.</span></span>  
  
 <span data-ttu-id="362e5-304">В следующем примере возвращаются два столбца, которые использовались в модели, — Age и Region, и один столбец, не использовавшийся в модели, — First Name.</span><span class="sxs-lookup"><span data-stu-id="362e5-304">The following example returns two columns that were used in the model, Age and Region, and one more column, First Name, that was not used in the model.</span></span> <span data-ttu-id="362e5-305">Запрос возвращает только варианты, относящиеся к кластеру 1.</span><span class="sxs-lookup"><span data-stu-id="362e5-305">The query returns only cases that were classified into Cluster 1.</span></span>  
  
```  
SELECT [Age], [Region], StructureColumn('First Name')  
FROM [TM_Clustering].CASES  
WHERE IsInNode('001')  
```  
  
 <span data-ttu-id="362e5-306">Чтобы вернуть варианты, принадлежащие к кластеру, нужно знать его идентификатор.</span><span class="sxs-lookup"><span data-stu-id="362e5-306">To return the cases that belong to a cluster, you must know the ID of the cluster.</span></span> <span data-ttu-id="362e5-307">Идентификатор кластера можно узнать при просмотре модели с помощью средства просмотра.</span><span class="sxs-lookup"><span data-stu-id="362e5-307">You can obtain the ID of the cluster by browsing the model in one of the viewers.</span></span> <span data-ttu-id="362e5-308">Чтобы к кластеру было легче обращаться, его можно переименовать, а затем обращаться к нему по имени вместо идентификатора.</span><span class="sxs-lookup"><span data-stu-id="362e5-308">Or, you can rename a cluster for easier reference, after which you could use the name in place of an ID number.</span></span> <span data-ttu-id="362e5-309">Однако следует помнить, что имена, присвоенные кластерам, теряются при повторной обработке модели.</span><span class="sxs-lookup"><span data-stu-id="362e5-309">However, know that the names that you assign to a cluster will be lost if the model is reprocessed.</span></span>  
  
 [<span data-ttu-id="362e5-310">Вернуться к началу</span><span class="sxs-lookup"><span data-stu-id="362e5-310">Return to Top</span></span>](#bkmk_top2)  
  
## <a name="making-predictions-using-the-model"></a><span data-ttu-id="362e5-311">Создание прогнозов с помощью модели</span><span class="sxs-lookup"><span data-stu-id="362e5-311">Making Predictions using the Model</span></span>  
 <span data-ttu-id="362e5-312">Хотя кластеризация обычно используется для описания и изучения данных, реализация [!INCLUDE[msCoName](../../includes/msconame-md.md)] позволяет также прогнозировать принадлежность вариантов кластерам и получать значения вероятностей, связанных с этими прогнозами.</span><span class="sxs-lookup"><span data-stu-id="362e5-312">Although clustering is typically used for describing and understanding data, the [!INCLUDE[msCoName](../../includes/msconame-md.md)] implementation also lets you make prediction about cluster membership, and return probabilities associated with the prediction.</span></span> <span data-ttu-id="362e5-313">В данном разделе приводятся примеры создания прогнозирующих запросов для моделей кластеризации.</span><span class="sxs-lookup"><span data-stu-id="362e5-313">This section provides examples of how to create prediction queries on clustering models.</span></span> <span data-ttu-id="362e5-314">Можно строить прогнозы для нескольких вариантов, указывая табличный источник данных. Можно также вводить новые величины по одной с помощью одноэлементного запроса.</span><span class="sxs-lookup"><span data-stu-id="362e5-314">You can make predictions for multiple cases, by specifying a tabular data source, or you can provide new values on at a time by creating a singleton query.</span></span> <span data-ttu-id="362e5-315">Для простоты все примеры в этом разделе используют одноэлементные запросы.</span><span class="sxs-lookup"><span data-stu-id="362e5-315">For clarity the examples in this section are all singleton queries.</span></span>  
  
 <span data-ttu-id="362e5-316">Дополнительные сведения о создании прогнозирующих запросов с помощью DMX см. в разделе [интерфейсы запросов интеллектуального анализа данных](data-mining-query-tools.md).</span><span class="sxs-lookup"><span data-stu-id="362e5-316">For more information about how to create prediction queries using DMX, see [Data Mining Query Interfaces](data-mining-query-tools.md).</span></span>  
  
 [<span data-ttu-id="362e5-317">Вернуться к началу</span><span class="sxs-lookup"><span data-stu-id="362e5-317">Return to Top</span></span>](#bkmk_top2)  
  
###  <a name="sample-query-8-predicting-outcomes-from-a-clustering-model"></a><a name="bkmk_Query8"></a> <span data-ttu-id="362e5-318">Образец запроса 8. Прогноз результатов на основании модели кластеризации</span><span class="sxs-lookup"><span data-stu-id="362e5-318">Sample Query 8: Predicting Outcomes from a Clustering Model</span></span>  
 <span data-ttu-id="362e5-319">Если создаваемая модель кластеризации содержит прогнозируемый атрибут, ее можно использовать для прогноза результатов.</span><span class="sxs-lookup"><span data-stu-id="362e5-319">If the clustering model you create contains a predictable attribute, you can use the model to make predictions about outcomes.</span></span> <span data-ttu-id="362e5-320">Однако модель будет обрабатывать прогнозируемый атрибут по-разному, в зависимости от значения, определяющего использование прогнозируемого столбца, — `Predict` или `PredictOnly`.</span><span class="sxs-lookup"><span data-stu-id="362e5-320">However, the model handles the predictable attribute differently depending on whether you set the predictable column to `Predict` or `PredictOnly`.</span></span> <span data-ttu-id="362e5-321">Если для использования столбца задано значение `Predict`, значения этого атрибута добавляются в модель кластеризации и появляются в окончательной модели в виде атрибутов.</span><span class="sxs-lookup"><span data-stu-id="362e5-321">If you set the usage of the column to `Predict`, the values for that attribute are added to the clustering model and appear as attributes in the finished model.</span></span> <span data-ttu-id="362e5-322">Однако если для использования столбца задано значение `PredictOnly`, то его значения не используются для создания кластеров.</span><span class="sxs-lookup"><span data-stu-id="362e5-322">However, if you set the usage of the column to `PredictOnly`, the values are not used to create clusters.</span></span> <span data-ttu-id="362e5-323">Вместо этого по завершении модели алгоритм кластеризации создает для атрибута `PredictOnly` новые значения на основе кластеров, к которым принадлежат варианты.</span><span class="sxs-lookup"><span data-stu-id="362e5-323">Instead, after the mode is completed, the clustering algorithm creates new values for the `PredictOnly` attribute based on the clusters to which each case belongs.</span></span>  
  
 <span data-ttu-id="362e5-324">В следующем запросе в модель добавляется один новый вариант, о котором ничего не известно, кроме пола и возраста.</span><span class="sxs-lookup"><span data-stu-id="362e5-324">The following query provides a single new case to the model, where the only information about the case is the age and gender.</span></span> <span data-ttu-id="362e5-325">Инструкция SELECT задает пару прогнозируемый атрибут/значение, а функция [PredictProbability (расширения интеллектуального анализа данных)](/sql/dmx/predictprobability-dmx) позволяет вычислить вероятность целевого результата для варианта с такими значениями атрибутов.</span><span class="sxs-lookup"><span data-stu-id="362e5-325">The SELECT statement specifies the predictable attribute/value pair that you are interested in, and the [PredictProbability &#40;DMX&#41;](/sql/dmx/predictprobability-dmx) function tells you the probability that a case with those attributes will have the targeted outcome.</span></span>  
  
```  
SELECT  
  [TM_Clustering].[Bike Buyer], PredictProbability([Bike Buyer],1)  
FROM  
  [TM_Clustering]  
NATURAL PREDICTION JOIN  
(SELECT 40 AS [Age],  
  'F' AS [Gender]) AS t  
```  
  
 <span data-ttu-id="362e5-326">Пример результата, когда для использования установлено значение `Predict`:</span><span class="sxs-lookup"><span data-stu-id="362e5-326">Example of results when usage is set to `Predict`:</span></span>  
  
|<span data-ttu-id="362e5-327">Покупатель велосипеда</span><span class="sxs-lookup"><span data-stu-id="362e5-327">Bike Buyer</span></span>|<span data-ttu-id="362e5-328">Выражение</span><span class="sxs-lookup"><span data-stu-id="362e5-328">Expression</span></span>|  
|----------------|----------------|  
|<span data-ttu-id="362e5-329">1</span><span class="sxs-lookup"><span data-stu-id="362e5-329">1</span></span>|<span data-ttu-id="362e5-330">0.592924735740338</span><span class="sxs-lookup"><span data-stu-id="362e5-330">0.592924735740338</span></span>|  
  
 <span data-ttu-id="362e5-331">Пример результата, когда для использования установлено значение `PredictOnly`, после повторной обработки модели:</span><span class="sxs-lookup"><span data-stu-id="362e5-331">Example of results when the usage is set to `PredictOnly` and the model is reprocessed:</span></span>  
  
|<span data-ttu-id="362e5-332">Покупатель велосипеда</span><span class="sxs-lookup"><span data-stu-id="362e5-332">Bike Buyer</span></span>|<span data-ttu-id="362e5-333">Выражение</span><span class="sxs-lookup"><span data-stu-id="362e5-333">Expression</span></span>|  
|----------------|----------------|  
|<span data-ttu-id="362e5-334">1</span><span class="sxs-lookup"><span data-stu-id="362e5-334">1</span></span>|<span data-ttu-id="362e5-335">0.55843544003102</span><span class="sxs-lookup"><span data-stu-id="362e5-335">0.55843544003102</span></span>|  
  
 <span data-ttu-id="362e5-336">В данном примере различие моделей несущественно.</span><span class="sxs-lookup"><span data-stu-id="362e5-336">In this example, the difference in the model is not significant.</span></span> <span data-ttu-id="362e5-337">Однако, иногда бывает важно установить разницу между реальным распределением значений и распределением, предсказанным моделью.</span><span class="sxs-lookup"><span data-stu-id="362e5-337">However, sometimes it can be important to detect differences between the actual distribution of values and what the model predicts.</span></span> <span data-ttu-id="362e5-338">Вкладка [PredictCaseLikelihood (расширения интеллектуального анализа данных)](/sql/dmx/predictcaselikelihood-dmx) , сообщающая, насколько вероятно появление данного случая в рамках данной модели.</span><span class="sxs-lookup"><span data-stu-id="362e5-338">The [PredictCaseLikelihood &#40;DMX&#41;](/sql/dmx/predictcaselikelihood-dmx) function is useful in this scenario, because it tells you how likely a case is, given the model.</span></span>  
  
 <span data-ttu-id="362e5-339">Значение, возвращаемое функцией PredictCaseLikelihood, является вероятностью, поэтому оно всегда находится в интервале от 0 до 1. Значение 0,5 означает равновероятный результат.</span><span class="sxs-lookup"><span data-stu-id="362e5-339">The number that is returned by the PredictCaseLikelihood function is a probability, and therefore is always between 0 and 1, with a value of .5 representing random outcome.</span></span> <span data-ttu-id="362e5-340">Поэтому значение, меньшее 0,5, означает, что прогнозируемый вариант маловероятен для данной модели, а значение, большее 0,5, — что он скорее соответствует модели, чем не соответствует.</span><span class="sxs-lookup"><span data-stu-id="362e5-340">Therefore, a score less than .5 means that the predicted case is unlikely, given the model, and a score over.5 indicates that the predicted case is more likely than not to fit the model.</span></span>  
  
 <span data-ttu-id="362e5-341">Например, следующий запрос вернет два значения, характеризующих вероятность появления нового образца.</span><span class="sxs-lookup"><span data-stu-id="362e5-341">For example, the following query returns two values that characterize the likelihood of a new sample case.</span></span> <span data-ttu-id="362e5-342">Ненормализованное значение представляет вероятность попадания в текущую модель.</span><span class="sxs-lookup"><span data-stu-id="362e5-342">The non-normalized value represents the probability given the current model.</span></span> <span data-ttu-id="362e5-343">При использовании ключевого слова NORMALIZED значение вероятности, возвращаемое функцией, нормализуется делением вероятности попадания в модель на вероятность непопадания.</span><span class="sxs-lookup"><span data-stu-id="362e5-343">When you use the NORMALIZED keyword, the likelihood score that is returned by the function is adjusted by dividing "probability with the model" by "probability without the model".</span></span>  
  
```  
SELECT  
PredictCaseLikelihood(NORMALIZED) AS [NormalizedValue], PredictCaseLikelihood(NONNORMALIZED) AS [NonNormalizedValue]  
FROM  
  [TM_Clustering_PredictOnly]  
NATURAL PREDICTION JOIN  
(SELECT 40 AS [Age],  
  'F' AS [Gender]) AS t  
```  
  
 <span data-ttu-id="362e5-344">Пример результатов:</span><span class="sxs-lookup"><span data-stu-id="362e5-344">Example results:</span></span>  
  
|<span data-ttu-id="362e5-345">NormalizedValue</span><span class="sxs-lookup"><span data-stu-id="362e5-345">NormalizedValue</span></span>|<span data-ttu-id="362e5-346">NonNormalizedValue</span><span class="sxs-lookup"><span data-stu-id="362e5-346">NonNormalizedValue</span></span>|  
|---------------------|------------------------|  
|<span data-ttu-id="362e5-347">5.56438372679893E-11</span><span class="sxs-lookup"><span data-stu-id="362e5-347">5.56438372679893E-11</span></span>|<span data-ttu-id="362e5-348">8.65459953145182E-68</span><span class="sxs-lookup"><span data-stu-id="362e5-348">8.65459953145182E-68</span></span>|  
  
 <span data-ttu-id="362e5-349">Обратите внимание, что для выражения результатов используется экспоненциальный формат.</span><span class="sxs-lookup"><span data-stu-id="362e5-349">Note that the numbers in these results are expressed in scientific notation.</span></span>  
  
 [<span data-ttu-id="362e5-350">Вернуться к началу</span><span class="sxs-lookup"><span data-stu-id="362e5-350">Return to Top</span></span>](#bkmk_top2)  
  
###  <a name="sample-query-9-determining-cluster-membership"></a><a name="bkmk_Query9"></a> <span data-ttu-id="362e5-351">Образец запроса 9. Определение принадлежности к кластеру</span><span class="sxs-lookup"><span data-stu-id="362e5-351">Sample Query 9: Determining Cluster Membership</span></span>  
 <span data-ttu-id="362e5-352">В этом примере с помощью функции [Cluster (расширения интеллектуального анализа данных)](/sql/dmx/cluster-dmx) определяется, к какому кластеру вероятнее всего будет принадлежать новый вариант, а с помощью функции [ClusterProbability (расширения интеллектуального анализа данных)](/sql/dmx/clusterprobability-dmx) — с какой вероятностью он будет принадлежать к этому кластеру.</span><span class="sxs-lookup"><span data-stu-id="362e5-352">This example uses the [Cluster &#40;DMX&#41;](/sql/dmx/cluster-dmx) function to return the cluster to which the new case is most likely to belong, and uses the [ClusterProbability &#40;DMX&#41;](/sql/dmx/clusterprobability-dmx) function to return the probability for membership in that cluster.</span></span>  
  
```  
SELECT Cluster(), ClusterProbability()  
FROM  
  [TM_Clustering]  
NATURAL PREDICTION JOIN  
(SELECT 40 AS [Age],  
  'F' AS [Gender],  
  'S' AS [Marital Status]) AS t  
```  
  
 <span data-ttu-id="362e5-353">Пример результатов:</span><span class="sxs-lookup"><span data-stu-id="362e5-353">Example results:</span></span>  
  
|<span data-ttu-id="362e5-354">$CLUSTER</span><span class="sxs-lookup"><span data-stu-id="362e5-354">$CLUSTER</span></span>|<span data-ttu-id="362e5-355">Выражение</span><span class="sxs-lookup"><span data-stu-id="362e5-355">Expression</span></span>|  
|--------------|----------------|  
|<span data-ttu-id="362e5-356">Кластер 2</span><span class="sxs-lookup"><span data-stu-id="362e5-356">Cluster 2</span></span>|<span data-ttu-id="362e5-357">0.397918596951617</span><span class="sxs-lookup"><span data-stu-id="362e5-357">0.397918596951617</span></span>|  
  
 <span data-ttu-id="362e5-358">**Примечание** . По умолчанию `ClusterProbability` функция возвращает вероятность наиболее вероятного кластера.</span><span class="sxs-lookup"><span data-stu-id="362e5-358">**Note** By default, the `ClusterProbability` function returns the probability of the most likely cluster.</span></span> <span data-ttu-id="362e5-359">Однако с помощью конструкции `ClusterProbability('cluster name')`можно задать другой кластер.</span><span class="sxs-lookup"><span data-stu-id="362e5-359">However, you can specify a different cluster by using the syntax `ClusterProbability('cluster name')`.</span></span> <span data-ttu-id="362e5-360">Пользуясь этой конструкцией, имейте в виду, что работа любой прогнозирующей функции не зависит от других результатов.</span><span class="sxs-lookup"><span data-stu-id="362e5-360">If you do this, be aware that the results from each prediction function are independent of the other results.</span></span> <span data-ttu-id="362e5-361">Поэтому вероятность, указанная во втором столбце, может относиться не к тому кластеру, который указан в первом столбце.</span><span class="sxs-lookup"><span data-stu-id="362e5-361">Therefore, the probability score in the second column could refer to a different cluster than the cluster named in the first column.</span></span>  
  
 [<span data-ttu-id="362e5-362">Вернуться к началу</span><span class="sxs-lookup"><span data-stu-id="362e5-362">Return to Top</span></span>](#bkmk_top2)  
  
###  <a name="sample-query-10-returning-all-possible-clusters-with-probability-and-distance"></a><a name="bkmk_Query10"></a> <span data-ttu-id="362e5-363">Образец запроса 10. Возврат всех возможных кластеров, вероятности и расстояния</span><span class="sxs-lookup"><span data-stu-id="362e5-363">Sample Query 10: Returning All Possible Clusters with Probability and Distance</span></span>  
 <span data-ttu-id="362e5-364">В предыдущем примере вероятность была не очень высокой.</span><span class="sxs-lookup"><span data-stu-id="362e5-364">In the previous example, the probability score was not very high.</span></span> <span data-ttu-id="362e5-365">Чтобы узнать, есть ли более подходящий кластер, можно с помощью функций [PredictHistogram (расширения интеллектуального анализа данных)](/sql/dmx/predicthistogram-dmx) и [Cluster (расширения интеллектуального анализа данных)](/sql/dmx/cluster-dmx) вернуть вложенную таблицу, которая будет содержать все возможные кластеры с указанием вероятности принадлежности нового варианта к каждому из этих кластеров.</span><span class="sxs-lookup"><span data-stu-id="362e5-365">To determine if there is a better cluster, you can use the [PredictHistogram &#40;DMX&#41;](/sql/dmx/predicthistogram-dmx) function together with the [Cluster &#40;DMX&#41;](/sql/dmx/cluster-dmx) function to return a nested table that includes all possible clusters, together with the probability that the new case that belongs to each cluster.</span></span> <span data-ttu-id="362e5-366">Для большей наглядности иерархический набор строк можно превратить в плоскую таблицу с помощью ключевого слова FLATTENED.</span><span class="sxs-lookup"><span data-stu-id="362e5-366">The FLATTENED keyword is used to change the hierarchical rowset into a flat table for easier viewing.</span></span>  
  
```  
SELECT FLATTENED PredictHistogram(Cluster())  
From  
  [TM_Clustering]  
NATURAL PREDICTION JOIN  
(SELECT 40 AS [Age],  
  'F' AS [Gender],  
  'S' AS [Marital Status])  
```  
  
|<span data-ttu-id="362e5-367">Expression.$CLUSTER</span><span class="sxs-lookup"><span data-stu-id="362e5-367">Expression.$CLUSTER</span></span>|<span data-ttu-id="362e5-368">Expression.$DISTANCE</span><span class="sxs-lookup"><span data-stu-id="362e5-368">Expression.$DISTANCE</span></span>|<span data-ttu-id="362e5-369">Expression.$PROBABILITY</span><span class="sxs-lookup"><span data-stu-id="362e5-369">Expression.$PROBABILITY</span></span>|  
|-------------------------|--------------------------|-----------------------------|  
|<span data-ttu-id="362e5-370">Кластер 2</span><span class="sxs-lookup"><span data-stu-id="362e5-370">Cluster 2</span></span>|<span data-ttu-id="362e5-371">0.602081403048383</span><span class="sxs-lookup"><span data-stu-id="362e5-371">0.602081403048383</span></span>|<span data-ttu-id="362e5-372">0.397918596951617</span><span class="sxs-lookup"><span data-stu-id="362e5-372">0.397918596951617</span></span>|  
|<span data-ttu-id="362e5-373">Кластер 10</span><span class="sxs-lookup"><span data-stu-id="362e5-373">Cluster 10</span></span>|<span data-ttu-id="362e5-374">0.719691686785675</span><span class="sxs-lookup"><span data-stu-id="362e5-374">0.719691686785675</span></span>|<span data-ttu-id="362e5-375">0.280308313214325</span><span class="sxs-lookup"><span data-stu-id="362e5-375">0.280308313214325</span></span>|  
|<span data-ttu-id="362e5-376">Кластер 4</span><span class="sxs-lookup"><span data-stu-id="362e5-376">Cluster 4</span></span>|<span data-ttu-id="362e5-377">0.867772590378791</span><span class="sxs-lookup"><span data-stu-id="362e5-377">0.867772590378791</span></span>|<span data-ttu-id="362e5-378">0.132227409621209</span><span class="sxs-lookup"><span data-stu-id="362e5-378">0.132227409621209</span></span>|  
|<span data-ttu-id="362e5-379">Кластер 5</span><span class="sxs-lookup"><span data-stu-id="362e5-379">Cluster 5</span></span>|<span data-ttu-id="362e5-380">0.931039872200985</span><span class="sxs-lookup"><span data-stu-id="362e5-380">0.931039872200985</span></span>|<span data-ttu-id="362e5-381">0.0689601277990149</span><span class="sxs-lookup"><span data-stu-id="362e5-381">0.0689601277990149</span></span>|  
|<span data-ttu-id="362e5-382">Кластер 3</span><span class="sxs-lookup"><span data-stu-id="362e5-382">Cluster 3</span></span>|<span data-ttu-id="362e5-383">0.942359230072167</span><span class="sxs-lookup"><span data-stu-id="362e5-383">0.942359230072167</span></span>|<span data-ttu-id="362e5-384">0.0576407699278328</span><span class="sxs-lookup"><span data-stu-id="362e5-384">0.0576407699278328</span></span>|  
|<span data-ttu-id="362e5-385">Кластер 6</span><span class="sxs-lookup"><span data-stu-id="362e5-385">Cluster 6</span></span>|<span data-ttu-id="362e5-386">0.958973668972756</span><span class="sxs-lookup"><span data-stu-id="362e5-386">0.958973668972756</span></span>|<span data-ttu-id="362e5-387">0.0410263310272437</span><span class="sxs-lookup"><span data-stu-id="362e5-387">0.0410263310272437</span></span>|  
|<span data-ttu-id="362e5-388">Кластер 7</span><span class="sxs-lookup"><span data-stu-id="362e5-388">Cluster 7</span></span>|<span data-ttu-id="362e5-389">0.979081275926724</span><span class="sxs-lookup"><span data-stu-id="362e5-389">0.979081275926724</span></span>|<span data-ttu-id="362e5-390">0.0209187240732763</span><span class="sxs-lookup"><span data-stu-id="362e5-390">0.0209187240732763</span></span>|  
|<span data-ttu-id="362e5-391">Кластер 1</span><span class="sxs-lookup"><span data-stu-id="362e5-391">Cluster 1</span></span>|<span data-ttu-id="362e5-392">0.999169044818624</span><span class="sxs-lookup"><span data-stu-id="362e5-392">0.999169044818624</span></span>|<span data-ttu-id="362e5-393">0.000830955181376364</span><span class="sxs-lookup"><span data-stu-id="362e5-393">0.000830955181376364</span></span>|  
|<span data-ttu-id="362e5-394">Кластер 9</span><span class="sxs-lookup"><span data-stu-id="362e5-394">Cluster 9</span></span>|<span data-ttu-id="362e5-395">0.999831227795894</span><span class="sxs-lookup"><span data-stu-id="362e5-395">0.999831227795894</span></span>|<span data-ttu-id="362e5-396">0.000168772204105754</span><span class="sxs-lookup"><span data-stu-id="362e5-396">0.000168772204105754</span></span>|  
|<span data-ttu-id="362e5-397">Кластер 8</span><span class="sxs-lookup"><span data-stu-id="362e5-397">Cluster 8</span></span>|<span data-ttu-id="362e5-398">1</span><span class="sxs-lookup"><span data-stu-id="362e5-398">1</span></span>|<span data-ttu-id="362e5-399">0</span><span class="sxs-lookup"><span data-stu-id="362e5-399">0</span></span>|  
  
 <span data-ttu-id="362e5-400">По умолчанию результаты сортируются по вероятности.</span><span class="sxs-lookup"><span data-stu-id="362e5-400">By default, the results are ranked by probability.</span></span> <span data-ttu-id="362e5-401">По результатам видно, что кластер 2, хоть его вероятность и не очень высока, все же наиболее подходит для новой точки данных.</span><span class="sxs-lookup"><span data-stu-id="362e5-401">The results tell you that, even though the probability for Cluster 2 is fairly low, Cluster 2 is still the best fit for the new data point.</span></span>  
  
 <span data-ttu-id="362e5-402">**Примечание.** Дополнительный столбец, `$DISTANCE`, показывает расстояние от точки данных до кластера.</span><span class="sxs-lookup"><span data-stu-id="362e5-402">**Note** The additional column, `$DISTANCE`, represents the distance from the data point to the cluster.</span></span> <span data-ttu-id="362e5-403">По умолчанию в алгоритме кластеризации [!INCLUDE[msCoName](../../includes/msconame-md.md)] применяется масштабируемая максимизация ожидания. Каждой точке данных назначается несколько кластеров, а затем они сортируются по вероятности.</span><span class="sxs-lookup"><span data-stu-id="362e5-403">By default, the [!INCLUDE[msCoName](../../includes/msconame-md.md)] Clustering Algorithm uses scalable EM clustering, which assigns multiple clusters to each data point and ranks the possible clusters.</span></span>  <span data-ttu-id="362e5-404">Однако если модель кластеризации создавалась с помощью алгоритма К-средних, то каждой точке данных можно назначить только один кластер, а запрос вернет только одну строку.</span><span class="sxs-lookup"><span data-stu-id="362e5-404">However, if you create your clustering model using the K-means algorithm, only one cluster can be assigned to each data point, and this query would return only one row.</span></span> <span data-ttu-id="362e5-405">Для интерпретации результатов функции [PredictCaseLikelihood (расширения интеллектуального анализа данных)](/sql/dmx/predictcaselikelihood-dmx) можно включать в запрос столбцы базовой структуры.</span><span class="sxs-lookup"><span data-stu-id="362e5-405">Understanding these differences is necessary to interpret the results of the [PredictCaseLikelihood &#40;DMX&#41;](/sql/dmx/predictcaselikelihood-dmx) function.</span></span> <span data-ttu-id="362e5-406">Дополнительные сведения о различиях между кластеризацией с помощью масштабируемой максимизации ожидания и с помощью К-средних см. в разделе [Технический справочник по алгоритму кластеризации (Майкрософт)](microsoft-clustering-algorithm-technical-reference.md).</span><span class="sxs-lookup"><span data-stu-id="362e5-406">For more information about the differences between EM and K-means clustering, see [Microsoft Clustering Algorithm Technical Reference](microsoft-clustering-algorithm-technical-reference.md).</span></span>  
  
 [<span data-ttu-id="362e5-407">Вернуться к началу</span><span class="sxs-lookup"><span data-stu-id="362e5-407">Return to Top</span></span>](#bkmk_top2)  
  
## <a name="function-list"></a><span data-ttu-id="362e5-408">Список функций</span><span class="sxs-lookup"><span data-stu-id="362e5-408">Function List</span></span>  
 <span data-ttu-id="362e5-409">Все алгоритмы [!INCLUDE[msCoName](../../includes/msconame-md.md)] поддерживают общий набор функций.</span><span class="sxs-lookup"><span data-stu-id="362e5-409">All [!INCLUDE[msCoName](../../includes/msconame-md.md)] algorithms support a common set of functions.</span></span> <span data-ttu-id="362e5-410">Однако модели, построенные с помощью алгоритма кластеризации [!INCLUDE[msCoName](../../includes/msconame-md.md)] , поддерживают дополнительные функции, перечисленные в следующей таблице:</span><span class="sxs-lookup"><span data-stu-id="362e5-410">However, models that are built by using the [!INCLUDE[msCoName](../../includes/msconame-md.md)] Clustering algorithm support the additional functions that are listed in the following table.</span></span>  
  
|||  
|-|-|  
|<span data-ttu-id="362e5-411">прогнозирующую функцию</span><span class="sxs-lookup"><span data-stu-id="362e5-411">Prediction Function</span></span>|<span data-ttu-id="362e5-412">Использование</span><span class="sxs-lookup"><span data-stu-id="362e5-412">Usage</span></span>|  
|[<span data-ttu-id="362e5-413">Cluster (расширения интеллектуального анализа данных)</span><span class="sxs-lookup"><span data-stu-id="362e5-413">Cluster &#40;DMX&#41;</span></span>](/sql/dmx/cluster-dmx)|<span data-ttu-id="362e5-414">Возвращает кластер, который с наибольшей вероятностью содержит входной вариант.</span><span class="sxs-lookup"><span data-stu-id="362e5-414">Returns the cluster that is most likely to contain the input case.</span></span>|  
|[<span data-ttu-id="362e5-415">ClusterDistance (расширения интеллектуального анализа данных)</span><span class="sxs-lookup"><span data-stu-id="362e5-415">ClusterDistance &#40;DMX&#41;</span></span>](/sql/dmx/clusterdistance-dmx)|<span data-ttu-id="362e5-416">Возвращает расстояние до входного варианта от указанного кластера, а если кластер не указан, то расстояние до входного варианта от наиболее вероятного кластера.</span><span class="sxs-lookup"><span data-stu-id="362e5-416">Returns the distance of the input case from the specified cluster, or if no cluster is specified, the distance of the input case from the most likely cluster.</span></span><br /><br /> <span data-ttu-id="362e5-417">Возвращает вероятность того, что входной вариант принадлежит определенному кластеру.</span><span class="sxs-lookup"><span data-stu-id="362e5-417">Returns the probability that the input case belongs to the specified cluster.</span></span>|  
|[<span data-ttu-id="362e5-418">ClusterProbability (расширения интеллектуального анализа данных)</span><span class="sxs-lookup"><span data-stu-id="362e5-418">ClusterProbability &#40;DMX&#41;</span></span>](/sql/dmx/clusterprobability-dmx)|<span data-ttu-id="362e5-419">Возвращает вероятность того, что входной вариант принадлежит определенному кластеру.</span><span class="sxs-lookup"><span data-stu-id="362e5-419">Returns the probability that the input case belongs to the specified cluster.</span></span>|  
|[<span data-ttu-id="362e5-420">IsDescendant (расширения интеллектуального анализа данных)</span><span class="sxs-lookup"><span data-stu-id="362e5-420">IsDescendant &#40;DMX&#41;</span></span>](/sql/dmx/isdescendant-dmx)|<span data-ttu-id="362e5-421">Определяет, является ли узел дочерним для другого узла модели.</span><span class="sxs-lookup"><span data-stu-id="362e5-421">Determines whether one node is a child of another node in the model.</span></span>|  
|[<span data-ttu-id="362e5-422">IsInNode (расширения интеллектуального анализа данных)</span><span class="sxs-lookup"><span data-stu-id="362e5-422">IsInNode &#40;DMX&#41;</span></span>](/sql/dmx/isinnode-dmx)|<span data-ttu-id="362e5-423">Указывает, содержит ли заданный узел текущий вариант.</span><span class="sxs-lookup"><span data-stu-id="362e5-423">Indicates whether the specified node contains the current case.</span></span>|  
|[<span data-ttu-id="362e5-424">PredictAdjustedProbability (расширения интеллектуального анализа данных)</span><span class="sxs-lookup"><span data-stu-id="362e5-424">PredictAdjustedProbability &#40;DMX&#41;</span></span>](/sql/dmx/predictadjustedprobability-dmx)|<span data-ttu-id="362e5-425">Возвращает взвешенную вероятность.</span><span class="sxs-lookup"><span data-stu-id="362e5-425">Returns the weighted probability.</span></span>|  
|[<span data-ttu-id="362e5-426">PredictAssociation (расширения интеллектуального анализа данных)</span><span class="sxs-lookup"><span data-stu-id="362e5-426">PredictAssociation &#40;DMX&#41;</span></span>](/sql/dmx/predictassociation-dmx)|<span data-ttu-id="362e5-427">Прогнозирует вхождение в ассоциативном наборе данных.</span><span class="sxs-lookup"><span data-stu-id="362e5-427">Predicts membership in an associative dataset.</span></span>|  
|[<span data-ttu-id="362e5-428">PredictCaseLikelihood (расширения интеллектуального анализа данных)</span><span class="sxs-lookup"><span data-stu-id="362e5-428">PredictCaseLikelihood &#40;DMX&#41;</span></span>](/sql/dmx/predictcaselikelihood-dmx)|<span data-ttu-id="362e5-429">Возвращает достоверность, с которой входной вариант соответствует существующей модели.</span><span class="sxs-lookup"><span data-stu-id="362e5-429">Returns the likelihood that an input case will fit in the existing model.</span></span>|  
|[<span data-ttu-id="362e5-430">PredictHistogram (расширения интеллектуального анализа данных)</span><span class="sxs-lookup"><span data-stu-id="362e5-430">PredictHistogram &#40;DMX&#41;</span></span>](/sql/dmx/predicthistogram-dmx)|<span data-ttu-id="362e5-431">Возвращает таблицу значений, связанную с текущим прогнозируемым значением.</span><span class="sxs-lookup"><span data-stu-id="362e5-431">Returns a table of values related to the current predicted value.</span></span>|  
|[<span data-ttu-id="362e5-432">PredictNodeId (расширения интеллектуального анализа данных)</span><span class="sxs-lookup"><span data-stu-id="362e5-432">PredictNodeId &#40;DMX&#41;</span></span>](/sql/dmx/predictnodeid-dmx)|<span data-ttu-id="362e5-433">Возвращает параметр Node_ID для каждого случая.</span><span class="sxs-lookup"><span data-stu-id="362e5-433">Returns the Node_ID for each case.</span></span>|  
|[<span data-ttu-id="362e5-434">PredictProbability (расширения интеллектуального анализа данных)</span><span class="sxs-lookup"><span data-stu-id="362e5-434">PredictProbability &#40;DMX&#41;</span></span>](/sql/dmx/predictprobability-dmx)|<span data-ttu-id="362e5-435">Возвращает вероятность для прогнозируемого значения.</span><span class="sxs-lookup"><span data-stu-id="362e5-435">Returns probability for the predicted value.</span></span>|  
|[<span data-ttu-id="362e5-436">PredictStdev (расширения интеллектуального анализа данных)</span><span class="sxs-lookup"><span data-stu-id="362e5-436">PredictStdev &#40;DMX&#41;</span></span>](/sql/dmx/predictstdev-dmx)|<span data-ttu-id="362e5-437">Возвращает прогнозируемое среднеквадратичное отклонение для заданного столбца.</span><span class="sxs-lookup"><span data-stu-id="362e5-437">Returns the predicted standard deviation for the specified column.</span></span>|  
|[<span data-ttu-id="362e5-438">PredictSupport (расширения интеллектуального анализа данных)</span><span class="sxs-lookup"><span data-stu-id="362e5-438">PredictSupport &#40;DMX&#41;</span></span>](/sql/dmx/predictsupport-dmx)|<span data-ttu-id="362e5-439">Возвращает опорное значение для указанного состояния.</span><span class="sxs-lookup"><span data-stu-id="362e5-439">Returns the support value for a specified state.</span></span>|  
|[<span data-ttu-id="362e5-440">PredictVariance (расширения интеллектуального анализа данных)</span><span class="sxs-lookup"><span data-stu-id="362e5-440">PredictVariance &#40;DMX&#41;</span></span>](/sql/dmx/predictvariance-dmx)|<span data-ttu-id="362e5-441">Возвращает дисперсию указанного столбца.</span><span class="sxs-lookup"><span data-stu-id="362e5-441">Returns the variance of a specified column.</span></span>|  
  
 <span data-ttu-id="362e5-442">Синтаксис отдельных функций см. в статье [Справочник по функциям расширений интеллектуального анализа данных (расширения интеллектуального анализа данных)](/sql/dmx/data-mining-extensions-dmx-function-reference).</span><span class="sxs-lookup"><span data-stu-id="362e5-442">For the syntax of specific functions, see [Data Mining Extensions &#40;DMX&#41; Function Reference](/sql/dmx/data-mining-extensions-dmx-function-reference).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="362e5-443">См. также:</span><span class="sxs-lookup"><span data-stu-id="362e5-443">See Also</span></span>  
 <span data-ttu-id="362e5-444">[Запросы интеллектуального анализа данных](data-mining-queries.md) </span><span class="sxs-lookup"><span data-stu-id="362e5-444">[Data Mining Queries](data-mining-queries.md) </span></span>  
 <span data-ttu-id="362e5-445">[Технический справочник по алгоритму кластеризации (Майкрософт)](microsoft-clustering-algorithm-technical-reference.md) </span><span class="sxs-lookup"><span data-stu-id="362e5-445">[Microsoft Clustering Algorithm Technical Reference](microsoft-clustering-algorithm-technical-reference.md) </span></span>  
 [<span data-ttu-id="362e5-446">Алгоритм кластеризации (Майкрософт)</span><span class="sxs-lookup"><span data-stu-id="362e5-446">Microsoft Clustering Algorithm</span></span>](microsoft-clustering-algorithm.md)  
  
  
