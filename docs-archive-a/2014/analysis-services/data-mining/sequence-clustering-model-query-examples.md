---
title: Примеры запросов к модели кластеризации последовательностей | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
helpviewer_keywords:
- sequence clustering algorithms [Analysis Services]
- content queries [DMX]
- sequence [Analysis Services]
ms.assetid: 64bebcdc-70ab-43fb-8d40-57672a126602
author: minewiskan
ms.author: owend
ms.openlocfilehash: d56924f27f7986861895cf4fff21fa758cc47070
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87654603"
---
# <a name="sequence-clustering-model-query-examples"></a><span data-ttu-id="1abec-102">Примеры запросов к модели кластеризации последовательностей</span><span class="sxs-lookup"><span data-stu-id="1abec-102">Sequence Clustering Model Query Examples</span></span>
  <span data-ttu-id="1abec-103">К модели интеллектуального анализа данных можно создать два вида запросов: запросы содержимого, возвращающие подробные сведения об информации, содержащейся в модели, и прогнозирующие запросы, использующие закономерности, содержащиеся в модели, для прогнозирования на основе новых данных.</span><span class="sxs-lookup"><span data-stu-id="1abec-103">When you create a query against a data mining model, you can create either a content query, which provides details about the information stored in the model, or you can create a prediction query, which uses the patterns in the model to make predictions based on new data that you provide.</span></span> <span data-ttu-id="1abec-104">Что касается модели кластеризации последовательностей, то запросы содержимого обычно возвращают дополнительную информацию об обнаруженных кластерах или о переходах в этих кластерах.</span><span class="sxs-lookup"><span data-stu-id="1abec-104">For a sequence clustering model, content queries typically provide additional details about the clusters that were found, or the transitions within those clusters.</span></span> <span data-ttu-id="1abec-105">Запрос также позволяет получить метаданные, описывающие модель.</span><span class="sxs-lookup"><span data-stu-id="1abec-105">You can also retrieve metadata about the model by using a query.</span></span>  
  
 <span data-ttu-id="1abec-106">Прогнозирующие запросы на модели кластеризации последовательностей обычно позволяют делать рекомендации, основанные либо на последовательностях и переходах, либо на не связанных с последовательностью атрибутах, включенных в модель, либо на сочетании связанных и не связанных с последовательностью атрибутов.</span><span class="sxs-lookup"><span data-stu-id="1abec-106">Prediction queries on a sequence clustering model typically make recommendations based either on the sequences and transitions, on non-sequence attributes that were included in the model, or on a combination of sequence and non-sequence attributes.</span></span>  
  
 <span data-ttu-id="1abec-107">Этот раздел посвящен созданию запросов для моделей, основанных на алгоритме кластеризации последовательностей Майкрософт.</span><span class="sxs-lookup"><span data-stu-id="1abec-107">This section explains how to create queries for models that are based on the Microsoft Sequence Clustering algorithm.</span></span> <span data-ttu-id="1abec-108">Общие сведения о создании запросов см. в разделе [Запросы интеллектуального анализа данных](data-mining-queries.md).</span><span class="sxs-lookup"><span data-stu-id="1abec-108">For general information about creating queries, see [Data Mining Queries](data-mining-queries.md).</span></span>  
  
 <span data-ttu-id="1abec-109">**Запросы содержимого**</span><span class="sxs-lookup"><span data-stu-id="1abec-109">**Content Queries**</span></span>  
  
 [<span data-ttu-id="1abec-110">Использование набора строк схемы интеллектуального анализа данных для определения параметров модели</span><span class="sxs-lookup"><span data-stu-id="1abec-110">Using the Data Mining Schema Rowset to return model parameters</span></span>](#bkmk_Query1)  
  
 [<span data-ttu-id="1abec-111">Получение списка последовательностей для состояния</span><span class="sxs-lookup"><span data-stu-id="1abec-111">Getting a list of sequences for a state</span></span>](#bkmk_Query2)  
  
 [<span data-ttu-id="1abec-112">Использование системных хранимых процедур</span><span class="sxs-lookup"><span data-stu-id="1abec-112">Using system stored procedures</span></span>](#bkmk_Query3)  
  
 <span data-ttu-id="1abec-113">**Прогнозирующие запросы**</span><span class="sxs-lookup"><span data-stu-id="1abec-113">**Prediction Queries**</span></span>  
  
 [<span data-ttu-id="1abec-114">Прогноз следующего состояния или состояний</span><span class="sxs-lookup"><span data-stu-id="1abec-114">Predict next state or states</span></span>](#bkmk_Query4)  
  
##  <a name="finding-information-about-the-sequence-clustering-model"></a><a name="bkmk_ContentQueries"></a><span data-ttu-id="1abec-115">Поиск сведений о модели кластеризации последовательностей</span><span class="sxs-lookup"><span data-stu-id="1abec-115">Finding Information about the Sequence Clustering Model</span></span>  
 <span data-ttu-id="1abec-116">Для создания осмысленных запросов к содержимому модели интеллектуального анализа данных необходимо понимать структуру содержимого модели и знать, какие сведения содержатся в узле каждого типа.</span><span class="sxs-lookup"><span data-stu-id="1abec-116">To create meaningful queries on the content of a mining model, you must understand the structure of the model content, and which node types store what kind of information.</span></span> <span data-ttu-id="1abec-117">Дополнительные сведения см. в разделе [Содержимое моделей интеллектуального анализа данных для моделей кластеризации последовательностей (службы Analysis Services — интеллектуальный анализ данных)](mining-model-content-for-sequence-clustering-models.md).</span><span class="sxs-lookup"><span data-stu-id="1abec-117">For more information, see [Mining Model Content for Sequence Clustering Models &#40;Analysis Services - Data Mining&#41;](mining-model-content-for-sequence-clustering-models.md).</span></span>  
  
###  <a name="sample-query-1-using-the-data-mining-schema-rowset-to-return-model-parameters"></a><a name="bkmk_Query1"></a><span data-ttu-id="1abec-118">Образец запроса 1. Использование набора строк схемы интеллектуального анализа данных для возврата параметров модели</span><span class="sxs-lookup"><span data-stu-id="1abec-118">Sample Query 1: Using the Data Mining Schema Rowset to Return Model Parameters</span></span>  
 <span data-ttu-id="1abec-119">Используя запросы к набору строк схемы интеллектуального анализа данных, можно получать различную информацию о модели — в частности, метаданные модели, дату и время ее создания и последней обработки, имя структуры интеллектуального анализа данных, на которой основана данная модель, и имя столбца, использованного в качестве прогнозируемого атрибута.</span><span class="sxs-lookup"><span data-stu-id="1abec-119">By querying the data mining schema rowset, you can find various kinds of information about the model, including basic metadata, the date and time that the model was created and last processed, the name of the mining structure that the model is based on, and the column used as the predictable attribute.</span></span>  
  
 <span data-ttu-id="1abec-120">Следующий запрос возвращает параметры, которые использовались для построения и обучения модели, `[Sequence Clustering]`.</span><span class="sxs-lookup"><span data-stu-id="1abec-120">The following query returns the parameters that were used to build and train the model, `[Sequence Clustering]`.</span></span> <span data-ttu-id="1abec-121">Эта модель создается в ходе занятия 5 учебника [Basic Data Mining Tutorial](../../tutorials/basic-data-mining-tutorial.md).</span><span class="sxs-lookup"><span data-stu-id="1abec-121">You can create this model in Lesson 5 of the [Basic Data Mining Tutorial](../../tutorials/basic-data-mining-tutorial.md).</span></span>  
  
```  
SELECT MINING_PARAMETERS   
from $system.DMSCHEMA_MINING_MODELS  
WHERE MODEL_NAME = 'Sequence Clustering'  
```  
  
 <span data-ttu-id="1abec-122">Пример результатов:</span><span class="sxs-lookup"><span data-stu-id="1abec-122">Example results:</span></span>  
  
|<span data-ttu-id="1abec-123">MINING_PARAMETERS</span><span class="sxs-lookup"><span data-stu-id="1abec-123">MINING_PARAMETERS</span></span>|  
|------------------------|  
|<span data-ttu-id="1abec-124">CLUSTER_COUNT=15,MINIMUM_SUPPORT=10,MAXIMUM_STATES=100,MAXIMUM_SEQUENCE_STATES=64</span><span class="sxs-lookup"><span data-stu-id="1abec-124">CLUSTER_COUNT=15,MINIMUM_SUPPORT=10,MAXIMUM_STATES=100,MAXIMUM_SEQUENCE_STATES=64</span></span>|  
  
 <span data-ttu-id="1abec-125">Следует заметить, что эта модель создавалась с использованием для параметра CLUSTER_COUNT значения по умолчанию, 10.</span><span class="sxs-lookup"><span data-stu-id="1abec-125">Note that this model was built by using the default value of 10 for CLUSTER_COUNT.</span></span> <span data-ttu-id="1abec-126">При задании ненулевого числа кластеров для параметра CLUSTER_COUNT алгоритм рассматривает это число как указание приблизительного числа кластеров, которое нужно найти.</span><span class="sxs-lookup"><span data-stu-id="1abec-126">When you specify a non-zero number of clusters for CLUSTER_COUNT, the algorithm treats this number as a hint for the approximate number of clusters to find.</span></span> <span data-ttu-id="1abec-127">Однако в процессе анализа алгоритм может обнаружить меньшее или большее количество кластеров.</span><span class="sxs-lookup"><span data-stu-id="1abec-127">However, in the process of analysis, the algorithm may find more or fewer clusters.</span></span> <span data-ttu-id="1abec-128">В данном случае алгоритм обнаружил, что обучающие данные лучше всего разделить на 15 кластеров.</span><span class="sxs-lookup"><span data-stu-id="1abec-128">In this case, the algorithm found that 15 clusters best fit the training data.</span></span> <span data-ttu-id="1abec-129">Таким образом, список значений параметров завершенной модели содержит число кластеров, найденное алгоритмом, а не значение, которое было передано при создании модели.</span><span class="sxs-lookup"><span data-stu-id="1abec-129">Therefore, the list of parameter values for the completed model reports the count of clusters as determined by the algorithm, not the value passed in when creating the model.</span></span>  
  
 <span data-ttu-id="1abec-130">Как это отличается от случая, когда алгоритму позволяют определить наилучшее количество кластеров?</span><span class="sxs-lookup"><span data-stu-id="1abec-130">How does this behavior differ from letting the algorithm determine the best number of clusters?</span></span> <span data-ttu-id="1abec-131">В качестве эксперимента можно создать другую модель кластеризации на основе тех же данных, но задать для параметра CLUSTER_COUNT значение 0.</span><span class="sxs-lookup"><span data-stu-id="1abec-131">As an experiment, you can create another clustering model that uses this same data, but set CLUSTER_COUNT to 0.</span></span> <span data-ttu-id="1abec-132">Если это сделать, алгоритм обнаружит 32 кластера.</span><span class="sxs-lookup"><span data-stu-id="1abec-132">When you do this, the algorithm detects 32 clusters.</span></span> <span data-ttu-id="1abec-133">Значит, используя для параметра CLUSTER_COUNT значение по умолчанию, 10, можно ограничить количество результатов.</span><span class="sxs-lookup"><span data-stu-id="1abec-133">Therefore, by using the default value of 10 for CLUSTER_COUNT, you constrain the number of results.</span></span>  
  
 <span data-ttu-id="1abec-134">Значение 10 используется по умолчанию, потому что снижение количества кластеров упрощает просмотр и понимание группирований данных для большинства пользователей.</span><span class="sxs-lookup"><span data-stu-id="1abec-134">The value of 10 is used by default because reducing the number of clusters makes it easier for most people to browse and understand groupings in the data.</span></span> <span data-ttu-id="1abec-135">Однако все модели и все наборы данных разные.</span><span class="sxs-lookup"><span data-stu-id="1abec-135">However, each model and set of data is different.</span></span> <span data-ttu-id="1abec-136">Можно поэкспериментировать с различным количеством кластеров, чтобы увидеть, какое значение параметра дает наиболее точную модель.</span><span class="sxs-lookup"><span data-stu-id="1abec-136">You may wish to experiment with different numbers of clusters to see which parameter value yields the most accurate model.</span></span>  
  
###  <a name="sample-query-2-getting-a-list-of-sequences-for-a-state"></a><a name="bkmk_Query2"></a><span data-ttu-id="1abec-137">Образец запроса 2. Получение списка последовательностей для состояния</span><span class="sxs-lookup"><span data-stu-id="1abec-137">Sample Query 2: Getting a List of Sequences for a State</span></span>  
 <span data-ttu-id="1abec-138">Содержимое модели интеллектуального анализа данных хранит последовательности, обнаруженные в обучающих данных, как первое состояние, сопряженное со списком всех связанных вторых состояний.</span><span class="sxs-lookup"><span data-stu-id="1abec-138">The mining model content stores the sequences that are found in the training data as a first state coupled with a list of all related second states.</span></span> <span data-ttu-id="1abec-139">Первое состояние используется как метка для последовательности, а связанные с ним вторые состояния называются переходами.</span><span class="sxs-lookup"><span data-stu-id="1abec-139">The first state is used as the label for the sequence, and the related second states are called transitions.</span></span>  
  
 <span data-ttu-id="1abec-140">Например, следующий запрос возвращает полный список первых состояний модели до группирования последовательностей в кластеры.</span><span class="sxs-lookup"><span data-stu-id="1abec-140">For example, the following query returns the complete list of first states in the model, before the sequences are grouped into clusters.</span></span>  <span data-ttu-id="1abec-141">Этот список можно получить, вернув список последовательностей (NODE_TYPE = 13), родителем которых является корневой узел модели (PARENT_UNIQUE_NAME = 0).</span><span class="sxs-lookup"><span data-stu-id="1abec-141">You can get this list by returning the list of sequences (NODE_TYPE = 13) that have the model root node as parent (PARENT_UNIQUE_NAME = 0).</span></span> <span data-ttu-id="1abec-142">Применение ключевого слова FLATTENED позволяет облегчить чтение результатов.</span><span class="sxs-lookup"><span data-stu-id="1abec-142">The FLATTENED keyword makes the results easier to read.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="1abec-143">Имена столбцов (PARENT_UNIQUE_NAME, Support и Probability) необходимо заключать в скобки, чтобы они отличались от одноименных зарезервированных ключевых слов.</span><span class="sxs-lookup"><span data-stu-id="1abec-143">The name of the columns, PARENT_UNIQUE_NAME, Support, and Probability must be enclosed in brackets to distinguish them from the reserved keywords of the same name.</span></span>  
  
```  
SELECT FLATTENED NODE_UNIQUE_NAME,  
(SELECT ATTRIBUTE_VALUE AS [Product 1],  
[Support] AS [Sequence Support],   
[Probability] AS [Sequence Probability]  
FROM NODE_DISTRIBUTION) AS t  
FROM [Sequence Clustering].CONTENT  
WHERE NODE_TYPE = 13  
AND [PARENT_UNIQUE_NAME] = 0  
```  
  
 <span data-ttu-id="1abec-144">Частичные результаты:</span><span class="sxs-lookup"><span data-stu-id="1abec-144">Partial results:</span></span>  
  
|<span data-ttu-id="1abec-145">NODE_UNIQUE_NAME</span><span class="sxs-lookup"><span data-stu-id="1abec-145">NODE_UNIQUE_NAME</span></span>|<span data-ttu-id="1abec-146">Product 1</span><span class="sxs-lookup"><span data-stu-id="1abec-146">Product 1</span></span>|<span data-ttu-id="1abec-147">Мощность несущего множества последовательности</span><span class="sxs-lookup"><span data-stu-id="1abec-147">Sequence Support</span></span>|<span data-ttu-id="1abec-148">Вероятность последовательности</span><span class="sxs-lookup"><span data-stu-id="1abec-148">Sequence Probability</span></span>|  
|------------------------|---------------|----------------------|--------------------------|  
|<span data-ttu-id="1abec-149">1081327</span><span class="sxs-lookup"><span data-stu-id="1abec-149">1081327</span></span>|<span data-ttu-id="1abec-150">Missing</span><span class="sxs-lookup"><span data-stu-id="1abec-150">Missing</span></span>|<span data-ttu-id="1abec-151">0</span><span class="sxs-lookup"><span data-stu-id="1abec-151">0</span></span>|#######|  
|<span data-ttu-id="1abec-152">1081327</span><span class="sxs-lookup"><span data-stu-id="1abec-152">1081327</span></span>|<span data-ttu-id="1abec-153">Универсальная подставка для велосипеда</span><span class="sxs-lookup"><span data-stu-id="1abec-153">All-Purpose Bike Stand</span></span>|<span data-ttu-id="1abec-154">17</span><span class="sxs-lookup"><span data-stu-id="1abec-154">17</span></span>|<span data-ttu-id="1abec-155">0,00111</span><span class="sxs-lookup"><span data-stu-id="1abec-155">0.00111</span></span>|  
|<span data-ttu-id="1abec-156">1081327</span><span class="sxs-lookup"><span data-stu-id="1abec-156">1081327</span></span>|<span data-ttu-id="1abec-157">Мойка велосипедная</span><span class="sxs-lookup"><span data-stu-id="1abec-157">Bike Wash</span></span>|<span data-ttu-id="1abec-158">64</span><span class="sxs-lookup"><span data-stu-id="1abec-158">64</span></span>|<span data-ttu-id="1abec-159">0,00418</span><span class="sxs-lookup"><span data-stu-id="1abec-159">0.00418</span></span>|  
|<span data-ttu-id="1abec-160">1081327</span><span class="sxs-lookup"><span data-stu-id="1abec-160">1081327</span></span>|<span data-ttu-id="1abec-161">(строки с 4 по 36 пропущены)</span><span class="sxs-lookup"><span data-stu-id="1abec-161">(rows 4-36 omitted)</span></span>|||  
|<span data-ttu-id="1abec-162">1081327</span><span class="sxs-lookup"><span data-stu-id="1abec-162">1081327</span></span>|<span data-ttu-id="1abec-163">Женские шорты Mountain</span><span class="sxs-lookup"><span data-stu-id="1abec-163">Women's Mountain Shorts</span></span>|<span data-ttu-id="1abec-164">506</span><span class="sxs-lookup"><span data-stu-id="1abec-164">506</span></span>|<span data-ttu-id="1abec-165">0,03307</span><span class="sxs-lookup"><span data-stu-id="1abec-165">0.03307</span></span>|  
  
 <span data-ttu-id="1abec-166">Список последовательностей в модели всегда сортируется в алфавитном порядке по возрастанию.</span><span class="sxs-lookup"><span data-stu-id="1abec-166">The list of sequences in the model is always sorted alphabetically in ascending order.</span></span> <span data-ttu-id="1abec-167">Порядок последовательностей важен, потому что по порядковому номеру последовательности можно найти связанные с ней переходы.</span><span class="sxs-lookup"><span data-stu-id="1abec-167">The ordering of the sequences is important because you can find the related transitions by looking at the order number of the sequence.</span></span> <span data-ttu-id="1abec-168">Значение `Missing` всегда соответствует переходу 0.</span><span class="sxs-lookup"><span data-stu-id="1abec-168">The `Missing` value is always transition 0.</span></span>  
  
 <span data-ttu-id="1abec-169">Например, в результатах предыдущего запроса продукт «Женские шорты Mountain» имеет в модели номер последовательности 37.</span><span class="sxs-lookup"><span data-stu-id="1abec-169">For example, in the previous results, the product "Women's Mountain Shorts" is the sequence number 37 in the model.</span></span> <span data-ttu-id="1abec-170">Эту информацию можно использовать для просмотра всех продуктов, которые когда-либо были куплены после продукта «Женские шорты Mountain».</span><span class="sxs-lookup"><span data-stu-id="1abec-170">You can use that information to view all of the products that were ever purchased after "Women's Mountain Shorts."</span></span>  
  
 <span data-ttu-id="1abec-171">Для этого сначала применяется ссылка на значение параметра NODE_UNIQUE_NAME, возвращенное в предыдущем запросе, для получения идентификатора узла, содержащего все последовательности для модели.</span><span class="sxs-lookup"><span data-stu-id="1abec-171">To do this, first, you reference the value returned for NODE_UNIQUE_NAME in the previous query, to get the ID of the node that contains all sequences for the model.</span></span> <span data-ttu-id="1abec-172">Это значение передается запросу как идентификатор родительского узла, чтобы получить только переходы, включенные в этот узел, который содержит список всех последовательностей модели.</span><span class="sxs-lookup"><span data-stu-id="1abec-172">You pass this value to the query as the ID of the parent node, to get only the transitions included in this node, which happens to contain a list of al sequences for the model.</span></span> <span data-ttu-id="1abec-173">Однако, если нужно увидеть список всех переходов для конкретного кластера, можно передать в него идентификатор узла кластера, чтобы увидеть только последовательности, связанные с данным кластером.</span><span class="sxs-lookup"><span data-stu-id="1abec-173">However, if you wanted to see the list of transitions for a specific cluster, you could pass in the ID of the cluster node, and see only the sequences associated with that cluster.</span></span>  
  
```  
SELECT NODE_UNIQUE_NAME  
FROM [Sequence Clustering].CONTENT  
WHERE NODE_DESCRIPTION = 'Transition row for sequence state 37'  
AND [PARENT_UNIQUE_NAME] = '1081327'  
```  
  
 <span data-ttu-id="1abec-174">Пример результатов:</span><span class="sxs-lookup"><span data-stu-id="1abec-174">Example results:</span></span>  
  
|<span data-ttu-id="1abec-175">NODE_UNIQUE_NAME</span><span class="sxs-lookup"><span data-stu-id="1abec-175">NODE_UNIQUE_NAME</span></span>|  
|------------------------|  
|<span data-ttu-id="1abec-176">1081365</span><span class="sxs-lookup"><span data-stu-id="1abec-176">1081365</span></span>|  
  
 <span data-ttu-id="1abec-177">Узел, представленный этим идентификатором, содержит список всех последовательностей, следующих за продуктом «Женские шорты Mountain», а также мощности их несущих множеств и вероятности.</span><span class="sxs-lookup"><span data-stu-id="1abec-177">The node represented by this ID contains a list of the sequences that follow the "Women's Mountain Shorts" product, together with the support and probability values.</span></span>  
  
```  
SELECT FLATTENED  
(SELECT ATTRIBUTE_VALUE AS Product2,  
[Support] AS [P2 Support],  
[Probability] AS [P2 Probability]  
FROM NODE_DISTRIBUTION) AS t  
FROM [Sequence Clustering].CONTENT  
WHERE NODE_UNIQUE_NAME = '1081365'  
```  
  
 <span data-ttu-id="1abec-178">Пример результатов:</span><span class="sxs-lookup"><span data-stu-id="1abec-178">Example results:</span></span>  
  
|<span data-ttu-id="1abec-179">t.Product2</span><span class="sxs-lookup"><span data-stu-id="1abec-179">t.Product2</span></span>|<span data-ttu-id="1abec-180">t.P2 Support</span><span class="sxs-lookup"><span data-stu-id="1abec-180">t.P2 Support</span></span>|<span data-ttu-id="1abec-181">t.P2 Probability</span><span class="sxs-lookup"><span data-stu-id="1abec-181">t.P2 Probability</span></span>|  
|----------------|------------------|----------------------|  
|<span data-ttu-id="1abec-182">Missing</span><span class="sxs-lookup"><span data-stu-id="1abec-182">Missing</span></span>|<span data-ttu-id="1abec-183">230,7419</span><span class="sxs-lookup"><span data-stu-id="1abec-183">230.7419</span></span>|<span data-ttu-id="1abec-184">0,456012</span><span class="sxs-lookup"><span data-stu-id="1abec-184">0.456012</span></span>|  
|<span data-ttu-id="1abec-185">Classic Vest</span><span class="sxs-lookup"><span data-stu-id="1abec-185">Classic Vest</span></span>|<span data-ttu-id="1abec-186">8,16129</span><span class="sxs-lookup"><span data-stu-id="1abec-186">8.16129</span></span>|<span data-ttu-id="1abec-187">0,016129</span><span class="sxs-lookup"><span data-stu-id="1abec-187">0.016129</span></span>|  
|<span data-ttu-id="1abec-188">Велосипедная шапочка</span><span class="sxs-lookup"><span data-stu-id="1abec-188">Cycling Cap</span></span>|<span data-ttu-id="1abec-189">60,83871</span><span class="sxs-lookup"><span data-stu-id="1abec-189">60.83871</span></span>|<span data-ttu-id="1abec-190">0,120235</span><span class="sxs-lookup"><span data-stu-id="1abec-190">0.120235</span></span>|  
|<span data-ttu-id="1abec-191">Half-Finger Gloves</span><span class="sxs-lookup"><span data-stu-id="1abec-191">Half-Finger Gloves</span></span>|<span data-ttu-id="1abec-192">30,41935</span><span class="sxs-lookup"><span data-stu-id="1abec-192">30.41935</span></span>|<span data-ttu-id="1abec-193">0,060117</span><span class="sxs-lookup"><span data-stu-id="1abec-193">0.060117</span></span>|  
|<span data-ttu-id="1abec-194">Кофта с длинными рукавами и эмблемой</span><span class="sxs-lookup"><span data-stu-id="1abec-194">Long-Sleeve Logo Jersey</span></span>|<span data-ttu-id="1abec-195">86,80645</span><span class="sxs-lookup"><span data-stu-id="1abec-195">86.80645</span></span>|<span data-ttu-id="1abec-196">0,171554</span><span class="sxs-lookup"><span data-stu-id="1abec-196">0.171554</span></span>|  
|<span data-ttu-id="1abec-197">Racing Socks</span><span class="sxs-lookup"><span data-stu-id="1abec-197">Racing Socks</span></span>|<span data-ttu-id="1abec-198">28,93548</span><span class="sxs-lookup"><span data-stu-id="1abec-198">28.93548</span></span>|<span data-ttu-id="1abec-199">0,057185</span><span class="sxs-lookup"><span data-stu-id="1abec-199">0.057185</span></span>|  
|<span data-ttu-id="1abec-200">Short-Sleeve Classic Jersey</span><span class="sxs-lookup"><span data-stu-id="1abec-200">Short-Sleeve Classic Jersey</span></span>|<span data-ttu-id="1abec-201">60,09677</span><span class="sxs-lookup"><span data-stu-id="1abec-201">60.09677</span></span>|<span data-ttu-id="1abec-202">0,118768</span><span class="sxs-lookup"><span data-stu-id="1abec-202">0.118768</span></span>|  
  
 <span data-ttu-id="1abec-203">Следует заметить, что мощность несущего множества для различных последовательностей, связанных с продуктом «Women's Mountain Shorts», в данной модели равна 506.</span><span class="sxs-lookup"><span data-stu-id="1abec-203">Note that support for the various sequences related to Women's Mountain Shorts is 506 in the model.</span></span> <span data-ttu-id="1abec-204">Сумма мощностей множества значений для перехода также равна 506.</span><span class="sxs-lookup"><span data-stu-id="1abec-204">The support values for the transitions also add up to 506.</span></span> <span data-ttu-id="1abec-205">Однако эти числа не целые, что кажется довольно странным, поскольку мощность множества интуитивно представляется просто как количество вариантов, содержащих каждый переход.</span><span class="sxs-lookup"><span data-stu-id="1abec-205">However, the numbers are not whole numbers, which seems a bit odd if you expect support to simply represent a count of cases that contain each transition.</span></span> <span data-ttu-id="1abec-206">Однако метод создания кластеров учитывает частичное членство. Поэтому вероятность каждого перехода в кластере должна взвешиваться с помощью вероятности принадлежности к данному конкретному кластеру.</span><span class="sxs-lookup"><span data-stu-id="1abec-206">However, because the method for creating clusters calculates partial membership, the probability of any transition within a cluster must be weighted by its probability of belonging to that particular cluster.</span></span>  
  
 <span data-ttu-id="1abec-207">Допустим, кластеров четыре. Конкретная последовательность с вероятностью 40 % принадлежит к кластеру 1, с вероятностью 30 % — к кластеру 2, с вероятностью 20 % — к кластеру 3 и с вероятностью 10 % — к кластеру 4.</span><span class="sxs-lookup"><span data-stu-id="1abec-207">For example, if there are four clusters, a particular sequence might have a 40% chance of belonging to cluster 1, a 30% chance of belonging to cluster 2, a 20% chance of belonging to cluster 3, and a 10% chance of belonging to cluster 4.</span></span> <span data-ttu-id="1abec-208">После того как алгоритм определил кластер, которому, скорее всего, принадлежит данный переход, он взвешивает вероятности внутри кластера по априорной вероятности кластера.</span><span class="sxs-lookup"><span data-stu-id="1abec-208">After the algorithm determines the cluster that the transition is mostly likely to belong to, it weights the probabilities within the cluster by the cluster prior probability.</span></span>  
  
###  <a name="sample-query-3-using-system-stored-procedures"></a><a name="bkmk_Query3"></a><span data-ttu-id="1abec-209">Образец запроса 3. Использование системных хранимых процедур</span><span class="sxs-lookup"><span data-stu-id="1abec-209">Sample Query 3: Using System Stored Procedures</span></span>  
 <span data-ttu-id="1abec-210">По образцам запросов видно, что информация, хранимая в модели, сложна, и иногда для получения нужной информации приходится строить несколько запросов.</span><span class="sxs-lookup"><span data-stu-id="1abec-210">You can see from these query samples that the information stored in the model is complex, and that you might need to create multiple queries to get the information that you need.</span></span> <span data-ttu-id="1abec-211">Однако средство просмотра кластеризации последовательностей (Майкрософт) предоставляет мощный набор средств, позволяющий просматривать информацию, содержащуюся в модели кластеризации последовательностей, в графическом представлении. Это средство просмотра можно также использовать для запросов и детализации модели.</span><span class="sxs-lookup"><span data-stu-id="1abec-211">However, the Microsoft Sequence Clustering viewer provides a powerful set of tools for graphically browsing the information contained in a sequence clustering model, and you can also use the viewer to query and drill down into the model.</span></span>  
  
 <span data-ttu-id="1abec-212">В большинстве случаев информация, которая содержится в средстве просмотра кластеризации последовательностей (Майкрософт), создается посредством запросов к модели с помощью системных хранимых процедур служб Analysis Services.</span><span class="sxs-lookup"><span data-stu-id="1abec-212">In most cases, the information that is presented in the Microsoft Sequence Clustering viewer is created by using Analysis Services system stored procedures to query the model.</span></span> <span data-ttu-id="1abec-213">Эту информацию можно получить, создавая запросы расширений интеллектуального анализа данных к содержимому модели. Однако системные хранимые процедуры служб Analysis Services предоставляют более короткий и удобный путь для исследования и тестирования моделей.</span><span class="sxs-lookup"><span data-stu-id="1abec-213">You can write Data Mining Extensions (DMX) queries against the model content to retrieve the same information, but the Analysis Services system stored procedures provide a convenient shortcut when for exploration or for testing models.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="1abec-214">Системные хранимые процедуры служат для внутренней обработки на сервере и на клиентах, предоставляемых компанией Майкрософт для взаимодействия с сервером служб Analysis Services.</span><span class="sxs-lookup"><span data-stu-id="1abec-214">System stored procedures are used for internal processing by the server and by the clients that Microsoft provides for interacting with the Analysis Services server.</span></span> <span data-ttu-id="1abec-215">Поэтому компания Майкрософт оставляет за собой право в любое время изменить эти службы.</span><span class="sxs-lookup"><span data-stu-id="1abec-215">Therefore, Microsoft reserves the right to change them at any time.</span></span> <span data-ttu-id="1abec-216">Хотя их описание приводится в данном документе с информационными целями, их использование в рабочей среде не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="1abec-216">Although they are described here for your convenience, we do not support their use in a production environment.</span></span> <span data-ttu-id="1abec-217">Для обеспечения стабильности и совместимости рабочей среды нужно всегда создавать собственные запросы с помощью расширений интеллектуального анализа данных.</span><span class="sxs-lookup"><span data-stu-id="1abec-217">To ensure stability and compatibility in a production environment, you should always write your own queries by using DMX.</span></span>  
  
 <span data-ttu-id="1abec-218">В данном разделе приводятся некоторые образцы использования системных хранимых процедур для создания запросов к модели кластеризации последовательностей.</span><span class="sxs-lookup"><span data-stu-id="1abec-218">This section provides some samples of how to use the system stored procedures to create queries against a sequence clustering model:</span></span>  
  
#### <a name="cluster-profiles-and-sample-cases"></a><span data-ttu-id="1abec-219">Профили кластеров и образцы вариантов</span><span class="sxs-lookup"><span data-stu-id="1abec-219">Cluster Profiles and Sample Cases</span></span>  
 <span data-ttu-id="1abec-220">Вкладка «Профили кластеров» содержит список кластеров модели, размер каждого кластера и гистограмму, указывающую состояния, включенные в этот кластер.</span><span class="sxs-lookup"><span data-stu-id="1abec-220">The Cluster Profiles tab shows you a list of the clusters in the model, the size of each cluster, and a histogram that indicates the states included in the cluster.</span></span> <span data-ttu-id="1abec-221">Для получения той же информации можно использовать в запросах две системные хранимые процедуры:</span><span class="sxs-lookup"><span data-stu-id="1abec-221">There are two system stored procedures that you can use in queries to retrieve similar information:</span></span>  
  
-   <span data-ttu-id="1abec-222">`GetClusterProfile` возвращает характеристики кластера и всю информацию, которую можно найти в таблице NODE_DISTRIBUTION для данного кластера.</span><span class="sxs-lookup"><span data-stu-id="1abec-222">`GetClusterProfile` returns the characteristics of the cluster, with all the information that is found in the NODE_DISTRIBUTION table for the cluster.</span></span>  
  
-   <span data-ttu-id="1abec-223">`GetNodeGraph` возвращает узлы и ребра, которые можно использовать для создания математического представления кластеров в качестве диаграммы, подобной той, которая представлена на первой вкладке представления «Кластеризация последовательностей».</span><span class="sxs-lookup"><span data-stu-id="1abec-223">`GetNodeGraph` returns nodes and edges that can be used to construct a mathematical graph representation of the clusters, corresponding to what you see on the first tab of the Sequence Clustering view.</span></span> <span data-ttu-id="1abec-224">Узлы представляют собой кластеры, а ребра — веса или интенсивность.</span><span class="sxs-lookup"><span data-stu-id="1abec-224">The nodes are clusters, and the edges represent weights or strength.</span></span>  
  
 <span data-ttu-id="1abec-225">Далее приводится пример использования системной хранимой процедуры, `GetClusterProfiles`, для возврата всех кластеров модели с их профилями.</span><span class="sxs-lookup"><span data-stu-id="1abec-225">The following example illustrates how to use the system stored procedure, `GetClusterProfiles`, to return all of the clusters in the model, with their respective profiles.</span></span> <span data-ttu-id="1abec-226">Хранимая процедура исполняет ряд инструкций DMX, возвращающих полный набор профилей из модели.</span><span class="sxs-lookup"><span data-stu-id="1abec-226">This stored procedure executes a series of DMX statements that return the complete set of profiles in the model.</span></span> <span data-ttu-id="1abec-227">Однако для использования этой хранимой процедуры нужно знать адрес модели.</span><span class="sxs-lookup"><span data-stu-id="1abec-227">However, to use this stored procedure you must know the address of the model.</span></span>  
  
 `CALL System.Microsoft.AnalysisServices.System.DataMining.Clustering.GetClusterProfiles('Sequence Clustering', 2147483647, 0)`  
  
 <span data-ttu-id="1abec-228">Следующий пример демонстрирует получение профиля конкретного кластера, Cluster 12, с помощью системной хранимой процедуры `GetNodeGraph`, с передачей ей идентификатора кластера, который обычно совпадает с номером, содержащимся в имени кластера.</span><span class="sxs-lookup"><span data-stu-id="1abec-228">The following example illustrates how to retrieve the profile for a specific cluster, Cluster 12, by using the system stored procedure `GetNodeGraph`, and specifying the cluster ID, which is usually the same as the number in the cluster name.</span></span>  
  
```  
CALL System.Microsoft.AnalysisServices.System.DataMining.Clustering.GetNodeGraph('Sequence Clustering','12',0)  
```  
  
 <span data-ttu-id="1abec-229">Если опустить идентификатор кластера, как показано в следующем запросе, процедура `GetNodeGraph` вернет упорядоченный, преобразованный в плоский формат список всех профилей кластеров:</span><span class="sxs-lookup"><span data-stu-id="1abec-229">If you omit the cluster ID, as shown in the following query, `GetNodeGraph` returns an ordered, flattened list of all cluster profiles:</span></span>  
  
```  
CALL System.Microsoft.AnalysisServices.System.DataMining.Clustering.GetNodeGraph('Sequence Clustering','',0)  
```  
  
 <span data-ttu-id="1abec-230">Вкладка **Профили кластеров** также отображает гистограммы образцов вариантов модели.</span><span class="sxs-lookup"><span data-stu-id="1abec-230">The **Cluster Profile** tab also displays a histogram of model sample cases.</span></span> <span data-ttu-id="1abec-231">Эти образцы вариантов представляют собой идеализированные варианты для модели.</span><span class="sxs-lookup"><span data-stu-id="1abec-231">These sample cases represent the idealized cases for the model.</span></span> <span data-ttu-id="1abec-232">Эти варианты не хранятся в модели в том же смысле, как хранятся в ней обучающие данные; для получения этих образцов вариантов нужно использовать специальные конструкции.</span><span class="sxs-lookup"><span data-stu-id="1abec-232">These cases are not stored in the model the same way that the training data is; you must use a special syntax to retrieve the sample cases for the model.</span></span>  
  
```  
SELECT * FROM [Sequence Clustering].SAMPLE_CASES WHERE IsInNode('12')  
```  
  
 <span data-ttu-id="1abec-233">Дополнительные сведения см. в разделе [SELECT FROM <модель>. SAMPLE_CASES (расширения интеллектуального анализа данных)](/sql/dmx/select-from-model-dmx).</span><span class="sxs-lookup"><span data-stu-id="1abec-233">For more information, see [SELECT FROM &#60;model&#62;.SAMPLE_CASES &#40;DMX&#41;](/sql/dmx/select-from-model-dmx).</span></span>  
  
#### <a name="cluster-characteristics-and-cluster-discrimination"></a><span data-ttu-id="1abec-234">Характеристики кластера и сравнение кластеров</span><span class="sxs-lookup"><span data-stu-id="1abec-234">Cluster Characteristics and Cluster Discrimination</span></span>  
 <span data-ttu-id="1abec-235">Вкладка **Характеристики кластера** содержит сводную информацию об основных атрибутах каждого кластера, ранжированную по вероятностям.</span><span class="sxs-lookup"><span data-stu-id="1abec-235">The **Cluster Characteristics** tab summarizes the main attributes of each cluster, ranked by probability.</span></span> <span data-ttu-id="1abec-236">Можно узнать, сколько вариантов принадлежит к этому кластеру и как выглядит распределение вариантов в этом кластере: у каждой характеристики есть несущее множество определенной мощности.</span><span class="sxs-lookup"><span data-stu-id="1abec-236">You can find out how many cases belong to a cluster, and what the distribution of cases is like in the cluster: Each characteristic has certain support.</span></span> <span data-ttu-id="1abec-237">Чтобы увидеть характеристики конкретного кластера, нужно знать его идентификатор.</span><span class="sxs-lookup"><span data-stu-id="1abec-237">To see the characteristics of a particular cluster, you must know the ID of the cluster.</span></span>  
  
 <span data-ttu-id="1abec-238">В следующих примерах используется системная хранимая процедура, `GetClusterCharacteristics`, для возвращения всех характеристик кластера Cluster 12, оценка вероятности которых превышает заданное пороговое значение 0,0005.</span><span class="sxs-lookup"><span data-stu-id="1abec-238">The following examples uses the system stored procedure, `GetClusterCharacteristics`, to return all the characteristics of Cluster 12 that have a probability score over the specified threshold of 0.0005.</span></span>  
  
```  
CALL System.Microsoft.AnalysisServices.System.DataMining.Clustering.GetClusterCharacteristics('Sequence Clustering','12',0.0005)  
```  
  
 <span data-ttu-id="1abec-239">Чтобы вернуть характеристики всех кластеров, нужно оставить значение идентификатора кластера пустым.</span><span class="sxs-lookup"><span data-stu-id="1abec-239">To return the characteristics of all clusters, you can leave the cluster ID empty.</span></span>  
  
```  
CALL System.Microsoft.AnalysisServices.System.DataMining.Clustering.GetClusterCharacteristics('Sequence Clustering','',0.0005)  
```  
  
 <span data-ttu-id="1abec-240">В следующем примере системная хранимая процедура `GetClusterDiscrimination` вызывается для сравнения характеристик кластеров Cluster 1 и Cluster 12.</span><span class="sxs-lookup"><span data-stu-id="1abec-240">The following example calls the system stored procedure `GetClusterDiscrimination` to compare the characteristics of Cluster 1 and Cluster 12.</span></span>  
  
```  
CALL System.Microsoft.AnalysisServices.System.DataMining.Clustering.GetClusterDiscrimination('Sequence Clustering','1','12',0.0005,true)  
```  
  
 <span data-ttu-id="1abec-241">Если нужно создать собственный DMX-запрос для сравнения двух кластеров или сравнения кластера с его дополнением, нужно сначала получить один набор характеристик, затем получить набор характеристик конкретного кластера, а затем сравнить два набора.</span><span class="sxs-lookup"><span data-stu-id="1abec-241">If you want to write your own query in DMX to compare two clusters, or compare a cluster with its complement, you must first retrieve one set of characteristics, and then retrieve the characteristics for the specific cluster that you are interested in, and compare the two sets.</span></span> <span data-ttu-id="1abec-242">Этот сценарий более сложен и обычно требует некоторой обработки на клиенте.</span><span class="sxs-lookup"><span data-stu-id="1abec-242">This scenario is more complicated and typically requires some client processing.</span></span>  
  
#### <a name="states-and-transitions"></a><span data-ttu-id="1abec-243">Переходы и состояния</span><span class="sxs-lookup"><span data-stu-id="1abec-243">States and Transitions</span></span>  
 <span data-ttu-id="1abec-244">Вкладка **Переходы состояния** окна «Алгоритм кластеризации последовательностей (Майкрософт)» выполняет сложные запросы на серверной стороне для получения и сравнения статистических характеристик различных кластеров.</span><span class="sxs-lookup"><span data-stu-id="1abec-244">The **State Transitions** tab of the Microsoft Sequence Clustering performs complicated queries on the back end to retrieve and compare the statistics for different clusters.</span></span> <span data-ttu-id="1abec-245">Для воспроизведения этих результатов нужен более сложный запрос и некоторая обработка на клиенте.</span><span class="sxs-lookup"><span data-stu-id="1abec-245">To reproduce these results requires a more complex query and some client processing.</span></span>  
  
 <span data-ttu-id="1abec-246">Однако для получения вероятностей и состояний для последовательностей или индивидуальных переходов можно воспользоваться DMX-запросами, описанными в примере 2 данного раздела, [Запросы содержимого](#bkmk_ContentQueries).</span><span class="sxs-lookup"><span data-stu-id="1abec-246">However, you can use the DMX queries described in Example 2 of the section, [Content Queries](#bkmk_ContentQueries), to retrieve probabilities and states for sequences or for individual transitions.</span></span>  
  
## <a name="using-the-model-to-make-predictions"></a><span data-ttu-id="1abec-247">Создание прогнозов с помощью модели</span><span class="sxs-lookup"><span data-stu-id="1abec-247">Using the Model to Make Predictions</span></span>  
 <span data-ttu-id="1abec-248">Прогнозирующие запросы к модели кластеризации последовательностей используют многие прогнозирующие функции, используемые и с другими моделями кластеризации.</span><span class="sxs-lookup"><span data-stu-id="1abec-248">Prediction queries on a sequence clustering model can use many of the prediction functions that are used with other clustering models.</span></span> <span data-ttu-id="1abec-249">Кроме того, для выработки рекомендаций или предположений о следующих состояниях можно использовать специальную прогнозирующую функцию [PredictSequence (расширения интеллектуального анализа данных)](/sql/dmx/predictsequence-dmx).</span><span class="sxs-lookup"><span data-stu-id="1abec-249">In addition, you can use the special prediction function, [PredictSequence &#40;DMX&#41;](/sql/dmx/predictsequence-dmx), to make recommendations or to predict next states.</span></span>  
  
###  <a name="sample-query-4-predict-next-state-or-states"></a><a name="bkmk_Query4"></a><span data-ttu-id="1abec-250">Пример запроса 4. Прогнозирование следующего состояния или состояний</span><span class="sxs-lookup"><span data-stu-id="1abec-250">Sample Query 4: Predict Next State or States</span></span>  
 <span data-ttu-id="1abec-251">Функцию [PredictSequence (расширения интеллектуального анализа данных)](/sql/dmx/predictsequence-dmx) можно использовать для прогнозирования следующего наиболее вероятного состояния для данного значения.</span><span class="sxs-lookup"><span data-stu-id="1abec-251">You can use the [PredictSequence &#40;DMX&#41;](/sql/dmx/predictsequence-dmx) function to predict the next most likely state, given a value.</span></span> <span data-ttu-id="1abec-252">Можно также прогнозировать несколько следующих состояний. Например, в качестве списка рекомендаций можно вернуть список из трех товаров, которые данный клиент приобретет с наибольшей вероятностью.</span><span class="sxs-lookup"><span data-stu-id="1abec-252">You can also predict multiple next states: for example, you can return a list of the top three products that a customer is likely to purchase, to present a list of recommendations.</span></span>  
  
 <span data-ttu-id="1abec-253">Следующий образец запроса представляет собой одноэлементный прогнозирующий запрос, возвращающий пять наиболее вероятных прогнозов вместе с их вероятностями.</span><span class="sxs-lookup"><span data-stu-id="1abec-253">The following sample query is a singleton prediction query that returns the top five predictions, together with their probability.</span></span> <span data-ttu-id="1abec-254">Поскольку модель включает в себя вложенную таблицу, при прогнозах нужно использовать вложенную таблицу `[v Assoc Seq Line Items]`как ссылку на столбец.</span><span class="sxs-lookup"><span data-stu-id="1abec-254">Because the model includes a nested table, you must use the nested table, `[v Assoc Seq Line Items]`, as the column reference when making predictions.</span></span> <span data-ttu-id="1abec-255">Кроме того, при передаче входных значений нужно сформировать соединение таблицы вариантов и столбцов вложенной таблицы, как показано во вложенной инструкции SELECT.</span><span class="sxs-lookup"><span data-stu-id="1abec-255">Also, when you supply values as input, you must join both the case table and the nested table columns, as shown by the nested SELECT statements.</span></span>  
  
```  
SELECT FLATTENED PredictSequence([v Assoc Seq Line Items], 7)  
FROM [Sequence Clustering]  
NATURAL PREDICTION JOIN  
(SELECT  (SELECT 1 as [Line Number],  
   'All-Purpose Bike Stand' as [Model]) AS [v Assoc Seq Line Items])   
AS t  
```  
  
 <span data-ttu-id="1abec-256">Пример результатов:</span><span class="sxs-lookup"><span data-stu-id="1abec-256">Example results:</span></span>  
  
|<span data-ttu-id="1abec-257">Expression.$Sequence</span><span class="sxs-lookup"><span data-stu-id="1abec-257">Expression.$Sequence</span></span>|<span data-ttu-id="1abec-258">Expression.Line Number</span><span class="sxs-lookup"><span data-stu-id="1abec-258">Expression.Line Number</span></span>|<span data-ttu-id="1abec-259">Expression.Model</span><span class="sxs-lookup"><span data-stu-id="1abec-259">Expression.Model</span></span>|  
|--------------------------|----------------------------|----------------------|  
|<span data-ttu-id="1abec-260">1</span><span class="sxs-lookup"><span data-stu-id="1abec-260">1</span></span>||<span data-ttu-id="1abec-261">Велосипедная шапочка</span><span class="sxs-lookup"><span data-stu-id="1abec-261">Cycling Cap</span></span>|  
|<span data-ttu-id="1abec-262">2</span><span class="sxs-lookup"><span data-stu-id="1abec-262">2</span></span>||<span data-ttu-id="1abec-263">Велосипедная шапочка</span><span class="sxs-lookup"><span data-stu-id="1abec-263">Cycling Cap</span></span>|  
|<span data-ttu-id="1abec-264">3</span><span class="sxs-lookup"><span data-stu-id="1abec-264">3</span></span>||<span data-ttu-id="1abec-265">Sport-100</span><span class="sxs-lookup"><span data-stu-id="1abec-265">Sport-100</span></span>|  
|<span data-ttu-id="1abec-266">4</span><span class="sxs-lookup"><span data-stu-id="1abec-266">4</span></span>||<span data-ttu-id="1abec-267">Кофта с длинными рукавами и эмблемой</span><span class="sxs-lookup"><span data-stu-id="1abec-267">Long-Sleeve logo Jersey</span></span>|  
|<span data-ttu-id="1abec-268">5</span><span class="sxs-lookup"><span data-stu-id="1abec-268">5</span></span>||<span data-ttu-id="1abec-269">Half-Finger Gloves</span><span class="sxs-lookup"><span data-stu-id="1abec-269">Half-Finger Gloves</span></span>|  
|<span data-ttu-id="1abec-270">6</span><span class="sxs-lookup"><span data-stu-id="1abec-270">6</span></span>||<span data-ttu-id="1abec-271">Универсальная подставка для велосипеда</span><span class="sxs-lookup"><span data-stu-id="1abec-271">All-Purpose Bike Stand</span></span>|  
|<span data-ttu-id="1abec-272">7</span><span class="sxs-lookup"><span data-stu-id="1abec-272">7</span></span>||<span data-ttu-id="1abec-273">Универсальная подставка для велосипеда</span><span class="sxs-lookup"><span data-stu-id="1abec-273">All-Purpose Bike Stand</span></span>|  
  
 <span data-ttu-id="1abec-274">В результатах три столбца, хотя интуитивно ожидается один, поскольку запрос всегда возвращает столбец для таблицы вариантов.</span><span class="sxs-lookup"><span data-stu-id="1abec-274">There are three columns in the results, even though you might only expect one column, because the query always returns a column for the case table.</span></span> <span data-ttu-id="1abec-275">В данном случае результаты преобразованы в плоский формат; в противном случае запрос вернул бы один столбец, содержащий два столбца из вложенной таблицы.</span><span class="sxs-lookup"><span data-stu-id="1abec-275">Here the results are flattened; otherwise, the query would return a single column that contains two nested table columns.</span></span>  
  
 <span data-ttu-id="1abec-276">Столбец $sequence — это столбец, возвращаемый по умолчанию функцией `PredictSequence` для упорядочивания результатов прогноза.</span><span class="sxs-lookup"><span data-stu-id="1abec-276">The column $sequence is a column returned by default by the `PredictSequence` function to order the prediction results.</span></span> <span data-ttu-id="1abec-277">Столбец `[Line Number]`нужен для сопоставления ключей последовательностей в модели, но ключи не выводятся.</span><span class="sxs-lookup"><span data-stu-id="1abec-277">The column, `[Line Number]`, is required to match the sequence keys in the model, but the keys are not output.</span></span>  
  
 <span data-ttu-id="1abec-278">Интересно заметить, что после последовательности «Универсальная подставка для велосипеда» двумя наиболее вероятными спрогнозированными последовательностями являются «Велосипедная шапочка» и «Велосипедная шапочка».</span><span class="sxs-lookup"><span data-stu-id="1abec-278">Interestingly, the top predicted sequences after All-Purpose Bike Stand are Cycling Cap and Cycling Cap.</span></span> <span data-ttu-id="1abec-279">Это не ошибка.</span><span class="sxs-lookup"><span data-stu-id="1abec-279">This is not an error.</span></span> <span data-ttu-id="1abec-280">В зависимости от представления данных покупателю и их группирования при обучении модели появление таких последовательностей вполне вероятно.</span><span class="sxs-lookup"><span data-stu-id="1abec-280">Depending on how the data is presented to the customer, and how it is grouped when training the model, it is very possible to have sequences of this kind.</span></span> <span data-ttu-id="1abec-281">Например, покупатель мог приобрести одну велосипедную шапочку (красную), а затем другую (синюю), или приобрести две шапочки одну за другой, если система продаж не позволяет задавать количество.</span><span class="sxs-lookup"><span data-stu-id="1abec-281">For example, a customer might purchase a cycling cap (red) and then another cycling cap (blue), or purchase two in a row if there were no way to specify quantity.</span></span>  
  
 <span data-ttu-id="1abec-282">Значения в строках 6 и 7 представляют собой заполнители.</span><span class="sxs-lookup"><span data-stu-id="1abec-282">The values in rows 6 and 7 are placeholders.</span></span> <span data-ttu-id="1abec-283">При достижении конца цепочки возможных переходов результаты прогнозирования не прекращаются, но значение, переданное в качестве входного, прибавляется к результатам.</span><span class="sxs-lookup"><span data-stu-id="1abec-283">When you reach the end of the chain of possible transitions, rather than terminating the prediction results, the value that was passed as an input is added to the results.</span></span> <span data-ttu-id="1abec-284">Например, если увеличить число прогнозов до 20, в строках с 6 по 20 будет содержаться одно и то же значение, «Универсальная подставка для велосипеда».</span><span class="sxs-lookup"><span data-stu-id="1abec-284">For example, if you increased the number of predictions to 20, the values for rows 6-20 would all be the same, All-Purpose Bike Stand.</span></span>  
  
## <a name="function-list"></a><span data-ttu-id="1abec-285">Список функций</span><span class="sxs-lookup"><span data-stu-id="1abec-285">Function List</span></span>  
 <span data-ttu-id="1abec-286">Все алгоритмы [!INCLUDE[msCoName](../../includes/msconame-md.md)] поддерживают общий набор функций.</span><span class="sxs-lookup"><span data-stu-id="1abec-286">All [!INCLUDE[msCoName](../../includes/msconame-md.md)] algorithms support a common set of functions.</span></span> <span data-ttu-id="1abec-287">Однако алгоритм кластеризации последовательностей [!INCLUDE[msCoName](../../includes/msconame-md.md)] поддерживает дополнительные функции, список которых приведен в следующей таблице.</span><span class="sxs-lookup"><span data-stu-id="1abec-287">However, the [!INCLUDE[msCoName](../../includes/msconame-md.md)] Sequence Clustering algorithm supports the additional functions that are listed in the following table.</span></span>  
  
|||  
|-|-|  
|<span data-ttu-id="1abec-288">прогнозирующую функцию</span><span class="sxs-lookup"><span data-stu-id="1abec-288">Prediction Function</span></span>|<span data-ttu-id="1abec-289">Использование</span><span class="sxs-lookup"><span data-stu-id="1abec-289">Usage</span></span>|  
|[<span data-ttu-id="1abec-290">Cluster (расширения интеллектуального анализа данных)</span><span class="sxs-lookup"><span data-stu-id="1abec-290">Cluster &#40;DMX&#41;</span></span>](/sql/dmx/cluster-dmx)|<span data-ttu-id="1abec-291">Возвращает кластер, в котором с наибольшей вероятностью содержится входной вариант.</span><span class="sxs-lookup"><span data-stu-id="1abec-291">Returns the cluster that is most likely to contain the input case</span></span>|  
|[<span data-ttu-id="1abec-292">ClusterDistance (расширения интеллектуального анализа данных)</span><span class="sxs-lookup"><span data-stu-id="1abec-292">ClusterDistance &#40;DMX&#41;</span></span>](/sql/dmx/clusterdistance-dmx)|<span data-ttu-id="1abec-293">Возвращает расстояние до входного варианта от указанного кластера, а если кластер не указан, то расстояние до входного варианта от наиболее вероятного кластера.</span><span class="sxs-lookup"><span data-stu-id="1abec-293">Returns the distance of the input case from the specified cluster, or if no cluster is specified, the distance of the input case from the most likely cluster.</span></span><br /><br /> <span data-ttu-id="1abec-294">Эту функцию можно использовать с любой моделью кластеризации (максимизация ожиданий, K-среднее и т. д.), но полученные результаты будут зависеть от алгоритма.</span><span class="sxs-lookup"><span data-stu-id="1abec-294">This function can be used with any kind of clustering model (EM, K-Means, etc.), but the results differ depending on the algorithm.</span></span>|  
|[<span data-ttu-id="1abec-295">ClusterProbability (расширения интеллектуального анализа данных)</span><span class="sxs-lookup"><span data-stu-id="1abec-295">ClusterProbability &#40;DMX&#41;</span></span>](/sql/dmx/clusterprobability-dmx)|<span data-ttu-id="1abec-296">Возвращает вероятность того, что входной вариант принадлежит определенному кластеру.</span><span class="sxs-lookup"><span data-stu-id="1abec-296">Returns the probability that the input case belongs to the specified cluster.</span></span>|  
|[<span data-ttu-id="1abec-297">IsInNode (расширения интеллектуального анализа данных)</span><span class="sxs-lookup"><span data-stu-id="1abec-297">IsInNode &#40;DMX&#41;</span></span>](/sql/dmx/isinnode-dmx)|<span data-ttu-id="1abec-298">Указывает, содержит ли заданный узел текущий вариант.</span><span class="sxs-lookup"><span data-stu-id="1abec-298">Indicates whether the specified node contains the current case.</span></span>|  
|[<span data-ttu-id="1abec-299">PredictAdjustedProbability (расширения интеллектуального анализа данных)</span><span class="sxs-lookup"><span data-stu-id="1abec-299">PredictAdjustedProbability &#40;DMX&#41;</span></span>](/sql/dmx/predictadjustedprobability-dmx)|<span data-ttu-id="1abec-300">Возвращает настроенную вероятность указанного состояния.</span><span class="sxs-lookup"><span data-stu-id="1abec-300">Returns the adjusted probability of a specified state.</span></span>|  
|[<span data-ttu-id="1abec-301">PredictAssociation (расширения интеллектуального анализа данных)</span><span class="sxs-lookup"><span data-stu-id="1abec-301">PredictAssociation &#40;DMX&#41;</span></span>](/sql/dmx/predictassociation-dmx)|<span data-ttu-id="1abec-302">Прогнозирует ассоциированное членство.</span><span class="sxs-lookup"><span data-stu-id="1abec-302">Predicts associative membership.</span></span>|  
|[<span data-ttu-id="1abec-303">PredictCaseLikelihood (расширения интеллектуального анализа данных)</span><span class="sxs-lookup"><span data-stu-id="1abec-303">PredictCaseLikelihood &#40;DMX&#41;</span></span>](/sql/dmx/predictcaselikelihood-dmx)|<span data-ttu-id="1abec-304">Возвращает достоверность, с которой входной вариант соответствует существующей модели.</span><span class="sxs-lookup"><span data-stu-id="1abec-304">Returns the likelihood that an input case will fit in the existing model.</span></span>|  
|[<span data-ttu-id="1abec-305">PredictHistogram (расширения интеллектуального анализа данных)</span><span class="sxs-lookup"><span data-stu-id="1abec-305">PredictHistogram &#40;DMX&#41;</span></span>](/sql/dmx/predicthistogram-dmx)|<span data-ttu-id="1abec-306">Возвращает таблицу, представляющую гистограмму прогноза данного столбца.</span><span class="sxs-lookup"><span data-stu-id="1abec-306">Returns a table that represents a histogram for the prediction of a given column.</span></span>|  
|[<span data-ttu-id="1abec-307">PredictNodeId (расширения интеллектуального анализа данных)</span><span class="sxs-lookup"><span data-stu-id="1abec-307">PredictNodeId &#40;DMX&#41;</span></span>](/sql/dmx/predictnodeid-dmx)|<span data-ttu-id="1abec-308">Возвращает значение параметра Node_ID узла, к которому относится вариант.</span><span class="sxs-lookup"><span data-stu-id="1abec-308">Returns the Node_ID of the node to which the case is classified.</span></span>|  
|[<span data-ttu-id="1abec-309">PredictProbability (расширения интеллектуального анализа данных)</span><span class="sxs-lookup"><span data-stu-id="1abec-309">PredictProbability &#40;DMX&#41;</span></span>](/sql/dmx/predictprobability-dmx)|<span data-ttu-id="1abec-310">Возвращает вероятность для указанного состояния.</span><span class="sxs-lookup"><span data-stu-id="1abec-310">Returns the probability for a specified state.</span></span>|  
|[<span data-ttu-id="1abec-311">PredictSequence (расширения интеллектуального анализа данных)</span><span class="sxs-lookup"><span data-stu-id="1abec-311">PredictSequence &#40;DMX&#41;</span></span>](/sql/dmx/predictsequence-dmx)|<span data-ttu-id="1abec-312">Дает предварительную оценку будущих значений заданной последовательности данных.</span><span class="sxs-lookup"><span data-stu-id="1abec-312">Predicts future sequence values for a specified set of sequence data.</span></span>|  
|[<span data-ttu-id="1abec-313">PredictStdev (расширения интеллектуального анализа данных)</span><span class="sxs-lookup"><span data-stu-id="1abec-313">PredictStdev &#40;DMX&#41;</span></span>](/sql/dmx/predictstdev-dmx)|<span data-ttu-id="1abec-314">Возвращает прогнозируемое среднеквадратичное отклонение для заданного столбца.</span><span class="sxs-lookup"><span data-stu-id="1abec-314">Returns the predicted standard deviation for the specified column.</span></span>|  
|[<span data-ttu-id="1abec-315">PredictSupport (расширения интеллектуального анализа данных)</span><span class="sxs-lookup"><span data-stu-id="1abec-315">PredictSupport &#40;DMX&#41;</span></span>](/sql/dmx/predictsupport-dmx)|<span data-ttu-id="1abec-316">Возвращает опорное значение для указанного состояния.</span><span class="sxs-lookup"><span data-stu-id="1abec-316">Returns the support value for a specified state.</span></span>|  
|[<span data-ttu-id="1abec-317">PredictVariance (расширения интеллектуального анализа данных)</span><span class="sxs-lookup"><span data-stu-id="1abec-317">PredictVariance &#40;DMX&#41;</span></span>](/sql/dmx/predictvariance-dmx)|<span data-ttu-id="1abec-318">Возвращает дисперсию указанного столбца.</span><span class="sxs-lookup"><span data-stu-id="1abec-318">Returns the variance of a specified column.</span></span>|  
  
 <span data-ttu-id="1abec-319">Список функций, общих для всех алгоритмов [!INCLUDE[msCoName](../../includes/msconame-md.md)], см. в статье [Общие функции прогнозирования (расширения интеллектуального анализа данных)](/sql/dmx/general-prediction-functions-dmx).</span><span class="sxs-lookup"><span data-stu-id="1abec-319">For a list of the functions that are common to all [!INCLUDE[msCoName](../../includes/msconame-md.md)] algorithms, see [General Prediction Functions &#40;DMX&#41;](/sql/dmx/general-prediction-functions-dmx).</span></span> <span data-ttu-id="1abec-320">Синтаксис отдельных функций см. в статье [Справочник по функциям расширений интеллектуального анализа данных (расширения интеллектуального анализа данных)](/sql/dmx/data-mining-extensions-dmx-function-reference).</span><span class="sxs-lookup"><span data-stu-id="1abec-320">For the syntax of specific functions, see [Data Mining Extensions &#40;DMX&#41; Function Reference](/sql/dmx/data-mining-extensions-dmx-function-reference).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="1abec-321">См. также:</span><span class="sxs-lookup"><span data-stu-id="1abec-321">See Also</span></span>  
 <span data-ttu-id="1abec-322">[Запросы интеллектуального анализа данных](data-mining-queries.md) </span><span class="sxs-lookup"><span data-stu-id="1abec-322">[Data Mining Queries](data-mining-queries.md) </span></span>  
 <span data-ttu-id="1abec-323">[Технический справочник по алгоритму кластеризации последовательностей (Майкрософт)](microsoft-sequence-clustering-algorithm-technical-reference.md) </span><span class="sxs-lookup"><span data-stu-id="1abec-323">[Microsoft Sequence Clustering Algorithm Technical Reference](microsoft-sequence-clustering-algorithm-technical-reference.md) </span></span>  
 <span data-ttu-id="1abec-324">[Алгоритм кластеризации последовательностей (Майкрософт)](microsoft-sequence-clustering-algorithm.md) </span><span class="sxs-lookup"><span data-stu-id="1abec-324">[Microsoft Sequence Clustering Algorithm](microsoft-sequence-clustering-algorithm.md) </span></span>  
 [<span data-ttu-id="1abec-325">Содержимое моделей интеллектуального анализа данных для моделей кластеризации последовательностей (службы Analysis Services — интеллектуальный анализ данных)</span><span class="sxs-lookup"><span data-stu-id="1abec-325">Mining Model Content for Sequence Clustering Models &#40;Analysis Services - Data Mining&#41;</span></span>](mining-model-content-for-sequence-clustering-models.md)  
  
  
