---
title: Алгоритм дерева принятия решений (Майкрософт) | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
helpviewer_keywords:
- predictions [Analysis Services], discrete attributes
- predictions [Analysis Services], continuous attributes
- algorithms [data mining]
- discrete attributes [Analysis Services]
- classification algorithms [Analysis Services]
- discrete columns [Analysis Services]
- decision tree algorithms [Analysis Services]
- decision trees [Analysis Services]
- continuous columns
- regression algorithms [Analysis Services]
ms.assetid: 95ffe66f-c261-4dc5-ad57-14d2d73205ff
author: minewiskan
ms.author: owend
ms.openlocfilehash: 3c9a893a6f0cb02e5acd2e497e0b57c29d7ac2ca
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87665657"
---
# <a name="microsoft-decision-trees-algorithm"></a>Алгоритм дерева принятия решений (Майкрософт)
  [!INCLUDE[msCoName](../../includes/msconame-md.md)]Алгоритм дерева принятия решений — это алгоритм классификации и регрессии, предоставляемый [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] для использования в прогнозном моделировании как дискретных, так и непрерывных атрибутов.

 Для дискретных атрибутов алгоритм осуществляет прогнозирования на основе связи между входными столбцами в наборе данных. Он использует значения этих столбцов (известные как состояния) для прогнозирования состояний столбца, который обозначается как прогнозируемый. Алгоритм идентифицирует входные столбцы, которые коррелированы с прогнозируемым столбцом. Например, в сценарии для прогнозирования того, какие заказчики, скорее всего, приобретут велосипед, если девять из десяти молодых заказчиков покупают велосипед, но только двое из более старших заказчиков делают это, то алгоритм заключает, что возраст является хорошим прогнозом приобретения велосипеда. Дерево решений осуществляет прогнозирование на основе этой тенденции в направлении конкретного результата.

 Для непрерывных атрибутов алгоритм использует линейную регрессию для определения места разбиения дерева решений.

 Если несколько столбцов установлены как прогнозируемые или если входные данные содержат вложенную таблицу, которая задана как прогнозируемая, то алгоритм строит отдельное дерево решений для каждого прогнозируемого столбца

## <a name="example"></a>Пример
 Отделу маркетинга компании [!INCLUDE[ssSampleDBCoFull](../../includes/sssampledbcofull-md.md)] нужно идентифицировать характеристики предыдущих заказчиков, которые могут указывать на высокую вероятность приобретения этими заказчиками продукта в будущем. В базе данных [!INCLUDE[ssSampleDBnormal](../../includes/sssampledbnormal-md.md)] хранятся демографические данные, описывающие предыдущих заказчиков. Используя алгоритм дерева принятия решений ( [!INCLUDE[msCoName](../../includes/msconame-md.md)] ) для анализа этих данных, маркетинговый отдел может построить модель, которая прогнозирует, будет ли конкретный заказчик покупать продукты, на основании состояний известных столбцов, содержащих данные об этом заказчике, например демографические данные и сведения о покупках в прошлом.

## <a name="how-the-algorithm-works"></a>Принцип работы алгоритма
 Алгоритм дерева принятия решений ( [!INCLUDE[msCoName](../../includes/msconame-md.md)] ) строит модель интеллектуального анализа данных путем создания ряда разбиений в дереве. Эти разбиения представлены как *узлы*. Алгоритм добавляет узел к модели каждый раз, когда выясняется, что входной столбец имеет значительную корреляцию с прогнозируемым столбцом. Способ, которым алгоритм определяет разбиение, отличается в зависимости от того, прогнозирует ли он непрерывный столбец или дискретный столбец.

 Алгоритм дерева принятия решений ( [!INCLUDE[msCoName](../../includes/msconame-md.md)] ) использует функцию *выбора компонентов* для выбора наиболее полезных атрибутов. Выбор компонентов используется всеми алгоритмами интеллектуального анализа данных служб [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] для увеличения производительности и качества анализа. Выбор компонентов играет важную роль в предотвращении использования процессорного времени малозначительными атрибутами. Если при разработке модели интеллектуального анализа данных в нее было добавлено слишком много входных или прогнозируемых атрибутов, то ее обработка может занять очень много времени или даже привести к нехватке памяти. В методы, определяющие необходимость в разбиении дерева, входят стандартные для отраслей метрики для *энтропии* и Байесовых сетей *.* Дополнительные сведения о методах, используемых для выбора полезных атрибутов, а затем для создания рейтингов и для ранжирования атрибутов, см. в разделе [Выбор компонентов (интеллектуальный анализ данных)](feature-selection-data-mining.md).

 Распространенной проблемой в моделях интеллектуального анализа данных является то, что модель становится слишком чувствительной к небольшим различиям в обучающих данных. в этом случае говорят, что *они были* чрезмерно заданными или *чрезмерно обучены*. Чрезмерно оснащенную модель нельзя свести к другим наборам данных. Чтобы избежать появления лжевзаимосвязей в наборах данных, в алгоритме дерева принятия решений ( [!INCLUDE[msCoName](../../includes/msconame-md.md)] ) используются методики контроля роста дерева. Более подробные сведения о том, как работает алгоритм дерева принятия решений ( [!INCLUDE[msCoName](../../includes/msconame-md.md)] ), см. в статье [Технический справочник по алгоритму дерева принятия решений (Майкрософт)](microsoft-decision-trees-algorithm-technical-reference.md).

### <a name="predicting-discrete-columns"></a>Прогнозирование дискретных столбцов
 Способ, которым алгоритм дерева принятия решений ( [!INCLUDE[msCoName](../../includes/msconame-md.md)] ) строит дерево для дискретного прогнозируемого столбца, можно продемонстрировать с использованием гистограммы. На следующей диаграмме показана гистограмма, на которой построен прогнозируемый столбец «Покупатели велосипедов» в сравнении с входным столбцом «Возраст». Гистограмма «Б» показывает, что возраст человека помогает определить, купит ли этот человек велосипед.

 ![Гистограмма из алгоритма дерева принятия решений (Майкрософт)](../media/dt-histogram.gif "Гистограмма из алгоритма дерева принятия решений (Майкрософт)")

 Показанная на диаграмме корреляция приведет к тому, что алгоритм дерева принятия решений ( [!INCLUDE[msCoName](../../includes/msconame-md.md)] ) создаст новый узел в модели.

 ![Узел дерева принятия решений](../media/dt-tree.gif "Узел дерева принятия решений")

 Добавление алгоритмом новых узлов к модели приводит к созданию древовидной структуры. Верхний узел дерева описывает разбиение прогнозируемого столбца для всех заказчиков. При продолжении роста модели алгоритм рассматривает все столбцы.

### <a name="predicting-continuous-columns"></a>Прогнозирование непрерывных столбцов
 Когда алгоритм дерева принятия решений ( [!INCLUDE[msCoName](../../includes/msconame-md.md)] ) строит дерево по непрерывному прогнозируемому столбцу, каждый узел содержит регрессионную формулу. Разбиение осуществляется в точке нелинейности в этой регрессионной формуле. Например, рассмотрим следующую диаграмму.

 ![Линии множественной регрессии, показывающие нелинейность](../media/regression-tree1.gif "Линии множественной регрессии, показывающие нелинейность")

 Диаграмма содержит данные, которые можно моделировать либо используя одиночную линию, либо используя две соединенные линии. Однако одиночная линия не обеспечит надлежащего представления данных. Вместо этого при использовании двух линий модель обеспечит гораздо более точное приближение данных. Точка соединения этих двух линий является точкой нелинейности и представляет собой точку, в которой разобьется узел в модели дерева решений. Например, узел, соответствующий точке нелинейности на предыдущем графике, может быть представлен следующей диаграммой. Эти два уравнения представляют регрессионные уравнения для этих двух линий.

 ![Уравнение, представляющее точку нелинейности](../media/regression-tree2.gif "Уравнение, представляющее точку нелинейности")

## <a name="data-required-for-decision-tree-models"></a>Данные, необходимые для моделей дерева принятия решений
 При подготовке данных для использования в модели дерева принятия решений необходимо понимать требования определенных алгоритмов (например, необходимое количество данных и метод использования данных).

 Далее приводятся требования для моделей временных рядов.

-   **Единичный ключевой столбец** Каждая модель должна содержать один числовой или текстовый столбец, который уникальным образом определяет каждую запись. Составные ключи не допускаются.

-   **Прогнозируемый столбец** Необходимо наличие по крайней мере одного прогнозируемого столбца. В модель можно включить несколько прогнозируемых атрибутов; они могут иметь различные типы (числовые или дискретные). Однако с увеличением количества прогнозируемых атрибутов увеличивается и время обработки.

-   **Входные столбцы** . Необходимо наличие входных столбцов, которые могут быть дискретными или непрерывными. Увеличение числа входных атрибутов влияет на время обработки.

 Дополнительные сведения о типах содержимого и типах данных, поддерживаемых моделями дерева принятия решений, см. в разделе "Требования" статьи [Технический справочник по алгоритму дерева принятия решений (Майкрософт)](microsoft-decision-trees-algorithm-technical-reference.md).

## <a name="viewing-a-decision-trees-model"></a>Просмотр модели дерева принятия решений
 Чтобы исследовать модель, можно использовать **средство просмотра деревьев (Майкрософт)**. Если в модели формируется несколько деревьев, то можно выделить одно из них, и средство просмотра отобразит разбиение категоризации вариантов для каждого прогнозируемого атрибута. Также можно осуществить просмотр взаимодействия между деревьями с помощью средства просмотра сети зависимостей. Дополнительные сведения см. в разделе [Просмотр модели с помощью средства просмотра деревьев (Майкрософт)](browse-a-model-using-the-microsoft-tree-viewer.md).

 Если необходимо получить более подробные сведения о любой ветке или узле в дереве, то модель также можно просматривать с помощью [средства просмотра деревьев содержимого общего вида (Майкрософт)](browse-a-model-using-the-microsoft-generic-content-tree-viewer.md). В модели хранится следующее содержимое: распространения для всех значений в каждом узле, вероятности на каждом уровне дерева и формулы регрессии для непрерывных атрибутов. Дополнительные сведения см. в разделе [Содержимое моделей интеллектуального анализа данных для моделей дерева принятия решений (службы Analysis Services — интеллектуальный анализ данных)](mining-model-content-for-decision-tree-models-analysis-services-data-mining.md).

## <a name="creating-predictions"></a>Создание прогнозов
 После обработки модели результаты хранятся в виде набора закономерностей и статистики, которые можно использовать для исследования связей или для выполнения прогнозов.

 Примеры запросов, применимых в модели дерева принятия решений, см. в разделе [Примеры запросов к модели дерева принятия решений](decision-trees-model-query-examples.md).

 Общие сведения о создании запросов к моделям интеллектуального анализа см. в разделе [Запросы интеллектуального анализа данных](data-mining-queries.md).

## <a name="remarks"></a>Remarks

-   Поддерживается использование языка разметки прогнозирующих моделей (PMML) для создания моделей интеллектуального анализа данных.

-   Поддерживается детализация.

-   Поддерживается использование моделей интеллектуального анализа OLAP и создание измерений интеллектуального анализа данных.

## <a name="see-also"></a>См. также:
 [Алгоритмы интеллектуального анализа данных &#40;Analysis Services — интеллектуальный анализ данных&#41;](data-mining-algorithms-analysis-services-data-mining.md) [древовидное](decision-trees-model-query-examples.md) дерево [принятия решений](microsoft-decision-trees-algorithm-technical-reference.md) . [Analysis Services &#40;](mining-model-content-for-decision-tree-models-analysis-services-data-mining.md) Справочник


