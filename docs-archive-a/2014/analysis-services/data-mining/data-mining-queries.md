---
title: Запросы интеллектуального анализа данных | Документация Майкрософт
ms.custom: ''
ms.date: 06/14/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
helpviewer_keywords:
- prediction queries [Analysis Services]
- queries [DMX], creating
- prediction queries [DMX]
- Prediction Query Builder
- mining models [Analysis Services], querying
ms.assetid: 802806a6-69bb-4c3c-b9aa-d1a1ddfc7fc2
author: minewiskan
ms.author: owend
ms.openlocfilehash: ab6725ddd86d18132de9c408125fa9084161a187
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87668541"
---
# <a name="data-mining-queries"></a>Запросы интеллектуального анализа данных
  Запросы интеллектуального анализа Вы можете:  
  
-   Применить модели к новым данным, чтобы сделать один или несколько прогнозов. Входные значения можно предоставить в качестве параметров или в одном пакете.  
  
-   Получить статистическую сводку по данным, используемым при обучении.  
  
-   Извлечь шаблоны или правила или создавать профили типичных ситуаций, представляющих шаблон в модели.  
  
-   Извлечь формулы регрессии и других вычислений, которые объясняют шаблоны.  
  
-   Получать варианты, которые соответствуют определенному шаблону.  
  
-   Получить сведения об отдельных вариантах, используемых в модели, включая данные, неиспользуемые для анализа.  
  
-   Переобучить модель путем добавления новых данных или выполнения перекрестных прогнозов.  
  
 В этом разделе приведены общие сведения, которые помогут начать работу с запросами интеллектуального анализа данных. В нем описаны типы запросов, которые можно создавать к объектам интеллектуального анализа данных, средства создания и языки запросов. В разделе также приведены ссылки на образцы запросов, которые можно создать к моделям, построенным с помощью алгоритмов из интеллектуального анализа данных SQL Server.  
  
 [Общие сведения о запросах интеллектуального анализа данных](#bkmk_Understand)  
  
 [Средства запросов и интерфейсы](#bkmk_Interfaces)  
  
 [Запросы для различных типов моделей](#bkmk_ModelTypes)  
  
 [Требования](#bkmk_Reqs)  
  
##  <a name="understanding-data-mining-queries"></a><a name="bkmk_Understand"></a>Общие сведения о запросах интеллектуального анализа данных  
 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] поддерживает запросы следующих типов:  
  
-   [Прогнозирующие запросы (интеллектуальный анализ данных)](prediction-queries-data-mining.md)  
  
     запросы, которые делают выводы на основе имеющихся в модели шаблонов и входных данных;  
  
-   [Запросы содержимого (интеллектуальный анализ данных)](content-queries-data-mining.md)  
  
     запросы, возвращающие метаданные, статистические данные и другие сведения о самой модели;  
  
-   [Запросы детализации (интеллектуальный анализ данных)](drillthrough-queries-data-mining.md)  
  
     запросы, которые могут получать базовые данные варианта для модели или даже данные из структуры, которая в модели не использовалась;  
  
-   [Запросы, определяющие данные (интеллектуальный анализ данных)](data-definition-queries-data-mining.md)  
  
     запросы, которые не возвращают сведения из модели, а используются для построения модели и структуры или для обновления данных в модели или структуре.  
  
 Перед началом создания запросов рекомендуется познакомиться с тем, чем отличаются модели, созданные с помощью каждого из имеющихся в SQL Server алгоритмов интеллектуального анализа данных.  
  
-   Для просмотра моделей каждого типа служат дополнительные средства просмотра интеллектуального анализа данных, предусмотренные для алгоритма каждого типа. Дополнительные сведения см. в разделе [Задачи и инструкции средства просмотра моделей интеллектуального анализа данных](mining-model-viewer-tasks-and-how-tos.md).  
  
-   Просмотр содержимого моделей каждого типа выполняется с помощью **средства просмотра деревьев содержимого общего вида (Майкрософт)**. О том, как интерпретировать этих сведения, см. в разделе [Содержимое модели интеллектуального анализа данных (службы Analysis Services — интеллектуальный анализ данных)](mining-model-content-analysis-services-data-mining.md).  
  
##  <a name="query-tools-and-interfaces"></a><a name="bkmk_Interfaces"></a> Средства и интерфейс для построения запросов  
 Запросы интеллектуального анализа данных можно строить интерактивно с помощью одного из имеющихся в SQL Server средств работы с запросами. Графический построитель прогнозирующих запросов доступен как в среде [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)] , так и в среде [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]. Если вы ранее не пользовались построителем прогнозирующих запросов, рекомендуется пройти учебник [Basic Data Mining Tutorial](../../tutorials/basic-data-mining-tutorial.md) , чтобы познакомиться с его интерфейсом. Краткое описание приведено в подразделе "Создание запроса" раздела [Создание прогнозирующего запроса с помощью построителя прогнозирующих запросов](create-a-prediction-query-using-the-prediction-query-builder.md).  
  
 Построитель прогнозирующих запросов является полезным для запуска запросов, которые будут настраиваться позже. Можно легко добавить источники данных и сопоставить их со столбцами, а затем переключиться в представление DMX и настроить запрос, добавив в него предложение WHERE или другие функции.  
  
 Познакомившись с моделями интеллектуального анализа данных и научившись строить запросы, можно также писать запросы напрямую с помощью расширений интеллектуального анализа данных. Расширения интеллектуального анализа данных ― это язык запросов, похожий на Transact-SQL, который может быть использован множеством разных клиентов. Язык расширений интеллектуального анализа данных прекрасно подходит для создания пользовательских прогнозов и сложных запросов. Основные сведения о расширениях интеллектуального анализа данных см. в разделе [Создание моделей интеллектуального анализа данных и выполнение к ним запросов с помощью расширений интеллектуального анализа данных (службы Analysis Services — интеллектуальный анализ данных)](../../tutorials/create-query-data-mining-models-dmx-tutorials.md).  
  
 Редакторы расширений интеллектуального анализа данных есть как в среде [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)] , так и в среде [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]. Кроме того, запросы можно начинать с помощью построителя прогнозирующих запросов, а затем перейти в представление текстового редактора и скопировать инструкцию расширений интеллектуального анализа данных в другой клиент. Дополнительные сведения см. в разделе [интерфейсы запросов интеллектуального анализа данных](data-mining-query-tools.md).  
  
 Инструкции расширений интеллектуального анализа данных можно создать программным способом, а затем отправить их из клиента на сервер служб [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] через объекты AMO или XMLA. При этом расширения интеллектуального анализа данных должны обязательно использоваться для создания запросов к модели интеллектуального анализа данных.  
  
 Метаданные, статистику и определенное содержимое модели можно также запрашивать с помощью динамических административных представлений, в основе которых лежат наборы строк схемы интеллектуального анализа данных. С помощью этих динамических административных представлений легко получить сведения о модели путем ввода инструкций SELECT, однако прогнозы создавать нельзя. Дополнительные сведения о динамических административных представлениях, поддерживаемых службами [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)], см. в разделе [Использование динамических административных представлений для мониторинга служб Analysis Services](../instances/use-dynamic-management-views-dmvs-to-monitor-analysis-services.md).  
  
 И наконец, можно создать запросы интеллектуального анализа данных для использования в пакетах служб Integration Services с помощью задачи [Data Mining Query Task](../../integration-services/control-flow/data-mining-query-task.md)или преобразования [Data Mining Query Transformation](../../integration-services/data-flow/transformations/data-mining-query-transformation.md). Задача потока управления поддерживает несколько типов запросов расширений интеллектуального анализа данных, а преобразование потока данных поддерживает только запросы, работающие с данными из потока данных, другими словами, только запросы, использующие синтаксис PREDICTION JOIN.  
  
##  <a name="queries-for-different-model-types"></a><a name="bkmk_ModelTypes"></a> Запросы для моделей различных типов  
 Тот алгоритм, который использовался при создании модели, во многом определяет тип данных, которые можно получить с помощью запроса интеллектуального анализа данных. Причина различий заключается в том, что каждый алгоритм обрабатывает данные по-своему и хранит разные виды шаблонов. Например, некоторые алгоритмы создают кластеры, другие же создают деревья. Поэтому, возможно, придется использовать специализированные функции прогноза и запроса в зависимости от типа модели, с которой вы работаете.  
  
 В следующем списке приведено краткое описание функций, которые можно использовать в запросах:  
  
-   **Общие прогнозирующие функции:** `Predict`Функция является полиморфизмом, то есть работает со всеми типами моделей. Эта функция автоматически определяет тип модели, с которой вы работаете, и запрашивает дополнительные параметры. Дополнительные сведения см. в разделе [Прогнозы (расширения интеллектуального анализа данных)](/sql/dmx/predict-dmx).  
  
    > [!WARNING]  
    >  Не все модели используются для создания прогнозов. Например, можно создать модель кластеризации, у которой не будет прогнозируемого атрибута. Но даже если у модели и нет прогнозируемого атрибута, то можно создать прогнозирующий запрос, который будет возвращать из модели другие полезные сведения.  
  
-   **Пользовательские прогнозирующие функции:** в каждом типе модели есть набор прогнозирующих функций, предназначенных для работы с шаблонами, которые создает конкретный алгоритм.  
  
     Например, функция `Lag` в моделях временных рядов и позволяет просматривать данные журнала, используемые для этой модели. Для моделей кластеризации более значимыми являются такие функции, как `ClusterDistance`.  
  
     Дополнительные сведения о функциях, которые поддерживаются для моделей каждого типа, приведены по следующим ссылкам.  
  
    |||  
    |-|-|  
    |[Примеры запросов моделей взаимосвязей](association-model-query-examples.md)|[Microsoft Naive Bayes Algorithm](microsoft-naive-bayes-algorithm.md)|  
    |[Примеры запросов к модели кластеризации](clustering-model-query-examples.md)|[Примеры запросов к модели нейронной сети](neural-network-model-query-examples.md)|  
    |[Примеры запросов к модели дерева принятия решений](decision-trees-model-query-examples.md)|[Примеры запросов к модели кластеризации последовательностей](sequence-clustering-model-query-examples.md)|  
    |[Примеры запросов модели линейной регрессии](linear-regression-model-query-examples.md)|[Примеры запросов моделей временных рядов](time-series-model-query-examples.md)|  
    |[Примеры запросов модели логистической регрессии](logistic-regression-model-query-examples.md)||  
  
     Можно также пользоваться функциями VBA или создать свои собственные. Дополнительные сведения см. в разделе [Функции (расширения интеллектуального анализа данных)](/sql/dmx/functions-dmx).  
  
-   **Общая статистика:** есть несколько функций, которые можно использовать при работе практически с любым типом моделей. Они возвращают стандартный набор описательных статистических данных, например стандартное отклонение.  
  
     Например, функция `PredictHistogram` возвращает таблицу, в которой перечислены все состояния указанного столбца.  
  
     Дополнительные сведения см. в разделе [Общие прогнозирующие функции (расширения интеллектуального анализа данных)](/sql/dmx/general-prediction-functions-dmx).  
  
-   **Пользовательская статистика:** дополнительные вспомогательные функции предоставляются для каждого типа моделей, чтобы формировать статистику, относящуюся к определенной аналитической задаче.  
  
     Например, при работе с моделью кластеризации с помощью функции `PredictCaseLikelihood` можно получить значение вероятности, связанное с определенным вариантом и кластером. Но если вы создали модель линейной регрессии, то вам будет интереснее получить коэффициент и отсекаемый отрезок, что можно сделать с помощью запроса содержимого.  
  
-   **Функции содержимого модели** : *содержимое* всех моделей представляется в стандартизированном формате, позволяющем получать данные с помощью простого запроса. Запросы к содержимому моделей можно создавать с помощью расширений интеллектуального анализа данных. Некоторые типы содержимого модели также можно получить с помощью наборов строк схемы интеллектуального анализа данных.  
  
     В содержимом модели значение каждой возвращаемой строки или узла таблицы отличается в зависимости от типа алгоритма, с помощью которого была построена модель, а также типа данных столбца. Дополнительные сведения см. в разделе [Запросы содержимого (интеллектуальный анализ данных)](content-queries-data-mining.md).  
  
##  <a name="requirements"></a><a name="bkmk_Reqs"></a> Требования  
 Перед созданием запроса к модели должна быть обработана модель интеллектуального анализа данных. Обработка объектов служб [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] требует специальных разрешений. Дополнительные сведения об обработке моделей интеллектуального анализа данных см. в разделе [Требования к обработке и связанные замечания (интеллектуальный анализ данных)](processing-requirements-and-considerations-data-mining.md).  
  
 Для выполнения запросов к модели интеллектуального анализа данных требуются разрешения различных уровней, в зависимости от типа выполняемого запроса. Например, для детализации до данных варианта или структуры обычно требуются дополнительные разрешения, которые можно задать для объекта структуры интеллектуального анализа данных или объекта модели интеллектуального анализа данных.  
  
 Но если в запросе используются внешние данные, а также такие инструкции, как OPENROWSET или OPENQUERY, то в запрашиваемой базе данных эти инструкции должны быть включены, а пользователь должен иметь разрешения на базовые объекты базы данных.  
  
 Дополнительные сведения о контекстах безопасности, необходимых для выполнения запросов интеллектуального анализа данных, см. в разделе [Общие сведения о безопасности (интеллектуальный анализ данных)](security-overview-data-mining.md).  
  
## <a name="in-this-section"></a>в этом разделе  
 В этом разделе подробно представлены все типы запросов интеллектуального анализа данных, а также ссылки на детальные примеры создания запросов к моделям интеллектуального анализа данных.  
  
 [Прогнозирующие запросы (интеллектуальный анализ данных)](prediction-queries-data-mining.md)  
  
 [Запросы содержимого (интеллектуальный анализ данных)](content-queries-data-mining.md)  
  
 [Запросы детализации (интеллектуальный анализ данных)](drillthrough-queries-data-mining.md)  
  
 [Запросы, определяющие данные (интеллектуальный анализ данных)](data-definition-queries-data-mining.md)  
  
 [Интерфейсы запросов интеллектуального анализа данных](data-mining-query-tools.md)  
  
## <a name="related-tasks"></a>Связанные задачи  
 Используйте эти ссылки, чтобы научиться создавать запросы интеллектуального анализа данных и работать с ними.  
  
|Задания|Ссылки|  
|-----------|-----------|  
|Просмотрите учебники и пошаговые руководства по запросам интеллектуального анализа данных|[Занятие 6. Создание прогнозов и работа с ними (учебник по интеллектуальному анализу данных — начальный уровень)](../../tutorials/lesson-6-creating-and-working-with-predictions-basic-data-mining-tutorial.md)<br /><br /> [Учебник по расширениям интеллектуального анализа данных для прогнозирования временных рядов](../../tutorials/time-series-prediction-dmx-tutorial.md)|  
|Использование инструментов для создания запросов интеллектуального анализа данных в среде SQL Server Management Studio и [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)]|[Создание DMX-запроса в среде SQL Server Management Studio](create-a-dmx-query-in-sql-server-management-studio.md)<br /><br /> [Создание прогнозирующего запроса с помощью построителя прогнозирующих запросов](create-a-prediction-query-using-the-prediction-query-builder.md)<br /><br /> [Применение функций прогнозирования к модели](apply-prediction-functions-to-a-model.md)<br /><br /> [Изменение прогнозирующего запроса вручную](manually-edit-a-prediction-query.md)|  
|Работа с внешними данными, используемыми в прогнозирующих запросах|[Выбор и сопоставление входных данных для прогнозирующего запроса](choose-and-map-input-data-for-a-prediction-query.md)<br /><br /> [Выбор и сопоставление входных данных для прогнозирующего запроса](choose-and-map-input-data-for-a-prediction-query.md)|  
|Использование результатов запросов|[Просмотр и сохранение результатов прогнозирующего запроса](view-and-save-the-results-of-a-prediction-query.md)|  
|Использование шаблонов запросов на языках DMX и XMLA в среде Management Studio|[создать одноэлементный прогнозирующий запрос из шаблона](create-a-singleton-prediction-query-from-a-template.md)<br /><br /> [Создание запроса интеллектуального анализа данных с помощью XMLA](create-a-data-mining-query-by-using-xmla.md)<br /><br /> [Use Analysis Services Templates in SQL Server Management Studio](../instances/use-analysis-services-templates-in-sql-server-management-studio.md)|  
|Дополнительные сведения о запросах содержимого и примеры|[Создание запроса содержимого к модели интеллектуального анализа данных](create-a-content-query-on-a-mining-model.md)<br /><br /> [запросить параметры, используемые для создания модели интеллектуального анализа данных](query-the-parameters-used-to-create-a-mining-model.md)<br /><br /> [Запросы содержимого (интеллектуальный анализ данных)](content-queries-data-mining.md)|  
|Настройка параметров запроса и устранение проблем с разрешением запроса|[изменить значение времени ожидания для запросов интеллектуального анализа данных](data-mining-queries.md)|  
|Использование компонентов интеллектуального анализа данных из служб Integration Services|[Задача «Запрос интеллектуального анализа данных»](../../integration-services/control-flow/data-mining-query-task.md)<br /><br /> [Преобразование «Запрос интеллектуального анализа данных»](../../integration-services/data-flow/transformations/data-mining-query-transformation.md)|  
  
## <a name="see-also"></a>См. также:  
 [Алгоритмы интеллектуального анализа данных &#40;Analysis Services — интеллектуальный анализ данных&#41;](data-mining-algorithms-analysis-services-data-mining.md)   
 [Содержимое модели интеллектуального анализа данных (службы Analysis Services — интеллектуальный анализ данных)](mining-model-content-analysis-services-data-mining.md)  
  
  
