---
title: Отсутствующие значения (Analysis Services — интеллектуальный анализ данных) | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
helpviewer_keywords:
- attributes [data mining]
- MISSING_VALUE_SUBSTITUTION
- MissingValueSubstitution property
- MISSING_VALUE_SUBSTITUTION parameter
- null values [Analysis Services]
- coding [Data Mining]
ms.assetid: 2b34abdc-7ed4-4ec1-8780-052a704d6dbe
author: minewiskan
ms.author: owend
ms.openlocfilehash: 91bc709d61c786c165711cfdb31ff696456997ff
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87665162"
---
# <a name="missing-values-analysis-services---data-mining"></a><span data-ttu-id="f8bdb-102">Отсутствующие значения (службы Analysis Services — интеллектуальный анализ данных)</span><span class="sxs-lookup"><span data-stu-id="f8bdb-102">Missing Values (Analysis Services - Data Mining)</span></span>
  <span data-ttu-id="f8bdb-103">Правильная обработка  *отсутствующих значений* является важной частью эффективного моделирования.</span><span class="sxs-lookup"><span data-stu-id="f8bdb-103">Handling  *missing values* correctly is an important part of effective modeling.</span></span> <span data-ttu-id="f8bdb-104">В этом разделе объясняется, что такое отсутствующие значения, и описываются функции [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] для работы с отсутствующими значениями при построении структур и моделей интеллектуального анализа данных.</span><span class="sxs-lookup"><span data-stu-id="f8bdb-104">This section explains what missing values are, and describes the features provided in [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] to work with missing values when building data mining structures and mining models.</span></span>  
  
## <a name="definition-of-missing-values-in-data-mining"></a><span data-ttu-id="f8bdb-105">Определение отсутствующих значений в интеллектуальном анализе данных</span><span class="sxs-lookup"><span data-stu-id="f8bdb-105">Definition of Missing Values in Data Mining</span></span>  
 <span data-ttu-id="f8bdb-106">Отсутствующее значение может указывать на различные обстоятельства.</span><span class="sxs-lookup"><span data-stu-id="f8bdb-106">A missing value can signify a number of different things.</span></span> <span data-ttu-id="f8bdb-107">Возможно, поле неприменимо, не произошло событие или данные не были доступными.</span><span class="sxs-lookup"><span data-stu-id="f8bdb-107">Perhaps the field was not applicable, the event did not happen, or the data was not available.</span></span> <span data-ttu-id="f8bdb-108">Может быть, человек, заполнявший данные, не знал правильного значения или не заботился о заполнении этого поля.</span><span class="sxs-lookup"><span data-stu-id="f8bdb-108">It could be that the person who entered the data did not know the right value, or did not care if a field was not filled in.</span></span>  
  
 <span data-ttu-id="f8bdb-109">Однако имеется много сценариев интеллектуального анализа данных, в которых недостающие значения предоставляют важную информацию.</span><span class="sxs-lookup"><span data-stu-id="f8bdb-109">However, there are many data mining scenarios in which missing values provide important information.</span></span> <span data-ttu-id="f8bdb-110">Значение отсутствующего значения в значительной степени зависит от контекста.</span><span class="sxs-lookup"><span data-stu-id="f8bdb-110">The meaning of the missing values depends largely on context.</span></span> <span data-ttu-id="f8bdb-111">Например, отсутствующее значение даты в списке счетов-фактур значительно отличается от отсутствующей даты в столбце, указывающем дату найма работника.</span><span class="sxs-lookup"><span data-stu-id="f8bdb-111">For example, a missing value for the date in a list of invoices has a meaning substantially different from the lack of a date in column that indicates an employee hire date.</span></span> <span data-ttu-id="f8bdb-112">Обычно в службах [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] недостающие значения рассматриваются как информативные, а вероятности определяются таким образом, чтобы недостающие значения включались в вычисления.</span><span class="sxs-lookup"><span data-stu-id="f8bdb-112">Generally, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] treats missing values as informative and adjusts the probabilities to incorporate the missing values into its calculations.</span></span> <span data-ttu-id="f8bdb-113">Это позволяет обеспечить сбалансированность моделей и не слишком большой объем существующих вариантов.</span><span class="sxs-lookup"><span data-stu-id="f8bdb-113">By doing so, you can ensure that models are balanced and do not weight existing cases too heavily.</span></span>  
  
 <span data-ttu-id="f8bdb-114">Таким образом, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] предоставляет два совершенно разных механизма для управления и расчета отсутствующих значений.</span><span class="sxs-lookup"><span data-stu-id="f8bdb-114">Therefore, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] provides two distinctly different mechanisms for managing and calculating missing values.</span></span> <span data-ttu-id="f8bdb-115">Первый метод заключается в управлении обработкой значений NULL на уровне структуры интеллектуального анализа данных.</span><span class="sxs-lookup"><span data-stu-id="f8bdb-115">The first method controls the handling of nulls at the level of the mining structure.</span></span> <span data-ttu-id="f8bdb-116">При использовании второго метода реализация каждого алгоритма имеет свои отличия, но в целом этот метод определяет порядок обработки и подсчета отсутствующих значений в моделях, которые разрешают значения NULL.</span><span class="sxs-lookup"><span data-stu-id="f8bdb-116">The second method differs in implementation for each algorithm, but generally defines how missing values are processed and counted in models that permit null values.</span></span>  
  
## <a name="specifying-handling-of-nulls"></a><span data-ttu-id="f8bdb-117">Задание обработки значений NULL</span><span class="sxs-lookup"><span data-stu-id="f8bdb-117">Specifying Handling of Nulls</span></span>  
 <span data-ttu-id="f8bdb-118">В источнике данных отсутствующие значения могут быть представлены различными способами: как значения NULL, пустые ячейки в электронной таблице, как значение с кодом N/A или другим кодом либо как искусственное значение, например 9999.</span><span class="sxs-lookup"><span data-stu-id="f8bdb-118">In your data source, missing values might be represented in many ways: as nulls, as empty cells in a spreadsheet, as the value N/A or some other code, or as an artificial value such as 9999.</span></span> <span data-ttu-id="f8bdb-119">Однако для целей интеллектуального анализа данных отсутствующими считаются только значения NULL.</span><span class="sxs-lookup"><span data-stu-id="f8bdb-119">However, for purposes of data mining, only nulls are considered missing values.</span></span> <span data-ttu-id="f8bdb-120">Если данные содержат значения заполнителя вместо значений NULL, они могут повлиять на результаты модели, так что их необходимо по возможности заменить значениями NULL или ввести правильные значения.</span><span class="sxs-lookup"><span data-stu-id="f8bdb-120">If your data contains placeholder values instead of nulls, they can affect the results of the model, so you should replace them with nulls or infer correct values if possible.</span></span> <span data-ttu-id="f8bdb-121">Предусмотрен набор средств, которые могут использоваться для логического вывода и заполнения требуемых значений, например преобразование «Уточняющий запрос» или задача «Профайлер данных» в службах SQL Server Integration Services, а также средство «Заполнение по примеру», предоставляемое в надстройках интеллектуального анализа данных для Excel.</span><span class="sxs-lookup"><span data-stu-id="f8bdb-121">There are a variety of tools that you can use to infer and fill in appropriate values, such as the Lookup transformation or the Data Profiler task in SQL Server Integration Services, or the Fill By Example tool provided in the Data Mining Add-Ins for Excel.</span></span>  
  
 <span data-ttu-id="f8bdb-122">Если моделируемая задача требует, чтобы какой-то столбец не мог ни при каких обстоятельствах содержать отсутствующие значения, то при определении структуры интеллектуального анализа данных для столбца необходимо применить флаг модели `NOT_NULL`.</span><span class="sxs-lookup"><span data-stu-id="f8bdb-122">If the task that you are modeling specifies that a column must never have missing values, you should apply the `NOT_NULL` modeling flag to the column when you define the mining structure.</span></span> <span data-ttu-id="f8bdb-123">Этот флаг указывает, что обработка должна окончиться неудачей, если в некотором варианте будет отсутствовать соответствующее значение.</span><span class="sxs-lookup"><span data-stu-id="f8bdb-123">This flag indicates that processing should fail if a case does not have an appropriate value.</span></span> <span data-ttu-id="f8bdb-124">Если при обработке модели возникнет эта ошибка, можно зарегистрировать эту ошибку в журнале и предпринять шаги по исправлению данных, предоставляемых для модели.</span><span class="sxs-lookup"><span data-stu-id="f8bdb-124">If this error occurs when processing a model, you can log the error and take steps to correct the data that is supplied to the model.</span></span>  
  
## <a name="calculation-of-the-missing-state"></a><span data-ttu-id="f8bdb-125">Расчет отсутствующего состояния</span><span class="sxs-lookup"><span data-stu-id="f8bdb-125">Calculation of the Missing State</span></span>  
 <span data-ttu-id="f8bdb-126">В рассматриваемом алгоритме интеллектуального анализа данных недостающие значения являются информативными.</span><span class="sxs-lookup"><span data-stu-id="f8bdb-126">To the data mining algorithm, missing values are informative.</span></span> <span data-ttu-id="f8bdb-127">В таблицах вариантов состояние `Missing` рассматривается как допустимое состояние, подобно любому другому состоянию.</span><span class="sxs-lookup"><span data-stu-id="f8bdb-127">In case tables, `Missing` is a valid state like any other.</span></span> <span data-ttu-id="f8bdb-128">Кроме того, в модели интеллектуального анализа данных могут использоваться другие значения для прогнозирования того, является ли некоторое значение недостающим.</span><span class="sxs-lookup"><span data-stu-id="f8bdb-128">Moreover, a data mining model can use other values to predict whether a value is missing.</span></span> <span data-ttu-id="f8bdb-129">Иными словами, тот факт, что некоторое значение отсутствует, не является ошибкой.</span><span class="sxs-lookup"><span data-stu-id="f8bdb-129">In other words, the fact that a value is missing is not an error.</span></span>  
  
 <span data-ttu-id="f8bdb-130">При создании модели интеллектуального анализа данных для всех дискретных столбцов модели автоматически добавляется состояние `Missing`.</span><span class="sxs-lookup"><span data-stu-id="f8bdb-130">When you create a mining model, a `Missing` state is automatically added to the model for all discrete columns.</span></span> <span data-ttu-id="f8bdb-131">Например, если входной столбец для представления пола [Gender] содержит два возможных значения, Male (мужской) и Female (женский), то автоматически добавляется третье значение для представления значения `Missing`, а гистограмма, показывающая распределение всех значений для этого столбца, всегда включает данные о количестве вариантов со значениями `Missing`.</span><span class="sxs-lookup"><span data-stu-id="f8bdb-131">For example, if the input column [Gender] contains two possible values, Male and Female, a third value is automatically added to represent the `Missing` value, and the histogram that shows the distribution of all values for the column always includes a count of the cases with `Missing` values.</span></span> <span data-ttu-id="f8bdb-132">Если в столбце Gender отсутствуют недостающие значения, то гистограмма показывает, что состояние Missing обнаружено в 0 вариантах.</span><span class="sxs-lookup"><span data-stu-id="f8bdb-132">If the Gender column is not missing any values, the histogram shows that the Missing state is found in 0 cases.</span></span>  
  
 <span data-ttu-id="f8bdb-133">Включение состояния `Missing` по умолчанию имеет смысл, если есть основание полагать, что в данных могут отсутствовать примеры всех возможных значений, но не должно быть так, чтобы модель исключала данную вероятность лишь потому, что в данных нет соответствующего примера.</span><span class="sxs-lookup"><span data-stu-id="f8bdb-133">The rationale for including the `Missing` state by default becomes clear when you consider that your data might not have examples of all possible values, and you would not want the model to exclude the possibility just because there was no example in the data.</span></span> <span data-ttu-id="f8bdb-134">Например, даже если данные о сбыте, относящиеся к какому-то магазину, показали, что все клиенты, приобретавшие определенный продукт, оказались женщинами, то вряд ли следует создавать модель, которая прогнозирует, что данный продукт могут приобретать только женщины.</span><span class="sxs-lookup"><span data-stu-id="f8bdb-134">For example, if sales data for a store showed that all customers who purchased a certain product happened to be women, you would not want to create a model that predicts that only women could purchase the product.</span></span> <span data-ttu-id="f8bdb-135">Вместо этого [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] добавляет заполнитель для дополнительного неизвестного значения, вызываемого как способ достановки `Missing` возможных других состояний.</span><span class="sxs-lookup"><span data-stu-id="f8bdb-135">Instead, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] adds a placeholder for the extra unknown value, called `Missing`, as a way of accommodating possible other states.</span></span>  
  
 <span data-ttu-id="f8bdb-136">Например, в следующей таблице показано распределение значений для узла (All) в модели дерева решений, созданной для занятия «Покупатель велосипеда».</span><span class="sxs-lookup"><span data-stu-id="f8bdb-136">For example, the following table shows the distribution of values for the (All) node in the decision tree model created for the Bike Buyer tutorial.</span></span> <span data-ttu-id="f8bdb-137">В сценарии, рассматриваемом в этом примере, столбец [Bike Buyer] представляет собой прогнозируемый атрибут, где 1 обозначает «Да», а 0 — «Нет».</span><span class="sxs-lookup"><span data-stu-id="f8bdb-137">In the example scenario, the [Bike Buyer] column is the predictable attribute, where 1 indicates "Yes" and 0 indicates "No".</span></span>  
  
|<span data-ttu-id="f8bdb-138">Значение</span><span class="sxs-lookup"><span data-stu-id="f8bdb-138">Value</span></span>|<span data-ttu-id="f8bdb-139">Случаи</span><span class="sxs-lookup"><span data-stu-id="f8bdb-139">Cases</span></span>|  
|-----------|-----------|  
|<span data-ttu-id="f8bdb-140">0</span><span class="sxs-lookup"><span data-stu-id="f8bdb-140">0</span></span>|<span data-ttu-id="f8bdb-141">9296</span><span class="sxs-lookup"><span data-stu-id="f8bdb-141">9296</span></span>|  
|<span data-ttu-id="f8bdb-142">1</span><span class="sxs-lookup"><span data-stu-id="f8bdb-142">1</span></span>|<span data-ttu-id="f8bdb-143">9098</span><span class="sxs-lookup"><span data-stu-id="f8bdb-143">9098</span></span>|  
|<span data-ttu-id="f8bdb-144">Missing</span><span class="sxs-lookup"><span data-stu-id="f8bdb-144">Missing</span></span>|<span data-ttu-id="f8bdb-145">0</span><span class="sxs-lookup"><span data-stu-id="f8bdb-145">0</span></span>|  
  
 <span data-ttu-id="f8bdb-146">Это распределение показывает, что приблизительно половина клиентов приобрела велосипед, а другая половина — нет.</span><span class="sxs-lookup"><span data-stu-id="f8bdb-146">This distribution shows that about half of the customers have purchased a bike, and half have not.</span></span> <span data-ttu-id="f8bdb-147">Этот конкретный набор данных является очень качественным, поэтому для каждого варианта в столбце [Bike Buyer] предусмотрено значение, а количество значений, помеченных как `Missing` (отсутствует), равно 0.</span><span class="sxs-lookup"><span data-stu-id="f8bdb-147">This particular data set is very clean; therefore, every case has a value in the [Bike Buyer] column, and the count of `Missing` values is 0.</span></span> <span data-ttu-id="f8bdb-148">Однако если в поле [Bike Buyer] в каком-либо из вариантов имелось значение null, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] будет считать, что эта строка является вариантом со `Missing` значением.</span><span class="sxs-lookup"><span data-stu-id="f8bdb-148">However, if any case had a null in the [Bike Buyer] field, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] would count that row as a case with a `Missing` value.</span></span>  
  
 <span data-ttu-id="f8bdb-149">Если входные данные представляют собой непрерывный столбец, то в данной модели два возможных состояния для атрибута были бы сведены в таблицу: `Existing` и `Missing`.</span><span class="sxs-lookup"><span data-stu-id="f8bdb-149">If the input is a continuous column, the model tabulates two possible states for the attribute: `Existing` and `Missing`.</span></span> <span data-ttu-id="f8bdb-150">Иными словами, столбец либо содержит значение с некоторым числовым типом данных, либо не содержит никакого значения.</span><span class="sxs-lookup"><span data-stu-id="f8bdb-150">In other words, either the column contains a value of some numeric data type, or it contains no value.</span></span> <span data-ttu-id="f8bdb-151">Для вариантов, в которых значение имеется, в этой модели вычисляется среднее, стандартное отклонение и другие значимые статистические показатели.</span><span class="sxs-lookup"><span data-stu-id="f8bdb-151">For cases that have a value, the model calculates mean, standard deviation, and other meaningful statistics.</span></span> <span data-ttu-id="f8bdb-152">Для вариантов, в которых значение отсутствует, в этой модели предоставляются данные о количестве значений `Missing`, а также корректируются прогнозы соответствующим образом.</span><span class="sxs-lookup"><span data-stu-id="f8bdb-152">For cases that have no value, the model provides a count of the `Missing` vales and adjusts predictions accordingly.</span></span> <span data-ttu-id="f8bdb-153">Применяемый метод корректировки прогнозов зависит от алгоритма и рассматривается в следующем разделе.</span><span class="sxs-lookup"><span data-stu-id="f8bdb-153">The method for adjusting the prediction differs depending on the algorithm and is described in the following section.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="f8bdb-154">Что касается атрибутов во вложенной таблице, недостающие значения там не являются информативными.</span><span class="sxs-lookup"><span data-stu-id="f8bdb-154">For attributes in a nested table, missing values are not informative.</span></span> <span data-ttu-id="f8bdb-155">Например, если некоторый клиент не приобрел определенный продукт, то во вложенной таблице **Products** будет отсутствовать строка, соответствующая этому продукту, а в модели интеллектуального анализа данных не появится атрибут, относящийся к отсутствующему продукту.</span><span class="sxs-lookup"><span data-stu-id="f8bdb-155">For example, if a customer has not purchased a product, the nested **Products** table would not have a row corresponding to that product, and the mining model would not create an attribute for the missing product.</span></span> <span data-ttu-id="f8bdb-156">Но если интерес представляют клиенты, которые не приобрели определенные продукты, то можно создать модель, предусматривающую фильтрацию по критерию отсутствия продуктов во вложенной таблице, используя инструкцию NOT EXISTS в фильтре модели.</span><span class="sxs-lookup"><span data-stu-id="f8bdb-156">However, if you are interested in customers who have not purchased certain products, you can create a model that is filtered on the non-existence of the products in the nested table, by using a NOT EXISTS statement in the model filter.</span></span> <span data-ttu-id="f8bdb-157">Дополнительные сведения см. в разделе [Применение фильтра к модели интеллектуального анализа данных](apply-a-filter-to-a-mining-model.md).</span><span class="sxs-lookup"><span data-stu-id="f8bdb-157">For more information, see [Apply a Filter to a Mining Model](apply-a-filter-to-a-mining-model.md).</span></span>  
  
## <a name="adjusting-probability-for-missing-states"></a><span data-ttu-id="f8bdb-158">Корректировка вероятности для отсутствующих состояний</span><span class="sxs-lookup"><span data-stu-id="f8bdb-158">Adjusting Probability for Missing States</span></span>  
 <span data-ttu-id="f8bdb-159">Кроме подсчета значений службы [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] вычисляют вероятность любого значения по всему набору данных.</span><span class="sxs-lookup"><span data-stu-id="f8bdb-159">In addition to counting values, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] calculates the probability of any value across the data set.</span></span> <span data-ttu-id="f8bdb-160">Это касается и значения `Missing`.</span><span class="sxs-lookup"><span data-stu-id="f8bdb-160">The same is true for the `Missing` value.</span></span> <span data-ttu-id="f8bdb-161">Например, в следующей таблице показана вероятность, относящаяся к вариантам в предыдущем примере.</span><span class="sxs-lookup"><span data-stu-id="f8bdb-161">For example, the following table shows the probabilities for the cases in the previous example:</span></span>  
  
|<span data-ttu-id="f8bdb-162">Значение</span><span class="sxs-lookup"><span data-stu-id="f8bdb-162">Value</span></span>|<span data-ttu-id="f8bdb-163">Случаи</span><span class="sxs-lookup"><span data-stu-id="f8bdb-163">Cases</span></span>|<span data-ttu-id="f8bdb-164">Вероятность</span><span class="sxs-lookup"><span data-stu-id="f8bdb-164">Probability</span></span>|  
|-----------|-----------|-----------------|  
|<span data-ttu-id="f8bdb-165">0</span><span class="sxs-lookup"><span data-stu-id="f8bdb-165">0</span></span>|<span data-ttu-id="f8bdb-166">9296</span><span class="sxs-lookup"><span data-stu-id="f8bdb-166">9296</span></span>|<span data-ttu-id="f8bdb-167">50.55%</span><span class="sxs-lookup"><span data-stu-id="f8bdb-167">50.55%</span></span>|  
|<span data-ttu-id="f8bdb-168">1</span><span class="sxs-lookup"><span data-stu-id="f8bdb-168">1</span></span>|<span data-ttu-id="f8bdb-169">9098</span><span class="sxs-lookup"><span data-stu-id="f8bdb-169">9098</span></span>|<span data-ttu-id="f8bdb-170">49.42%</span><span class="sxs-lookup"><span data-stu-id="f8bdb-170">49.42%</span></span>|  
|<span data-ttu-id="f8bdb-171">Missing</span><span class="sxs-lookup"><span data-stu-id="f8bdb-171">Missing</span></span>|<span data-ttu-id="f8bdb-172">0</span><span class="sxs-lookup"><span data-stu-id="f8bdb-172">0</span></span>|<span data-ttu-id="f8bdb-173">0.03%</span><span class="sxs-lookup"><span data-stu-id="f8bdb-173">0.03%</span></span>|  
  
 <span data-ttu-id="f8bdb-174">Может показаться странным, что вычисленная вероятность появления значения `Missing` равна 0,03 %, хотя число таких случаев равно 0.</span><span class="sxs-lookup"><span data-stu-id="f8bdb-174">It may seem odd that the probability of the `Missing` value is calculated as 0.03%, when the number of cases is 0.</span></span> <span data-ttu-id="f8bdb-175">На самом деле такое поведение предусмотрено изначально и позволяет обеспечить разумную обработку моделью неизвестных значений.</span><span class="sxs-lookup"><span data-stu-id="f8bdb-175">In fact, this behavior is by design, and represents an adjustment that lets the model handle unknown values gracefully.</span></span>  
  
 <span data-ttu-id="f8bdb-176">Обычно вероятность рассчитывается как количество благоприятных вариантов, деленное на количество всех возможных вариантов.</span><span class="sxs-lookup"><span data-stu-id="f8bdb-176">In general, probability is calculated as the favorable cases divided by all possible cases.</span></span> <span data-ttu-id="f8bdb-177">В этом примере алгоритм вычисляет сумму количества вариантов, соответствующих определенному условию ([Bike Buyer] = 1 или [Bike Buyer] = 0), после чего полученное значение делится на общее количество строк.</span><span class="sxs-lookup"><span data-stu-id="f8bdb-177">In this example, the algorithm computes the sum of the cases that meet a particular condition ([Bike Buyer] = 1, or [Bike Buyer] = 0), and divides that number by the total count of rows.</span></span> <span data-ttu-id="f8bdb-178">Однако чтобы учесть варианты `Missing`, к количеству всех возможных вариантов добавляется 1.</span><span class="sxs-lookup"><span data-stu-id="f8bdb-178">However, to account for the `Missing` cases, 1 is added to the number of all possible cases.</span></span> <span data-ttu-id="f8bdb-179">В результате вероятность неизвестного варианта больше не равна нулю, но составляет очень небольшую величину, которая указывает, что это состояние просто маловероятно, но возможно.</span><span class="sxs-lookup"><span data-stu-id="f8bdb-179">As a result, the probability for the unknown case is no longer zero, but a very small number, indicating that the state is merely improbable, not impossible.</span></span>  
  
 <span data-ttu-id="f8bdb-180">Добавление небольшого значения `Missing` не приводит к изменению результата прогноза, однако позволяет усовершенствовать моделирование в сценариях, где данные с предысторией не содержат все возможные исходы.</span><span class="sxs-lookup"><span data-stu-id="f8bdb-180">The addition of the small `Missing` value does not change the outcome of the predictor; however, it enables better modeling in scenarios where the historical data does not include all possible outcomes.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="f8bdb-181">Поставщики интеллектуального анализа данных различаются способами обработки недостающих значений.</span><span class="sxs-lookup"><span data-stu-id="f8bdb-181">Data mining providers differ in the way they handle missing values.</span></span> <span data-ttu-id="f8bdb-182">Например, некоторые поставщики исходят из предположения, что недостающие данные во вложенном столбце являются разреженным представлением, а наличие недостающих данных в невложенном столбце определяется случайным распределением.</span><span class="sxs-lookup"><span data-stu-id="f8bdb-182">For example, some providers assume that missing data in a nested column is sparse representation, but that missing data in a non-nested column is missing at random.</span></span>  
  
 <span data-ttu-id="f8bdb-183">Если достоверно известно, что в данных определены все исходы и нужно исключить возможность корректировки вероятностей, необходимо задать флаг модели NOT_NULL для соответствующего столбца в структуре интеллектуального анализа данных.</span><span class="sxs-lookup"><span data-stu-id="f8bdb-183">If you are certain that all outcomes are specified in your data and want to prevent probabilities from being adjusted, you should set the NOT_NULL modeling flag on the column in the mining structure.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="f8bdb-184">Каждый алгоритм, включая пользовательские алгоритмы, которые могут быть получены из подключаемого модуля стороннего разработчика, может обрабатывать отсутствующие значения по-разному.</span><span class="sxs-lookup"><span data-stu-id="f8bdb-184">Each algorithm, including custom algorithms that you may have obtained from a third-party plug-in, can handle missing values differently.</span></span>  
  
### <a name="special-handling-of-missing-values-in-decision-tree-models"></a><span data-ttu-id="f8bdb-185">Специальная обработка недостающих значений в моделях дерева принятия решений</span><span class="sxs-lookup"><span data-stu-id="f8bdb-185">Special Handling of Missing Values in Decision Tree Models</span></span>  
 <span data-ttu-id="f8bdb-186">В алгоритме дерева принятия решений (Майкрософт) вероятности недостающих значений вычисляются иначе по сравнению с другими алгоритмами.</span><span class="sxs-lookup"><span data-stu-id="f8bdb-186">The Microsoft Decision Trees algorithm calculates probabilities for missing values differently than in other algorithms.</span></span> <span data-ttu-id="f8bdb-187">Алгоритм дерева принятия решений не просто прибавляет 1 к общему количеству вариантов, а использует немного другую формулу для корректировки с учетом состояний `Missing`.</span><span class="sxs-lookup"><span data-stu-id="f8bdb-187">Instead of just adding 1 to the total number of cases, the decision trees algorithm adjusts for the `Missing` state by using a slightly different formula.</span></span>  
  
 <span data-ttu-id="f8bdb-188">В модели дерева принятия решений вероятность состояния `Missing` рассчитывается следующим образом:</span><span class="sxs-lookup"><span data-stu-id="f8bdb-188">In a decision tree model, the probability of the `Missing` state is calculated as follows:</span></span>  
  
 <span data-ttu-id="f8bdb-189">ВероятностьСостояния = (АприорнаяВероятностьУзла)\* (НесущееМножествоСостояния + 1) / (НесущееМножествоУзла + ВсегоСостояний).</span><span class="sxs-lookup"><span data-stu-id="f8bdb-189">StateProbability = (NodePriorProbability)\* (StateSupport + 1) / (NodeSupport + TotalStates)</span></span>  
  
 <span data-ttu-id="f8bdb-190">Кроме того, в службах [!INCLUDE[ssASCurrent](../../includes/ssascurrent-md.md)]алгоритм дерева принятия решений предоставляет возможность проведения дополнительной корректировки, что позволяет скомпенсировать в алгоритме присутствие в модели фильтров, которые могут вызвать исключение многих состояний во время обучения.</span><span class="sxs-lookup"><span data-stu-id="f8bdb-190">Moreover, in [!INCLUDE[ssASCurrent](../../includes/ssascurrent-md.md)], the Decision Trees algorithm provides an additional adjustment that helps the algorithm compensate for the presence of filters on the model, which may result in many states to be excluded during training.</span></span>  
  
 <span data-ttu-id="f8bdb-191">В [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]предусмотрено, что если некоторое состояние присутствует во время обучения, но при этом обнаруживается, что это состояние в определенном узле имеет нулевое несущее множество, то выполняется стандартная корректировка.</span><span class="sxs-lookup"><span data-stu-id="f8bdb-191">In [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], if a state is present during training but just happens to have zero support in a certain node, the standard adjustment is made.</span></span> <span data-ttu-id="f8bdb-192">Однако, если состояние ни разу не обнаружено во время обучения, алгоритм задает его вероятность равной нулю.</span><span class="sxs-lookup"><span data-stu-id="f8bdb-192">However, if a state is never encountered during training, the algorithm sets the probability to exactly zero.</span></span> <span data-ttu-id="f8bdb-193">Эта корректировка применяется не только к состоянию `Missing`, но и к состояниям, которые существуют в обучающих данных, но имеют нулевое несущее множество в результате фильтрации модели.</span><span class="sxs-lookup"><span data-stu-id="f8bdb-193">This adjustment applies not only to the `Missing` state, but also to other states that exist in the training data but have zero support as result of model filtering.</span></span>  
  
 <span data-ttu-id="f8bdb-194">Эта дополнительная корректировка приводит к тому, что вступает в силу следующая формула.</span><span class="sxs-lookup"><span data-stu-id="f8bdb-194">This additional adjustment results in the following formula:</span></span>  
  
 <span data-ttu-id="f8bdb-195">StateProbability = 0.0, если это состояние имеет нулевое несущее множество в обучающем наборе</span><span class="sxs-lookup"><span data-stu-id="f8bdb-195">StateProbability = 0.0 if that state has 0 support in the training set</span></span>  
  
 <span data-ttu-id="f8bdb-196">ELSE ВероятностьСостояния = (АприорнаяВероятностьУзла)\* (НесущееМножествоСостояния + 1) / (НесущееМножествоУзла + ВсегоСостоянийСНенулевымНесущимМножеством)</span><span class="sxs-lookup"><span data-stu-id="f8bdb-196">ELSE StateProbability = (NodePriorProbability)\* (StateSupport + 1) / (NodeSupport + TotalStatesWithNonZeroSupport)</span></span>  
  
 <span data-ttu-id="f8bdb-197">Результатом применения этой корректировки является поддержание стабильности дерева.</span><span class="sxs-lookup"><span data-stu-id="f8bdb-197">The net effect of this adjustment is to maintain the stability of the tree.</span></span>  
  
## <a name="related-tasks"></a><span data-ttu-id="f8bdb-198">Связанные задачи</span><span class="sxs-lookup"><span data-stu-id="f8bdb-198">Related Tasks</span></span>  
 <span data-ttu-id="f8bdb-199">В следующих разделах приведены дополнительные сведения об обращении с отсутствующими значениями.</span><span class="sxs-lookup"><span data-stu-id="f8bdb-199">The following topics provide more information about how to handle missing values.</span></span>  
  
|<span data-ttu-id="f8bdb-200">Задания</span><span class="sxs-lookup"><span data-stu-id="f8bdb-200">Tasks</span></span>|<span data-ttu-id="f8bdb-201">Ссылки</span><span class="sxs-lookup"><span data-stu-id="f8bdb-201">Links</span></span>|  
|-----------|-----------|  
|<span data-ttu-id="f8bdb-202">Добавление флагов к отдельным столбцам модели для управления обработкой отсутствующих значений</span><span class="sxs-lookup"><span data-stu-id="f8bdb-202">Add flags to individual model columns to control handling of missing values</span></span>|[<span data-ttu-id="f8bdb-203">Просмотр или изменение флагов моделирования (интеллектуальный анализ данных)</span><span class="sxs-lookup"><span data-stu-id="f8bdb-203">View or Change Modeling Flags &#40;Data Mining&#41;</span></span>](modeling-flags-data-mining.md)|  
|<span data-ttu-id="f8bdb-204">Установка свойств модели интеллектуального анализа данных для управления обработкой отсутствующих значений</span><span class="sxs-lookup"><span data-stu-id="f8bdb-204">Set properties on a mining model to control handling of missing values</span></span>|[<span data-ttu-id="f8bdb-205">Изменение свойств модели интеллектуального анализа данных</span><span class="sxs-lookup"><span data-stu-id="f8bdb-205">Change the Properties of a Mining Model</span></span>](change-the-properties-of-a-mining-model.md)|  
|<span data-ttu-id="f8bdb-206">Задание флагов модели в расширениях интеллектуального анализа данных</span><span class="sxs-lookup"><span data-stu-id="f8bdb-206">Learn how to specify modeling flags in DMX</span></span>|[<span data-ttu-id="f8bdb-207">Флаги моделирования (расширения интеллектуального анализа данных)</span><span class="sxs-lookup"><span data-stu-id="f8bdb-207">Modeling Flags &#40;DMX&#41;</span></span>](/sql/dmx/modeling-flags-dmx)|  
|<span data-ttu-id="f8bdb-208">Изменение способа обработки структурой интеллектуального анализа данных отсутствующих значений</span><span class="sxs-lookup"><span data-stu-id="f8bdb-208">Alter the way that the mining structure handles missing values</span></span>|[<span data-ttu-id="f8bdb-209">изменить свойства структуры интеллектуального анализа данных</span><span class="sxs-lookup"><span data-stu-id="f8bdb-209">Change the Properties of a Mining Structure</span></span>](change-the-properties-of-a-mining-structure.md)|  
  
## <a name="see-also"></a><span data-ttu-id="f8bdb-210">См. также:</span><span class="sxs-lookup"><span data-stu-id="f8bdb-210">See Also</span></span>  
 <span data-ttu-id="f8bdb-211">[&#40;содержимого моделей интеллектуального анализа данных Analysis Services — интеллектуальный анализ&#41;](mining-model-content-analysis-services-data-mining.md) </span><span class="sxs-lookup"><span data-stu-id="f8bdb-211">[Mining Model Content &#40;Analysis Services - Data Mining&#41;](mining-model-content-analysis-services-data-mining.md) </span></span>  
 [<span data-ttu-id="f8bdb-212">Флаги моделирования (интеллектуальный анализ данных)</span><span class="sxs-lookup"><span data-stu-id="f8bdb-212">Modeling Flags &#40;Data Mining&#41;</span></span>](modeling-flags-data-mining.md)  
  
  
