---
title: Связи измерений | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: reference
helpviewer_keywords:
- relationships [Analysis Services]
- member groups [Analysis Services]
- regular dimensions [Analysis Services]
- many-to-many relationships [Analysis Services]
- cubes [Analysis Services], relationships
- reference dimensions
- dimensions [Analysis Services], relationships
- fact dimensions [Analysis Services]
- relationships [Analysis Services], dimensions
ms.assetid: de54c059-cb0f-4f66-bd70-8605af05ec4f
author: minewiskan
ms.author: owend
ms.openlocfilehash: 2334c1a97bb4172fff70550dbece5376eb1cb9d7
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87738972"
---
# <a name="dimension-relationships"></a>Связи измерений
  Использование измерений определяет связи между измерением куба и группами мер в нем. Измерение куба представляет собой экземпляр измерения базы данных, используемый в конкретном кубе. Куб может содержать (и часто содержит) измерения, которые не связаны непосредственно с группой мер, но которые могут быть косвенно связаны с ней через другое измерение или группу мер. При добавлении измерения базы данных или группы мер в куб [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] пытается определить использование измерения путем проверки связей между таблицами измерений и таблицами фактов в представлении источника данных куба, а также путем проверки связей между атрибутами в измерениях. Службы [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] автоматически устанавливают параметры использования измерений для связей, которые они смогли обнаружить.  
  
 Связь между измерением и группой мер состоит из таблиц измерений и фактов, участвующих в связи, и атрибута гранулярности, указывающего детализацию измерения в конкретной группе мер.  
  
## <a name="regular-dimension-relationships"></a>Связи обычного измерения  
 Связь обычного измерения между измерением куба и группой мер существует, когда ключевой столбец для измерения соединен непосредственно с таблицей фактов. Эта прямая связь основана на связи "первичный ключ — внешний ключ" в базовой реляционной базе данных, но может также основываться на логической связи, определенной в представлении источника данных. Связь обычного измерения представляет связь между таблицами измерений и таблицей фактов в традиционной структуре схемы «звезда». Дополнительные сведения о обычных связях см. [в разделе Определение обычной связи и свойств обычных связей](../multidimensional-models/define-a-regular-relationship-and-regular-relationship-properties.md).  
  
## <a name="reference-dimension-relationships"></a>Связи ссылочного измерения  
 Связь ссылочного измерения между измерением куба и группой мер существует в том случае, когда ключевой столбец измерения косвенно соединен с таблицей фактов по ключу в другой таблице измерения, как показано на следующей схеме.  
  
 ![Логическая диаграмма, связь измерений, на которую дана ссылка](../../analysis-services/dev-guide/media/as-refdimension1.gif "Логическая диаграмма, связь измерений, на которую дана ссылка")  
  
 Связь ссылочного измерения представляет связь между таблицами измерений и таблицей фактов в структуре схемы «снежинка». Когда таблицы измерений связаны по схеме «снежинка», можно определить либо одно измерение с использованием столбцов из нескольких таблиц, либо определить отдельные измерения на основе отдельных таблиц измерений, а затем задать связь между ними при помощи параметров связи ссылочного измерения. На следующем рисунке показана одна таблица фактов с именем **InternetSales**и две таблицы измерений, называемые **Customer** и **Geography**, в схеме «снежинка».  
  
 ![Логическая схема, связь измерений, на которую дана ссылка](../../analysis-services/dev-guide/media/as-refdim-schema1.gif "Логическая схема, связь измерений, на которую дана ссылка")  
  
 Можно создать измерение с таблицей **Customer** в качестве главной таблицы измерения и таблицы **Geography** , входящей в состав связанной таблицы. После этого определяется обычная связь между измерением и группой мер «Интернет-продажи».  
  
 Кроме того, можно создать два измерения, связанные с группой мер InternetSales: измерение, основанное на таблице **Customer** , и измерение, основанное на таблице **Geography** . После этого можно связать измерение «География» с группой мер «Интернет-продажи», используя связь ссылочного измерения, в которую входит измерение «Заказчик». В этом случае, когда факты в группе мер «Интернет-продажи» измеряются измерением «География», факты измеряются по заказчикам и по географии. Если куб содержит вторую группу мер «Товарооборот посредников», то измерить факты в группе мер «Товарооборот посредников» по таблице Geography невозможно, поскольку связи между группой мер «Товарооборот посредников» и Geography не существует.  
  
 Ограничения на количество ссылочных измерений, которые могут быть соединены друг с другом, нет, как показано на следующей схеме.  
  
 ![Логическая диаграмма, связь измерений, на которую дана ссылка](../../analysis-services/dev-guide/media/as-refdimension2.gif "Логическая диаграмма, связь измерений, на которую дана ссылка")  
  
 Дополнительные сведения о ссылочных связях см. [в разделе Определение ссылочной связи и свойств ссылочной связи](../multidimensional-models/define-a-referenced-relationship-and-referenced-relationship-properties.md).  
  
## <a name="fact-dimension-relationships"></a>Связи измерения фактов  
 Измерения фактов, обычно называемые вырожденными измерениями, представляют собой стандартные измерения, составленные из столбцов атрибутов в таблицах фактов, а не из столбцов атрибутов в таблицах измерений. Полезные данные измерений иногда хранятся в таблице фактов с целью снижения дублирования. Например, на следующей диаграмме показана таблица фактов **FactResellerSales** из [!INCLUDE[ssAWDWsp](../../includes/ssawdwsp-md.md)] образца базы данных.  
  
 ![Столбцы таблицы фактов, поддерживающие измерения](../../analysis-services/dev-guide/media/as-factdim.gif "Столбцы таблицы фактов, поддерживающие измерения")  
  
 Эта таблица содержит данные об атрибутах не только для каждой строки заказа, оформленного посредником, но и для самого заказа. Атрибуты, кружки на предыдущей схеме, указывают сведения в таблице **FactResellerSales** , которые могут использоваться в качестве атрибутов в измерении. В этом случае два дополнительных элемента данных — сопроводительный номер перевозчика и номер заказа на покупку, оформленного посредником, представлены столбцами атрибутов CarrierTrackingNumber и CustomerPONumber. Эти сведения являются интересными. Например, пользователи наверняка заинтересованы в просмотре статистических данных, таких как общая стоимость продукта, для всех заказов, отправляемых по одному номеру для отслеживания. Однако без измерения данные по этим двум атрибутам не могут быть ни организованы, ни статистически обработаны.  
  
 Теоретически можно создать таблицу измерения, использующую те же самые ключевые данные, что и таблица FactResellerSales, и переместить два остальных столбца атрибутов, CarrierTrackingNumber и CustomerPONumber, в эту таблицу измерения. Однако при этом произойдет дублирование значительной части данных, а также излишнее усложнение хранилища данных с целью представления всего двух атрибутов в отдельном измерении.  
  
> [!NOTE]  
>  Измерения фактов часто используются для поддержки операций детализации. Дополнительные сведения о действиях см. в разделе [Действия (службы Analysis Services — многомерные данные)](../multidimensional-models/actions-analysis-services-multidimensional-data.md).  
  
> [!NOTE]  
>  Необходимо осуществлять добавочное обновление измерений фактов после каждого обновления группы мер, на которую ссылается связь фактов. Если измерение фактов является измерением ROLAP, то механизм обработки служб [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] очищает все кэши и осуществляет добавочную обработку группы мер.  
  
 Дополнительные сведения о связях фактов см. [в разделе Определение связей фактов и свойств связей фактов](../multidimensional-models/define-a-fact-relationship-and-fact-relationship-properties.md).  
  
## <a name="many-to-many-dimension-relationships"></a>Связи измерений «многие ко многим»  
 В большинстве измерений каждый факт соединяется с одним и только одним элементом измерения, а один элемент измерения может быть связан с несколькими фактами. В терминах реляционных баз данных такая связь имеет название «один ко многим». Однако часто полезно соединять один факт с несколькими элементами измерения. Например, клиент банка может иметь несколько счетов (чековый, сберегательный, кредитный и инвестиционный), в то время как счет также может иметь нескольких владельцев или совладельцев. Измерение «Клиент», построенное на основе таких связей, имело бы несколько элементов, относящихся к одной транзакции по счету.  
  
 ![Логическая схема или связь измерений «многие ко многим»](../../analysis-services/dev-guide/media/as-many-dimension1.gif "Логическая схема или связь измерений «многие ко многим»")  
  
 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)][!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)]позволяет определить связь «многие ко многим» между измерением и таблицей фактов.  
  
> [!NOTE]  
>  Для обеспечения поддержки связи измерений «многие ко многим» в представлении источника данных должна быть установлена связь по внешнему ключу между всеми участвующими таблицами, как показано на предыдущей диаграмме. В противном случае вы не сможете выбрать правильную промежуточную группу мер при установлении связи на вкладке **Использование измерений** конструктора измерений.  
  
 Дополнительные сведения о связях "многие ко многим" см. в разделе Определение связи "многие ко многим" [и свойства связи "многие ко](../multidimensional-models/define-a-many-to-many-relationship-and-many-to-many-relationship-properties.md)многим".  
  
## <a name="see-also"></a>См. также:  
 [Измерения (службы Analysis Services — многомерные данные)](../multidimensional-models-olap-logical-dimension-objects/dimensions-analysis-services-multidimensional-data.md)  
  
  
