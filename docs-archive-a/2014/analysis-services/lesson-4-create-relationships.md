---
title: Занятие 5. Создание связей | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: abac1a00-f827-4c3e-a473-6db5c8a3a66f
author: minewiskan
ms.author: owend
ms.openlocfilehash: f622f88d4d400fedf24e99059eda94882b1bcc3f
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87734550"
---
# <a name="lesson-5-create-relationships"></a><span data-ttu-id="cd9e1-102">Занятие 5.: Создание связей</span><span class="sxs-lookup"><span data-stu-id="cd9e1-102">Lesson 5: Create Relationships</span></span>
  <span data-ttu-id="cd9e1-103">На этом занятии будут проверены связи, автоматически созданные во время импорта данных, и добавлены новые связи между различными таблицами.</span><span class="sxs-lookup"><span data-stu-id="cd9e1-103">In this lesson, you will verify the relationships that were created automatically when you imported data and add new relationships between different tables.</span></span> <span data-ttu-id="cd9e1-104">Связь — это соединение между двумя таблицами, которое определяет, каким образом должны соотноситься данные этих таблиц.</span><span class="sxs-lookup"><span data-stu-id="cd9e1-104">A relationship is a connection between two tables that establishes how the data in those tables should be correlated.</span></span> <span data-ttu-id="cd9e1-105">Например, таблица «Продукт» и таблица «Подкатегория продуктов» содержат связь на основе того факта, что каждый продукт принадлежит подкатегории.</span><span class="sxs-lookup"><span data-stu-id="cd9e1-105">For example, the Product table and the Product Subcategory table have a relationship based on the fact that each product belongs to a subcategory.</span></span> <span data-ttu-id="cd9e1-106">Дополнительные сведения см. в разделе [Связи (табличные службы SSAS)](tabular-models/relationships-ssas-tabular.md).</span><span class="sxs-lookup"><span data-stu-id="cd9e1-106">To learn more, see [Relationships &#40;SSAS Tabular&#41;](tabular-models/relationships-ssas-tabular.md).</span></span>  
  
 <span data-ttu-id="cd9e1-107">Предполагаемое время выполнения этого занятия: **10 минут**</span><span class="sxs-lookup"><span data-stu-id="cd9e1-107">Estimated time to complete this lesson: **10 minutes**</span></span>  
  
## <a name="prerequisites"></a><span data-ttu-id="cd9e1-108">Предварительные требования</span><span class="sxs-lookup"><span data-stu-id="cd9e1-108">Prerequisites</span></span>  
 <span data-ttu-id="cd9e1-109">Этот раздел входит в учебник по табличному моделированию, который следует изучать в предложенном порядке.</span><span class="sxs-lookup"><span data-stu-id="cd9e1-109">This topic is part of a tabular modeling tutorial, which should be completed in order.</span></span> <span data-ttu-id="cd9e1-110">Прежде чем выполнять задания в этом занятии, необходимо завершить предыдущее [Занятие 3. Переименование столбцов](rename-columns.md).</span><span class="sxs-lookup"><span data-stu-id="cd9e1-110">Before performing the tasks in this lesson, you should have completed the previous lesson: [Lesson 3: Rename Columns](rename-columns.md).</span></span>  
  
## <a name="review-existing-relationships-and-add-new-relationships"></a><span data-ttu-id="cd9e1-111">Обзор существующих связей и добавление новых</span><span class="sxs-lookup"><span data-stu-id="cd9e1-111">Review Existing Relationships and Add New Relationships</span></span>  
 <span data-ttu-id="cd9e1-112">Во время импорта данных с помощью мастера импорта таблиц было импортировано семь таблиц из базы данных AdventureWorksDW.</span><span class="sxs-lookup"><span data-stu-id="cd9e1-112">When you imported data by using the Table Import Wizard, you imported seven tables from the AdventureWorksDW database.</span></span> <span data-ttu-id="cd9e1-113">Обычно во время импорта данных из реляционного источника существующие связи автоматически импортируются вместе с данными.</span><span class="sxs-lookup"><span data-stu-id="cd9e1-113">Generally, if you import data from a relational source, existing relationships are automatically imported together with the data.</span></span> <span data-ttu-id="cd9e1-114">Однако прежде чем продолжить создание модели, нужно убедиться, что эти связи между таблицами созданы правильно.</span><span class="sxs-lookup"><span data-stu-id="cd9e1-114">However, before you proceed with authoring your model you should verify those relationships between tables were created properly.</span></span> <span data-ttu-id="cd9e1-115">В этом учебнике будут также созданы три новые связи.</span><span class="sxs-lookup"><span data-stu-id="cd9e1-115">For this tutorial, you will also add three new relationships.</span></span>  
  
#### <a name="to-review-existing-relationships"></a><span data-ttu-id="cd9e1-116">Просмотр существующих связей</span><span class="sxs-lookup"><span data-stu-id="cd9e1-116">To review existing relationships</span></span>  
  
1.  <span data-ttu-id="cd9e1-117">В среде [!INCLUDE[ssBIDevStudio](../includes/ssbidevstudio-md.md)]щелкните меню **Модель** , укажите **Представление модели**и щелкните пункт **Представление диаграммы**.</span><span class="sxs-lookup"><span data-stu-id="cd9e1-117">In [!INCLUDE[ssBIDevStudio](../includes/ssbidevstudio-md.md)], click on the **Model** menu, then point to **Model View**, and then click **Diagram View**.</span></span>  
  
     <span data-ttu-id="cd9e1-118">Конструктор моделей появится в представлении диаграммы — графическом формате отображения всех импортированных таблиц, соединенных линиями.</span><span class="sxs-lookup"><span data-stu-id="cd9e1-118">The model designer now appears in Diagram View, a graphical format displaying all of the tables you imported with lines between them.</span></span> <span data-ttu-id="cd9e1-119">Линии между таблицами обозначают связи, созданные автоматически при импорте данных.</span><span class="sxs-lookup"><span data-stu-id="cd9e1-119">The lines between tables indicate the relationships that were automatically created when you imported the data.</span></span>  
  
     <span data-ttu-id="cd9e1-120">Используйте элементы управления мини-карты в верхнем правом углу конструктора моделей, чтобы настроить представление, включив в него как можно большее число таблиц.</span><span class="sxs-lookup"><span data-stu-id="cd9e1-120">Use the minimap controls in the upper-right corner of the model designer to adjust the view to include as many of the tables as possible.</span></span> <span data-ttu-id="cd9e1-121">Вы также можете щелкнуть и перетащить таблицы в другое место, сблизив их или расположив в определенном порядке.</span><span class="sxs-lookup"><span data-stu-id="cd9e1-121">You can also click and drag tables to different locations, bringing tables closer together, or putting them in a particular order.</span></span> <span data-ttu-id="cd9e1-122">Перемещение таблиц не влияет на связи между ними.</span><span class="sxs-lookup"><span data-stu-id="cd9e1-122">Moving tables does not affect the relationships already between the tables.</span></span> <span data-ttu-id="cd9e1-123">Для просмотра всех столбцов в определенной таблице щелкните и перетащите край таблицы, чтобы увеличить или уменьшить ее.</span><span class="sxs-lookup"><span data-stu-id="cd9e1-123">To view all of the columns in a particular table, click and drag on a table edge to expand or make it smaller.</span></span>  
  
2.  <span data-ttu-id="cd9e1-124">Щелкните сплошную линию между таблицей **Клиент** и таблицей **География** .</span><span class="sxs-lookup"><span data-stu-id="cd9e1-124">Click on the solid line between the **Customer** table and the **Geography** table.</span></span> <span data-ttu-id="cd9e1-125">Сплошная линия между этими двумя таблицами показывает, что связь активна, то есть она используется по умолчанию при расчете DAX-формул.</span><span class="sxs-lookup"><span data-stu-id="cd9e1-125">The solid line between these two tables show this relationship is active, that is, it is used by default when calculating DAX formulas.</span></span>  
  
     <span data-ttu-id="cd9e1-126">Обратите внимание, что столбец **Идентификатор географии** в таблице **Клиент** и столбец **Идентификатор географии** в таблице **География** появились в блоке.</span><span class="sxs-lookup"><span data-stu-id="cd9e1-126">Notice the **Geography Id** column in the **Customer** table and the **Geography Id** column in the **Geography** table now both each appear within a box.</span></span> <span data-ttu-id="cd9e1-127">Это означает, что именно эти столбцы используются в связи.</span><span class="sxs-lookup"><span data-stu-id="cd9e1-127">This shows these are the columns used in the relationship.</span></span> <span data-ttu-id="cd9e1-128">Свойства связи теперь также отображаются в окне **Свойства** .</span><span class="sxs-lookup"><span data-stu-id="cd9e1-128">The relationship's properties now also appear in the **Properties** window.</span></span>  
  
    > [!TIP]  
    >  <span data-ttu-id="cd9e1-129">Помимо использования конструктора моделей в представлении диаграммы, можно также использовать диалоговое окно **Управление связями** для отображения связей между всеми таблицами в табличном формате.</span><span class="sxs-lookup"><span data-stu-id="cd9e1-129">In addition to using the model designer in diagram view, you can also use the **Manage Relationships** dialog box to show the relationships between all tables in a table format.</span></span> <span data-ttu-id="cd9e1-130">В меню **Таблица** выберите команду **Управление связями**.</span><span class="sxs-lookup"><span data-stu-id="cd9e1-130">Click on the **Table** menu, and then click **Manage Relationships**.</span></span> <span data-ttu-id="cd9e1-131">Диалоговое окно **Управление связями** показывает связи, которые были автоматически созданы во время импорта данных.</span><span class="sxs-lookup"><span data-stu-id="cd9e1-131">The **Manage Relationships** dialog box shows the relationships that were automatically created when you imported data.</span></span>  
  
3.  <span data-ttu-id="cd9e1-132">Используйте конструктор моделей в представлении диаграммы или диалоговое окно **Управление связями** , чтобы убедиться, что следующие связи были созданы во время импорта таблиц из базы данных AdventureWorksDW.</span><span class="sxs-lookup"><span data-stu-id="cd9e1-132">Use the model designer in diagram view, or the **Manage Relationships** dialog box, to verify the following relationships were created when each of the tables were imported from the AdventureWorksDW database:</span></span>  
  
    |<span data-ttu-id="cd9e1-133">Активно</span><span class="sxs-lookup"><span data-stu-id="cd9e1-133">Active</span></span>|<span data-ttu-id="cd9e1-134">Таблица</span><span class="sxs-lookup"><span data-stu-id="cd9e1-134">Table</span></span>|<span data-ttu-id="cd9e1-135">Связанная таблица подстановки</span><span class="sxs-lookup"><span data-stu-id="cd9e1-135">Related Lookup Table</span></span>|  
    |------------|-----------|--------------------------|  
    |<span data-ttu-id="cd9e1-136">Да</span><span class="sxs-lookup"><span data-stu-id="cd9e1-136">Yes</span></span>|<span data-ttu-id="cd9e1-137">**Клиент [Идентификатор географии]**</span><span class="sxs-lookup"><span data-stu-id="cd9e1-137">**Customer [Geography Id]**</span></span>|<span data-ttu-id="cd9e1-138">**География [Идентификатор географии]**</span><span class="sxs-lookup"><span data-stu-id="cd9e1-138">**Geography [Geography Id]**</span></span>|  
    |<span data-ttu-id="cd9e1-139">Да</span><span class="sxs-lookup"><span data-stu-id="cd9e1-139">Yes</span></span>|<span data-ttu-id="cd9e1-140">**Продукт [Идентификатор подкатегории продуктов]**</span><span class="sxs-lookup"><span data-stu-id="cd9e1-140">**Product [Product Subcategory Id]**</span></span>|<span data-ttu-id="cd9e1-141">**Подкатегория продуктов [Идентификатор подкатегории продуктов]**</span><span class="sxs-lookup"><span data-stu-id="cd9e1-141">**Product Subcategory [Product Subcategory Id]**</span></span>|  
    |<span data-ttu-id="cd9e1-142">Да</span><span class="sxs-lookup"><span data-stu-id="cd9e1-142">Yes</span></span>|<span data-ttu-id="cd9e1-143">**Подкатегория продуктов [Идентификатор категории продуктов]**</span><span class="sxs-lookup"><span data-stu-id="cd9e1-143">**Product Subcategory [Product Category Id]**</span></span>|<span data-ttu-id="cd9e1-144">**Категория продуктов [Идентификатор категории продуктов]**</span><span class="sxs-lookup"><span data-stu-id="cd9e1-144">**Product Category [Product Category Id]**</span></span>|  
    |<span data-ttu-id="cd9e1-145">Да</span><span class="sxs-lookup"><span data-stu-id="cd9e1-145">Yes</span></span>|<span data-ttu-id="cd9e1-146">**Интернет-продажи [идентификатор клиента]**</span><span class="sxs-lookup"><span data-stu-id="cd9e1-146">**Internet Sales [Customer Id]**</span></span>|<span data-ttu-id="cd9e1-147">**Клиент [идентификатор клиента]**</span><span class="sxs-lookup"><span data-stu-id="cd9e1-147">**Customer [Customer Id]**</span></span>|  
    |<span data-ttu-id="cd9e1-148">Да</span><span class="sxs-lookup"><span data-stu-id="cd9e1-148">Yes</span></span>|<span data-ttu-id="cd9e1-149">**Интернет-продажи [идентификатор продукта]**</span><span class="sxs-lookup"><span data-stu-id="cd9e1-149">**Internet Sales [Product Id]**</span></span>|<span data-ttu-id="cd9e1-150">**Продукт [идентификатор продукта]**</span><span class="sxs-lookup"><span data-stu-id="cd9e1-150">**Product [Product Id]**</span></span>|  
  
 <span data-ttu-id="cd9e1-151">Если какие-либо связи в приведенной выше таблице отсутствуют, убедитесь, что модель включает следующие таблицы: Клиент, Дата, География, Продукт, Категория продукта, Подкатегория продукта и Интернет-продажи.</span><span class="sxs-lookup"><span data-stu-id="cd9e1-151">If any of the relationships in the table above are missing, verify that your model includes the following tables: Customer, Date, Geography, Product, Product Category, Product Subcategory, and Internet Sales.</span></span> <span data-ttu-id="cd9e1-152">Если таблицы из одного подключения к источнику данных импортируются в разное время, связи между ними не создаются автоматически, поэтому их нужно настроить вручную.</span><span class="sxs-lookup"><span data-stu-id="cd9e1-152">If tables from the same data source connection are imported at separate times, any relationships between those tables will not be created and must be created manually.</span></span>  
  
 <span data-ttu-id="cd9e1-153">В некоторых случаях может потребоваться создать дополнительные связи между таблицами в модели для реализации определенной бизнес-логики.</span><span class="sxs-lookup"><span data-stu-id="cd9e1-153">In some cases, you may need to create additional relationships between tables in your model to support certain business logic.</span></span> <span data-ttu-id="cd9e1-154">Во время выполнения этого учебника мы создадим три дополнительные связи между таблицами «Интернет-продажи» и «Дата».</span><span class="sxs-lookup"><span data-stu-id="cd9e1-154">For this tutorial, you need to create three additional relationships between the Internet Sales table and the Date table.</span></span>  
  
#### <a name="to-add-new-relationships-between-tables"></a><span data-ttu-id="cd9e1-155">Добавление новых связей между таблицами</span><span class="sxs-lookup"><span data-stu-id="cd9e1-155">To add new relationships between tables</span></span>  
  
1.  <span data-ttu-id="cd9e1-156">В конструкторе моделей в таблице **Интернет-продажи** щелкните и удерживайте столбец **Дата заказа** , затем перетащите курсор в столбец **Дата** в таблице **Дата** и отпустите.</span><span class="sxs-lookup"><span data-stu-id="cd9e1-156">In the model designer, in the **Internet Sales** table, click and hold on the **Order Date** column, then drag the cursor to the **Date** column in the **Date** table, and then release.</span></span>  
  
     <span data-ttu-id="cd9e1-157">Появится сплошная линия, которая покажет, что между столбцом **Дата заказа** в таблице **Интернет-продажи** и столбцом **Дата** в таблице **Дата** была создана активная связь.</span><span class="sxs-lookup"><span data-stu-id="cd9e1-157">A solid line appears showing you have created an active relationship between the **Order Date** column in the **Internet Sales** table and the **Date** column in the **Date** table.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="cd9e1-158">Во время создания связей порядок между первичной таблицей и связанной таблицей поиска автоматически устанавливается в надлежащем виде.</span><span class="sxs-lookup"><span data-stu-id="cd9e1-158">When creating relationships, the order between the primary table and the related lookup table is automatically put in the correct order.</span></span>  
  
2.  <span data-ttu-id="cd9e1-159">В таблице **Интернет-продажи** щелкните и удерживайте столбец **Дата выполнения заказа** , затем перетащите курсор в столбец **Дата** в таблице **Дата** и отпустите.</span><span class="sxs-lookup"><span data-stu-id="cd9e1-159">In the **Internet Sales** table, click and hold on the **Due Date** column, then drag the cursor to the **Date** column in the **Date** table, and then release.</span></span>  
  
     <span data-ttu-id="cd9e1-160">Появится пунктирная линия, которая покажет, что между столбцом **Дата выполнения заказа** в таблице **Интернет-продажи** и столбцом **Дата** в таблице **Дата** была создана неактивная связь.</span><span class="sxs-lookup"><span data-stu-id="cd9e1-160">A dotted line appears showing you have created an inactive relationship between the **Due Date** column in the **Internet Sales** table and the **Date** column in the **Date** table.</span></span> <span data-ttu-id="cd9e1-161">Можно использовать несколько связей между таблицами, но одновременно может быть активна только одна из них.</span><span class="sxs-lookup"><span data-stu-id="cd9e1-161">You can have multiple relationships between tables, but only one relationship can be active at a time.</span></span>  
  
3.  <span data-ttu-id="cd9e1-162">Наконец, создайте еще одну связь. В таблице **Интернет-продажи** щелкните и удерживайте столбец **Дата отправки** , затем перетащите курсор в столбец **Дата** в таблице **Дата** и отпустите</span><span class="sxs-lookup"><span data-stu-id="cd9e1-162">Finally, create one more relationship; in the **Internet Sales** table, click and hold on the **Ship Date** column, then drag the cursor to the **Date** column in the **Date** table, and then release.</span></span>  
  
     <span data-ttu-id="cd9e1-163">Появится пунктирная линия, которая покажет, что между столбцом **Дата отправки** в таблице **Интернет-продажи** и столбцом **Дата** в таблице **Дата** была создана неактивная связь.</span><span class="sxs-lookup"><span data-stu-id="cd9e1-163">A dotted line appears showing you have created an inactive relationship between the **Ship Date** column in the **Internet Sales** table and the **Date** column in the **Date** table.</span></span>  
  
## <a name="next-step"></a><span data-ttu-id="cd9e1-164">Следующий шаг</span><span class="sxs-lookup"><span data-stu-id="cd9e1-164">Next Step</span></span>  
 <span data-ttu-id="cd9e1-165">Чтобы продолжить изучение этого занятия, перейдите к следующему занятию: [Занятие 6. Создание вычисляемых столбцов](lesson-5-create-calculated-columns.md).</span><span class="sxs-lookup"><span data-stu-id="cd9e1-165">To continue this lesson, go to the next lesson: [Lesson 6: Create Calculated Columns](lesson-5-create-calculated-columns.md).</span></span>  
  
  
