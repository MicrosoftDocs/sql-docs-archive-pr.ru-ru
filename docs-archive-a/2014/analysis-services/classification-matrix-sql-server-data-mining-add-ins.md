---
title: Матрица классификации (SQL Server надстройки интеллектуального анализа данных) | Документация Майкрософт
ms.custom: ''
ms.date: 12/29/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
helpviewer_keywords:
- mining models, validating
- classification matrix
- confusion table
- mining models, testing
ms.assetid: d6f620f4-39af-4714-9628-28ce3c361fca
author: minewiskan
ms.author: owend
ms.openlocfilehash: a930f2628ac41fc5886cf41d7ec0ad274b42bf2f
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87656786"
---
# <a name="classification-matrix-sql-server-data-mining-add-ins"></a><span data-ttu-id="56e6d-102">Матрица классификации (надстройки интеллектуального анализа данных SQL Server)</span><span class="sxs-lookup"><span data-stu-id="56e6d-102">Classification Matrix (SQL Server Data Mining Add-ins)</span></span>
  <span data-ttu-id="56e6d-103">![Кнопка «Матрица классификации» на ленте ленте «Интеллектуальный анализ данных»](media/dmc-cmatrix.gif "Кнопка «Матрица классификации» на ленте ленте «Интеллектуальный анализ данных»")</span><span class="sxs-lookup"><span data-stu-id="56e6d-103">![Classification Matrix button, Data Mining ribbon](media/dmc-cmatrix.gif "Classification Matrix button, Data Mining ribbon")</span></span>  
  
 <span data-ttu-id="56e6d-104">Матрицу классификации можно использовать для оценки точности прогнозирующей модели.</span><span class="sxs-lookup"><span data-stu-id="56e6d-104">You can use the classification matrix to assess the accuracy of a model for prediction.</span></span> <span data-ttu-id="56e6d-105">Для создания матрицы классификации необходимо пропустить набор проверочных данных через модель, притом средство матрицы классификации сравнит реальные значения из проверочного набора с прогнозами, выполненными моделью.</span><span class="sxs-lookup"><span data-stu-id="56e6d-105">To generate a classification matrix, you run a set of testing data through the model, and the classification matrix tool compares the actual values from the testing set against the predictions made by the model.</span></span> <span data-ttu-id="56e6d-106">Анализируя данную матрицу, можно сразу увидеть, насколько модель точна и как часто ее прогнозы неверны.</span><span class="sxs-lookup"><span data-stu-id="56e6d-106">By looking at the matrix, you can tell at a glance how often the model is correct, and how often it predicts wrongly.</span></span>  
  
 <span data-ttu-id="56e6d-107">В этих надстройках используйте мастер **матрицы классификации** , чтобы выбрать модель, указать проверочные данные, а затем сформировать матрицу результатов.</span><span class="sxs-lookup"><span data-stu-id="56e6d-107">In these add-ins, use the **Classification Matrix** wizard to select a model, specify the testing data, and then generate a results matrix.</span></span>  
  
## <a name="how-to-read-a-classification-matrix"></a><span data-ttu-id="56e6d-108">Чтение матрицы классификации</span><span class="sxs-lookup"><span data-stu-id="56e6d-108">How to Read a Classification Matrix</span></span>  
 <span data-ttu-id="56e6d-109">Предположим, что ваша цель состоит в проектировании программы лояльности клиентов и назначении клиентам соответствующих категорий, чтобы вы могли предоставить им соответствующий уровень поощрения.</span><span class="sxs-lookup"><span data-stu-id="56e6d-109">Let's assume your objective is to design a customer loyalty program and then assign customers to appropriate categories, so that you can provide them with the appropriate level of incentives.</span></span> <span data-ttu-id="56e6d-110">Вы реализовали три уровня программы «награда» — бронзовый, серебристый и золотой, и это дает клиентам на пробном этапе.</span><span class="sxs-lookup"><span data-stu-id="56e6d-110">You have implemented three levels for the reward program -- bronze, silver, and gold - and given these out to customers in a trial phase.</span></span> <span data-ttu-id="56e6d-111">Кроме того, создана модель, которая анализирует клиентов и прогнозирует правильные категории.</span><span class="sxs-lookup"><span data-stu-id="56e6d-111">You have also designed a model that analyzes customers and predicts the correct categories.</span></span> <span data-ttu-id="56e6d-112">Теперь матрица классификации позволит с помощью проверочных данных установить, насколько точно модель прогнозирует правильный выбор для всех клиентов.</span><span class="sxs-lookup"><span data-stu-id="56e6d-112">Now you will use the classification matrix on the trial data to determine how good the model was at predicting the correct offer for all customers.</span></span>  
  
 <span data-ttu-id="56e6d-113">Таблица из матрицы классификации показывает, сколько клиентов попадают в каждую категорию на основе модели, и сравнивает этот результат с количеством клиентов, которые фактически зарегистрировались для каждого уровня вознаграждения.</span><span class="sxs-lookup"><span data-stu-id="56e6d-113">The table from the classification matrix tells you how many customers would be assigned to each category based on the model, and compares that result to the number of customers who actually signed up for each reward level.</span></span>  
  
||<span data-ttu-id="56e6d-114">Бронзовый (по факту)</span><span class="sxs-lookup"><span data-stu-id="56e6d-114">Bronze (Actual)</span></span>|<span data-ttu-id="56e6d-115">Золотой (по факту)</span><span class="sxs-lookup"><span data-stu-id="56e6d-115">Gold (Actual)</span></span>|<span data-ttu-id="56e6d-116">Серебряный (по факту)</span><span class="sxs-lookup"><span data-stu-id="56e6d-116">Silver (Actual)</span></span>|  
|-|-----------------------|---------------------|-----------------------|  
|<span data-ttu-id="56e6d-117">Бронзовая</span><span class="sxs-lookup"><span data-stu-id="56e6d-117">Bronze</span></span>|<span data-ttu-id="56e6d-118">**94,45%**</span><span class="sxs-lookup"><span data-stu-id="56e6d-118">**94.45%**</span></span>|<span data-ttu-id="56e6d-119">15,18%</span><span class="sxs-lookup"><span data-stu-id="56e6d-119">15.18%</span></span>|<span data-ttu-id="56e6d-120">1,70 %</span><span class="sxs-lookup"><span data-stu-id="56e6d-120">1.70%</span></span>|  
|<span data-ttu-id="56e6d-121">Золотая</span><span class="sxs-lookup"><span data-stu-id="56e6d-121">Gold</span></span>|<span data-ttu-id="56e6d-122">2,72%</span><span class="sxs-lookup"><span data-stu-id="56e6d-122">2.72%</span></span>|<span data-ttu-id="56e6d-123">**84,82%**</span><span class="sxs-lookup"><span data-stu-id="56e6d-123">**84.82%**</span></span>|<span data-ttu-id="56e6d-124">0,00%</span><span class="sxs-lookup"><span data-stu-id="56e6d-124">0.00%</span></span>|  
|<span data-ttu-id="56e6d-125">Серебряная</span><span class="sxs-lookup"><span data-stu-id="56e6d-125">Silver</span></span>|<span data-ttu-id="56e6d-126">1,84%</span><span class="sxs-lookup"><span data-stu-id="56e6d-126">1.84%</span></span>|<span data-ttu-id="56e6d-127">0,00%</span><span class="sxs-lookup"><span data-stu-id="56e6d-127">0.00%</span></span>|<span data-ttu-id="56e6d-128">**93,80%**</span><span class="sxs-lookup"><span data-stu-id="56e6d-128">**93.80%**</span></span>|  
|<span data-ttu-id="56e6d-129">*Правильно*</span><span class="sxs-lookup"><span data-stu-id="56e6d-129">*Correct*</span></span>|<span data-ttu-id="56e6d-130">*95,45%*</span><span class="sxs-lookup"><span data-stu-id="56e6d-130">*95.45%*</span></span>|<span data-ttu-id="56e6d-131">*84,82%*</span><span class="sxs-lookup"><span data-stu-id="56e6d-131">*84.82%*</span></span>|<span data-ttu-id="56e6d-132">*98,30%*</span><span class="sxs-lookup"><span data-stu-id="56e6d-132">*98.30%*</span></span>|  
|<span data-ttu-id="56e6d-133">*Ошибка классификации*</span><span class="sxs-lookup"><span data-stu-id="56e6d-133">*Misclassified*</span></span>|<span data-ttu-id="56e6d-134">*4,55%*</span><span class="sxs-lookup"><span data-stu-id="56e6d-134">*4.55%*</span></span>|<span data-ttu-id="56e6d-135">*15,18%*</span><span class="sxs-lookup"><span data-stu-id="56e6d-135">*15.18%*</span></span>|<span data-ttu-id="56e6d-136">*1,70%*</span><span class="sxs-lookup"><span data-stu-id="56e6d-136">*1.70%*</span></span>|  
  
-   <span data-ttu-id="56e6d-137">Каждый столбец содержит фактические значения из проверочного набора данных.</span><span class="sxs-lookup"><span data-stu-id="56e6d-137">Each column shows the actual values in the testing dataset.</span></span>  
  
-   <span data-ttu-id="56e6d-138">Каждая строка содержит прогнозируемые значения.</span><span class="sxs-lookup"><span data-stu-id="56e6d-138">Each row shows the predicted values.</span></span>  
  
-   <span data-ttu-id="56e6d-139">Значения, выделенные полужирным шрифтом, расположенные по диагонали из верхнего левого угла в нижний правый угол матрицы, показывают, где модель дала верный результат.</span><span class="sxs-lookup"><span data-stu-id="56e6d-139">The values in boldface, which run diagonally from the upper-left corner to the lower-right corner of the matrix, give you the picture of what the model got right.</span></span>  
  
-   <span data-ttu-id="56e6d-140">Все остальные значения вне диагонали — это ошибки.</span><span class="sxs-lookup"><span data-stu-id="56e6d-140">All other values outside the diagonal represent errors.</span></span> <span data-ttu-id="56e6d-141">Некоторые ошибки представляют ложные результаты, то есть модель спрогнозировала, что клиент выберет золотую программу, но это был неверный прогноз.</span><span class="sxs-lookup"><span data-stu-id="56e6d-141">Some errors are false positives, meaning the model predicted the customer would join the gold program but was wrong.</span></span>  <span data-ttu-id="56e6d-142">В зависимости от области применения модели, ложные положительные результаты могут обходиться очень дорого.</span><span class="sxs-lookup"><span data-stu-id="56e6d-142">Depending on your domain, false positives can be very costly.</span></span>  
  
     <span data-ttu-id="56e6d-143">Другие результаты ложноотрицательные, т. е. модель спрогнозировала, что клиент не будет заинтересован, однако на самом деле клиент зарегистрировался в программе.</span><span class="sxs-lookup"><span data-stu-id="56e6d-143">Others are false negatives, meaning the model predicted the customer would not be interested though he or she did join the program.</span></span> <span data-ttu-id="56e6d-144">Опять же в зависимости от области использования издержки от упущенной возможности могут быть значительными.</span><span class="sxs-lookup"><span data-stu-id="56e6d-144">Again, depending on the problem domain, this lost opportunity cost might be significant.</span></span>  
  
## <a name="using-the-classification-matrix-wizard"></a><span data-ttu-id="56e6d-145">Использование мастера классификации матрицы</span><span class="sxs-lookup"><span data-stu-id="56e6d-145">Using the Classification Matrix Wizard</span></span>  
  
1.  <span data-ttu-id="56e6d-146">Выберите модель интеллектуального анализа данных, на основе которой будет производиться прогнозирование.</span><span class="sxs-lookup"><span data-stu-id="56e6d-146">Select the mining model on which to base predictions.</span></span>  
  
2.  <span data-ttu-id="56e6d-147">Выберите источник новых проверочных данных либо воспользуйтесь проверочными данными, сохраненными в структуре.</span><span class="sxs-lookup"><span data-stu-id="56e6d-147">Select a source of new test data, or use testing data that was saved with the structure.</span></span>  
  
3.  <span data-ttu-id="56e6d-148">Выберите столбец, для которого требуется оценить точность прогнозирования.</span><span class="sxs-lookup"><span data-stu-id="56e6d-148">Select the column for which you want to assess accuracy.</span></span> <span data-ttu-id="56e6d-149">При создании матрицы можно выбрать только один столбец, однако столбец может иметь несколько значений.</span><span class="sxs-lookup"><span data-stu-id="56e6d-149">You can choose only one column when creating a matrix, but the column can have multiple values.</span></span>  
  
     <span data-ttu-id="56e6d-150">Совет. может быть трудно интерпретировать матрицу классификации, если прогнозируемый столбец содержит много столбцов для сравнения.</span><span class="sxs-lookup"><span data-stu-id="56e6d-150">Tip: It can be difficult to interpret a classification matrix if your predictable column has many columns to compare.</span></span>  
  
     <span data-ttu-id="56e6d-151">На странице **Выбор столбцов для прогнозирования** можно также указать, следует ли отображать количество неверных и неверных значений, или отобразить процент.</span><span class="sxs-lookup"><span data-stu-id="56e6d-151">In the **Select Columns to Predict** page, you can also specify whether you want to display the count of incorrect and incorrect values, or display a percentage.</span></span>  
  
4.  <span data-ttu-id="56e6d-152">На странице «Выбор источника данных» укажите, используются внешние проверочные данные или проверочные данные, сохраненные в модели.</span><span class="sxs-lookup"><span data-stu-id="56e6d-152">On the Select Source Data page, indicate whether you are using external testing data, or the test data saved with the model.</span></span>  
  
5.  <span data-ttu-id="56e6d-153">При использовании внешних проверочных данных необходимо сопоставлять модель с входными столбцами на странице **Определение связи** мастера.</span><span class="sxs-lookup"><span data-stu-id="56e6d-153">If you use external testing data, you need to map the model to the input columns on the **Specify Relationship** page of the wizard.</span></span>  
  
     <span data-ttu-id="56e6d-154">Если используется внедренный набор проверочных данных, то сопоставление выполняется автоматически.</span><span class="sxs-lookup"><span data-stu-id="56e6d-154">If you use the embedded test data set, the mapping is done for you</span></span>  
  
6.  <span data-ttu-id="56e6d-155">Нажмите кнопку **Готово** , чтобы выполнить прогнозы для модели и сформировать матрицу классификации.</span><span class="sxs-lookup"><span data-stu-id="56e6d-155">Click **Finish** to run predictions against the model and generate the classification matrix.</span></span>  
  
     <span data-ttu-id="56e6d-156">Мастер создает отчет, в котором содержится матрица классификации и другие данные анализа.</span><span class="sxs-lookup"><span data-stu-id="56e6d-156">The wizard creates a report that contains the classification matrix and other details about the analysis.</span></span> <span data-ttu-id="56e6d-157">Этот отчет сохраняется в виде таблицы Excel со сводкой над отчетом, в которой указано, сколько вариантов было спрогнозировано верно, а сколько неверно.</span><span class="sxs-lookup"><span data-stu-id="56e6d-157">This report is saved as a table in Excel, with a summary above the report that indicates how many cases were correctly predicted and how many predictions were wrong.</span></span>  
  
### <a name="requirements"></a><span data-ttu-id="56e6d-158">Требования</span><span class="sxs-lookup"><span data-stu-id="56e6d-158">Requirements</span></span>  
  
-   <span data-ttu-id="56e6d-159">Чтобы создать матрицу классификации, требуется доступ к существующей модели интеллектуального анализа данных, которая поддерживает измерение точности.</span><span class="sxs-lookup"><span data-stu-id="56e6d-159">To create a classification matrix, you must have access to an existing mining model that supports accuracy measurement.</span></span> <span data-ttu-id="56e6d-160">Модели прогнозирования и взаимосвязей нельзя измерить с помощью этого средства.</span><span class="sxs-lookup"><span data-stu-id="56e6d-160">Forecasting models and association models cannot be measured using this tool.</span></span>  
  
-   <span data-ttu-id="56e6d-161">Измеряемая модель должна прогнозировать значение, которое является дискретным или было преобразовано в дискретное.</span><span class="sxs-lookup"><span data-stu-id="56e6d-161">The model that you are measuring needs to predict a value that is either discrete or that has already been discretized.</span></span>  
  
-   <span data-ttu-id="56e6d-162">Если вы не использовали параметр для сохранения проверочного набора вместе с структурой или моделью, необходимо получить набор входных данных, который содержит по сути такое же количество столбцов с совпадающими типами данных, как и для модели.</span><span class="sxs-lookup"><span data-stu-id="56e6d-162">If you didn't use the option to save a testing set along with your structure or model, you need to obtain an input data set that has essentially the same number of columns, with matching data types, as those used in the model.</span></span>  
  
-   <span data-ttu-id="56e6d-163">Как модель интеллектуального анализа данных, так и новые данные, которые используются для проверки, должны содержать не менее одного столбца, подходящего для прогнозирования, а сами столбцы должны хранить данные одного типа.</span><span class="sxs-lookup"><span data-stu-id="56e6d-163">Both the data mining model and the new data that you are using for testing must contain at least one column that can be predicted, and the columns must contain the same kind of data.</span></span>  
  
### <a name="known-issues"></a><span data-ttu-id="56e6d-164">Известные проблемы</span><span class="sxs-lookup"><span data-stu-id="56e6d-164">Known Issues</span></span>  
 <span data-ttu-id="56e6d-165">В SQL Server 2012 и SQL Server 2014 возможность сопоставлять внутренний проверочный набор данных с моделью не работает в средстве **классификации матрицы** .</span><span class="sxs-lookup"><span data-stu-id="56e6d-165">In SQL Server 2012 and SQL Server 2014, the ability to map the internal test data set to the model is not working in the **Classification Matrix** tool.</span></span> <span data-ttu-id="56e6d-166">Однако можно указать внешний набор данных и затем выбрать обучающий набор в качестве входного, чтобы выявить ошибку исходного набора данных.</span><span class="sxs-lookup"><span data-stu-id="56e6d-166">However, you can specify an external data set, and then select the training set as the input to determine error on the original data set.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="56e6d-167">См. также:</span><span class="sxs-lookup"><span data-stu-id="56e6d-167">See Also</span></span>  
 <span data-ttu-id="56e6d-168">[Проверка моделей и использование моделей для прогнозирования &#40;надстройки интеллектуального анализа данных для Excel&#41;](validating-models-and-using-models-for-prediction-data-mining-add-ins-for-excel.md) </span><span class="sxs-lookup"><span data-stu-id="56e6d-168">[Validating Models and Using Models for Prediction &#40;Data Mining Add-ins for Excel&#41;](validating-models-and-using-models-for-prediction-data-mining-add-ins-for-excel.md) </span></span>  
 <span data-ttu-id="56e6d-169">[Изучите &#40;данных SQL Server надстройки интеллектуального анализа данных&#41;](explore-data-sql-server-data-mining-add-ins.md) </span><span class="sxs-lookup"><span data-stu-id="56e6d-169">[Explore Data &#40;SQL Server Data Mining Add-ins&#41;](explore-data-sql-server-data-mining-add-ins.md) </span></span>  
 [<span data-ttu-id="56e6d-170">Определение категорий &#40;средств анализа таблиц для Excel&#41;</span><span class="sxs-lookup"><span data-stu-id="56e6d-170">Detect Categories &#40;Table Analysis Tools for Excel&#41;</span></span>](detect-categories-table-analysis-tools-for-excel.md)  
  
  
