---
title: Свойства пула потоков | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
helpviewer_keywords:
- PriorityRatio property
- threads [Analysis Services]
- MinThreads property
- NumThreads property
- MaxThreads property
- Concurrency property
ms.assetid: e2697bb6-6d3f-4621-b9fd-575ac39c2185
author: minewiskan
ms.author: owend
ms.openlocfilehash: 3a7c8ab1ae97cc00e7c46060db85fa48eff700ab
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87736929"
---
# <a name="thread-pool-properties"></a><span data-ttu-id="b2ef7-102">Свойства пула потоков</span><span class="sxs-lookup"><span data-stu-id="b2ef7-102">Thread Pool Properties</span></span>
  [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] <span data-ttu-id="b2ef7-103">использует многопоточность во многих операциях, повышая общую производительность сервера за счет параллельного выполнения нескольких заданий.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-103">uses multi-threading for many operations, improving overall server performance by running multiple jobs in parallel.</span></span> <span data-ttu-id="b2ef7-104">Чтобы эффективнее управлять потоками, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] использует пулы потоков для предварительного выделения ресурсов и обеспечения доступности потоков для последующих заданий.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-104">To manage threads more efficiently, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] uses thread pools to preallocate threads and facilitate thread availability for the next job.</span></span>

 <span data-ttu-id="b2ef7-105">Каждый экземпляр [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] поддерживает собственный набор пулов потоков.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-105">Each instance of [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] maintains its own set of thread pools.</span></span> <span data-ttu-id="b2ef7-106">Имеются важные различия между тем, как табличные и многомерные экземпляры используют пулы потоков.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-106">There are significant differences in how tabular and multidimensional instances use thread pools.</span></span> <span data-ttu-id="b2ef7-107">Самое важное отличие заключается в том, что только в многомерных решениях используется `IOProcess` пул потоков.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-107">The most important difference is that only multidimensional solutions use the `IOProcess` thread pool.</span></span> <span data-ttu-id="b2ef7-108">Таким образом, свойство `PerNumaNode`, описанное в этом разделе, для табличных экземпляров не задействуется.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-108">As such, the `PerNumaNode` property, described in this topic, is not meaningful for Tabular instances.</span></span>

 <span data-ttu-id="b2ef7-109">Этот раздел состоит из следующих подразделов.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-109">This topic contains the following sections:</span></span>

-   [<span data-ttu-id="b2ef7-110">Управление потоками в службах Analysis Services</span><span class="sxs-lookup"><span data-stu-id="b2ef7-110">Thread Management in Analysis Services</span></span>](#bkmk_threadarch)

-   [<span data-ttu-id="b2ef7-111">Справочник по свойствам пулов потоков</span><span class="sxs-lookup"><span data-stu-id="b2ef7-111">Thread Pool Property Reference</span></span>](#bkmk_propref)

-   [<span data-ttu-id="b2ef7-112">Присвоить GroupAffinity потокам привязать процессоров в группе процессоров</span><span class="sxs-lookup"><span data-stu-id="b2ef7-112">Set GroupAffinity to affinitize threads to processors in a processor group</span></span>](#bkmk_groupaffinity)

-   [<span data-ttu-id="b2ef7-113">Задайте параметр PerNumaNode, чтобы привязать потоки ввода-вывода к процессорам в узле NUMA.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-113">Set PerNumaNode to affinitize IO threads to processors in a NUMA node</span></span>](#bkmk_pernumanode)

-   [<span data-ttu-id="b2ef7-114">Определение текущих параметров пула потоков</span><span class="sxs-lookup"><span data-stu-id="b2ef7-114">Determine current thread pool settings</span></span>](#bkmk_currentsettings)

-   [<span data-ttu-id="b2ef7-115">Зависимые или связанные свойства</span><span class="sxs-lookup"><span data-stu-id="b2ef7-115">Dependent or Related Properties</span></span>](#bkmk_related)

-   [<span data-ttu-id="b2ef7-116">О файле MSMDSRV.INI</span><span class="sxs-lookup"><span data-stu-id="b2ef7-116">About MSMDSRV.INI</span></span>](#bkmk_msmdrsrvini)

> [!NOTE]
>  <span data-ttu-id="b2ef7-117">Табличное развертывание в системах NUMA в данном разделе не освещается.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-117">Tabular deployment on NUMA systems is out of scope for this topic.</span></span> <span data-ttu-id="b2ef7-118">Табличные решения можно успешно развертывать в системах NUMA, но производительность хранимых в памяти баз данных, используемых в табличных моделях, может быть ограничена на сильно масштабируемых архитектурах.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-118">Although tabular solutions can be successfully deployed on NUMA systems, the performance characteristics of the in-memory database technology used by tabular models may show limited benefits on a highly scaled up architectures.</span></span> <span data-ttu-id="b2ef7-119">Дополнительные сведения см. в статьях [Практический пример использования служб Analysis Services. Использование табличных моделей в крупномасштабных коммерческих решениях](https://msdn.microsoft.com/library/dn751533.aspx) и [Подбор оборудования для табличного решения](https://go.microsoft.com/fwlink/?LinkId=330359).</span><span class="sxs-lookup"><span data-stu-id="b2ef7-119">For more information, see [Analysis Services Case Study: Using Tabular Models in Large-scale Commercial Solutions](https://msdn.microsoft.com/library/dn751533.aspx) and [Hardware Sizing a Tabular Solution](https://go.microsoft.com/fwlink/?LinkId=330359).</span></span>

##  <a name="thread-management-in-analysis-services"></a><a name="bkmk_threadarch"></a><span data-ttu-id="b2ef7-120">Управление потоками в Analysis Services</span><span class="sxs-lookup"><span data-stu-id="b2ef7-120">Thread Management in Analysis Services</span></span>
 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] <span data-ttu-id="b2ef7-121">применяет многопоточность, используя преимущества доступных ресурсов процессора путем увеличения количества параллельно выполняемых задач.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-121">uses multi-threading to take advantage of the available CPU resources by increasing the number of tasks executing in parallel.</span></span> <span data-ttu-id="b2ef7-122">Подсистема хранилища является многопоточной.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-122">The storage engine is multi-threaded.</span></span> <span data-ttu-id="b2ef7-123">Примеры многопоточных заданий, выполняемых в подсистеме хранилища: параллельная обработка объектов или обработка отдельных запросов, которые передаются в подсистему хранилища, а также возврат запрошенных данных.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-123">Examples of multi-threaded jobs that execute within the storage engine include processing objects in parallel or handling discrete queries that have been pushed to the storage engine, or returning data values requested by a query.</span></span> <span data-ttu-id="b2ef7-124">Модуль формул из-за особенностей последовательных вычислений выполняется в одном потоке.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-124">The formula engine, due to the serial nature of the calculations it evaluates, is single threaded.</span></span> <span data-ttu-id="b2ef7-125">Каждый запрос в основном выполняется в одном потоке, который запрашивает и ожидает данные от подсистемы хранилища.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-125">Each query executes primarily on a single thread, requesting and often waiting for data returned by the storage engine.</span></span> <span data-ttu-id="b2ef7-126">Потоки выполнения запроса выполняются дольше и завершаются только после выполнения всего запроса.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-126">Query threads have longer executions, and are released only after the entire query is completed.</span></span>

 <span data-ttu-id="b2ef7-127">По умолчанию в версиях [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] и более поздних [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] будет использовать все доступные логические процессоры, до 640 в тех системах, которые выполняются на выпусках Windows и SQL Server с более широкими возможностями.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-127">By default, on versions [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] and later, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] will use all available logical processors, up to 640 on systems running higher editions of Windows and SQL Server.</span></span> <span data-ttu-id="b2ef7-128">При запуске процесс msmdsrv.exe будет назначен определенной группе процессоров, но со временем потоки могут быть назначены на любой логический процессор, в любой группе.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-128">Upon start up, the msmdsrv.exe process will be assigned to a specific processor group, but over time threads can be scheduled on any logical processor, in any processor group.</span></span>

 <span data-ttu-id="b2ef7-129">Одним из побочных эффектов использования большого количества процессоров является то, что иногда может возникать снижение производительности из-за распределения нагрузок от запросов и обработки по большому количеству процессоров и увеличения состязания за общие структуры данных.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-129">One side-effect of using a large number of processors is that you can sometimes experience performance degradation as query and processing loads are spread out across a large number of processors and contention for shared data structures increase.</span></span> <span data-ttu-id="b2ef7-130">Это, в частности, может произойти не только в высокопроизводительных системах, использующих архитектуру NUMA, но и в системах, отличных от NUMA, в которых выполняется много приложений, обрабатывающих большой объем данных, на том же оборудовании.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-130">This can occur particularly on high-end systems that use NUMA architecture, but also on non-NUMA systems running multiple data intensive applications on the same hardware.</span></span>

 <span data-ttu-id="b2ef7-131">Чтобы устранить эту проблему, можно установить соответствие между типами операций [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] и определенным набором логических процессоров.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-131">To alleviate this problem, you can set affinity between types of [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] operations and a specific set of logical processors.</span></span> <span data-ttu-id="b2ef7-132">Свойство `GroupAffinity` позволяет создавать пользовательские маски сходства, указывающие системный ресурс для каждого из типов пулов потоков, управление которыми осуществляют службы [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="b2ef7-132">The `GroupAffinity` property lets you create custom affinity masks that specify which system resource to use for each of the thread pool types managed by [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)].</span></span>

 <span data-ttu-id="b2ef7-133">Пользовательское сходство может быть задано для любого из пяти пулов потоков, используемых для различных рабочих нагрузок [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="b2ef7-133">Custom affinity can be set on any of the five thread pools used for various [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] workloads:</span></span>

-   <span data-ttu-id="b2ef7-134">**Parsing \ Short**  — пул синтаксического анализа для коротких запросов.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-134">**Parsing \ Short**  is a parsing pool for short requests.</span></span> <span data-ttu-id="b2ef7-135">Запросы, которые умещаются в одном сетевом сообщении, считаются короткими.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-135">Requests that fit within a single network message are considered short.</span></span>

-   <span data-ttu-id="b2ef7-136">**Parsing \ Long**  — пул синтаксического анализа для прочих запросов, не вмещающихся в одиночное сетевое сообщение.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-136">**Parsing \ Long**  is a parsing pool for all other requests that do not fit within a single network message.</span></span>

    > [!NOTE]
    >  <span data-ttu-id="b2ef7-137">Поток из любого пула синтаксического анализа можно использовать для выполнения запроса.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-137">A thread from either parsing pool can be used to execute a query.</span></span> <span data-ttu-id="b2ef7-138">Запросы, которые могут быть выполнены быстро, такие как запросы Discover или Cancel, иногда выполняются сразу же, а не ставятся в очередь запросов пула потоков.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-138">Queries that execute quickly, such as a fast Discover or Cancel request, are sometimes executed immediately rather than queued to the Query thread pool.</span></span>

-   <span data-ttu-id="b2ef7-139">`Query`— Это пул потоков, выполняющий все запросы, которые не обрабатываются пулом потоков анализа.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-139">`Query` is the thread pool that executes all requests that are not handled by the parsing thread pool.</span></span> <span data-ttu-id="b2ef7-140">Потоки в этом пуле выполняют операции всех типов, например команды поиска, MDX, DAX, DMX и DDL.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-140">Threads in this thread pool will execute all types of operations, such as Discovers, MDX, DAX, DMX, and DDL commands.</span></span>

-   <span data-ttu-id="b2ef7-141">`IOProcess`используется для заданий ввода-вывода, связанных с запросами подсистемы хранилища в многомерном модуле.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-141">`IOProcess` is used for IO jobs associated with storage engine queries in the multidimensional engine.</span></span> <span data-ttu-id="b2ef7-142">Ожидается, что задания, выполняемые этими потоками, не имеют зависимостей от других потоков.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-142">The work done by these threads is expected to not have dependencies on other threads.</span></span> <span data-ttu-id="b2ef7-143">Эти потоки обычно просматривают один сегмент секции и выполняют фильтрацию и статистическую обработку данных сегмента.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-143">These threads will typically be scanning a single segment of a partition and performing filtering and aggregation on the segment data.</span></span> <span data-ttu-id="b2ef7-144">`IOProcess`потоки особенно чувствительны к конфигурациям оборудования NUMA.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-144">`IOProcess` threads are particularly sensitive to NUMA hardware configurations.</span></span> <span data-ttu-id="b2ef7-145">Таким образом, этот пул потоков имеет `PerNumaNode` свойство конфигурации, которое можно использовать для настройки производительности при необходимости.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-145">As such, this thread pool has the `PerNumaNode` configuration property which can be used to tune the performance if needed.</span></span>

-   <span data-ttu-id="b2ef7-146">`Process`параметр предназначен для более длинных заданий подсистемы хранилища, включая операции агрегирования, индексирования и фиксации.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-146">`Process` is for longer duration storage engine jobs, including aggregations, indexing, and commit operations.</span></span> <span data-ttu-id="b2ef7-147">Режим хранилища ROLAP также использует потоки из пула потоков Processing.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-147">ROLAP storage mode also uses threads from the Processing thread pool.</span></span>

> [!NOTE]
>  <span data-ttu-id="b2ef7-148">Несмотря на то, что Msmdsrv.ini содержит параметры пула потоков в `VertiPaq` разделе, `VertiPaq` \\ `ThreadPool` \\ `GroupAffinity` и `ThreadPool` \\ `CPUs` они предназначены для недокументированных документов.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-148">Although Msmdsrv.ini has thread pool settings in the `VertiPaq` section, `VertiPaq`\\`ThreadPool`\\`GroupAffinity` and `ThreadPool`\\`CPUs` are purposely undocumented.</span></span> <span data-ttu-id="b2ef7-149">Эти свойства в настоящий момент недействительны и зарезервированы для использования в будущем.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-149">These properties are currently inoperative and are reserved for future use.</span></span>

 <span data-ttu-id="b2ef7-150">Для выполнения обработки запросов [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] может превысить предел пула потоков, запросив дополнительные потоки, если они необходимы для работы.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-150">To service requests, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] may exceed the maximum thread pool limit, requesting additional threads if they are necessary to perform the work.</span></span> <span data-ttu-id="b2ef7-151">Однако если поток завершает выполнение своей задачи, притом что текущее количество потоков превышает максимальный предел, то поток просто завершается, а не возвращается в пул потоков.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-151">However, when a thread finishes executing its task, if the current count of threads is greater than the maximum limit, the thread is simply ended, rather than returned to the thread pool.</span></span>

> [!NOTE]
>  <span data-ttu-id="b2ef7-152">Превышение максимального числа потоков пула является защитным механизмом, который вызывается только в случае возникновения определенных состояний взаимоблокировки.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-152">Exceeding the maximum thread pool count is a protection invoked only when certain deadlock conditions arise.</span></span> <span data-ttu-id="b2ef7-153">Для предотвращения выхода количества создаваемых потоков за максимально допустимое значение по достижении максимального предела потоки создаются не сразу, а после короткой задержки.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-153">To prevent runaway thread creation beyond the maximum, threads are created gradually (after a short delay) after the maximum limit has been reached.</span></span> <span data-ttu-id="b2ef7-154">Превышение максимального числа потоков может привести к замедлению выполнения задач.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-154">Exceeding maximum thread count can lead to a slowdown in task execution.</span></span> <span data-ttu-id="b2ef7-155">Если счетчики производительности указывают на то, что число потоков регулярно превышает максимальный размер пула потоков, это можно считать признаком того, что размер пула потоков слишком мал для той степени параллелизма, которая требуется системе.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-155">If the performance counters show the thread counts are regularly beyond the thread pool maximum size, you might consider that as an indicator that thread pool sizes are too small for the degree of concurrency being requested from the system.</span></span>

 <span data-ttu-id="b2ef7-156">По умолчанию размер пула потоков определяется [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)]и основывается на числе ядер.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-156">By default, thread pool size is determined by [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)], and is based on the number of cores.</span></span> <span data-ttu-id="b2ef7-157">Используемые значения по умолчанию можно посмотреть в файле msmdsrv.log после запуска сервера.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-157">You can observe the selected default values by examining the msmdsrv.log file after server startup.</span></span> <span data-ttu-id="b2ef7-158">В ходе настройки производительности можно увеличить размер пула потоков, а также другие свойства, чтобы повысить производительность запросов и обработки.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-158">As a performance tuning exercise, you might choose to increase the size of the thread pool, as well as other properties, to improve query or processing performance.</span></span>

##  <a name="thread-pool-property-reference"></a><a name="bkmk_propref"></a><span data-ttu-id="b2ef7-159">Справочник по свойствам пула потоков</span><span class="sxs-lookup"><span data-stu-id="b2ef7-159">Thread Pool Property Reference</span></span>
 <span data-ttu-id="b2ef7-160">В этом разделе описываются свойства пула потоков из файла msmdsrv.ini каждого экземпляра [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="b2ef7-160">This section describes the thread pool properties found in the msmdsrv.ini file of each [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] instance.</span></span> <span data-ttu-id="b2ef7-161">Подмножество этих свойств также доступно в SQL Server Management Studio.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-161">A subset of these properties also appears in SQL Server Management Studio.</span></span>

 <span data-ttu-id="b2ef7-162">Свойства перечисляются в алфавитном порядке.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-162">Properties are listed in alphabetical order.</span></span>

|<span data-ttu-id="b2ef7-163">Имя</span><span class="sxs-lookup"><span data-stu-id="b2ef7-163">Name</span></span>|<span data-ttu-id="b2ef7-164">Type</span><span class="sxs-lookup"><span data-stu-id="b2ef7-164">Type</span></span>|<span data-ttu-id="b2ef7-165">Описание</span><span class="sxs-lookup"><span data-stu-id="b2ef7-165">Description</span></span>|<span data-ttu-id="b2ef7-166">Значение по умолчанию</span><span class="sxs-lookup"><span data-stu-id="b2ef7-166">Default</span></span>|<span data-ttu-id="b2ef7-167">Руководство</span><span class="sxs-lookup"><span data-stu-id="b2ef7-167">Guidance</span></span>|
|----------|----------|-----------------|-------------|--------------|
|`IOProcess` \ `Concurrency`|<span data-ttu-id="b2ef7-168">double</span><span class="sxs-lookup"><span data-stu-id="b2ef7-168">double</span></span>|<span data-ttu-id="b2ef7-169">Значение с плавающей запятой двойной точности, определяющее алгоритм для установки целевого количества потоков, которые могут быть одновременно поставлены в очередь.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-169">A double-precision floating point value that determines the algorithm for setting a target on the number of threads that can be queued at one time.</span></span>|<span data-ttu-id="b2ef7-170">2.0</span><span class="sxs-lookup"><span data-stu-id="b2ef7-170">2.0</span></span>|<span data-ttu-id="b2ef7-171">Дополнительное свойство, которое следует изменять только под руководством службы поддержки [!INCLUDE[msCoName](../../includes/msconame-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="b2ef7-171">An advanced property that you should not change, except under the guidance of [!INCLUDE[msCoName](../../includes/msconame-md.md)] support.</span></span><br /><br /> <span data-ttu-id="b2ef7-172">Параллелизм используется для инициализации пулов потоков, которые в Windows реализуются с помощью портов завершения операций ввода-вывода.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-172">Concurrency is used to initialize thread pools, which are implemented using IO Completion Ports in Windows.</span></span> <span data-ttu-id="b2ef7-173">Дополнительные сведения см. в разделе [Порты завершения ввода-вывода](https://msdn.microsoft.com/library/windows/desktop/aa365198\(v=vs.85\).aspx) .</span><span class="sxs-lookup"><span data-stu-id="b2ef7-173">See [I/O Completion Ports](https://msdn.microsoft.com/library/windows/desktop/aa365198\(v=vs.85\).aspx) for details.</span></span><br /><br /> <span data-ttu-id="b2ef7-174">Применяется только к многомерным моделям.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-174">Applies to multidimensional models only.</span></span>|
|`IOProcess` \ `GroupAffinity`|<span data-ttu-id="b2ef7-175">строка</span><span class="sxs-lookup"><span data-stu-id="b2ef7-175">string</span></span>|<span data-ttu-id="b2ef7-176">Массив шестнадцатеричных значений, который соответствует группам процессоров в системе, используемой для задания сходства потоков в пуле потоков IOProcess логическим процессорам в каждой группе процессоров.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-176">An array of hexadecimal values that correspond to processor groups on the system, used to set affinity of threads in the IOProcess thread pool to logical processors in each processor group.</span></span>|<span data-ttu-id="b2ef7-177">none</span><span class="sxs-lookup"><span data-stu-id="b2ef7-177">none</span></span>|<span data-ttu-id="b2ef7-178">С помощью этого свойства можно создавать пользовательские сходства.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-178">You can use this property to create custom affinities.</span></span> <span data-ttu-id="b2ef7-179">По умолчанию это свойство пусто.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-179">The property is empty by default.</span></span><br /><br /> <span data-ttu-id="b2ef7-180">См. подробности в разделе [Задание параметра GroupAffinity для привязки потоков к процессорам или группе процессоров](#bkmk_groupaffinity) .</span><span class="sxs-lookup"><span data-stu-id="b2ef7-180">See [Set GroupAffinity to affinitize threads to processors in a processor group](#bkmk_groupaffinity) for details.</span></span><br /><br /> <span data-ttu-id="b2ef7-181">Применяется только к многомерным моделям.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-181">Applies to multidimensional models only.</span></span>|
|`IOProcess` \ `MaxThreads`|<span data-ttu-id="b2ef7-182">int</span><span class="sxs-lookup"><span data-stu-id="b2ef7-182">int</span></span>|<span data-ttu-id="b2ef7-183">32-разрядное целое число со знаком, определяющее максимальное количество потоков для включения в пул потоков.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-183">A signed 32-bit integer that specifies the maximum number of threads to include in the thread pool.</span></span>|<span data-ttu-id="b2ef7-184">0</span><span class="sxs-lookup"><span data-stu-id="b2ef7-184">0</span></span>|<span data-ttu-id="b2ef7-185">0 указывает, что сервер сам определяет значения по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-185">0 indicates the server determines the defaults.</span></span> <span data-ttu-id="b2ef7-186">По умолчанию сервер устанавливает это значение как 64 или как умноженное на 10 число логических процессоров в зависимости от того, какое из чисел выше.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-186">By default, the server either sets this value to 64, or to 10 times the number of logical processors, whichever is higher.</span></span> <span data-ttu-id="b2ef7-187">Например, в системе с 4 ядрами с технологией Hyper-Threading максимум пула потоков будет равен 80.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-187">For example, on a 4-core system with hyperthreading, the thread pool maximum is 80 threads.</span></span><br /><br /> <span data-ttu-id="b2ef7-188">Если значение задано как отрицательное, сервер умножит это число на количество логических процессоров.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-188">If you set this value to a negative value, the server multiples that value by the number of logical processors.</span></span> <span data-ttu-id="b2ef7-189">Например, если значение равно -10, на сервере с 32 логическими процессорами максимум будет составлять 320 потоков.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-189">For example, when set to -10 on a server having 32 logical processors, the maximum is 320 threads.</span></span><br /><br /> <span data-ttu-id="b2ef7-190">Максимальное значение зависит от числа процессоров, доступных для пользовательских масок сходства, определенных вами ранее.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-190">The maximum value is subject to available processors per any custom affinity masks that you previously defined.</span></span> <span data-ttu-id="b2ef7-191">Например, если уже была задана схожесть пула потоков на использование 8 из 32 процессоров, при задании свойству MaxThreads значения -10 верхняя граница пула потоков будет равна 10\*8, то есть 80 потокам.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-191">For example, if you already set thread pool affinity to use 8 out of 32 processors, and you now set MaxThreads to -10, then the upper bound on the thread pool would 10 times 8, or 80 threads.</span></span><br /><br /> <span data-ttu-id="b2ef7-192">Фактические значения для этого свойства пула потоков заносятся в файл журнала msmdsrv после запуска службы.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-192">The actual values used for this thread pool property are written to the msmdsrv log file upon service start up.</span></span><br /><br /> <span data-ttu-id="b2ef7-193">Дополнительные сведения о настройке параметров пула потоков можно найти в [руководстве по операциям служб Analysis Services](https://msdn.microsoft.com/library/hh226085.aspx).</span><span class="sxs-lookup"><span data-stu-id="b2ef7-193">More information about tuning the thread pool settings can be found in the [Analysis Services Operations Guide](https://msdn.microsoft.com/library/hh226085.aspx).</span></span><br /><br /> <span data-ttu-id="b2ef7-194">Применяется только к многомерным моделям.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-194">Applies to multidimensional models only.</span></span>|
|`IOProcess` \ `MinThreads`|<span data-ttu-id="b2ef7-195">int</span><span class="sxs-lookup"><span data-stu-id="b2ef7-195">int</span></span>|<span data-ttu-id="b2ef7-196">32-разрядное целое число со знаком, определяющее минимальное количество потоков, предварительно выделяемых для пула потоков.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-196">A signed 32-bit integer that specifies the minimum number of threads to preallocate for the thread pool.</span></span>|<span data-ttu-id="b2ef7-197">0</span><span class="sxs-lookup"><span data-stu-id="b2ef7-197">0</span></span>|<span data-ttu-id="b2ef7-198">0 указывает, что сервер сам определяет значения по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-198">0 indicates the server determines the defaults.</span></span> <span data-ttu-id="b2ef7-199">Минимальное значение по умолчанию равно 1.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-199">By default, the minimum is 1.</span></span><br /><br /> <span data-ttu-id="b2ef7-200">Если значение задано как отрицательное, сервер умножит это число на количество логических процессоров.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-200">If you set this value to a negative value, the server multiples that value by the number of logical processors.</span></span><br /><br /> <span data-ttu-id="b2ef7-201">Фактические значения для этого свойства пула потоков заносятся в файл журнала msmdsrv после запуска службы.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-201">The actual values used for this thread pool property are written to the msmdsrv log file upon service start up.</span></span><br /><br /> <span data-ttu-id="b2ef7-202">Дополнительные сведения о настройке параметров пула потоков можно найти в [руководстве по операциям служб Analysis Services](https://msdn.microsoft.com/library/hh226085.aspx).</span><span class="sxs-lookup"><span data-stu-id="b2ef7-202">More information about tuning the thread pool settings can be found in the [Analysis Services Operations Guide](https://msdn.microsoft.com/library/hh226085.aspx).</span></span><br /><br /> <span data-ttu-id="b2ef7-203">Применяется только к многомерным моделям.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-203">Applies to multidimensional models only.</span></span>|
|`IOProcess` \ `PerNumaNode`|<span data-ttu-id="b2ef7-204">int</span><span class="sxs-lookup"><span data-stu-id="b2ef7-204">int</span></span>|<span data-ttu-id="b2ef7-205">32-разрядное целое число со знаком, определяющее количество пулов потоков, создаваемых для процесса msmdsrv.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-205">A signed 32-bit integer that determines the number of thread pools created for the msmdsrv process.</span></span>|<span data-ttu-id="b2ef7-206">-1</span><span class="sxs-lookup"><span data-stu-id="b2ef7-206">-1</span></span>|<span data-ttu-id="b2ef7-207">Допустимые значения: -1, 0, 1, 2.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-207">Valid values are -1, 0, 1, 2</span></span><br /><br /> <span data-ttu-id="b2ef7-208">-1 = сервер выбирает другую стратегию пула потоков ввода-вывода на основе числа узлов NUMA.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-208">-1 = The server selects a different IO Thread Pool strategy based on the number of NUMA nodes.</span></span> <span data-ttu-id="b2ef7-209">В системах, где число узлов NUMA меньше 4, поведение сервера такое же, как и для значения 0 (для системы создается один пул потоков IOProcess).</span><span class="sxs-lookup"><span data-stu-id="b2ef7-209">On systems having fewer than 4 NUMA nodes, the server behavior is the same as 0 (one IOProcess thread pool is created for the system).</span></span> <span data-ttu-id="b2ef7-210">В системах, где количество узлов составляет четыре или больше, поведение такое же, как и для значения 1 (для каждого узла создаются пулы потоков IOProcess).</span><span class="sxs-lookup"><span data-stu-id="b2ef7-210">On systems having 4 or more nodes, the behavior is the same as 1 (IOProcess thread pools are created for each node).</span></span><br /><br /> <span data-ttu-id="b2ef7-211">0 = отключает пулы потоков для каждого узла NUMA, так что присутствует только один пул потоков IOProcess, используемый msmdsrv.exe.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-211">0 = Disables per NUMA node thread pools so that there is only one IOProcess thread pool used by the msmdsrv.exe process.</span></span><br /><br /> <span data-ttu-id="b2ef7-212">1 = включает один пул потоков IOProcess на каждый узел NUMA.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-212">1 = Enables one IOProcess thread pool per NUMA node.</span></span><br /><br /> <span data-ttu-id="b2ef7-213">2 = один пул потоков IOProcess на каждый логический процессор.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-213">2 = One IOProcess thread pool per logical processor.</span></span> <span data-ttu-id="b2ef7-214">Потоки в каждом пуле привязываются к узлу NUMA логического процессора, при этом идеальный процессор указывает на логический процессор.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-214">Threads in each thread pool are affinitized to the NUMA node of the logical processor, with the ideal processor set to the logical processor.</span></span><br /><br /> <span data-ttu-id="b2ef7-215">См. подробности в разделе [Задайте параметр PerNumaNode, чтобы привязать потоки ввода-вывода к процессорам в узле NUMA.](#bkmk_pernumanode) .</span><span class="sxs-lookup"><span data-stu-id="b2ef7-215">See [Set PerNumaNode to affinitize IO threads to processors in a NUMA node](#bkmk_pernumanode) for details.</span></span><br /><br /> <span data-ttu-id="b2ef7-216">Применяется только к многомерным моделям.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-216">Applies to multidimensional models only.</span></span>|
|`IOProcess` \ `PriorityRatio`|<span data-ttu-id="b2ef7-217">int</span><span class="sxs-lookup"><span data-stu-id="b2ef7-217">int</span></span>|<span data-ttu-id="b2ef7-218">32-разрядное целое число со знаком, которое используется в том случае, если требуется, чтобы иногда выполнялись потоки с более низким приоритетом, даже если очередь с более высоким приоритетом не пуста.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-218">A signed 32-bit integer that can be used to ensure that lower priority threads are sometimes executed even when a higher priority queue is not empty.</span></span>|<span data-ttu-id="b2ef7-219">2</span><span class="sxs-lookup"><span data-stu-id="b2ef7-219">2</span></span>|<span data-ttu-id="b2ef7-220">Дополнительное свойство, которое следует изменять только под руководством службы поддержки [!INCLUDE[msCoName](../../includes/msconame-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="b2ef7-220">An advanced property that you should not change, except under the guidance of [!INCLUDE[msCoName](../../includes/msconame-md.md)] support.</span></span><br /><br /> <span data-ttu-id="b2ef7-221">Применяется только к многомерным моделям.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-221">Applies to multidimensional models only.</span></span>|
|`IOProcess` \ `StackSizeKB`|<span data-ttu-id="b2ef7-222">int</span><span class="sxs-lookup"><span data-stu-id="b2ef7-222">int</span></span>|<span data-ttu-id="b2ef7-223">32-разрядное целое число со знаком, которое можно использовать для настройки выделения памяти во время выполнения потоков.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-223">A signed 32-bit integer that can be used to adjust memory allocation during thread execution.</span></span>|<span data-ttu-id="b2ef7-224">0</span><span class="sxs-lookup"><span data-stu-id="b2ef7-224">0</span></span>|<span data-ttu-id="b2ef7-225">Дополнительное свойство, которое следует изменять только под руководством службы поддержки [!INCLUDE[msCoName](../../includes/msconame-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="b2ef7-225">An advanced property that you should not change, except under the guidance of [!INCLUDE[msCoName](../../includes/msconame-md.md)] support.</span></span><br /><br /> <span data-ttu-id="b2ef7-226">Применяется только к многомерным моделям.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-226">Applies to multidimensional models only.</span></span>|
|<span data-ttu-id="b2ef7-227">**Синтаксический анализ**  \ `Long` \ `Concurrency`</span><span class="sxs-lookup"><span data-stu-id="b2ef7-227">**Parsing**  \ `Long` \ `Concurrency`</span></span>|<span data-ttu-id="b2ef7-228">double</span><span class="sxs-lookup"><span data-stu-id="b2ef7-228">double</span></span>|<span data-ttu-id="b2ef7-229">Значение с плавающей запятой двойной точности, определяющее алгоритм для установки целевого количества потоков, которые могут быть одновременно поставлены в очередь.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-229">A double-precision floating point value that determines the algorithm for setting a target on the number of threads that can be queued at one time.</span></span>|<span data-ttu-id="b2ef7-230">2.0</span><span class="sxs-lookup"><span data-stu-id="b2ef7-230">2.0</span></span>|<span data-ttu-id="b2ef7-231">Дополнительное свойство, которое следует изменять только под руководством службы поддержки [!INCLUDE[msCoName](../../includes/msconame-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="b2ef7-231">An advanced property that you should not change, except under the guidance of [!INCLUDE[msCoName](../../includes/msconame-md.md)] support.</span></span><br /><br /> <span data-ttu-id="b2ef7-232">Параллелизм используется для инициализации пулов потоков, которые в Windows реализуются с помощью портов завершения операций ввода-вывода.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-232">Concurrency is used to initialize thread pools, which are implemented using IO Completion Ports in Windows.</span></span> <span data-ttu-id="b2ef7-233">Дополнительные сведения см. в разделе [Порты завершения ввода-вывода](https://msdn.microsoft.com/library/windows/desktop/aa365198\(v=vs.85\).aspx) .</span><span class="sxs-lookup"><span data-stu-id="b2ef7-233">See [I/O Completion Ports](https://msdn.microsoft.com/library/windows/desktop/aa365198\(v=vs.85\).aspx) for details.</span></span>|
|<span data-ttu-id="b2ef7-234">**Синтаксический анализ**  \ `Long` \ `GroupAffinity`</span><span class="sxs-lookup"><span data-stu-id="b2ef7-234">**Parsing**  \ `Long` \ `GroupAffinity`</span></span>|<span data-ttu-id="b2ef7-235">строка</span><span class="sxs-lookup"><span data-stu-id="b2ef7-235">string</span></span>|<span data-ttu-id="b2ef7-236">Массив шестнадцатеричных значений, который соответствует группам процессоров в системе, используемой для задания сходства потоков анализа логическим процессорам в каждой группе процессоров.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-236">An array of hexadecimal values that correspond to processor groups on the system, used to set affinity of parsing threads to logical processors in each processor group.</span></span>|<span data-ttu-id="b2ef7-237">none</span><span class="sxs-lookup"><span data-stu-id="b2ef7-237">none</span></span>|<span data-ttu-id="b2ef7-238">С помощью этого свойства можно создавать пользовательские сходства.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-238">You can use this property to create custom affinities.</span></span> <span data-ttu-id="b2ef7-239">По умолчанию это свойство пусто.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-239">The property is empty by default.</span></span><br /><br /> <span data-ttu-id="b2ef7-240">См. подробности в разделе [Задание параметра GroupAffinity для привязки потоков к процессорам или группе процессоров](#bkmk_groupaffinity) .</span><span class="sxs-lookup"><span data-stu-id="b2ef7-240">See [Set GroupAffinity to affinitize threads to processors in a processor group](#bkmk_groupaffinity) for details.</span></span>|
|<span data-ttu-id="b2ef7-241">**Синтаксический анализ**  \ `Long` \ `NumThreads`</span><span class="sxs-lookup"><span data-stu-id="b2ef7-241">**Parsing**  \ `Long` \ `NumThreads`</span></span>|<span data-ttu-id="b2ef7-242">int</span><span class="sxs-lookup"><span data-stu-id="b2ef7-242">int</span></span>|<span data-ttu-id="b2ef7-243">Свойство с 32-разрядным целочисленным значением со знаком, определяющее количество потоков, которое можно создать для длинных команд.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-243">A signed 32-bit integer property that defines the number of threads that can be created for long commands.</span></span>|<span data-ttu-id="b2ef7-244">0</span><span class="sxs-lookup"><span data-stu-id="b2ef7-244">0</span></span>|<span data-ttu-id="b2ef7-245">0 указывает, что сервер сам определяет значения по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-245">0 indicates that the server determines the defaults.</span></span> <span data-ttu-id="b2ef7-246">По умолчанию параметру `NumThreads` задается абсолютное значение 4 или умноженное на 2 число логических процессоров в зависимости от того, какое значение выше.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-246">The default behavior is to set `NumThreads` to an absolute value of 4, or 2 times the number of logical processors, whichever is higher.</span></span><br /><br /> <span data-ttu-id="b2ef7-247">Если значение задано как отрицательное, сервер умножит это число на количество логических процессоров.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-247">If you set this value to a negative value, the server multiples that value by the number of logical processors.</span></span> <span data-ttu-id="b2ef7-248">Например, если значение равно -10, на сервере с 32 логическими процессорами максимум будет составлять 320 потоков.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-248">For example, when set to -10 on a server having 32 logical processors, the maximum is 320 threads.</span></span><br /><br /> <span data-ttu-id="b2ef7-249">Максимальное значение зависит от числа процессоров, доступных для пользовательских масок сходства, определенных вами ранее.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-249">The maximum value is subject to available processors per any custom affinity masks that you previously defined.</span></span> <span data-ttu-id="b2ef7-250">Например, если уже была задана схожесть пула потоков на использование 8 из 32 процессоров, при задании свойству NumThreads значения -10 верхняя граница пула потоков будет равна 10\*8, то есть 80 потокам.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-250">For example, if you already set thread pool affinity to use 8 out of 32 processors, and you now set NumThreads to -10, then the upper bound on the thread pool would 10 times 8, or 80 threads.</span></span><br /><br /> <span data-ttu-id="b2ef7-251">Фактические значения для этого свойства пула потоков заносятся в файл журнала msmdsrv после запуска службы.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-251">The actual values used for this thread pool property are written to the msmdsrv log file upon service start up.</span></span>|
|<span data-ttu-id="b2ef7-252">**Синтаксический анализ**  \ `Long` \ `PriorityRatio`</span><span class="sxs-lookup"><span data-stu-id="b2ef7-252">**Parsing**  \ `Long` \ `PriorityRatio`</span></span>|<span data-ttu-id="b2ef7-253">int</span><span class="sxs-lookup"><span data-stu-id="b2ef7-253">int</span></span>|<span data-ttu-id="b2ef7-254">32-разрядное целое число со знаком, которое используется в том случае, если требуется, чтобы иногда выполнялись потоки с более низким приоритетом, даже если очередь с более высоким приоритетом не пуста.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-254">A signed 32-bit integer that can be used to ensure that lower priority threads are sometimes executed even when a higher priority queue is not empty.</span></span>|<span data-ttu-id="b2ef7-255">0</span><span class="sxs-lookup"><span data-stu-id="b2ef7-255">0</span></span>|<span data-ttu-id="b2ef7-256">Дополнительное свойство, которое следует изменять только под руководством службы поддержки [!INCLUDE[msCoName](../../includes/msconame-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="b2ef7-256">An advanced property that you should not change, except under the guidance of [!INCLUDE[msCoName](../../includes/msconame-md.md)] support.</span></span>|
|<span data-ttu-id="b2ef7-257">**Синтаксический анализ**  \ `Long` \ `StackSizeKB`</span><span class="sxs-lookup"><span data-stu-id="b2ef7-257">**Parsing**  \ `Long` \ `StackSizeKB`</span></span>|<span data-ttu-id="b2ef7-258">int</span><span class="sxs-lookup"><span data-stu-id="b2ef7-258">int</span></span>|<span data-ttu-id="b2ef7-259">32-разрядное целое число со знаком, которое можно использовать для настройки выделения памяти во время выполнения потоков.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-259">A signed 32-bit integer that can be used to adjust memory allocation during thread execution.</span></span>|<span data-ttu-id="b2ef7-260">0</span><span class="sxs-lookup"><span data-stu-id="b2ef7-260">0</span></span>|<span data-ttu-id="b2ef7-261">Дополнительное свойство, которое следует изменять только под руководством службы поддержки [!INCLUDE[msCoName](../../includes/msconame-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="b2ef7-261">An advanced property that you should not change, except under the guidance of [!INCLUDE[msCoName](../../includes/msconame-md.md)] support.</span></span>|
|<span data-ttu-id="b2ef7-262">**Синтаксический анализ**  \ `Short` \ `Concurrency`</span><span class="sxs-lookup"><span data-stu-id="b2ef7-262">**Parsing**  \ `Short` \ `Concurrency`</span></span>|<span data-ttu-id="b2ef7-263">double</span><span class="sxs-lookup"><span data-stu-id="b2ef7-263">double</span></span>|<span data-ttu-id="b2ef7-264">Значение с плавающей запятой двойной точности, определяющее алгоритм для установки целевого количества потоков, которые могут быть одновременно поставлены в очередь.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-264">A double-precision floating point value that determines the algorithm for setting a target on the number of threads that can be queued at one time.</span></span>|<span data-ttu-id="b2ef7-265">2.0</span><span class="sxs-lookup"><span data-stu-id="b2ef7-265">2.0</span></span>|<span data-ttu-id="b2ef7-266">Дополнительное свойство, которое следует изменять только под руководством службы поддержки [!INCLUDE[msCoName](../../includes/msconame-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="b2ef7-266">An advanced property that you should not change, except under the guidance of [!INCLUDE[msCoName](../../includes/msconame-md.md)] support.</span></span><br /><br /> <span data-ttu-id="b2ef7-267">Параллелизм используется для инициализации пулов потоков, которые в Windows реализуются с помощью портов завершения операций ввода-вывода.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-267">Concurrency is used to initialize thread pools, which are implemented using IO Completion Ports in Windows.</span></span> <span data-ttu-id="b2ef7-268">Дополнительные сведения см. в разделе [Порты завершения ввода-вывода](https://msdn.microsoft.com/library/windows/desktop/aa365198\(v=vs.85\).aspx) .</span><span class="sxs-lookup"><span data-stu-id="b2ef7-268">See [I/O Completion Ports](https://msdn.microsoft.com/library/windows/desktop/aa365198\(v=vs.85\).aspx) for details.</span></span>|
|<span data-ttu-id="b2ef7-269">**Синтаксический анализ**  \ `Short` \ `GroupAffinity`</span><span class="sxs-lookup"><span data-stu-id="b2ef7-269">**Parsing**  \ `Short` \ `GroupAffinity`</span></span>|<span data-ttu-id="b2ef7-270">строка</span><span class="sxs-lookup"><span data-stu-id="b2ef7-270">string</span></span>|<span data-ttu-id="b2ef7-271">Массив шестнадцатеричных значений, который соответствует группам процессоров в системе, используемой для задания сходства потоков анализа логическим процессорам в каждой группе процессоров.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-271">An array of hexadecimal values that correspond to processor groups on the system, used to set affinity of parsing threads to logical processors in each processor group.</span></span>|<span data-ttu-id="b2ef7-272">none</span><span class="sxs-lookup"><span data-stu-id="b2ef7-272">none</span></span>|<span data-ttu-id="b2ef7-273">С помощью этого свойства можно создавать пользовательские сходства.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-273">You can use this property to create custom affinities.</span></span> <span data-ttu-id="b2ef7-274">По умолчанию это свойство пусто.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-274">The property is empty by default.</span></span><br /><br /> <span data-ttu-id="b2ef7-275">См. подробности в разделе [Задание параметра GroupAffinity для привязки потоков к процессорам или группе процессоров](#bkmk_groupaffinity) .</span><span class="sxs-lookup"><span data-stu-id="b2ef7-275">See [Set GroupAffinity to affinitize threads to processors in a processor group](#bkmk_groupaffinity) for details.</span></span>|
|<span data-ttu-id="b2ef7-276">**Синтаксический анализ**  \ `Short` \ `NumThreads`</span><span class="sxs-lookup"><span data-stu-id="b2ef7-276">**Parsing**  \ `Short` \ `NumThreads`</span></span>|<span data-ttu-id="b2ef7-277">int</span><span class="sxs-lookup"><span data-stu-id="b2ef7-277">int</span></span>|<span data-ttu-id="b2ef7-278">Свойство с 32-разрядным целочисленным значением со знаком, определяющее количество потоков, которое можно создать для коротких команд.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-278">A signed 32-bit integer property that defines the number of threads that can be created for short commands.</span></span>|<span data-ttu-id="b2ef7-279">0</span><span class="sxs-lookup"><span data-stu-id="b2ef7-279">0</span></span>|<span data-ttu-id="b2ef7-280">0 указывает, что сервер сам определяет значения по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-280">0 indicates that the server determines the defaults.</span></span> <span data-ttu-id="b2ef7-281">По умолчанию параметру `NumThreads` задается абсолютное значение 4 или умноженное на 2 число логических процессоров в зависимости от того, какое значение выше.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-281">The default behavior is to set `NumThreads` to an absolute value of 4, or 2 times the number of logical processors, whichever is higher.</span></span><br /><br /> <span data-ttu-id="b2ef7-282">Если значение задано как отрицательное, сервер умножит это число на количество логических процессоров.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-282">If you set this value to a negative value, the server multiples that value by the number of logical processors.</span></span> <span data-ttu-id="b2ef7-283">Например, если значение равно -10, на сервере с 32 логическими процессорами максимум будет составлять 320 потоков.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-283">For example, when set to -10 on a server having 32 logical processors, the maximum is 320 threads.</span></span><br /><br /> <span data-ttu-id="b2ef7-284">Максимальное значение зависит от числа процессоров, доступных для пользовательских масок сходства, определенных вами ранее.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-284">The maximum value is subject to available processors per any custom affinity masks that you previously defined.</span></span> <span data-ttu-id="b2ef7-285">Например, если уже была задана схожесть пула потоков на использование 8 из 32 процессоров, при задании свойству NumThreads значения -10 верхняя граница пула потоков будет равна 10\*8, то есть 80 потокам.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-285">For example, if you already set thread pool affinity to use 8 out of 32 processors, and you now set NumThreads to -10, then the upper bound on the thread pool would 10 times 8, or 80 threads.</span></span><br /><br /> <span data-ttu-id="b2ef7-286">Фактические значения для этого свойства пула потоков заносятся в файл журнала msmdsrv после запуска службы.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-286">The actual values used for this thread pool property are written to the msmdsrv log file upon service start up.</span></span>|
|<span data-ttu-id="b2ef7-287">**Синтаксический анализ**  \ `Short` \ `PriorityRatio`</span><span class="sxs-lookup"><span data-stu-id="b2ef7-287">**Parsing**  \ `Short` \ `PriorityRatio`</span></span>|<span data-ttu-id="b2ef7-288">int</span><span class="sxs-lookup"><span data-stu-id="b2ef7-288">int</span></span>|<span data-ttu-id="b2ef7-289">32-разрядное целое число со знаком, которое используется в том случае, если требуется, чтобы иногда выполнялись потоки с более низким приоритетом, даже если очередь с более высоким приоритетом не пуста.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-289">A signed 32-bit integer that can be used to ensure that lower priority threads are sometimes executed even when a higher priority queue is not empty.</span></span>|<span data-ttu-id="b2ef7-290">0</span><span class="sxs-lookup"><span data-stu-id="b2ef7-290">0</span></span>|<span data-ttu-id="b2ef7-291">Дополнительное свойство, которое следует изменять только под руководством службы поддержки [!INCLUDE[msCoName](../../includes/msconame-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="b2ef7-291">An advanced property that you should not change, except under the guidance of [!INCLUDE[msCoName](../../includes/msconame-md.md)] support.</span></span>|
|<span data-ttu-id="b2ef7-292">**Синтаксический анализ**  \ `Short` \ `StackSizeKB`</span><span class="sxs-lookup"><span data-stu-id="b2ef7-292">**Parsing**  \ `Short` \ `StackSizeKB`</span></span>|<span data-ttu-id="b2ef7-293">int</span><span class="sxs-lookup"><span data-stu-id="b2ef7-293">int</span></span>|<span data-ttu-id="b2ef7-294">32-разрядное целое число со знаком, которое можно использовать для настройки выделения памяти во время выполнения потоков.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-294">A signed 32-bit integer that can be used to adjust memory allocation during thread execution.</span></span>|<span data-ttu-id="b2ef7-295">64 \* число логических процессоров</span><span class="sxs-lookup"><span data-stu-id="b2ef7-295">64 \* logical processors</span></span>|<span data-ttu-id="b2ef7-296">Дополнительное свойство, которое следует изменять только под руководством службы поддержки [!INCLUDE[msCoName](../../includes/msconame-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="b2ef7-296">An advanced property that you should not change, except under the guidance of [!INCLUDE[msCoName](../../includes/msconame-md.md)] support.</span></span>|
|`Process` \ `Concurrency`|<span data-ttu-id="b2ef7-297">double</span><span class="sxs-lookup"><span data-stu-id="b2ef7-297">double</span></span>|<span data-ttu-id="b2ef7-298">Значение с плавающей запятой двойной точности, определяющее алгоритм для установки целевого количества потоков, которые могут быть одновременно поставлены в очередь.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-298">A double-precision floating point value that determines the algorithm for setting a target on the number of threads that can be queued at one time.</span></span>|<span data-ttu-id="b2ef7-299">2.0</span><span class="sxs-lookup"><span data-stu-id="b2ef7-299">2.0</span></span>|<span data-ttu-id="b2ef7-300">Дополнительное свойство, которое следует изменять только под руководством службы поддержки [!INCLUDE[msCoName](../../includes/msconame-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="b2ef7-300">An advanced property that you should not change, except under the guidance of [!INCLUDE[msCoName](../../includes/msconame-md.md)] support.</span></span><br /><br /> <span data-ttu-id="b2ef7-301">Параллелизм используется для инициализации пулов потоков, которые в Windows реализуются с помощью портов завершения операций ввода-вывода.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-301">Concurrency is used to initialize thread pools, which are implemented using IO Completion Ports in Windows.</span></span> <span data-ttu-id="b2ef7-302">Дополнительные сведения см. в разделе [Порты завершения ввода-вывода](https://msdn.microsoft.com/library/windows/desktop/aa365198\(v=vs.85\).aspx) .</span><span class="sxs-lookup"><span data-stu-id="b2ef7-302">See [I/O Completion Ports](https://msdn.microsoft.com/library/windows/desktop/aa365198\(v=vs.85\).aspx) for details.</span></span>|
|`Process` \ `GroupAffinity`|<span data-ttu-id="b2ef7-303">строка</span><span class="sxs-lookup"><span data-stu-id="b2ef7-303">string</span></span>|<span data-ttu-id="b2ef7-304">Массив шестнадцатеричных значений, который соответствует группам процессоров в системе, используемой для задания сходства потоков обработки логическим процессорам в каждой группе процессоров.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-304">An array of hexadecimal values that correspond to processor groups on the system, used to set affinity of processing threads to logical processors in each processor group.</span></span>|<span data-ttu-id="b2ef7-305">none</span><span class="sxs-lookup"><span data-stu-id="b2ef7-305">none</span></span>|<span data-ttu-id="b2ef7-306">С помощью этого свойства можно создавать пользовательские сходства.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-306">You can use this property to create custom affinities.</span></span> <span data-ttu-id="b2ef7-307">По умолчанию это свойство пусто.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-307">The property is empty by default.</span></span><br /><br /> <span data-ttu-id="b2ef7-308">См. подробности в разделе [Задание параметра GroupAffinity для привязки потоков к процессорам или группе процессоров](#bkmk_groupaffinity) .</span><span class="sxs-lookup"><span data-stu-id="b2ef7-308">See [Set GroupAffinity to affinitize threads to processors in a processor group](#bkmk_groupaffinity) for details.</span></span>|
|`Process` \ `MaxThreads`|<span data-ttu-id="b2ef7-309">int</span><span class="sxs-lookup"><span data-stu-id="b2ef7-309">int</span></span>|<span data-ttu-id="b2ef7-310">32-разрядное целое число со знаком, определяющее максимальное количество потоков для включения в пул потоков.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-310">A signed 32-bit integer that specifies the maximum number of threads to include in the thread pool.</span></span>|<span data-ttu-id="b2ef7-311">0</span><span class="sxs-lookup"><span data-stu-id="b2ef7-311">0</span></span>|<span data-ttu-id="b2ef7-312">0 указывает, что сервер сам определяет значения по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-312">0 indicates the server determines the defaults.</span></span> <span data-ttu-id="b2ef7-313">По умолчанию сервер задает этому свойству абсолютное значение 64 или значение, равное числу логических процессоров, в зависимости от того, какое выше.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-313">By default, the server either sets this value to an absolute value of 64, or the number of logical processors, whichever is higher.</span></span> <span data-ttu-id="b2ef7-314">Например, в системе с 64 ядрами и с включенной функцией технологии Hyper-Threading (что в результате дает 128 логических процессора), максимум для пула потоков будет равен 128.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-314">For example, on a 64-core system with hyperthreading enabled (resulting in 128 logical processors), the thread pool maximum is 128 threads.</span></span><br /><br /> <span data-ttu-id="b2ef7-315">Если значение задано как отрицательное, сервер умножит это число на количество логических процессоров.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-315">If you set this value to a negative value, the server multiples that value by the number of logical processors.</span></span> <span data-ttu-id="b2ef7-316">Например, если значение равно -10, на сервере с 32 логическими процессорами максимум будет составлять 320 потоков.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-316">For example, when set to -10 on a server having 32 logical processors, the maximum is 320 threads.</span></span><br /><br /> <span data-ttu-id="b2ef7-317">Максимальное значение зависит от числа процессоров, доступных для пользовательских масок сходства, определенных вами ранее.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-317">The maximum value is subject to available processors per any custom affinity masks that you previously defined.</span></span> <span data-ttu-id="b2ef7-318">Например, если уже была задана схожесть пула потоков на использование 8 из 32 процессоров, при задании свойству MaxThreads значения -10 верхняя граница пула потоков будет равна 10\*8, то есть 80 потокам.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-318">For example, if you already set thread pool affinity to use 8 out of 32 processors, and you now set MaxThreads to -10, then the upper bound on the thread pool would 10 times 8, or 80 threads.</span></span><br /><br /> <span data-ttu-id="b2ef7-319">Фактические значения для этого свойства пула потоков заносятся в файл журнала msmdsrv после запуска службы.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-319">The actual values used for this thread pool property are written to the msmdsrv log file upon service start up.</span></span><br /><br /> <span data-ttu-id="b2ef7-320">Дополнительные сведения о настройке параметров пула потоков можно найти в [руководстве по операциям служб Analysis Services](https://msdn.microsoft.com/library/hh226085.aspx).</span><span class="sxs-lookup"><span data-stu-id="b2ef7-320">More information about tuning the thread pool settings can be found in the [Analysis Services Operations Guide](https://msdn.microsoft.com/library/hh226085.aspx).</span></span>|
|`Process` \ `MinThreads`|<span data-ttu-id="b2ef7-321">int</span><span class="sxs-lookup"><span data-stu-id="b2ef7-321">int</span></span>|<span data-ttu-id="b2ef7-322">32-разрядное целое число со знаком, определяющее минимальное количество потоков, предварительно выделяемых для пула потоков.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-322">A signed 32-bit integer that specifies the minimum number of threads to preallocate for the thread pool.</span></span>|<span data-ttu-id="b2ef7-323">0</span><span class="sxs-lookup"><span data-stu-id="b2ef7-323">0</span></span>|<span data-ttu-id="b2ef7-324">0 указывает, что сервер сам определяет значения по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-324">0 indicates the server determines the defaults.</span></span> <span data-ttu-id="b2ef7-325">Минимальное значение по умолчанию равно 1.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-325">By default, the minimum is 1.</span></span><br /><br /> <span data-ttu-id="b2ef7-326">Если значение задано как отрицательное, сервер умножит это число на количество логических процессоров.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-326">If you set this value to a negative value, the server multiples that value by the number of logical processors.</span></span><br /><br /> <span data-ttu-id="b2ef7-327">Фактические значения для этого свойства пула потоков заносятся в файл журнала msmdsrv после запуска службы.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-327">The actual values used for this thread pool property are written to the msmdsrv log file upon service start up.</span></span><br /><br /> <span data-ttu-id="b2ef7-328">Дополнительные сведения о настройке параметров пула потоков можно найти в [руководстве по операциям служб Analysis Services](https://msdn.microsoft.com/library/hh226085.aspx).</span><span class="sxs-lookup"><span data-stu-id="b2ef7-328">More information about tuning the thread pool settings can be found in the [Analysis Services Operations Guide](https://msdn.microsoft.com/library/hh226085.aspx).</span></span>|
|`Process` \ `PriorityRatio`|<span data-ttu-id="b2ef7-329">int</span><span class="sxs-lookup"><span data-stu-id="b2ef7-329">int</span></span>|<span data-ttu-id="b2ef7-330">32-разрядное целое число со знаком, которое используется в том случае, если требуется, чтобы иногда выполнялись потоки с более низким приоритетом, даже если очередь с более высоким приоритетом не пуста.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-330">A signed 32-bit integer that can be used to ensure that lower priority threads are sometimes executed even when a higher priority queue is not empty.</span></span>|<span data-ttu-id="b2ef7-331">2</span><span class="sxs-lookup"><span data-stu-id="b2ef7-331">2</span></span>|<span data-ttu-id="b2ef7-332">Дополнительное свойство, которое следует изменять только под руководством службы поддержки [!INCLUDE[msCoName](../../includes/msconame-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="b2ef7-332">An advanced property that you should not change, except under the guidance of [!INCLUDE[msCoName](../../includes/msconame-md.md)] support.</span></span>|
|`Process` \ `StackSizeKB`|<span data-ttu-id="b2ef7-333">int</span><span class="sxs-lookup"><span data-stu-id="b2ef7-333">int</span></span>|<span data-ttu-id="b2ef7-334">32-разрядное целое число со знаком, которое можно использовать для настройки выделения памяти во время выполнения потоков.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-334">A signed 32-bit integer that can be used to adjust memory allocation during thread execution.</span></span>|<span data-ttu-id="b2ef7-335">0</span><span class="sxs-lookup"><span data-stu-id="b2ef7-335">0</span></span>|<span data-ttu-id="b2ef7-336">Дополнительное свойство, которое следует изменять только под руководством службы поддержки [!INCLUDE[msCoName](../../includes/msconame-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="b2ef7-336">An advanced property that you should not change, except under the guidance of [!INCLUDE[msCoName](../../includes/msconame-md.md)] support.</span></span>|
|`Query`  \ `Concurrency`|<span data-ttu-id="b2ef7-337">double</span><span class="sxs-lookup"><span data-stu-id="b2ef7-337">double</span></span>|<span data-ttu-id="b2ef7-338">Значение с плавающей запятой двойной точности, определяющее алгоритм для установки целевого количества потоков, которые могут быть одновременно поставлены в очередь.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-338">A double-precision floating point value that determines the algorithm for setting a target on the number of threads that can be queued at one time.</span></span>|<span data-ttu-id="b2ef7-339">2.0</span><span class="sxs-lookup"><span data-stu-id="b2ef7-339">2.0</span></span>|<span data-ttu-id="b2ef7-340">Дополнительное свойство, которое следует изменять только под руководством службы поддержки [!INCLUDE[msCoName](../../includes/msconame-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="b2ef7-340">An advanced property that you should not change, except under the guidance of [!INCLUDE[msCoName](../../includes/msconame-md.md)] support.</span></span><br /><br /> <span data-ttu-id="b2ef7-341">Параллелизм используется для инициализации пулов потоков, которые в Windows реализуются с помощью портов завершения операций ввода-вывода.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-341">Concurrency is used to initialize thread pools, which are implemented using IO Completion Ports in Windows.</span></span> <span data-ttu-id="b2ef7-342">Дополнительные сведения см. в разделе [Порты завершения ввода-вывода](https://msdn.microsoft.com/library/windows/desktop/aa365198\(v=vs.85\).aspx) .</span><span class="sxs-lookup"><span data-stu-id="b2ef7-342">See [I/O Completion Ports](https://msdn.microsoft.com/library/windows/desktop/aa365198\(v=vs.85\).aspx) for details.</span></span>|
|`Query` \ `GroupAffinity`|<span data-ttu-id="b2ef7-343">строка</span><span class="sxs-lookup"><span data-stu-id="b2ef7-343">string</span></span>|<span data-ttu-id="b2ef7-344">Массив шестнадцатеричных значений, который соответствует группам процессоров в системе, используемой для задания сходства потоков обработки логическим процессорам в каждой группе процессоров.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-344">An array of hexadecimal values that correspond to processor groups on the system, used to set affinity of processing threads to logical processors in each processor group.</span></span>|<span data-ttu-id="b2ef7-345">none</span><span class="sxs-lookup"><span data-stu-id="b2ef7-345">none</span></span>|<span data-ttu-id="b2ef7-346">С помощью этого свойства можно создавать пользовательские сходства.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-346">You can use this property to create custom affinities.</span></span> <span data-ttu-id="b2ef7-347">По умолчанию это свойство пусто.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-347">The property is empty by default.</span></span><br /><br /> <span data-ttu-id="b2ef7-348">См. подробности в разделе [Задание параметра GroupAffinity для привязки потоков к процессорам или группе процессоров](#bkmk_groupaffinity) .</span><span class="sxs-lookup"><span data-stu-id="b2ef7-348">See [Set GroupAffinity to affinitize threads to processors in a processor group](#bkmk_groupaffinity) for details.</span></span>|
|`Query`  \ `MaxThreads`|<span data-ttu-id="b2ef7-349">int</span><span class="sxs-lookup"><span data-stu-id="b2ef7-349">int</span></span>|<span data-ttu-id="b2ef7-350">32-разрядное целое число со знаком, определяющее максимальное количество потоков для включения в пул потоков.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-350">A signed 32-bit integer that specifies the maximum number of threads to include in the thread pool.</span></span>|<span data-ttu-id="b2ef7-351">0</span><span class="sxs-lookup"><span data-stu-id="b2ef7-351">0</span></span>|<span data-ttu-id="b2ef7-352">0 указывает, что сервер сам определяет значения по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-352">0 indicates the server determines the defaults.</span></span> <span data-ttu-id="b2ef7-353">По умолчанию сервер задает этому свойству абсолютное значение 10 или значение, равное числу логических процессоров умноженное на 2, в зависимости от того, какое из них выше.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-353">By default, the server either sets this value to an absolute value of 10, or 2 times the number of logical processors, whichever is higher.</span></span> <span data-ttu-id="b2ef7-354">Например, в системе с 4 ядрами с технологией Hyper-Threading максимальное число потоков равно 16.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-354">For example, on a 4-core system with hyperthreading, the maximum thread count is 16.</span></span><br /><br /> <span data-ttu-id="b2ef7-355">Если значение задано как отрицательное, сервер умножит это число на количество логических процессоров.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-355">If you set this value to a negative value, the server multiples that value by the number of logical processors.</span></span> <span data-ttu-id="b2ef7-356">Например, если значение равно -10, на сервере с 32 логическими процессорами максимум будет составлять 320 потоков.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-356">For example, when set to -10 on a server having 32 logical processors, the maximum is 320 threads.</span></span><br /><br /> <span data-ttu-id="b2ef7-357">Максимальное значение зависит от числа процессоров, доступных для пользовательских масок сходства, определенных вами ранее.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-357">The maximum value is subject to available processors per any custom affinity masks that you previously defined.</span></span> <span data-ttu-id="b2ef7-358">Например, если уже была задана схожесть пула потоков на использование 8 из 32 процессоров, при задании свойству MaxThreads значения -10 верхняя граница пула потоков будет равна 10\*8, то есть 80 потокам.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-358">For example, if you already set thread pool affinity to use 8 out of 32 processors, and you now set MaxThreads to -10, then the upper bound on the thread pool would 10 times 8, or 80 threads.</span></span><br /><br /> <span data-ttu-id="b2ef7-359">Фактические значения для этого свойства пула потоков заносятся в файл журнала msmdsrv после запуска службы.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-359">The actual values used for this thread pool property are written to the msmdsrv log file upon service start up.</span></span><br /><br /> <span data-ttu-id="b2ef7-360">Дополнительные сведения о настройке параметров пула потоков можно найти в [руководстве по операциям служб Analysis Services](https://msdn.microsoft.com/library/hh226085.aspx).</span><span class="sxs-lookup"><span data-stu-id="b2ef7-360">More information about tuning the thread pool settings can be found in the [Analysis Services Operations Guide](https://msdn.microsoft.com/library/hh226085.aspx).</span></span>|
|`Query` \ `MinThreads`|<span data-ttu-id="b2ef7-361">int</span><span class="sxs-lookup"><span data-stu-id="b2ef7-361">int</span></span>|<span data-ttu-id="b2ef7-362">32-разрядное целое число со знаком, определяющее минимальное количество потоков, предварительно выделяемых для пула потоков.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-362">A signed 32-bit integer that specifies the minimum number of threads to preallocate for the thread pool.</span></span>|<span data-ttu-id="b2ef7-363">0</span><span class="sxs-lookup"><span data-stu-id="b2ef7-363">0</span></span>|<span data-ttu-id="b2ef7-364">0 указывает, что сервер сам определяет значения по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-364">0 indicates the server determines the defaults.</span></span> <span data-ttu-id="b2ef7-365">Минимальное значение по умолчанию равно 1.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-365">By default, the minimum is 1.</span></span><br /><br /> <span data-ttu-id="b2ef7-366">Если значение задано как отрицательное, сервер умножит это число на количество логических процессоров.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-366">If you set this value to a negative value, the server multiples that value by the number of logical processors.</span></span><br /><br /> <span data-ttu-id="b2ef7-367">Фактические значения для этого свойства пула потоков заносятся в файл журнала msmdsrv после запуска службы.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-367">The actual values used for this thread pool property are written to the msmdsrv log file upon service start up.</span></span><br /><br /> <span data-ttu-id="b2ef7-368">Дополнительные сведения о настройке параметров пула потоков можно найти в [руководстве по операциям служб Analysis Services](https://msdn.microsoft.com/library/hh226085.aspx).</span><span class="sxs-lookup"><span data-stu-id="b2ef7-368">More information about tuning the thread pool settings can be found in the [Analysis Services Operations Guide](https://msdn.microsoft.com/library/hh226085.aspx).</span></span>|
|`Query` \ `PriorityRatio`|<span data-ttu-id="b2ef7-369">int</span><span class="sxs-lookup"><span data-stu-id="b2ef7-369">int</span></span>|<span data-ttu-id="b2ef7-370">32-разрядное целое число со знаком, которое используется в том случае, если требуется, чтобы иногда выполнялись потоки с более низким приоритетом, даже если очередь с более высоким приоритетом не пуста.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-370">A signed 32-bit integer that can be used to ensure that lower priority threads are sometimes executed even when a higher priority queue is not empty.</span></span>|<span data-ttu-id="b2ef7-371">2</span><span class="sxs-lookup"><span data-stu-id="b2ef7-371">2</span></span>|<span data-ttu-id="b2ef7-372">Дополнительное свойство, которое следует изменять только под руководством службы поддержки [!INCLUDE[msCoName](../../includes/msconame-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="b2ef7-372">An advanced property that you should not change, except under the guidance of [!INCLUDE[msCoName](../../includes/msconame-md.md)] support.</span></span>|
|`Query`  \ `StackSizeKB`|<span data-ttu-id="b2ef7-373">int</span><span class="sxs-lookup"><span data-stu-id="b2ef7-373">int</span></span>|<span data-ttu-id="b2ef7-374">32-разрядное целое число со знаком, которое можно использовать для настройки выделения памяти во время выполнения потоков.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-374">A signed 32-bit integer that can be used to adjust memory allocation during thread execution.</span></span>|<span data-ttu-id="b2ef7-375">0</span><span class="sxs-lookup"><span data-stu-id="b2ef7-375">0</span></span>|<span data-ttu-id="b2ef7-376">Дополнительное свойство, которое следует изменять только под руководством службы поддержки [!INCLUDE[msCoName](../../includes/msconame-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="b2ef7-376">An advanced property that you should not change, except under the guidance of [!INCLUDE[msCoName](../../includes/msconame-md.md)] support.</span></span>|

##  <a name="set-groupaffinity-to-affinitize-threads-to-processors-in-a-processor-group"></a><a name="bkmk_groupaffinity"></a> <span data-ttu-id="b2ef7-377">Задание параметра GroupAffinity для привязки потоков к процессорам или группе процессоров</span><span class="sxs-lookup"><span data-stu-id="b2ef7-377">Set GroupAffinity to affinitize threads to processors in a processor group</span></span>
 <span data-ttu-id="b2ef7-378">Значение `GroupAffinity` предоставляется для дополнительной настройки.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-378">`GroupAffinity` is provided for advanced tuning purposes.</span></span> <span data-ttu-id="b2ef7-379">Свойство `GroupAffinity` можно использовать, чтобы установить соответствие между пулами потоков [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] и некоторыми процессорами. Однако для большинства установок [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] работает лучше, если можно использовать все доступные логические процессоры.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-379">You can use the `GroupAffinity` property to set affinity between [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] thread pools and specific processors; however, for most installations, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] performs best when it can use all available logical processors.</span></span> <span data-ttu-id="b2ef7-380">Таким образом, по умолчанию соответствие группы не задано.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-380">Accordingly, group affinity is unspecified by default.</span></span>

 <span data-ttu-id="b2ef7-381">Если эксплуатационное тестирование показывает необходимость оптимизации использования ЦП, то, возможно, стоит рассмотреть подход более высокого уровня, например использование диспетчера ресурсов Windows Server для указания сходства между логическими процессорами и процессом сервера.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-381">Should performance testing indicate a need for CPU optimization, you might consider a higher level approach, such as using Windows Server Resource Manager to set affinity between logical processors and a server process.</span></span> <span data-ttu-id="b2ef7-382">Такой подход может оказаться проще в реализации и управлении, чем определение пользовательских соответствий для отдельных пулов потоков.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-382">Such an approach can be simpler to implement and manage than defining custom affinities for individual thread pools.</span></span>

 <span data-ttu-id="b2ef7-383">Если этого окажется недостаточно для решения задачи, то большей точности можно добиться, определив пользовательские соответствия для пулов потоков.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-383">If that approach is insufficient, you can achieve greater precision by defining custom affinities for thread pools.</span></span> <span data-ttu-id="b2ef7-384">Настройка параметров сходства чаще всего рекомендуется в больших многоядерных системах (как с NUMA, так и без этой технологии), испытывающих снижение производительности из-за распределения пулов потоков по слишком большому числу процессоров.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-384">Customizing affinity settings is more likely to be recommended on large multi-core systems (either NUMA or non-NUMA) experiencing performance degradation due to thread pools spread out over too-wide a range of processors.</span></span> <span data-ttu-id="b2ef7-385">Свойство `GroupAffinity` можно задать и в системах, где число логических процессоров меньше 64, но выигрыш от этого будет незначительным, или даже произойдет падение производительности.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-385">Although you can set `GroupAffinity` on systems having fewer than 64 logical processors, the benefit is negligible and might even degrade performance.</span></span>

> [!NOTE]
>  <span data-ttu-id="b2ef7-386">`GroupAffinity` ограничивается выпусками, которые лимитируют количество ядер, используемых [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="b2ef7-386">`GroupAffinity` is constrained by editions that limit the number of cores used by [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)].</span></span> <span data-ttu-id="b2ef7-387">При запуске [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] использует сведения о выпуске и свойства `GroupAffinity` в целях вычисления масок сходства для каждого из 5 пулов потоков, управляемых службами [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="b2ef7-387">At startup, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] uses edition information and the `GroupAffinity` properties to compute affinity masks for each of the 5 thread pools managed by [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)].</span></span> <span data-ttu-id="b2ef7-388">В стандартном выпуске могут использоваться самое большее 16 ядер.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-388">Standard edition can use a maximum of 16 cores.</span></span> <span data-ttu-id="b2ef7-389">Если стандартный выпуск служб [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] устанавливается в большой многоядерной системе, имеющей больше 16 ядер, то в [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] используются только 16 из них.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-389">If you install [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] standard edition on a large multi-core system that has more than 16 cores, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] will only use 16 of them.</span></span> <span data-ttu-id="b2ef7-390">При обновлении экземпляра Enterprise более ранней версии ограничение составляет 20 ядер.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-390">If you upgrade an Enterprise instance of an earlier version, you will be limited to 20 cores.</span></span> <span data-ttu-id="b2ef7-391">Дополнительные сведения о выпусках и лицензировании см. в разделе [Общие сведения о лицензировании SQL Server 2012](https://go.microsoft.com/fwlink/?LinkId=246061).</span><span class="sxs-lookup"><span data-stu-id="b2ef7-391">For more information about editions and licensing, see [SQL Server 2012 Licensing Overview](https://go.microsoft.com/fwlink/?LinkId=246061).</span></span>

### <a name="syntax"></a><span data-ttu-id="b2ef7-392">Синтаксис</span><span class="sxs-lookup"><span data-stu-id="b2ef7-392">Syntax</span></span>
 <span data-ttu-id="b2ef7-393">Шестнадцатеричное значение для каждой группы процессоров, представляющее логические процессоры, которые [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] пытается использовать при выделении потоков из определенного пула.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-393">The value is hexadecimal for each processor group, with the hexadecimal representing the logical processors that [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] attempts to use first when allocating threads for a given thread pool.</span></span>

 <span data-ttu-id="b2ef7-394">**Битовая маска для логических процессоров**</span><span class="sxs-lookup"><span data-stu-id="b2ef7-394">**Bitmask for Logical Processors**</span></span>

 <span data-ttu-id="b2ef7-395">Можно указать до 64 логических процессоров в пределах одной группы.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-395">You can have up to 64 logical processors within a single processor group.</span></span> <span data-ttu-id="b2ef7-396">Битовая маска равна 1 (или 0) для каждого логического процессора в группе, используемого (или не используемого) пулом потоков.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-396">The bitmask is 1 (or 0) for each logical processor in the group that is used (or not used) by a thread pool.</span></span> <span data-ttu-id="b2ef7-397">После вычисления битовой маски следует вычислить шестнадцатеричное значение в качестве значения для параметра `GroupAffinity` .</span><span class="sxs-lookup"><span data-stu-id="b2ef7-397">Once you compute the bitmask, you then calculate the hexadecimal value as the value for `GroupAffinity`.</span></span>

 <span data-ttu-id="b2ef7-398">**Многочисленные группы процессоров**</span><span class="sxs-lookup"><span data-stu-id="b2ef7-398">**Multiple processor groups**</span></span>

 <span data-ttu-id="b2ef7-399">Группы процессоров определяются во время запуска системы.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-399">Processor groups are determined on system startup.</span></span> <span data-ttu-id="b2ef7-400">`GroupAffinity`принимает шестнадцатеричные значения для каждой группы процессоров в списке, разделенном запятыми.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-400">`GroupAffinity` accepts hexadecimal values for each processor group in a comma delimited list.</span></span> <span data-ttu-id="b2ef7-401">При наличии нескольких групп процессоров (до 10 на мощных системах) можно пропустить отдельные группы, указав 0x0.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-401">Given multiple processor groups (up to 10 on higher end systems), you can bypass individual groups by specifying 0x0.</span></span> <span data-ttu-id="b2ef7-402">Например, в системе с четырьмя группами процессоров (0, 1, 2, 3) можно исключить группы 0 и 2, введя 0x0 для первого и третьего значения.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-402">For example, on a system with four processor groups (0, 1, 2, 3), you could exclude groups 0 and 2 by entering 0x0 for the first and third values.</span></span>

 `<GroupAffinity>0x0, 0xFF, 0x0, 0xFF</GroupAffinity>`

### <a name="steps-for-computing-the-processor-affinity-mask"></a><span data-ttu-id="b2ef7-403">Действия при вычислении маски соответствия процессоров</span><span class="sxs-lookup"><span data-stu-id="b2ef7-403">Steps for computing the processor affinity mask</span></span>
 <span data-ttu-id="b2ef7-404">Можно задать `GroupAffinity` в msmdsrv.ini или на страницах свойств сервера в SQL Server Management Studio.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-404">You can set `GroupAffinity` in msmdsrv.ini or in server property pages in SQL Server Management Studio.</span></span>

1.  <span data-ttu-id="b2ef7-405">**Определение количества процессоров и групп процессоров**</span><span class="sxs-lookup"><span data-stu-id="b2ef7-405">**Determine the number of processors and processor groups**</span></span>

     <span data-ttu-id="b2ef7-406">Можно загрузить [программу Coreinfo из winsysinternals](https://technet.microsoft.com/sysinternals/cc835722.aspx).</span><span class="sxs-lookup"><span data-stu-id="b2ef7-406">You can download [Coreinfo utility from winsysinternals](https://technet.microsoft.com/sysinternals/cc835722.aspx).</span></span>

     <span data-ttu-id="b2ef7-407">Запустите **coreinfo** для получения этих сведений из раздела «Сопоставление логических процессоров с группой».</span><span class="sxs-lookup"><span data-stu-id="b2ef7-407">Run **coreinfo** to get this information from the Logical Processor to Group Map section.</span></span> <span data-ttu-id="b2ef7-408">Формируется отдельная строка для каждого логического процессора.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-408">A separate line is generated for each logical processor.</span></span>

2.  <span data-ttu-id="b2ef7-409">Последовательность процессоров справа налево: `7654 3210`</span><span class="sxs-lookup"><span data-stu-id="b2ef7-409">Sequence the processors, from right to left: `7654 3210`</span></span>

     <span data-ttu-id="b2ef7-410">Пример показывает только 8 процессоров (от 0 до 7), но группа процессоров может иметь максимум 64 логических процессора. На сервере Windows уровня предприятия может быть до 10 групп процессоров.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-410">The example shows only 8 processors (0 through 7), but a processor group can have a maximum of 64 logical processors, and there can be up to 10 processor groups in an enterprise-class Windows server.</span></span>

3.  <span data-ttu-id="b2ef7-411">**Вычислите битовую маску для групп процессоров, которые собираетесь использовать**</span><span class="sxs-lookup"><span data-stu-id="b2ef7-411">**Compute the bitmask for the processor groups you want to use**</span></span>

     `7654 3210`

     <span data-ttu-id="b2ef7-412">Замените цифру на 0 или 1 в зависимости от того, нужно включить или исключить логический процессор.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-412">Replace the number with a 0 or 1, depending on whether you want to exclude or include the logical processor.</span></span> <span data-ttu-id="b2ef7-413">В системе с 8 процессорами выбранное вычисление может выглядеть следующим образом, если для служб Analysis Services решено использовать процессоры 7, 6, 5, 4 и 1:</span><span class="sxs-lookup"><span data-stu-id="b2ef7-413">On a system having eight processors, your calculation might look like this if you wanted to use processors 7, 6, 5, 4, and 1 for Analysis Services:</span></span>

     `1111 0010`

4.  <span data-ttu-id="b2ef7-414">**Преобразование двоичного значения в шестнадцатеричное**</span><span class="sxs-lookup"><span data-stu-id="b2ef7-414">**Convert the binary number to a Hex value**</span></span>

     <span data-ttu-id="b2ef7-415">Преобразуйте двоичное значение в шестнадцатеричное с помощью калькулятора или средства преобразования.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-415">Using a calculator or conversion tool, convert the binary number to its hexadecimal equivalent.</span></span> <span data-ttu-id="b2ef7-416">В нашем примере `1111 0010` преобразуется в `0xF2`.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-416">In our example, `1111 0010` converts to `0xF2`.</span></span>

5.  <span data-ttu-id="b2ef7-417">**Укажите это шестнадцатеричное значение в свойстве GroupAffinity**</span><span class="sxs-lookup"><span data-stu-id="b2ef7-417">**Enter the hex value in the GroupAffinity property**</span></span>

     <span data-ttu-id="b2ef7-418">В msmdsrv.ini или на странице свойств сервера в Management Studio задайте значение, `GroupAffinity` вычисленное на шаге 4.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-418">In msmdsrv.ini or in the server property page in Management Studio, set `GroupAffinity` to the value calculated in step 4.</span></span>

> [!IMPORTANT]
>  <span data-ttu-id="b2ef7-419">Задание `GroupAffinity` — это ручная задача, охватывающая несколько шагов.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-419">Setting `GroupAffinity` is a manual task encompassing multiple steps.</span></span> <span data-ttu-id="b2ef7-420">При вычислениях `GroupAffinity` тщательно проверяйте свои вычисления.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-420">When computing `GroupAffinity`, check your calculations carefully.</span></span> <span data-ttu-id="b2ef7-421">Хотя [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] возвращает ошибку, если некорректна вся маска, сочетание допустимых и недопустимых параметров приводит к тому, что [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] игнорирует это свойство.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-421">Although [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] will return an error if the entire mask is invalid, a combination of valid and invalid settings results in [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] ignoring the property.</span></span> <span data-ttu-id="b2ef7-422">Например, если битовая маска включает дополнительные значения, то [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] пропустит этот параметр и будут использоваться все ЦП в системе.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-422">For example, if the bitmask includes extra values, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] ignores the setting, using all processors on the system.</span></span> <span data-ttu-id="b2ef7-423">Нет ошибки или предупреждения, которое сообщило бы об этом. Но вы можете проверить файл msmdsrv.log, чтобы узнать, как на самом деле заданы критерии сходства.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-423">There is no error or warning to alert you when this action occurs, but you can check the msmdsrv.log file to learn how the affinities are actually set.</span></span>

##  <a name="set-pernumanode-to-affinitize-io-threads-to-processors-in-a-numa-node"></a><a name="bkmk_pernumanode"></a><span data-ttu-id="b2ef7-424">Установка для PerNumaNode потоков ввода-вывода привязать на процессоры в узле NUMA</span><span class="sxs-lookup"><span data-stu-id="b2ef7-424">Set PerNumaNode to affinitize IO threads to processors in a NUMA node</span></span>
 <span data-ttu-id="b2ef7-425">Для многомерных Analysis Services экземпляров можно задать `PerNumaNode` в `IOProcess` пуле потоков, чтобы дополнительно оптимизировать планирование и выполнение потоков.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-425">For multidimensional Analysis Services instances, you can set `PerNumaNode` on the `IOProcess` thread pool to further optimize thread scheduling and execution.</span></span> <span data-ttu-id="b2ef7-426">В то время как `GroupAffinity` определяет, какой набор логических процессоров следует использовать для данного пула потоков, `PerNumaNode` переходит на один шаг дальше, указывая, нужно ли создавать несколько пулов потоков, дополнительно привязаны к какому-либо подмножеству разрешенных логических процессоров.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-426">Whereas `GroupAffinity` identifies which set of logical processors to use for a given thread pool, `PerNumaNode` goes one step further by specifying whether to create multiple thread pools, further affinitized to some subset of the allowed logical processors.</span></span>

> [!NOTE]
>  <span data-ttu-id="b2ef7-427">Чтобы узнать число узлов NUMA в Windows Server 2012, используйте диспетчер задач.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-427">On Windows Server 2012, use Task Manager to view the number of NUMA nodes on the computer.</span></span> <span data-ttu-id="b2ef7-428">В диспетчере задач на вкладке "Производительность" выберите **ЦП** , а затем щелкните правой кнопкой мыши область диаграммы для просмотра узлов NUMA.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-428">In Task Manager, on the Performance tab, select **CPU** and then right-click the graph area to view NUMA nodes.</span></span> <span data-ttu-id="b2ef7-429">Или же [загрузите](https://technet.microsoft.com/sysinternals/cc835722.aspx) программу Coreinfo из Windows Sysinternals и запустите `coreinfo -n` , что позволит узнать число узлов NUMA и количество логических процессоров в каждом узле.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-429">Alternatively, [download](https://technet.microsoft.com/sysinternals/cc835722.aspx) the Coreinfo utility from Windows Sysinternals and run `coreinfo -n` to return NUMA nodes and logical processors in each node.</span></span>

 <span data-ttu-id="b2ef7-430">Допустимыми значениями для `PerNumaNode` являются-1, 0, 1, 2, как описано в разделе [Справочник по свойствам пула потоков](#bkmk_propref) в этой статье.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-430">Valid values for `PerNumaNode` are -1, 0, 1, 2, as described in the [Thread Pool Property Reference](#bkmk_propref) section in this topic.</span></span>

### <a name="default-recommended"></a><span data-ttu-id="b2ef7-431">По умолчанию (рекомендуется)</span><span class="sxs-lookup"><span data-stu-id="b2ef7-431">Default (Recommended)</span></span>
 <span data-ttu-id="b2ef7-432">В системах, где есть узлы NUMA, рекомендуется использовать PerNumaNode=-1. Это позволяет [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] подстраивать количество пулов потоков и их соответствие на основе количества узлов.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-432">On systems having NUMA nodes, we recommend using the default setting of PerNumaNode=-1, allowing [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] to adjust the number of thread pools and their thread affinity based on node count.</span></span> <span data-ttu-id="b2ef7-433">Если в системе меньше 4 узлов, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] реализует поведение, описанное в `PerNumaNode` = 0, тогда как `PerNumaNode` = 1 используется в системах с 4 или более узлами.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-433">If the system has fewer than 4 nodes, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] implements the behaviors described by `PerNumaNode`=0, whereas `PerNumaNode`=1 is used on systems having 4 or more nodes.</span></span>

### <a name="choosing-a-value"></a><span data-ttu-id="b2ef7-434">Выбор значения</span><span class="sxs-lookup"><span data-stu-id="b2ef7-434">Choosing a value</span></span>
 <span data-ttu-id="b2ef7-435">Можно также переопределить значение по умолчанию и использовать другое допустимое значение.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-435">You can also override the default to use another valid value.</span></span>

 <span data-ttu-id="b2ef7-436">**Задание PerNumaNode=0**</span><span class="sxs-lookup"><span data-stu-id="b2ef7-436">**Setting PerNumaNode=0**</span></span>

 <span data-ttu-id="b2ef7-437">Узлы NUMA не учитываются.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-437">NUMA nodes are ignored.</span></span> <span data-ttu-id="b2ef7-438">Будет присутствовать только один пул потоков IOProcess, и все потоки в этом пуле будут привязаны ко всем логическим процессорам.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-438">There will be just one IOProcess thread pool, and all threads in that thread pool will be affinitized to all logical processors.</span></span> <span data-ttu-id="b2ef7-439">Это значение будет использоваться по умолчанию (при PerNumaNode=-1), если компьютер имеет менее 4 узлов NUMA.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-439">By default (where PerNumaNode=-1), this is the operative setting if the computer has fewer than 4 NUMA nodes.</span></span>

 <span data-ttu-id="b2ef7-440">![Соответствие NUMA, процессора и пула потоков](../media/ssas-threadpool-numaex0.PNG "Соответствие NUMA, процессора и пула потоков")</span><span class="sxs-lookup"><span data-stu-id="b2ef7-440">![Numa, processor and thread pool correspondence](../media/ssas-threadpool-numaex0.PNG "Numa, processor and thread pool correspondence")</span></span>

 <span data-ttu-id="b2ef7-441">**Задание PerNumaNode=1**</span><span class="sxs-lookup"><span data-stu-id="b2ef7-441">**Setting PerNumaNode=1**</span></span>

 <span data-ttu-id="b2ef7-442">Пулы потоков IOProcess создаются для каждого узла NUMA.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-442">IOProcess thread pools are created for each NUMA node.</span></span> <span data-ttu-id="b2ef7-443">Наличие отдельных пулов потоков способствует улучшению координируемого доступа к локальным ресурсам, например к локальному кэшу на узле NUMA.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-443">Having separate thread pools improves coordinated access to local resources, such as local cache on a NUMA node.</span></span>

 <span data-ttu-id="b2ef7-444">![Соответствие NUMA, процессора и пула потоков](../media/ssas-threadpool-numaex1.PNG "Соответствие NUMA, процессора и пула потоков")</span><span class="sxs-lookup"><span data-stu-id="b2ef7-444">![Numa, processor and thread pool correspondence](../media/ssas-threadpool-numaex1.PNG "Numa, processor and thread pool correspondence")</span></span>

 <span data-ttu-id="b2ef7-445">**Задание PerNumaNode=2**</span><span class="sxs-lookup"><span data-stu-id="b2ef7-445">**Setting PerNumaNode=2**</span></span>

 <span data-ttu-id="b2ef7-446">Это значение для очень мощных систем, где выполняются интенсивные рабочие нагрузки [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="b2ef7-446">This setting is for very high-end systems running intensive [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] workloads.</span></span> <span data-ttu-id="b2ef7-447">Это свойство задает привязку пула потоков IOProcess на самом детальном уровне, создавая и привязывая пулы на уровне логических процессоров.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-447">This property sets IOProcess thread pool affinity at its most granular level, creating and affinitizing separate thread pools at the logical processor level.</span></span>

 <span data-ttu-id="b2ef7-448">В следующем примере в системе с 4 узлами NUMA и 32 логическими процессорами значение 2 приведет к тому, что `PerNumaNode` IOProcess пулы потоков 32.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-448">In the following example, on a system having 4 NUMA nodes and 32 logical processors, setting `PerNumaNode` to 2 would result in 32 IOProcess thread pools.</span></span> <span data-ttu-id="b2ef7-449">Потоки в первых 8 пулах будут привязаны ко всем логическим процессорам в узле 0, но идеальный процессор будет назначен для 0, 1, 2... до 7.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-449">The threads in the first 8 thread pools would be affinitized to all the logical processors in the NUMA node 0, but with the ideal processor set to 0, 1, 2, up to 7.</span></span> <span data-ttu-id="b2ef7-450">Следующие 8 пулов потоков будут привязаны ко всем логическим процессорам в узле 1 NUMA, идеальный процессор будет назначен для 8, 9, 10... до 15 и т. д.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-450">The next 8 thread pools would be affinitized to all the logical processors in NUMA node 1, with the ideal processor set to 8, 9, 10, up to 15, and so on.</span></span>

 <span data-ttu-id="b2ef7-451">![Соответствие NUMA, процессора и пула потоков](../media/ssas-threadpool-numaex2.PNG "Соответствие NUMA, процессора и пула потоков")</span><span class="sxs-lookup"><span data-stu-id="b2ef7-451">![Numa, processor and thread pool correspondence](../media/ssas-threadpool-numaex2.PNG "Numa, processor and thread pool correspondence")</span></span>

 <span data-ttu-id="b2ef7-452">На этом уровне соответствия планировщик всегда сначала пытается использовать идеально подходящий логический процессор в предпочитаемом узле NUMA.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-452">At this level of affinity, the scheduler always attempts to use the ideal logical processor first, within the preferred NUMA node.</span></span> <span data-ttu-id="b2ef7-453">Если логический процессор недоступен, то планировщик выбирает один процессор в том же узле или в той же группе процессоров, если другие потоки недоступны.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-453">If the logical processor is unavailable, the scheduler chooses another processor within the same node, or within the same processor group if no other threads are available.</span></span> <span data-ttu-id="b2ef7-454">Дополнительные сведения и примеры см. в статье [Параметры конфигурации служб Analysis Services 2012 (блог Wordpress)](https://go.microsoft.com/fwlink/?LinkId=330387).</span><span class="sxs-lookup"><span data-stu-id="b2ef7-454">For more information and examples, see [Analysis Services 2012 Configuration settings (Wordpress Blog)](https://go.microsoft.com/fwlink/?LinkId=330387).</span></span>

###  <a name="work-distribution-among-ioprocess-threads"></a><a name="bkmk_workdistrib"></a><span data-ttu-id="b2ef7-455">Распределение работы между потоками IOProcess</span><span class="sxs-lookup"><span data-stu-id="b2ef7-455">Work distribution among IOProcess threads</span></span>
 <span data-ttu-id="b2ef7-456">При принятии решения о том, следует ли задавать `PerNumaNode` свойство, знание того, как `IOProcess` потоки используются, может помочь принять более обоснованное решение.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-456">As you consider whether to set the `PerNumaNode` property, knowing how `IOProcess` threads are used can help you make a more informed decision.</span></span>

 <span data-ttu-id="b2ef7-457">Помните, что `IOProcess` используется для заданий ввода-вывода, связанных с запросами подсистемы хранилища в многомерном модуле.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-457">Recall that `IOProcess` is used for IO jobs associated with storage engine queries in the multidimensional engine.</span></span>

 <span data-ttu-id="b2ef7-458">При сканировании сегмента модуль определяет секцию, к которой принадлежит сегмент, и пытается поместить задание сегмента в пул потоков, используемый этой секцией.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-458">When a segment is scanned, the engine identifies the partition to which the segment belongs, and attempts to queue the segment job to the thread pool used by the partition.</span></span> <span data-ttu-id="b2ef7-459">Как правило, все сегменты, принадлежащие секции, ставят свои задачи в один и тот же пул потоков.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-459">In general, all segments belonging to a partition will queue their tasks to the same thread pool.</span></span> <span data-ttu-id="b2ef7-460">В системах NUMA это особенно удобно, поскольку все операции сканирования секции используют память в кэше файловой системы, локально выделенном для этого узла NUMA.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-460">On NUMA systems, this behavior is particularly advantageous because all scans for a partition will use memory in the file system cache that is allocated locally to that NUMA node.</span></span>

 <span data-ttu-id="b2ef7-461">В следующих сценариях предлагаются корректировки, которые иногда могут увеличить производительность запросов в системах NUMA.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-461">The following scenarios suggest adjustments that can sometimes improve query performance on NUMA systems:</span></span>

-   <span data-ttu-id="b2ef7-462">Для групп мер, которые недостаточно разделены (например, при использовании одной секции), увеличьте число секций.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-462">For measure groups that are under-partitioned (for example, having a single partition), increase the number of partitions.</span></span> <span data-ttu-id="b2ef7-463">При использовании только одной секции модуль всегда помещает задачи в один пул потоков (нулевой).</span><span class="sxs-lookup"><span data-stu-id="b2ef7-463">Using just one partition will cause the engine to always queue tasks to one thread pool (thread pool 0).</span></span> <span data-ttu-id="b2ef7-464">Добавление нескольких секций позволяет модулю использовать дополнительные пулы потоков.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-464">Adding more partitions allows the engine to use additional thread pools.</span></span>

     <span data-ttu-id="b2ef7-465">Кроме того, если не удается создать дополнительные разделы, попробуйте задать значение `PerNumaNode` = 0, чтобы увеличить число потоков, доступных пулу потоков 0.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-465">Alternatively, if you cannot create additional partitions, try setting `PerNumaNode`=0 as a way to increase the number of threads available to thread pool 0.</span></span>

-   <span data-ttu-id="b2ef7-466">Для баз данных, в которых проверка сегмента равномерно распределяется по нескольким секциям, установка значения `PerNumaNode` 1 или 2 может повысить производительность запросов, так как она увеличивает общее число `IOProcess` пулов потоков, используемых системой.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-466">For databases in which segment scans are evenly distributed across multiple partitions, setting `PerNumaNode` to 1 or 2 can improve query performance because it increases the overall number of `IOProcess` thread pools used by the system.</span></span>

-   <span data-ttu-id="b2ef7-467">Для решений, имеющих несколько разделов, но только один сканируется, попробуйте задать значение `PerNumaNode` = 0, чтобы узнать, улучшается ли производительность.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-467">For solutions that have multiple partitions, but only one is heavily scanned, try setting `PerNumaNode`=0 to see if it improves performance.</span></span>

 <span data-ttu-id="b2ef7-468">Хотя при сканировании секций и измерений используется `IOProcess` пул потоков, Просмотры измерений используют только пул потоков 0.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-468">Although both partition and dimension scans use the `IOProcess` thread pool, dimension scans only use thread pool 0.</span></span> <span data-ttu-id="b2ef7-469">Это может привести к слегка неравномерной загрузке данного пула потоков, но дисбаланс должен быть временным, так как операции сканирования измерений применяются редко и выполняются очень быстро.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-469">This can result in a slightly uneven load on that thread pool, but the imbalance should be temporary, as dimension scans tend to be very fast and infrequent.</span></span>

> [!NOTE]
>  <span data-ttu-id="b2ef7-470">При изменении свойства сервера следует помнить, что параметр конфигурации применяется ко всем базам данных в текущем экземпляре.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-470">When changing a server property, remember that the configuration option applies to all databases running on the current instance.</span></span> <span data-ttu-id="b2ef7-471">Выберите параметры, дающие выигрыш для наиболее важных баз данных или большего числа баз данных.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-471">Choose settings that benefit the most important databases, or the greatest number of databases.</span></span> <span data-ttu-id="b2ef7-472">Нельзя установить привязку процессоров на уровне базы данных, нельзя также задать соответствия между отдельными секциями и некоторыми процессорами.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-472">You cannot set processor affinity at the database level, nor can you set affinity between individual partitions and specific processors.</span></span>

 <span data-ttu-id="b2ef7-473">Дополнительные сведения об архитектуре заданий см. в подразделе 2.2 [руководства по повышению производительности служб SQL Server 2008 Analysis Services](https://www.microsoft.com/download/details.aspx?id=17303).</span><span class="sxs-lookup"><span data-stu-id="b2ef7-473">For more information about job architecture, see section 2.2 in [SQL Server 2008 Analysis Services Performance Guide](https://www.microsoft.com/download/details.aspx?id=17303).</span></span>

##  <a name="dependent-or-related-properties"></a><a name="bkmk_related"></a><span data-ttu-id="b2ef7-474">Зависимые или связанные свойства</span><span class="sxs-lookup"><span data-stu-id="b2ef7-474">Dependent or Related Properties</span></span>
 <span data-ttu-id="b2ef7-475">Как описано в разделе 2,4 [Analysis Services руководстве по операциям](https://msdn.microsoft.com/library/hh226085.aspx), при увеличении пула потоков обработки следует убедиться, что `CoordinatorExecutionMode` Параметры, а также `CoordinatorQueryMaxThreads` Параметры, имеют значения, позволяющие полностью использовать увеличенный размер пула потоков.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-475">As explained in section 2.4 of the [Analysis Services Operations Guide](https://msdn.microsoft.com/library/hh226085.aspx), if you increase the processing thread pool, you should make sure that the `CoordinatorExecutionMode` settings, as well as the `CoordinatorQueryMaxThreads` settings, have values that enable you to make full use of the increased thread pool size.</span></span>

 <span data-ttu-id="b2ef7-476">Службы Analysis Services используют координирующий поток для сбора данных, необходимых для завершения обработки или выполнения запроса.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-476">Analysis Services uses a coordinator thread for gathering the data needed to complete a processing or query request.</span></span> <span data-ttu-id="b2ef7-477">Координатор сначала ставит в очередь одно задание для каждой секции, которое необходимо обработать.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-477">The coordinator first queues up one job for each partition that must be touched.</span></span> <span data-ttu-id="b2ef7-478">Каждое из этих заданий затем ставит в очередь другие задания в зависимости от общего числа сегментов, которые необходимо просмотреть в секции.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-478">Each of those jobs then continues to queue up more jobs, depending on the total number of segments that must be scanned in the partition.</span></span>

 <span data-ttu-id="b2ef7-479">Значение по умолчанию для `CoordinatorExecutionMode` равно -4, что ставит предел в 4 параллельных заданиях на ядро и ограничивает общее количество заданий координатора, которые могут параллельно выполняться запросом вложенного куба в подсистеме хранилища.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-479">The default value for `CoordinatorExecutionMode` is -4, meaning a limit of 4 jobs in parallel per core, which constrains the total number of coordinator jobs that can be executed in parallel by a subcube request in the storage engine.</span></span>

 <span data-ttu-id="b2ef7-480">Значение по умолчанию для `CoordinatorQueryMaxThreads` равно 16, что ограничивает число сегментов заданий, которые могут выполняться параллельно для каждой секции.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-480">The default value for `CoordinatorQueryMaxThreads` is 16, which limits the number of segment jobs that can be executed in parallel for each partition.</span></span>

##  <a name="determine-current-thread-pool-settings"></a><a name="bkmk_currentsettings"></a><span data-ttu-id="b2ef7-481">Определение текущих параметров пула потоков</span><span class="sxs-lookup"><span data-stu-id="b2ef7-481">Determine current thread pool settings</span></span>
 <span data-ttu-id="b2ef7-482">При каждом запуске службы [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] выводит текущие параметры пула потоков в файл msmdsrv.log, включая минимальное и максимальное число потоков, маску соответствия процессоров и степень параллелизма.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-482">At each service startup, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] outputs the current thread pool settings into the msmdsrv.log file, including minimum and maximum threads, processor affinity mask, and concurrency.</span></span>

 <span data-ttu-id="b2ef7-483">В следующем примере дан отрывок из файла журнала, где показываются параметры по умолчанию для пула потоков Query (MinThread=0, MaxThread=0, Concurrency=2) в 4-ядерной системе с включенной функцией управления потоками.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-483">The following example is an excerpt from the log file, showing the default settings for the Query thread pool (MinThread=0, MaxThread=0, Concurrency=2), on a 4-core system with hyper-threading enabled.</span></span> <span data-ttu-id="b2ef7-484">Маска сходства — 0xFF, что означает 8 логических процессоров.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-484">The affinity mask is 0xFF, indicating 8 logical processors.</span></span> <span data-ttu-id="b2ef7-485">Обратите внимание, что к маске добавлены нули в начале.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-485">Notice that leading zeros are prepended to the mask.</span></span> <span data-ttu-id="b2ef7-486">Не обращайте на них внимание.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-486">You can ignore the leading zeros.</span></span>

 `"10/28/2013 9:20:52 AM) Message: The Query thread pool now has 1 minimum threads, 16 maximum threads, and a concurrency of 16.  Its thread pool affinity mask is 0x00000000000000ff. (Source: \\?\C:\Program Files\Microsoft SQL Server\MSAS11.MSSQLSERVER\OLAP\Log\msmdsrv.log, Type: 1, Category: 289, Event ID: 0x4121000A)"`

 <span data-ttu-id="b2ef7-487">Помните, что алгоритм для установки параметра **MinThread** и **MaxThread** опирается на системную конфигурацию, в частности на число процессоров.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-487">Recall that the algorithm for setting **MinThread** and **MaxThread** incorporates system configuration, particularly the number of processors.</span></span> <span data-ttu-id="b2ef7-488">Вычисление значения описывается в записи блога [Параметры конфигурации служб Analysis Services 2012 (блог Wordpress)](https://go.microsoft.com/fwlink/?LinkId=330387).</span><span class="sxs-lookup"><span data-stu-id="b2ef7-488">The following blog post offers insights into how the values are calculated: [Analysis Services 2012 Configuration settings (Wordpress Blog)](https://go.microsoft.com/fwlink/?LinkId=330387).</span></span> <span data-ttu-id="b2ef7-489">Обратите внимание, что эти параметры и стратегии могут быть изменены в последующих выпусках.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-489">Note that these settings and behaviors are subject to adjustment in subsequent releases.</span></span>

 <span data-ttu-id="b2ef7-490">В следующем списке показаны примеры других масок сходства для различных сочетаний процессоров:</span><span class="sxs-lookup"><span data-stu-id="b2ef7-490">The following list shows examples of other affinity mask settings, for different combinations of processors:</span></span>

-   <span data-ttu-id="b2ef7-491">Соответствие для процессоров 3-2-1-0 в 8-ядерной системе в этой битовой маске: 00001111 и шестнадцатеричное значение: 0xF</span><span class="sxs-lookup"><span data-stu-id="b2ef7-491">Affinity for processors 3-2-1-0 on an 8 core system results in this bitmask: 00001111, and a hexadecimal value: 0xF</span></span>

-   <span data-ttu-id="b2ef7-492">Соответствие для процессоров 7-6-5-4 в 8-ядерной системе в этой битовой маске: 11110000 и шестнадцатеричное значение: 0xF0</span><span class="sxs-lookup"><span data-stu-id="b2ef7-492">Affinity for processors 7-6-5-4 on an 8 core system results in this bitmask: 11110000, and a hexadecimal value: 0xF0</span></span>

-   <span data-ttu-id="b2ef7-493">Соответствие для процессоров 5-4-3-2 в 8-ядерной системе в этой битовой маске: 00111100 и шестнадцатеричное значение: 0x3C</span><span class="sxs-lookup"><span data-stu-id="b2ef7-493">Affinity for processors 5-4-3-2 on an 8 core system results in this bitmask: 00111100, and a hexadecimal value: 0x3C</span></span>

-   <span data-ttu-id="b2ef7-494">Соответствие для процессоров 7-6-1-0 в 8-ядерной системе в этой битовой маске: 11000011 и шестнадцатеричное значение: 0xC3</span><span class="sxs-lookup"><span data-stu-id="b2ef7-494">Affinity for processors 7-6-1-0 on an 8 core system results in this bitmask: 11000011, and a hexadecimal value: 0xC3</span></span>

 <span data-ttu-id="b2ef7-495">Помните, что в системах, имеющих несколько групп процессов, для каждой группы формируется отдельная маска сходства в виде списка с разделением запятыми.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-495">Recall that on systems having multiple processor groups, a separate affinity mask is generated for each group, in a comma separated list.</span></span>

##  <a name="about-msmdsrvini"></a><a name="bkmk_msmdrsrvini"></a><span data-ttu-id="b2ef7-496">О MSMDSRV.INI</span><span class="sxs-lookup"><span data-stu-id="b2ef7-496">About MSMDSRV.INI</span></span>
 <span data-ttu-id="b2ef7-497">Файл msmdsrv.ini содержит параметры конфигурации для экземпляра [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] , влияющие на все базы данных, запущенные на данном экземпляре.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-497">The msmdsrv.ini file contains configuration settings for an [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] instance, affecting all databases running on that instance.</span></span> <span data-ttu-id="b2ef7-498">Нельзя использовать свойства конфигурации сервера для оптимизации производительности только одной базы данных за счет других.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-498">You cannot use server configuration properties to optimize performance of just one database to the exclusion of all others.</span></span> <span data-ttu-id="b2ef7-499">Однако можно установить несколько экземпляров служб [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] и настроить эти экземпляры на использование свойств, которые дадут выигрыш для баз данных, использующих одинаковые характеристики или рабочие нагрузки.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-499">However, you can install multiple instances of [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] and configure each instance to use properties that benefit databases sharing similar characteristics or workloads.</span></span>

 <span data-ttu-id="b2ef7-500">Все свойства конфигурации сервера содержатся в файле msmdsrv.ini.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-500">All server configuration properties are included in the msmdsrv.ini file.</span></span> <span data-ttu-id="b2ef7-501">Подмножества этих свойств, которые изменяются чаще всего, доступны также в средствах управления, таких как среда SSMS.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-501">Subsets of the properties more likely to be modified also appear in administration tools, such as SSMS.</span></span>

 <span data-ttu-id="b2ef7-502">Содержимое файла msmdsrv.ini одинаково как для многомерных, так и для табличных экземпляров [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="b2ef7-502">The contents of msmdsrv.ini are identical for both Tabular and Multidimensional instances of [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)].</span></span> <span data-ttu-id="b2ef7-503">Однако некоторые параметры применяются только в одном из этих режимов.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-503">However, some settings apply to one mode only.</span></span> <span data-ttu-id="b2ef7-504">Различия в поведении, зависящие от режима сервера, указаны в справочной документации свойства.</span><span class="sxs-lookup"><span data-stu-id="b2ef7-504">Differences in behavior based on server mode are noted in property reference documentation.</span></span>

> [!NOTE]
>  <span data-ttu-id="b2ef7-505">Инструкции по заданию этих свойств см. в разделе [Configure Server Properties in Analysis Services](server-properties-in-analysis-services.md).</span><span class="sxs-lookup"><span data-stu-id="b2ef7-505">For instructions on how to set properties, see [Configure Server Properties in Analysis Services](server-properties-in-analysis-services.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="b2ef7-506">См. также:</span><span class="sxs-lookup"><span data-stu-id="b2ef7-506">See Also</span></span>
 <span data-ttu-id="b2ef7-507">[О процессах и потоках](/windows/desktop/ProcThread/about-processes-and-threads) [несколько процессоров](/windows/desktop/ProcThread/multiple-processors) [группы процессоров](/windows/desktop/ProcThread/processor-groups) [Analysis Services изменения пула потоков в SQL Server 2012](https://blogs.msdn.com/b/psssql/archive/2012/01/31/analysis-services-thread-pool-changes-in-sql-server-2012.aspx) [Analysis Services 2012 параметры конфигурации (блог Wordpress)](https://go.microsoft.com/fwlink/?LinkId=330387) [, поддерживающие системы с более чем 64 процессоров](https://msdn.microsoft.com/library/windows/hardware/gg463349.aspx) [SQL Server 2008 R2 Analysis Services руководство по эксплуатации](https://go.microsoft.com/fwlink/?LinkID=225539)</span><span class="sxs-lookup"><span data-stu-id="b2ef7-507">[About Processes and Threads](/windows/desktop/ProcThread/about-processes-and-threads) [Multiple Processors](/windows/desktop/ProcThread/multiple-processors) [Processor Groups](/windows/desktop/ProcThread/processor-groups) [Analysis Services Thread Pool Changes in SQL Server 2012](https://blogs.msdn.com/b/psssql/archive/2012/01/31/analysis-services-thread-pool-changes-in-sql-server-2012.aspx) [Analysis Services 2012 Configuration settings (Wordpress Blog)](https://go.microsoft.com/fwlink/?LinkId=330387) [Supporting Systems That Have More Than 64 Processors](https://msdn.microsoft.com/library/windows/hardware/gg463349.aspx) [SQL Server 2008 R2 Analysis Services Operations Guide](https://go.microsoft.com/fwlink/?LinkID=225539)</span></span>


