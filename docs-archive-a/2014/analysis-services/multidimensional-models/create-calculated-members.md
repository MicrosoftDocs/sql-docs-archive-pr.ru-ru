---
title: Создание вычисляемых элементов | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
helpviewer_keywords:
- calculated members [Analysis Services]
- custom measures [Analysis Services]
- members [Analysis Services], calculated
- calculations [Analysis Services], calculated members
ms.assetid: 820e4b18-9c3a-4b12-a126-ca16d8364a00
author: minewiskan
ms.author: owend
ms.openlocfilehash: c45ef3cf720e6a3cc43156b032d91d205d6334bc
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87655410"
---
# <a name="create-calculated-members"></a><span data-ttu-id="d63a7-102">Создание вычисляемых элементов</span><span class="sxs-lookup"><span data-stu-id="d63a7-102">Create Calculated Members</span></span>
  <span data-ttu-id="d63a7-103">Можно создать пользовательские меры или элементы измерения, называемые вычисляемыми элементами, с помощью комбинации данных куба, арифметических операторов, чисел и функций.</span><span class="sxs-lookup"><span data-stu-id="d63a7-103">You can create customized measures or dimension members, called calculated members, by combining cube data, arithmetic operators, numbers, and functions.</span></span> <span data-ttu-id="d63a7-104">Например, можно создать вычисляемый элемент со значением «Евро», конвертирующий доллары в евро с помощью умножения меры доллара на коэффициент конвертации.</span><span class="sxs-lookup"><span data-stu-id="d63a7-104">For example, you can create a calculated member named Euros that converts dollars to euros by multiplying an existing dollar measure by a conversion rate.</span></span> <span data-ttu-id="d63a7-105">Затем можно в отдельной строке или столбце отобразить значение в евро для конечных пользователей.</span><span class="sxs-lookup"><span data-stu-id="d63a7-105">Euros can then be displayed to end users in a separate row or column.</span></span>  
  
 <span data-ttu-id="d63a7-106">Определения вычисляемых элементов хранятся, но их значения существуют только в памяти.</span><span class="sxs-lookup"><span data-stu-id="d63a7-106">Calculated member definitions are stored, but their values exist only in memory.</span></span> <span data-ttu-id="d63a7-107">В предыдущем примере значение для пользователей отображается в марках, но это значение не хранится как данные куба.</span><span class="sxs-lookup"><span data-stu-id="d63a7-107">In the preceding example, values in marks are displayed to end users but are not stored as cube data.</span></span>  
  
 <span data-ttu-id="d63a7-108">Вычисляемые элементы создаются в кубах.</span><span class="sxs-lookup"><span data-stu-id="d63a7-108">You create calculated members in cubes.</span></span> <span data-ttu-id="d63a7-109">Чтобы создать вычисляемый элемент, в конструкторе кубов на вкладке **Вычисления** нажмите кнопку **Создать вычисляемый элемент** на панели инструментов.</span><span class="sxs-lookup"><span data-stu-id="d63a7-109">To create a calculated member, in Cube Designer, on the **Calculations** tab, click the **New Calculated Member** icon on the toolbar.</span></span> <span data-ttu-id="d63a7-110">Откроется форма для указания следующих параметров вычисляемого элемента:</span><span class="sxs-lookup"><span data-stu-id="d63a7-110">This command displays a form to specify the following options for the calculated member:</span></span>  
  
 <span data-ttu-id="d63a7-111">**имя**;</span><span class="sxs-lookup"><span data-stu-id="d63a7-111">**Name**</span></span>  
 <span data-ttu-id="d63a7-112">Выберите имя вычисляемого элемента.</span><span class="sxs-lookup"><span data-stu-id="d63a7-112">Select the name of the calculated member.</span></span> <span data-ttu-id="d63a7-113">Это имя отображается как заголовок столбца или строки для значений вычисляемого элемента при просмотре куба пользователем.</span><span class="sxs-lookup"><span data-stu-id="d63a7-113">This name appears as the column or row heading for the calculated member values when end users browse the cube.</span></span>  
  
 <span data-ttu-id="d63a7-114">**Родительская иерархия**</span><span class="sxs-lookup"><span data-stu-id="d63a7-114">**Parent hierarchy**</span></span>  
 <span data-ttu-id="d63a7-115">Выберите родительскую иерархию для включения в вычисляемый элемент.</span><span class="sxs-lookup"><span data-stu-id="d63a7-115">Select the parent hierarchy to include in the calculated member.</span></span> <span data-ttu-id="d63a7-116">Иерархии представляют собой описательные категории измерения, по которым числовые данные (то есть меры) можно разделять в кубе для анализа.</span><span class="sxs-lookup"><span data-stu-id="d63a7-116">Hierarchies are descriptive categories of a dimension by which the numeric data (that is, measures) in a cube can be separated for analysis.</span></span> <span data-ttu-id="d63a7-117">В табличных браузерах иерархии предоставляют заголовки строк и столбцов, которые отображаются при просмотре пользователями данных в кубе.</span><span class="sxs-lookup"><span data-stu-id="d63a7-117">In tabular browsers, hierarchies provide the column and row headings displayed to end users when they browse data in a cube.</span></span> <span data-ttu-id="d63a7-118">(В графических браузерах они предоставляют другие типы описательных меток, но функции у них такие же, как и у табличных обозревателей.) Вычисляемый элемент предоставляет новый заголовок (или метку) в выбранном родительском измерении.</span><span class="sxs-lookup"><span data-stu-id="d63a7-118">(In graphical browsers, they provide other types of descriptive labels, but they have the same function as in tabular browsers.) A calculated member provides a new heading (or label) in the parent dimension you select.</span></span>  
  
 <span data-ttu-id="d63a7-119">Можно включить вычисляемый элемент в меры, а не в измерение.</span><span class="sxs-lookup"><span data-stu-id="d63a7-119">Alternatively, you can include the calculated member in the measures instead of in a dimension.</span></span> <span data-ttu-id="d63a7-120">Этот параметр также предоставляет заголовок строки или столбца, но присоединяется к мерам в браузере.</span><span class="sxs-lookup"><span data-stu-id="d63a7-120">This option also provides a new column or row heading, but it is attached to measures in the browser.</span></span>  
  
 <span data-ttu-id="d63a7-121">**Родительский элемент**</span><span class="sxs-lookup"><span data-stu-id="d63a7-121">**Parent member**</span></span>  
 <span data-ttu-id="d63a7-122">Нажмите кнопку **Изменить** для выбора родительского элемента, который требуется включить в вычисляемый элемент.</span><span class="sxs-lookup"><span data-stu-id="d63a7-122">Click **Change** to select a parent member to include the calculated member.</span></span> <span data-ttu-id="d63a7-123">Этот параметр недоступен, если выбрана одноуровневая иерархия или МЕРЫ в качестве родительского измерения.</span><span class="sxs-lookup"><span data-stu-id="d63a7-123">This option is unavailable if you select a one-level hierarchy or MEASURES as the parent dimension.</span></span>  
  
 <span data-ttu-id="d63a7-124">Иерархии разделены на уровни, содержащие элементы.</span><span class="sxs-lookup"><span data-stu-id="d63a7-124">Hierarchies are divided into levels that contain members.</span></span> <span data-ttu-id="d63a7-125">Каждый элемент создает заголовок.</span><span class="sxs-lookup"><span data-stu-id="d63a7-125">Each member produces a heading.</span></span> <span data-ttu-id="d63a7-126">При просмотре данных в кубе пользователь может перейти от выбранного заголовка к ранее не отображавшимся подчиненным заголовкам.</span><span class="sxs-lookup"><span data-stu-id="d63a7-126">While browsing data in a cube, end users can drill down from a selected heading to previously undisplayed subordinate headings.</span></span> <span data-ttu-id="d63a7-127">Заголовок вычисляемого элемента добавляется в уровень, расположенный непосредственно под выбранным родительским элементом.</span><span class="sxs-lookup"><span data-stu-id="d63a7-127">The heading for the calculated member is added at the level directly below the parent member you select.</span></span>  
  
 <span data-ttu-id="d63a7-128">**Выражение**</span><span class="sxs-lookup"><span data-stu-id="d63a7-128">**Expression**</span></span>  
 <span data-ttu-id="d63a7-129">Укажите выражение для создания значений вычисляемого элемента.</span><span class="sxs-lookup"><span data-stu-id="d63a7-129">Specify the expression that produces the values of the calculated member.</span></span> <span data-ttu-id="d63a7-130">Данное выражение может быть записано в форме многомерных выражений.</span><span class="sxs-lookup"><span data-stu-id="d63a7-130">This expression can be written in Multidimensional Expressions (MDX).</span></span> <span data-ttu-id="d63a7-131">Выражение может содержать любой из следующих объектов:</span><span class="sxs-lookup"><span data-stu-id="d63a7-131">The expression can contain any of the following:</span></span>  
  
-   <span data-ttu-id="d63a7-132">выражения данных, которые представляют компоненты куба, такие как измерения, уровни, меры и т. д.;</span><span class="sxs-lookup"><span data-stu-id="d63a7-132">Data expressions that represent cube components such as dimensions, levels, measures, and so on</span></span>  
  
-   <span data-ttu-id="d63a7-133">Арифметические операторы</span><span class="sxs-lookup"><span data-stu-id="d63a7-133">Arithmetic operators</span></span>  
  
-   <span data-ttu-id="d63a7-134">Числа</span><span class="sxs-lookup"><span data-stu-id="d63a7-134">Numbers</span></span>  
  
-   <span data-ttu-id="d63a7-135">Функции</span><span class="sxs-lookup"><span data-stu-id="d63a7-135">Functions</span></span>  
  
 <span data-ttu-id="d63a7-136">Можно перетаскивать или копировать компоненты куба из вкладки **Метаданные** панели **Средства вычисления** .</span><span class="sxs-lookup"><span data-stu-id="d63a7-136">You can drag or copy cube components from the **Metadata** tab of the **Calculation Tools** pane to quickly add them to an expression.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="d63a7-137">Любой вычисляемый элемент, который должен использоваться в выражении значений другого вычисляемого элемента, должен создаваться до вычисляемого элемента, который его использует.</span><span class="sxs-lookup"><span data-stu-id="d63a7-137">Any calculated member that is to be used in the value expression of another calculated member must be created before the calculated member that uses it.</span></span>  
  
 <span data-ttu-id="d63a7-138">Строка формата</span><span class="sxs-lookup"><span data-stu-id="d63a7-138">Format String</span></span>  
 <span data-ttu-id="d63a7-139">Указывает формат значений ячеек, основанных на вычисляемом элементе.</span><span class="sxs-lookup"><span data-stu-id="d63a7-139">Specifies the format of cell values that are based on the calculated member.</span></span> <span data-ttu-id="d63a7-140">Данное свойство принимает те же значения, что и свойство `Display Format` для мер.</span><span class="sxs-lookup"><span data-stu-id="d63a7-140">This property accepts the same values as the `Display Format` property for measures.</span></span> <span data-ttu-id="d63a7-141">Дополнительные сведения о форматах отображения см. в разделе [Настройка свойств мер](configure-measure-properties.md).</span><span class="sxs-lookup"><span data-stu-id="d63a7-141">For more information about display formats, see [Configure Measure Properties](configure-measure-properties.md).</span></span>  
  
 <span data-ttu-id="d63a7-142">Видимый</span><span class="sxs-lookup"><span data-stu-id="d63a7-142">Visible</span></span>  
 <span data-ttu-id="d63a7-143">Определяет, отображается ли вычисляемый элемент при получении метаданных куба.</span><span class="sxs-lookup"><span data-stu-id="d63a7-143">Determines whether the calculated member is visible or hidden when cube metadata is retrieved.</span></span> <span data-ttu-id="d63a7-144">Если вычисляемый элемент скрыт, он все равно может быть использован в многомерных выражениях, инструкциях и скриптах, но при этом он не доступен как объект, выбираемый в пользовательском интерфейсе клиента.</span><span class="sxs-lookup"><span data-stu-id="d63a7-144">If the calculated member is hidden, it can still be used in MDX expressions, statements, and scripts, but it is not displayed as a selectable object in client user interfaces.</span></span>  
  
 <span data-ttu-id="d63a7-145">Установленное поведение</span><span class="sxs-lookup"><span data-stu-id="d63a7-145">Non-empty Behavior</span></span>  
 <span data-ttu-id="d63a7-146">Хранит имена мер, используемых для разрешения запросов NON EMPTY в многомерных выражениях.</span><span class="sxs-lookup"><span data-stu-id="d63a7-146">Stores the names of measures used to resolve NON EMPTY queries in MDX.</span></span> <span data-ttu-id="d63a7-147">Если это свойство не заполнено, оценка вычисляемого элемента должна выполняться многократно, чтобы определить отсутствие значений в элементе.</span><span class="sxs-lookup"><span data-stu-id="d63a7-147">If this property is blank, the calculated member must be evaluated repeatedly to determine whether a member is empty.</span></span> <span data-ttu-id="d63a7-148">Если в этом свойстве содержится имя одной или нескольких мер, то вычисляемый элемент считается пустым в том случае, если все из указанных мер пусты.</span><span class="sxs-lookup"><span data-stu-id="d63a7-148">If this property contains the name of one or more measures, the calculated member is treated as empty if all the specified measures are empty.</span></span> <span data-ttu-id="d63a7-149">Это свойство является указанием оптимизации, по которой службы Analysis Services возвращают только те записи, которые имеют значения, отличные от NULL.</span><span class="sxs-lookup"><span data-stu-id="d63a7-149">This property is an optimization hint to Analysis Services to return only non-NULL records.</span></span> <span data-ttu-id="d63a7-150">Это позволяет повысить производительность запросов многомерных выражений, использующих оператор NON EMPTY или функцию NonEmpty либо требующих вычисления значений ячеек.</span><span class="sxs-lookup"><span data-stu-id="d63a7-150">Returning only non-NULL records improves the performance of MDX queries that utilize the NON EMPTY operator or the NonEmpty function, or that require the calculation of cell values.</span></span> <span data-ttu-id="d63a7-151">Чтобы получить оптимальную производительность при вычислении значения ячеек, по возможности указывайте только один элемент.</span><span class="sxs-lookup"><span data-stu-id="d63a7-151">For best performance with cell calculations, specify only a single member when possible.</span></span>  
  
 <span data-ttu-id="d63a7-152">Выражения цвета</span><span class="sxs-lookup"><span data-stu-id="d63a7-152">Color Expressions</span></span>  
 <span data-ttu-id="d63a7-153">Указывает многомерные выражения, которые динамически устанавливают цвет изображения и фоновый цвет ячеек на основе значения вычисляемого элемента.</span><span class="sxs-lookup"><span data-stu-id="d63a7-153">Specifies MDX expressions that dynamically set the foreground and background colors of cells based on the value of the calculated member.</span></span> <span data-ttu-id="d63a7-154">Это свойство не учитывается, если оно не поддерживается клиентскими приложениями.</span><span class="sxs-lookup"><span data-stu-id="d63a7-154">This property is ignored if unsupported by client applications.</span></span>  
  
 <span data-ttu-id="d63a7-155">Выражения шрифта</span><span class="sxs-lookup"><span data-stu-id="d63a7-155">Font Expressions</span></span>  
 <span data-ttu-id="d63a7-156">Указывает многомерные выражения, которые динамически устанавливают шрифт, его размер и атрибуты для ячеек, основанных на значении вычисляемого элемента.</span><span class="sxs-lookup"><span data-stu-id="d63a7-156">Specifies MDX expressions that dynamically set the font, font size, and font attributes for cells based on the value of the calculated member.</span></span> <span data-ttu-id="d63a7-157">Это свойство не учитывается, если оно не поддерживается клиентскими приложениями.</span><span class="sxs-lookup"><span data-stu-id="d63a7-157">This property is ignored if unsupported by client applications.</span></span>  
  
 <span data-ttu-id="d63a7-158">Можно копировать или перетаскивать компоненты куба из вкладки **Метаданные** панели **Средства вычисления** в поле **Выражение** на панели «Выражения вычисления».</span><span class="sxs-lookup"><span data-stu-id="d63a7-158">You can copy or drag cube components from the **Metadata** tab of the **Calculation Tools** pane to the **Expression** box in the Calculation Expressions pane.</span></span> <span data-ttu-id="d63a7-159">Можно копировать или перетаскивать функции из вкладки **Функции** панели **Средства вычисления** в поле **Выражение** на панели «Выражения вычисления».</span><span class="sxs-lookup"><span data-stu-id="d63a7-159">You can copy or drag functions from the **Functions** tab in the **Calculation Tools** pane to the **Expression** box in the Calculation Expressions pane.</span></span>  
  
## <a name="addressing-calculated-members"></a><span data-ttu-id="d63a7-160">Обращение к вычисляемым элементам</span><span class="sxs-lookup"><span data-stu-id="d63a7-160">Addressing Calculated Members</span></span>  
 <span data-ttu-id="d63a7-161">Во время создания вычисляемого элемента на панели инструментов **Конструктор кубов** на вкладке **Вычисления**можно указать родительскую иерархию, в которой будет храниться вычисляемый элемент.</span><span class="sxs-lookup"><span data-stu-id="d63a7-161">When you create a calculated member on the **Calculations** tab of **Cube Designer**, you specify the parent hierarchy in which the calculated member is stored.</span></span> <span data-ttu-id="d63a7-162">Родительская иерархия определяет способ обращения к вычисляемому элементу в соответствии со следующими правилами.</span><span class="sxs-lookup"><span data-stu-id="d63a7-162">The parent hierarchy determines how a calculated member can be addressed, according to the following rules:</span></span>  
  
-   <span data-ttu-id="d63a7-163">Если вычисляемый элемент создан в измерении мер, то обращаться к такому вычисляемому элементу можно в указанном измерении.</span><span class="sxs-lookup"><span data-stu-id="d63a7-163">If a calculated member is created in the measures dimension, the calculated member is addressable in that dimension.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="d63a7-164">См. также:</span><span class="sxs-lookup"><span data-stu-id="d63a7-164">See Also</span></span>  
 [<span data-ttu-id="d63a7-165">Вычисления в многомерных моделях</span><span class="sxs-lookup"><span data-stu-id="d63a7-165">Calculations in Multidimensional Models</span></span>](calculations-in-multidimensional-models.md)  
  
  
