---
title: Слияние секций в Analysis Services (службы SSAS — многомерные) | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
helpviewer_keywords:
- partitions [Analysis Services], merging
- merging partitions [Analysis Services]
ms.assetid: b3857b9b-de43-4911-989d-d14da0196f89
author: minewiskan
ms.author: owend
ms.openlocfilehash: 42820a202c4da58e21dfd55756b7bb03522ea879
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87740568"
---
# <a name="merge-partitions-in-analysis-services-ssas---multidimensional"></a><span data-ttu-id="dfe04-102">Объединение секций в службах Analysis Services (SSAS — многомерные данные)</span><span class="sxs-lookup"><span data-stu-id="dfe04-102">Merge Partitions in Analysis Services (SSAS - Multidimensional)</span></span>
  <span data-ttu-id="dfe04-103">Можно совмещать секции в существующей базе данных [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] для объединения фактических данных из нескольких секций одной группы мер.</span><span class="sxs-lookup"><span data-stu-id="dfe04-103">You can merge partitions in an existing [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] database to consolidate fact data from multiple partitions of the same measure group.</span></span>  
  
 [<span data-ttu-id="dfe04-104">Распространенные сценарии</span><span class="sxs-lookup"><span data-stu-id="dfe04-104">Common scenarios</span></span>](#bkmk_Scenario)  
  
 [<span data-ttu-id="dfe04-105">Требования</span><span class="sxs-lookup"><span data-stu-id="dfe04-105">Requirements</span></span>](#bkmk_prereq)  
  
 [<span data-ttu-id="dfe04-106">Обновление источника секции после слияния секций</span><span class="sxs-lookup"><span data-stu-id="dfe04-106">Update the Partition Source after merging partitions</span></span>](#bkmk_Where)  
  
 [<span data-ttu-id="dfe04-107">Особые замечания для секций, сегментированных по таблице фактов или именованному запросу</span><span class="sxs-lookup"><span data-stu-id="dfe04-107">Special considerations for partitions segmented by fact table or named query</span></span>](#bkmk_fact)  
  
 [<span data-ttu-id="dfe04-108">Как объединять секции с помощью среды SSMS</span><span class="sxs-lookup"><span data-stu-id="dfe04-108">How to merge partitions using SSMS</span></span>](#bkmk_partitionSSMS)  
  
 [<span data-ttu-id="dfe04-109">Слияние секций с помощью XMLA</span><span class="sxs-lookup"><span data-stu-id="dfe04-109">How to merge partitions using XMLA</span></span>](#bkmk_partitionsXMLA)  
  
##  <a name="common-scenarios"></a><a name="bkmk_Scenario"></a><span data-ttu-id="dfe04-110">Распространенные сценарии</span><span class="sxs-lookup"><span data-stu-id="dfe04-110">Common scenarios</span></span>  
 <span data-ttu-id="dfe04-111">Самая обычная конфигурация сценария использует разделение данных во временном измерении.</span><span class="sxs-lookup"><span data-stu-id="dfe04-111">The single most common configuration for partition use involves the separation of data across the dimension of time.</span></span> <span data-ttu-id="dfe04-112">Гранулярность времени, связанная с каждой секцией, зависит от бизнес-требований конкретного проекта.</span><span class="sxs-lookup"><span data-stu-id="dfe04-112">The granularity of time associated with each partition varies depending on the business requirements specific to the project.</span></span> <span data-ttu-id="dfe04-113">Например, сегментация может выполняться по годам, последний год — разделяться по месяцам с выделением отдельной секции для активного месяца.</span><span class="sxs-lookup"><span data-stu-id="dfe04-113">For example, segmentation might be by years, with the most recent year divided by months, plus a separate partition for the active month.</span></span> <span data-ttu-id="dfe04-114">Секция активного месяца регулярно принимает новые данные.</span><span class="sxs-lookup"><span data-stu-id="dfe04-114">The active month partition regularly takes on new data.</span></span>  
  
 <span data-ttu-id="dfe04-115">После завершения текущего месяца выполняется слияние секции с месяцами в секции прошедших в этом году месяцев и т. д.</span><span class="sxs-lookup"><span data-stu-id="dfe04-115">When the active month is completed, that partition is merged back into the months in the year-to-date partition and the process continues.</span></span> <span data-ttu-id="dfe04-116">В конце года формируется секция для всего года.</span><span class="sxs-lookup"><span data-stu-id="dfe04-116">At the end of the year, a whole new year partition has been formed.</span></span>  
  
 <span data-ttu-id="dfe04-117">Как показывает данный сценарий, слияние секций может стать обычной задачей, выполняемой на регулярной основе, при наличии прогрессивного подхода по организации и консолидации исторических данных.</span><span class="sxs-lookup"><span data-stu-id="dfe04-117">As this scenario demonstrates, merging partitions can become a routine task performed on a regular basis, providing a progressive approach for consolidating and organizing historical data.</span></span>  
  
##  <a name="requirements"></a><a name="bkmk_prereq"></a> <span data-ttu-id="dfe04-118">Требования</span><span class="sxs-lookup"><span data-stu-id="dfe04-118">Requirements</span></span>  
 <span data-ttu-id="dfe04-119">Можно выполнять слияние секций только в том случае, если они удовлетворяют всем условиям, перечисленным ниже:</span><span class="sxs-lookup"><span data-stu-id="dfe04-119">Partitions can be merged only if they meet all of the following criteria:</span></span>  
  
-   <span data-ttu-id="dfe04-120">Они имеют одинаковую группу мер.</span><span class="sxs-lookup"><span data-stu-id="dfe04-120">They have the same measure group.</span></span>  
  
-   <span data-ttu-id="dfe04-121">Обладают одной и той же структурой.</span><span class="sxs-lookup"><span data-stu-id="dfe04-121">They have the same structure.</span></span>  
  
-   <span data-ttu-id="dfe04-122">Они должны находиться в обработанном состоянии.</span><span class="sxs-lookup"><span data-stu-id="dfe04-122">They must be in a processed state.</span></span>  
  
-   <span data-ttu-id="dfe04-123">Обладают одними и теми же режимами хранения.</span><span class="sxs-lookup"><span data-stu-id="dfe04-123">They have the same storage modes.</span></span>  
  
-   <span data-ttu-id="dfe04-124">Содержат одинаковые статистические схемы.</span><span class="sxs-lookup"><span data-stu-id="dfe04-124">They contain identical aggregation designs.</span></span>  
  
-   <span data-ttu-id="dfe04-125">Они совместно используют уровень совместимости одного и того же хранилища строк (применяется только к секционированным группам мер числа различных объектов).</span><span class="sxs-lookup"><span data-stu-id="dfe04-125">They share the same string store compatibility level (applies to partitioned distinct count measure groups only).</span></span>  
  
 <span data-ttu-id="dfe04-126">Если целевая секция пуста (есть агрегатная схема, но нет агрегатов), операция слияния пропустит агрегаты для исходных секций.</span><span class="sxs-lookup"><span data-stu-id="dfe04-126">If the target partition is empty (that is, it has an aggregation design but no aggregations), merge will drop the aggregations for the source partitions.</span></span> <span data-ttu-id="dfe04-127">Для построения агрегатов нужно выполнить для секции команду Process Index, Process Full или Process Default.</span><span class="sxs-lookup"><span data-stu-id="dfe04-127">You must run Process Index, Process Full, or Process Default on the partition to build the aggregations.</span></span>  
  
 <span data-ttu-id="dfe04-128">Удаленные секции можно объединять только с удаленными секциями, определенными на том же удаленном экземпляре служб [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="dfe04-128">Remote partitions can be merged only with other remote partitions that are defined with the same remote instance of [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)].</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="dfe04-129">Если используется сочетание локальных и удаленных секций, альтернативой будет создание новых секций, в которых содержатся объединенные данные и удалены более неиспользуемые секции.</span><span class="sxs-lookup"><span data-stu-id="dfe04-129">If you are using a combination of local and remote partitions, an alternative approach is to create new partitions that include the combined data, deleting the partitions you no longer use.</span></span>  
  
 <span data-ttu-id="dfe04-130">Чтобы создать секцию, которая может использоваться в последующем слиянии, во время создания секции в мастере секционирования можно скопировать статистическую схему из другой секции куба.</span><span class="sxs-lookup"><span data-stu-id="dfe04-130">To create a partition that is a candidate for future merging, when you create the partition in the Partition Wizard, you can choose to copy the aggregation design from another of the cube's partitions.</span></span> <span data-ttu-id="dfe04-131">Это гарантирует, что у всех таких секций будет одна и та же статистическая схема.</span><span class="sxs-lookup"><span data-stu-id="dfe04-131">This ensures that these partitions have the same aggregation design.</span></span> <span data-ttu-id="dfe04-132">Во время слияния статистические схемы исходной секции объединяются со статистическими схемами целевой секции.</span><span class="sxs-lookup"><span data-stu-id="dfe04-132">When they are merged, the aggregations of the source partition are combined with the aggregations in the target partition.</span></span>  
  
##  <a name="update-the-partition-source-after-merging-partitions"></a><a name="bkmk_Where"></a><span data-ttu-id="dfe04-133">Обновление источника секции после слияния секций</span><span class="sxs-lookup"><span data-stu-id="dfe04-133">Update the Partition Source after merging partitions</span></span>  
 <span data-ttu-id="dfe04-134">Секции сегментируются по запросу, например по предложению WHERE SQL-запроса, используемого для обработки данных, или по таблице или именованному запросу, которые предоставляют данные для секции.</span><span class="sxs-lookup"><span data-stu-id="dfe04-134">Partitions are segmented by query, such as the WHERE clause of a SQL query used to process the data, or by a table or named query that provides data to the partition.</span></span> <span data-ttu-id="dfe04-135">Свойство `Source` секции указывает, привязана секция к запросу или таблице.</span><span class="sxs-lookup"><span data-stu-id="dfe04-135">The `Source` property on the partition indicates whether the partition is bound to a query or a table.</span></span>  
  
 <span data-ttu-id="dfe04-136">При слиянии секций их содержимое объединяется, но свойство `Source` не обновляется.</span><span class="sxs-lookup"><span data-stu-id="dfe04-136">When you merge partitions, the contents of the partitions are consolidated, but the `Source` property is not updated to reflect the additional scope of the partition.</span></span> <span data-ttu-id="dfe04-137">Это означает, что при повторной обработке секции, сохраняющей исходный `Source`, будут получены неверные данные.</span><span class="sxs-lookup"><span data-stu-id="dfe04-137">This means if you subsequently reprocess a partition that retains its original `Source`, you will get incorrect data from that partition.</span></span> <span data-ttu-id="dfe04-138">Секция ошибочно агрегирует данные на уровне родительского объекта.</span><span class="sxs-lookup"><span data-stu-id="dfe04-138">The partition will erroneously aggregate data at the parent level.</span></span> <span data-ttu-id="dfe04-139">Следующий пример демонстрирует эту ситуацию.</span><span class="sxs-lookup"><span data-stu-id="dfe04-139">The following example illustrates this behavior.</span></span>  
  
 <span data-ttu-id="dfe04-140">**Проблема**</span><span class="sxs-lookup"><span data-stu-id="dfe04-140">**The Problem**</span></span>  
  
 <span data-ttu-id="dfe04-141">Предположим, что имеется куб, содержащий сведения о трех безалкогольных напитках.</span><span class="sxs-lookup"><span data-stu-id="dfe04-141">Suppose you have a cube containing information about three soft drink products.</span></span> <span data-ttu-id="dfe04-142">Он имеет три секции, использующие одну и ту же таблицу фактов.</span><span class="sxs-lookup"><span data-stu-id="dfe04-142">It has three partitions that use the same fact table.</span></span> <span data-ttu-id="dfe04-143">Эти секции разделены по продуктам.</span><span class="sxs-lookup"><span data-stu-id="dfe04-143">These partitions are segmented by product.</span></span> <span data-ttu-id="dfe04-144">Секция 1 содержит данные о [ColaFull], секция 2 содержит данные о [ColaDecaf], а секция 3 содержит данные о [ColaDiet].</span><span class="sxs-lookup"><span data-stu-id="dfe04-144">Partition 1 contains data about [ColaFull], Partition 2 contains data about [ColaDecaf], and Partition 3 contains data about [ColaDiet].</span></span> <span data-ttu-id="dfe04-145">При слиянии секции 3 в секцию 2 данные в получающейся в результате секции (секции 2) правильны, а данные куба являются точными.</span><span class="sxs-lookup"><span data-stu-id="dfe04-145">If Partition 3 is merged into Partition 2, the data in the resulting partition (Partition 2) is correct and the cube data is accurate.</span></span> <span data-ttu-id="dfe04-146">Однако при обработке содержимое секции 2 может определяться «родителем» элементов на уровне продуктов.</span><span class="sxs-lookup"><span data-stu-id="dfe04-146">However, when Partition 2 is processed, its content may be determined by the parent of the members at the product level.</span></span> <span data-ttu-id="dfe04-147">Этот "родительский" элемент [SoftDrinks] также включает [ColaFull], продукт в секции 1.</span><span class="sxs-lookup"><span data-stu-id="dfe04-147">This parent, [SoftDrinks], also includes [ColaFull], the product in Partition 1.</span></span> <span data-ttu-id="dfe04-148">При обработке секции 2 будет загружена секция с данными для всех безалкогольных напитков, включая [ColaFull].</span><span class="sxs-lookup"><span data-stu-id="dfe04-148">Processing Partition 2 loads the partition with data for all soft drinks, including [ColaFull].</span></span> <span data-ttu-id="dfe04-149">После этого куб будет содержать дублирующиеся данные для [ColaFull] и возвращать неправильные данные конечным пользователям.</span><span class="sxs-lookup"><span data-stu-id="dfe04-149">The cube then contains duplicate data for [ColaFull] and returns incorrect data to end users.</span></span>  
  
 <span data-ttu-id="dfe04-150">**Решение**</span><span class="sxs-lookup"><span data-stu-id="dfe04-150">**The Solution**</span></span>  
  
 <span data-ttu-id="dfe04-151">Нужно обновить свойство `Source`, изменив предложение WHERE или именованный запрос, или же вручную объединить данные из нижележащих таблиц фактов, чтобы последующая обработка была правильной.</span><span class="sxs-lookup"><span data-stu-id="dfe04-151">The solution is to update the `Source` property, adjusting either the WHERE clause or named query, or manually merging data from the underlying fact tables, to ensure that subsequent processing is accurate given the expanded scope of the partition.</span></span>  
  
 <span data-ttu-id="dfe04-152">В этом примере после слияния секции 3 в секцию 2 можно ввести фильтр, например ("Product" = 'ColaDecaf' OR "Product" = 'ColaDiet'), в получающуюся в результате секцию 2, чтобы указать, что из таблицы фактов будут извлекаться только данные о [ColaDecaf] и [ColaDiet], а данные, относящиеся к [ColaFull], будут исключены.</span><span class="sxs-lookup"><span data-stu-id="dfe04-152">In this example, after merging Partition 3 into Partition 2, you can provide a filter such as ("Product" = 'ColaDecaf' OR "Product" = 'ColaDiet') in the resulting Partition 2 to specify that only data about [ColaDecaf] and [ColaDiet] be extracted from the fact table, and the data pertaining to [ColaFull] be excluded.</span></span> <span data-ttu-id="dfe04-153">Или можно указать фильтры для секции 2 и секции 3 при их создании, и эти фильтры будут скомбинированы во время процесса слияния.</span><span class="sxs-lookup"><span data-stu-id="dfe04-153">Alternatively, you can specify filters for Partition 2 and Partition 3 when they are created, and these filters will be combined during the merger process.</span></span> <span data-ttu-id="dfe04-154">В любом случае, после обработки секции куб не будет содержать дублирующихся данных.</span><span class="sxs-lookup"><span data-stu-id="dfe04-154">In either case, after the partition is processed the cube does not contain duplicate data.</span></span>  
  
 <span data-ttu-id="dfe04-155">**Заключение**</span><span class="sxs-lookup"><span data-stu-id="dfe04-155">**The Conclusion**</span></span>  
  
 <span data-ttu-id="dfe04-156">После слияния секций всегда проверяйте фильтр в `Source` для определения его правильности по отношению к объединенным данным.</span><span class="sxs-lookup"><span data-stu-id="dfe04-156">After you merge partitions, always check the `Source` to verify the filter is correct for the merged data.</span></span> <span data-ttu-id="dfe04-157">Если вы начали с секцией, включавшей исторические данные для кварталов Q1, Q2 и Q3, и теперь они объединяются c Q4, нужно исправить фильтр, чтобы он включал Q4.</span><span class="sxs-lookup"><span data-stu-id="dfe04-157">If you started with a partition that included historical data for Q1, Q2, and Q3, and you now merge Q4, you must adjust the filter to include Q4.</span></span> <span data-ttu-id="dfe04-158">В противном случае последующая обработка секции даст ошибочные результаты.</span><span class="sxs-lookup"><span data-stu-id="dfe04-158">Otherwise, subsequent processing of the partition will yield erroneous results.</span></span> <span data-ttu-id="dfe04-159">Они не будут правильными для Q4.</span><span class="sxs-lookup"><span data-stu-id="dfe04-159">It will not be correct for Q4.</span></span>  
  
##  <a name="special-considerations-for-partitions-segmented-by-fact-table-or-named-query"></a><a name="bkmk_fact"></a><span data-ttu-id="dfe04-160">Особые соображения для секций, сегментированных по таблице фактов или именованным запросам</span><span class="sxs-lookup"><span data-stu-id="dfe04-160">Special considerations for partitions segmented by fact table or named query</span></span>  
 <span data-ttu-id="dfe04-161">В дополнении к запросам секции также могут быть сегментированы по таблице или именованному запросу.</span><span class="sxs-lookup"><span data-stu-id="dfe04-161">In addition to queries, partitions can also be segmented by table or named query.</span></span> <span data-ttu-id="dfe04-162">Если исходная секция и целевая секция используют одну и ту же таблицу фактов в источнике данных или представлении источника данных, то после слияния секций свойство `Source` будет действительным.</span><span class="sxs-lookup"><span data-stu-id="dfe04-162">If the source partition and target partition use the same fact table in a data source or data source view, the `Source` property is valid after merging partitions.</span></span> <span data-ttu-id="dfe04-163">Оно определяет данные таблицы фактов, подходящие для результирующей секции.</span><span class="sxs-lookup"><span data-stu-id="dfe04-163">It specifies the fact table data that is appropriate to the resulting partition.</span></span> <span data-ttu-id="dfe04-164">Поскольку факты, необходимые для получающейся в результате секции, присутствуют в таблице фактов, изменения в свойстве `Source` не требуются.</span><span class="sxs-lookup"><span data-stu-id="dfe04-164">Because the facts that are required for the resulting partition are present in the fact table, no modification to the `Source` property is necessary.</span></span>  
  
 <span data-ttu-id="dfe04-165">Секции, использующие данные из нескольких таблиц фактов или именованных запросов, требуют дополнительной работы.</span><span class="sxs-lookup"><span data-stu-id="dfe04-165">Partitions using data from multiple fact tables or named queries require additional work.</span></span> <span data-ttu-id="dfe04-166">Необходимо вручную осуществить слияние фактов из таблицы фактов исходной секции в таблицу фактов целевой секции.</span><span class="sxs-lookup"><span data-stu-id="dfe04-166">You must manually merge the facts from the fact table of the source partition into the fact table of the target partition.</span></span>  
  
 <span data-ttu-id="dfe04-167">Можно также изменить источник для секции, получившейся в результате слияния, на именованный запрос, возвращающий содержимое двух отдельных таблиц фактов.</span><span class="sxs-lookup"><span data-stu-id="dfe04-167">Alternatively, you can change the source for the merged partition to a named query that returns the contents of two separate fact tables.</span></span> <span data-ttu-id="dfe04-168">Если этот этап не выполнен вручную, то таблица фактов не содержит полные данные.</span><span class="sxs-lookup"><span data-stu-id="dfe04-168">If this manual step is not performed, the fact table does not contain complete information.</span></span>  
  
 <span data-ttu-id="dfe04-169">По той же причине требуется обновление секций, получающих сегментированные данные из именованных запросов.</span><span class="sxs-lookup"><span data-stu-id="dfe04-169">For the same reason, partitions obtaining segmented data from named queries also require updating.</span></span> <span data-ttu-id="dfe04-170">Объединенная секция должна иметь именованный запрос, который возвращает совместный результирующий набор, полученный ранее из разных именованных запросов.</span><span class="sxs-lookup"><span data-stu-id="dfe04-170">The combined partition must now have a named query that returns the combined result set that was previously obtained from the separate named queries.</span></span>  
  
## <a name="partition-storage-considerations-molap"></a><span data-ttu-id="dfe04-171">Замечания о хранилищах для секций: MOLAP</span><span class="sxs-lookup"><span data-stu-id="dfe04-171">Partition storage considerations: MOLAP</span></span>  
 <span data-ttu-id="dfe04-172">При слиянии секций многомерного OLAP (MOLAP) также осуществляется слияние фактов, хранимых в многомерных структурах секций.</span><span class="sxs-lookup"><span data-stu-id="dfe04-172">When MOLAP partitions are merged, the facts stored in the multidimensional structures of the partitions are also merged.</span></span> <span data-ttu-id="dfe04-173">В результате получается внутренне полная и последовательная секция.</span><span class="sxs-lookup"><span data-stu-id="dfe04-173">This results in an internally complete and consistent partition.</span></span> <span data-ttu-id="dfe04-174">Однако факты, хранимые в секциях MOLAP, представляют собой копии фактов из таблицы фактов.</span><span class="sxs-lookup"><span data-stu-id="dfe04-174">However, the facts stored in MOLAP partitions are copies of facts in the fact table.</span></span> <span data-ttu-id="dfe04-175">При последующей обработке секции факты в многомерной структуре удаляются (только в случае полной обработки и обновления) и данные копируются из таблицы фактов, как указано в источнике данных и фильтре для секции.</span><span class="sxs-lookup"><span data-stu-id="dfe04-175">When the partition is subsequently processed, the facts in the multidimensional structure are deleted (only for full and refresh) and data is copied from the fact table as specified by the data source and filter for the partition.</span></span> <span data-ttu-id="dfe04-176">Если исходная секция использует не ту таблицу фактов, которую использует целевая секция, то необходимо вручную осуществить слияние таблицы фактов исходной секции с таблицей фактов целевой секции для гарантии того, что полный набор данных доступен при обработке получившейся в результате секции.</span><span class="sxs-lookup"><span data-stu-id="dfe04-176">If the source partition uses a different fact table from the target partition, the fact table of the source partition must be manually merged with the fact table of the target partition to ensure that a complete set of data is available when the resulting partition is processed.</span></span> <span data-ttu-id="dfe04-177">Это также имеет место, когда две секции были основаны на различных именованных запросах.</span><span class="sxs-lookup"><span data-stu-id="dfe04-177">This applies as well if the two partitions were based on different named queries.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="dfe04-178">Получившаяся в результате секция MOLAP с неполной таблицей фактов содержит таблицу фактов, получившуюся в результате внутреннего слияния, и функционирует корректно до ее обработки.</span><span class="sxs-lookup"><span data-stu-id="dfe04-178">A merged MOLAP partition with an incomplete fact table contains an internally merged copy of fact table data and operates correctly until it is processed.</span></span>  
  
## <a name="partition-storage-considerations-holap-and-rolap-partitions"></a><span data-ttu-id="dfe04-179">Замечания о хранилищах для секций: секции HOLAP и ROLAP</span><span class="sxs-lookup"><span data-stu-id="dfe04-179">Partition storage considerations: HOLAP and ROLAP Partitions</span></span>  
 <span data-ttu-id="dfe04-180">При слиянии секций гибридного OLAP (HOLAP) или реляционного OLAP (ROLAP), имеющих разные таблицы фактов, слияние этих таблиц фактов не осуществляется автоматически.</span><span class="sxs-lookup"><span data-stu-id="dfe04-180">When HOLAP or ROLAP partitions that have different fact tables are merged, the fact tables are not automatically merged.</span></span> <span data-ttu-id="dfe04-181">Если слияние этих таблиц фактов не осуществлено вручную, то для получившейся в результате секции доступна только таблица фактов, связанная с целевой секцией.</span><span class="sxs-lookup"><span data-stu-id="dfe04-181">Unless the fact tables are manually merged, only the fact table associated with the target partition is available to the resulting partition.</span></span> <span data-ttu-id="dfe04-182">Факты, связанные с исходной секцией, недоступны для углубленной детализации в получившейся в результате секции, и при обработке этой секции статистические вычисления не суммируют данные из недоступной таблицы.</span><span class="sxs-lookup"><span data-stu-id="dfe04-182">Facts associated with the source partition are not available for drilldown in the resulting partition, and when the partition is processed, aggregations do not summarize data from the unavailable table.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="dfe04-183">Получившаяся в результате слияния секция HOLAP или ROLAP с неполной таблицей фактов содержит правильные статистические вычисления, но неполные факты.</span><span class="sxs-lookup"><span data-stu-id="dfe04-183">A merged HOLAP or ROLAP partition with an incomplete fact table contains accurate aggregations, but incomplete facts.</span></span> <span data-ttu-id="dfe04-184">Запросы, относящиеся к отсутствующим фактам, возвращают неправильные данные.</span><span class="sxs-lookup"><span data-stu-id="dfe04-184">Queries that refer to missing facts return incorrect data.</span></span> <span data-ttu-id="dfe04-185">При обработке секции статистические схемы вычисляются только на основе доступных фактов.</span><span class="sxs-lookup"><span data-stu-id="dfe04-185">When the partition is processed, aggregations are computed only from available facts.</span></span>  
  
 <span data-ttu-id="dfe04-186">Отсутствие недоступных фактов может не быть замечено, если только пользователь не попытается осуществить углубленную детализацию факта в недоступной таблице или не выполнит запрос, для которого необходим факт из недоступной таблицы.</span><span class="sxs-lookup"><span data-stu-id="dfe04-186">The absence of unavailable facts might not be noticed unless a user attempts to drill down to a fact in the unavailable table or executes a query that requires a fact from the unavailable table.</span></span> <span data-ttu-id="dfe04-187">Поскольку агрегаты комбинируются во время процесса слияния, запросы, результаты которых основаны только на статистических вычислениях, возвращают правильные данные, в то время как другие запросы могут возвращать неправильные данные.</span><span class="sxs-lookup"><span data-stu-id="dfe04-187">Because aggregations are combined during the merge process, queries whose results are based only on aggregations return accurate data, whereas other queries may return inaccurate data.</span></span> <span data-ttu-id="dfe04-188">Даже после обработки получившейся в результате секции отсутствие данных из недоступной таблицы фактов может не быть замечено, особенно если они представляют собой лишь малую часть скомбинированных данных.</span><span class="sxs-lookup"><span data-stu-id="dfe04-188">Even after the resulting partition is processed, the missing data from the unavailable fact table may not be noticed, especially if it represents only a small portion of the combined data.</span></span>  
  
 <span data-ttu-id="dfe04-189">Слияние таблиц фактов может быть осуществлено до или после слияния секций.</span><span class="sxs-lookup"><span data-stu-id="dfe04-189">Fact tables can be merged before or after merging the partitions.</span></span> <span data-ttu-id="dfe04-190">Однако агрегаты не будут точно представлять базовые факты до завершения выполнения обеих операций.</span><span class="sxs-lookup"><span data-stu-id="dfe04-190">However, the aggregations will not accurately represent the underlying facts until both operations have been completed.</span></span> <span data-ttu-id="dfe04-191">Рекомендуется осуществлять слияние секций HOLAP или ROLAP, обращающихся к различным таблицам фактов, когда пользователи не подключены к кубу, содержащему эти секции.</span><span class="sxs-lookup"><span data-stu-id="dfe04-191">It is recommended that you merge HOLAP or ROLAP partitions that access different fact tables when users are not connected to the cube that contains these partitions.</span></span>  
  
##  <a name="how-to-merge-partitions-using-ssms"></a><a name="bkmk_partitionSSMS"></a><span data-ttu-id="dfe04-192">Слияние секций с помощью SSMS</span><span class="sxs-lookup"><span data-stu-id="dfe04-192">How to merge partitions using SSMS</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="dfe04-193">Перед слиянием секций сначала копируйте сведения о фильтре данных (например, предложение WHERE для фильтров на основе SQL-запросов).</span><span class="sxs-lookup"><span data-stu-id="dfe04-193">Before merging partitions, first copy the data filter information (often, the WHERE clause for filters based on SQL queries).</span></span> <span data-ttu-id="dfe04-194">После завершения слияния нужно обновить свойство Partition Source секции, которая содержит накопленные фактические данные.</span><span class="sxs-lookup"><span data-stu-id="dfe04-194">Later, after the merge is completed, you should update the Partition Source property of the partition containing the accumulated fact data.</span></span>  
  
1.  <span data-ttu-id="dfe04-195">В обозревателе объектов разверните узел **Группы мер** куба, содержащего секции, слияние которых необходимо осуществить, разверните узел **Секции**и щелкните правой кнопкой мыши секцию, которая является целью операции слияния.</span><span class="sxs-lookup"><span data-stu-id="dfe04-195">In Object Explorer, expand the **Measure Groups** node of the cube containing the partitions that you want to merge, expand **Partitions**, right-click the partition that is the target or destination of the merge operation.</span></span> <span data-ttu-id="dfe04-196">Например, если перемещаются квартальные фактические данные в секцию, которая хранит данные за год, выберите секцию, которая содержит годовые фактические данные.</span><span class="sxs-lookup"><span data-stu-id="dfe04-196">For example, if you are moving quarterly fact data to a partition that stores annual fact data, select the partition that contains the annual fact data.</span></span>  
  
2.  <span data-ttu-id="dfe04-197">Нажмите кнопку **объединить секции** , чтобы открыть диалоговое окно \*\*слияние секции \<partition name> \*\* .</span><span class="sxs-lookup"><span data-stu-id="dfe04-197">Click **Merge Partitions** to open the **Merge Partition \<partition name>** dialog box.</span></span>  
  
3.  <span data-ttu-id="dfe04-198">В разделе **Исходные секции**установите флажок рядом с каждой исходной секцией, для которой необходимо слияние осуществить с целевой секцией, затем нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="dfe04-198">Under **Source Partitions**, select the check box next to each source partition that you want to merge with the target partition, and click **OK**.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="dfe04-199">Исходные секции удаляются сразу же после слияния источника в целевой секции.</span><span class="sxs-lookup"><span data-stu-id="dfe04-199">Source partitions are immediately deleted after the source is merged into the target partition.</span></span> <span data-ttu-id="dfe04-200">Обновите папку с секциями, чтобы видеть обновленное содержимое.</span><span class="sxs-lookup"><span data-stu-id="dfe04-200">Refresh the Partitions folder to update its contents after the merge is completed.</span></span>  
  
4.  <span data-ttu-id="dfe04-201">Щелкните правой кнопкой мыши секцию с объединенными данными и выберите **Свойства**.</span><span class="sxs-lookup"><span data-stu-id="dfe04-201">Right-click the partition containing the accumulated data and select **Properties**.</span></span>  
  
5.  <span data-ttu-id="dfe04-202">Откройте `Source` свойство и измените предложение WHERE таким образом, чтобы оно включало только что Объединенные данные секции.</span><span class="sxs-lookup"><span data-stu-id="dfe04-202">Open the `Source` property and modify the WHERE clause so that it includes the partition data you just merged.</span></span> <span data-ttu-id="dfe04-203">Вспомним, что `Source` свойство не обновляется автоматически.</span><span class="sxs-lookup"><span data-stu-id="dfe04-203">Recall that the `Source` property is not updated automatically.</span></span> <span data-ttu-id="dfe04-204">Если выполнить повторную обработку без предварительного обновления `Source` , то могут быть получены не все ожидаемые данные.</span><span class="sxs-lookup"><span data-stu-id="dfe04-204">If you reprocess without first updating the `Source`, you might not get all of the expected data.</span></span>  
  
##  <a name="how-to-merge-partitions-using-xmla"></a><a name="bkmk_partitionsXMLA"></a> <span data-ttu-id="dfe04-205">Как объединять секции с помощью XMLA</span><span class="sxs-lookup"><span data-stu-id="dfe04-205">How to merge partitions using XMLA</span></span>  
 <span data-ttu-id="dfe04-206">В этом разделе сведения см. в разделе [Слияние секций (XML)](../multidimensional-models-scripting-language-assl-xmla/merging-partitions-xmla.md).</span><span class="sxs-lookup"><span data-stu-id="dfe04-206">See this topic for information, [Merging Partitions &#40;XMLA&#41;](../multidimensional-models-scripting-language-assl-xmla/merging-partitions-xmla.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="dfe04-207">См. также:</span><span class="sxs-lookup"><span data-stu-id="dfe04-207">See Also</span></span>  
 <span data-ttu-id="dfe04-208">[Обработка объектов Analysis Services](processing-analysis-services-objects.md) </span><span class="sxs-lookup"><span data-stu-id="dfe04-208">[Processing Analysis Services Objects](processing-analysis-services-objects.md) </span></span>  
 <span data-ttu-id="dfe04-209">[Секции &#40;Analysis Services многомерных данных&#41;](../multidimensional-models-olap-logical-cube-objects/partitions-analysis-services-multidimensional-data.md) </span><span class="sxs-lookup"><span data-stu-id="dfe04-209">[Partitions &#40;Analysis Services - Multidimensional Data&#41;](../multidimensional-models-olap-logical-cube-objects/partitions-analysis-services-multidimensional-data.md) </span></span>  
 <span data-ttu-id="dfe04-210">[Создание локальной секции &#40;Analysis Services и управление ею&#41;](create-and-manage-a-local-partition-analysis-services.md) </span><span class="sxs-lookup"><span data-stu-id="dfe04-210">[Create and Manage a Local Partition &#40;Analysis Services&#41;](create-and-manage-a-local-partition-analysis-services.md) </span></span>  
 <span data-ttu-id="dfe04-211">[Создание &#40;Analysis Services удаленных секций и управление ими&#41;](create-and-manage-a-remote-partition-analysis-services.md) </span><span class="sxs-lookup"><span data-stu-id="dfe04-211">[Create and Manage a Remote Partition &#40;Analysis Services&#41;](create-and-manage-a-remote-partition-analysis-services.md) </span></span>  
 <span data-ttu-id="dfe04-212">[Задать обратную запись секции](set-partition-writeback.md) </span><span class="sxs-lookup"><span data-stu-id="dfe04-212">[Set Partition Writeback](set-partition-writeback.md) </span></span>  
 <span data-ttu-id="dfe04-213">[Секции, доступные для записи](../multidimensional-models-olap-logical-cube-objects/partitions-write-enabled-partitions.md) </span><span class="sxs-lookup"><span data-stu-id="dfe04-213">[Write-Enabled Partitions](../multidimensional-models-olap-logical-cube-objects/partitions-write-enabled-partitions.md) </span></span>  
 [<span data-ttu-id="dfe04-214">Настройка хранилища строк для измерений и секций</span><span class="sxs-lookup"><span data-stu-id="dfe04-214">Configure String Storage for Dimensions and Partitions</span></span>](configure-string-storage-for-dimensions-and-partitions.md)  
  
  
