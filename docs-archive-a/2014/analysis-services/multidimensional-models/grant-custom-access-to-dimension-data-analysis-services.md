---
title: Предоставление настраиваемого доступа к данным измерения (Analysis Services) | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
f1_keywords:
- sql12.asvs.roledesignerdialog.dimensiondata.f1
helpviewer_keywords:
- dimensions [Analysis Services], security
- AllowedSet property
- IsAllowed property
- DeniedSet property
- user access rights [Analysis Services], dimensions
- custom dimension data access [Analysis Services]
- permissions [Analysis Services], dimensions
- DefaultMember property
- VisualTotals property
- ApplyDenied property
ms.assetid: b028720d-3785-4381-9572-157d13ec4291
author: minewiskan
ms.author: owend
ms.openlocfilehash: 4d3f91fef6410e05bfd9014f3f2db67530e83e5e
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87727409"
---
# <a name="grant-custom-access-to-dimension-data-analysis-services"></a><span data-ttu-id="d966d-102">Предоставление настраиваемого доступа к данным измерений (Analysis Services)</span><span class="sxs-lookup"><span data-stu-id="d966d-102">Grant custom access to dimension data (Analysis Services)</span></span>
  <span data-ttu-id="d966d-103">После включения доступа на чтение для куба можно задать дополнительные разрешения, которые явно разрешают или отклоняют доступ к элементам измерений (включая меры, содержащиеся в разделе "Измерение мер" со всеми мерами, использующимися в кубе).</span><span class="sxs-lookup"><span data-stu-id="d966d-103">After enabling read access to a cube, you can set additional permissions that explicitly allow or deny access to dimension members (including measures contained in the Measures Dimension containing all of the measures used in a cube).</span></span> <span data-ttu-id="d966d-104">Например, для нескольких категорий торговых посредников может понадобиться задать разрешения, чтобы исключить данные для определенного бизнес-типа.</span><span class="sxs-lookup"><span data-stu-id="d966d-104">For example, given multiple categories of resellers, you might want to set permissions to exclude data for a specific business type.</span></span> <span data-ttu-id="d966d-105">На следующей иллюстрации показан эффект до и после отклонения доступа к бизнес-типу "Хранилище" в измерении "Торговый посредник".</span><span class="sxs-lookup"><span data-stu-id="d966d-105">The following illustration is a before-and-after effect of denying access to the Warehouse business type in the Reseller dimension.</span></span>  
  
 <span data-ttu-id="d966d-106">![Сводные таблицы с и без элементов измерения](../media/ssas-permsdimdenied.png "Сводные таблицы с и без элементов измерения")</span><span class="sxs-lookup"><span data-stu-id="d966d-106">![PivotTables with and without a dimension member](../media/ssas-permsdimdenied.png "PivotTables with and without a dimension member")</span></span>  
  
 <span data-ttu-id="d966d-107">По умолчанию наличие возможности чтения данных из куба [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] автоматически означает присутствие разрешений на чтение во всех мерах и элементах измерения, связанных с этим кубом.</span><span class="sxs-lookup"><span data-stu-id="d966d-107">By default, if you can read data from an [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] cube, you automatically have read permissions on all measures and dimension members associated with that cube.</span></span> <span data-ttu-id="d966d-108">Хотя это поведение может быть достаточным для многих сценариев, иногда требования к безопасности вызывают более сегментированную стратегию авторизации с несколькими уровнями доступа для разных пользователей в одном измерении.</span><span class="sxs-lookup"><span data-stu-id="d966d-108">While this behavior might be sufficient for many scenarios, sometimes security requirements call for a more segmented authorization strategy, with varying levels of access for different users, on the same dimension.</span></span>  
  
 <span data-ttu-id="d966d-109">Можно ограничить доступ, выбрав, каким элементам разрешить (AllowedSet) или отклонить (DeniedSet) доступ.</span><span class="sxs-lookup"><span data-stu-id="d966d-109">You can restrict access by choosing which members to allow (AllowedSet) or deny (DeniedSet) access.</span></span> <span data-ttu-id="d966d-110">Это можно сделать, выделив элементы измерений или отменив их выделение, чтобы включить их в роль или исключить из нее.</span><span class="sxs-lookup"><span data-stu-id="d966d-110">You do this by either selecting or deselecting dimension members to include or exclude from the role.</span></span>  
  
 <span data-ttu-id="d966d-111">Базовая безопасность измерения — самый простой способ. Нужно просто выбрать, какие атрибуты измерений и иерархии атрибутов следует включить в роль или исключить из нее.</span><span class="sxs-lookup"><span data-stu-id="d966d-111">Basic dimension security is the easiest; you simply select which dimension attributes and attribute hierarchies to include or exclude in the role.</span></span> <span data-ttu-id="d966d-112">Расширенная безопасность является более сложной и требует экспертизы в многомерных скриптах.</span><span class="sxs-lookup"><span data-stu-id="d966d-112">Advanced security is more complex and requires expertise in MDX scripting.</span></span> <span data-ttu-id="d966d-113">Оба подхода описываются ниже.</span><span class="sxs-lookup"><span data-stu-id="d966d-113">Both approaches are described below.</span></span>  
  
## <a name="prerequisites"></a><span data-ttu-id="d966d-114">Предварительные требования</span><span class="sxs-lookup"><span data-stu-id="d966d-114">Prerequisites</span></span>  
 <span data-ttu-id="d966d-115">Не все меры или элементы измерения можно использовать в сценариях настраиваемого доступа.</span><span class="sxs-lookup"><span data-stu-id="d966d-115">Not all measures or dimension members can be used in custom access scenarios.</span></span> <span data-ttu-id="d966d-116">Если роль ограничивает доступ либо к мере или элементу по умолчанию, либо к мерам, являющимся частью выражений меры, то произойдет сбой подключения.</span><span class="sxs-lookup"><span data-stu-id="d966d-116">A connection will fail if a role restricts access to a default measure or member, or restricts access to measures that are part of measure expressions.</span></span>  
  
 <span data-ttu-id="d966d-117">**Проверка наличия помех безопасности измерений: меры по умолчанию, элементы по умолчанию и меры, используемые в выражениях меры**</span><span class="sxs-lookup"><span data-stu-id="d966d-117">**Check for obstructions to dimension security: default measures, default members, and measures used in measure expressions**</span></span>  
  
1.  <span data-ttu-id="d966d-118">В SQL Server Management Studio щелкните правой кнопкой мыши куб и выберите команду **создать скрипт для Куба как**  |  **изменить на**  |  **новое окно редактора запросов**.</span><span class="sxs-lookup"><span data-stu-id="d966d-118">In SQL Server Management Studio, right-click a cube and select **Script Cube as** | **ALTER To** | **New Query Editor Window**.</span></span>  
  
2.  <span data-ttu-id="d966d-119">Найдите `DefaultMeasure`.</span><span class="sxs-lookup"><span data-stu-id="d966d-119">Search for `DefaultMeasure`.</span></span> <span data-ttu-id="d966d-120">Следует найти одну строку для куба и по одной строке для каждой перспективы.</span><span class="sxs-lookup"><span data-stu-id="d966d-120">You should find one for the cube, and one for each perspective.</span></span> <span data-ttu-id="d966d-121">При определении безопасности измерений избегайте ограничения доступа к мерам по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="d966d-121">When defining dimension security, avoid restricting access to default measures.</span></span>  
  
3.  <span data-ttu-id="d966d-122">Теперь выполните поиск строки `MeasureExpression`.</span><span class="sxs-lookup"><span data-stu-id="d966d-122">Next, search for `MeasureExpression`.</span></span> <span data-ttu-id="d966d-123">Выражение меры — это мера на основе вычисления, где вычисление часто включает другие меры.</span><span class="sxs-lookup"><span data-stu-id="d966d-123">A measure expression is a measure, based on a calculation, where the calculation often includes other measures.</span></span> <span data-ttu-id="d966d-124">Убедитесь, что мера, которую планируется ограничить, не используется в выражении.</span><span class="sxs-lookup"><span data-stu-id="d966d-124">Verify that the measure you want to restrict is not used in an expression.</span></span> <span data-ttu-id="d966d-125">Можно также пойти вперед и ограничить доступ, только необходимо убедиться, что все ссылки на эту меру исключены во всем кубе.</span><span class="sxs-lookup"><span data-stu-id="d966d-125">Alternatively, go ahead and restrict access, just make sure to also exclude all references to that measure throughout the cube.</span></span>  
  
4.  <span data-ttu-id="d966d-126">Наконец, выполните поиск строки `DefaultMember`.</span><span class="sxs-lookup"><span data-stu-id="d966d-126">Finally, search for `DefaultMember`.</span></span> <span data-ttu-id="d966d-127">Запишите все атрибуты, которые служат в качестве элемента атрибута по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="d966d-127">Make a note of any attributes that serve as a default member of an attribute.</span></span> <span data-ttu-id="d966d-128">Не устанавливайте ограничения на эти атрибуты при настройке безопасности измерений.</span><span class="sxs-lookup"><span data-stu-id="d966d-128">Avoid putting restrictions on those attributes when setting up dimension security.</span></span>  
  
## <a name="basic-dimension-security"></a><span data-ttu-id="d966d-129">Базовая безопасность измерения</span><span class="sxs-lookup"><span data-stu-id="d966d-129">Basic dimension security</span></span>  
  
1.  <span data-ttu-id="d966d-130">В [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] подключитесь к экземпляру служб [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] , разверните узел **роли** для соответствующей базы данных в обозревателе объектов, а затем щелкните роль базы данных (или создайте новую роль базы данных).</span><span class="sxs-lookup"><span data-stu-id="d966d-130">In [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], connect to the instance of [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)], expand **Roles** for the appropriate database in Object Explorer, and then click a database role (or create a new database role).</span></span>  
  
     <span data-ttu-id="d966d-131">Роль должна уже иметь доступ на чтение к кубу.</span><span class="sxs-lookup"><span data-stu-id="d966d-131">The role should already have read access to the cube.</span></span> <span data-ttu-id="d966d-132">Дополнительные сведения см. в разделе [Предоставление разрешений кубу или модели (службы Analysis Services)](grant-cube-or-model-permissions-analysis-services.md) .</span><span class="sxs-lookup"><span data-stu-id="d966d-132">See [Grant cube or model permissions &#40;Analysis Services&#41;](grant-cube-or-model-permissions-analysis-services.md) if you need help with this step.</span></span>  
  
2.  <span data-ttu-id="d966d-133">В поле **данные измерения**  |  **Basic**выберите измерение, для которого настраиваются разрешения.</span><span class="sxs-lookup"><span data-stu-id="d966d-133">On **Dimension Data** | **Basic**, select the dimension for which you are setting permissions.</span></span>  
  
3.  <span data-ttu-id="d966d-134">Выберите иерархию атрибутов.</span><span class="sxs-lookup"><span data-stu-id="d966d-134">Choose the attribute hierarchy.</span></span> <span data-ttu-id="d966d-135">Могут быть доступны не все атрибуты.</span><span class="sxs-lookup"><span data-stu-id="d966d-135">Not all attributes will be available.</span></span> <span data-ttu-id="d966d-136">В списке **Иерархия атрибутов** появятся только атрибуты с параметром **AttributeHierarchyEnabled** .</span><span class="sxs-lookup"><span data-stu-id="d966d-136">Only those attributes having **AttributeHierarchyEnabled** appear in the **Attribute Hierarchy** list.</span></span>  
  
4.  <span data-ttu-id="d966d-137">Выберите элементы, которым следует разрешить или отклонить доступ.</span><span class="sxs-lookup"><span data-stu-id="d966d-137">Choose which members to allow or deny access.</span></span> <span data-ttu-id="d966d-138">По умолчанию доступ разрешен (параметр **Выбрать все элементы** ).</span><span class="sxs-lookup"><span data-stu-id="d966d-138">Allowing access, through the **Select all members** option, is the default.</span></span> <span data-ttu-id="d966d-139">Рекомендуется сохранить значение по умолчанию, а затем очистить индивидуальные элементы, которые не должны отображаться в учетных записях пользователя и группы Windows на панели **Членства** в этой роли.</span><span class="sxs-lookup"><span data-stu-id="d966d-139">We suggest you keep this default and then clear individual members that should not be visible to the Windows user and group accounts in the **Memberships** pane via this role.</span></span> <span data-ttu-id="d966d-140">Преимущество состоит в том, что новые элементы, добавляемые в будущие операции обработки автоматически доступны для пользователей, подключающихся с помощью этой роли.</span><span class="sxs-lookup"><span data-stu-id="d966d-140">The advantage is that new members added in future processing operations are automatically available to people connecting through this role.</span></span>  
  
     <span data-ttu-id="d966d-141">Кроме того, можно **Отменить выделение всех элементов** , чтобы отозвать общий доступ, а затем выбрать, каким пользователям следует разрешить его.</span><span class="sxs-lookup"><span data-stu-id="d966d-141">Alternatively, you can **Deselect all members** to revoke access overall, and then pick which members to allow.</span></span> <span data-ttu-id="d966d-142">В будущих операциях обработки новые элементы не видны, пока вы вручную не измените безопасность, разрешив доступ к данным измерения.</span><span class="sxs-lookup"><span data-stu-id="d966d-142">In future processing operations, new members are not visible until you manually edit dimension data security to allow access to them.</span></span>  
  
5.  <span data-ttu-id="d966d-143">При необходимости нажмите кнопку **Дополнительно** , чтобы включить `Visual Totals` для этой иерархии атрибута.</span><span class="sxs-lookup"><span data-stu-id="d966d-143">Optionally, click **Advanced** to enable `Visual Totals` for this attribute hierarchy.</span></span> <span data-ttu-id="d966d-144">Этот параметр повторно вычисляет статистические выражения на базе элементов, доступных в этой роли.</span><span class="sxs-lookup"><span data-stu-id="d966d-144">This option recalculates aggregations based on the members available through the role.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="d966d-145">При применении разрешений, которые усекают элементы измерения, автоматическое повторное вычисление суммарных итогов не выполняется.</span><span class="sxs-lookup"><span data-stu-id="d966d-145">When applying permissions that trim dimension members, aggregated totals are not recalculated automatically.</span></span> <span data-ttu-id="d966d-146">Предположим, что `All` элемент иерархии атрибута возвращает число 200 до применения разрешений.</span><span class="sxs-lookup"><span data-stu-id="d966d-146">Suppose the `All` member of an attribute hierarchy returns a count of 200 before permissions are applied.</span></span> <span data-ttu-id="d966d-147">После применения разрешений, запрещающих доступ к некоторым элементам, `All` по-прежнему возвращает 200, даже несмотря на то, что значения элементов, видимые для пользователя, гораздо меньше.</span><span class="sxs-lookup"><span data-stu-id="d966d-147">After applying permissions that deny access to some members, `All` still returns 200, even though the member values visible to the user are much less.</span></span> <span data-ttu-id="d966d-148">Чтобы избежать путаницы с потребителями Куба, можно настроить элемент как `All` совокупность только тех элементов, к которым принадлежат члены роли, а не совокупность всех элементов иерархии атрибута.</span><span class="sxs-lookup"><span data-stu-id="d966d-148">To avoid confusing the consumers of your cube, you can configure the `All` member be the aggregate of just those members to which role members, rather than the aggregate of all of the members of the attribute hierarchy.</span></span> <span data-ttu-id="d966d-149">Чтобы вызвать это поведение, можно включить `Visual Totals` на вкладке **Дополнительно** при настройке безопасности измерения.</span><span class="sxs-lookup"><span data-stu-id="d966d-149">To invoke this behavior, you can enable `Visual Totals` on the **Advanced** tab when configuring dimension security.</span></span> <span data-ttu-id="d966d-150">После включения во время выполнения запроса вместо получения заранее вычисленного значения статистическое выражение будет вычисляться.</span><span class="sxs-lookup"><span data-stu-id="d966d-150">Once enabled, the aggregate is calculated at query time rather than retrieved from pre-calculated aggregations.</span></span> <span data-ttu-id="d966d-151">Это может заметно повлиять на производительность запроса, поэтому функцию следует использовать только при необходимости.</span><span class="sxs-lookup"><span data-stu-id="d966d-151">This can have a noticeable effect on query performance, so use it only when necessary.</span></span>  
  
## <a name="hiding-measures"></a><span data-ttu-id="d966d-152">Скрытие мер</span><span class="sxs-lookup"><span data-stu-id="d966d-152">Hiding measures</span></span>  
 <span data-ttu-id="d966d-153">В среде [Предоставление настраиваемого доступа к данным ячейки (службы Analysis Services)](grant-custom-access-to-cell-data-analysis-services.md)объяснялось, что для полного скрытия всех визуальных аспектов меры, а не только данных ячейки, необходимы разрешения в элементах измерения.</span><span class="sxs-lookup"><span data-stu-id="d966d-153">In [Grant custom access to cell data &#40;Analysis Services&#41;](grant-custom-access-to-cell-data-analysis-services.md), it was explained that fully hiding all visual aspects of a measure, and not just its cell data, requires permissions on dimension members.</span></span> <span data-ttu-id="d966d-154">В этом разделе описывается, как отклонить доступ к метаданным объекта меры.</span><span class="sxs-lookup"><span data-stu-id="d966d-154">This section explains how to deny access to the object metadata of a measure.</span></span>  
  
1.  <span data-ttu-id="d966d-155">Прокрутите список измерений **на**  |  **базовом**измерении измерение до тех пор, пока не будут доступны измерения куба, а затем выберите **измерение мер**.</span><span class="sxs-lookup"><span data-stu-id="d966d-155">On **Dimension Data** | **Basic**, scroll down the Dimension list until you reach cube dimensions, and then select **Measures Dimension**.</span></span>  
  
2.  <span data-ttu-id="d966d-156">В списке мер снимите флажок для мер, которые не должны отображаться пользователям, подключающимся через эту роль.</span><span class="sxs-lookup"><span data-stu-id="d966d-156">From the list of measures, clear the check box for measures that should not appear to users connecting via this role.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="d966d-157">Сведения о том, как обнаружить меры, способные нарушить безопасность ролей, см. в разделе "Предварительные требования".</span><span class="sxs-lookup"><span data-stu-id="d966d-157">Check the Prerequisites to learn how to identify measures that can break role security.</span></span>  
  
## <a name="advanced-dimension-security"></a><span data-ttu-id="d966d-158">Дополнительная безопасность измерений</span><span class="sxs-lookup"><span data-stu-id="d966d-158">Advanced dimension security</span></span>  
 <span data-ttu-id="d966d-159">При наличии многомерной экспертизы другим подходом является запись многомерных выражений, которые задают критерии разрешения или отклонения доступа для элементов.</span><span class="sxs-lookup"><span data-stu-id="d966d-159">If you have MDX expertise, another approach is to write MDX expressions that set the criteria for which members are allowed or denied access.</span></span> <span data-ttu-id="d966d-160">Щелкните **создать роль**  |  **данные измерения**  |  **Дополнительно** , чтобы предоставить скрипт.</span><span class="sxs-lookup"><span data-stu-id="d966d-160">Click **Create Role** | **Dimension Data** | **Advanced** to provide the script.</span></span>  
  
 <span data-ttu-id="d966d-161">Можно изменить конструктор многомерных выражений для записи многомерного выражения.</span><span class="sxs-lookup"><span data-stu-id="d966d-161">You can the MDX Builder to write the MDX statement.</span></span> <span data-ttu-id="d966d-162">Дополнительные сведения см. в разделе [Конструктор многомерных выражений (службы Analysis Services — многомерные данные)](../mdx-builder-analysis-services-multidimensional-data.md).</span><span class="sxs-lookup"><span data-stu-id="d966d-162">See [MDX Builder &#40;Analysis Services - Multidimensional Data&#41;](../mdx-builder-analysis-services-multidimensional-data.md) for details.</span></span> <span data-ttu-id="d966d-163">На вкладке **Дополнительно** доступны следующие параметры.</span><span class="sxs-lookup"><span data-stu-id="d966d-163">The **Advanced** tab has the following options:</span></span>  
  
 <span data-ttu-id="d966d-164">**Attribute (XElement Dynamic Property)** (Attribute (динамическое свойство XElement))</span><span class="sxs-lookup"><span data-stu-id="d966d-164">**Attribute**</span></span>  
 <span data-ttu-id="d966d-165">Выберите атрибут, безопасность которого необходимо настроить.</span><span class="sxs-lookup"><span data-stu-id="d966d-165">Select the attribute for which you want to manage member security.</span></span>  
  
 <span data-ttu-id="d966d-166">**Разрешенный набор элементов**</span><span class="sxs-lookup"><span data-stu-id="d966d-166">**Allowed member set**</span></span>  
 <span data-ttu-id="d966d-167">Свойство AllowedSet можно разрешить в набор без элементов (по умолчанию), с некоторыми или всеми элементами.</span><span class="sxs-lookup"><span data-stu-id="d966d-167">The AllowedSet can resolve to no members (default), all members, or some members.</span></span> <span data-ttu-id="d966d-168">Если при предоставлении доступа к атрибуту не определяются никакие элементы допустимого набора, то будет разрешен доступ ко всем элементам.</span><span class="sxs-lookup"><span data-stu-id="d966d-168">If you allow access to an attribute and do not define any members of the allowed set, access to all members is granted.</span></span> <span data-ttu-id="d966d-169">Если при предоставлении доступа к атрибуту определяется конкретный набор элементов атрибута, то отображаться будут только явно разрешенные элементы.</span><span class="sxs-lookup"><span data-stu-id="d966d-169">If you allow access to an attribute and define a specific set of attribute members, only the explicitly allowed members are visible.</span></span>  
  
 <span data-ttu-id="d966d-170">Создание AllowedSet окажет влияние, если атрибут участвует в многоуровневой иерархии.</span><span class="sxs-lookup"><span data-stu-id="d966d-170">Creating an AllowedSet has a ripple effect when the attribute participates in a multi-level hierarchy.</span></span> <span data-ttu-id="d966d-171">Предположим, роль разрешает доступ к штату Вашингтон (рассмотрим сценарий, где роль предоставляет разрешения отделу продаж в штате Вашингтон компании).</span><span class="sxs-lookup"><span data-stu-id="d966d-171">For example, suppose a role allows access to Washington state (assume a scenario where the role is granting permissions to a company's Washington state sales division).</span></span> <span data-ttu-id="d966d-172">Пользователи, подключающиеся через эту роль, увидят только элементы в цепи запросов с предками (США) или потомками (Сиэтл и Редмонд), включающие штат Вашингтон.</span><span class="sxs-lookup"><span data-stu-id="d966d-172">For people connecting through this role, queries that include ancestors (United States) or descendants (Seattle and Redmond) will only see members in a chain including Washington state.</span></span> <span data-ttu-id="d966d-173">Поскольку другие штаты не разрешены явно, эффект будет такой, как если бы они были отклонены.</span><span class="sxs-lookup"><span data-stu-id="d966d-173">Because other states are not explicitly allowed, the effect will be the same as if they were denied.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="d966d-174">При определении пустого набора ( {} ) элементов атрибута ни один из элементов атрибута не будет виден роли базы данных.</span><span class="sxs-lookup"><span data-stu-id="d966d-174">If you define an empty set ({}) of attribute members, no members of the attribute will be visible to the database role.</span></span> <span data-ttu-id="d966d-175">Отсутствие допустимого набора не трактуется как пустой набор.</span><span class="sxs-lookup"><span data-stu-id="d966d-175">The absence of an allowed set is not interpreted as an empty set.</span></span>  
  
 <span data-ttu-id="d966d-176">**Запрещенный набор элементов**</span><span class="sxs-lookup"><span data-stu-id="d966d-176">**Denied member set**</span></span>  
 <span data-ttu-id="d966d-177">Свойство DeniedSet можно разрешить в набор без элементов, с некоторыми или со всеми элементами атрибута (по умолчанию).</span><span class="sxs-lookup"><span data-stu-id="d966d-177">The DeniedSet property can resolve to no members, all members (default), or some attribute members.</span></span> <span data-ttu-id="d966d-178">Если отклоненный набор содержит только определенный набор элементов атрибутов, доступ к роли базы данных отклоняется только для этих конкретных элементов, а также для потомков, если атрибут находится в многоуровневой иерархии.</span><span class="sxs-lookup"><span data-stu-id="d966d-178">When the denied set contains only a specific set of attribute members, the database role is denied access only to those specific members, as well as descendants if the attribute is in a multi-level hierarchy.</span></span> <span data-ttu-id="d966d-179">Рассмотрим пример отдела продаж в штате Вашингтон.</span><span class="sxs-lookup"><span data-stu-id="d966d-179">Consider the Washington state sales division example.</span></span> <span data-ttu-id="d966d-180">Если Вашингтон находится в DeniedSet, пользователи, подключающиеся через эту роль, увидят все остальные штаты, за исключением Вашингтона и атрибутов его потомков.</span><span class="sxs-lookup"><span data-stu-id="d966d-180">If Washington is placed in the DeniedSet, people connecting through this role will see all other states except Washington and its descendent attributes.</span></span>  
  
 <span data-ttu-id="d966d-181">Вспомните из предыдущего раздела, что отклоненный набор является исправленной коллекцией.</span><span class="sxs-lookup"><span data-stu-id="d966d-181">Recall from the previous section that the denied set is a fixed collection.</span></span> <span data-ttu-id="d966d-182">Если в дальнейшем обработка представляет новые элементы, доступ к которым также должен быть отклонен, необходимо изменить эту роль, чтобы добавить элементы в список.</span><span class="sxs-lookup"><span data-stu-id="d966d-182">If processing subsequently introduces new members that should also be denied access, you will need to edit this role to add those members to the list.</span></span>  
  
 <span data-ttu-id="d966d-183">**Элемент по умолчанию**</span><span class="sxs-lookup"><span data-stu-id="d966d-183">**Default member**</span></span>  
 <span data-ttu-id="d966d-184">Свойство DefaultMember определяет набор данных, возвращаемый клиенту в том случае, если атрибут не включается явным образом в запрос.</span><span class="sxs-lookup"><span data-stu-id="d966d-184">The DefaultMember property determines the data set returned to a client when an attribute is not explicitly included in a query.</span></span> <span data-ttu-id="d966d-185">Если атрибут не включается явным образом, то службы [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] используют для атрибута один из следующих элементов по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="d966d-185">When the attribute is not explicitly included, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] uses one of the following default members for the attribute:</span></span>  
  
-   <span data-ttu-id="d966d-186">Если роль базы данных определяет для атрибута элемент по умолчанию, то службы [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] используют данный элемент по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="d966d-186">If the database role defines a default member for the attribute, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] uses this default member.</span></span>  
  
-   <span data-ttu-id="d966d-187">Если роль базы данных не определяет для атрибута элемент по умолчанию, то службы [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] используют элемент по умолчанию, заданный для самого атрибута.</span><span class="sxs-lookup"><span data-stu-id="d966d-187">If the database role does not define a default member for the attribute, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] uses the default member that is defined for the attribute itself.</span></span> <span data-ttu-id="d966d-188">Элемент по умолчанию для атрибута, если не указывается иное, является элементом `All` (если только атрибут не определяется как не включаемый в статистическое вычисление).</span><span class="sxs-lookup"><span data-stu-id="d966d-188">The default member for an attribute, unless you specify otherwise, is the `All` member (unless the attribute is defined as non-aggregatable).</span></span>  
  
 <span data-ttu-id="d966d-189">Предположим, роль базы данных указывает `Male` в качестве элемента по умолчанию для атрибута `Gender`.</span><span class="sxs-lookup"><span data-stu-id="d966d-189">For example, suppose a database role specifies `Male` as the default member for the `Gender` attribute.</span></span> <span data-ttu-id="d966d-190">Если только в запросе явно не включен атрибут `Gender` и не указан другой элемент для такого атрибута, то службы [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] вернут набор данных, включающий в себя только клиентов мужского пола.</span><span class="sxs-lookup"><span data-stu-id="d966d-190">Unless a query both explicitly includes the `Gender` attribute and specifies a different member for this attribute, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] would return a data set that included only male customers.</span></span> <span data-ttu-id="d966d-191">Дополнительные сведения о настройке элементов по умолчанию см. в разделе [Определение элемента по умолчанию](attribute-properties-define-a-default-member.md).</span><span class="sxs-lookup"><span data-stu-id="d966d-191">For more information about setting the default member, see [Define a Default Member](attribute-properties-define-a-default-member.md).</span></span>  
  
 <span data-ttu-id="d966d-192">**Активировать визуальные итоги**</span><span class="sxs-lookup"><span data-stu-id="d966d-192">**Enable Visual Total**</span></span>  
 <span data-ttu-id="d966d-193">Свойство VisualTotals указывает на то, вычисляются ли отображаемые статистические значения ячеек в соответствии со всеми значениями ячеек или только в соответствии со значениями ячеек, видимых роли базы данных.</span><span class="sxs-lookup"><span data-stu-id="d966d-193">The VisualTotals property indicates whether the aggregated cell values that are displayed are calculated according to all cell values or only according to the cell values that are visible to the database role.</span></span>  
  
 <span data-ttu-id="d966d-194">По умолчанию свойство VisualTotals отключено (имеет значение `False` ).</span><span class="sxs-lookup"><span data-stu-id="d966d-194">By default, the VisualTotals property is disabled (set to `False`).</span></span> <span data-ttu-id="d966d-195">Указанный параметр по умолчанию позволяет добиться максимальной производительности, потому что службы [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] могут быстро вычислить сумму всех значений ячеек, не тратя время на выбор значений ячеек для включения в вычисление.</span><span class="sxs-lookup"><span data-stu-id="d966d-195">This default setting maximizes performance because [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] can quickly calculate the total of all cell values, instead of having to spend time selecting which cells values to calculate.</span></span>  
  
 <span data-ttu-id="d966d-196">Однако отключение свойства VisualTotals может оказать отрицательное влияние на безопасность, если пользователь может воспользоваться статистическими значениями ячеек для вывода значений элементов атрибута, к которым роль базы данных пользователя не имеет доступа.</span><span class="sxs-lookup"><span data-stu-id="d966d-196">However, having the VisualTotals property disabled could create a security issue if a user can use the aggregated cell values to deduce values for attribute members to which the user's database role does not have access.</span></span> <span data-ttu-id="d966d-197">Например, службы [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] используют значения трех элементов атрибута для вычисления статистического значения ячейки.</span><span class="sxs-lookup"><span data-stu-id="d966d-197">For example, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] uses the values for three attribute members to calculate an aggregated cell value.</span></span> <span data-ttu-id="d966d-198">У роли базы данных есть доступ к просмотру двух из указанных трех элементов атрибута.</span><span class="sxs-lookup"><span data-stu-id="d966d-198">The database role has access to view two of these three attribute members.</span></span> <span data-ttu-id="d966d-199">Используя статистическое значение ячейки, член данной роли базы данных сможет вывести значение третьего элемента атрибута.</span><span class="sxs-lookup"><span data-stu-id="d966d-199">Using the aggregated cell value, a member of this database role would be able to deduce the value for the third attribute member.</span></span>  
  
 <span data-ttu-id="d966d-200">Установка для свойства VisualTotals значения `True` может устранить этот риск.</span><span class="sxs-lookup"><span data-stu-id="d966d-200">Setting VisualTotals property to `True` can eliminate this risk.</span></span> <span data-ttu-id="d966d-201">Если свойство VisualTotals включено, то роль базы данных может просматривать только суммарные итоги по элементам измерения, для работы с которыми роли предоставлено разрешение.</span><span class="sxs-lookup"><span data-stu-id="d966d-201">When you enable the VisualTotals property, a database role can only view aggregated totals for dimension members to which the role has permission.</span></span>  
  
 <span data-ttu-id="d966d-202">**Проверка**</span><span class="sxs-lookup"><span data-stu-id="d966d-202">**Check**</span></span>  
 <span data-ttu-id="d966d-203">Щелкните, чтобы проверить синтаксис многомерных выражений, заданный на этой странице.</span><span class="sxs-lookup"><span data-stu-id="d966d-203">Click to test the MDX syntax defined on this page.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="d966d-204">См. также:</span><span class="sxs-lookup"><span data-stu-id="d966d-204">See Also</span></span>  
 <span data-ttu-id="d966d-205">[Предоставление разрешений куба или модели &#40;Analysis Services&#41;](grant-cube-or-model-permissions-analysis-services.md) </span><span class="sxs-lookup"><span data-stu-id="d966d-205">[Grant cube or model permissions &#40;Analysis Services&#41;](grant-cube-or-model-permissions-analysis-services.md) </span></span>  
 <span data-ttu-id="d966d-206">[Предоставление настраиваемого доступа к данным ячейки &#40;Analysis Services&#41;](grant-custom-access-to-cell-data-analysis-services.md) </span><span class="sxs-lookup"><span data-stu-id="d966d-206">[Grant custom access to cell data &#40;Analysis Services&#41;](grant-custom-access-to-cell-data-analysis-services.md) </span></span>  
 <span data-ttu-id="d966d-207">[Предоставление разрешений на структуры и модели интеллектуального анализа данных &#40;Analysis Services&#41;](grant-permissions-on-data-mining-structures-and-models-analysis-services.md) </span><span class="sxs-lookup"><span data-stu-id="d966d-207">[Grant permissions on data mining structures and models &#40;Analysis Services&#41;](grant-permissions-on-data-mining-structures-and-models-analysis-services.md) </span></span>  
 [<span data-ttu-id="d966d-208">Предоставление разрешений объекту источника данных (службы Analysis Services)</span><span class="sxs-lookup"><span data-stu-id="d966d-208">Grant permissions on a data source object &#40;Analysis Services&#41;</span></span>](grant-permissions-on-a-data-source-object-analysis-services.md)  
  
  
