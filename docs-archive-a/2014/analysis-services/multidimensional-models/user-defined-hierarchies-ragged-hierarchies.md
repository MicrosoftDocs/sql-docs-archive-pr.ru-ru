---
title: Неоднородные иерархии | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
helpviewer_keywords:
- ragged hierarchies [Analysis Services]
ms.assetid: e40a5788-7ede-4b0f-93ab-46ca33d0cace
author: minewiskan
ms.author: owend
ms.openlocfilehash: 02cbb24b7ae80facf0ddbb1495fccc8f848df377
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87740529"
---
# <a name="ragged-hierarchies"></a>Неоднородные иерархии
  неоднородная иерархия — это пользовательская иерархия, которая имеет нечетное количество уровней. Распространенные примеры включают организационную диаграмму, на которой менеджеры высокого уровня координируют работу как менеджеров отделов, так и их подчиненных, или географические иерархии, состоящие из страны, региона и города, которые включают города без родительского элемента штата или провинции, например Вашингтон О. К., Ватикан или Новый Дели.  
  
 В большинстве иерархий из измерения на каждом уровне иерархии имеется столько же родительских элементов, сколько у любого другого элемента на том же уровне. Неоднородная иерархия отличается тем, что иерархия, в которой по крайней мере у одного элемента логический родительский элемент не находится ровно на один уровень выше самого элемента. В этом случае различные ветви иерархии заканчиваются на разных уровнях. Из-за этого пути углубленной детализации в клиентском приложении могут быть необоснованно сложными.  
  
 Клиентские приложения по-разному обрабатывают неоднородную иерархию. Если в модели существуют неоднородные иерархии, будьте готовы выполнить дополнительную работу, прежде чем получится нужный результат.  
  
 Прежде всего проверьте, каким образом клиентское приложение обрабатывает путь углубленной детализации. Например, Excel повторяет имена родительских элементов как метки-заполнители для отсутствующих значений. Чтобы посмотреть, как это работает, постройте сводную таблицу на основе измерения Sales Territory в многомерной модели Adventure Works. В сводной таблице с атрибутами Group, Country и Region измерения Sales Territory будет видно, что страны, у которых нет значения региона, получает заполнитель, в данном случае повторение названия страны (родительского элемента). Такое поведение является производным от свойства строки подключения MDX Compatibility=1, сохраненного в Excel. Если в клиентском приложении автоматически не сформировалась та детализация углублением, которую требуется получить, то в модели можно задать свойства, чтобы изменить хотя бы какие-то из этих аспектов.  
  
 Этот раздел состоит из следующих подразделов.  
  
-   [Подходы к изменению навигации углубленной детализации в неоднородной иерархии](#bkmk_approach)  
  
-   [Установка HideMemberIf для скрытия элементов в обычной иерархии](#bkmk_Hide)  
  
-   [Задайте совместимость многомерных выражений, чтобы определить, как заполнители представлены в клиентских приложениях.](#bkmk_Mdx)  
  
##  <a name="approaches-for-modifying-drilldown-navigation-in-a-ragged-hierarchy"></a><a name="bkmk_approach"></a> Способы изменения углубленной детализации в неоднородных иерархиях  
 Наличие неоднородной иерархии становится проблемой, когда навигация углубленной детализацией не возвращает нужных значений либо ей просто неудобно пользоваться. Чтобы решить проблемы, связанные с неоднородными иерархиями, рассмотрим следующие варианты.  
  
-   Использовать однородную иерархию, для каждого уровня с помощью свойства `HideMemberIf` указав, будет ли отсутствующий уровень отображаться для пользователя. При задании свойства `HideMemberIf` также следует задать свойство `MDXCompatibility` в строке подключения, чтобы переопределить навигацию по умолчанию. Инструкции по заданию этих свойств содержатся в данном разделе.  
  
-   Создать иерархию типа «родители-потомки», которая явным образом управляет элементами уровня. См. иллюстрацию этого метода в разделе [Неоднородная иерархия в службах SSAS (запись блога)](http://dwbi1.wordpress.com/2011/03/30/ragged-hierarchy-in-ssas/). Дополнительные сведения в электронной документации по см. в разделе [Иерархия "родители-потомки](parent-child-dimension.md)". Недостаток создания иерархии типа «родители-потомки» заключается в том, что можно иметь только одну такую иерархию на измерение, и обычно при вычислении агрегатов для промежуточных элементов страдает производительность.  
  
 Если в измерении есть несколько неоднородных иерархий, следует воспользоваться первым способом, задав свойство `HideMemberIf`. Разработчики бизнес-аналитики, имеющие практический опыт работы с неоднородными иерархиями, рекомендуют вносить дополнительные изменения в физические таблицы данных путем создания отдельных таблиц для каждого уровня. Дополнительные сведения об этой методике см. в статье о [финансовом кубе SSAS. часть 1A – неоднородные иерархии (блог)](http://martinmason.wordpress.com/2012/03/03/the-ssas-financial-cubepart-1aragged-hierarchies-cont/) .  
  
##  <a name="set-hidememberif-to-hide-members-in-a-regular-hierarchy"></a><a name="bkmk_Hide"></a> Задание свойства Set HideMemberIf для скрытия элементов в обычной иерархии  
 В таблице переменного измерения логически отсутствующие элементы могут представляться различными способами. Ячейки таблицы могут содержать правила, пустые строки или значения родительских элементов (когда они служат заполнителями). Представление заполнителей определяется состоянием заполнителя дочернего элемента, которое задается свойством `HideMemberIf` и свойством строки подключения `MDX Compatibility` для клиентского приложения.  
  
 Для клиентских приложений, поддерживающих отображение неоднородных иерархий, с помощью этих свойств можно скрыть логически отсутствующие элементы.  
  
1.  В SSDT дважды щелкните измерение, чтобы открыть его в конструкторе измерений. На первой вкладке «Структура измерения» на панели «Иерархии» отображается иерархия атрибутов.  
  
2.  Щелкните правой кнопкой мыши элемент в иерархии и выберите **Свойства**. Установите свойство `HideMemberIf` в одно из описанных далее значений.  
  
    |Значение свойства HideMemberIf|Описание|  
    |--------------------------|-----------------|  
    |`Never`|Элементы уровня никогда не скрываются. Это значение по умолчанию.|  
    |**OnlyChildWithNoName**|Элемент уровня скрывается, только когда он является единственным дочерним элементом и его имя не задано (значение NULL или пустая строка).|  
    |**OnlyChildWithParentName**|Элемент уровня скрывается, только когда он является единственным дочерним элементом и его имя совпадает с именем родительского элемента.|  
    |**NoName**|Элемент уровня скрывается, если его имя пустое.|  
    |**ParentName**|Элемент уровня скрывается, если его имя совпадает с именем родительского элемента.|  
  
##  <a name="set-mdx-compatibility-to-determine-how-placeholders-are-represented-in-client-applications"></a><a name="bkmk_Mdx"></a>Настройка совместимости многомерных выражений для определения того, как заполнители представлены в клиентских приложениях  
 После задания свойства `HideMemberIf` на уровне иерархии также необходимо задать свойство `MDX Compatibility` в строке подключения, которая передается из клиентского приложения. Значение свойства `MDX Compatibility` определяет, будет ли использоваться свойство `HideMemberIf`.  
  
|Задание свойства MDX Compatibility|Описание|Использование|  
|-------------------------------|-----------------|-----------|  
|**1**|Показать значение заполнителя.|Это значение по умолчанию, которое используют Excel, SSDT и SSMS. Оно указывает серверу возвращать значения заполнителей при детализации углублением пустых уровней в неоднородной иерархии. Если щелкнуть значение заполнителя, то детализацию углублением можно будет продолжить вплоть до дочерних (конечных) узлов.<br /><br /> В Excel задается строка подключения к службам Analysis Services. В ней для каждого нового подключения свойство `MDX Compatibility` всегда устанавливается в значение 1. Это сделано для обеспечения обратной совместимости.|  
|**2**|Скрыть значение заполнителя (значение NULL или копия значения с родительского уровня), но показывать другие уровни и узлы, имеющие соответствующие значения.|Для неоднородных иерархий обычно предпочтительнее указывать `MDX Compatibility`=2. Отчет служб [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] и некоторые сторонние приложения могут сохранять это значение.|  
  
## <a name="see-also"></a>См. также:  
 [Создание определяемых пользователем иерархий](user-defined-hierarchies-create.md)   
 [Пользовательские иерархии](../multidimensional-models-olap-logical-dimension-objects/user-hierarchies.md)   
 [Иерархия "родители-потомки"](parent-child-dimension.md)   
 [Свойства строки подключения (службы Analysis Services)](https://docs.microsoft.com/analysis-services/instances/connection-string-properties-analysis-services)  
  
  
