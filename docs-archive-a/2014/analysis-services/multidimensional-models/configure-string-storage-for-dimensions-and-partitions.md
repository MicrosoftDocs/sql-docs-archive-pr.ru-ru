---
title: Настройка хранилища строк для измерений и секций | Документация Майкрософт
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: 987f6cfc-da82-4b2e-96ef-a8af88339e5f
author: minewiskan
ms.author: owend
ms.openlocfilehash: 2817af382599d4495dddbd8951a72a47629cf824
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87737106"
---
# <a name="configure-string-storage-for-dimensions-and-partitions"></a>Настройка хранилища строк для измерений и секций
  Можно изменить конфигурацию хранилища строк, чтобы оно обеспечивало хранение очень больших строк в атрибутах измерений или секциях, превышающих предельный размер файла в 4 ГБ для хранилищ строк. Если измерения или секции содержат хранилища строк такого размера, можно обойти ограничение размера файла, изменив свойство **StringStoresCompatibilityLevel** на уровне измерения или секции для локальных, а также связанных объектов (локальных или удаленных).  
  
 Обратите внимание, что можно увеличить хранилище строк только на тех объектах, которые требуют дополнительной емкости. В большинстве многомерных моделях строковые данные связаны с измерениями. Однако разделы, содержащие меры числа различных объектов на основе строк, также могут выиграть от этого параметра. Поскольку этот параметр для строк, числовые данные не затрагиваются.  
  
 Ниже приведены допустимые значения для этого свойства.  
  
|Значение|Описание|  
|-----------|-----------------|  
|**1050**|Задает архитектуру хранилища строк по умолчанию, для которого действует ограничение максимального размера файла в 4 ГБ на одно хранилище.|  
|**1100**|Задает хранилище строк большего размера, поддерживает до 4 млрд уникальных строк в одном хранилище.|  
  
> [!IMPORTANT]  
>  Для изменения параметров хранилища строк объекта требуется подвергнуть повторной обработке как сам объект, так и все зависимые объекты. Обработка необходима для завершения процедуры.  
  
 Этот раздел состоит из следующих подразделов.  
  
-   [Сведения о хранилищах строк](#bkmk_background)  
  
-   [Предварительные требования](#bkmk_prereq)  
  
-   [Шаг 1. Задание свойства StringStoreCompatiblityLevel в SQL Server Data Tools](#bkmk_step1)  
  
-   [Шаг 2. Обработка объектов](#bkmk_step2)  
  
##  <a name="about-string-stores"></a><a name="bkmk_background"></a>Сведения о хранилищах строк  
 Конфигурация хранилища строк не является обязательной, а это означает, что даже в создаваемых новых базах данных используется архитектура хранилища строк по умолчанию, для которой действует ограничение на размер файла в 4 ГБ. Использование архитектуры хранилища строк большего размера хоть и незначительно, но снижает производительность. Его следует использовать, только если размер файлов хранилища приближается к максимальному пределу в 4 ГБ.  
  
> [!NOTE]  
>  Этот параметр не применяется к моделям интеллектуального анализа данных. В настоящее время все еще существует возможность столкнуться с ограничением размера файла в ГБ в тех моделях, которые содержат структуры интеллектуального анализа данных.  
  
 В многомерной базе данных служб Analysis Services строки хранятся отдельно от числовых данных, что обеспечивает возможность оптимизации, основанной на характеристиках данных. Строковые данные обычно находятся в атрибутах измерений, представляющих имена или описания. Строковые данные также могут быть в мерах числа различных объектов. Кроме того, строковые данные также могут использоваться в ключах.  
  
 Распознать хранилище строк можно по расширению файла (например, файлы AASTORE. BSTORE, KSSTORE или STRING). По умолчанию каждый из этих файлов может иметь максимальный размер в 4 ГБ. В [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)]можно переопределить максимальный размер файла, указав другой механизм хранения, обеспечивающий рост хранилища строк по мере необходимости.  
  
 В отличие от архитектуры хранилища строк по умолчанию, которая ограничивает размер физического файла, размер хранилища строк большего размера зависит от максимального количества строк. Максимальное ограничение хранилища строк большего размера — 4 млрд уникальных строк или 4 млрд записей (в зависимости от того, какой предел будет достигнут первым). Хранилище строк большего размера создает записи одинакового размера, равного странице в 64 Кбайт. При наличии очень длинных строк, которые не помещаются в одну запись, реальный предел будет составлять менее 4 млрд строк.  
  
##  <a name="prerequisites"></a><a name="bkmk_prereq"></a> Предварительные требования  
 Необходимо наличие [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] или более поздней версии [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)].  
  
 Измерения или секции должны использовать режим хранения MOLAP.  
  
 Уровню совместимости базы данных должно быть присвоено значение 1100. Если база данных создавалась или развертывалась с использованием [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)] и [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] или более поздней версии [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)], то уровень совместимости базы данных уже установлен в значение 1100. Если база данных, созданная в службах [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] более ранней версии, перемещалась в ssSQL11 или более позднюю версию, необходимо обновить уровень совместимости. Для баз данных, которые перемещаются без повторного развертывания, можно задать уровень совместимости в среде [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] . Дополнительные сведения см. [в разделе Установка уровня совместимости многомерной базы данных &#40;Analysis Services&#41;](compatibility-level-of-a-multidimensional-database-analysis-services.md).  
  
##  <a name="step-1-set-the-stringstorecompatiblitylevel-property-in-sql-server-data-tools"></a><a name="bkmk_step1"></a>Шаг 1. Задание свойства StringStoreCompatiblityLevel в SQL Server Data Tools  
  
1.  В среде [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)]откройте проект, содержащий измерения или секции, которые необходимо изменить.  
  
2.  Чтобы изменить хранилище строк для измерений, откройте обозреватель решений. Дважды щелкните измерение, для которого изменяется хранилище строк.  
  
3.  В конструкторе измерений на панели «Атрибуты» должен быть выбран родительский узел измерения (например, если измерение — Customers (Заказчики), выберите Customers без единого дочернего атрибута).  
  
4.  На панели свойств в разделе «Дополнительно» присвойте параметру **StringStoresCompatibilityLevel** значение **1100**. Повторите для других измерений, которым требуется хранилище большего размера. Для остальных измерений оставьте значение **1050** .  
  
5.  Для секций откройте куб из обозревателя решений.  
  
6.  Перейдите на вкладку «Секции».  
  
7.  Разверните секцию, выберите секцию, для которой необходимы дополнительные ресурсы хранения, и измените свойство **StringStoresCompatibilityLevel** .  
  
8.  Сохраните файл.  
  
##  <a name="step-2-process-the-objects"></a><a name="bkmk_step2"></a>Шаг 2. Обработка объектов  
 После обработки объектов будет использоваться новая архитектура хранилища. Обработка объектов также подтверждает успешное разрешение проблемы с ограничением размера хранилища, поскольку сообщение об ошибке переполнения хранилища строк больше не возникает.  
  
-   В обозревателе решений щелкните правой кнопкой мыши только что измененное измерение и выберите пункт **Обработать**.  
  
 Следует использовать параметр «Обработка. Полная» для каждого объекта, который использует новую архитектуру хранилища строк. До обработки обязательно выполните анализ влияния для измерения, чтобы проверить необходимость повторной обработки зависимых объектов.  
  
## <a name="see-also"></a>См. также:  
 [Средства и подходы для обработки &#40;Analysis Services&#41;](tools-and-approaches-for-processing-analysis-services.md)   
 [Параметры обработки и настройки &#40;Analysis Services&#41;](processing-options-and-settings-analysis-services.md)   
 [Режимы и обработка хранилища секций](../multidimensional-models-olap-logical-cube-objects/partitions-partition-storage-modes-and-processing.md)   
 [Хранение измерений](../multidimensional-models-olap-logical-dimension-objects/dimensions-storage.md)  
  
  
