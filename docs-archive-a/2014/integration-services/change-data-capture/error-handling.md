---
title: Обработка ошибок | Документы Майкрософт
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
ms.assetid: ff79e19d-afca-42a4-81b0-62d759380d11
author: chugugrace
ms.author: chugu
ms.openlocfilehash: 083af496c60fb11afaf85068ba980e54986134d4
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87728638"
---
# <a name="error-handling"></a><span data-ttu-id="64b99-102">Обработка ошибок</span><span class="sxs-lookup"><span data-stu-id="64b99-102">Error Handling</span></span>
  <span data-ttu-id="64b99-103">Экземпляр Oracle CDC извлекает изменения из одной базы данных-источника Oracle (кластер Oracle RAC считается одной базой данных) и записывает зафиксированные изменения в таблицы изменений в базе данных CDC на целевом экземпляре [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="64b99-103">An Oracle CDC Instance mines changes from a single Oracle source database (an Oracle RAC cluster is considered a single database) and writes the committed changes to change tables in a CDC database in the target [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance.</span></span>  
  
 <span data-ttu-id="64b99-104">Экземпляр CDC хранит свое состояние в системной таблице с именем **cdc.xdbcdc_state**.</span><span class="sxs-lookup"><span data-stu-id="64b99-104">A CDC Instance maintains its state in a system table called **cdc.xdbcdc_state**.</span></span> <span data-ttu-id="64b99-105">Для получения состояния экземпляра CDC эта таблица может быть запрошена в любой момент.</span><span class="sxs-lookup"><span data-stu-id="64b99-105">This table can be queried any time to find the state of the CDC Instance.</span></span> <span data-ttu-id="64b99-106">Дополнительные сведения о таблице cdc.xdbcdc_state см. в разделе [cdc.xdbcdc_state](the-oracle-cdc-databases.md#bkmk_cdcxdbcdc_state).</span><span class="sxs-lookup"><span data-stu-id="64b99-106">For more information about the cdc.xdbcdc_state table, see [cdc.xdbcdc_state](the-oracle-cdc-databases.md#bkmk_cdcxdbcdc_state).</span></span>  
  
 <span data-ttu-id="64b99-107">Далее приводится описание состояний экземпляра CDC, используемых в таблице xdbcdc_state.</span><span class="sxs-lookup"><span data-stu-id="64b99-107">The table below describes the CDC Instance states in the xdbcdc_state table.</span></span>  
  
 <span data-ttu-id="64b99-108">Для каждого состояния соответствующие столбцы таблицы cdc.xdbcdc_state показывают следующее.</span><span class="sxs-lookup"><span data-stu-id="64b99-108">For each state, the following two indications are shown for the corresponding columns in the cdc.xdbcdc_state table:</span></span>  
  
-   <span data-ttu-id="64b99-109">Экземпляр неактивен (в настоящее время не существует процесса Windows, который бы его обрабатывал).</span><span class="sxs-lookup"><span data-stu-id="64b99-109">Instance is not active (there is no Windows process currently handling it).</span></span> <span data-ttu-id="64b99-110">Если в столбце **Активность** указано значение 1, это значит, что подпроцесс службы Oracle CDC Service, обрабатывающий данный экземпляр Oracle CDC, в настоящее время запущен.</span><span class="sxs-lookup"><span data-stu-id="64b99-110">If the **active** column value is 1, a subprocess of the Oracle CDC Service handling this specific Oracle CDC Instance is running.</span></span>  
  
-   <span data-ttu-id="64b99-111">Если в столбце **Ошибка** указано значение 0, экземпляр CDC Oracle не находится в состоянии ошибки.</span><span class="sxs-lookup"><span data-stu-id="64b99-111">If the **error** column value is 0, the Oracle CDC Instance is not in an error condition.</span></span> <span data-ttu-id="64b99-112">Если в столбце **Ошибка** указано значение 1, произошла ошибка, которая не позволяет экземпляру Oracle CDC обрабатывать изменения.</span><span class="sxs-lookup"><span data-stu-id="64b99-112">If the **error** column value is 1, there is an error that prevents the Oracle CDC Instance from processing changes.</span></span>  
  
     <span data-ttu-id="64b99-113">Если в столбце **Ошибка** указано значение 1 и в столбце **Активность** также указано значение 1, это значит, что в экземпляре Oracle CDC произошла обратимая ошибка, которую можно устранить автоматически.</span><span class="sxs-lookup"><span data-stu-id="64b99-113">If the **error** column has a value of 1 and the **active** column value is also 1, then a recoverable error is occurring for the Oracle CDC Instance, which can be resolved automatically.</span></span> <span data-ttu-id="64b99-114">Если в столбце ошибки указано значение 1, а в столбце активности указано значение 0, в большинстве случаев это означает, что для продолжения работы требуется вмешательство оператора, который устранит проблему вручную.</span><span class="sxs-lookup"><span data-stu-id="64b99-114">If the error column has a value of 1 and the active column has a value of 0, then in most cases a manual workaround may be needed to resolve the problem before processing can be resumed.</span></span>  
  
 <span data-ttu-id="64b99-115">В следующей таблице описаны различные коды состояния, которые экземпляр Oracle CDC может публиковать в своей таблице состояний.</span><span class="sxs-lookup"><span data-stu-id="64b99-115">The following table describes the various status codes that the Oracle CDC Instance may report in its state table.</span></span>  
  
|<span data-ttu-id="64b99-116">Состояние</span><span class="sxs-lookup"><span data-stu-id="64b99-116">Status</span></span>|<span data-ttu-id="64b99-117">Код состояния активности</span><span class="sxs-lookup"><span data-stu-id="64b99-117">Active Status Code</span></span>|<span data-ttu-id="64b99-118">Код состояния ошибки</span><span class="sxs-lookup"><span data-stu-id="64b99-118">Error Status Code</span></span>|<span data-ttu-id="64b99-119">Описания</span><span class="sxs-lookup"><span data-stu-id="64b99-119">Descriptions</span></span>|  
|------------|------------------------|-----------------------|------------------|  
|<span data-ttu-id="64b99-120">ABORTED</span><span class="sxs-lookup"><span data-stu-id="64b99-120">ABORTED</span></span>|<span data-ttu-id="64b99-121">0</span><span class="sxs-lookup"><span data-stu-id="64b99-121">0</span></span>|<span data-ttu-id="64b99-122">1</span><span class="sxs-lookup"><span data-stu-id="64b99-122">1</span></span>|<span data-ttu-id="64b99-123">Экземпляр Oracle CDC не выполняется.</span><span class="sxs-lookup"><span data-stu-id="64b99-123">The Oracle CDC Instance is not running.</span></span> <span data-ttu-id="64b99-124">Подтип состояния ABORTED указывает, что экземпляр Oracle CDC был активен, а затем неожиданно остановился.</span><span class="sxs-lookup"><span data-stu-id="64b99-124">The ABORTED substatus indicates that the Oracle CDC Instance was ACTIVE and then has stopped unexpectedly.</span></span><br /><br /> <span data-ttu-id="64b99-125">Подтип состояния ABORTED задается главным экземпляром службы Oracle CDC Service, когда служба обнаруживает, что экземпляр Oracle CDC не выполняется, хотя имеет состояние ACTIVE.</span><span class="sxs-lookup"><span data-stu-id="64b99-125">The ABORTED substatus is established by the Oracle CDC Service main instance when it detects that the Oracle CDC Instance is not running while its status is ACTIVE.</span></span>|  
|<span data-ttu-id="64b99-126">ошибка</span><span class="sxs-lookup"><span data-stu-id="64b99-126">ERROR</span></span>|<span data-ttu-id="64b99-127">0</span><span class="sxs-lookup"><span data-stu-id="64b99-127">0</span></span>|<span data-ttu-id="64b99-128">1</span><span class="sxs-lookup"><span data-stu-id="64b99-128">1</span></span>|<span data-ttu-id="64b99-129">Экземпляр Oracle CDC не выполняется.</span><span class="sxs-lookup"><span data-stu-id="64b99-129">The Oracle CDC Instance is not running.</span></span> <span data-ttu-id="64b99-130">Состояние ERROR означает, что экземпляр CDC находился в состоянии ACTIVE, но затем произошла ошибка, которая исключает дальнейшую работу, и экземпляр отключился.</span><span class="sxs-lookup"><span data-stu-id="64b99-130">The ERROR status indicates that the CDC instance was ACTIVE but then encountered an error that is not recoverable and disabled itself.</span></span> <span data-ttu-id="64b99-131">Состояние ERROR содержит следующие коды подсостояния:</span><span class="sxs-lookup"><span data-stu-id="64b99-131">The ERROR status contains the following substatus codes:</span></span><br /><br /> <span data-ttu-id="64b99-132">MISCONFIGURED. Обнаружена неисправимая ошибка конфигурации.</span><span class="sxs-lookup"><span data-stu-id="64b99-132">MISCONFIGURED: An unrecoverable configuration error was detected.</span></span><br /><br /> <span data-ttu-id="64b99-133">PASSWORD-REQUIRED. Для конструктора Change Data Capture Designer for Oracle от Attunity пароль не задан или недействителен.</span><span class="sxs-lookup"><span data-stu-id="64b99-133">PASSWORD-REQUIRED: There is no password set for the Change Data Capture Designer for Oracle by Attunity or the configured password is not valid.</span></span> <span data-ttu-id="64b99-134">Причиной может быть изменение пароля асимметричного ключа службы.</span><span class="sxs-lookup"><span data-stu-id="64b99-134">This can be because of a change to the service asymmetric key password.</span></span>|  
|<span data-ttu-id="64b99-135">RUNNING</span><span class="sxs-lookup"><span data-stu-id="64b99-135">RUNNING</span></span>|<span data-ttu-id="64b99-136">1</span><span class="sxs-lookup"><span data-stu-id="64b99-136">1</span></span>|<span data-ttu-id="64b99-137">0</span><span class="sxs-lookup"><span data-stu-id="64b99-137">0</span></span>|<span data-ttu-id="64b99-138">Экземпляр CDC выполняется и обрабатывает записи об изменениях.</span><span class="sxs-lookup"><span data-stu-id="64b99-138">The CDC instance is running and is processing change records.</span></span> <span data-ttu-id="64b99-139">Состояние RUNNING содержит следующие коды подсостояния:</span><span class="sxs-lookup"><span data-stu-id="64b99-139">The RUNNING status contains the following substatus codes:</span></span><br /><br /> <span data-ttu-id="64b99-140">IDLE. Все записи об изменениях были обработаны и сохранены в целевых контрольных таблицах ( **_CT**).</span><span class="sxs-lookup"><span data-stu-id="64b99-140">IDLE: All change records were processed and stored into the target control (**_CT**) tables.</span></span> <span data-ttu-id="64b99-141">В контрольных таблицах не существует активных транзакций.</span><span class="sxs-lookup"><span data-stu-id="64b99-141">There is no active transaction with the control tables.</span></span><br /><br /> <span data-ttu-id="64b99-142">PROCESSING. Экземпляр в настоящее время обрабатывает записи об изменениях, которые еще не записаны в контрольных таблицах ( **_CT**).</span><span class="sxs-lookup"><span data-stu-id="64b99-142">PROCESSING: There are change records being processed that are not yet written to the control (**_CT**) tables.</span></span>|  
|<span data-ttu-id="64b99-143">STOPPED</span><span class="sxs-lookup"><span data-stu-id="64b99-143">STOPPED</span></span>|<span data-ttu-id="64b99-144">0</span><span class="sxs-lookup"><span data-stu-id="64b99-144">0</span></span>|<span data-ttu-id="64b99-145">0</span><span class="sxs-lookup"><span data-stu-id="64b99-145">0</span></span>|<span data-ttu-id="64b99-146">Экземпляр CDC не выполняется.</span><span class="sxs-lookup"><span data-stu-id="64b99-146">The CDC instance is not running.</span></span> <span data-ttu-id="64b99-147">Подтип состояния STOP указывает, что экземпляр Oracle CDC был активен, а затем остановлен корректным образом.</span><span class="sxs-lookup"><span data-stu-id="64b99-147">The STOP substatus indicates that the CDC instance was ACTIVE and then was stopped correctly.</span></span>|  
|<span data-ttu-id="64b99-148">SUSPENDED</span><span class="sxs-lookup"><span data-stu-id="64b99-148">SUSPENDED</span></span>|<span data-ttu-id="64b99-149">1</span><span class="sxs-lookup"><span data-stu-id="64b99-149">1</span></span>|<span data-ttu-id="64b99-150">1</span><span class="sxs-lookup"><span data-stu-id="64b99-150">1</span></span>|<span data-ttu-id="64b99-151">Экземпляр CDC запущен, но обработка приостановлена в связи с устранимой ошибкой.</span><span class="sxs-lookup"><span data-stu-id="64b99-151">The CDC instance is running but processing is suspended due to a recoverable error.</span></span> <span data-ttu-id="64b99-152">Состояние SUSPENDED содержит следующие коды подсостояния:</span><span class="sxs-lookup"><span data-stu-id="64b99-152">The SUSPENDED status contains the following substatus codes:</span></span><br /><br /> <span data-ttu-id="64b99-153">DISCONNECTED. Не удается установить подключение к исходной базе данных Oracle.</span><span class="sxs-lookup"><span data-stu-id="64b99-153">DISCONNECTED: The connection with the source Oracle database cannot be established.</span></span> <span data-ttu-id="64b99-154">Обработка возобновится после восстановления соединения.</span><span class="sxs-lookup"><span data-stu-id="64b99-154">Processing will resume once connection is restored.</span></span><br /><br /> <span data-ttu-id="64b99-155">STORAGE. Хранилище переполнено.</span><span class="sxs-lookup"><span data-stu-id="64b99-155">STORAGE: The storage is full.</span></span> <span data-ttu-id="64b99-156">Обработка возобновится, когда станет доступным дополнительный объем хранения данных.</span><span class="sxs-lookup"><span data-stu-id="64b99-156">Processing will resume when storage becomes available.</span></span> <span data-ttu-id="64b99-157">В некоторых случаях это состояние может не отображаться из-за того, что обновить таблицу состояний невозможно.</span><span class="sxs-lookup"><span data-stu-id="64b99-157">In some cases, this status may not appear because the status table cannot be updated.</span></span><br /><br /> <span data-ttu-id="64b99-158">LOGGER. Средство ведения журнала подключено к базе данных Oracle, но не может считать журналы транзакций Oracle из-за временных проблем.</span><span class="sxs-lookup"><span data-stu-id="64b99-158">LOGGER: The logger is connected to Oracle but it cannot read the Oracle transaction logs because of a temporary problem.</span></span>|  
|<span data-ttu-id="64b99-159">DATAERROR</span><span class="sxs-lookup"><span data-stu-id="64b99-159">DATAERROR</span></span>|<span data-ttu-id="64b99-160">x</span><span class="sxs-lookup"><span data-stu-id="64b99-160">x</span></span>|<span data-ttu-id="64b99-161">x</span><span class="sxs-lookup"><span data-stu-id="64b99-161">x</span></span>|<span data-ttu-id="64b99-162">Этот код состояния используется только для таблицы **xdbcdc_trace** .</span><span class="sxs-lookup"><span data-stu-id="64b99-162">This status code is only used for the **xdbcdc_trace** table.</span></span> <span data-ttu-id="64b99-163">Он не используется в таблице **xdbcdc_state** .</span><span class="sxs-lookup"><span data-stu-id="64b99-163">It does not appear in the **xdbcdc_state** table.</span></span> <span data-ttu-id="64b99-164">Записи трассировки с этим состоянием указывают на проблему с записью журнала Oracle.</span><span class="sxs-lookup"><span data-stu-id="64b99-164">Trace records with this status indicate a problem with an Oracle log record.</span></span> <span data-ttu-id="64b99-165">Испорченная запись журнала хранится в столбце **данных** в виде большого двоичного объекта.</span><span class="sxs-lookup"><span data-stu-id="64b99-165">The bad log record is stored in the **data** column as a BLOB.</span></span> <span data-ttu-id="64b99-166">Состояние DATAERROR содержит следующие коды подсостояния:</span><span class="sxs-lookup"><span data-stu-id="64b99-166">The DATAERROR status contains the following substatus codes:</span></span><br /><br /> <span data-ttu-id="64b99-167">BADRECORD. Приложенную запись журнала не удается проанализировать.</span><span class="sxs-lookup"><span data-stu-id="64b99-167">BADRECORD: The attached log record could not be parsed.</span></span><br /><br /> <span data-ttu-id="64b99-168">CONVERT-ERROR. Данные из некоторых столбцов не удалось преобразовать в данные целевых столбцов таблицы отслеживания.</span><span class="sxs-lookup"><span data-stu-id="64b99-168">CONVERT-ERROR: The data in some columns could not be converted to the target columns in the capture table.</span></span> <span data-ttu-id="64b99-169">Это состояние может появиться, только если конфигурация указывает, что при ошибках преобразования следует формировать записи трассировки.</span><span class="sxs-lookup"><span data-stu-id="64b99-169">This status may appear only if the configuration specifies that conversion errors should produce trace records.</span></span>|  
  
 <span data-ttu-id="64b99-170">Поскольку состояние службы Oracle CDC Service хранится в [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], в некоторых случаях значение состояния в базе данных может не отражать действительного состояния службы.</span><span class="sxs-lookup"><span data-stu-id="64b99-170">Because the Oracle CDC Service state is stored in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], there may be cases where the state value in the database might not reflect the actual state of the service.</span></span> <span data-ttu-id="64b99-171">Чаще всего это происходит, если подключение службы к [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] было разорвано и его по какой-то причине не удается восстановить.</span><span class="sxs-lookup"><span data-stu-id="64b99-171">The most common scenario is when the service loses its connection to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] and cannot resume it (for any reason).</span></span> <span data-ttu-id="64b99-172">В этом случае состояние, записанное в таблице **cdc.xdbcdc_state** , устаревает.</span><span class="sxs-lookup"><span data-stu-id="64b99-172">In that case, the state stored in **cdc.xdbcdc_state** becomes stale.</span></span> <span data-ttu-id="64b99-173">Если метка времени последнего обновления (UTC) старше одной минуты, состояние, скорее всего, устарело.</span><span class="sxs-lookup"><span data-stu-id="64b99-173">If the last update timestamp (UTC) is more than a minute old, the state is probably stale.</span></span> <span data-ttu-id="64b99-174">В этом случае используйте средство просмотра событий Windows для поиска дополнительных сведений о состоянии службы.</span><span class="sxs-lookup"><span data-stu-id="64b99-174">In this case, use the Windows Event Viewer to find additional information about the status of the service.</span></span>  
  
## <a name="error-handling"></a><span data-ttu-id="64b99-175">Обработка ошибок</span><span class="sxs-lookup"><span data-stu-id="64b99-175">Error Handling</span></span>  
 <span data-ttu-id="64b99-176">В этом разделе описана обработка ошибок службой Oracle CDC Service.</span><span class="sxs-lookup"><span data-stu-id="64b99-176">This section describes how the Oracle CDC Service handles errors.</span></span>  
  
### <a name="logging"></a><span data-ttu-id="64b99-177">Logging</span><span class="sxs-lookup"><span data-stu-id="64b99-177">Logging</span></span>  
 <span data-ttu-id="64b99-178">Служба Oracle CDC Service записывает сведения об ошибках в одно из следующих мест.</span><span class="sxs-lookup"><span data-stu-id="64b99-178">The Oracle CDC Service creates error information in one of the following places.</span></span>  
  
-   <span data-ttu-id="64b99-179">Журнал событий Windows. Сюда записываются сведения об ошибках и события жизненного цикла службы Oracle CDC Service (запуск, остановка, подключение (или повторное подключение) к целевому экземпляру [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ).</span><span class="sxs-lookup"><span data-stu-id="64b99-179">The Windows event log, which is used with logging errors and to indicate Oracle CDC Service life cycle events (starting, stopping, (re)connection to the target [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance).</span></span>  
  
-   <span data-ttu-id="64b99-180">Таблица MSXDBCDC.dbo.xdbcdc_trace, которая используется основным процессом службы Oracle CDC Service для ведения общего журнала и трассировки.</span><span class="sxs-lookup"><span data-stu-id="64b99-180">The MSXDBCDC.dbo.xdbcdc_trace table, which is used for general logging and tracing by the Oracle CDC Service main process.</span></span>  
  
-   <span data-ttu-id="64b99-181">Таблица \<cdc-database>.cdc.xdbcdc_trace, которая используется экземплярами Oracle CDC для ведения общего журнала и трассировки.</span><span class="sxs-lookup"><span data-stu-id="64b99-181">The \<cdc-database>.cdc.xdbcdc_trace table, which is used for general logging and tracing by Oracle CDC Instances.</span></span> <span data-ttu-id="64b99-182">Это означает, что ошибки, связанные с определенным экземпляром Oracle CDC, записываются в таблицу трассировки данного экземпляра.</span><span class="sxs-lookup"><span data-stu-id="64b99-182">This means that errors related to a specific Oracle CDC Instance are logged to that instance's trace table.</span></span>  
  
 <span data-ttu-id="64b99-183">Сведения записываются в журнал службой Oracle CDC, когда служба:</span><span class="sxs-lookup"><span data-stu-id="64b99-183">Information is logged by the Oracle CDC service when the service:</span></span>  
  
-   <span data-ttu-id="64b99-184">запущена или остановлена диспетчером управления служб;</span><span class="sxs-lookup"><span data-stu-id="64b99-184">Is started or stopped by the service control manager.</span></span>  
  
-   <span data-ttu-id="64b99-185">не может подключиться к связанному с ней экземпляру [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] или успешно устанавливает связь с ним после сбоя;</span><span class="sxs-lookup"><span data-stu-id="64b99-185">Cannot connect to the associated [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance and when it successfully establishes a connection following a failure.</span></span>  
  
-   <span data-ttu-id="64b99-186">сталкивается с ошибкой при запуске экземпляров службы Oracle CDC Service;</span><span class="sxs-lookup"><span data-stu-id="64b99-186">Encounters an error starting Oracle CDC Service instances.</span></span>  
  
-   <span data-ttu-id="64b99-187">обнаруживает, что работа экземпляра Oracle CDC была прервана;</span><span class="sxs-lookup"><span data-stu-id="64b99-187">Detects that an Oracle CDC Instance has aborted.</span></span>  
  
-   <span data-ttu-id="64b99-188">сталкивается с непредвиденной ошибкой.</span><span class="sxs-lookup"><span data-stu-id="64b99-188">Encounters an unexpected error.</span></span>  
  
 <span data-ttu-id="64b99-189">Сведения записываются в журнал экземпляром Oracle CDC, когда экземпляр:</span><span class="sxs-lookup"><span data-stu-id="64b99-189">Information is logged by the CDC instance when the instance:</span></span>  
  
-   <span data-ttu-id="64b99-190">включается или отключается;</span><span class="sxs-lookup"><span data-stu-id="64b99-190">Is enabled or disabled.</span></span>  
  
-   <span data-ttu-id="64b99-191">сталкивается с ошибкой;</span><span class="sxs-lookup"><span data-stu-id="64b99-191">Encounters an error.</span></span>  
  
-   <span data-ttu-id="64b99-192">восстанавливается после устранимой ошибки.</span><span class="sxs-lookup"><span data-stu-id="64b99-192">Recovers from a recoverable error.</span></span>  
  
 <span data-ttu-id="64b99-193">Таблица трассировки используется также для записи подробных сведений о трассировке для поиска и устранения неполадок.</span><span class="sxs-lookup"><span data-stu-id="64b99-193">The trace table is also used for recording detailed trace information for troubleshooting.</span></span>  
  
### <a name="handling-source-oracle-connection-errors"></a><span data-ttu-id="64b99-194">Обработка ошибок подключения к источнику данных Oracle</span><span class="sxs-lookup"><span data-stu-id="64b99-194">Handling Source Oracle Connection Errors</span></span>  
 <span data-ttu-id="64b99-195">Службе Oracle CDC Oracle необходимо постоянное соединение с исходной базой данных Oracle.</span><span class="sxs-lookup"><span data-stu-id="64b99-195">The Oracle CDC Service needs a persistent connection with the source Oracle database.</span></span> <span data-ttu-id="64b99-196">Многие ошибки соединения, не имеющие отношения к конфигурации службы (такие как неполадки в сети), считаются временными.</span><span class="sxs-lookup"><span data-stu-id="64b99-196">Many connection errors that are unrelated to the service configuration (such as networking errors) are considered transient.</span></span> <span data-ttu-id="64b99-197">Следовательно, если службе Oracle CDC Service не удается установить соединение с базой данных Oracle (при запуске или после разрыва соединения в процессе работы), служба меняет свое состояние на SUSPENDED/DISCONNECTED и начинает периодически повторять попытки подключения.</span><span class="sxs-lookup"><span data-stu-id="64b99-197">Therefore, if the Oracle CDC Service cannot establish connection with the Oracle database (either on start or during work following a disconnection), the service changes its state to SUSPENDED/DISCONNECTED and enters a retry loop where the connection is retried at regular intervals.</span></span> <span data-ttu-id="64b99-198">Обработка продолжится, когда подключение будет восстановлено.</span><span class="sxs-lookup"><span data-stu-id="64b99-198">When the connection is re-established, processing continues.</span></span>  
  
 <span data-ttu-id="64b99-199">Другие типы ошибок подключения не являются временными (например, недействительные учетные данные, недостаточный уровень прав доступа и неверный адрес базы данных).</span><span class="sxs-lookup"><span data-stu-id="64b99-199">Other types of connection errors are not transient (for example, bad credentials, insufficient privileges, and bad database address).</span></span> <span data-ttu-id="64b99-200">Если произошла такая ошибка, службе Oracle CDC Service задается состояние ERROR/MISCONFIGURED или ERROR/PASSWORD-REQUIRED, а сама служба отключается.</span><span class="sxs-lookup"><span data-stu-id="64b99-200">When these errors occur, the Oracle CDC Service state is set to ERROR/MISCONFIGURED or to ERROR/PASSWORD-REQUIRED and the service is disabled.</span></span> <span data-ttu-id="64b99-201">После устранения пользователем соответствующей ошибки экземпляр Oracle CDC нужно заново включить вручную, чтобы возобновить обработку.</span><span class="sxs-lookup"><span data-stu-id="64b99-201">When the user fixes the underlying error, the Oracle CDC Instance should be manually re-enabled for processing to resume.</span></span>  
  
 <span data-ttu-id="64b99-202">Когда неясно, является ли ошибка временной, лучше предположить, что она временная.</span><span class="sxs-lookup"><span data-stu-id="64b99-202">When it is not clear whether the error is transient, it is best to assume it is transient.</span></span>  
  
### <a name="handling-target-sql-server-connection-errors"></a><span data-ttu-id="64b99-203">Обработка ошибок подключения к целевому SQL Server</span><span class="sxs-lookup"><span data-stu-id="64b99-203">Handling Target SQL Server Connection Errors</span></span>  
 <span data-ttu-id="64b99-204">Службе Oracle CDC необходимо постоянное подключение к целевому экземпляру [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="64b99-204">The Oracle CDC Service needs a persistent connection to the target [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance.</span></span> <span data-ttu-id="64b99-205">Это подключение используется в следующих целях.</span><span class="sxs-lookup"><span data-stu-id="64b99-205">This connection is used to:</span></span>  
  
-   <span data-ttu-id="64b99-206">Проверка того факта, что никакие другие службы с тем же именем в настоящее время не работают с этим экземпляром [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="64b99-206">Ensure that there are no other services by the same name currently working with this [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance.</span></span>  
  
-   <span data-ttu-id="64b99-207">Проверка того, какой экземпляр Oracle CDC включен или отключен, и запуск или остановка его подпроцесса.</span><span class="sxs-lookup"><span data-stu-id="64b99-207">Check which Oracle CDC Instance is enabled or disabled and start (or stop) its subprocess.</span></span>  
  
 <span data-ttu-id="64b99-208">Установив соединение с целевым экземпляром [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] и проверив, что это единственная работающая служба Oracle CDC с таким именем, служба Oracle CDC может проверить, какие экземпляры Oracle CDC включены, и запустить их процессы обработки (после остановки службы процессы отключаются).</span><span class="sxs-lookup"><span data-stu-id="64b99-208">When the service establishes a connection with the target [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance and verifies that it is the only Oracle CDC service by this name that is working, it can check which Oracle CDC instances are enabled and start their handling processes (afterward the service stops these processes when they are disabled).</span></span> <span data-ttu-id="64b99-209">Экземпляры Oracle CDC используют свои соединения с [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] для работы с базой данных CDC экземпляра Oracle CDC.</span><span class="sxs-lookup"><span data-stu-id="64b99-209">The Oracle CDC instances use their [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] connections to work with the CDC database of the Oracle CDC instance.</span></span>  
  
 <span data-ttu-id="64b99-210">Способ обработки ошибок при сбое подключения к целевому экземпляру [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] зависит от того, являются ли эти ошибки временными.</span><span class="sxs-lookup"><span data-stu-id="64b99-210">How errors are handled when the connection to the target [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] fails depends on whether the errors are transient.</span></span>  
  
 <span data-ttu-id="64b99-211">Если известно, что ошибка подключения не является временной (например, недействительные учетные данные, недостаточный уровень прав доступа, неверная строка соединения), служба вносит запись об ошибке в журнал событий Windows и останавливается (она не может сделать запись в таблицу трассировки из-за отсутствия подключения к [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]).</span><span class="sxs-lookup"><span data-stu-id="64b99-211">For known non-transient errors (such as bad credentials, insufficient privileges, bad connection information), the service logs an error to the Windows event log and stops (it cannot write to the trace table because it cannot connect to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]).</span></span> <span data-ttu-id="64b99-212">В этом случае пользователю необходимо устранить ошибку и перезапустить службу Windows Oracle CDC.</span><span class="sxs-lookup"><span data-stu-id="64b99-212">In this case, the user must resolve the error and restart the Oracle CDC Windows service.</span></span>  
  
 <span data-ttu-id="64b99-213">В случае временных и неожиданных ошибок попытка совершить операцию повторяется несколько раз. Если ошибка не исчезает в течение достаточно долгого времени, служба CDC останавливает подпроцессы экземпляров CDC и возвращается к первоначальной попытке подключения (возможно, к этому времени контроль над указанной службой CDC уже перешел к другой службе Oracle CDC Service на другом компьютере).</span><span class="sxs-lookup"><span data-stu-id="64b99-213">For transient errors and unexpected errors, the operation is retried several times and if the failure persists for a significant time period, the CDC Service stops its CDC Instance subprocesses and goes back to its initial connection attempt (by this time, an Oracle CDC Service on another machine may have already taken control of the named CDC service).</span></span>  
  
### <a name="handling-target-sql-server-storage-full-errors"></a><span data-ttu-id="64b99-214">Обработка ошибок, вызванных недостатком объема хранения на целевом экземпляре SQL Server</span><span class="sxs-lookup"><span data-stu-id="64b99-214">Handling Target SQL Server Storage Full Errors</span></span>  
 <span data-ttu-id="64b99-215">Когда служба Oracle CDC Service обнаруживает, что невозможно записать новую информацию об изменениях в базу данных CDC на целевом экземпляре [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , она записывает предупреждение в журнал событий и пытается создать новую запись трассировки (хотя эта операция может завершиться ошибкой по той же причине).</span><span class="sxs-lookup"><span data-stu-id="64b99-215">When the Oracle CDC Service detects that it cannot insert new change data into the target [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] CDC database, it writes a warning to the event log and tries to insert a trace record (although that may fail for the same reason).</span></span> <span data-ttu-id="64b99-216">Затем служба повторяет операцию через определенные промежутки времени, пока она не будет успешно выполнена.</span><span class="sxs-lookup"><span data-stu-id="64b99-216">It then retries the operation in a specific interval until it is successful.</span></span>  
  
### <a name="handling-oracle-cdc-errors"></a><span data-ttu-id="64b99-217">Обработка ошибок Oracle CDC</span><span class="sxs-lookup"><span data-stu-id="64b99-217">Handling Oracle CDC Errors</span></span>  
 <span data-ttu-id="64b99-218">Экземпляр Oracle CDC читает журнал транзакций Oracle и обрабатывает его.</span><span class="sxs-lookup"><span data-stu-id="64b99-218">The Oracle CDC Instance reads the Oracle transaction log and processes it.</span></span> <span data-ttu-id="64b99-219">Если при обработке CDC возникает ошибка, сведения об ошибке вносятся в таблицу **cdc.xdbcdc_state** , при этом требуется вмешательство пользователя, который должен вручную устранить указанную ошибку.</span><span class="sxs-lookup"><span data-stu-id="64b99-219">If the CDC processing encounters an error, it is reported in the **cdc.xdbcdc_state** table and the user needs to manually intervene based on the reported error.</span></span>  
  
 <span data-ttu-id="64b99-220">Например, экземпляр Oracle CDC может быть неактивен в течение длительного времени, а нужные файлы журнала транзакций могут быть Oracle недоступны.</span><span class="sxs-lookup"><span data-stu-id="64b99-220">For example, the Oracle CDC Instance may not be active for an extended duration and the required Oracle transaction log files are no longer available.</span></span> <span data-ttu-id="64b99-221">В этом случае администратор базы данных Oracle должен восстановить необходимые журналы, чтобы экземпляр Oracle CDC мог возобновить обработку.</span><span class="sxs-lookup"><span data-stu-id="64b99-221">In this case, the Oracle DBA must restore the required logs for the Oracle CDC Instance to resume processing.</span></span>  
  
### <a name="handling-unexpected-oracle-cdc-instance-failures"></a><span data-ttu-id="64b99-222">Обработка неожиданных сбоев экземпляра Oracle CDC</span><span class="sxs-lookup"><span data-stu-id="64b99-222">Handling Unexpected Oracle CDC Instance Failures</span></span>  
 <span data-ttu-id="64b99-223">Служба Oracle CDC Service отслеживает подпроцессы свих экземпляров CDC.</span><span class="sxs-lookup"><span data-stu-id="64b99-223">The Oracle CDC Service monitors its CDC Instance subprocesses.</span></span> <span data-ttu-id="64b99-224">Если выполнение подпроцесса экземпляра CDC прерывается, служба CDC Service отключает его в таблице MSXDBCDC.dbo.xdbcdc_databases и меняет его состояние в таблице cdc.xdbcdc_state на ABORTED.</span><span class="sxs-lookup"><span data-stu-id="64b99-224">When a CDC Instance subprocess aborts, the CDC Service disables it in the MSXDBCDC.dbo.xdbcdc_databases table and updates its cdc.xdbcdc_state status to ABORTED.</span></span> <span data-ttu-id="64b99-225">В этом случае можно использовать стандартное диалоговое окно отчета об ошибках Windows, чтобы передать сообщение об этой ошибке для анализа в дальнейшем.</span><span class="sxs-lookup"><span data-stu-id="64b99-225">In this case, the standard Windows Error Reporting dialog box is used to report this error for further analysis.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="64b99-226">См. также:</span><span class="sxs-lookup"><span data-stu-id="64b99-226">See Also</span></span>  
 <span data-ttu-id="64b99-227">[Конструктор системы отслеживания измененных данных для Oracle компании Attunity](change-data-capture-designer-for-oracle-by-attunity.md) </span><span class="sxs-lookup"><span data-stu-id="64b99-227">[Change Data Capture Designer for Oracle by Attunity](change-data-capture-designer-for-oracle-by-attunity.md) </span></span>  
 [<span data-ttu-id="64b99-228">Экземпляр CDC Oracle</span><span class="sxs-lookup"><span data-stu-id="64b99-228">The Oracle CDC Instance</span></span>](the-oracle-cdc-instance.md)  
