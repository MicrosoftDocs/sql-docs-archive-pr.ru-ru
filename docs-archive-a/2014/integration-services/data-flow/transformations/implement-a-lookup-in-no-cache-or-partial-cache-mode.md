---
title: Реализация уточняющего запроса в режиме "Частичное кэширование" или "Без кэширования" | Документы Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
helpviewer_keywords:
- Lookup transformation
- match exactly [Integration Services]
- lookups [Integration Services]
- exact matches [Integration Services]
ms.assetid: 01b7fbca-5181-4d47-9f75-7f25af6b40d2
author: chugugrace
ms.author: chugu
ms.openlocfilehash: 5c3958450d6371299972a69f5312a3c631c853aa
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87667322"
---
# <a name="implement-a-lookup-in-no-cache-or-partial-cache-mode"></a>Реализация уточняющего запроса в режиме «Частичное кэширование» или «Без кэширования»
  Можно настроить преобразование «Уточняющий запрос», чтобы использовать частичный кэш или не использовать режим кэша.  
  
-   Частичное кэширование  
  
     Строки с совпадающими записями в эталонном наборе данных и при необходимости строки без совпадающих записей в наборе данных хранятся в кэше. Когда превышается объем памяти кэша, преобразование «Уточняющий запрос» автоматически удаляет из кэша строки, которые используются реже всего.  
  
-   Без кэширования  
  
     Данные в кэш не загружаются.  
  
 Независимо от того, используется ли частичное кэширование или кэш не используется, чтобы подключиться к эталонному набору данных, используется диспетчер соединений OLE DB. Создание эталонного набора данных производится по таблице, представлению или SQL-запросу во время выполнения преобразования «Уточняющий запрос».  
  
### <a name="to-implement-a-lookup-transformation-in-no-cache-or-partial-cache-mode"></a>Реализация преобразования «Уточняющий запрос» в режиме частичного кэширования или режиме без кэширования  
  
1.  В среде [!INCLUDE[ssBIDevStudioFull](../../../includes/ssbidevstudiofull-md.md)]откройте проект [!INCLUDE[ssISnoversion](../../../includes/ssisnoversion-md.md)] , содержащий необходимый пакет, и затем откройте пакет.  
  
2.  На вкладке **Поток данных** добавьте преобразование «Уточняющий запрос».  
  
3.  Подключите преобразование «Уточняющий запрос» к потоку данных, перетащив соединитель из источника или предыдущего преобразования в преобразование «Уточняющий запрос».  
  
    > [!NOTE]  
    >  Преобразование «Уточняющий запрос», настроенное для работы без кэша, может не пройти проверку, если оно соединено с неструктурированным файлом, в котором содержится пустое поле данных. Успешность проверки преобразования зависит от того, включено ли в диспетчере соединений для неструктурированного файла сохранение значений NULL. Чтобы гарантировать успешность проверки преобразования «Уточняющий запрос», выберите в **редакторе источника «неструктурированный файл»** на странице **Диспетчер соединений**параметр **Оставлять значения NULL из источника в потоке данных** .  
  
4.  Чтобы настроить компонент, дважды щелкните источник или предыдущее преобразование.  
  
5.  Дважды щелкните преобразование "Уточняющий запрос", а затем в окне **Редактор преобразования "Уточняющий запрос"** на странице **Общие** выберите **Частичное кэширование** или **Без кэширования**.  
  
6.  В списке **Укажите метод обработки строк без совпадающих элементов** выберите параметр обработки ошибок.  
  
7.  На странице **Соединение** выберите диспетчер соединений из списка **Диспетчер соединений OLE DB** или нажмите кнопку **Создать** , чтобы создать новый диспетчер соединений. Дополнительные сведения см. в разделе [Диспетчер соединений OLE DB](../../connection-manager/ole-db-connection-manager.md).  
  
8.  Выполните один из следующих шагов.  
  
    -   Выберите параметр **Использовать таблицу или представление**, а затем выберите таблицу или представление; либо нажмите кнопку **Создать** , чтобы создать таблицу или представление.  
  
    -   Выберите параметр **Использовать результаты SQL-запроса**, а затем создайте запрос в окне **Команда SQL** .  
  
         -или-  
  
         Нажмите кнопку **Создать запрос** , чтобы создать запрос с помощью графических средств, предоставляемых **Построителем запросов** .  
  
         -или-  
  
         Нажмите кнопку **Обзор** , чтобы выполнить импорт инструкции SQL из файла.  
  
     Для проверки SQL-запроса щелкните **Анализ запроса**.  
  
     Чтобы просмотреть образец, нажмите кнопку **Просмотр**.  
  
9. Перейдите на страницу **Столбцы** и перетащите хотя бы один из столбцов в списке **Доступные входные столбцы** в столбец из списка **Доступные столбцы подстановки** .  
  
    > [!NOTE]  
    >  Преобразование «Уточняющий запрос» автоматически сопоставляет столбцы, которые обладают одинаковыми названиями и типами данных.  
  
    > [!NOTE]  
    >  Типы данных сопоставляемых столбцов должны совпадать. Дополнительные сведения см. в разделе [Integration Services Data Types](../integration-services-data-types.md).  
  
10. Включите столбцы подстановки в выходные данные, выполнив следующие действия.  
  
    1.  В списке **Доступные столбцы подстановки** выберите столбцы.  
  
    2.  Затем в списке **Операция поиска** укажите, будут ли значения из столбцов подстановки заменять значения входных столбцов или они будут записаны в новый столбец.  
  
11. Если в шаге 5 выбрано **Частичное кэширование** , на странице **Дополнительно** задайте следующие параметры кэша.  
  
    -   Из списка **Размер кэша (32-разрядная версия)** выберите размер кэша для 32-разрядных сред.  
  
    -   Из списка **Размер кэша (64-разрядная версия)** выберите размер кэша для 64-разрядных сред.  
  
    -   Чтобы обеспечить кэширование строк без совпадающих записей в ссылке, выберите элемент **Включить кэширование для строк с несовпадающими записями**.  
  
    -   В списке **Распределение из кэша** выберите процентную долю объема кэша, которая должна использоваться для хранения строк без совпадающих записей.  
  
12. Чтобы изменить инструкцию SQL, формирующую эталонный набор данных, выберите команду **Изменить инструкцию SQL**и измените инструкцию SQL, отображаемую в текстовом поле.  
  
     Если эта инструкция включает параметры, нажмите кнопку **Параметры** , чтобы сопоставить параметры с входными столбцами.  
  
    > [!NOTE]  
    >  Дополнительная инструкция SQL, которую можно указать на этой странице, заменяет имя таблицы, указанное на странице **Соединение** **Редактора преобразования «Уточняющий запрос»** .  
  
13. Чтобы настроить вывод ошибок, перейдите на страницу **Вывод ошибок** и задайте параметры обработки ошибок. Дополнительные сведения см. в разделе [Редактор преобразования "Уточняющий запрос" (страница "Вывод ошибок")](../../lookup-transformation-editor-error-output-page.md).  
  
14. Нажмите кнопку **ОК** , чтобы сохранить изменения в преобразовании «Уточняющий запрос», а затем запустите пакет.  
  
## <a name="see-also"></a>См. также:  
 [Преобразования служб Integration Services](integration-services-transformations.md)  
  
  
