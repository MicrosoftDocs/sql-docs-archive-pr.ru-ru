---
title: Преобразование "Уточняющий запрос термина" | Документы Майкрософт
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
f1_keywords:
- sql12.dts.designer.termlookuptrans.f1
helpviewer_keywords:
- extracting data [Integration Services]
- match extracted terms [Integration Services]
- text extraction [Integration Services]
- term extractions [Integration Services]
- lookups [Integration Services]
- counting extracted items
- Term Lookup transformation
ms.assetid: 3c0fa2f8-cb6a-4371-b184-7447be001de1
author: chugugrace
ms.author: chugu
ms.openlocfilehash: a679f9e191b2b1ec54d982a715085fe5b6bddfc5
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87738534"
---
# <a name="term-lookup-transformation"></a><span data-ttu-id="2d243-102">преобразование «Уточняющий запрос термина»</span><span class="sxs-lookup"><span data-stu-id="2d243-102">Term Lookup Transformation</span></span>
  <span data-ttu-id="2d243-103">Преобразование «Уточняющий запрос термина» сопоставляет термины, извлеченные из текста во входном столбце преобразования, с терминами, содержащимися в ссылочной таблице.</span><span class="sxs-lookup"><span data-stu-id="2d243-103">The Term Lookup transformation matches terms extracted from text in a transformation input column with terms in a reference table.</span></span> <span data-ttu-id="2d243-104">Затем оно подсчитывает количество найденных терминов в таблице уточняющих запросов входного набора данных и записывает количество повторений вместе с термином из ссылочной таблицы в столбец на выходе преобразования.</span><span class="sxs-lookup"><span data-stu-id="2d243-104">It then counts the number of times a term in the lookup table occurs in the input data set, and writes the count together with the term from the reference table to columns in the transformation output.</span></span> <span data-ttu-id="2d243-105">Это преобразование полезно для создания пользовательского списка слов на основе входного текста, дополненного статистикой повторяемости слова.</span><span class="sxs-lookup"><span data-stu-id="2d243-105">This transformation is useful for creating a custom word list based on the input text, complete with word frequency statistics.</span></span>  
  
 <span data-ttu-id="2d243-106">Перед тем как преобразование «Уточняющий запрос термина» выполнит поиск, оно извлекает слова из текста входного столбца, используя тот же метод, что и преобразование «Извлечение терминов».</span><span class="sxs-lookup"><span data-stu-id="2d243-106">Before the Term Lookup transformation performs a lookup, it extracts words from the text in an input column using the same method as the Term Extraction transformation:</span></span>  
  
-   <span data-ttu-id="2d243-107">Текст разбивается на предложения.</span><span class="sxs-lookup"><span data-stu-id="2d243-107">Text is broken into sentences.</span></span>  
  
-   <span data-ttu-id="2d243-108">Предложения разбиваются на слова.</span><span class="sxs-lookup"><span data-stu-id="2d243-108">Sentences are broken into words.</span></span>  
  
-   <span data-ttu-id="2d243-109">Слова нормализуются.</span><span class="sxs-lookup"><span data-stu-id="2d243-109">Words are normalized.</span></span>  
  
 <span data-ttu-id="2d243-110">Для дальнейшего уточнения искомых термов преобразование «Уточняющий запрос термина» может быть настроено для выполнения поиска совпадений с учетом регистра.</span><span class="sxs-lookup"><span data-stu-id="2d243-110">To further customize which terms to match, the Term Lookup transformation can be configured to perform a case-sensitive match.</span></span>  
  
## <a name="matches"></a><span data-ttu-id="2d243-111">Совпадает</span><span class="sxs-lookup"><span data-stu-id="2d243-111">Matches</span></span>  
 <span data-ttu-id="2d243-112">Преобразование «Уточняющий запрос термина» выполняет операцию поиска и затем возвращает значение, используя следующие правила.</span><span class="sxs-lookup"><span data-stu-id="2d243-112">The Term Lookup performs a lookup and returns a value using the following rules:</span></span>  
  
-   <span data-ttu-id="2d243-113">Если преобразование настроено для проведения поиска, чувствительного к регистру, то совпадения с отличающимся регистром не учитываются.</span><span class="sxs-lookup"><span data-stu-id="2d243-113">If the transformation is configured to perform case-sensitive matches, matches that fail a case-sensitive comparison are discarded.</span></span> <span data-ttu-id="2d243-114">Например, *ученик* и *УЧЕНИК* считаются разными словами.</span><span class="sxs-lookup"><span data-stu-id="2d243-114">For example, *student* and *STUDENT* are treated as separate words.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="2d243-115">Слово, начинающееся с заглавной буквы в начале предложения, может быть признано совпадающим со словом, начинающимся со строчной буквы.</span><span class="sxs-lookup"><span data-stu-id="2d243-115">A non-capitalized word can be matched with a word that is capitalized at the beginning of a sentence.</span></span> <span data-ttu-id="2d243-116">Например, совпадение между *ученик* и *Ученик* признается действительным, если *Ученик* является первым словом предложения.</span><span class="sxs-lookup"><span data-stu-id="2d243-116">For example, the match between *student* and *Student* succeeds when *Student* is the first word in a sentence.</span></span>  
  
-   <span data-ttu-id="2d243-117">Если множественное число существительного или субстантивное словосочетание существует в ссылочной таблице, то уточняющий запрос учитывает совпадение существительного или словосочетания с ним только во множественном числе.</span><span class="sxs-lookup"><span data-stu-id="2d243-117">If a plural form of the noun or noun phrase exists in the reference table, the lookup matches only the plural form of the noun or noun phrase.</span></span> <span data-ttu-id="2d243-118">Например, все экземпляры слова *ученики* будут рассматриваться отдельно от экземпляров слова *ученик*.</span><span class="sxs-lookup"><span data-stu-id="2d243-118">For example, all instances of *students* would be counted separately from the instances of *student*.</span></span>  
  
-   <span data-ttu-id="2d243-119">Если в ссылочной таблице найдено слово только в единственном числе, то совпадениями будут признаны слова и во множественном, и в единственном числе.</span><span class="sxs-lookup"><span data-stu-id="2d243-119">If only the singular form of the word is found in the reference table, both the singular and the plural forms of the word or phrase are matched to the singular form.</span></span> <span data-ttu-id="2d243-120">Например, если таблица уточняющих запросов содержит *ученик*и преобразование находит слова *ученик* и *ученики*, то оба слова будут считаться соответствиями искомого термина *ученик*.</span><span class="sxs-lookup"><span data-stu-id="2d243-120">For example, if the lookup table contains *student*, and the transformation finds the words *student* and *students*, both words would be counted as a match for the lookup term *student*.</span></span>  
  
-   <span data-ttu-id="2d243-121">Если текст входного столбца является аннотированной фразой с существительным, то нормализации подвергается только последнее слово субстантивного словосочетания.</span><span class="sxs-lookup"><span data-stu-id="2d243-121">If the text in the input column is a lemmatized noun phrase, only the last word in the noun phrase is affected by normalization.</span></span> <span data-ttu-id="2d243-122">Например, аннотированной версией фразы *предписания врачей* является *предписание врача*.</span><span class="sxs-lookup"><span data-stu-id="2d243-122">For example, the lemmatized version of *doctors appointments* is *doctors appointment*.</span></span>  
  
 <span data-ttu-id="2d243-123">Когда искомый элемент содержит термины, которые перекрываются в эталонном наборе, то есть элемент термина найден более чем в одной эталонной записи, то преобразование "Уточняющий запрос термина" возвращает только один результат поиска.</span><span class="sxs-lookup"><span data-stu-id="2d243-123">When a lookup item contains terms that overlap in the reference set-that is, a sub-term is found in more than one reference record-the Term Lookup transformation returns only one lookup result.</span></span> <span data-ttu-id="2d243-124">В следующем примере показан результат, когда искомый термин содержит перекрывающийся элемент.</span><span class="sxs-lookup"><span data-stu-id="2d243-124">The following example shows the result when a lookup item contains an overlapping sub-term.</span></span> <span data-ttu-id="2d243-125">В этом случае перекрывающийся элемент — *Windows*, который найден в двух эталонных терминах.</span><span class="sxs-lookup"><span data-stu-id="2d243-125">The overlapping sub-term in this case is *Windows*, which is found within two reference terms.</span></span> <span data-ttu-id="2d243-126">Однако преобразование возвращает не два результата, а только один эталонный термин, *Windows*.</span><span class="sxs-lookup"><span data-stu-id="2d243-126">However, the transformation does not return two results, but returns only a single reference term, *Windows*.</span></span> <span data-ttu-id="2d243-127">Второй эталонный термин, *Windows 7 Профессиональная*, не возвращается.</span><span class="sxs-lookup"><span data-stu-id="2d243-127">The second reference term, *Windows 7 Professional*, is not returned.</span></span>  
  
|<span data-ttu-id="2d243-128">Элемент</span><span class="sxs-lookup"><span data-stu-id="2d243-128">Item</span></span>|<span data-ttu-id="2d243-129">Значение</span><span class="sxs-lookup"><span data-stu-id="2d243-129">Value</span></span>|  
|----------|-----------|  
|<span data-ttu-id="2d243-130">Входной термин</span><span class="sxs-lookup"><span data-stu-id="2d243-130">Input term</span></span>|<span data-ttu-id="2d243-131">Windows 7 Профессиональная</span><span class="sxs-lookup"><span data-stu-id="2d243-131">Windows 7 Professional</span></span>|  
|<span data-ttu-id="2d243-132">Эталонные термины</span><span class="sxs-lookup"><span data-stu-id="2d243-132">Reference terms</span></span>|<span data-ttu-id="2d243-133">Windows, Windows 7 Профессиональная</span><span class="sxs-lookup"><span data-stu-id="2d243-133">Windows, Windows 7 Professional</span></span>|  
|<span data-ttu-id="2d243-134">Выходные данные</span><span class="sxs-lookup"><span data-stu-id="2d243-134">Output</span></span>|<span data-ttu-id="2d243-135">Windows</span><span class="sxs-lookup"><span data-stu-id="2d243-135">Windows</span></span>|  
  
 <span data-ttu-id="2d243-136">Преобразование «Уточняющий запрос термина» может сопоставлять существительные и субстантивные словосочетания, которые содержат специальные символы, и данные в ссылочной таблице также могут содержать эти символы.</span><span class="sxs-lookup"><span data-stu-id="2d243-136">The Term Lookup transformation can match nouns and noun phrases that contain special characters, and the data in the reference table may include these characters.</span></span> <span data-ttu-id="2d243-137">Вот они: %, @, &, $, #, \*, :, ;, ., **,** , !, ?, \<, >, +, =, ^, ~, |, \\, /, (, ), [, ], {, }, " и '.</span><span class="sxs-lookup"><span data-stu-id="2d243-137">The special characters are as follows: %, @, &, $, #, \*, :, ;, ., **,** , !, ?, \<, >, +, =, ^, ~, |, \\, /, (, ), [, ], {, }, ", and '.</span></span>  
  
## <a name="data-types"></a><span data-ttu-id="2d243-138">Типы данных</span><span class="sxs-lookup"><span data-stu-id="2d243-138">Data Types</span></span>  
 <span data-ttu-id="2d243-139">В преобразовании «Уточняющий запрос термина» может использоваться только столбец, содержащий данные типа DT_WSTR или DT_NTEXT.</span><span class="sxs-lookup"><span data-stu-id="2d243-139">The Term Lookup transformation can only use a column that has either the DT_WSTR or the DT_NTEXT data type.</span></span> <span data-ttu-id="2d243-140">Если столбец содержит текст, не принадлежащий ни к одному из этих типов данных, то преобразование «Конвертация данных» может добавить столбец с типом данных DT_WSTR или DT_NTEXT к потоку данных и скопировать значения столбца в этот новый столбец.</span><span class="sxs-lookup"><span data-stu-id="2d243-140">If a column contains text, but does not have one of these data types, the Data Conversion transformation can add a column with the DT_WSTR or DT_NTEXT data type to the data flow and copy the column values to the new column.</span></span> <span data-ttu-id="2d243-141">Выходные данные преобразования «Конвертация данных» могут быть использованы в качестве входных данных преобразования «Уточняющий запрос термина».</span><span class="sxs-lookup"><span data-stu-id="2d243-141">The output from the Data Conversion transformation can then be used as the input to the Term Lookup transformation.</span></span> <span data-ttu-id="2d243-142">Дополнительные сведения см. в статье [Data Conversion Transformation](data-conversion-transformation.md).</span><span class="sxs-lookup"><span data-stu-id="2d243-142">For more information, see [Data Conversion Transformation](data-conversion-transformation.md).</span></span>  
  
## <a name="configuration-the-term-lookup-transformation"></a><span data-ttu-id="2d243-143">Настройка преобразования «Уточняющий запрос термина»</span><span class="sxs-lookup"><span data-stu-id="2d243-143">Configuration the Term Lookup Transformation</span></span>  
 <span data-ttu-id="2d243-144">Преобразование "Уточняющий запрос термина" содержит свойство InputColumnType, которое указывает назначение столбца.</span><span class="sxs-lookup"><span data-stu-id="2d243-144">The Term Lookup transformation input columns includes the InputColumnType property, which indicates the use of the column.</span></span> <span data-ttu-id="2d243-145">InputColumnType может содержать следующие значения:</span><span class="sxs-lookup"><span data-stu-id="2d243-145">InputColumnType can contain the following values:</span></span>  
  
-   <span data-ttu-id="2d243-146">значение 0 указывает, что столбец передан сразу на выход и не использовался в уточняющем запросе;</span><span class="sxs-lookup"><span data-stu-id="2d243-146">The value 0 indicates the column is passed through to the output only and is not used in the lookup.</span></span>  
  
-   <span data-ttu-id="2d243-147">значение 1 указывает, что столбец использовался только в уточняющем запросе;</span><span class="sxs-lookup"><span data-stu-id="2d243-147">The value 1 indicates the column is used in the lookup only.</span></span>  
  
-   <span data-ttu-id="2d243-148">значение 2 указывает, что столбец передан на выход и также был использован в уточняющем запросе.</span><span class="sxs-lookup"><span data-stu-id="2d243-148">The value 2 indicates the column is passed through to the output, and is also used in the lookup.</span></span>  
  
 <span data-ttu-id="2d243-149">Выходные столбцы преобразования, для свойства InputColumnType которых задано значение 0 или 2, содержат свойство CustomLineageID столбца, в котором хранится идентификатор журнала обращений и преобразований, назначенный столбцу компонентом восходящего потока данных.</span><span class="sxs-lookup"><span data-stu-id="2d243-149">Transformation output columns whose InputColumnType property is set to 0 or 2 include the CustomLineageID property for a column, which contains the lineage identifier assigned to the column by an upstream data flow component.</span></span>  
  
 <span data-ttu-id="2d243-150">Преобразование «Уточняющий запрос термина» добавляет два столбца в вывод преобразования с именами по умолчанию `Term` и `Frequency`.</span><span class="sxs-lookup"><span data-stu-id="2d243-150">The Term Lookup transformation adds two columns to the transformation output, named by default `Term` and `Frequency`.</span></span> <span data-ttu-id="2d243-151">Столбец `Term` содержит термин из таблицы подстановки, а столбец `Frequency` — количество вхождений термина из ссылочной таблицы во входном наборе данных.</span><span class="sxs-lookup"><span data-stu-id="2d243-151">`Term` contains a term from the lookup table and `Frequency` contains the number of times the term in the reference table occurs in the input data set.</span></span> <span data-ttu-id="2d243-152">Эти столбцы не содержат свойство CustomLineageID.</span><span class="sxs-lookup"><span data-stu-id="2d243-152">These columns do not include the CustomLineageID property.</span></span>  
  
 <span data-ttu-id="2d243-153">Таблица подстановки должна быть таблицей из базы данных [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] или Access.</span><span class="sxs-lookup"><span data-stu-id="2d243-153">The lookup table must be a table in a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] or an Access database.</span></span> <span data-ttu-id="2d243-154">Если выход преобразования «Извлечение терминов» сохраняется в таблице, то эта таблица может быть использована в качестве ссылочной, однако можно использовать и другие таблицы.</span><span class="sxs-lookup"><span data-stu-id="2d243-154">If the output of the Term Extraction transformation is saved to a table, this table can be used as the reference table, but other tables can also be used.</span></span> <span data-ttu-id="2d243-155">Перед использованием преобразования «Уточняющий запрос термина», текст неструктурированных файлов, рабочие книги Excel или другие источники должны быть импортированы в базу данных [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] или базу данных Access.</span><span class="sxs-lookup"><span data-stu-id="2d243-155">Text in flat files, Excel workbooks or other sources must be imported to a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] database or an Access database before you can use the Term Lookup transformation.</span></span>  
  
 <span data-ttu-id="2d243-156">Преобразование «Уточняющий запрос термина» использует отдельное соединение OLE DB для подключения к ссылочной таблице.</span><span class="sxs-lookup"><span data-stu-id="2d243-156">The Term Lookup transformation uses a separate OLE DB connection to connect to the reference table.</span></span> <span data-ttu-id="2d243-157">Дополнительные сведения см. в разделе [Диспетчер соединений OLE DB](../../connection-manager/ole-db-connection-manager.md).</span><span class="sxs-lookup"><span data-stu-id="2d243-157">For more information, see [OLE DB Connection Manager](../../connection-manager/ole-db-connection-manager.md).</span></span>  
  
 <span data-ttu-id="2d243-158">Преобразование «Уточняющий запрос термина» работает в режиме полного предварительного кэширования.</span><span class="sxs-lookup"><span data-stu-id="2d243-158">The Term Lookup transformation works in a fully precached mode.</span></span> <span data-ttu-id="2d243-159">Во время выполнения преобразование «Уточняющий запрос термина» производит чтение терминов из ссылочной таблицы и перед обработкой входных строк преобразования сохраняет их в своей собственной памяти.</span><span class="sxs-lookup"><span data-stu-id="2d243-159">At run time, the Term Lookup transformation reads the terms from the reference table and stores them in its private memory before it processes any transformation input rows.</span></span>  
  
 <span data-ttu-id="2d243-160">Так как термины строки входного столбца могут повторяться, обычно выходные данные преобразования «Уточняющий запрос термина» содержат больше строк, чем входные.</span><span class="sxs-lookup"><span data-stu-id="2d243-160">Because the terms in an input column row may repeat, the output of the Term Lookup transformation typically has more rows than the transformation input.</span></span>  
  
 <span data-ttu-id="2d243-161">Преобразование имеет один вход и один выход.</span><span class="sxs-lookup"><span data-stu-id="2d243-161">The transformation has one input and one output.</span></span> <span data-ttu-id="2d243-162">Оно не поддерживает выход ошибок.</span><span class="sxs-lookup"><span data-stu-id="2d243-162">It does not support error outputs.</span></span>  
  
 <span data-ttu-id="2d243-163">Значения свойств можно задавать с помощью конструктора [!INCLUDE[ssIS](../../../includes/ssis-md.md)] или программными средствами.</span><span class="sxs-lookup"><span data-stu-id="2d243-163">You can set properties through [!INCLUDE[ssIS](../../../includes/ssis-md.md)] Designer or programmatically.</span></span>  
  
 <span data-ttu-id="2d243-164">Дополнительные сведения о свойствах, которые можно установить в диалоговом окне **Редактор преобразования «Уточняющий запрос термина»** , см. в следующих разделах:</span><span class="sxs-lookup"><span data-stu-id="2d243-164">For more information about the properties that you can set in the **Term Lookup Transformation Editor** dialog box, click one of the following topics:</span></span>  
  
-   [<span data-ttu-id="2d243-165">Редактор преобразования "Уточняющий запрос термина" (вкладка "Ссылочная таблица")</span><span class="sxs-lookup"><span data-stu-id="2d243-165">Term Lookup Transformation Editor &#40;Reference Table Tab&#41;</span></span>](../../term-lookup-transformation-editor-reference-table-tab.md)  
  
-   [<span data-ttu-id="2d243-166">Редактор преобразований "Уточняющий запрос термина" (вкладка "Уточняющий запрос термина")</span><span class="sxs-lookup"><span data-stu-id="2d243-166">Term Lookup Transformation Editor &#40;Term Lookup Tab&#41;</span></span>](../../term-lookup-transformation-editor-term-lookup-tab.md)  
  
-   [<span data-ttu-id="2d243-167">Редактор преобразования "Уточняющий запрос термина" (вкладка "Дополнительно")</span><span class="sxs-lookup"><span data-stu-id="2d243-167">Term Lookup Transformation Editor &#40;Advanced Tab&#41;</span></span>](../../term-lookup-transformation-editor-advanced-tab.md)  
  
 <span data-ttu-id="2d243-168">Дополнительные сведения о свойствах, которые вы можете задать в диалоговом окне **Расширенный редактор** или программными средствами, см. в следующих разделах.</span><span class="sxs-lookup"><span data-stu-id="2d243-168">For more information about the properties that you can set in the **Advanced Editor** dialog box or programmatically, click one of the following topics:</span></span>  
  
-   [<span data-ttu-id="2d243-169">Общие свойства</span><span class="sxs-lookup"><span data-stu-id="2d243-169">Common Properties</span></span>](../../common-properties.md)  
  
-   [<span data-ttu-id="2d243-170">Пользовательские свойства преобразований</span><span class="sxs-lookup"><span data-stu-id="2d243-170">Transformation Custom Properties</span></span>](transformation-custom-properties.md)  
  
 <span data-ttu-id="2d243-171">Дополнительные сведения о настройке свойств см. в разделе [Установление свойств компонента потока данных](../set-the-properties-of-a-data-flow-component.md).</span><span class="sxs-lookup"><span data-stu-id="2d243-171">For more information about how to set properties, see [Set the Properties of a Data Flow Component](../set-the-properties-of-a-data-flow-component.md).</span></span>  
  
  
