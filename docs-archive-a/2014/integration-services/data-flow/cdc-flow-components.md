---
title: Компоненты потока CDC | Документы Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
ms.assetid: 5ae69ddf-27c3-467c-9af1-c89ec383f661
author: chugugrace
ms.author: chugu
ms.openlocfilehash: 6e1ede87d8acca170dcda9fb9f45d3163cce81da
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87731962"
---
# <a name="cdc-flow-components"></a><span data-ttu-id="02dab-102">Компоненты потока CDC</span><span class="sxs-lookup"><span data-stu-id="02dab-102">CDC Flow Components</span></span>
  <span data-ttu-id="02dab-103">Компоненты отслеживания измененных данных Attunity для служб Microsoft [!INCLUDE[ssISCurrent](../../../includes/ssiscurrent-md.md)] позволяют разработчикам служб SSIS работать с CDC и уменьшают сложность пакетов CDC.</span><span class="sxs-lookup"><span data-stu-id="02dab-103">The Change Data Capture Components by Attunity for Microsoft [!INCLUDE[ssISCurrent](../../../includes/ssiscurrent-md.md)] help SSIS developers work with CDC and reduce the complexity of CDC packages.</span></span>  
  
 <span data-ttu-id="02dab-104">Компоненты CDC служб SSIS предназначены для работы с функцией [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] CDC, когда исходные таблицы находятся в одной базе данных [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] или базе данных Oracle (если используется служба Oracle CDC для [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)]).</span><span class="sxs-lookup"><span data-stu-id="02dab-104">The SSIS CDC components are designed to work with the [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] CDC feature where the source tables are either the same [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] database or an Oracle database (when using the Oracle CDC Service for [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)]).</span></span> <span data-ttu-id="02dab-105">Поддерживаются секционированные таблицы.</span><span class="sxs-lookup"><span data-stu-id="02dab-105">Partitioned tables are supported.</span></span>  
  
 <span data-ttu-id="02dab-106">В компоненты входят компоненты потока управления и потока данных, которые рационализируют чтение и обработку информации об изменениях в пакетах служб SSIS.</span><span class="sxs-lookup"><span data-stu-id="02dab-106">The components include Control and Data Flow components that streamline the experience of reading and processing change data in SSIS packages.</span></span> <span data-ttu-id="02dab-107">Компоненты могут добавляться в библиотеку компонентов в Microsoft [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)], но устанавливаются отдельно.</span><span class="sxs-lookup"><span data-stu-id="02dab-107">The components can be added to the component library in Microsoft [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)], but are installed separately.</span></span>  
  
 <span data-ttu-id="02dab-108">Далее представлены компоненты отслеживания измененных данных Attunity.</span><span class="sxs-lookup"><span data-stu-id="02dab-108">The following are the Change Data Capture Components by Attunity:</span></span>  
  
 <span data-ttu-id="02dab-109">**Компонент потока управления CDC**.</span><span class="sxs-lookup"><span data-stu-id="02dab-109">**CDC Control Flow Component**:</span></span>  
  
 [<span data-ttu-id="02dab-110">Задача управления CDC</span><span class="sxs-lookup"><span data-stu-id="02dab-110">CDC Control Task</span></span>](../control-flow/cdc-control-task.md)  
  
 <span data-ttu-id="02dab-111">**Компоненты потока данных CDC**.</span><span class="sxs-lookup"><span data-stu-id="02dab-111">**CDC Data Flow Components**:</span></span>  
  
 [<span data-ttu-id="02dab-112">Источник «CDC»</span><span class="sxs-lookup"><span data-stu-id="02dab-112">CDC Source</span></span>](cdc-source.md)  
  
 [<span data-ttu-id="02dab-113">Разделитель CDC</span><span class="sxs-lookup"><span data-stu-id="02dab-113">CDC Splitter</span></span>](cdc-splitter.md)  
  
## <a name="installation"></a><span data-ttu-id="02dab-114">Установка</span><span class="sxs-lookup"><span data-stu-id="02dab-114">Installation</span></span>  
 <span data-ttu-id="02dab-115">В этом разделе описываются процедуры установки для компонентов CDC для служб Microsoft [!INCLUDE[ssISCurrent](../../../includes/ssiscurrent-md.md)].</span><span class="sxs-lookup"><span data-stu-id="02dab-115">This section describes the installation procedures for the CDC Components for Microsoft [!INCLUDE[ssISCurrent](../../../includes/ssiscurrent-md.md)].</span></span>  
  
### <a name="version-support"></a><span data-ttu-id="02dab-116">Поддерживаемые версии</span><span class="sxs-lookup"><span data-stu-id="02dab-116">Version Support</span></span>  
 <span data-ttu-id="02dab-117">Компоненты CDC для служб SSIS поддерживают следующие продукты Microsoft [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] :</span><span class="sxs-lookup"><span data-stu-id="02dab-117">The following Microsoft [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] products are supported by the CDC components for SSIS:</span></span>  
  
-   <span data-ttu-id="02dab-118">Microsoft [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)]</span><span class="sxs-lookup"><span data-stu-id="02dab-118">Microsoft [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)]</span></span>  
  
-   <span data-ttu-id="02dab-119">Среда Microsoft [!INCLUDE[ssBIDevStudio](../../../includes/ssbidevstudio-md.md)] для [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 2008 или 2010</span><span class="sxs-lookup"><span data-stu-id="02dab-119">Microsoft [!INCLUDE[ssBIDevStudio](../../../includes/ssbidevstudio-md.md)] for [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 2008 or 2010</span></span>  
  
 <span data-ttu-id="02dab-120">Эти версии поддерживаются для следующих операционных систем и платформ:</span><span class="sxs-lookup"><span data-stu-id="02dab-120">These versions are supported on the following operating systems and platforms:</span></span>  
  
-   <span data-ttu-id="02dab-121">Windows Vista, 32-разрядная (x86) и 64-разрядная (x64) версии с пакетом обновления 2 (SP2)</span><span class="sxs-lookup"><span data-stu-id="02dab-121">Windows Vista 32-bit (x86) and 64-bit (x64) with Service Pack 2</span></span>  
  
-   <span data-ttu-id="02dab-122">Windows 7, 32-разрядная (x86) и 64-разрядная (x64) версии</span><span class="sxs-lookup"><span data-stu-id="02dab-122">Windows 7 32-bit (x86) and 64-bit (x64)</span></span>  
  
-   <span data-ttu-id="02dab-123">Windows Server 2008, 32-разрядная (x86) и 64-разрядная (x64) версии с пакетом обновления 2 (SP2)</span><span class="sxs-lookup"><span data-stu-id="02dab-123">Windows Server 2008 32-bit (x86) and 64-bit (x64) with Service Pack 2</span></span>  
  
-   <span data-ttu-id="02dab-124">Windows Server 2008 R2, 64-разрядная версия (x64)</span><span class="sxs-lookup"><span data-stu-id="02dab-124">Windows Server 2008 R2 64-bit (x64)</span></span>  
  
### <a name="running-the-installation-program"></a><span data-ttu-id="02dab-125">Запуск программы установки</span><span class="sxs-lookup"><span data-stu-id="02dab-125">Running the Installation Program</span></span>  
 <span data-ttu-id="02dab-126">Перед запуском мастера установки убедитесь, что среда [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)][!INCLUDE[ssBIDevStudio](../../../includes/ssbidevstudio-md.md)] закрыта.</span><span class="sxs-lookup"><span data-stu-id="02dab-126">Before you run the installation wizard, be sure that the [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)][!INCLUDE[ssBIDevStudio](../../../includes/ssbidevstudio-md.md)] is closed.</span></span> <span data-ttu-id="02dab-127">Затем выполните указания мастера установки.</span><span class="sxs-lookup"><span data-stu-id="02dab-127">Then follow the directions in the installation wizard.</span></span>  
  
### <a name="restart-ssis"></a><span data-ttu-id="02dab-128">Перезапуск служб SSIS</span><span class="sxs-lookup"><span data-stu-id="02dab-128">Restart SSIS</span></span>  
 <span data-ttu-id="02dab-129">После установки компонентов CDC необходимо перезапустить службу SSIS, чтобы обеспечить правильную работу компонентов в среде SQL [!INCLUDE[ssBIDevStudio](../../../includes/ssbidevstudio-md.md)].</span><span class="sxs-lookup"><span data-stu-id="02dab-129">After you install the CDC components, you must restart the SSIS service to be sure that the components work correctly when developing packages in the SQL [!INCLUDE[ssBIDevStudio](../../../includes/ssbidevstudio-md.md)].</span></span>  
  
 <span data-ttu-id="02dab-130">После установки компонентов отображается сообщение.</span><span class="sxs-lookup"><span data-stu-id="02dab-130">A message is displayed after you install the components.</span></span> <span data-ttu-id="02dab-131">При появлении запроса нажмите кнопку **Да** .</span><span class="sxs-lookup"><span data-stu-id="02dab-131">Click **Yes** when prompted.</span></span>  
  
### <a name="uninstalling-the-microsoft-cdc-components"></a><span data-ttu-id="02dab-132">Удаление компонентов Microsoft CDC</span><span class="sxs-lookup"><span data-stu-id="02dab-132">Uninstalling the Microsoft CDC Components</span></span>  
 <span data-ttu-id="02dab-133">Источник CDC, разделитель CDC и задача «Управление CDC» удаляются с помощью мастера удаления.</span><span class="sxs-lookup"><span data-stu-id="02dab-133">You uninstall the CDC source, CDC splitter, or CDC Control task, by using the uninstall wizard.</span></span> <span data-ttu-id="02dab-134">Перед удалением компонентов необходимо проверить следующие условия.</span><span class="sxs-lookup"><span data-stu-id="02dab-134">Before you uninstall the components you must make sure of the following:</span></span>  
  
 <span data-ttu-id="02dab-135">Если для разработки пакетов используется среда [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)][!INCLUDE[ssBIDevStudio](../../../includes/ssbidevstudio-md.md)] , убедитесь, что среда [!INCLUDE[ssBIDevStudio](../../../includes/ssbidevstudio-md.md)] закрыта перед запуском мастера удаления.</span><span class="sxs-lookup"><span data-stu-id="02dab-135">If you are using the [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)][!INCLUDE[ssBIDevStudio](../../../includes/ssbidevstudio-md.md)] for package development, make sure the [!INCLUDE[ssBIDevStudio](../../../includes/ssbidevstudio-md.md)] is closed before running the uninstall wizard.</span></span>  
  
## <a name="benefits"></a><span data-ttu-id="02dab-136">Преимущества</span><span class="sxs-lookup"><span data-stu-id="02dab-136">Benefits</span></span>  
 <span data-ttu-id="02dab-137">Компоненты CDC для компонентов служб [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)][!INCLUDE[ssISnoversion](../../../includes/ssisnoversion-md.md)] позволяют разработчикам служб SSIS с легкостью создавать пакеты служб SSIS, обрабатывающие информацию об изменениях.</span><span class="sxs-lookup"><span data-stu-id="02dab-137">The CDC Components for [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)][!INCLUDE[ssISnoversion](../../../includes/ssisnoversion-md.md)] components allow SSIS developers to easily build SSIS packages that process change data.</span></span> <span data-ttu-id="02dab-138">Эти компоненты расширяют возможности разработчиков служб SSIS по работе с CDC и уменьшают сложность пакетов CDC.</span><span class="sxs-lookup"><span data-stu-id="02dab-138">These components enhance the ability of SSIS developers to deal with CDC and reduce the complexity of CDC packages.</span></span>  
  
 <span data-ttu-id="02dab-139">Компоненты CDC служб SSIS предоставляют информацию об изменениях в виде, удобном для дальнейшей обработки с целью репликации, загрузки хранилища данных, обновления медленно изменяющихся измерений для OLAP, аудита изменений и других сценариев применения.</span><span class="sxs-lookup"><span data-stu-id="02dab-139">The SSIS CDC components are used to provide the change data in a way that is easy to further process it for replication, loading a data warehouse, updating slowly changing dimensions for OLAP, auditing changes, or for additional possible uses.</span></span> <span data-ttu-id="02dab-140">Тип дальнейшей обработки определяется разработчиком служб SSIS.</span><span class="sxs-lookup"><span data-stu-id="02dab-140">The type of further processing used is determined by the SSIS developer.</span></span>  
  
 <span data-ttu-id="02dab-141">Компоненты CDC служб SSIS предназначены для работы с функцией [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] CDC, когда таблицы изменений находятся в одной базе данных [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="02dab-141">The SSIS CDC components are designed to work with the [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] CDC feature with change tables that are in the same [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] database.</span></span>  
  
## <a name="getting-started-with-the-change-data-capture-components"></a><span data-ttu-id="02dab-142">Приступая к работе с компонентами отслеживания измененных данных</span><span class="sxs-lookup"><span data-stu-id="02dab-142">Getting Started with the Change Data Capture Components</span></span>  
 <span data-ttu-id="02dab-143">Типичный пакет CDC обрабатывает изменения в группе таблиц.</span><span class="sxs-lookup"><span data-stu-id="02dab-143">A typical CDC package processes changes to a group of tables.</span></span> <span data-ttu-id="02dab-144">Часть базового потока управления этого типа пакета CDC показана на рисунке ниже.</span><span class="sxs-lookup"><span data-stu-id="02dab-144">The basic control flow part of this type of CDC package is shown in the figure below.</span></span> <span data-ttu-id="02dab-145">Такой пакет называется пакетом обработки тонкого канала.</span><span class="sxs-lookup"><span data-stu-id="02dab-145">This package is called a trickle-feed processing package.</span></span>  
  
 <span data-ttu-id="02dab-146">![Поток управления пакета для обработки тонкого канала](../media/tricklefeedprocessing.gif "Поток управления пакета для обработки тонкого канала")</span><span class="sxs-lookup"><span data-stu-id="02dab-146">![Trickle Feed Processing Package Control Flow](../media/tricklefeedprocessing.gif "Trickle Feed Processing Package Control Flow")</span></span>  
  
 <span data-ttu-id="02dab-147">Этот поток данных служб [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)][!INCLUDE[ssISnoversion](../../../includes/ssisnoversion-md.md)] содержит две задачи "Управление CDC" и задачу потока данных.</span><span class="sxs-lookup"><span data-stu-id="02dab-147">This [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)][!INCLUDE[ssISnoversion](../../../includes/ssisnoversion-md.md)] Control Flow contains two CDC Control Tasks and the Data Flow task.</span></span> <span data-ttu-id="02dab-148">Первая задача, которая называется **Получить диапазон обработки CDC** , устанавливает диапазон номеров LSN для изменений, которые обрабатываются в задаче потока данных, которая называется **Обработка изменений**.</span><span class="sxs-lookup"><span data-stu-id="02dab-148">The first task called **Get CDC Processing Range** establishes the LSN range for the changes that are processed in the data-flow task called **Process Changes**.</span></span> <span data-ttu-id="02dab-149">Этот диапазон определяется на основании данных, обработанных при последнем выполнении пакета и сохраненных в постоянном хранилище.</span><span class="sxs-lookup"><span data-stu-id="02dab-149">This range is established based on what was processed during the last package run and was saved in a persistent store.</span></span>  
  
 <span data-ttu-id="02dab-150">Дополнительные сведения об использовании задачи «Управление CDC» см. в разделах [CDC Control Task](../control-flow/cdc-control-task.md) и [CDC Control Task Editor](../cdc-control-task-editor.md).</span><span class="sxs-lookup"><span data-stu-id="02dab-150">For more information about using the CDC Control Task, see [CDC Control Task](../control-flow/cdc-control-task.md) and [CDC Control Task Editor](../cdc-control-task-editor.md).</span></span>  
  
 <span data-ttu-id="02dab-151">На следующем рисунке показан поток данных **Обработка изменений** , задающий общий порядок обработки изменений.</span><span class="sxs-lookup"><span data-stu-id="02dab-151">The following figure shows the **Process Changes** data flow, which conceptually shows how the changes are processes.</span></span>  
  
 <span data-ttu-id="02dab-152">![Поток данных обработки изменений](../media/processchangesdataflow.gif "Поток данных обработки изменений")</span><span class="sxs-lookup"><span data-stu-id="02dab-152">![Process Changes Data Flow](../media/processchangesdataflow.gif "Process Changes Data Flow")</span></span>  
  
 <span data-ttu-id="02dab-153">На этом рисунке показаны следующие действия.</span><span class="sxs-lookup"><span data-stu-id="02dab-153">The steps illustrated in this figure are:</span></span>  
  
-   <span data-ttu-id="02dab-154">**Изменения для таблицы X** — это источник CDC, который считывает изменения, внесенные в таблицу X в пределах диапазона обработки CDC, определенного в родительском потоке управления.</span><span class="sxs-lookup"><span data-stu-id="02dab-154">**Changes for Table X** is a CDC source that reads changes made to table X that where made in the CDC processing range determined in the parent control flow.</span></span>  
  
-   <span data-ttu-id="02dab-155">**Разделитель CDC X** используется для разбиения изменений на операции вставки, удаления и обновления.</span><span class="sxs-lookup"><span data-stu-id="02dab-155">**CDC Splitter X** is used to split the changes into inserts, deletes and updates.</span></span> <span data-ttu-id="02dab-156">В этом сценарии предполагается, что источник CDC настроен для составления суммарных изменений, чтобы различные типы изменений можно было обрабатывать параллельно.</span><span class="sxs-lookup"><span data-stu-id="02dab-156">In this scenario it is assumed that the CDC Source is configured to produce Net changes so that different change types can be processed in parallel.</span></span>  
  
-   <span data-ttu-id="02dab-157">Затем отдельные изменения обрабатываются в следующих компонентах потока.</span><span class="sxs-lookup"><span data-stu-id="02dab-157">The specific changes are then further processed downstream.</span></span> <span data-ttu-id="02dab-158">На этом рисунке изменения вставляются в таблицы с использованием нескольких назначений ODBC, но в реальных случаях обработка может отличаться.</span><span class="sxs-lookup"><span data-stu-id="02dab-158">In this illustration, the changes are inserted into tables using multiple ODBC Destinations but in actual cases the processing may be different.</span></span>  
  
 <span data-ttu-id="02dab-159">Дополнительные сведения об источнике CDC см. в разделе</span><span class="sxs-lookup"><span data-stu-id="02dab-159">For more information about the CDC Source, see:</span></span>  
  
 [<span data-ttu-id="02dab-160">CDC-источник</span><span class="sxs-lookup"><span data-stu-id="02dab-160">CDC Source</span></span>](cdc-source.md)  
  
 [<span data-ttu-id="02dab-161">Редактор источника "CDC" (страница "Диспетчер соединений")</span><span class="sxs-lookup"><span data-stu-id="02dab-161">CDC Source Editor &#40;Connection Manager Page&#41;</span></span>](../cdc-source-editor-connection-manager-page.md)  
  
 [<span data-ttu-id="02dab-162">Редактор источника "CDC" (страница "Столбцы")</span><span class="sxs-lookup"><span data-stu-id="02dab-162">CDC Source Editor &#40;Columns Page&#41;</span></span>](../cdc-source-editor-columns-page.md)  
  
 [<span data-ttu-id="02dab-163">Редактор источника "CDC" (страница "Вывод ошибок")</span><span class="sxs-lookup"><span data-stu-id="02dab-163">CDC Source Editor &#40;Error Output Page&#41;</span></span>](../cdc-source-editor-error-output-page.md)  
  
 <span data-ttu-id="02dab-164">Дополнительные сведения о разделителе CDC см. в разделе</span><span class="sxs-lookup"><span data-stu-id="02dab-164">For more information about the CDC Splitter, see:</span></span>  
  
 [<span data-ttu-id="02dab-165">Разделитель CDC</span><span class="sxs-lookup"><span data-stu-id="02dab-165">CDC Splitter</span></span>](cdc-splitter.md)  
  
 <span data-ttu-id="02dab-166">Одним из основных вопросов, требующих внимания при создании пакетов CDC, является взаимодействие обработки изменений с начальной загрузкой (или начальной обработкой) данных.</span><span class="sxs-lookup"><span data-stu-id="02dab-166">One of the basic issues that require attention when building CDC packages is how the change processing interacts with the initial loading (or initial processing) of the data.</span></span>  
  
 <span data-ttu-id="02dab-167">Компоненты CDC поддерживают три различных сценария начальной загрузки и обработки изменений.</span><span class="sxs-lookup"><span data-stu-id="02dab-167">The CDC components support three distinct initial loading and change processing scenarios:</span></span>  
  
-   <span data-ttu-id="02dab-168">Начальная загрузка выполняется с моментальным снимком базы данных.</span><span class="sxs-lookup"><span data-stu-id="02dab-168">Initial loading done with a database snapshot.</span></span> <span data-ttu-id="02dab-169">В этом случае обработка изменений начинается с номера LSN события моментального снимка.</span><span class="sxs-lookup"><span data-stu-id="02dab-169">In this case, change processing starts with the LSN of the snapshot event.</span></span>  
  
-   <span data-ttu-id="02dab-170">Начальная загрузка из замороженной базы данных.</span><span class="sxs-lookup"><span data-stu-id="02dab-170">Initial loading from a quiescent database.</span></span> <span data-ttu-id="02dab-171">В этом случае во время начальной загрузки изменения не вносятся, текущий номер LSN выбирается в рамках периода начальной загрузки и обработка изменений начинается с этого номера LSN.</span><span class="sxs-lookup"><span data-stu-id="02dab-171">In this case, no changes are made during initial loading so the current LSN is sampled at sometime during the initial load and change processing starts with that LSN.</span></span>  
  
-   <span data-ttu-id="02dab-172">Начальная загрузка из активной базы данных.</span><span class="sxs-lookup"><span data-stu-id="02dab-172">Initial loading from an active database.</span></span> <span data-ttu-id="02dab-173">В этом случае, пока выполняется начальная загрузка, в базу данных вносятся изменения и нет точного номера LSN, с которого можно начать обработку изменений.</span><span class="sxs-lookup"><span data-stu-id="02dab-173">In this case, as the initial load is in progress, changes are made to the database and there is no single LSN from which change processing can be precisely started.</span></span> <span data-ttu-id="02dab-174">В этом случае разработчик пакета начальной загрузки может зафиксировать текущий номер LSN в базе данных-источнике до и после начальной загрузки.</span><span class="sxs-lookup"><span data-stu-id="02dab-174">In this case, the initial load package developer can sample the source database current LSN before and after the initial load.</span></span> <span data-ttu-id="02dab-175">Затем при обработке изменений следует соблюдать осторожность параллельно с начальной загрузкой, поскольку некоторые из обработанных изменений уже включены в начальную загрузку (например, операция вставки может завершиться с ошибкой повторяющегося ключа, поскольку вставленная строка уже считана в процессе начальной загрузки).</span><span class="sxs-lookup"><span data-stu-id="02dab-175">Then, when processing changes, care should be taken when processing changes made in parallel to the initial load as some of the processed changes are already seen in the initial load (for example, an Insert change may fail with a duplicate key error because the inserted row was read by the initial load process).</span></span>  
  
 <span data-ttu-id="02dab-176">На следующем рисунке показан пакет служб SSIS, поддерживающий первые два сценария:</span><span class="sxs-lookup"><span data-stu-id="02dab-176">The following figure shows an SSIS package that could handle the first two scenarios:</span></span>  
  
 <span data-ttu-id="02dab-177">![Первые два сценария обработки пакета служб SSIS](../media/scenarioonetwo.gif "Первые два сценария обработки пакета служб SSIS")</span><span class="sxs-lookup"><span data-stu-id="02dab-177">![SSIS package handling first two scenarios](../media/scenarioonetwo.gif "SSIS package handling first two scenarios")</span></span>  
  
 <span data-ttu-id="02dab-178">На следующем рисунке показан пакет служб SSIS, поддерживающий третий сценарий:</span><span class="sxs-lookup"><span data-stu-id="02dab-178">The following figure shows an SSIS package that could handle the third scenario:</span></span>  
  
 <span data-ttu-id="02dab-179">![Третий сценарий обработки пакета служб SSIS](../media/scenario3.gif "Третий сценарий обработки пакета служб SSIS")</span><span class="sxs-lookup"><span data-stu-id="02dab-179">![SSIS package handling third scenario](../media/scenario3.gif "SSIS package handling third scenario")</span></span>  
  
 <span data-ttu-id="02dab-180">После пакета начальной загрузки несколько раз выполняется пакет обновления тонкого канала в соответствии с расписанием для обработки изменений, готовых к обработке.</span><span class="sxs-lookup"><span data-stu-id="02dab-180">Following the initial load package, a trickle-feed update package is run repeatedly according to a schedule to process changes as they become available for consumption.</span></span>  
  
 <span data-ttu-id="02dab-181">Передача состояния обработки CDC из пакета начальной загрузки в пакет тонкого канала, а также между различными задачами в рамках каждого пакета выполняется посредством специальной строковой переменной пакета служб SSIS.</span><span class="sxs-lookup"><span data-stu-id="02dab-181">Passing the state of the CDC processing from the initial load package to the trickle feed package and between different tasks within each package occurs by means of a special SSIS package string variable.</span></span> <span data-ttu-id="02dab-182">Значение этой переменной называется состоянием CDC. Оно отражает текущее состояние обработки CDC для групп таблиц, которые обрабатываются пакетами начальной загрузки и тонкого канала.</span><span class="sxs-lookup"><span data-stu-id="02dab-182">The value of this variable is referred to as the CDC State, which reflects the current state of CDC processing for the groups of tables being handled by the initial load and trickle-feed packages.</span></span>  
  
 <span data-ttu-id="02dab-183">Значение переменной состояния CDC необходимо хранить в постоянном хранилище. Оно должно считываться перед началом обработки CDC и сохраняться с учетом текущего состояния после завершения обработки.</span><span class="sxs-lookup"><span data-stu-id="02dab-183">The value of the CDC State variable needs to be maintained in a persistent storage, it should be read before starting CDC processing and should be saved with the current state after processing completed.</span></span> <span data-ttu-id="02dab-184">Задача загрузки и сохранения состояния CDC может выполняться разработчиком служб SSIS, но компонент управления CDC может автоматизировать эту задачу, сохраняя значение состояния CDC в таблице базы данных.</span><span class="sxs-lookup"><span data-stu-id="02dab-184">The task of loading and storing of the CDC state can be handled by the SSIS developer but the CDC Control component can automate this task by maintaining the CDC State value in a database table.</span></span>  
  
## <a name="security-considerations"></a><span data-ttu-id="02dab-185">Соображения безопасности</span><span class="sxs-lookup"><span data-stu-id="02dab-185">Security Considerations</span></span>  
 <span data-ttu-id="02dab-186">В этом разделе перечислены некоторые соображения по безопасности, связанные с использованием компонентов CDC в службах SSIS.</span><span class="sxs-lookup"><span data-stu-id="02dab-186">This section lists some security considerations related to the use of the CDC components in SSIS.</span></span>  
  
### <a name="access-authorization-to-change-data"></a><span data-ttu-id="02dab-187">Авторизация доступа к информации об изменениях</span><span class="sxs-lookup"><span data-stu-id="02dab-187">Access Authorization to Change Data</span></span>  
 <span data-ttu-id="02dab-188">Пакетам обновления тонкого канала необходим доступ к функциям [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] CDC.</span><span class="sxs-lookup"><span data-stu-id="02dab-188">Trickle-feed update packages need access to [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] CDC functions.</span></span> <span data-ttu-id="02dab-189">Такой доступ по умолчанию предоставляется членам предопределенной роли базы данных **db_owner** .</span><span class="sxs-lookup"><span data-stu-id="02dab-189">Such access is granted, by default, to members of the **db_owner** fixed database role.</span></span> <span data-ttu-id="02dab-190">Поскольку роль **db_owner** обладает широкими возможностями, то при определении экземпляров системы отслеживания в [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] рекомендуется связать с каждым экземпляром системы отслеживания шлюзовую роль безопасности, которая позволит пакету CDC служб SSIS использовать для обработки изменений пользователя с намного более узким диапазоном возможностей.</span><span class="sxs-lookup"><span data-stu-id="02dab-190">Because the **db_owner** is a powerful role, when defining capture instances within [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] it is recommended to associate a gating security role to each capture instance that allows the SSIS CDC package to use a much more restricted user for processing the changes.</span></span>  
  
### <a name="access-to-cdc-database-current-lsn"></a><span data-ttu-id="02dab-191">Доступ к текущему номеру LSN базы данных CDC</span><span class="sxs-lookup"><span data-stu-id="02dab-191">Access to CDC Database Current LSN</span></span>  
 <span data-ttu-id="02dab-192">Операции задачи «Управление CDC», помечающие начальный номер LSN для обработки изменений, должны иметь возможность определить текущий номер LSN базы данных CDC.</span><span class="sxs-lookup"><span data-stu-id="02dab-192">The CDC Control task operations for marking the start LSN for change processing must be able to find the CDC Database current LSN.</span></span> <span data-ttu-id="02dab-193">Для этого используется процедура **sp_replincrementlsn** из базы данных master.</span><span class="sxs-lookup"><span data-stu-id="02dab-193">This is done using the procedure **sp_replincrementlsn** from the master database.</span></span> <span data-ttu-id="02dab-194">Разрешение на выполнение этой процедуры должно предоставляться имени входа, используемому для подключения к базе данных [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] CDC.</span><span class="sxs-lookup"><span data-stu-id="02dab-194">Execute permission on this procedure must be given to the login used for connecting to the [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] CDC database.</span></span>  
  
### <a name="access-to-cdc-states-table"></a><span data-ttu-id="02dab-195">Доступ к таблице состояний CDC</span><span class="sxs-lookup"><span data-stu-id="02dab-195">Access to CDC States Table</span></span>  
 <span data-ttu-id="02dab-196">Таблица состояний CDC используется для автоматического сохранения состояний CDC. Имя входа, используемое для соединения с базой данных [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] CDC, должно иметь возможность обновлять эту таблицу.</span><span class="sxs-lookup"><span data-stu-id="02dab-196">The CDC States table is used for automatically persisting CDC States that need to be updatable by the login used for connecting to the [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] CDC database.</span></span> <span data-ttu-id="02dab-197">Поскольку эта таблица создается разработчиком служб SSIS, задайте в качестве системного администратора [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] пользователя, который имеет разрешения на создание таблиц [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] и выполнение административных задач и задач по обслуживанию.</span><span class="sxs-lookup"><span data-stu-id="02dab-197">As this table is created by the SSIS developer, set the [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] system administrator as a user who is authorized to create [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] databases and perform administrative and maintenance tasks.</span></span> <span data-ttu-id="02dab-198">Кроме того, системный администратор [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] , работающий с базами данных с поддержкой CDC, должен располагать знаниями о технологии [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] CDC и ее реализации.</span><span class="sxs-lookup"><span data-stu-id="02dab-198">In addition, a [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] system administrator who works with CDC enabled databases must be knowledgeable about [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] CDC technology and implementation.</span></span>  
  
## <a name="grouping-tables-for-cdc-processing"></a><span data-ttu-id="02dab-199">Группирование таблиц для обработки CDC</span><span class="sxs-lookup"><span data-stu-id="02dab-199">Grouping Tables for CDC Processing</span></span>  
 <span data-ttu-id="02dab-200">Размер проектов баз данных меняется от нескольких таблиц до нескольких тысяч таблиц.</span><span class="sxs-lookup"><span data-stu-id="02dab-200">Database projects range in size from several tables to many thousands of tables.</span></span> <span data-ttu-id="02dab-201">Во время разработки пакетов начальной загрузки и пакетов CDC разумно группировать таблицы по группам меньшего размера для упрощения управления и повышения эффективности.</span><span class="sxs-lookup"><span data-stu-id="02dab-201">When designing initial load and CDC packages, it is beneficial to group tables in much smaller groups for easier management and efficiency.</span></span> <span data-ttu-id="02dab-202">В этом разделе перечислены различные соображения, относящиеся к сортировке таблиц по малым группам, когда таблицы в каждой группе проходят начальную загрузку и затем обновляются всей группой.</span><span class="sxs-lookup"><span data-stu-id="02dab-202">This section lists various considerations that impact the sorting of tables into small groups, where the tables in each are initially loaded and then updated as a group.</span></span>  
  
 <span data-ttu-id="02dab-203">В шаблонах CDC, поддерживаемых компонентами CDC, предполагается, что такое группирование уже определено.</span><span class="sxs-lookup"><span data-stu-id="02dab-203">The CDC patterns supported by the CDC components assume that this grouping is already determined.</span></span> <span data-ttu-id="02dab-204">Каждая группа определяет отдельный контекст CDC, который поддерживается отдельно от остальных групп.</span><span class="sxs-lookup"><span data-stu-id="02dab-204">Each group defines a separate CDC context that is maintained separately from other groups.</span></span> <span data-ttu-id="02dab-205">Для каждой группы создаются пакеты начальной загрузки и обновления тонкого канала.</span><span class="sxs-lookup"><span data-stu-id="02dab-205">For each group, initial-load and a trickle-feed update packages are created.</span></span> <span data-ttu-id="02dab-206">Обновления тонкого канала планируются для периодического выполнения в зависимости от частоты изменений, ограничений обработки (например, расхода ресурсов ЦП и ввода-вывода, влияния на другие системы) и требуемой задержки.</span><span class="sxs-lookup"><span data-stu-id="02dab-206">Trickle-feed updates are scheduled for periodic runs based on the rate of change processing constraints (for example, CPU and IO consumption, impact on other systems) and the desired latency.</span></span>  
  
 <span data-ttu-id="02dab-207">Таблицы группируются по следующим принципам.</span><span class="sxs-lookup"><span data-stu-id="02dab-207">Tables are grouped based on the following considerations:</span></span>  
  
1.  <span data-ttu-id="02dab-208">В соответствии с целевой базой данных.</span><span class="sxs-lookup"><span data-stu-id="02dab-208">According to the target database.</span></span> <span data-ttu-id="02dab-209">Все таблицы, которые записываются в различные целевые базы данных или проходят различную обработку, должны помещаться в различные группы CDC.</span><span class="sxs-lookup"><span data-stu-id="02dab-209">All tables that are written to different target databases or undergo different processing should be assigned to different CDC groups.</span></span>  
  
2.  <span data-ttu-id="02dab-210">Таблицы, которые связаны с ограничениями ссылочной целостности, должны помещаться в одну группу, чтобы избежать проблем со ссылочной целостностью в целевой базе данных.</span><span class="sxs-lookup"><span data-stu-id="02dab-210">Tables that are related with referential integrity constraints should be assigned to the same group to avoid referential integrity problems at the target.</span></span>  
  
3.  <span data-ttu-id="02dab-211">Таблицы, для которых допустима высокая задержка, можно помещать в одну группу, чтобы обрабатывать их с меньшей частотой и уменьшить общую загрузку системы.</span><span class="sxs-lookup"><span data-stu-id="02dab-211">Tables for which higher latency can be tolerated can be grouped so they can be processed less frequently and reduce overall system load.</span></span>  
  
4.  <span data-ttu-id="02dab-212">Таблицы с высокой частотой изменений следует размещать в группах меньшего размера, а таблицы с низкой частотой изменений можно размещать в группах большего размера.</span><span class="sxs-lookup"><span data-stu-id="02dab-212">Tables for which there is a higher rate of change should be in smaller groups, and tables with a low rate of change can be grouped in larger groups.</span></span>  
  
 <span data-ttu-id="02dab-213">Для каждой группы CDC создаются следующие два пакета.</span><span class="sxs-lookup"><span data-stu-id="02dab-213">The following two packages are created for each CDC group:</span></span>  
  
-   <span data-ttu-id="02dab-214">Пакет начальной загрузки, который считывает весь диапазон данных из исходных таблиц и применяет их к целевым таблицам.</span><span class="sxs-lookup"><span data-stu-id="02dab-214">An Initial Load package, which reads the entire range of data from the source tables and applies it to the target tables.</span></span>  
  
-   <span data-ttu-id="02dab-215">Пакет обновления тонкого канала, который считывает изменения, внесенные в исходные таблицы, и применяет изменения к целевым таблицам.</span><span class="sxs-lookup"><span data-stu-id="02dab-215">A trickle-feed update package that reads changes made to the source tables and applies the changes to the target tables.</span></span> <span data-ttu-id="02dab-216">Этот пакет следует регулярно выполнять по расписанию.</span><span class="sxs-lookup"><span data-stu-id="02dab-216">This package should be executed on a regularly scheduled basis.</span></span>  
  
## <a name="cdc-state"></a><span data-ttu-id="02dab-217">CDC State</span><span class="sxs-lookup"><span data-stu-id="02dab-217">CDC State</span></span>  
 <span data-ttu-id="02dab-218">С каждой группой CDC связано состояние, которое представляется строкой особого формата.</span><span class="sxs-lookup"><span data-stu-id="02dab-218">Each CDC group has a state associated with it, which is represented by a string with a specific format.</span></span> <span data-ttu-id="02dab-219">Дополнительные сведения см. в разделе [CDC Control Task](../control-flow/cdc-control-task.md).</span><span class="sxs-lookup"><span data-stu-id="02dab-219">For more information, see [CDC Control Task](../control-flow/cdc-control-task.md).</span></span> <span data-ttu-id="02dab-220">В следующей таблице показаны возможные значения состояния CDC.</span><span class="sxs-lookup"><span data-stu-id="02dab-220">The following table shows the possible CDC state values.</span></span>  
  
|<span data-ttu-id="02dab-221">Состояние</span><span class="sxs-lookup"><span data-stu-id="02dab-221">State</span></span>|<span data-ttu-id="02dab-222">Описание</span><span class="sxs-lookup"><span data-stu-id="02dab-222">Description</span></span>|  
|-----------|-----------------|  
|<span data-ttu-id="02dab-223">0-(INITIAL)</span><span class="sxs-lookup"><span data-stu-id="02dab-223">0-(INITIAL)</span></span>|<span data-ttu-id="02dab-224">Состояние, которое имеет место до выполнения пакетов в текущей группе CDC.</span><span class="sxs-lookup"><span data-stu-id="02dab-224">The state that exists before any packages are run on the current CDC group.</span></span> <span data-ttu-id="02dab-225">Это состояние также имеет место, если состояние CDC пусто.</span><span class="sxs-lookup"><span data-stu-id="02dab-225">This is also the state when the CDC state is empty.</span></span><br /><br /> <span data-ttu-id="02dab-226">Дополнительные сведения об операциях задачи «Управление CDC» см. в разделе [CDC Control Task](../control-flow/cdc-control-task.md).</span><span class="sxs-lookup"><span data-stu-id="02dab-226">For more information about CDC Control task operations, see [CDC Control Task](../control-flow/cdc-control-task.md).</span></span>|  
|<span data-ttu-id="02dab-227">1-ILSTART (начало начальной загрузки)</span><span class="sxs-lookup"><span data-stu-id="02dab-227">1-ILSTART (Initial-Load-Started)</span></span>|<span data-ttu-id="02dab-228">Это состояние, которое имеет место при запуске пакета начальной загрузки.</span><span class="sxs-lookup"><span data-stu-id="02dab-228">This is the state that exists when the initial load package starts.</span></span> <span data-ttu-id="02dab-229">Это происходит после вызова операции **MarkInitialLoadStart** в задаче «Управление CDC».</span><span class="sxs-lookup"><span data-stu-id="02dab-229">This occurs after the **MarkInitialLoadStart** operation call to the CDC Control task.</span></span><br /><br /> <span data-ttu-id="02dab-230">Дополнительные сведения об операциях задачи «Управление CDC» см. в разделе [CDC Control Task](../control-flow/cdc-control-task.md).</span><span class="sxs-lookup"><span data-stu-id="02dab-230">For more information about CDC Control task operations, see [CDC Control Task](../control-flow/cdc-control-task.md).</span></span>|  
|<span data-ttu-id="02dab-231">2- ILEND (завершение начальной загрузки)</span><span class="sxs-lookup"><span data-stu-id="02dab-231">2- ILEND (Initial-Load-Ended)</span></span>|<span data-ttu-id="02dab-232">Это состояние, которое имеет место при успешном завершении пакета начальной загрузки.</span><span class="sxs-lookup"><span data-stu-id="02dab-232">This is the state that exists when the initial load package ends successfully.</span></span> <span data-ttu-id="02dab-233">Это происходит после вызова операции MarkInitialLoadEnd в задаче «Управление CDC».</span><span class="sxs-lookup"><span data-stu-id="02dab-233">This occurs after the MarkInitialLoadEnd operation call to the CDC Control task.</span></span><br /><br /> <span data-ttu-id="02dab-234">Дополнительные сведения об операциях задачи «Управление CDC» см. в разделе [CDC Control Task](../control-flow/cdc-control-task.md).</span><span class="sxs-lookup"><span data-stu-id="02dab-234">For more information about CDC Control task operations, see [CDC Control Task](../control-flow/cdc-control-task.md).</span></span>|  
|<span data-ttu-id="02dab-235">3-ILUPDATE (обновление начальной загрузки)</span><span class="sxs-lookup"><span data-stu-id="02dab-235">3-ILUPDATE (Initial Load Update)</span></span>|<span data-ttu-id="02dab-236">Это состояние, которое имеет место после первого выполнения пакета обновления после начальной загрузки, пока продолжается обработка диапазона начальной обработки.</span><span class="sxs-lookup"><span data-stu-id="02dab-236">This is the state that exists after the first run of the Update package after the initial load while still processing the initial processing range.</span></span> <span data-ttu-id="02dab-237">Это происходит после вызова операции **GetProcessingRange** в задаче «Управление CDC».</span><span class="sxs-lookup"><span data-stu-id="02dab-237">This occurs after the **GetProcessingRange** operation call to the CDC control task.</span></span><br /><br /> <span data-ttu-id="02dab-238">При использовании столбца **_ $ Reprocess** ему присваивается значение 1, указывающее, что пакет может повторно обрабатывать строки, уже наданные в целевом объекте.</span><span class="sxs-lookup"><span data-stu-id="02dab-238">If using the **_$reprocessing** column, it is set to 1 to indicate that the package may be reprocessing rows already at the target.</span></span><br /><br /> <span data-ttu-id="02dab-239">Дополнительные сведения об операциях задачи «Управление CDC» см. в разделе [CDC Control Task](../control-flow/cdc-control-task.md).</span><span class="sxs-lookup"><span data-stu-id="02dab-239">For more information about CDC Control task operations, see [CDC Control Task](../control-flow/cdc-control-task.md).</span></span>|  
|<span data-ttu-id="02dab-240">4-TFEND (завершение обновления тонкого канала)</span><span class="sxs-lookup"><span data-stu-id="02dab-240">4-TFEND (Trickle-Feed-Update-Ended)</span></span>|<span data-ttu-id="02dab-241">Это состояние, ожидаемое для регулярного выполнения CDC.</span><span class="sxs-lookup"><span data-stu-id="02dab-241">This is the state expected for regular CDC runs.</span></span> <span data-ttu-id="02dab-242">Оно показывает, что предыдущее выполнение завершилось успешно и можно начинать новое выполнение с новым диапазоном обработки.</span><span class="sxs-lookup"><span data-stu-id="02dab-242">It indicates that the previous run completed successfully and that a new run with a new processing range can be started.</span></span>|  
|<span data-ttu-id="02dab-243">5 TFSTART (начало обновления тонкого канала)</span><span class="sxs-lookup"><span data-stu-id="02dab-243">5-TFSTART (Trickle-Feed-Update-Started)</span></span>|<span data-ttu-id="02dab-244">Это состояние, которое имеет место при последующих выполнениях пакета обновления после вызова операции **GetProcessingRange** в задаче «Управление CDC».</span><span class="sxs-lookup"><span data-stu-id="02dab-244">This is the state that exists on subsequent runs of the Update package after the **GetProcessingRange** operation call to the CDC control task.</span></span><br /><br /> <span data-ttu-id="02dab-245">Оно показывает, что регулярное выполнение CDC начато, но еще не завершено или не завершено верно (**MarkProcessedRange**).</span><span class="sxs-lookup"><span data-stu-id="02dab-245">This indicates that a regular CDC run is started, but is not finished or has not yet finished, cleanly (**MarkProcessedRange**).</span></span><br /><br /> <span data-ttu-id="02dab-246">Дополнительные сведения об операциях задачи «Управление CDC» см. в разделе [CDC Control Task](../control-flow/cdc-control-task.md).</span><span class="sxs-lookup"><span data-stu-id="02dab-246">For more information about CDC Control task operations, see [CDC Control Task](../control-flow/cdc-control-task.md).</span></span>|  
|<span data-ttu-id="02dab-247">6-TFREDO (повторная обработка обновлений тонкого канала)</span><span class="sxs-lookup"><span data-stu-id="02dab-247">6-TFREDO (Reprocessing-Trickle-Feed-Updates)</span></span>|<span data-ttu-id="02dab-248">Это состояние операции **GetProcessingRange** , наступающее после TFSTART.</span><span class="sxs-lookup"><span data-stu-id="02dab-248">This is the state on a **GetProcessingRange** that occurs after TFSTART.</span></span> <span data-ttu-id="02dab-249">Оно показывает, что предыдущее выполнение не завершилось успешно.</span><span class="sxs-lookup"><span data-stu-id="02dab-249">This indicates that the previous run did not complete successfully.</span></span><br /><br /> <span data-ttu-id="02dab-250">Если используется столбец __$reprocessing, он получает значение 1, чтобы показать, что пакет может повторно обрабатывать строки, уже находящиеся в целевой базе данных.</span><span class="sxs-lookup"><span data-stu-id="02dab-250">If using the __$reprocessing column, it is set to 1 to indicate that the package may be reprocessing rows already at the target.</span></span>|  
|<span data-ttu-id="02dab-251">7-ERROR</span><span class="sxs-lookup"><span data-stu-id="02dab-251">7-ERROR</span></span>|<span data-ttu-id="02dab-252">Группа CDC находится в состоянии ERROR.</span><span class="sxs-lookup"><span data-stu-id="02dab-252">The CDC group is in an ERROR state.</span></span>|  
  
 <span data-ttu-id="02dab-253">Далее представлена диаграмма состояний для компонентов CDC.</span><span class="sxs-lookup"><span data-stu-id="02dab-253">The following is the state diagram for the CDC components.</span></span> <span data-ttu-id="02dab-254">Состояние ERROR наступает, если обнаруживается непредвиденное состояние.</span><span class="sxs-lookup"><span data-stu-id="02dab-254">An ERROR state is reached when a state is reached that is not expected.</span></span> <span data-ttu-id="02dab-255">Ожидаемые состояния показаны на следующей диаграмме. Состояние ERROR не показано.</span><span class="sxs-lookup"><span data-stu-id="02dab-255">The expected states are illustrated in the diagram below, however the diagram does not show the ERROR state.</span></span>  
  
 <span data-ttu-id="02dab-256">Например, в конце пакета начальной загрузки, когда состояние должно получить значение ILEND, но обнаруживается состояние TFSTART, группа CDC переходит в состояние ошибки, а пакет обновления тонкого канала не выполняется (выполняется пакет начальной загрузки).</span><span class="sxs-lookup"><span data-stu-id="02dab-256">For example, at the end of an initial load package, when trying to set the state to ILEND, if the state is TFSTART then the CDC group is in an error state and the Trickle-Feed Update package does not run (the Initial Load package does run).</span></span>  
  
 <span data-ttu-id="02dab-257">![Диаграмма состояний](../media/statediagram.gif "Диаграмма состояния")</span><span class="sxs-lookup"><span data-stu-id="02dab-257">![State Diagram](../media/statediagram.gif "State Diagram")</span></span>  
  
 <span data-ttu-id="02dab-258">После успешного выполнения пакета начальной загрузки пакет обновления тонкого канала многократно выполняется по заранее определенному расписанию для обработки изменений в исходных таблицах.</span><span class="sxs-lookup"><span data-stu-id="02dab-258">Once the Initial Load package runs successfully, the Trickle-Feed Update package runs repeatedly under a predetermined schedule to process changes to the source tables.</span></span> <span data-ttu-id="02dab-259">Каждое выполнение пакета обновления тонкого канала означает выполнение CDC.</span><span class="sxs-lookup"><span data-stu-id="02dab-259">Each run of the Trickle-Feed Update package is a CDC run.</span></span>  
  
## <a name="in-this-section"></a><span data-ttu-id="02dab-260">В этом разделе</span><span class="sxs-lookup"><span data-stu-id="02dab-260">In This Section</span></span>  
  
-   [<span data-ttu-id="02dab-261">CDC-источник</span><span class="sxs-lookup"><span data-stu-id="02dab-261">CDC Source</span></span>](cdc-source.md)  
  
-   [<span data-ttu-id="02dab-262">Разделитель CDC</span><span class="sxs-lookup"><span data-stu-id="02dab-262">CDC Splitter</span></span>](cdc-splitter.md)  
  
## <a name="related-tasks"></a><span data-ttu-id="02dab-263">Связанные задачи</span><span class="sxs-lookup"><span data-stu-id="02dab-263">Related Tasks</span></span>  
  
-   [<span data-ttu-id="02dab-264">Выбор направления потока CDC в соответствии с типом изменения</span><span class="sxs-lookup"><span data-stu-id="02dab-264">Direct the CDC Stream According to the Type of Change</span></span>](direct-the-cdc-stream-according-to-the-type-of-change.md)  
  
-   [<span data-ttu-id="02dab-265">Определение переменной состояния</span><span class="sxs-lookup"><span data-stu-id="02dab-265">Define a State Variable</span></span>](define-a-state-variable.md)  
  
## <a name="related-content"></a><span data-ttu-id="02dab-266">См. также</span><span class="sxs-lookup"><span data-stu-id="02dab-266">Related Content</span></span>  
  
-   <span data-ttu-id="02dab-267">Запись в блоге [CDC в SSIS для SQL Server 2012](https://www.mattmasson.com/2011/12/cdc-in-ssis-for-sql-server-2012-2/)на сайте mattmasson.com.</span><span class="sxs-lookup"><span data-stu-id="02dab-267">Blog entry, [CDC in SSIS for SQL Server 2012](https://www.mattmasson.com/2011/12/cdc-in-ssis-for-sql-server-2012-2/), on mattmasson.com.</span></span>  
  
-   <span data-ttu-id="02dab-268">Запись в блоге [Служба CDC для Oracle в SQL Server 2012](https://go.microsoft.com/fwlink/?LinkId=247827), касающуюся параметра службы CDC, см. на сайте blogs.msdn.com.</span><span class="sxs-lookup"><span data-stu-id="02dab-268">Blog entry on setting up the CDC service, [CDC for Oracle in SQL Server 2012](https://go.microsoft.com/fwlink/?LinkId=247827), on blogs.msdn.com.</span></span>  
  
-   <span data-ttu-id="02dab-269">Техническую статью [Установка системы отслеживания измененных данных Microsoft SQL Server 2012 для Oracle компании Attunity](https://go.microsoft.com/fwlink/?LinkId=252958)см. на сайте social.technet.microsoft.com.</span><span class="sxs-lookup"><span data-stu-id="02dab-269">Technical article, [Installing Microsoft SQL Server 2012 Change Data Capture for Oracle by Attunity](https://go.microsoft.com/fwlink/?LinkId=252958), on social.technet.microsoft.com.</span></span>  
  
-   <span data-ttu-id="02dab-270">Техническую статью [Устранение неполадок в конфигурации системы отслеживания измененных данных Майкрософт для Oracle компании Attunity](https://go.microsoft.com/fwlink/?LinkId=252960)см. на сайте social.technet.microsoft.com.</span><span class="sxs-lookup"><span data-stu-id="02dab-270">Technical article, [Troubleshoot Configuration Issues in Microsoft Change Data Capture for Oracle by Attunity](https://go.microsoft.com/fwlink/?LinkId=252960), on social.technet.microsoft.com.</span></span>  
  
-   <span data-ttu-id="02dab-271">Техническую статью [Устранение неполадок в конфигурации системы отслеживания измененных данных Майкрософт для Oracle компании Attunity](https://go.microsoft.com/fwlink/?LinkId=252961)см. на сайте social.technet.microsoft.com.</span><span class="sxs-lookup"><span data-stu-id="02dab-271">Technical article, [Troubleshoot CDC Instance Errors in Microsoft Change Data Capture for Oracle by Attunity](https://go.microsoft.com/fwlink/?LinkId=252961), on social.technet.microsoft.com.</span></span>  
  
-   <span data-ttu-id="02dab-272">Видеоролик [CDC для баз данных Oracle, использующих службы SQL Server Integration Services 2012 (видео по SQL Server)](https://technet.microsoft.com/sqlserver/jj218898)на сайте technet.microsoft.com.</span><span class="sxs-lookup"><span data-stu-id="02dab-272">Video, [CDC for Oracle Databases using SQL Server Integration Services 2012 (SQL Server Video)](https://technet.microsoft.com/sqlserver/jj218898), on technet.microsoft.com.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="02dab-273">См. также:</span><span class="sxs-lookup"><span data-stu-id="02dab-273">See Also</span></span>  
 [<span data-ttu-id="02dab-274">CDC Control Task</span><span class="sxs-lookup"><span data-stu-id="02dab-274">CDC Control Task</span></span>](../control-flow/cdc-control-task.md)  
  
  
