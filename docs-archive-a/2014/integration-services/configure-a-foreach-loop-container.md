---
title: Настройка контейнера «цикл по каждому элементу» | Документация Майкрософт
ms.custom: ''
ms.date: 08/22/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
helpviewer_keywords:
- Foreach Loop containers
- containers [Integration Services], Foreach Loop
ms.assetid: 519c6f96-5e1f-47d2-b96a-d49946948c25
author: chugugrace
ms.author: chugu
ms.openlocfilehash: 85fb399f51e22e091fac9b1d8d332b9a12e7d77e
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87655882"
---
# <a name="configure-a-foreach-loop-container"></a>Настройка контейнера "цикл по каждому элементу"
  Эта процедура описывает принципы настройки контейнера «цикл по каждому элементу», включая выражения свойств на уровнях перечислителя и контейнера.  
  
### <a name="to-configure-the-foreach-loop-container"></a>Настройка контейнера «цикл по каждому элементу»  
  
1.  В среде [!INCLUDE[ssBIDevStudioFull](../includes/ssbidevstudiofull-md.md)]откройте проект служб [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] , содержащий необходимый пакет.  
  
2.  Перейдите на вкладку **Поток управления** и дважды щелкните "Цикл по каждому элементу".  
  
3.  В диалоговом окне **Редактор циклов по каждому элементу** нажмите **Общие** и при необходимости измените имя и описание контейнера «цикл по каждому элементу».  
  
4.  Щелкните **Коллекция** и выберите тип перечислителя из списка **Перечислитель** .  
  
5.  Укажите перечислитель и установите параметры перечислителя, как показано далее.  
  
    -   Чтобы использовать перечислитель с циклом по каждому файлу, укажите папку, в которой содержатся необходимые для перечисления файлы, фильтр для имени и типа файла и укажите, нужно ли возвращать полное имя файла. Также укажите, нужно ли для поиска файлов обращаться ко вложенным папкам.  
  
    -   Чтобы использовать перечислитель по каждому элементу, нажмите кнопку **Столбцы**и в диалоговом окне **Столбцы For Each Item** для добавления столбцов нажмите кнопку **Добавить** . Выберите тип данных из списка **Тип данных** для каждого столбца и нажмите кнопку **ОК**.  
  
         Введите значения в столбцах или выберите их из списков.  
  
        > [!NOTE]  
        >  Чтобы добавить новую строку, щелкните в любом месте за пределами ячейки, в которую было введено значение.  
  
        > [!NOTE]  
        >  Если значение несовместимо с типом данных столбца, текст будет выделен.  
  
    -   Чтобы использовать перечислитель ADO по каждой строке, выберите существующую переменную или нажмите **Создать переменную** в списке **Переменная источника объекта ADO** , чтобы указать переменную, содержащую необходимое для перечисления имя объекта ADO, и выберите параметр режима перечисления.  
  
         Если создается новая переменная, установите ее свойства в диалоговом окне **Добавить переменную** .  
  
    -   Чтобы использовать перечислитель ADO.NET по набору строк схемы, выберите существующее соединение ADO.NET или нажмите **Создать соединение** в списке **Соединение** , а затем выберите схему.  
  
         При необходимости нажмите кнопку **Задать ограничения** и выберите ограничения схемы, переменную, содержащую значение ограничения, или введите значение ограничения, а затем нажмите кнопку **ОК**.  
  
    -   Чтобы использовать перечислитель по объекту из переменной, выберите переменную из списка **Переменные** .  
  
    -   Чтобы использовать перечислитель по набору узлов, щелкните DocumentSourceType, выберите из списка тип источника, а затем щелкните DocumentSource. В зависимости от значения, выбранного для DocumentSourceType, выберите из списка переменную или подключение файла, создайте новую переменную или подключение файла или введите источник XML в **Редакторе исходного текста документа**.  
  
         Затем щелкните EnumerationType и выберите тип перечисления из списка. Если значением EnumerationType является **Navigator, Node или NodeText**, щелкните OuterXPathStringSourceType и выберите тип источника, затем щелкните OuterXPathString. В зависимости от значения, установленного для OuterXPathStringSourceType, выберите из списка переменную или подключение файла, создайте новую переменную или подключение файла или введите строку для внешнего выражения языка пути XML (XPath).  
  
         Если значением EnumerationType является **ElementCollection**, задайте OuterXPathStringSourceType и OuterXPathString, как описано выше. Затем щелкните InnerElementType и выберите тип перечисления для внутренних элементов, потом щелкните InnerXPathStringSourceType. В зависимости от значения, установленного для InnerXPathStringSourceType, выберите переменную или подключение файла или введите строку для внутреннего выражения XPath.  
  
    -   Чтобы использовать перечислитель по объектам SMO, выберите существующее соединение ADO.NET или нажмите **Создать соединение** в списке **Соединения** , затем либо введите строку для использования, либо нажмите **Обзор**. Если выбран **Обзор**, в диалоговом окне **Выбор перечисления SMO** выберите необходимый для перечисления тип объекта и тип перечисления, а затем нажмите кнопку **ОК**.  
  
6.  При необходимости нажмите кнопку обзора **(…)** в текстовом поле **Выражения** на странице **Коллекция**, чтобы создать выражения, при помощи которых происходит обновление значений свойств. Дополнительные сведения см. в разделе [Добавление или изменение выражение свойства](expressions/add-or-change-a-property-expression.md).  
  
    > [!NOTE]  
    >   Свойства, представленные в списке **Свойства** , меняются в зависимости от перечислителя.  
  
7.  При необходимости нажмите **Сопоставления переменной** для сопоставления свойств объектов со значениями коллекции, затем выполните следующие действия.  
  
    1.  В списке **Переменные** выберите переменную или щелкните **\<New Variable>** , чтобы создать ее.  
  
    2.  Если создается новая переменная, установите ее свойства в диалоговом окне **Добавить переменные** и нажмите кнопку **ОК**.  
  
    3.  При использовании перечислителя по каждому элементу можно обновить значение индекса в списке **Индекс** .  
  
        > [!NOTE]  
        >  Значение индекса показывает, какой столбец в элементе нужно сопоставить с переменной. Только перечислитель по каждому элементу может использовать значение индекса, отличное от 0.  
  
8.  При необходимости нажмите **Выражения** и на странице **Выражения** создайте выражения свойств для свойств контейнера «цикл по каждому элементу». Дополнительные сведения см. в разделе [Добавление или изменение выражение свойства](expressions/add-or-change-a-property-expression.md).  
  
9. Нажмите кнопку **ОК**.  
  
## <a name="see-also"></a>См. также:  
 [Контейнер «цикл по каждому элементу»](control-flow/foreach-loop-container.md)  
  
  
