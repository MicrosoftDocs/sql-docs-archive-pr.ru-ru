---
title: Настройка службы Integration Services в качестве ресурса кластера | Документация Майкрософт
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
ms.assetid: 367835aa-9855-4791-a989-b3d08402ad4c
author: chugugrace
ms.author: chugu
ms.openlocfilehash: f55b07f5587720130646b9637b91afbb8f179998
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87738636"
---
# <a name="configure-the-integration-services-service-as-a-cluster-resource"></a><span data-ttu-id="761d2-102">Настройка служб Integration Services на работу в качестве ресурса кластера</span><span class="sxs-lookup"><span data-stu-id="761d2-102">Configure the Integration Services Service as a Cluster Resource</span></span>
  <span data-ttu-id="761d2-103">Этот раздел содержит инструкции по настройке службы [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] в качестве ресурса кластера, которые могут пригодиться клиентам, считающим, что преимущества данной конфигурации перевешивают ее недостатки.</span><span class="sxs-lookup"><span data-stu-id="761d2-103">For those customers who conclude that the advantages of configuring the [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service as a cluster resource outweigh the disadvantages, this section contains the necessary configuration instructions.</span></span> <span data-ttu-id="761d2-104">Тем не менее корпорация [!INCLUDE[msCoName](../includes/msconame-md.md)] не рекомендует настраивать службу [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] в качестве ресурса кластера.</span><span class="sxs-lookup"><span data-stu-id="761d2-104">However, [!INCLUDE[msCoName](../includes/msconame-md.md)] does not recommend that the [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service be configured as a cluster resource.</span></span>  
  
 <span data-ttu-id="761d2-105">Чтобы настроить службу [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] в качестве ресурса кластера, необходимо выполнить следующие действия.</span><span class="sxs-lookup"><span data-stu-id="761d2-105">To configure the [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service as a cluster resource, you need to complete the following tasks.</span></span>  
  
-   <span data-ttu-id="761d2-106">Установите в кластере службу [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="761d2-106">Install [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] on a cluster.</span></span>  
  
     <span data-ttu-id="761d2-107">Чтобы установить службу [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] в кластере, следует установить [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] на каждом узле в кластере.</span><span class="sxs-lookup"><span data-stu-id="761d2-107">To install [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] on a cluster, you must install [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] on each node in the cluster.</span></span>  
  
-   <span data-ttu-id="761d2-108">Настройте службу [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] на работу в качестве ресурса кластера.</span><span class="sxs-lookup"><span data-stu-id="761d2-108">Configure [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] as a cluster resource.</span></span>  
  
     <span data-ttu-id="761d2-109">После того как службы Integration Services были установлены на все узлы в кластере, необходимо провести их настройку в качестве ресурса кластера.</span><span class="sxs-lookup"><span data-stu-id="761d2-109">With Integration Services installed on each node in the cluster, you need to configure Integration Services as a cluster resource.</span></span> <span data-ttu-id="761d2-110">При настройке службы [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] в качестве ресурса кластера, можно добавить эту службу в ту же группу ресурсов, что и компонент [!INCLUDE[ssDEnoversion](../includes/ssdenoversion-md.md)], либо в другую группу.</span><span class="sxs-lookup"><span data-stu-id="761d2-110">When you configure the [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service as a cluster resource, you can add the service to the same resource group as the [!INCLUDE[ssDEnoversion](../includes/ssdenoversion-md.md)], or to a different group.</span></span> <span data-ttu-id="761d2-111">В следующей таблице приводятся возможные преимущества и недостатки для разных вариантов выбора группы ресурсов.</span><span class="sxs-lookup"><span data-stu-id="761d2-111">The following table describes the possible advantages and disadvantages in selecting a resource group.</span></span>  
  
    |<span data-ttu-id="761d2-112">Службы Integration Services и SQL Server находятся в одной группе ресурсов</span><span class="sxs-lookup"><span data-stu-id="761d2-112">When Integration Services and SQL Server are in the same resource group</span></span>|<span data-ttu-id="761d2-113">Службы Integration Services и SQL Server находятся в разных группах ресурсов</span><span class="sxs-lookup"><span data-stu-id="761d2-113">When Integration Services and SQL Server are in different resource groups</span></span>|  
    |-----------------------------------------------------------------------------|-------------------------------------------------------------------------------|  
    |<span data-ttu-id="761d2-114">Клиентские компьютеры могут использовать среду [!INCLUDE[ssManStudioFull](../includes/ssmanstudiofull-md.md)] для управления пакетами, хранящимися в базе данных msdb, поскольку компонент [!INCLUDE[ssDEnoversion](../includes/ssdenoversion-md.md)] и служба [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] выполняются на одном виртуальном сервере.</span><span class="sxs-lookup"><span data-stu-id="761d2-114">Client computers can use [!INCLUDE[ssManStudioFull](../includes/ssmanstudiofull-md.md)] to manage packages stored in the msdb database because both the [!INCLUDE[ssDEnoversion](../includes/ssdenoversion-md.md)] and [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service are running on the same virtual server.</span></span> <span data-ttu-id="761d2-115">Такая конфигурация позволяет избежать проблем делегирования, возникающих в двухшаговом сценарии.</span><span class="sxs-lookup"><span data-stu-id="761d2-115">This configuration avoids the delegation issues of the double-hop scenario.</span></span>|<span data-ttu-id="761d2-116">Среду [!INCLUDE[ssManStudioFull](../includes/ssmanstudiofull-md.md)] на клиентских компьютерах нельзя использовать для управления пакетами, хранящимися в базе данных msdb.</span><span class="sxs-lookup"><span data-stu-id="761d2-116">Client computers cannot use [!INCLUDE[ssManStudioFull](../includes/ssmanstudiofull-md.md)] to manage packages stored in the msdb database.</span></span> <span data-ttu-id="761d2-117">Клиент может соединяться с виртуальным сервером, на котором запущены службы [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="761d2-117">The client can connect to the virtual server on which the [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service is running.</span></span> <span data-ttu-id="761d2-118">Однако этот компьютер не может делегировать учетные данные виртуальному серверу, на котором запущен [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="761d2-118">However, that computer cannot delegate the user's credentials to the virtual server on which [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] is running.</span></span> <span data-ttu-id="761d2-119">Такой сценарий называется «двойным прыжком».</span><span class="sxs-lookup"><span data-stu-id="761d2-119">This is known as a double-hop scenario.</span></span>|  
    |<span data-ttu-id="761d2-120">Служба [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] конкурирует с другими службами [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] за ресурсы ЦП и другие ресурсы.</span><span class="sxs-lookup"><span data-stu-id="761d2-120">The [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service competes with other [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] services for CPU and other computer resources.</span></span>|<span data-ttu-id="761d2-121">Служба [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] не конкурирует с другими службами [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] за ресурсы ЦП и другие ресурсы, поскольку разные группы ресурсов установлены на разных узлах.</span><span class="sxs-lookup"><span data-stu-id="761d2-121">The [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service does not compete with other [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] services for CPU and other computer resources because the different resource groups are configured on different nodes.</span></span>|  
    |<span data-ttu-id="761d2-122">Загрузка и сохранение пакетов в базу данных msdb происходит быстрее и создает меньше сетевого трафика, поскольку обе службы выполняются на одном компьютере.</span><span class="sxs-lookup"><span data-stu-id="761d2-122">The loading and saving of packages to the msdb database is faster and generates less network traffic because both services are running on the same computer.</span></span>|<span data-ttu-id="761d2-123">Загрузка и сохранение пакетов в базе данных msdb могут выполняться медленнее и создавать больший сетевой трафик.</span><span class="sxs-lookup"><span data-stu-id="761d2-123">The loading and saving of packages to the msdb database might be slower and generate more network traffic.</span></span>|  
    |<span data-ttu-id="761d2-124">Обе службы одновременно в сети или вне сети.</span><span class="sxs-lookup"><span data-stu-id="761d2-124">Both services are online or offline at the same time.</span></span>|<span data-ttu-id="761d2-125">Служба [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] может быть в сети в то время как компонент находится [!INCLUDE[ssDEnoversion](../includes/ssdenoversion-md.md)] вне сети.</span><span class="sxs-lookup"><span data-stu-id="761d2-125">The [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service might be online while the [!INCLUDE[ssDEnoversion](../includes/ssdenoversion-md.md)] is offline.</span></span> <span data-ttu-id="761d2-126">Вследствие этого пакеты, хранящиеся в базе данных msdb компонента [!INCLUDE[ssDEnoversion](../includes/ssdenoversion-md.md)] , будут недоступны.</span><span class="sxs-lookup"><span data-stu-id="761d2-126">Thus, the packages stored in the msdb database of the [!INCLUDE[ssDEnoversion](../includes/ssdenoversion-md.md)] are unavailable.</span></span>|  
    |<span data-ttu-id="761d2-127">Служба [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] не может быть быстро перенесена на другой узел при необходимости.</span><span class="sxs-lookup"><span data-stu-id="761d2-127">The [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service cannot be moved quickly to another node if it is required.</span></span>|<span data-ttu-id="761d2-128">Служба [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] при необходимости может быть быстрее перенесена на другой узел.</span><span class="sxs-lookup"><span data-stu-id="761d2-128">The [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service can be moved more quickly to another node if it is required.</span></span>|  
  
     <span data-ttu-id="761d2-129">После принятия решения относительно того, в какую группу ресурсов стоит добавить службу [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)], необходимо настроить службу [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] на работу в качестве ресурса кластера в этой группе.</span><span class="sxs-lookup"><span data-stu-id="761d2-129">After you have decided to which resource group you will add [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)], you have to configure [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] as a cluster resource in that group.</span></span>  
  
-   <span data-ttu-id="761d2-130">Настройте службу [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] и хранилище пакетов.</span><span class="sxs-lookup"><span data-stu-id="761d2-130">Configure the [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service and package store.</span></span>  
  
     <span data-ttu-id="761d2-131">После того как служба [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] была настроена на работу в качестве ресурса кластера, следует произвести изменение расположения и содержимого файла конфигурации службы [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] на каждом узле в кластере.</span><span class="sxs-lookup"><span data-stu-id="761d2-131">Having configured [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] as a cluster resource, you must modify the location and the content of the configuration file for the [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service on each node in the cluster.</span></span> <span data-ttu-id="761d2-132">После этих изменений и файл конфигурации, и хранилище пакетов будут доступны для всех узлов при отработке отказа.</span><span class="sxs-lookup"><span data-stu-id="761d2-132">These modifications make both the configuration file and the package store available to all nodes if there is a failover.</span></span> <span data-ttu-id="761d2-133">После изменения расположения и содержимого файла конфигурации следует перевести службу в оперативный режим.</span><span class="sxs-lookup"><span data-stu-id="761d2-133">After you modify the location and content of the configuration file, you have to bring the service online.</span></span>  
  
-   <span data-ttu-id="761d2-134">Переведите службу [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] в режим в сети в качестве ресурса кластера.</span><span class="sxs-lookup"><span data-stu-id="761d2-134">Bring the [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service online as a cluster resource.</span></span>  
  
 <span data-ttu-id="761d2-135">После настройки служб [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] в кластере или на любом сервере может возникнуть необходимость настроить разрешения DCOM прежде, чем можно будет подключиться к службе с клиентского компьютера.</span><span class="sxs-lookup"><span data-stu-id="761d2-135">After configuring the [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service on a cluster, or on any server, you might have to configure DCOM permissions before you can connect to the service from a client computer.</span></span> <span data-ttu-id="761d2-136">Дополнительные сведения см. в разделе [Подключение к удаленному серверу служб Integration Services (службы SSIS Service)](../../2014/integration-services/connect-to-a-remote-integration-services-server-ssis-service.md).</span><span class="sxs-lookup"><span data-stu-id="761d2-136">For more information, see [Connect to a Remote Integration Services Server &#40;SSIS Service&#41;](../../2014/integration-services/connect-to-a-remote-integration-services-server-ssis-service.md).</span></span>  
  
 <span data-ttu-id="761d2-137">Служба [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] не может делегировать учетные данные.</span><span class="sxs-lookup"><span data-stu-id="761d2-137">The [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service cannot delegate credentials.</span></span> <span data-ttu-id="761d2-138">Следовательно, нельзя использовать среду [!INCLUDE[ssManStudio](../includes/ssmanstudio-md.md)] для управления пакетами, хранящимися в базе данных msdb, в том случае, если выполняются следующие условия.</span><span class="sxs-lookup"><span data-stu-id="761d2-138">Therefore, you cannot use [!INCLUDE[ssManStudio](../includes/ssmanstudio-md.md)] to manage packages stored in the msdb database when the following conditions are true:</span></span>  
  
-   <span data-ttu-id="761d2-139">Служба [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] и [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] выполняются на отдельных серверах или виртуальных серверах.</span><span class="sxs-lookup"><span data-stu-id="761d2-139">The [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service and [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] are running on separate servers or virtual servers.</span></span>  
  
-   <span data-ttu-id="761d2-140">Клиент, запускающий среду [!INCLUDE[ssManStudioFull](../includes/ssmanstudiofull-md.md)] , находится на третьем компьютером.</span><span class="sxs-lookup"><span data-stu-id="761d2-140">The client that is running [!INCLUDE[ssManStudioFull](../includes/ssmanstudiofull-md.md)] is a third computer.</span></span>  
  
 <span data-ttu-id="761d2-141">Клиент может соединяться с виртуальным сервером, на котором запущены службы [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="761d2-141">The client can connect to the virtual server on which the [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service is running.</span></span> <span data-ttu-id="761d2-142">Однако этот компьютер не может делегировать учетные данные виртуальному серверу, на котором запущен [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="761d2-142">However, that computer cannot delegate the user's credentials to the virtual server on which [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] is running.</span></span> <span data-ttu-id="761d2-143">Такой сценарий называется «двойным прыжком».</span><span class="sxs-lookup"><span data-stu-id="761d2-143">This is known as a double-hop scenario.</span></span>  
  
### <a name="to-install-integration-services-on-a-cluster"></a><span data-ttu-id="761d2-144">Установка служб Integration Services на кластере</span><span class="sxs-lookup"><span data-stu-id="761d2-144">To Install Integration Services on a Cluster</span></span>  
  
1.  <span data-ttu-id="761d2-145">Установите и настройте кластер, содержащий один или несколько узлов.</span><span class="sxs-lookup"><span data-stu-id="761d2-145">Install and configure a cluster with one or more nodes.</span></span>  
  
2.  <span data-ttu-id="761d2-146">Установите службы, поддерживающие работу в кластере, например компонент [!INCLUDE[ssDEnoversion](../includes/ssdenoversion-md.md)](необязательно).</span><span class="sxs-lookup"><span data-stu-id="761d2-146">(Optional) Install clustered services, such as the [!INCLUDE[ssDEnoversion](../includes/ssdenoversion-md.md)].</span></span>  
  
3.  <span data-ttu-id="761d2-147">Установите службы [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] на каждом из узлов.</span><span class="sxs-lookup"><span data-stu-id="761d2-147">Install [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] on each node of the cluster.</span></span>  
  
### <a name="to-configure-integration-services-as-a-cluster-resource"></a><span data-ttu-id="761d2-148">Настройка служб Integration Services в качестве ресурса кластера</span><span class="sxs-lookup"><span data-stu-id="761d2-148">To Configure Integration Services as a Cluster Resource</span></span>  
  
1.  <span data-ttu-id="761d2-149">Откройте **администратор кластера**.</span><span class="sxs-lookup"><span data-stu-id="761d2-149">Open the **Cluster Administrator**.</span></span>  
  
2.  <span data-ttu-id="761d2-150">В дереве консоли разверните папку «Группы».</span><span class="sxs-lookup"><span data-stu-id="761d2-150">In the console tree, select the Groups folder.</span></span>  
  
3.  <span data-ttu-id="761d2-151">На панели результатов выберите группу, к которой планируется добавить службу [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="761d2-151">In the results pane, select the group to which you plan to add [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)]:</span></span>  
  
    -   <span data-ttu-id="761d2-152">Чтобы добавить службу Integrations Services в качестве ресурса кластера в ту же группу ресурсов, что и [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)], выберите группу, к которой принадлежит [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="761d2-152">To add Integrations Services as a cluster resource to the same resource group as [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)], select the group to which [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] belongs.</span></span>  
  
    -   <span data-ttu-id="761d2-153">Чтобы добавить службу Integrations Services в качестве ресурса кластера в группу ресурсов, в которую не входит [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)], выберите группу, к которой [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] не принадлежит.</span><span class="sxs-lookup"><span data-stu-id="761d2-153">To add Integrations Services as a cluster resource to a different group than [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)], select a group other than the group to which [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] belongs.</span></span>  
  
4.  <span data-ttu-id="761d2-154">В меню **Файл** выберите пункт **Создать**, а затем **Ресурс**.</span><span class="sxs-lookup"><span data-stu-id="761d2-154">On the **File** menu, point to **New**, and then click **Resource**.</span></span>  
  
5.  <span data-ttu-id="761d2-155">На странице **Создание ресурса** в мастере ресурсов введите имя и выберите **тип службы** **"Общая служба"** .</span><span class="sxs-lookup"><span data-stu-id="761d2-155">On the **New Resource** page of the Resource Wizard, type a name and select **"Generic Service"** as the **Service Type**.</span></span> <span data-ttu-id="761d2-156">Не изменяйте значение поля **Группа**.</span><span class="sxs-lookup"><span data-stu-id="761d2-156">Do not change the value of **Group**.</span></span> <span data-ttu-id="761d2-157">Щелкните **Далее**.</span><span class="sxs-lookup"><span data-stu-id="761d2-157">Click **Next**.</span></span>  
  
6.  <span data-ttu-id="761d2-158">На странице **Возможные владельцы** добавьте или удалите узлы кластера, которые являются возможными владельцами ресурса.</span><span class="sxs-lookup"><span data-stu-id="761d2-158">On the **Possible Owners** page, add or remove the nodes of the cluster as the possible owners of the resource.</span></span> <span data-ttu-id="761d2-159">Щелкните **Далее**.</span><span class="sxs-lookup"><span data-stu-id="761d2-159">Click **Next**.</span></span>  
  
7.  <span data-ttu-id="761d2-160">Чтобы добавить зависимости на странице **Зависимости** , выберите ресурс в списке **Доступные ресурсы**, а затем нажмите **Добавить**.</span><span class="sxs-lookup"><span data-stu-id="761d2-160">To add dependencies, on the **Dependencies** page, select a resource under **Available resources**, and then click **Add**.</span></span> <span data-ttu-id="761d2-161">При отработке отказа как [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] , так и общий диск, на котором сохраняются пакеты служб [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] , должны быть переведены в режим "в сети" раньше, чем служба [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="761d2-161">In case of a failover, both [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] and the shared disk that stores [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] packages should come back online before [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] is brought online.</span></span> <span data-ttu-id="761d2-162">После выбора зависимостей нажмите кнопку **Далее**.</span><span class="sxs-lookup"><span data-stu-id="761d2-162">After you have selected the dependencies, click **Next**.</span></span>  
  
     <span data-ttu-id="761d2-163">Дополнительные сведения см. в разделе [Добавление зависимостей к ресурсу SQL Server](../sql-server/failover-clusters/windows/add-dependencies-to-a-sql-server-resource.md).</span><span class="sxs-lookup"><span data-stu-id="761d2-163">For more information, see [Add Dependencies to a SQL Server Resource](../sql-server/failover-clusters/windows/add-dependencies-to-a-sql-server-resource.md).</span></span>  
  
8.  <span data-ttu-id="761d2-164">На странице **Общие параметры службы** введите в качестве имени службы значение **MsDtsServer** .</span><span class="sxs-lookup"><span data-stu-id="761d2-164">On the **Generic Service Parameters** page, enter **MsDtsServer** as the name of the service.</span></span> <span data-ttu-id="761d2-165">Щелкните **Далее**.</span><span class="sxs-lookup"><span data-stu-id="761d2-165">Click **Next**.</span></span>  
  
9. <span data-ttu-id="761d2-166">На странице **Репликация реестра** нажмите **Добавить** , чтобы добавить раздел реестра, который идентифицирует расположение файла конфигурации для службы [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="761d2-166">On the **Registry Replication** page, click **Add** to add the registry key that identifies the location of the configuration file for the [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service.</span></span> <span data-ttu-id="761d2-167">Файл должен быть расположен на общем диске, находящемся в той же группе ресурсов, что и служба [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="761d2-167">This file must be located on a shared disk that is in the same resource group as the [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service.</span></span>  
  
10. <span data-ttu-id="761d2-168">В диалоговом окне **Раздел реестра** введите **SOFTWARE\Microsoft\Microsoft SQL Server\100\SSIS\ServiceConfigFile**.</span><span class="sxs-lookup"><span data-stu-id="761d2-168">In the **Registry Key** dialog box, type **SOFTWARE\Microsoft\Microsoft SQL Server\100\SSIS\ServiceConfigFile**.</span></span> <span data-ttu-id="761d2-169">Нажмите кнопку **ОК**, а затем — кнопку **Готово**.</span><span class="sxs-lookup"><span data-stu-id="761d2-169">Click **OK**, and then click **Finish**.</span></span>  
  
     <span data-ttu-id="761d2-170">Теперь служба [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] добавлена как ресурс кластера.</span><span class="sxs-lookup"><span data-stu-id="761d2-170">The [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service has now been added as a cluster resource.</span></span>  
  
### <a name="to-configure-the-integration-services-service-and-package-store"></a><span data-ttu-id="761d2-171">Настройка службы Integration Services и хранилища пакетов</span><span class="sxs-lookup"><span data-stu-id="761d2-171">To Configure the Integration Services Service and Package Store</span></span>  
  
1.  <span data-ttu-id="761d2-172">Найдите файл конфигурации %ProgramFiles%\Microsoft SQL Server\100\DTS\Binn\MsDtsSrvr.ini.xml.</span><span class="sxs-lookup"><span data-stu-id="761d2-172">Locate the configuration file at %ProgramFiles%\Microsoft SQL Server\100\DTS\Binn\MsDtsSrvr.ini.xml.</span></span> <span data-ttu-id="761d2-173">Скопируйте его на общий диск той группы, в которую была добавлена служба [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="761d2-173">Copy it to the shared disk for the group to which you added the [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service.</span></span>  
  
2.  <span data-ttu-id="761d2-174">Создайте на общем диске новую папку с именем **Packages** , которая будет служить хранилищем пакетов.</span><span class="sxs-lookup"><span data-stu-id="761d2-174">On the shared disk, create a new folder named **Packages** to serve as the package store.</span></span> <span data-ttu-id="761d2-175">Предоставьте подходящим группам и пользователям разрешения на просмотр содержимого и на запись в созданную папку.</span><span class="sxs-lookup"><span data-stu-id="761d2-175">Grant List Folders and Write permissions on the new folder to appropriate users and groups.</span></span>  
  
3.  <span data-ttu-id="761d2-176">Откройте файл конфигурации с общего диска в редакторе текста или XML.</span><span class="sxs-lookup"><span data-stu-id="761d2-176">On the shared disk, open the configuration file in a text or XML editor.</span></span> <span data-ttu-id="761d2-177">Измените значение элемента `ServerName`, указав имя виртуального [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)], относящегося к той же группе ресурсов.</span><span class="sxs-lookup"><span data-stu-id="761d2-177">Change the value of the `ServerName` element to the name of the virtual [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] that is in the same resource group.</span></span>  
  
4.  <span data-ttu-id="761d2-178">Измените значение `StorePath` элемента на полный путь к папке **packages** , созданной на общем диске на предыдущем шаге.</span><span class="sxs-lookup"><span data-stu-id="761d2-178">Change the value of the `StorePath` element to the fully-qualified path of the **Packages** folder created on the shared disk in a previous step.</span></span>  
  
5.  <span data-ttu-id="761d2-179">Измените значение **HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Microsoft SQL Server\100\SSIS\ServiceConfigFile** в реестре, указав полный путь и имя файла конфигурации службы на общем диске.</span><span class="sxs-lookup"><span data-stu-id="761d2-179">Update the value of **HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Microsoft SQL Server\100\SSIS\ServiceConfigFile** in the Registry to the fully-qualified path and file name of the service configuration file on the shared disk.</span></span>  
  
### <a name="to-bring-the-integration-services-service-online"></a><span data-ttu-id="761d2-180">Приведение службы Integration Services в режим в сети</span><span class="sxs-lookup"><span data-stu-id="761d2-180">To bring the Integration Services service online</span></span>  
  
-   <span data-ttu-id="761d2-181">В **Администраторе кластера**выберите службу [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] , щелкните ее правой кнопкой мыши и выберите из контекстного меню пункт **Перевести в режим "в сети"** .</span><span class="sxs-lookup"><span data-stu-id="761d2-181">In the **Cluster Administrator**, select the [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service, right-click, and select **Bring Online** from the popup menu.</span></span> <span data-ttu-id="761d2-182">Теперь служба [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] доступна как ресурс кластера.</span><span class="sxs-lookup"><span data-stu-id="761d2-182">The [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service is now online as a cluster resource.</span></span>  
  
  
