---
title: Поток управления | Документы Майкрософт
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
helpviewer_keywords:
- control flow [Integration Services], elements
- SSIS control flow elements
- SQL Server Integration Services control flow elements
ms.assetid: 0cc042a9-1a7f-49ed-9f47-091653d5ef6e
author: chugugrace
ms.author: chugu
ms.openlocfilehash: 81ace5d285a67c6fee8a3a568ed89bc564193c42
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87658936"
---
# <a name="control-flow"></a><span data-ttu-id="fdbf5-102">Поток управления</span><span class="sxs-lookup"><span data-stu-id="fdbf5-102">Control Flow</span></span>
  <span data-ttu-id="fdbf5-103">Пакет состоит из потока управления, а также, одного или нескольких потоков данных (необязательно).</span><span class="sxs-lookup"><span data-stu-id="fdbf5-103">A package consists of a control flow and, optionally, one or more data flows.</span></span> <span data-ttu-id="fdbf5-104">Службы [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssISnoversion](../../../includes/ssisnoversion-md.md)] предоставляют три различных типа элементов потока управления: контейнеры, которые обеспечивают структуры в пакетах; задачи, которые обеспечивают функциональность; элементы управления очередностью, соединяющие выполняемые компоненты, контейнеры и задачи в упорядоченный поток управления.</span><span class="sxs-lookup"><span data-stu-id="fdbf5-104">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssISnoversion](../../../includes/ssisnoversion-md.md)] provides three different types of control flow elements: containers that provide structures in packages, tasks that provide functionality, and precedence constraints that connect the executables, containers, and tasks into an ordered control flow.</span></span>

 <span data-ttu-id="fdbf5-105">Дополнительные сведения см. в разделах [Precedence Constraints](precedence-constraints.md), [Integration Services Containers](integration-services-containers.md)и [Integration Services Tasks](integration-services-tasks.md).</span><span class="sxs-lookup"><span data-stu-id="fdbf5-105">For more information, see [Precedence Constraints](precedence-constraints.md), [Integration Services Containers](integration-services-containers.md), and [Integration Services Tasks](integration-services-tasks.md).</span></span>

 <span data-ttu-id="fdbf5-106">Следующая диаграмма показывает поток управления, который имеет один контейнер и шесть задач.</span><span class="sxs-lookup"><span data-stu-id="fdbf5-106">The following diagram shows a control flow that has one container and six tasks.</span></span> <span data-ttu-id="fdbf5-107">Пять задач пакетного уровня и одна задача уровня контейнера.</span><span class="sxs-lookup"><span data-stu-id="fdbf5-107">Five of the tasks are defined at the package level, and one task is defined at the container level.</span></span> <span data-ttu-id="fdbf5-108">Задача находится в контейнере.</span><span class="sxs-lookup"><span data-stu-id="fdbf5-108">The task is inside a container.</span></span>

 <span data-ttu-id="fdbf5-109">![Поток управления с шестью задачами и контейнером](../media/ssis-controlflowelmt.gif "Поток управления с шестью задачами и контейнером")</span><span class="sxs-lookup"><span data-stu-id="fdbf5-109">![Control flow with six tasks and a container](../media/ssis-controlflowelmt.gif "Control flow with six tasks and a container")</span></span>

 <span data-ttu-id="fdbf5-110">Архитектура служб [!INCLUDE[ssISnoversion](../../../includes/ssisnoversion-md.md)] поддерживает вложение контейнеров, и поток управления может включать множество уровней вложенных контейнеров.</span><span class="sxs-lookup"><span data-stu-id="fdbf5-110">The [!INCLUDE[ssISnoversion](../../../includes/ssisnoversion-md.md)] architecture supports the nesting of containers, and a control flow can include multiple levels of nested containers.</span></span> <span data-ttu-id="fdbf5-111">Так, пакет может содержать контейнер, например контейнер «цикл по каждому элементу», который в свою очередь может содержать другой контейнер «цикл по каждому элементу», и так далее.</span><span class="sxs-lookup"><span data-stu-id="fdbf5-111">For example, a package could contain a container such as a Foreach Loop container, which in turn could contain another Foreach Loop container and so on.</span></span>

 <span data-ttu-id="fdbf5-112">Обработчики событий также имеют потоки управления, которые формируются, используя те же самые виды элементов потока управления.</span><span class="sxs-lookup"><span data-stu-id="fdbf5-112">Event handlers also have control flows, which are built using the same kinds of control flow elements.</span></span>

## <a name="control-flow-implementation"></a><span data-ttu-id="fdbf5-113">Реализация потока управления</span><span class="sxs-lookup"><span data-stu-id="fdbf5-113">Control Flow Implementation</span></span>
 <span data-ttu-id="fdbf5-114">Поток управления в пакете создается с помощью вкладки **Поток управления** в конструкторе служб [!INCLUDE[ssIS](../../../includes/ssis-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="fdbf5-114">You create the control flow in a package by using the **Control Flow** tab in [!INCLUDE[ssIS](../../../includes/ssis-md.md)] Designer.</span></span> <span data-ttu-id="fdbf5-115">Когда вкладка **Поток управления** открыта в области элементов приводится список задач и контейнеров, которые можно добавить в поток управления.</span><span class="sxs-lookup"><span data-stu-id="fdbf5-115">When the **Control Flow** tab is active, the Toolbox lists the tasks and containers that you can add to the control flow.</span></span>

 <span data-ttu-id="fdbf5-116">Следующая диаграмма демонстрирует поток управления простого пакета в конструкторе потока управления.</span><span class="sxs-lookup"><span data-stu-id="fdbf5-116">The following diagram shows the control flow of a simple package in the control flow designer.</span></span> <span data-ttu-id="fdbf5-117">Поток управления, показанный на диаграмме, состоит из трех задач пакетного уровня и одного контейнера пакетного уровня, который содержит три задачи.</span><span class="sxs-lookup"><span data-stu-id="fdbf5-117">The control flow shown in the diagram is made up of three package-level tasks and one package-level container that contains three tasks.</span></span> <span data-ttu-id="fdbf5-118">Задачи и контейнер связаны с помощью элементов управления очередностью.</span><span class="sxs-lookup"><span data-stu-id="fdbf5-118">The tasks and container are connected by using precedence constraints.</span></span>

 <span data-ttu-id="fdbf5-119">![Снимок экрана: конструктор потока управления с пакетом](../media/samplecontrolflow.gif "Снимок экрана: конструктор потока управления с пакетом")</span><span class="sxs-lookup"><span data-stu-id="fdbf5-119">![Screenshot of control flow designer with package](../media/samplecontrolflow.gif "Screenshot of control flow designer with package")</span></span>

 <span data-ttu-id="fdbf5-120">Создание потока управления включает следующие задачи.</span><span class="sxs-lookup"><span data-stu-id="fdbf5-120">Creating a control flow includes the following tasks:</span></span>

-   <span data-ttu-id="fdbf5-121">Добавление контейнеров, которые реализуют повторяющиеся рабочие процессы в пакете или разделяют поток управления на подмножества.</span><span class="sxs-lookup"><span data-stu-id="fdbf5-121">Adding containers that implement repeating workflows in a package or divide a control flow into subsets.</span></span>

-   <span data-ttu-id="fdbf5-122">Добавление задач, которые поддерживают поток данных, подготавливают данные, исполняют рабочий процесс и функции бизнес-аналитики и реализуют скрипт.</span><span class="sxs-lookup"><span data-stu-id="fdbf5-122">Adding tasks that support data flow, prepare data, perform workflow and business intelligence functions, and implement script.</span></span>

     <span data-ttu-id="fdbf5-123">Службы [!INCLUDE[ssISnoversion](../../../includes/ssisnoversion-md.md)] включает множество задач, которые можно использовать для создания потока управления, отвечающего бизнес-требованиям пакета.</span><span class="sxs-lookup"><span data-stu-id="fdbf5-123">[!INCLUDE[ssISnoversion](../../../includes/ssisnoversion-md.md)] includes a variety of tasks that you can use to create control flow that meets the business requirements of the package.</span></span> <span data-ttu-id="fdbf5-124">Если пакет должен работать с данными, поток управления должен содержать по крайней мере одну задачу потока данных.</span><span class="sxs-lookup"><span data-stu-id="fdbf5-124">If the package has to work with data, the control flow must include at least one Data Flow task.</span></span> <span data-ttu-id="fdbf5-125">Например, пакет может извлекать данные, объединять значения данных и затем записывать результаты в источник данных.</span><span class="sxs-lookup"><span data-stu-id="fdbf5-125">For example, a package might have to extract data, aggregate data values, and then write the results to a data source.</span></span>  <span data-ttu-id="fdbf5-126">Дополнительные сведения см. в разделах [Задачи служб Integration Services](integration-services-tasks.md) и [Добавление задачи или контейнера в поток управления или удаление их из него](add-or-delete-a-task-or-a-container-in-a-control-flow.md).</span><span class="sxs-lookup"><span data-stu-id="fdbf5-126">For more information, see [Integration Services Tasks](integration-services-tasks.md) and [Add or Delete a Task or a Container in a Control Flow](add-or-delete-a-task-or-a-container-in-a-control-flow.md).</span></span>

-   <span data-ttu-id="fdbf5-127">Соединение контейнеров и задач в упорядоченный поток управления путем использования элементов управления очередностью.</span><span class="sxs-lookup"><span data-stu-id="fdbf5-127">Connecting containers and tasks into an ordered control flow by using precedence constraints.</span></span>

     <span data-ttu-id="fdbf5-128">После добавления задачи или контейнера в область конструктора вкладки **Поток управления** конструктор служб [!INCLUDE[ssIS](../../../includes/ssis-md.md)] автоматически добавляет к элементу соединитель.</span><span class="sxs-lookup"><span data-stu-id="fdbf5-128">After you add a task or container to the design surface of the **Control Flow** tab, [!INCLUDE[ssIS](../../../includes/ssis-md.md)] Designer automatically adds a connector to the item.</span></span> <span data-ttu-id="fdbf5-129">Если пакет содержит два или более элемента, задачи или контейнера, то их присоединение к потоку управления происходит путем перетаскивания их соединителей из одного элемента в другой.</span><span class="sxs-lookup"><span data-stu-id="fdbf5-129">If a package includes two or more items, tasks or containers, you can join them into a control flow by dragging their connectors from one item to another.</span></span>

     <span data-ttu-id="fdbf5-130">Соединитель между двумя элементами представляет собой управление очередностью.</span><span class="sxs-lookup"><span data-stu-id="fdbf5-130">The connector between two items represents a precedence constraint.</span></span> <span data-ttu-id="fdbf5-131">Управление очередностью описывает связь между двумя соединенными элементами.</span><span class="sxs-lookup"><span data-stu-id="fdbf5-131">A precedence constraint defines the relationship between the two connected items.</span></span> <span data-ttu-id="fdbf5-132">Оно указывает порядок запуска задач и контейнеров во время выполнения и условия, при которых запускаются задачи и контейнеры.</span><span class="sxs-lookup"><span data-stu-id="fdbf5-132">It specifies the order in which tasks and containers are executed at run time and the conditions under which tasks and containers run.</span></span> <span data-ttu-id="fdbf5-133">Например, элемент управления очередностью может указывать, что для запуска следующей задачи в потоке управления должна быть успешно выполнена предыдущая задача.</span><span class="sxs-lookup"><span data-stu-id="fdbf5-133">For example, a precedence constraint can specify that a task must succeed for the next task in the control flow to run.</span></span> <span data-ttu-id="fdbf5-134">Дополнительные сведения см. в статье [Precedence Constraints](precedence-constraints.md).</span><span class="sxs-lookup"><span data-stu-id="fdbf5-134">For more information, see [Precedence Constraints](precedence-constraints.md).</span></span>

-   <span data-ttu-id="fdbf5-135">Добавление диспетчеров соединений.</span><span class="sxs-lookup"><span data-stu-id="fdbf5-135">Adding connection managers.</span></span>

     <span data-ttu-id="fdbf5-136">Многим задачам требуется соединение с источником данных, поэтому необходимо добавить диспетчеры соединений, запрашиваемые задачей для пакета.</span><span class="sxs-lookup"><span data-stu-id="fdbf5-136">Many tasks require a connection to a data source, and you have to add the connection managers that the task requires to the package.</span></span> <span data-ttu-id="fdbf5-137">Контейнер «цикл по каждому элементу» также может затребовать диспетчер соединений, в зависимости от используемого им типа перечислителя.</span><span class="sxs-lookup"><span data-stu-id="fdbf5-137">Depending on the enumerator type it uses, the Foreach Loop container may also require a connection manager.</span></span> <span data-ttu-id="fdbf5-138">Добавление диспетчеров соединений возможно в процессе поэлементного построения потока управления или до начала конструирования потока управления.</span><span class="sxs-lookup"><span data-stu-id="fdbf5-138">You can add the connection managers as you construct the control flow item by item or before you start to construct the control flow.</span></span> <span data-ttu-id="fdbf5-139">Дополнительные сведения см. в разделах [Соединения в службах Integration Services (SSIS)](../connection-manager/integration-services-ssis-connections.md) и [Создание диспетчеров соединений](../create-connection-managers.md).</span><span class="sxs-lookup"><span data-stu-id="fdbf5-139">For more information, see [Integration Services &#40;SSIS&#41; Connections](../connection-manager/integration-services-ssis-connections.md) and [Create Connection Managers](../create-connection-managers.md).</span></span>

 <span data-ttu-id="fdbf5-140">Конструктор служб [!INCLUDE[ssIS](../../../includes/ssis-md.md)] также включает много возможностей разработки, которые можно использовать для управления областью конструктора и производить самодокументирование потока управления.</span><span class="sxs-lookup"><span data-stu-id="fdbf5-140">[!INCLUDE[ssIS](../../../includes/ssis-md.md)] Designer also includes many design-time features that you can use to manage the design surface and make the control flow self-documenting.</span></span>

## <a name="related-tasks"></a><span data-ttu-id="fdbf5-141">Связанные задачи</span><span class="sxs-lookup"><span data-stu-id="fdbf5-141">Related Tasks</span></span>

-   [<span data-ttu-id="fdbf5-142">Добавление задачи или контейнера в поток управления или удаление их из него</span><span class="sxs-lookup"><span data-stu-id="fdbf5-142">Add or Delete a Task or a Container in a Control Flow</span></span>](add-or-delete-a-task-or-a-container-in-a-control-flow.md)

-   [<span data-ttu-id="fdbf5-143">Задание свойств задач или контейнеров</span><span class="sxs-lookup"><span data-stu-id="fdbf5-143">Set the Properties of a Task or Container</span></span>](../set-the-properties-of-a-task-or-container.md)

-   [<span data-ttu-id="fdbf5-144">Группирование и разгруппирование компонентов</span><span class="sxs-lookup"><span data-stu-id="fdbf5-144">Group or Ungroup Components</span></span>](../group-or-ungroup-components.md)


