---
title: Задача "Передача базы данных" | Документы Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
f1_keywords:
- sql12.dts.designer.transferdatabasetask.f1
helpviewer_keywords:
- Transfer Database task [Integration Services]
ms.assetid: b9a2e460-cdbc-458f-8df8-06b8b2de3d67
author: chugugrace
ms.author: chugu
ms.openlocfilehash: 85123eaff3e274bb4a96908ea99aef02c328ba23
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87654434"
---
# <a name="transfer-database-task"></a>Задача «Передача базы данных»
  Задача «Передача базы данных» передает базу данных [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] между двумя экземплярами [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]. В отличие от других задач, передающих объекты [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] только путем копирования, задача «Передача базы данных» может копировать или перемещать базу данных. Эту задачу можно также использовать для копирования базы данных в пределах того же сервера.  
  
## <a name="offline-and-online-modes"></a>Режимы «вне сети» и «в сети»  
 База данных может быть передана в режимах «в сети» или «вне сети». В режиме «в сети» база данных остается присоединенной и передается с помощью SQL Management Objects (SMO) для копирования объектов. В режиме «вне сети» база данных отсоединяется, файлы базы данных перемещаются или копируются и база данных прикрепляется на назначении после того, как передача успешно завершена. При копировании база данных повторно присоединяется к источнику автоматически, если копирование прошло успешно. В режиме «вне сети» копирование базы данных происходит быстрее, но во время передачи база данных недоступна для пользователей.  
  
 В режиме «вне сети» требуется указать общие папки на исходном и целевом серверах, которые содержат файлы базы данных. Ссылка на общую сетевую папку, доступную пользователю, может иметь синтаксис \\\имя_компьютера\Program Files\моя_папка\\. В противном случае необходимо использовать синтаксис \\\имя_компьютера\c$\Program Files\моя_папка\\. Для использования последнего варианта синтаксиса пользователь должен иметь разрешения на запись в общие сетевые ресурсы источника и назначения.  
  
## <a name="transfer-of-databases-between-versions-of-sql-server"></a>Передача баз данных между разными версиями SQL Server  
 Задача «Передача базы данных» может передавать базу данных между экземплярами различных версий [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .  
  
## <a name="events"></a>События  
 Задача «Передача базы данных» не создает отчет об ошибках в процессе передачи, сообщая только о начале и полном выполнении задачи.  
  
## <a name="execution-value"></a>Значение выполнения  
 Значение выполнения, заданное в свойстве `ExecutionValue` задачи, возвращает значение 1, поскольку в отличие от других задач передачи, задача «Передача базы данных» может передавать только одну базу данных.  
  
 С помощью выделения пользовательской переменной для свойства `ExecValueVariable` задачи «Передача базы данных» сведения об ошибках передачи становятся доступными для других объектов пакета. Дополнительные сведения см. в разделах [Переменные в службах Integration Services (SSIS)](../integration-services-ssis-variables.md) и [Использование переменных в пакетах](../use-variables-in-packages.md).  
  
## <a name="log-entries"></a>Записи журнала  
 Задача «Передача базы данных» содержит следующие пользовательские записи в журнале.  
  
-   SourceSQLServer    Запись журнала содержит имя исходного сервера.  
  
-   DestSQLServer    Запись журнала содержит имя целевого сервера.  
  
-   SourceDB    Запись журнала содержит имя передаваемой базы данных.  
  
 Дополнительно при перезаписывании целевой базы данных делается запись журнала для события `OnInformation`.  
  
## <a name="security-and-permissions"></a>Безопасность и разрешения  
 Для передачи базы данных в режиме вне сети пользователь, запускающий выполнение пакета, должен быть членом роли сервера sysadmin.  
  
 Для передачи базы данных в режиме в сети пользователь, запускающий выполнение пакета, должен быть членом роли сервера sysadmin или владельцем выбранной базы данных (dbo).  
  
## <a name="configuration-of-the-transfer-database-task"></a>Настройка задачи «Передача базы данных»  
 Можно отдельно указать, следует ли повторно подсоединять базу данных-источник, если во время передачи базы данных произошел сбой.  
  
 Задача «Передача базы данных» может быть настроена таким образом, чтобы разрешать перезапись целевой базы данных с таким же именем, замещая ее.  
  
 База данных-источник может быть переименована в процессе передачи. Если требуется передать базу данных на экземпляр назначения [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , где уже содержится база данных с таким именем, переименование базы данных-источника позволяет это сделать. Тем не менее, имена файлов баз данных должны различаться, поскольку если файлы базы данных с таким именем уже существуют на назначении, при выполнении задачи происходит сбой.  
  
 При создании копии базы данных база данных не может быть меньше по размеру, чем база данных **модели** на целевом сервере. Можно либо увеличить размер копии базы данных, либо уменьшить размер **модели**.  
  
 Во время выполнения задача «Передача базы данных» подключается к исходному и целевому серверам с помощью одного или двух диспетчеров соединений SMO. При создании копии базы данных на том же сервере требуется только один диспетчер соединений SMO. Диспетчеры соединений SMO настраиваются отдельно, после чего задача «Передача базы данных» ссылается на них. Диспетчеры соединений SMO указывают сервер и режим проверки подлинности, который будет использоваться при доступе задачи к указанному серверу. Дополнительные сведения см. в статье [SMO Connection Manager](../connection-manager/smo-connection-manager.md).  
  
 Значения свойств можно задавать с помощью конструктора [!INCLUDE[ssIS](../../includes/ssis-md.md)] или программными средствами.  
  
 Дополнительные сведения о свойствах, которые можно задать в конструкторе служб [!INCLUDE[ssIS](../../includes/ssis-md.md)] , см. в следующих разделах:  
  
-   [Редактор задачи "Передача базы данных" (страница "Общие")](../general-page-of-integration-services-designers-options.md)  
  
-   [Редактор задачи "Передача базы данных" (страница "Базы данных")](../transfer-database-task-editor-databases-page.md)  
  
-   [Страница «Выражения»](../expressions/expressions-page.md)  
  
 Дополнительные сведения об установке этих свойств в конструкторе служб [!INCLUDE[ssIS](../../includes/ssis-md.md)] см. в следующем разделе:  
  
-   [Задание свойств задач или контейнеров](../set-the-properties-of-a-task-or-container.md)  
  
## <a name="programmatic-configuration-of-the-transfer-database-task"></a>Настройка задачи «Передача базы данных» с помощью программных средств  
 Дополнительные сведения об установке этих свойств программными средствами см. в следующем разделе.  
  
-   <xref:Microsoft.SqlServer.Dts.Tasks.TransferDatabaseTask.TransferDatabaseTask>  
  
  
