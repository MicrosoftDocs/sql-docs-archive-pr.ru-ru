---
title: Управление очередностью | Документы Майкрософт
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
helpviewer_keywords:
- tasks [Integration Services], precedence constraints
- control flow [Integration Services], precedence constraints
- precedence constraints [Integration Services]
- constraints [Integration Services]
- sequence execution options [Integration Services]
- containers [Integration Services], precedence constraints
ms.assetid: c5ce5435-fd89-4156-a11f-68470a69aa9f
author: chugugrace
ms.author: chugu
ms.openlocfilehash: 7a08fd1d66e43ede4c54284518bab191be8997a4
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87665479"
---
# <a name="precedence-constraints"></a><span data-ttu-id="16c03-102">Управление очередностью</span><span class="sxs-lookup"><span data-stu-id="16c03-102">Precedence Constraints</span></span>
  <span data-ttu-id="16c03-103">Элементы управления очередностью связывает исполняемые объекты, контейнеры и задачи в пакетах в поток управления и задают условия, которые определяют, выполняются ли исполняемые объекты.</span><span class="sxs-lookup"><span data-stu-id="16c03-103">Precedence constraints link executables, containers, and tasks in packages in a control flow, and specify conditions that determine whether executables run.</span></span> <span data-ttu-id="16c03-104">В качестве исполняемого объекта могут быть контейнеры «цикл по элементам» и «цикл по каждому элементу», контейнеры последовательности, задача или обработчик события.</span><span class="sxs-lookup"><span data-stu-id="16c03-104">An executable can be a For Loop, Foreach Loop, or Sequence container; a task; or an event handler.</span></span> <span data-ttu-id="16c03-105">Обработчики событий также используют управление очередностью для связывания своих исполняемых объектов в поток управления.</span><span class="sxs-lookup"><span data-stu-id="16c03-105">Event handlers also use precedence constraints to link their executables into a control flow.</span></span>

 <span data-ttu-id="16c03-106">Элементы управления очередностью связывает два исполняемых объекта: ограничивающий исполняемый объект и исполняемый объект с ограничением.</span><span class="sxs-lookup"><span data-stu-id="16c03-106">A precedence constraint links two executables: the precedence executable and the constrained executable.</span></span> <span data-ttu-id="16c03-107">Ограничивающие исполняемые объекты выполняются перед исполняемыми объектами с ограничением, и в результате выполнения ограничивающих исполняемых объектов определяется, выполняются ли исполняемые объекты с ограничением.</span><span class="sxs-lookup"><span data-stu-id="16c03-107">The precedence executable runs before the constrained executable, and the execution result of the precedence executable may determine whether the constrained executable runs.</span></span> <span data-ttu-id="16c03-108">На следующей диаграмме представлены два исполняемых объекта, связанные элементы управлением очередностью.</span><span class="sxs-lookup"><span data-stu-id="16c03-108">The following diagram shows two executables linked by a precedence constraint.</span></span>

 <span data-ttu-id="16c03-109">![Выполняемые объекты, соединенные ограничением очередностью](../media/ssis-pcsimple.gif "Выполняемые объекты, соединенные ограничением очередностью")</span><span class="sxs-lookup"><span data-stu-id="16c03-109">![Executables connected by a precedence constraint](../media/ssis-pcsimple.gif "Executables connected by a precedence constraint")</span></span>

 <span data-ttu-id="16c03-110">При линейном потоке управления, то есть без ветвления, элементы управления очередностью сами управляют последовательностью, в которой запускаются задачи.</span><span class="sxs-lookup"><span data-stu-id="16c03-110">In a linear control flow, that is, one without branching, precedence constraints alone govern the sequence in which tasks run.</span></span> <span data-ttu-id="16c03-111">Если поток управления содержит ветвления, ядро во время выполнения служб [!INCLUDE[ssISnoversion](../../../includes/ssisnoversion-md.md)] определяет порядок выполнения задачи и контейнеров, которые непосредственно следуют за ветвлением.</span><span class="sxs-lookup"><span data-stu-id="16c03-111">If a control flow branches, the [!INCLUDE[ssISnoversion](../../../includes/ssisnoversion-md.md)] run-time engine determines the execution order among the tasks and containers that immediately follow the branching.</span></span> <span data-ttu-id="16c03-112">Ядро во время выполнения также определяет порядок выполнения несвязанных рабочих процессов в потоке управления.</span><span class="sxs-lookup"><span data-stu-id="16c03-112">The run-time engine also determines execution order among unconnected workflows in a control flow.</span></span>

 <span data-ttu-id="16c03-113">Архитектура вложенных контейнеров служб [!INCLUDE[ssISnoversion](../../../includes/ssisnoversion-md.md)] позволяет всем контейнерам, за исключением контейнеров сервера задач, которые могут инкапсулировать только одну задачу, содержать другие контейнеры, каждый из которых имеет собственный поток управления.</span><span class="sxs-lookup"><span data-stu-id="16c03-113">The nested-container architecture of [!INCLUDE[ssISnoversion](../../../includes/ssisnoversion-md.md)] enables all containers, except for the task host container that encapsulates only a single task, to include other containers, each with its own control flow.</span></span> <span data-ttu-id="16c03-114">Контейнеры «цикл по элементам», «цикл по каждому элементу» и контейнеры последовательности могут включать несколько задач и другие контейнеры, которые, в свою очередь, могут содержать несколько задач и контейнеров.</span><span class="sxs-lookup"><span data-stu-id="16c03-114">The For Loop, Foreach Loop, and Sequence containers can include multiple tasks and other containers, which in turn can include multiple tasks and containers.</span></span> <span data-ttu-id="16c03-115">Например, пакет с задачей «Скрипт» и контейнером последовательности имеет управление очередностью, которое связывает задачу «Скрипт» и контейнер последовательности.</span><span class="sxs-lookup"><span data-stu-id="16c03-115">For example, a package with a Script task and a Sequence container has a precedence constraint that links the Script task and the Sequence container.</span></span> <span data-ttu-id="16c03-116">Контейнер последовательности содержит три задачи «Скрипт», и его управления очередностью связывают три задачи «Скрипт» в поток управления.</span><span class="sxs-lookup"><span data-stu-id="16c03-116">The Sequence container includes three Script tasks, and its precedence constraints link the three Script tasks into a control flow.</span></span> <span data-ttu-id="16c03-117">На следующей диаграмме показаны управления очередностью в пакете с двумя уровнями вложенности.</span><span class="sxs-lookup"><span data-stu-id="16c03-117">The following diagram shows the precedence constraints in a package with two levels of nesting.</span></span>

 <span data-ttu-id="16c03-118">![Ограничения очередностью в пакете](../media/mw-dts-12.gif "Ограничения очередностью в пакете")</span><span class="sxs-lookup"><span data-stu-id="16c03-118">![Precedence contraints in a package](../media/mw-dts-12.gif "Precedence contraints in a package")</span></span>

 <span data-ttu-id="16c03-119">Так как пакет находится наверху иерархии контейнеров служб [!INCLUDE[ssIS](../../../includes/ssis-md.md)] , несколько пакетов не могут быть связаны управлениями очередностью, однако можно добавить в пакет задачу «Выполнение пакета» и косвенно связать другой пакет в поток управления.</span><span class="sxs-lookup"><span data-stu-id="16c03-119">Because the package is at the top of the [!INCLUDE[ssIS](../../../includes/ssis-md.md)] container hierarchy, multiple packages cannot be linked by precedence constraints; however, you can add an Execute Package task to a package and indirectly link another package into the control flow.</span></span>

 <span data-ttu-id="16c03-120">Управление очередностью можно настроить следующими способами:</span><span class="sxs-lookup"><span data-stu-id="16c03-120">You can configure precedence constraints in the following ways:</span></span>

-   <span data-ttu-id="16c03-121">Задать операцию вычисления.</span><span class="sxs-lookup"><span data-stu-id="16c03-121">Specify an evaluation operation.</span></span> <span data-ttu-id="16c03-122">Управление очередностью использует ограничение по значению, выражение, оба эти элемента или один из них для определения, выполняется ли исполняемый объект с ограничением.</span><span class="sxs-lookup"><span data-stu-id="16c03-122">The precedence constraint uses a constraint value, an expression, both, or either to determine whether the constrained executable runs.</span></span>

-   <span data-ttu-id="16c03-123">Если управление очередностью использует результат выполнения, в качестве результата выполнения могут быть заданы успех, ошибка или завершение.</span><span class="sxs-lookup"><span data-stu-id="16c03-123">If the precedence constraint uses an execution result, you can specify the execution result to be success, failure, or completion.</span></span>

-   <span data-ttu-id="16c03-124">Если управление очередностью использует результат оценки, может быть задано выражение, значением которого является логическое значение.</span><span class="sxs-lookup"><span data-stu-id="16c03-124">If the precedence constraint uses an evaluation result, you can provide an expression that evaluates to a Boolean.</span></span>

-   <span data-ttu-id="16c03-125">Укажите, оценивается ли управление очередностью одно или совместно с другими ограничениями, применимыми к исполняемому объекту с ограничением.</span><span class="sxs-lookup"><span data-stu-id="16c03-125">Specify whether the precedence constraint is evaluated singly or together with other constraints that apply to the constrained executable.</span></span>

## <a name="evaluation-operations"></a><span data-ttu-id="16c03-126">Операции вычисления</span><span class="sxs-lookup"><span data-stu-id="16c03-126">Evaluation Operations</span></span>
 [!INCLUDE[ssISnoversion](../../../includes/ssisnoversion-md.md)] <span data-ttu-id="16c03-127">предоставляют следующие операции вычисления:</span><span class="sxs-lookup"><span data-stu-id="16c03-127">provides the following evaluation operations:</span></span>

-   <span data-ttu-id="16c03-128">Ограничение, использующее только результат выполнения ограничивающего исполняемого объекта для определения, выполняется ли исполняемый объект с ограничением.</span><span class="sxs-lookup"><span data-stu-id="16c03-128">A constraint that uses only the execution result of the precedence executable to determine whether the constrained executable runs.</span></span> <span data-ttu-id="16c03-129">Результатом выполнения приоритетного ограничивающего объекта может быть завершение, успех или ошибка.</span><span class="sxs-lookup"><span data-stu-id="16c03-129">The execution result of the precedence executable can be completion, success, or failure.</span></span> <span data-ttu-id="16c03-130">Это операция по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="16c03-130">This is the default operation.</span></span>

-   <span data-ttu-id="16c03-131">Выражение, оцениваемое для определения, выполняется ли исполняемый объект с ограничением.</span><span class="sxs-lookup"><span data-stu-id="16c03-131">An expression that is evaluated to determine whether the constrained executable runs.</span></span> <span data-ttu-id="16c03-132">Если результатом оценки этого выражения является TRUE, исполняемый объект с ограничением выполняется.</span><span class="sxs-lookup"><span data-stu-id="16c03-132">If the expression evaluates to true, the constrained executable runs.</span></span>

-   <span data-ttu-id="16c03-133">Выражение и ограничение, объединяющие требования результатов выполнения ограничивающего исполняемого объекта и результатов, возвращаемых после оценки выражения.</span><span class="sxs-lookup"><span data-stu-id="16c03-133">An expression and a constraint that combines the requirements of execution results of the precedence executable and the return results of evaluating the expression.</span></span>

-   <span data-ttu-id="16c03-134">Выражение или ограничение, использующие результаты выполнения ограничивающего исполняемого объекта или результаты, возвращаемые после оценки выражения.</span><span class="sxs-lookup"><span data-stu-id="16c03-134">An expression or a constraint that uses either the execution results of the precedence executable or the return results of evaluating the expression.</span></span>

 [!INCLUDE[ssIS](../../../includes/ssis-md.md)] <span data-ttu-id="16c03-135">использует цвет для определения типа элементов управления очередностью.</span><span class="sxs-lookup"><span data-stu-id="16c03-135">Designer uses color to identify the type of precedence constraint.</span></span> <span data-ttu-id="16c03-136">Успешное ограничение отмечается зеленым, неуспешное — красным, завершенное — синим.</span><span class="sxs-lookup"><span data-stu-id="16c03-136">The Success constraint is green, the Failure constraint is red, and the Completion constraint is blue.</span></span> <span data-ttu-id="16c03-137">Для отображения текстовых меток в конструкторе служб [!INCLUDE[ssIS](../../../includes/ssis-md.md)] , обозначающих тип ограничения, необходимо настроить специальные возможности конструктора служб [!INCLUDE[ssIS](../../../includes/ssis-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="16c03-137">To display text labels in [!INCLUDE[ssIS](../../../includes/ssis-md.md)] designer that show the type of the constraint, you must configure the accessibility features of [!INCLUDE[ssIS](../../../includes/ssis-md.md)] Designer.</span></span>

 <span data-ttu-id="16c03-138">Выражение должно быть действительным выражением служб [!INCLUDE[ssIS](../../../includes/ssis-md.md)] , оно может содержать функции, операторы, а также системные и пользовательские переменные.</span><span class="sxs-lookup"><span data-stu-id="16c03-138">The expression must be a valid [!INCLUDE[ssIS](../../../includes/ssis-md.md)] expression, and it can include functions, operators, and system and custom variables.</span></span> <span data-ttu-id="16c03-139">Дополнительные сведения см. в разделах [Выражения в службах Integration Services (SSIS)](../expressions/integration-services-ssis-expressions.md) и [Переменные в службах Integration Services (SSIS)](../integration-services-ssis-variables.md).</span><span class="sxs-lookup"><span data-stu-id="16c03-139">For more information, see [Integration Services &#40;SSIS&#41; Expressions](../expressions/integration-services-ssis-expressions.md) and [Integration Services &#40;SSIS&#41; Variables](../integration-services-ssis-variables.md).</span></span>

## <a name="execution-results"></a><span data-ttu-id="16c03-140">Результаты выполнения</span><span class="sxs-lookup"><span data-stu-id="16c03-140">Execution Results</span></span>
 <span data-ttu-id="16c03-141">Управление очередностью может использовать следующие результаты выполнения поодиночке или в сочетании с выражением.</span><span class="sxs-lookup"><span data-stu-id="16c03-141">The precedence constraint can use the following execution results alone or in combination with an expression.</span></span>

-   <span data-ttu-id="16c03-142">Завершение означает только то, что ограничивающий исполняемый объект завершился без учета результата, вследствие чего запустился исполняемый объект с ограничением.</span><span class="sxs-lookup"><span data-stu-id="16c03-142">Completion requires only that the precedence executable has completed, without regard to outcome, in order for the constrained executable to run.</span></span>

-   <span data-ttu-id="16c03-143">Успешное окончание означает, что для выполнения ограничивающего объекта с ограничением необходимо, чтобы приоритетный исполняемый объект был успешно завершен.</span><span class="sxs-lookup"><span data-stu-id="16c03-143">Success requires that the precedence executable must complete successfully for the constrained executable to run.</span></span>

-   <span data-ttu-id="16c03-144">Завершение с ошибкой означает, что для выполнения исполняемого объекта с ограничением необходимо, чтобы ограничивающий исполняемый объект завершился со сбоем.</span><span class="sxs-lookup"><span data-stu-id="16c03-144">Failure requires that the precedence executable fail for the constrained executable to run.</span></span>

> [!NOTE]
>  <span data-ttu-id="16c03-145">Только управления очередностью, являющиеся элементами одной коллекции `Precedence Constraint`, могут быть сгруппированы в логическом условии AND.</span><span class="sxs-lookup"><span data-stu-id="16c03-145">Only precedence constraints that are members of the same `Precedence Constraint` collection can be grouped in a logical AND condition.</span></span> <span data-ttu-id="16c03-146">Например, нельзя объединить элементы управления очередностью из двух контейнеров «цикл по каждому элементу».</span><span class="sxs-lookup"><span data-stu-id="16c03-146">For example, you cannot combine precedence constraints from two Foreach Loop containers.</span></span>

## <a name="configuration-of-the-precedence-constraint"></a><span data-ttu-id="16c03-147">Настройка элементов ограничения очередностью</span><span class="sxs-lookup"><span data-stu-id="16c03-147">Configuration of the Precedence Constraint</span></span>
 <span data-ttu-id="16c03-148">Значения свойств можно задавать с помощью конструктора [!INCLUDE[ssIS](../../../includes/ssis-md.md)] или программными средствами.</span><span class="sxs-lookup"><span data-stu-id="16c03-148">You can set properties through [!INCLUDE[ssIS](../../../includes/ssis-md.md)] Designer or programmatically.</span></span>

 <span data-ttu-id="16c03-149">Дополнительные сведения о свойствах, которые можно задавать в конструкторе служб [!INCLUDE[ssIS](../../../includes/ssis-md.md)] , см. в разделе [Редактор управления очередностью](../precedence-constraint-editor.md).</span><span class="sxs-lookup"><span data-stu-id="16c03-149">For information about the properties that you can set in [!INCLUDE[ssIS](../../../includes/ssis-md.md)] Designer, see [Precedence Constraint Editor](../precedence-constraint-editor.md).</span></span>

 <span data-ttu-id="16c03-150">Дополнительные сведения о настройке этих свойств программными средствами см. в разделе <xref:Microsoft.SqlServer.Dts.Runtime.PrecedenceConstraint>.</span><span class="sxs-lookup"><span data-stu-id="16c03-150">For information about programmatically setting these properties, see <xref:Microsoft.SqlServer.Dts.Runtime.PrecedenceConstraint>.</span></span>

## <a name="related-tasks"></a><span data-ttu-id="16c03-151">Связанные задачи</span><span class="sxs-lookup"><span data-stu-id="16c03-151">Related Tasks</span></span>
 <span data-ttu-id="16c03-152">Дополнительные сведения о задании этих свойств в конструкторе служб [!INCLUDE[ssIS](../../../includes/ssis-md.md)] см. в следующих разделах:</span><span class="sxs-lookup"><span data-stu-id="16c03-152">For details about how to set these properties in [!INCLUDE[ssIS](../../../includes/ssis-md.md)] Designer, click one of the following topics:</span></span>

-   [<span data-ttu-id="16c03-153">Установка свойств управления очередностью</span><span class="sxs-lookup"><span data-stu-id="16c03-153">Set the Properties of a Precedence Constraint</span></span>](../set-the-properties-of-a-precedence-constraint.md)

-   [<span data-ttu-id="16c03-154">Установка значения элементов управления очередностью с помощью контекстного меню</span><span class="sxs-lookup"><span data-stu-id="16c03-154">Set the Value of a Precedence Constraint by Using the Shortcut Menu</span></span>](../set-the-value-of-a-precedence-constraint-by-using-the-shortcut-menu.md)

-   [<span data-ttu-id="16c03-155">Соединение задач и контейнеров с помощью элементов управления очередностью по умолчанию</span><span class="sxs-lookup"><span data-stu-id="16c03-155">Connect Tasks and Containers by Using a Default Precedence Constraint</span></span>](../connect-tasks-and-containers-by-using-a-default-precedence-constraint.md)

     <span data-ttu-id="16c03-156">В этом разделе приведены сведения о настройке поведения по умолчанию для элементов управления очередностью, а также настройке исполняемых объектов с помощью элементов управления очередностью по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="16c03-156">This topic provides information on how to set the default behavior for precedence constraints, and how to connect executables using the default precedence constraints, see.</span></span>

## <a name="related-content"></a><span data-ttu-id="16c03-157">См. также</span><span class="sxs-lookup"><span data-stu-id="16c03-157">Related Content</span></span>
 <span data-ttu-id="16c03-158">Техническая статья [Примеры выражений служб SSIS](https://go.microsoft.com/fwlink/?LinkId=220761)на сайте social.technet.microsoft.com</span><span class="sxs-lookup"><span data-stu-id="16c03-158">Technical article, [SSIS Expression Examples](https://go.microsoft.com/fwlink/?LinkId=220761), on social.technet.microsoft.com</span></span>

## <a name="see-also"></a><span data-ttu-id="16c03-159">См. также:</span><span class="sxs-lookup"><span data-stu-id="16c03-159">See Also</span></span>
 <span data-ttu-id="16c03-160">[Добавление выражений в элементы управления очередностью с](../add-expressions-to-precedence-constraints.md) [несколькими ограничениями очередностью](../multiple-precedence-constraints.md)</span><span class="sxs-lookup"><span data-stu-id="16c03-160">[Add Expressions to Precedence Constraints](../add-expressions-to-precedence-constraints.md) [Multiple Precedence Constraints](../multiple-precedence-constraints.md)</span></span>


