---
title: Задания агента SQL Server для пакетов | Документы Майкрософт
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
helpviewer_keywords:
- jobs [Integration Services]
- automatic package execution
- scheduling packages [Integration Services]
- SQL Server Agent [Integration Services]
ms.assetid: ecf7a5f9-b8a7-47f1-9ac0-bac07cb89e31
author: chugugrace
ms.author: chugu
ms.openlocfilehash: eb9c1cf39ab5120958c33dfeff24588d59f71307
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87664303"
---
# <a name="sql-server-agent-jobs-for-packages"></a><span data-ttu-id="488ad-102">Пакеты служб из заданий агента SQL Server</span><span class="sxs-lookup"><span data-stu-id="488ad-102">SQL Server Agent Jobs for Packages</span></span>
  <span data-ttu-id="488ad-103">Выполнение пакетов служб [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] можно автоматизировать и запланировать в расписании при помощи агента [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="488ad-103">You can automate and schedule the execution of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] packages by using [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent.</span></span> <span data-ttu-id="488ad-104">Можно задать расписание выполнения пакетов, равернутых на сервере служб [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] , хранимых в [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], в хранилище пакетов служб [!INCLUDE[ssIS](../../includes/ssis-md.md)] , или в файловой системе.</span><span class="sxs-lookup"><span data-stu-id="488ad-104">You can schedule packages that are deployed to the [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] server, and are stored in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], the [!INCLUDE[ssIS](../../includes/ssis-md.md)] Package Store, and the file system.</span></span>  
  
## <a name="sections-in-this-topic"></a><span data-ttu-id="488ad-105">Подразделы данного раздела</span><span class="sxs-lookup"><span data-stu-id="488ad-105">Sections in This Topic</span></span>  
 <span data-ttu-id="488ad-106">Этот раздел состоит из следующих подразделов.</span><span class="sxs-lookup"><span data-stu-id="488ad-106">This topic contains the following sections:</span></span>  
  
-   [<span data-ttu-id="488ad-107">Планирование заданий в агенте SQL Server</span><span class="sxs-lookup"><span data-stu-id="488ad-107">Scheduling jobs in SQL Server Agent</span></span>](#jobs)  
  
-   [<span data-ttu-id="488ad-108">Планирование пакетов служб Integration Services</span><span class="sxs-lookup"><span data-stu-id="488ad-108">Scheduling Integration Services packages</span></span>](#packages)  
  
-   [<span data-ttu-id="488ad-109">Устранение неполадок при работе с запланированным пакетами</span><span class="sxs-lookup"><span data-stu-id="488ad-109">Troubleshooting scheduled packages</span></span>](#trouble)  
  
##  <a name="scheduling-jobs-in-sql-server-agent"></a><a name="jobs"></a> <span data-ttu-id="488ad-110">Scheduling Jobs in SQL Server Agent</span><span class="sxs-lookup"><span data-stu-id="488ad-110">Scheduling Jobs in SQL Server Agent</span></span>  
 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="488ad-111">— это устанавливаемая [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] служба, которая позволяет автоматизировать задания и планировать их выполнение посредством запуска заданий агента [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="488ad-111">Agent is the service installed by [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] that lets you automate and schedule tasks by running [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent jobs.</span></span> <span data-ttu-id="488ad-112">Для автоматического запуска заданий должна быть запущена служба агента [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="488ad-112">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent service must be running before jobs can run automatically.</span></span> <span data-ttu-id="488ad-113">Дополнительные сведения см. в статье [Configure SQL Server Agent](../../ssms/agent/configure-sql-server-agent.md).</span><span class="sxs-lookup"><span data-stu-id="488ad-113">For more information, see [Configure SQL Server Agent](../../ssms/agent/configure-sql-server-agent.md).</span></span>  
  
 <span data-ttu-id="488ad-114">Узел **агента SQL Server** отображается в обозревателе объектов среды [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] при подключении к экземпляру [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="488ad-114">The **SQL Server Agent** node appears in Object Explorer in [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] when you connect to an instance of the [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)].</span></span>  
  
 <span data-ttu-id="488ad-115">Для автоматизации повторяющейся задачи необходимо создать задание в диалоговом окне **Создать задание** .</span><span class="sxs-lookup"><span data-stu-id="488ad-115">To automate a recurring task, you create a job by using the **New Job** dialog box.</span></span> <span data-ttu-id="488ad-116">Дополнительные сведения см. в разделе [Реализация заданий](../../ssms/agent/implement-jobs.md).</span><span class="sxs-lookup"><span data-stu-id="488ad-116">For more information, see [Implement Jobs](../../ssms/agent/implement-jobs.md).</span></span>  
  
 <span data-ttu-id="488ad-117">После создания задания необходимо добавить как минимум один шаг.</span><span class="sxs-lookup"><span data-stu-id="488ad-117">After you create the job, you must add at least one step.</span></span> <span data-ttu-id="488ad-118">Задание может содержать несколько шагов, причем на каждом из шагов могут решаться различные задачи.</span><span class="sxs-lookup"><span data-stu-id="488ad-118">A job can include multiple steps, and each step can perform a different task.</span></span> <span data-ttu-id="488ad-119">Дополнительные сведения см. в статье [Manage Job Steps](../../ssms/agent/manage-job-steps.md).</span><span class="sxs-lookup"><span data-stu-id="488ad-119">For more information, see [Manage Job Steps](../../ssms/agent/manage-job-steps.md).</span></span>  
  
 <span data-ttu-id="488ad-120">После создания задания и шагов задания можно создать расписание для его запуска.</span><span class="sxs-lookup"><span data-stu-id="488ad-120">After you create the job and the job steps, you can create a schedule for running the job.</span></span> <span data-ttu-id="488ad-121">Однако можно создать и задание без расписания, которое будет запускаться вручную.</span><span class="sxs-lookup"><span data-stu-id="488ad-121">However you can also create an unscheduled job that you run manually.</span></span> <span data-ttu-id="488ad-122">Дополнительные сведения см. в разделе [Создание и присоединение расписаний к заданиям](../../ssms/agent/create-and-attach-schedules-to-jobs.md).</span><span class="sxs-lookup"><span data-stu-id="488ad-122">For more information, see [Create and Attach Schedules to Jobs](../../ssms/agent/create-and-attach-schedules-to-jobs.md).</span></span>  
  
 <span data-ttu-id="488ad-123">Можно добавить заданию некоторые функции уведомления, например, чтобы по окончании задания отправлялось сообщение по электронной почте определенному оператору, или выдавались какие-либо предупреждения.</span><span class="sxs-lookup"><span data-stu-id="488ad-123">You can enhance the job by setting notification options, such as specifying an operator to send an e-mail message to when the job finishes, or adding alerts.</span></span> <span data-ttu-id="488ad-124">Дополнительные сведения см. в статье [Оповещения](../../ssms/agent/alerts.md).</span><span class="sxs-lookup"><span data-stu-id="488ad-124">For more information, see [Alerts](../../ssms/agent/alerts.md).</span></span>  
  
##  <a name="scheduling-integration-services-packages"></a><a name="packages"></a> <span data-ttu-id="488ad-125">Scheduling Integration Services Packages</span><span class="sxs-lookup"><span data-stu-id="488ad-125">Scheduling Integration Services Packages</span></span>  
 <span data-ttu-id="488ad-126">После создания задания служб [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] для планирования пакетов [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] необходимо добавить к нему хотя бы один шаг и задать для этого шага тип **Пакет SQL Server Integration Services**.</span><span class="sxs-lookup"><span data-stu-id="488ad-126">When you create a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent job to schedule [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] packages, you must add at least one step and set the type of the step to **SQL Server Integration Services Package**.</span></span> <span data-ttu-id="488ad-127">Задание может содержать несколько шагов, причем на всех шагах могут выполняться различные пакеты.</span><span class="sxs-lookup"><span data-stu-id="488ad-127">A job can include multiple steps, and each step can run a different package.</span></span>  
  
 <span data-ttu-id="488ad-128">Запуск пакета служб [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] из шага задания аналогичен запуску пакета с помощью программ **dtexec** (dtexec.exe) и **DTExecUI** (dtexecui.exe).</span><span class="sxs-lookup"><span data-stu-id="488ad-128">Running an [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] package from a job step is like running a package by using the **dtexec** (dtexec.exe) and **DTExecUI** (dtexecui.exe) utilities.</span></span> <span data-ttu-id="488ad-129">Вместо задания для пакета параметров времени выполнения с помощью параметров командной строки или из диалогового окна **Программа выполнения пакетов** они задаются в диалоговом окне **Создание шага задания** .</span><span class="sxs-lookup"><span data-stu-id="488ad-129">Instead of setting the run-time options for a package by using command-line options or the **Execute Package Utility** dialog box, you set the run-time options in the **New Job Step** dialog box.</span></span> <span data-ttu-id="488ad-130">Дополнительные сведения о параметрах запуска пакета см. в разделе [dtexec Utility](dtexec-utility.md).</span><span class="sxs-lookup"><span data-stu-id="488ad-130">For more information about the options for running a package, see [dtexec Utility](dtexec-utility.md).</span></span>  
  
 <span data-ttu-id="488ad-131">Дополнительные сведения см. в разделе [Планирование пакета с помощью агента SQL Server](../schedule-a-package-by-using-sql-server-agent.md).</span><span class="sxs-lookup"><span data-stu-id="488ad-131">For more information, see [Schedule a Package by using SQL Server Agent](../schedule-a-package-by-using-sql-server-agent.md).</span></span>  
  
 <span data-ttu-id="488ad-132">Видео, в котором демонстрируется, как использовать агент [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] для запуска пакета, см. на домашней странице в руководстве по [ автоматизации выполнения пакета с помощью агента SQL Server (видео об SQL Server)](https://go.microsoft.com/fwlink/?LinkId=141771) в библиотеке MSDN.</span><span class="sxs-lookup"><span data-stu-id="488ad-132">For a video that demonstrates how to use [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent to run a package, see the video home page, [How to: Automate Package Execution by Using the SQL Server Agent (SQL Server Video)](https://go.microsoft.com/fwlink/?LinkId=141771), in the MSDN Library.</span></span>  
  
##  <a name="troubleshooting"></a><a name="trouble"></a> <span data-ttu-id="488ad-133">Устранение неполадок</span><span class="sxs-lookup"><span data-stu-id="488ad-133">Troubleshooting</span></span>  
 <span data-ttu-id="488ad-134">Возможна ситуация, когда шаг задания агента [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] не сможет запустить пакет даже в случае успешного выполнения пакета в [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)] или из командной строки.</span><span class="sxs-lookup"><span data-stu-id="488ad-134">A [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent job step may fail to start a package even though the package runs successfully in [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)] and from the command line.</span></span> <span data-ttu-id="488ad-135">У этой проблемы есть несколько распространенных причин и несколько рекомендуемых решений.</span><span class="sxs-lookup"><span data-stu-id="488ad-135">There are some common reasons for this issue and several recommended solutions.</span></span> <span data-ttu-id="488ad-136">Для получения дополнительных сведений см. следующие ресурсы.</span><span class="sxs-lookup"><span data-stu-id="488ad-136">For more information, see the following resources.</span></span>  
  
-   [!INCLUDE[msCoName](../../includes/msconame-md.md)] <span data-ttu-id="488ad-137">, [Пакет служб SSIS не выполняется при вызове пакета из шага задания агента SQL Server](https://support.microsoft.com/kb/918760)</span><span class="sxs-lookup"><span data-stu-id="488ad-137">Knowledge Base article, [An SSIS package does not run when you call the SSIS package from a SQL Server Agent job step](https://support.microsoft.com/kb/918760)</span></span>  
  
-   <span data-ttu-id="488ad-138">Видео с руководством по [устранению неполадок с выполнением пакета с помощью агента SQL Server (видео об SQL Server)](https://go.microsoft.com/fwlink/?LinkId=141772) в библиотеке MSDN.</span><span class="sxs-lookup"><span data-stu-id="488ad-138">Video, [Troubleshooting: Package Execution Using SQL Server Agent (SQL Server Video)](https://go.microsoft.com/fwlink/?LinkId=141772), in the MSDN Library.</span></span>  
  
 <span data-ttu-id="488ad-139">После того как шаг задания агента [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] успешно запустил пакет, выполнение пакета может завершиться ошибкой или пакет может быть выполнен успешно, но с непредвиденными результатами.</span><span class="sxs-lookup"><span data-stu-id="488ad-139">After a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent job step starts a package, the package execution may fail or the package may run successfully but with unexpected results.</span></span> <span data-ttu-id="488ad-140">Для устранения таких неполадок можно использовать следующие средства.</span><span class="sxs-lookup"><span data-stu-id="488ad-140">You can use the following tools to troubleshoot these issues.</span></span>  
  
-   <span data-ttu-id="488ad-141">Для пакетов, сохраненных в базе данных MSDB [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , хранилище пакетов служб [!INCLUDE[ssIS](../../includes/ssis-md.md)] или в папке на локальном компьютере, можно использовать **Средство просмотра журнала** , а также любые журналы и отладочные файлы дампа, созданные во время выполнения пакета.</span><span class="sxs-lookup"><span data-stu-id="488ad-141">For packages that are stored in the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] MSDB database, the [!INCLUDE[ssIS](../../includes/ssis-md.md)] Package Store, or in a folder on your local machine, you can use the **Log File Viewer** as well as any logs and debug dump files that were generated during the execution of the package.</span></span>  
  
     <span data-ttu-id="488ad-142">**Для использования средства просмотра журналов выполните следующие действия.**</span><span class="sxs-lookup"><span data-stu-id="488ad-142">**To use the Log File Viewer, do the following.**</span></span>  
  
    1.  <span data-ttu-id="488ad-143">В обозревателе объектов щелкните правой кнопкой мыши задание агента [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] и выберите **Просмотр журнала**.</span><span class="sxs-lookup"><span data-stu-id="488ad-143">Right-click the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent job in Object Explorer and then click **View History**.</span></span>  
  
    2.  <span data-ttu-id="488ad-144">Найдите выполнение задания в поле **Сведения о файле журнала** с сообщением **Не удалось выполнить задание** в столбце **Сообщение** .</span><span class="sxs-lookup"><span data-stu-id="488ad-144">Locate the job execution in the **Log file summary** box with the **job failed** message in the **Message** column.</span></span>  
  
    3.  <span data-ttu-id="488ad-145">Разверните узел задания и щелкните шаг задания для просмотра сведений сообщения в области под полем **Сведения о файле журнала** .</span><span class="sxs-lookup"><span data-stu-id="488ad-145">Expand the job node, and click the job step to view the details of the message in the area below the **Log file summary** box.</span></span>  
  
-   <span data-ttu-id="488ad-146">Для пакетов, сохраненных в базе данных SSISDB, можно использовать **Средство просмотра журнала** , а также любые журналы и отладочные файлы дампа, созданные во время выполнения пакета.</span><span class="sxs-lookup"><span data-stu-id="488ad-146">For packages that are stored in the SSISDB database, you can also use the **Log File Viewer** as well as any logs and debug dump files that were generated during the execution of the package.</span></span> <span data-ttu-id="488ad-147">Кроме того, можно использовать отчеты для сервера служб [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="488ad-147">In addition, you can use the reports for the [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] server.</span></span>  
  
     <span data-ttu-id="488ad-148">**Для поиска сведений в отчетах по выполнению пакета, связанного с выполнением задания, выполните следующие действия.**</span><span class="sxs-lookup"><span data-stu-id="488ad-148">**To find information in the reports for the package execution associated with a job execution, do the following.**</span></span>  
  
    1.  <span data-ttu-id="488ad-149">Выполните описанные выше шаги, чтобы просмотреть сведения из сообщения для шага задания.</span><span class="sxs-lookup"><span data-stu-id="488ad-149">Follow the steps above to view the details of the message for the job step.</span></span>  
  
    2.  <span data-ttu-id="488ad-150">Найдите идентификатор выполнения, указанный в сообщении.</span><span class="sxs-lookup"><span data-stu-id="488ad-150">Locate the Execution ID listed in the message.</span></span>  
  
    3.  <span data-ttu-id="488ad-151">Разверните узел каталога служб Integration Services в обозревателе объектов.</span><span class="sxs-lookup"><span data-stu-id="488ad-151">Expand the Integration Services Catalog node in Object Explorer.</span></span>  
  
    4.  <span data-ttu-id="488ad-152">Щелкните правой кнопкой мыши «SSISDB», затем выберите «Отчеты», «Стандартные отчеты», «Все выполнения».</span><span class="sxs-lookup"><span data-stu-id="488ad-152">Right-click SSISDB, point to Reports, then Standard Reports, and then click All Executions.</span></span>  
  
    5.  <span data-ttu-id="488ad-153">В отчете **Все выполнения** найдите идентификатор выполнения в столбце **Идентификатор** .</span><span class="sxs-lookup"><span data-stu-id="488ad-153">In the **All Executions** report, locate the Execution ID in the **ID** column.</span></span> <span data-ttu-id="488ad-154">Щелкните **Общие сведения**, **Все сообщения**или **Производительность выполнения** , чтобы просмотреть сведения об этом выполнении пакета.</span><span class="sxs-lookup"><span data-stu-id="488ad-154">Click **Overview**, **All Messages**, or **Execution Performance** to view information about this package execution.</span></span>  
  
         <span data-ttu-id="488ad-155">Дополнительные сведения об отчетах «Общие сведения», «Все сообщения» и «Производительность выполнения» см. в разделе [Reports for the Integration Services Server](../reports-for-the-integration-services-server.md).</span><span class="sxs-lookup"><span data-stu-id="488ad-155">For more information about the Overview, All Messages, and Execution Performance reports, see [Reports for the Integration Services Server](../reports-for-the-integration-services-server.md).</span></span>  
  
## <a name="external-resources"></a><span data-ttu-id="488ad-156">Внешние ресурсы</span><span class="sxs-lookup"><span data-stu-id="488ad-156">External Resources</span></span>  
  
-   <span data-ttu-id="488ad-157">Статья базы знаний [Пакет служб SSIS не выполняется при вызове пакета из шага задания агента SQL Server](https://support.microsoft.com/kb/918760)на веб-сайте [!INCLUDE[msCoName](../../includes/msconame-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="488ad-157">Knowledge Base article, [An SSIS package does not run when you call the SSIS package from a SQL Server Agent job step](https://support.microsoft.com/kb/918760), on the [!INCLUDE[msCoName](../../includes/msconame-md.md)] Web site</span></span>  
  
-   <span data-ttu-id="488ad-158">Видео с руководством по [устранению неполадок с выполнением пакета с помощью агента SQL Server (видео об SQL Server)](https://go.microsoft.com/fwlink/?LinkId=141772) в библиотеке MSDN.</span><span class="sxs-lookup"><span data-stu-id="488ad-158">Video, [Troubleshooting: Package Execution Using SQL Server Agent (SQL Server Video)](https://go.microsoft.com/fwlink/?LinkId=141772), in the MSDN Library</span></span>  
  
-   <span data-ttu-id="488ad-159">Видео с руководством по [ автоматизации выполнения пакета с помощью агента SQL Server (видео об SQL Server)](https://go.microsoft.com/fwlink/?LinkId=141771) в библиотеке MSDN.</span><span class="sxs-lookup"><span data-stu-id="488ad-159">Video, [How to: Automate Package Execution by Using the SQL Server Agent (SQL Server Video)](https://go.microsoft.com/fwlink/?LinkId=141771), in the MSDN Library</span></span>  
  
-   <span data-ttu-id="488ad-160">Техническая статья [Checking SQL Server Agent jobs using Windows PowerShell (на английском языке)](https://go.microsoft.com/fwlink/?LinkId=165675)на сайте mssqltips.com</span><span class="sxs-lookup"><span data-stu-id="488ad-160">Technical article, [Checking SQL Server Agent jobs using Windows PowerShell](https://go.microsoft.com/fwlink/?LinkId=165675), on mssqltips.com</span></span>  
  
-   <span data-ttu-id="488ad-161">Техническая статья [Auto alert for SQL Agent jobs when they are enabled or disabled (на английском языке)](https://go.microsoft.com/fwlink/?LinkId=165676)на сайте mssqltips.com</span><span class="sxs-lookup"><span data-stu-id="488ad-161">Technical article, [Auto alert for SQL Agent jobs when they are enabled or disabled](https://go.microsoft.com/fwlink/?LinkId=165676), on mssqltips.com</span></span>  
  
-   <span data-ttu-id="488ad-162">Запись в блоге [Настройка заданий агента SQL Server для записи в журнал событий Windows](https://go.microsoft.com/fwlink/?LinkId=220745)на сайте mssqltips.com.</span><span class="sxs-lookup"><span data-stu-id="488ad-162">Blog entry, [Configuring SQL Agent Jobs to Write to Windows Event Log](https://go.microsoft.com/fwlink/?LinkId=220745), on mssqltips.com.</span></span>  
  
  
