---
title: Инструменты устранения неполадок с выполнением пакетов | Документы Майкрософт
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
helpviewer_keywords:
- SQL Server Integration Services packages, troubleshooting
- SSIS packages, troubleshooting
- Integration Services, troubleshooting
- errors [Integration Services], troubleshooting
- packages [Integration Services], troubleshooting
ms.assetid: f18d6ff6-e881-444c-a399-730b52130e7c
author: chugugrace
ms.author: chugu
ms.openlocfilehash: cbb19cddd202ac58cbea5622b4965449c15ba325
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87656460"
---
# <a name="troubleshooting-tools-for-package-execution"></a><span data-ttu-id="1b35b-102">Устранение неполадок инструментов с помощью отчетов</span><span class="sxs-lookup"><span data-stu-id="1b35b-102">Troubleshooting Tools for Package Execution</span></span>
  [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] <span data-ttu-id="1b35b-103">включают функции и инструменты, которые можно использовать для устранения неполадок пакетов после их завершения и развертывания.</span><span class="sxs-lookup"><span data-stu-id="1b35b-103">includes features and tools that you can use to troubleshoot packages when you execute them after they have been completed and deployed.</span></span>  
  
 <span data-ttu-id="1b35b-104">Во время разработки в среде [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)] можно использовать точки останова выполнения пакета, окно хода выполнения и средства просмотра данных для наблюдения за потоком данных.</span><span class="sxs-lookup"><span data-stu-id="1b35b-104">At design time, [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)] provides breakpoints to pause package execution, the Progress window, and data viewers to watch your data as it passes through the data flow.</span></span> <span data-ttu-id="1b35b-105">Однако эти возможности недоступны при выполнении уже развернутых пакетов.</span><span class="sxs-lookup"><span data-stu-id="1b35b-105">However, these features are not available when you are running packages that have been deployed.</span></span> <span data-ttu-id="1b35b-106">Основными методами устранения неполадок в развернутых пакетах являются следующие.</span><span class="sxs-lookup"><span data-stu-id="1b35b-106">The main techniques for troubleshooting deployed packages are as follows:</span></span>  
  
-   <span data-ttu-id="1b35b-107">Перехват и обработка ошибок пакетов с помощью обработчиков событий.</span><span class="sxs-lookup"><span data-stu-id="1b35b-107">Catch and handle package errors by using event handlers.</span></span>  
  
-   <span data-ttu-id="1b35b-108">Обнаружение недопустимых данных с помощью вывода ошибок.</span><span class="sxs-lookup"><span data-stu-id="1b35b-108">Capture bad data by using error outputs.</span></span>  
  
-   <span data-ttu-id="1b35b-109">Отслеживание шагов выполнения пакетов, используя ведение журналов.</span><span class="sxs-lookup"><span data-stu-id="1b35b-109">Track the steps of package execution by using logging.</span></span>  
  
 <span data-ttu-id="1b35b-110">Для предотвращения проблем с выполняющимися пакетами можно также пользоваться следующими советами и методами.</span><span class="sxs-lookup"><span data-stu-id="1b35b-110">You can also use the following tips and techniques to avoid problems with running packages</span></span>  
  
-   <span data-ttu-id="1b35b-111">**Обеспечивайте целостность данных с помощью транзакций**.</span><span class="sxs-lookup"><span data-stu-id="1b35b-111">**Help to ensure data integrity by using transactions**.</span></span> <span data-ttu-id="1b35b-112">Дополнительные сведения см. в разделе [Транзакции служб Integration Services](../integration-services-transactions.md).</span><span class="sxs-lookup"><span data-stu-id="1b35b-112">For more information, see [Integration Services Transactions](../integration-services-transactions.md).</span></span>  
  
-   <span data-ttu-id="1b35b-113">**Перезапускайте пакеты с точки сбоя, используя контрольные точки**.</span><span class="sxs-lookup"><span data-stu-id="1b35b-113">**Restart packages from the point of failure by using checkpoints**.</span></span> <span data-ttu-id="1b35b-114">Дополнительные сведения см. в разделе [Restart Packages by Using Checkpoints](../packages/restart-packages-by-using-checkpoints.md).</span><span class="sxs-lookup"><span data-stu-id="1b35b-114">For more information, see [Restart Packages by Using Checkpoints](../packages/restart-packages-by-using-checkpoints.md).</span></span>  
  
## <a name="catch-and-handle-package-errors-by-using-event-handlers"></a><span data-ttu-id="1b35b-115">Перехват и обработка ошибок пакетов с помощью обработчиков событий</span><span class="sxs-lookup"><span data-stu-id="1b35b-115">Catch and Handle Package Errors by Using Event Handlers</span></span>  
 <span data-ttu-id="1b35b-116">Обработчики событий могут реагировать на многие события, вызванные пакетами и объектами в них.</span><span class="sxs-lookup"><span data-stu-id="1b35b-116">You can respond to the many events that are raised by the package and the objects in the package by using event handlers.</span></span>  
  
-   <span data-ttu-id="1b35b-117">**Создайте обработчик события для события OnError**.</span><span class="sxs-lookup"><span data-stu-id="1b35b-117">**Create an event handler for the OnError event**.</span></span> <span data-ttu-id="1b35b-118">В обработчике событий с помощью задачи «Отправка почты» можно уведомить администратора о сбое, использовать задачу «Скрипт» и специальную логику для получения системных сведений, чтобы устранить неполадки или очистить временные ресурсы и неполные выходные данные.</span><span class="sxs-lookup"><span data-stu-id="1b35b-118">In the event handler, you can use a Send Mail task to notify an administrator of the failure, use a Script task and custom logic to obtain system information for troubleshooting, or clean up temporary resources or incomplete output.</span></span> <span data-ttu-id="1b35b-119">Дополнительные сведения см. в разделе [Обработчики событий в службах Integration Services (SSIS)](../integration-services-ssis-event-handlers.md).</span><span class="sxs-lookup"><span data-stu-id="1b35b-119">For more information, see [Integration Services &#40;SSIS&#41; Event Handlers](../integration-services-ssis-event-handlers.md).</span></span>  
  
## <a name="troubleshoot-bad-data-by-using-error-outputs"></a><span data-ttu-id="1b35b-120">Устранение неполадок в данных путем вывода ошибок</span><span class="sxs-lookup"><span data-stu-id="1b35b-120">Troubleshoot Bad Data by Using Error Outputs</span></span>  
 <span data-ttu-id="1b35b-121">Вывод ошибок, доступный во многих компонентах потока данных, можно использовать для направления строк, содержащих ошибки, в отдельное назначение для последующего анализа.</span><span class="sxs-lookup"><span data-stu-id="1b35b-121">You can use the error output available on many data flow components to direct rows that contain errors to a separate destination for later analysis.</span></span>  
  
-   <span data-ttu-id="1b35b-122">**Обнаруживайте недопустимые данные с помощью вывода ошибок**.</span><span class="sxs-lookup"><span data-stu-id="1b35b-122">**Capture bad data by using error outputs**.</span></span> <span data-ttu-id="1b35b-123">Отправляйте строки, содержащие ошибки, в отдельное назначение, например в таблицу ошибок или текстовый файл.</span><span class="sxs-lookup"><span data-stu-id="1b35b-123">Send rows that contain errors to a separate destination such as an error table or a text file.</span></span> <span data-ttu-id="1b35b-124">Вывод ошибок автоматически добавляет два цифровых столбца, которые содержат номер ошибки, вызвавшей отбрасывание строки, и идентификатор столбца, в котором произошла ошибка.</span><span class="sxs-lookup"><span data-stu-id="1b35b-124">The error output automatically adds two numeric columns that contain the number of the error that caused the row to be rejected, and the ID of the column in which the error occurred.</span></span> <span data-ttu-id="1b35b-125">Дополнительные сведения см. в разделе [Обработка ошибок в данных](../data-flow/error-handling-in-data.md).</span><span class="sxs-lookup"><span data-stu-id="1b35b-125">For more information, see [Error Handling in Data](../data-flow/error-handling-in-data.md).</span></span>  
  
-   <span data-ttu-id="1b35b-126">**Добавляйте дополнительные сведения к выводу ошибок**.</span><span class="sxs-lookup"><span data-stu-id="1b35b-126">**Add friendly information to the error outputs**.</span></span> <span data-ttu-id="1b35b-127">Можно облегчить анализ вывода ошибок, добавив описательные сведения в дополнение к двум цифровым идентификаторам, которые предоставляет вывод ошибок.</span><span class="sxs-lookup"><span data-stu-id="1b35b-127">You can make it easier to analyze the error output by adding descriptive information in addition to the two numeric identifiers that are supplied by the error output.</span></span>  
  
     <span data-ttu-id="1b35b-128">**Добавьте описание ошибки**.</span><span class="sxs-lookup"><span data-stu-id="1b35b-128">**Add the description of the error**.</span></span> <span data-ttu-id="1b35b-129">С помощью задачи «Скрипт» можно легко найти описание ошибки.</span><span class="sxs-lookup"><span data-stu-id="1b35b-129">It is easy to look up the error description by using a Script component.</span></span> <span data-ttu-id="1b35b-130">Дополнительные сведения см. [в разделе Улучшение вывода ошибок для компонента скрипта](../extending-packages-scripting-data-flow-script-component-examples/enhancing-an-error-output-with-the-script-component.md).</span><span class="sxs-lookup"><span data-stu-id="1b35b-130">For more information, see [Enhancing an Error Output for the Script Component](../extending-packages-scripting-data-flow-script-component-examples/enhancing-an-error-output-with-the-script-component.md).</span></span>  
  
     <span data-ttu-id="1b35b-131">**Добавьте имя столбца ошибок**.</span><span class="sxs-lookup"><span data-stu-id="1b35b-131">**Add the name of the error column**.</span></span> <span data-ttu-id="1b35b-132">С помощью компонента скрипта трудно найти имя столбца, соответствующее идентификатору столбца, который сохраняется выводом ошибок. Это требует дополнительных действий.</span><span class="sxs-lookup"><span data-stu-id="1b35b-132">Looking up the column name that corresponds to the column ID saved by the error output cannot easily be done in the Script component and requires additional steps.</span></span> <span data-ttu-id="1b35b-133">Каждый идентификатор столбца является уникальным для задачи потока данных, он сохраняется в пакете во время разработки.</span><span class="sxs-lookup"><span data-stu-id="1b35b-133">Each column ID in a data flow is unique within that Data Flow task, and is persisted in the package at design time.</span></span> <span data-ttu-id="1b35b-134">Для добавления имени столбца к выводу ошибок предлагается следующий подход.</span><span class="sxs-lookup"><span data-stu-id="1b35b-134">The following approach is one suggestion for adding the column name to the error output.</span></span> 
  
    1.  <span data-ttu-id="1b35b-135">**Создайте таблицу уточняющих запросов по именам столбцов**.</span><span class="sxs-lookup"><span data-stu-id="1b35b-135">**Create a lookup table of column names**.</span></span> <span data-ttu-id="1b35b-136">Создайте отдельное приложение, использующее API[!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)], для перебора всех сохраненных пакетов, потоков данных в пакете, объектов в потоке данных, а также входа и выхода в объекте потока данных.</span><span class="sxs-lookup"><span data-stu-id="1b35b-136">Create a separate application that uses the [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] API to iterate over each saved package, each data flow in the package, each object in the data flow, and each input and output in the data flow object.</span></span> <span data-ttu-id="1b35b-137">Это приложение должно сохранять идентификатор столбца и имя каждого столбца в таблице уточняющих запросов вместе с идентификатором родительской задачи потока данных и идентификатором пакета;</span><span class="sxs-lookup"><span data-stu-id="1b35b-137">The application should persist the column ID and name of each column to a lookup table, along with the ID of the parent Data Flow task and the ID of the package.</span></span>  
  
    2.  <span data-ttu-id="1b35b-138">**Добавьте имя столбца в выходные данные**.</span><span class="sxs-lookup"><span data-stu-id="1b35b-138">**Add the column name to the output**.</span></span> <span data-ttu-id="1b35b-139">Добавьте к выводу ошибок преобразование «Уточняющий запрос», выполняющее поиск имени столбца в таблице уточняющих запросов, которая была создана на предыдущем шаге.</span><span class="sxs-lookup"><span data-stu-id="1b35b-139">Add a Lookup transformation to the error output that looks up the column name in the lookup table created in the preceding step.</span></span> <span data-ttu-id="1b35b-140">Поиск может использовать идентификатор столбца в выводе ошибок, идентификатор пакета (доступный в системной переменной System::PackageID) и идентификатор задачи потока данных (доступный в системной переменной System::TaskID).</span><span class="sxs-lookup"><span data-stu-id="1b35b-140">The lookup can use the column ID in the error output, the package ID (available in the system variable System::PackageID), and the ID of the Data Flow task (available in the system variable System::TaskID).</span></span>  
  
## <a name="troubleshoot-package-execution-by-using-operations-reports"></a><span data-ttu-id="1b35b-141">Устранение неполадок выполнения пакетов с помощью отчетов об операциях</span><span class="sxs-lookup"><span data-stu-id="1b35b-141">Troubleshoot Package Execution by Using Operations Reports</span></span>  
 <span data-ttu-id="1b35b-142">Стандартные отчеты об операциях доступны в среде [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] и помогают при наблюдении за пакетами служб [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] , развернутых в каталоге служб [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="1b35b-142">Standard operations reports are available in [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] to help you monitor [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] packages that have been deployed to the [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] catalog.</span></span> <span data-ttu-id="1b35b-143">Они позволяют просмотреть состояние пакета и журнал и, если необходимо, определить причину сбоев.</span><span class="sxs-lookup"><span data-stu-id="1b35b-143">These package reports help you to view package status and history, and, if necessary, identify the cause of failures.</span></span>  
  
 <span data-ttu-id="1b35b-144">Дополнительные сведения см. в разделе [Устранение неполадок пакетов с помощью отчетов](troubleshooting-reports-for-package-execution.md).</span><span class="sxs-lookup"><span data-stu-id="1b35b-144">For more information, see [Troubleshooting Reports for Package Execution](troubleshooting-reports-for-package-execution.md).</span></span>  
  
## <a name="troubleshoot-package-execution-by-using-ssisdb-views"></a><span data-ttu-id="1b35b-145">Устранение неполадок выполнения пакетов с помощью представлений SSISDB</span><span class="sxs-lookup"><span data-stu-id="1b35b-145">Troubleshoot Package Execution by Using SSISDB Views</span></span>  
 <span data-ttu-id="1b35b-146">Доступно несколько представлений базы данных SSISDB, к которым вы можете выполнить запрос с целью мониторинга выполнения пакетов и получения сведений для других операторов.</span><span class="sxs-lookup"><span data-stu-id="1b35b-146">A number of SSISDB database views are available that you can query to monitor package execution and other operations information.</span></span> <span data-ttu-id="1b35b-147">Дополнительные сведения см. в разделе [мониторинг выполнения пакетов и других операций](../performance/monitor-running-packages-and-other-operations.md).</span><span class="sxs-lookup"><span data-stu-id="1b35b-147">For more information, see [Monitoring for Package Executions and Other Operations](../performance/monitor-running-packages-and-other-operations.md).</span></span>  
  
## <a name="troubleshoot-package-execution-by-using-logging"></a><span data-ttu-id="1b35b-148">Устранение неполадок выполнения пакетов с помощью журналов</span><span class="sxs-lookup"><span data-stu-id="1b35b-148">Troubleshoot Package Execution by Using Logging</span></span>  
 <span data-ttu-id="1b35b-149">С помощью ведения журналов можно отследить многие события в выполняющихся пакетах.</span><span class="sxs-lookup"><span data-stu-id="1b35b-149">You can track much of what occurs in your running packages by enabling logging.</span></span> <span data-ttu-id="1b35b-150">Регистраторы захватывают сведения о конкретных событиях с целью последующего анализа и сохраняют их в таблицу базы данных, неструктурированный файл, XML-файл или в любом другом поддерживаемом формате вывода данных.</span><span class="sxs-lookup"><span data-stu-id="1b35b-150">Log providers capture information about the specified events for later analysis, and save that information in a database table, a flat file, an XML file, or another supported output format.</span></span>  
  
-   <span data-ttu-id="1b35b-151">**Включите ведение журналов**.</span><span class="sxs-lookup"><span data-stu-id="1b35b-151">**Enable logging**.</span></span> <span data-ttu-id="1b35b-152">Выходные данные журналов можно детализировать, выбрав только события и только объекты, сведения о которых требуется захватить.</span><span class="sxs-lookup"><span data-stu-id="1b35b-152">You can refine the logging output by selecting only the events and only the items of information that you want to capture.</span></span> <span data-ttu-id="1b35b-153">Дополнительные сведения см. в разделах [Ведение журналов в службах Integration Services (SSIS)](../performance/integration-services-ssis-logging.md) и [Ведение журналов в службах Integration Services (SSIS)](../performance/integration-services-ssis-logging.md).</span><span class="sxs-lookup"><span data-stu-id="1b35b-153">For more information, see [Integration Services &#40;SSIS&#41; Logging](../performance/integration-services-ssis-logging.md) and [Integration Services &#40;SSIS&#41; Logging](../performance/integration-services-ssis-logging.md).</span></span>  
  
-   <span data-ttu-id="1b35b-154">**Для устранения неполадок, связанных с поставщиком, выберите событие пакета, называемое «Диагностика».**</span><span class="sxs-lookup"><span data-stu-id="1b35b-154">**Select the package's Diagnostic event to troubleshoot provider issues.**</span></span> <span data-ttu-id="1b35b-155">Существуют сообщения журнала, которые могут помочь при устранении неполадок взаимодействия пакета с внешним источником данных.</span><span class="sxs-lookup"><span data-stu-id="1b35b-155">There are logging messages that help you troubleshoot a package's interaction with external data sources.</span></span> <span data-ttu-id="1b35b-156">Дополнительные сведения см. в статье [Troubleshooting Tools Package Connectivity](troubleshooting-tools-for-package-connectivity.md).</span><span class="sxs-lookup"><span data-stu-id="1b35b-156">For more information, see [Troubleshooting Tools Package Connectivity](troubleshooting-tools-for-package-connectivity.md).</span></span>  
  
-   <span data-ttu-id="1b35b-157">**Дополните выходные данные журналов**.</span><span class="sxs-lookup"><span data-stu-id="1b35b-157">**Enhance the default logging output**.</span></span> <span data-ttu-id="1b35b-158">При обычном ведении журналов строки присоединяются к назначению при каждом выполнении пакета.</span><span class="sxs-lookup"><span data-stu-id="1b35b-158">Logging typically appends rows to the logging destination each time that a package is run.</span></span> <span data-ttu-id="1b35b-159">Хотя каждая строка выходных данных журнала определяет пакет по имени и уникальному идентификатору, а также определяет выполнение пакета по уникальному идентификатору ExecutionID, большой объем выходных данных анализировать трудно.</span><span class="sxs-lookup"><span data-stu-id="1b35b-159">Although each row of logging output identifies the package by its name and unique identifier, and also identifies the execution of the package by a unique ExecutionID, the large quantity of logging output in a single list can become difficult to analyze.</span></span>  
  
     <span data-ttu-id="1b35b-160">В следующем подходе предлагается расширить выходные данные журнала и облегчить создание отчетов:</span><span class="sxs-lookup"><span data-stu-id="1b35b-160">The following approach is one suggestion for enhancing the default logging output and making it easier to generate reports:</span></span>  
  
    1.  <span data-ttu-id="1b35b-161">**Создайте родительскую таблицу, в которой регистрируется каждое выполнение пакета**.</span><span class="sxs-lookup"><span data-stu-id="1b35b-161">**Create a parent table that logs each execution of a package**.</span></span> <span data-ttu-id="1b35b-162">В этой родительской таблице предусматривается одна строка для каждого выполнения пакета, а идентификатор ExecutionID используется для связи с дочерними записями в таблице журналов службы [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="1b35b-162">This parent table has only a single row for each execution of a package, and uses the ExecutionID to link to the child records in the [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] logging table.</span></span> <span data-ttu-id="1b35b-163">Для создания новой строки и регистрации времени начала можно использовать задачу «Выполнение SQL».</span><span class="sxs-lookup"><span data-stu-id="1b35b-163">You can use an Execute SQL task at the beginning of each package to create this new row and to record the start time.</span></span> <span data-ttu-id="1b35b-164">Затем при завершении пакета можно обновить строку временем окончания, продолжительностью и состоянием;</span><span class="sxs-lookup"><span data-stu-id="1b35b-164">Then you can use another Execute SQL task at the end of the package to update the row with the end time, duration, and status.</span></span>  
  
    2.  <span data-ttu-id="1b35b-165">**Добавьте к потоку данных данные аудита**.</span><span class="sxs-lookup"><span data-stu-id="1b35b-165">**Add auditing information to the data flow**.</span></span> <span data-ttu-id="1b35b-166">Преобразование «Аудит» можно использовать для добавления к строкам в потоке данных сведений о выполнении пакета, который создал или изменил каждую строку.</span><span class="sxs-lookup"><span data-stu-id="1b35b-166">You can use the Audit transformation to add information to rows in the data flow about the package execution that created or modified each row.</span></span> <span data-ttu-id="1b35b-167">Преобразование «Аудит» предоставляет девять разделов сведений, в том числе PackageName и ExecutionInstanceGUID.</span><span class="sxs-lookup"><span data-stu-id="1b35b-167">The Audit transformation makes nine pieces of information available, including the PackageName and ExecutionInstanceGUID.</span></span> <span data-ttu-id="1b35b-168">Дополнительные сведения см. в разделе [Audit Transformation](../data-flow/transformations/audit-transformation.md).</span><span class="sxs-lookup"><span data-stu-id="1b35b-168">For more information, see [Audit Transformation](../data-flow/transformations/audit-transformation.md).</span></span> <span data-ttu-id="1b35b-169">Если в каждую строку в целях аудита требуется включить пользовательские данные, их можно добавить в поток данных с помощью преобразования "Производный столбец".</span><span class="sxs-lookup"><span data-stu-id="1b35b-169">If you have custom information that you would also like to include in each row for auditing purposes, you can add this information to rows in the data flow by using a Derived Column transformation.</span></span> <span data-ttu-id="1b35b-170">Дополнительные сведения см. в разделе [Derived Column Transformation](../data-flow/transformations/derived-column-transformation.md).</span><span class="sxs-lookup"><span data-stu-id="1b35b-170">For more information, see [Derived Column Transformation](../data-flow/transformations/derived-column-transformation.md).</span></span>  
  
    3.  <span data-ttu-id="1b35b-171">**Рассмотрите возможность захвата данных счетчика строк**.</span><span class="sxs-lookup"><span data-stu-id="1b35b-171">**Consider capturing row count data**.</span></span> <span data-ttu-id="1b35b-172">Создайте отдельную таблицу для данных счетчика строк, в которой каждый экземпляр выполнения пакета определяется идентификатором ExecutionID.</span><span class="sxs-lookup"><span data-stu-id="1b35b-172">Consider creating a separate table for row count information, where each instance of package execution is identified by its ExecutionID.</span></span> <span data-ttu-id="1b35b-173">Используйте преобразование «Счетчик строк» для сохранения числа строк в последовательность переменных в критических точках потока данных.</span><span class="sxs-lookup"><span data-stu-id="1b35b-173">Use the Row Count transformation to save the row count into a series of variables at critical points in the data flow.</span></span> <span data-ttu-id="1b35b-174">После окончания потока данных используйте задачу «Выполнение SQL» для вставки этой последовательности значений в строку таблицы для последующего анализа и отчета.</span><span class="sxs-lookup"><span data-stu-id="1b35b-174">After the data flow ends, use an Execute SQL task to insert the series of values into a row in the table for later analysis and reporting.</span></span>  
  
     <span data-ttu-id="1b35b-175">Дополнительные сведения об этом подходе см. в статье "ETL Auditing and Logging" (ETL: аудит и ведение журналов), входящей в технический документ [!INCLUDE[msCoName](../../includes/msconame-md.md)][Project REAL: Business Intelligence ETL Design Practices](https://www.microsoft.com/download/details.aspx?id=14582) (Project REAL. Рекомендации по разработке ETL-решения для бизнес-аналитики).</span><span class="sxs-lookup"><span data-stu-id="1b35b-175">For more information about this approach, see the section, "ETL Auditing and Logging," in the [!INCLUDE[msCoName](../../includes/msconame-md.md)] white paper, [Project REAL: Business Intelligence ETL Design Practices](https://www.microsoft.com/download/details.aspx?id=14582).</span></span>  
  
## <a name="troubleshoot-package-execution-by-using-debug-dump-files"></a><span data-ttu-id="1b35b-176">Устранение неполадок выполнения пакетов с помощью отладочных файлов дампа</span><span class="sxs-lookup"><span data-stu-id="1b35b-176">Troubleshoot Package Execution by Using Debug Dump Files</span></span>  
 <span data-ttu-id="1b35b-177">Службы [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)]позволяют создавать отладочные файлы дампа с информацией о выполнении пакета.</span><span class="sxs-lookup"><span data-stu-id="1b35b-177">In [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)], you can create debug dump files that provide information about the execution of a package.</span></span> <span data-ttu-id="1b35b-178">Дополнительные сведения см. в статье [Generating Dump Files for Package Execution](generating-dump-files-for-package-execution.md).</span><span class="sxs-lookup"><span data-stu-id="1b35b-178">For more information, see [Generating Dump Files for Package Execution](generating-dump-files-for-package-execution.md).</span></span>  
  
## <a name="troubleshoot-run-time-validation-issues"></a><span data-ttu-id="1b35b-179">Устранение неполадок проверки во время выполнения</span><span class="sxs-lookup"><span data-stu-id="1b35b-179">Troubleshoot Run-time Validation Issues</span></span>  
 <span data-ttu-id="1b35b-180">Иногда невозможно подключиться к источникам данных или проверить компоненты пакета, пока не будут выполнены предыдущие задачи пакета.</span><span class="sxs-lookup"><span data-stu-id="1b35b-180">Sometimes you might not be able to connect to your data sources, or portions of your package cannot be validated, until prior tasks in the package have executed.</span></span> [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] <span data-ttu-id="1b35b-181">предусмотрены следующие возможности для предотвращения ошибок проверки, которые в противном случае возникли бы в этих условиях.</span><span class="sxs-lookup"><span data-stu-id="1b35b-181">includes the following features to help you avoid the validation errors that would otherwise result from these conditions:</span></span>  
  
-   <span data-ttu-id="1b35b-182">**Настройте свойство DelayValidation элементов пакета, недопустимых при загрузке пакета**.</span><span class="sxs-lookup"><span data-stu-id="1b35b-182">**Configure the DelayValidation property on package elements that are not valid when the package is loaded**.</span></span> <span data-ttu-id="1b35b-183">Свойству `DelayValidation` элемента пакета с недопустимой настройкой можно присвоить значение `True`, чтобы избежать ошибок проверки во время загрузки пакета.</span><span class="sxs-lookup"><span data-stu-id="1b35b-183">You can set `DelayValidation` to `True` on package elements whose configuration is not valid, to prevent validation errors when the package is loaded.</span></span> <span data-ttu-id="1b35b-184">Например, может существовать задача потока данных, использующая целевую таблицу, которая не существует до тех пор, пока задача «Выполнение SQL» не создаст таблицу во время выполнения.</span><span class="sxs-lookup"><span data-stu-id="1b35b-184">For example, you may have a Data Flow task that uses a destination table that does not exist until an Execute SQL task creates the table at run time.</span></span> <span data-ttu-id="1b35b-185">Свойство `DelayValidation` можно включить на уровне пакета или на уровне отдельных задач или контейнеров, содержащихся в пакете.</span><span class="sxs-lookup"><span data-stu-id="1b35b-185">The `DelayValidation` property can be enabled at the package level, or at the level of the individual tasks and containers that the package includes.</span></span>  
  
     <span data-ttu-id="1b35b-186">Свойство `DelayValidation` устанавливается в задаче потока данных, но не в отдельных компонентах потока данных.</span><span class="sxs-lookup"><span data-stu-id="1b35b-186">The `DelayValidation` property can be set on a Data Flow task, but not on individual data flow components.</span></span> <span data-ttu-id="1b35b-187">Тех же результатов можно добиться, присвоив свойству <xref:Microsoft.SqlServer.Dts.Pipeline.Wrapper.IDTSComponentMetaData100.ValidateExternalMetadata%2A> отдельного компонента потока данных значение `false`.</span><span class="sxs-lookup"><span data-stu-id="1b35b-187">You can achieve a similar effect by setting the <xref:Microsoft.SqlServer.Dts.Pipeline.Wrapper.IDTSComponentMetaData100.ValidateExternalMetadata%2A> property of individual data flow components to `false`.</span></span> <span data-ttu-id="1b35b-188">Однако если значение этого свойства равно `false`, компонент не узнает об изменениях метаданных внешних источников данных.</span><span class="sxs-lookup"><span data-stu-id="1b35b-188">However, when the value of this property is `false`, the component is not aware of changes to the metadata of external data sources.</span></span> <span data-ttu-id="1b35b-189">Если свойству <xref:Microsoft.SqlServer.Dts.Pipeline.Wrapper.IDTSComponentMetaData100.ValidateExternalMetadata%2A> присвоено значение `true`, это может помочь избежать критических препятствий, возникающих из-за блокировки базы данных, особенно при использовании пакетом транзакций.</span><span class="sxs-lookup"><span data-stu-id="1b35b-189">When set to `true`, the <xref:Microsoft.SqlServer.Dts.Pipeline.Wrapper.IDTSComponentMetaData100.ValidateExternalMetadata%2A> property can help to avoid blocking issues caused by locking in the database, especially when the package is using transactions.</span></span>  
  
## <a name="troubleshoot-run-time-permissions-issues"></a><span data-ttu-id="1b35b-190">Устранение проблем с разрешениями во время выполнения</span><span class="sxs-lookup"><span data-stu-id="1b35b-190">Troubleshoot Run-time Permissions Issues</span></span>  
 <span data-ttu-id="1b35b-191">Если возникают ошибки при попытке выполнения развернутых пакетов с использованием агента служб [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , их причина может заключаться в отсутствии нужных разрешений у учетных записей агента.</span><span class="sxs-lookup"><span data-stu-id="1b35b-191">If you encounter errors when trying to run deployed packages by using [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent, the accounts used by Agent might not have the required permissions.</span></span> <span data-ttu-id="1b35b-192">Сведения о решении проблем с пакетами, запускаемыми из агента заданий [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , см. в статье [Пакет служб SSIS не выполняется при вызове пакета из шага задания агента SQL Server](https://support.microsoft.com/kb/918760).</span><span class="sxs-lookup"><span data-stu-id="1b35b-192">For information on how to troubleshoot packages that are run from [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent jobs, see [An SSIS package does not run when you call the SSIS package from a SQL Server Agent job step](https://support.microsoft.com/kb/918760).</span></span> <span data-ttu-id="1b35b-193">Дополнительные сведения о запуске пакетов из заданий агента [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] см. в разделе [Пакеты служб из заданий агента SQL Server](../packages/sql-server-agent-jobs-for-packages.md).</span><span class="sxs-lookup"><span data-stu-id="1b35b-193">For more information on how to run packages from [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent jobs, see [SQL Server Agent Jobs for Packages](../packages/sql-server-agent-jobs-for-packages.md).</span></span>  
  
 <span data-ttu-id="1b35b-194">Чтобы подключиться к источникам данных Excel или Access, агенту [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] требуется учетная запись с разрешениями на чтение, запись, создание и удаление временных файлов в папке, заданной переменными среды TEMP и TMP.</span><span class="sxs-lookup"><span data-stu-id="1b35b-194">To connect to Excel or Access data sources, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent requires an account that has permission to read, write, create, and delete temporary files in the folder that is specified by the TEMP and TMP environment variables.</span></span>  
  
## <a name="troubleshoot-64-bit-issues"></a><span data-ttu-id="1b35b-195">Устранение неполадок для 64-разрядных платформ</span><span class="sxs-lookup"><span data-stu-id="1b35b-195">Troubleshoot 64-bit Issues</span></span>  
  
-   <span data-ttu-id="1b35b-196">**Некоторые поставщики данных недоступны на 64-разрядных платформах**.</span><span class="sxs-lookup"><span data-stu-id="1b35b-196">**Some data providers are not available on the 64-bit platform**.</span></span> <span data-ttu-id="1b35b-197">Особенно часто в 64-разрядной версии недоступен поставщик OLE DB [!INCLUDE[msCoName](../../includes/msconame-md.md)] Jet, который требуется для подключения к источникам данных Excel и Access.</span><span class="sxs-lookup"><span data-stu-id="1b35b-197">In particular, the [!INCLUDE[msCoName](../../includes/msconame-md.md)] Jet OLE DB Provider that is required to connect to Excel or Access data sources is not available in a 64-bit version.</span></span>  
  
## <a name="troubleshoot-errors-without-a-description"></a><span data-ttu-id="1b35b-198">Устранение неполадок, когда ошибка выдается без описания</span><span class="sxs-lookup"><span data-stu-id="1b35b-198">Troubleshoot Errors without a Description</span></span>  
 <span data-ttu-id="1b35b-199">Если ошибка служб [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] выдается без описания, это описание можно найти в [Справочнике по сообщениям об ошибках служб Integration Services](../integration-services-error-and-message-reference.md) , выполнив поиск по номеру ошибки.</span><span class="sxs-lookup"><span data-stu-id="1b35b-199">If you encounter an [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] error that does not have an accompanying description, you can locate the description in [Integration Services Error and Message Reference](../integration-services-error-and-message-reference.md) by looking up the error by its number.</span></span> <span data-ttu-id="1b35b-200">Этот список сейчас не включает сведения об устранении неполадок.</span><span class="sxs-lookup"><span data-stu-id="1b35b-200">The list does not include troubleshooting information at this time.</span></span>  
  
## <a name="related-tasks"></a><span data-ttu-id="1b35b-201">Связанные задачи</span><span class="sxs-lookup"><span data-stu-id="1b35b-201">Related Tasks</span></span>  
 [<span data-ttu-id="1b35b-202">Настройка вывода ошибок в компоненте потока данных</span><span class="sxs-lookup"><span data-stu-id="1b35b-202">Configure an Error Output in a Data Flow Component</span></span>](../configure-an-error-output-in-a-data-flow-component.md)  
  
  
