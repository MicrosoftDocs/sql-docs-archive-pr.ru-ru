---
title: Ведение журналов в службах Integration Services (SSIS) | Документы Майкрософт
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
helpviewer_keywords:
- containers [Integration Services], logs
- Windows Event log provider [Integration Services]
- XML File log provider [Integration Services]
- SQL Server Profiler, log provider
- SQL Server Integration Services packages, logs
- SSIS packages, logs
- tasks [Integration Services], logs
- logs [Integration Services], log providers
- Integration Services packages, logs
- log providers [Integration Services]
- packages [Integration Services], logs
- Text File log provider
- SQL Server log provider
ms.assetid: 65e17889-371f-4951-9a7e-9932b2d0dcde
author: chugugrace
ms.author: chugu
ms.openlocfilehash: f79a8bf7889948a17671f9373bec30e8fdf78ba2
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87655802"
---
# <a name="integration-services-ssis-logging"></a><span data-ttu-id="69a56-102">Ведение журналов в службах Integration Services (SSIS)</span><span class="sxs-lookup"><span data-stu-id="69a56-102">Integration Services (SSIS) Logging</span></span>
  <span data-ttu-id="69a56-103">Службы [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] содержат регистраторы, которые могут использоваться для реализации ведения журналов в пакетах, контейнерах и задачах.</span><span class="sxs-lookup"><span data-stu-id="69a56-103">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] includes log providers that you can use to implement logging in packages, containers, and tasks.</span></span> <span data-ttu-id="69a56-104">При ведении журнала можно записать текущие сведения о пакете, что поможет при каждом выполнении пакета проводить его аудит и устранять неисправности.</span><span class="sxs-lookup"><span data-stu-id="69a56-104">With logging, you can capture run-time information about a package, helping you audit and troubleshoot a package every time it is run.</span></span> <span data-ttu-id="69a56-105">Например, журнал может записать имя оператора, запускающего пакет, и время, в которое пакет был начат или завершен.</span><span class="sxs-lookup"><span data-stu-id="69a56-105">For example, a log can capture the name of the operator who ran the package and the time the package began and finished.</span></span>  
  
 <span data-ttu-id="69a56-106">Вы можете настроить область ведения журнала на время выполнения пакета на сервере [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="69a56-106">You can configure the scope of logging that occurs during a package execution on the [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] server.</span></span> <span data-ttu-id="69a56-107">Дополнительные сведения см. в разделе [Включение ведения журналов при выполнении пакета на сервере служб SSIS](../enable-logging-for-package-execution-on-the-ssis-server.md).</span><span class="sxs-lookup"><span data-stu-id="69a56-107">For more information, see [Enable Logging for Package Execution on the SSIS Server](../enable-logging-for-package-execution-on-the-ssis-server.md).</span></span>  
  
 <span data-ttu-id="69a56-108">Можно также включить ведение журнала при выполнении пакета из командной строки с помощью программы **dtexec** .</span><span class="sxs-lookup"><span data-stu-id="69a56-108">You can also include logging when you run a package using the **dtexec** command prompt utility.</span></span> <span data-ttu-id="69a56-109">Дополнительные сведения об аргументах командной строки, относящихся к ведению журналов, см. в разделе [служебная программа dtexec](../packages/dtexec-utility.md).</span><span class="sxs-lookup"><span data-stu-id="69a56-109">For more information about the command prompt arguments that support logging, see [dtexec Utility](../packages/dtexec-utility.md).</span></span>  
  
## <a name="configure-logging-in-sql-server-data-tools"></a><span data-ttu-id="69a56-110">Настройка ведения журналов в SQL Server Data Tools</span><span class="sxs-lookup"><span data-stu-id="69a56-110">Configure Logging in SQL Server Data Tools</span></span>  
 <span data-ttu-id="69a56-111">Журналы ассоциируются с пакетами и настраиваются на уровне пакета.</span><span class="sxs-lookup"><span data-stu-id="69a56-111">Logs are associated with packages and are configured at the package level.</span></span> <span data-ttu-id="69a56-112">Каждая задача или контейнер пакета может вести журнал в любом журнале пакета.</span><span class="sxs-lookup"><span data-stu-id="69a56-112">Each task or container in a package can log information to any package log.</span></span> <span data-ttu-id="69a56-113">Можно включить ведение журналов задач и контейнеров пакета, даже если ведение журнала содержащего их пакета не включено.</span><span class="sxs-lookup"><span data-stu-id="69a56-113">The tasks and containers in a package can be enabled for logging even if the package itself is not.</span></span> <span data-ttu-id="69a56-114">Например, можно включить ведение журнала задачи «Выполнение SQL», не включая ведение журнала ее родительского пакета.</span><span class="sxs-lookup"><span data-stu-id="69a56-114">For example, you can enable logging on an Execute SQL task without enabling logging on the parent package.</span></span> <span data-ttu-id="69a56-115">Пакет, контейнер и задача могут делать записи в нескольких журналах.</span><span class="sxs-lookup"><span data-stu-id="69a56-115">A package, container, or task can write to multiple logs.</span></span> <span data-ttu-id="69a56-116">Можно включить ведение журнала только для пакета либо для любой индивидуальной задачи или контейнера, содержащегося в пакете.</span><span class="sxs-lookup"><span data-stu-id="69a56-116">You can enable logging on the package only, or you can choose to enable logging on any individual task or container that the package includes.</span></span>  
  
 <span data-ttu-id="69a56-117">При добавлении журнала к пакету выберите регистратор и место расположения журнала.</span><span class="sxs-lookup"><span data-stu-id="69a56-117">When you add the log to a package, you choose the log provider and the location of the log.</span></span> <span data-ttu-id="69a56-118">Регистратор указывает формат для журнальных данных: например, база данных служб [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] или текстовый файл.</span><span class="sxs-lookup"><span data-stu-id="69a56-118">The log provider specifies the format for the log data: for example, a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] database or text file.</span></span>  
  
 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] <span data-ttu-id="69a56-119">включают следующие регистраторы.</span><span class="sxs-lookup"><span data-stu-id="69a56-119">includes the following log providers:</span></span>  
  
-   <span data-ttu-id="69a56-120">Поставщики журналов текстовых файлов, которые ведут журнальные записи в текстовых файлах ASCII в формате значений, разделенных запятыми (CSV).</span><span class="sxs-lookup"><span data-stu-id="69a56-120">The Text File log provider, which writes log entries to ASCII text files in a comma-separated value (CSV) format.</span></span> <span data-ttu-id="69a56-121">По умолчанию для имени файла для данного регистратора используется расширение LOG.</span><span class="sxs-lookup"><span data-stu-id="69a56-121">The default file name extension for this provider is .log.</span></span>  
  
-   <span data-ttu-id="69a56-122">Поставщик журнала [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] , который записывает трассировки, которые могут быть просмотрены с использованием приложения [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Profiler.</span><span class="sxs-lookup"><span data-stu-id="69a56-122">The [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] log provider, which writes traces that you can view using [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Profiler.</span></span> <span data-ttu-id="69a56-123">По умолчанию для имени файла данного регистратора используется расширение TRC.</span><span class="sxs-lookup"><span data-stu-id="69a56-123">The default file name extension for this provider is .trc.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="69a56-124">Нельзя использовать регистратор [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] в пакете, работающем в 64-разрядном режиме.</span><span class="sxs-lookup"><span data-stu-id="69a56-124">You cannot use the [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] log provider in a package that is running in 64-bit mode.</span></span>  
  
-   <span data-ttu-id="69a56-125">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]Регистратор, который записывает записи журнала в `sysssislog` таблицу в [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] базе данных.</span><span class="sxs-lookup"><span data-stu-id="69a56-125">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] log provider, which writes log entries to the `sysssislog` table in a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] database.</span></span>  
  
-   <span data-ttu-id="69a56-126">Поставщик службы Windows «Журнал событий», который ведет журнальные записи в прикладном журнале службы Windows «Журнал событий» на локальном компьютере.</span><span class="sxs-lookup"><span data-stu-id="69a56-126">The Windows Event log provider, which writes entries to the Application log in the Windows Event log on the local computer.</span></span>  
  
-   <span data-ttu-id="69a56-127">Поставщик журнала XML File, который записывает журнальные файлы в XML-файл.</span><span class="sxs-lookup"><span data-stu-id="69a56-127">The XML File log provider, which writes log files to an XML file.</span></span> <span data-ttu-id="69a56-128">По умолчанию для имени файла данного регистратора используется расширение XML.</span><span class="sxs-lookup"><span data-stu-id="69a56-128">The default file name extension for this provider is .xml.</span></span>  
  
 <span data-ttu-id="69a56-129">При добавлении регистратора к пакету или программной настройке ведения журнала для идентификации регистратора используйте или ProgID, или ClassID. Это делается вместо использования имен, которые конструктор служб [!INCLUDE[ssIS](../../includes/ssis-md.md)] отображает в диалоговом окне **Настройка журналов служб SSIS** .</span><span class="sxs-lookup"><span data-stu-id="69a56-129">If you add a log provider to a package or configure logging programmatically, you can use either a ProgID or ClassID to identify the log provider, instead of using the names that [!INCLUDE[ssIS](../../includes/ssis-md.md)] Designer displays in the **Configure SSIS Logs** dialog box.</span></span>  
  
 <span data-ttu-id="69a56-130">В следующей таблице перечислены идентификаторы ProgID и ClassID для регистраторов, содержащихся в службах [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] , а также указано расположение журналов, в которые регистраторы записывают данные.</span><span class="sxs-lookup"><span data-stu-id="69a56-130">The following table lists the ProgID and ClassID for the log providers that [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] includes, and the location of the logs to which log providers write.</span></span>  
  
|<span data-ttu-id="69a56-131">Регистратор</span><span class="sxs-lookup"><span data-stu-id="69a56-131">Log provider</span></span>|<span data-ttu-id="69a56-132">ProgID:</span><span class="sxs-lookup"><span data-stu-id="69a56-132">ProgID</span></span>|<span data-ttu-id="69a56-133">ClassID:</span><span class="sxs-lookup"><span data-stu-id="69a56-133">ClassID</span></span>|<span data-ttu-id="69a56-134">Location</span><span class="sxs-lookup"><span data-stu-id="69a56-134">Location</span></span>|  
|------------------|------------|-------------|--------------|  
|<span data-ttu-id="69a56-135">текстовый файл</span><span class="sxs-lookup"><span data-stu-id="69a56-135">Text file</span></span>|<span data-ttu-id="69a56-136">DTS.LogProviderTextFile</span><span class="sxs-lookup"><span data-stu-id="69a56-136">DTS.LogProviderTextFile</span></span>|<span data-ttu-id="69a56-137">{0A039101-ACC1-4E06-943F-279948323883}</span><span class="sxs-lookup"><span data-stu-id="69a56-137">{0A039101-ACC1-4E06-943F-279948323883}</span></span>|<span data-ttu-id="69a56-138">Используемый регистратором диспетчер подключения файлов определяет путь к текстовому файлу.</span><span class="sxs-lookup"><span data-stu-id="69a56-138">The File connection manager that the log provider uses specifies the path of the text file.</span></span>|  
|<span data-ttu-id="69a56-139">Приложение SQL Server Profiler</span><span class="sxs-lookup"><span data-stu-id="69a56-139">SQL Server Profiler</span></span>|<span data-ttu-id="69a56-140">DTS.LogProviderSQLProfiler</span><span class="sxs-lookup"><span data-stu-id="69a56-140">DTS.LogProviderSQLProfiler</span></span>|<span data-ttu-id="69a56-141">{E93F6300-AE0C-4916-A7BF-A8D0CE12C77A}</span><span class="sxs-lookup"><span data-stu-id="69a56-141">{E93F6300-AE0C-4916-A7BF-A8D0CE12C77A}</span></span>|<span data-ttu-id="69a56-142">Используемый регистратором диспетчер подключения файлов определяет путь к текстовому файлу, необходимому для [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)].</span><span class="sxs-lookup"><span data-stu-id="69a56-142">The File connection manager that the log provider uses specifies the path of the file used by [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)].</span></span>|  
|<span data-ttu-id="69a56-143">SQL Server</span><span class="sxs-lookup"><span data-stu-id="69a56-143">SQL Server</span></span>|<span data-ttu-id="69a56-144">DTS.LogProviderSQLServer</span><span class="sxs-lookup"><span data-stu-id="69a56-144">DTS.LogProviderSQLServer</span></span>|<span data-ttu-id="69a56-145">{94150B25-6AEB-4C0D-996D-D37D1C4FDEDA}</span><span class="sxs-lookup"><span data-stu-id="69a56-145">{94150B25-6AEB-4C0D-996D-D37D1C4FDEDA}</span></span>|<span data-ttu-id="69a56-146">Используемый регистратором диспетчер соединений с OLE DB определяет базу данных [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , содержащую таблицу sysssislog с записями журнала.</span><span class="sxs-lookup"><span data-stu-id="69a56-146">The OLE DB connection manager that the log provider uses specifies the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] database that contains the sysssislog table with the log entries.</span></span>|  
|<span data-ttu-id="69a56-147">Журнал событий Windows</span><span class="sxs-lookup"><span data-stu-id="69a56-147">Windows Event Log</span></span>|<span data-ttu-id="69a56-148">DTS.LogProviderEventLog</span><span class="sxs-lookup"><span data-stu-id="69a56-148">DTS.LogProviderEventLog</span></span>|<span data-ttu-id="69a56-149">{071CC8EB-C343-4CFF-8D58-564B92FCA3CF}</span><span class="sxs-lookup"><span data-stu-id="69a56-149">{071CC8EB-C343-4CFF-8D58-564B92FCA3CF}</span></span>|<span data-ttu-id="69a56-150">Журнал приложений в средстве просмотра событий Windows содержит сведения о событиях служб [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="69a56-150">The Application log in Windows Event Viewer contains the [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] log information.</span></span>|  
|<span data-ttu-id="69a56-151">XML-файл</span><span class="sxs-lookup"><span data-stu-id="69a56-151">XML File</span></span>|<span data-ttu-id="69a56-152">DTS.LogProviderXMLFile</span><span class="sxs-lookup"><span data-stu-id="69a56-152">DTS.LogProviderXMLFile</span></span>|<span data-ttu-id="69a56-153">{440945A4-2A22-4F19-B577-EAF5FDDC5F7A}</span><span class="sxs-lookup"><span data-stu-id="69a56-153">{440945A4-2A22-4F19-B577-EAF5FDDC5F7A}</span></span>|<span data-ttu-id="69a56-154">Используемый регистратором диспетчер соединения файлов определяет путь к XML-файлу.</span><span class="sxs-lookup"><span data-stu-id="69a56-154">The File connection manager that the log provider uses specifies the path of the XML file.</span></span>|  
  
 <span data-ttu-id="69a56-155">Возможно также создание пользовательских регистраторов.</span><span class="sxs-lookup"><span data-stu-id="69a56-155">You can also create custom log providers.</span></span> <span data-ttu-id="69a56-156">Дополнительные сведения см. в разделе [Creating a Custom Log Provider](../extending-packages-custom-objects/log-provider/creating-a-custom-log-provider.md).</span><span class="sxs-lookup"><span data-stu-id="69a56-156">For more information, see [Creating a Custom Log Provider](../extending-packages-custom-objects/log-provider/creating-a-custom-log-provider.md).</span></span>  
  
 <span data-ttu-id="69a56-157">Регистраторы в пакете являются элементами коллекции регистраторов пакета.</span><span class="sxs-lookup"><span data-stu-id="69a56-157">The log providers in a package are members of the log providers collection of the package.</span></span> <span data-ttu-id="69a56-158">При создании пакета и реализации ведения журналов с использованием конструктора служб [!INCLUDE[ssIS](../../includes/ssis-md.md)] вы можете видеть список элементов коллекции в папках **Регистратор** на вкладке **Обозреватель пакетов** конструктора служб [!INCLUDE[ssIS](../../includes/ssis-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="69a56-158">When you create a package and implement logging by using [!INCLUDE[ssIS](../../includes/ssis-md.md)] Designer, you can see a list of the collection members in the **Log Provider** folders on the **Package Explorer** tab of [!INCLUDE[ssIS](../../includes/ssis-md.md)] Designer.</span></span>  
  
 <span data-ttu-id="69a56-159">Настройте регистратор путем предоставления имени и описания для регистратора и указания диспетчера соединений, который используется данным регистратором.</span><span class="sxs-lookup"><span data-stu-id="69a56-159">You configure a log provider by providing a name and description for the log provider and specifying the connection manager that the log provider uses.</span></span> <span data-ttu-id="69a56-160">Регистратор [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] использует диспетчер соединений OLE DB.</span><span class="sxs-lookup"><span data-stu-id="69a56-160">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] log provider uses an OLE DB connection manager.</span></span> <span data-ttu-id="69a56-161">Регистраторы текстового файла, приложения [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)]и XML-файла используют диспетчеры подключения файлов.</span><span class="sxs-lookup"><span data-stu-id="69a56-161">The Text File, [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)], and XML File log providers all use File connection managers.</span></span> <span data-ttu-id="69a56-162">Регистратор журнала событий Windows не использует диспетчер соединений, потому что он напрямую обращается к журналу регистрации событий Windows.</span><span class="sxs-lookup"><span data-stu-id="69a56-162">The Windows Event log provider does not use a connection manager, because it writes directly to the Windows Event log.</span></span> <span data-ttu-id="69a56-163">Дополнительные сведения см. в разделах [Диспетчер соединений OLE DB](../connection-manager/ole-db-connection-manager.md) и [диспетчер подключения файлов](../connection-manager/file-connection-manager.md).</span><span class="sxs-lookup"><span data-stu-id="69a56-163">For more information, see [OLE DB Connection Manager](../connection-manager/ole-db-connection-manager.md) and [File Connection Manager](../connection-manager/file-connection-manager.md).</span></span>  
  
### <a name="logging-customization"></a><span data-ttu-id="69a56-164">Настройка ведения журналов</span><span class="sxs-lookup"><span data-stu-id="69a56-164">Logging Customization</span></span>  
 <span data-ttu-id="69a56-165">Чтобы настроить ведение журнала для события или пользовательского сообщения, службы [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] предоставляют схему общих записываемых данных для включения в записи журнала.</span><span class="sxs-lookup"><span data-stu-id="69a56-165">To customize the logging of an event or custom message, [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] provides a schema of commonly logged information to include in log entries.</span></span> <span data-ttu-id="69a56-166">Схема журнала служб [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] определяет данные, которые можно сохранить в журнал.</span><span class="sxs-lookup"><span data-stu-id="69a56-166">The [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] log schema defines the information that you can log.</span></span> <span data-ttu-id="69a56-167">Можно выбрать элементы схемы журнала для каждой записи.</span><span class="sxs-lookup"><span data-stu-id="69a56-167">You can select elements from the log schema for each log entry.</span></span>  
  
 <span data-ttu-id="69a56-168">Пакету и его контейнерам и задачам не требуется производить запись одних и тех же данных, и задачи одного пакета или контейнера могут производить запись различных данных.</span><span class="sxs-lookup"><span data-stu-id="69a56-168">A package and its containers and tasks do not have to log the same information, and tasks within the same package or container can log different information.</span></span> <span data-ttu-id="69a56-169">Например, пакет может производить запись сведений об операторе при запуске, одна задача может производить запись об источнике ошибки, а другая задача может производить запись о времени этой ошибки.</span><span class="sxs-lookup"><span data-stu-id="69a56-169">For example, a package can log operator information when the package starts, one task can log the source of the task's failure, and another task can log information when errors occur.</span></span> <span data-ttu-id="69a56-170">Если пакет и его задачи, а также контейнеры используют несколько журналов, то одни и те же данные записываются во все журналы.</span><span class="sxs-lookup"><span data-stu-id="69a56-170">If a package and its containers and tasks use multiple logs, the same information is written to all the logs.</span></span>  
  
 <span data-ttu-id="69a56-171">Можно выбрать необходимый уровень ведения журналов, указав события и данные каждого события для записи.</span><span class="sxs-lookup"><span data-stu-id="69a56-171">You can select a level of logging that suits your needs by specifying the events to log and the information to log for each event.</span></span> <span data-ttu-id="69a56-172">Можно обнаружить, что одни события предоставляют более полезные сведения, чем другие.</span><span class="sxs-lookup"><span data-stu-id="69a56-172">You may find that some events provide more useful information than others.</span></span> <span data-ttu-id="69a56-173">Например, можно записывать в журнал не только имена компьютеров и операторов для события **PreExecute** , но и все доступные данные о событии **Error** .</span><span class="sxs-lookup"><span data-stu-id="69a56-173">For example, you might want to log only the computer and operator names for the **PreExecute** event but all available information for the **Error** event.</span></span>  
  
 <span data-ttu-id="69a56-174">Для предотвращения использования журналами больших объемов дискового пространства или во избежание избыточного ведения журналов, которое может уменьшить производительность, можно ограничить ведение журналов, выбрав отдельные события и элементы данных для записи.</span><span class="sxs-lookup"><span data-stu-id="69a56-174">To prevent log files from using large amounts of disk space, or to avoid excessive logging, which could degrade performance, you can limit logging by selecting specific events and information items to log.</span></span> <span data-ttu-id="69a56-175">Например, можно настроить журнал на запись только даты и имени компьютера для каждой ошибки.</span><span class="sxs-lookup"><span data-stu-id="69a56-175">For example, you can configure a log to capture only the date and the computer name for each error.</span></span>  
  
 <span data-ttu-id="69a56-176">В конструкторе служб [!INCLUDE[ssIS](../../includes/ssis-md.md)] можно определить параметры ведения журналов с помощью диалогового окна **Настройка журналов служб SSIS** .</span><span class="sxs-lookup"><span data-stu-id="69a56-176">In [!INCLUDE[ssIS](../../includes/ssis-md.md)] Designer, you define the logging options by using the **Configure SSIS Logs** dialog box.</span></span>  
  
#### <a name="log-schema"></a><span data-ttu-id="69a56-177">Схема журнала</span><span class="sxs-lookup"><span data-stu-id="69a56-177">Log Schema</span></span>  
 <span data-ttu-id="69a56-178">Следующая таблица описывает элементы схемы журнала.</span><span class="sxs-lookup"><span data-stu-id="69a56-178">The following table describes the elements in the log schema.</span></span>  
  
|<span data-ttu-id="69a56-179">Элемент</span><span class="sxs-lookup"><span data-stu-id="69a56-179">Element</span></span>|<span data-ttu-id="69a56-180">Description</span><span class="sxs-lookup"><span data-stu-id="69a56-180">Description</span></span>|  
|-------------|-----------------|  
|<span data-ttu-id="69a56-181">Компьютер</span><span class="sxs-lookup"><span data-stu-id="69a56-181">Computer</span></span>|<span data-ttu-id="69a56-182">Имя компьютера, на котором произошло событие журнала.</span><span class="sxs-lookup"><span data-stu-id="69a56-182">The name of the computer on which the log event occurred.</span></span>|  
|<span data-ttu-id="69a56-183">Оператор</span><span class="sxs-lookup"><span data-stu-id="69a56-183">Operator</span></span>|<span data-ttu-id="69a56-184">Удостоверение пользователя, выполнившего запуск пакета.</span><span class="sxs-lookup"><span data-stu-id="69a56-184">The identity of the user who launched the package.</span></span>|  
|<span data-ttu-id="69a56-185">SourceName</span><span class="sxs-lookup"><span data-stu-id="69a56-185">SourceName</span></span>|<span data-ttu-id="69a56-186">Имя контейнера или задачи, где произошло событие журнала.</span><span class="sxs-lookup"><span data-stu-id="69a56-186">The name of the container or task in which the log event occurred.</span></span>|  
|<span data-ttu-id="69a56-187">SourceID</span><span class="sxs-lookup"><span data-stu-id="69a56-187">SourceID</span></span>|<span data-ttu-id="69a56-188">Уникальный идентификатор пакета контейнеров «цикл по элементам», «цикл по каждому элементу» или контейнера последовательности; или задача, в которой произошло событие журнала.</span><span class="sxs-lookup"><span data-stu-id="69a56-188">The unique identifier of the package; the For Loop, Foreach Loop, or Sequence container; or the task in which the log event occurred.</span></span>|  
|<span data-ttu-id="69a56-189">ExecutionID</span><span class="sxs-lookup"><span data-stu-id="69a56-189">ExecutionID</span></span>|<span data-ttu-id="69a56-190">Идентификатор GUID экземпляра выполнения пакета.</span><span class="sxs-lookup"><span data-stu-id="69a56-190">The GUID of the package execution instance.</span></span><br /><br /> <span data-ttu-id="69a56-191">Примечание. Запуск одного пакета может создать записи в журнале с разными значениями для элемента ExecutionID.</span><span class="sxs-lookup"><span data-stu-id="69a56-191">Note: Running a single package might create log entries with different values for the ExecutionID element.</span></span> <span data-ttu-id="69a56-192">Например, при запуске пакета в среде [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)]на этапе проверки могут быть созданы записи в журнале с элементом ExecutionID, который соответствует среде [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)].</span><span class="sxs-lookup"><span data-stu-id="69a56-192">For example, when you run a package in [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)], the validation phase might create log entries with an ExecutionID element that corresponds to [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)].</span></span> <span data-ttu-id="69a56-193">Однако на этапе выполнения могут быть созданы записи журнала с элементом ExecutionID, соответствующим файлу dtshost.exe.</span><span class="sxs-lookup"><span data-stu-id="69a56-193">However, the execution phase might create log entries with an ExecutionID element that corresponds to dtshost.exe.</span></span> <span data-ttu-id="69a56-194">Другой пример, когда запускается пакет, содержащий задачи «Выполнение пакета», каждая из этих задач запускается в дочернем пакете.</span><span class="sxs-lookup"><span data-stu-id="69a56-194">For another example, when you run a package that contains Execute Package tasks, each of these tasks runs a child package.</span></span> <span data-ttu-id="69a56-195">Эти дочерние пакеты могут создавать записи в журнале, имеющие отличные элементы ExecutionID от тех, что создаются в родительском пакете.</span><span class="sxs-lookup"><span data-stu-id="69a56-195">These child packages might create log entries that have a different ExecutionID element than the log entries that the parent package creates.</span></span>|  
|<span data-ttu-id="69a56-196">MessageText</span><span class="sxs-lookup"><span data-stu-id="69a56-196">MessageText</span></span>|<span data-ttu-id="69a56-197">Сообщение, связанное с записью журнала.</span><span class="sxs-lookup"><span data-stu-id="69a56-197">A message associated with the log entry.</span></span>|  
|<span data-ttu-id="69a56-198">DataBytes</span><span class="sxs-lookup"><span data-stu-id="69a56-198">DataBytes</span></span>|<span data-ttu-id="69a56-199">Байтовый массив, специфичный для записи журнала.</span><span class="sxs-lookup"><span data-stu-id="69a56-199">A byte array specific to the log entry.</span></span> <span data-ttu-id="69a56-200">Значение этого поля изменяется в зависимости от записи журнала.</span><span class="sxs-lookup"><span data-stu-id="69a56-200">The meaning of this field varies by log entry.</span></span>|  
  
 <span data-ttu-id="69a56-201">В следующей таблице описываются три дополнительных элемента схемы журнала, которые недоступны во вкладке **Подробные сведения** диалогового окна **Настройка журналов служб SSIS** .</span><span class="sxs-lookup"><span data-stu-id="69a56-201">The following table describes three additional elements in the log schema that are not available on the **Details** tab of the **Configure SSIS Logs** dialog box.</span></span>  
  
|<span data-ttu-id="69a56-202">Элемент</span><span class="sxs-lookup"><span data-stu-id="69a56-202">Element</span></span>|<span data-ttu-id="69a56-203">Description</span><span class="sxs-lookup"><span data-stu-id="69a56-203">Description</span></span>|  
|-------------|-----------------|  
|<span data-ttu-id="69a56-204">StartTime</span><span class="sxs-lookup"><span data-stu-id="69a56-204">StartTime</span></span>|<span data-ttu-id="69a56-205">Время начала работы контейнера или задачи.</span><span class="sxs-lookup"><span data-stu-id="69a56-205">The time at which the container or task starts to run.</span></span>|  
|<span data-ttu-id="69a56-206">EndTime</span><span class="sxs-lookup"><span data-stu-id="69a56-206">EndTime</span></span>|<span data-ttu-id="69a56-207">Время прекращения работы контейнера или задачи.</span><span class="sxs-lookup"><span data-stu-id="69a56-207">The time at which the container or task stops running.</span></span>|  
|<span data-ttu-id="69a56-208">DataCode</span><span class="sxs-lookup"><span data-stu-id="69a56-208">DataCode</span></span>|<span data-ttu-id="69a56-209">Необязательное целочисленное значение, которое обычно содержит значение из перечисления <xref:Microsoft.SqlServer.Dts.Runtime.DTSExecResult> , показывающее результат выполнения контейнера или задачи:</span><span class="sxs-lookup"><span data-stu-id="69a56-209">An optional integer value that typically contains a value from the <xref:Microsoft.SqlServer.Dts.Runtime.DTSExecResult> enumeration that indicates the result of running the container or task:</span></span><br /><br /> <span data-ttu-id="69a56-210">0 — успешное завершение;</span><span class="sxs-lookup"><span data-stu-id="69a56-210">0 - Success</span></span><br /><br /> <span data-ttu-id="69a56-211">1 — неуспешное завершение;</span><span class="sxs-lookup"><span data-stu-id="69a56-211">1 - Failure</span></span><br /><br /> <span data-ttu-id="69a56-212">2 — завершено;</span><span class="sxs-lookup"><span data-stu-id="69a56-212">2 - Completed</span></span><br /><br /> <span data-ttu-id="69a56-213">3 — отменено.</span><span class="sxs-lookup"><span data-stu-id="69a56-213">3 - Canceled</span></span>|  
  
##### <a name="log-entries"></a><span data-ttu-id="69a56-214">Записи журнала</span><span class="sxs-lookup"><span data-stu-id="69a56-214">Log Entries</span></span>  
 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] <span data-ttu-id="69a56-215">поддерживают записи журнала для стандартных событий и предоставляют пользовательские записи журнала для многих объектов служб [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="69a56-215">supports log entries on predefined events and provides custom log entries for many [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] objects.</span></span> <span data-ttu-id="69a56-216">В конструкторе служб **эти события и пользовательские записи журнала перечислены в диалоговом окне** Настройка журналов служб SSIS [!INCLUDE[ssIS](../../includes/ssis-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="69a56-216">The **Configure SSIS Logs** dialog box in [!INCLUDE[ssIS](../../includes/ssis-md.md)] Designer lists these events and custom log entries.</span></span>  
  
 <span data-ttu-id="69a56-217">В следующей таблице описаны стандартные события, которые могут быть включены для записи при возникновении событий времени выполнения.</span><span class="sxs-lookup"><span data-stu-id="69a56-217">The following table describes the predefined events that can be enabled to write log entries when run-time events occur.</span></span> <span data-ttu-id="69a56-218">Эти записи журнала относятся к исполняемым объектам, пакету, задачам и контейнерам, содержащимся в пакете.</span><span class="sxs-lookup"><span data-stu-id="69a56-218">These log entries apply to executables, the package, and the tasks and containers that the package includes.</span></span> <span data-ttu-id="69a56-219">Имя записи журнала события совпадает с именем произошедшего события выполнения, послужившего причиной записи в журнал.</span><span class="sxs-lookup"><span data-stu-id="69a56-219">The name of the log entry is the same as the name of the run-time event that was raised and caused the log entry to be written.</span></span>  
  
|<span data-ttu-id="69a56-220">События</span><span class="sxs-lookup"><span data-stu-id="69a56-220">Events</span></span>|<span data-ttu-id="69a56-221">Description</span><span class="sxs-lookup"><span data-stu-id="69a56-221">Description</span></span>|  
|------------|-----------------|  
|<span data-ttu-id="69a56-222">**OnError**</span><span class="sxs-lookup"><span data-stu-id="69a56-222">**OnError**</span></span>|<span data-ttu-id="69a56-223">Производит запись в журнал при возникновении ошибки.</span><span class="sxs-lookup"><span data-stu-id="69a56-223">Writes a log entry when an error occurs.</span></span>|  
|<span data-ttu-id="69a56-224">**OnExecStatusChanged**</span><span class="sxs-lookup"><span data-stu-id="69a56-224">**OnExecStatusChanged**</span></span>|<span data-ttu-id="69a56-225">Вносит запись журнала, если задача (не контейнер) приостанавливается или ее выполнение возобновляется во время отладки.</span><span class="sxs-lookup"><span data-stu-id="69a56-225">Writes a log entry when a task (not a container) is suspended or resumed during debugging.</span></span>|  
|<span data-ttu-id="69a56-226">**OnInformation**</span><span class="sxs-lookup"><span data-stu-id="69a56-226">**OnInformation**</span></span>|<span data-ttu-id="69a56-227">Производит запись в журнал во время проверки подлинности и выполнения исполняемого объекта.</span><span class="sxs-lookup"><span data-stu-id="69a56-227">Writes a log entry during the validation and execution of an executable to report information.</span></span>|  
|<span data-ttu-id="69a56-228">**OnPostExecute**</span><span class="sxs-lookup"><span data-stu-id="69a56-228">**OnPostExecute**</span></span>|<span data-ttu-id="69a56-229">Производит запись немедленно после окончания выполнения исполняемого объекта.</span><span class="sxs-lookup"><span data-stu-id="69a56-229">Writes a log entry immediately after the executable has finished running.</span></span>|  
|<span data-ttu-id="69a56-230">**OnPostValidate**</span><span class="sxs-lookup"><span data-stu-id="69a56-230">**OnPostValidate**</span></span>|<span data-ttu-id="69a56-231">Производит запись в журнал при завершении проверки подлинности исполняемого объекта.</span><span class="sxs-lookup"><span data-stu-id="69a56-231">Writes a log entry when the validation of the executable finishes.</span></span>|  
|<span data-ttu-id="69a56-232">**OnPreExecute**</span><span class="sxs-lookup"><span data-stu-id="69a56-232">**OnPreExecute**</span></span>|<span data-ttu-id="69a56-233">Производит запись сразу перед началом выполнения исполняемого объекта.</span><span class="sxs-lookup"><span data-stu-id="69a56-233">Writes a log entry immediately before the executable runs.</span></span>|  
|<span data-ttu-id="69a56-234">**OnPreValidate**</span><span class="sxs-lookup"><span data-stu-id="69a56-234">**OnPreValidate**</span></span>|<span data-ttu-id="69a56-235">Производит запись в журнал при начале проверки подлинности исполняемого объекта.</span><span class="sxs-lookup"><span data-stu-id="69a56-235">Writes a log entry when the validation of the executable starts.</span></span>|  
|<span data-ttu-id="69a56-236">**OnProgress**</span><span class="sxs-lookup"><span data-stu-id="69a56-236">**OnProgress**</span></span>|<span data-ttu-id="69a56-237">Производит запись в журнал в процессе выполнения исполняемого объекта.</span><span class="sxs-lookup"><span data-stu-id="69a56-237">Writes a log entry when measurable progress is made by the executable.</span></span>|  
|<span data-ttu-id="69a56-238">**OnQueryCancel**</span><span class="sxs-lookup"><span data-stu-id="69a56-238">**OnQueryCancel**</span></span>|<span data-ttu-id="69a56-239">Производит запись в журнал при любом присоединении к обработке задачи в тот момент, когда возможна отмена ее выполнения.</span><span class="sxs-lookup"><span data-stu-id="69a56-239">Writes a log entry at any juncture in the task processing where it is feasible to cancel execution.</span></span>|  
|<span data-ttu-id="69a56-240">**OnTaskFailed**</span><span class="sxs-lookup"><span data-stu-id="69a56-240">**OnTaskFailed**</span></span>|<span data-ttu-id="69a56-241">Производит запись в журнал при возникновении ошибки задачи.</span><span class="sxs-lookup"><span data-stu-id="69a56-241">Writes a log entry when a task fails.</span></span>|  
|<span data-ttu-id="69a56-242">**OnVariableValueChanged**</span><span class="sxs-lookup"><span data-stu-id="69a56-242">**OnVariableValueChanged**</span></span>|<span data-ttu-id="69a56-243">Производит запись в журнал при изменении значения переменной.</span><span class="sxs-lookup"><span data-stu-id="69a56-243">Writes a log entry when the value of a variable changes.</span></span>|  
|<span data-ttu-id="69a56-244">**OnWarning**</span><span class="sxs-lookup"><span data-stu-id="69a56-244">**OnWarning**</span></span>|<span data-ttu-id="69a56-245">Производит запись в журнал при возникновении предупреждения.</span><span class="sxs-lookup"><span data-stu-id="69a56-245">Writes a log entry when a warning occurs.</span></span>|  
|<span data-ttu-id="69a56-246">**PipelineComponentTime**</span><span class="sxs-lookup"><span data-stu-id="69a56-246">**PipelineComponentTime**</span></span>|<span data-ttu-id="69a56-247">Производит запись в журнал по каждой фазе проверки и выполнения каждого компонента потока данных.</span><span class="sxs-lookup"><span data-stu-id="69a56-247">For each data flow component, writes a log entry for each phase of validation and execution.</span></span> <span data-ttu-id="69a56-248">В записях журнала указывается время обработки каждой фазы.</span><span class="sxs-lookup"><span data-stu-id="69a56-248">The log entry specifies the processing time for each phase.</span></span>|  
|<span data-ttu-id="69a56-249">**Диагностика**</span><span class="sxs-lookup"><span data-stu-id="69a56-249">**Diagnostic**</span></span>|<span data-ttu-id="69a56-250">Вносит в журнал запись, содержащую диагностические сведения.</span><span class="sxs-lookup"><span data-stu-id="69a56-250">Writes a log entry that provides diagnostic information.</span></span><br /><br /> <span data-ttu-id="69a56-251">Например, возможно вносить запись в журнал до и после каждого вызова к внешнему поставщику данных.</span><span class="sxs-lookup"><span data-stu-id="69a56-251">For example, you can log a message before and after every call to an external data provider.</span></span> <span data-ttu-id="69a56-252">Дополнительные сведения см. в разделе [Инструменты устранения неполадок при выполнении пакетов](../troubleshooting/troubleshooting-tools-for-package-execution.md).</span><span class="sxs-lookup"><span data-stu-id="69a56-252">For more information, see [Troubleshooting Tools for Package Execution](../troubleshooting/troubleshooting-tools-for-package-execution.md).</span></span>|  
  
 <span data-ttu-id="69a56-253">В пакете и во многих задачах есть пользовательские записи журнала, которые можно включить для ведения журнала.</span><span class="sxs-lookup"><span data-stu-id="69a56-253">The package and many tasks have custom log entries that can be enabled for logging.</span></span> <span data-ttu-id="69a56-254">Например, задача "Отправка почты" предоставляет запись журнала **SendMailTaskBegin** , которая производит запись данных в начале выполнения задачи "Отправка почты", но перед тем, как задача осуществляет отправку почты.</span><span class="sxs-lookup"><span data-stu-id="69a56-254">For example, the Send Mail task provides the **SendMailTaskBegin** custom log entry, which logs information when the Send Mail task starts to run, but before the task sends an e-mail message.</span></span> <span data-ttu-id="69a56-255">Дополнительные сведения см. в разделе [Custom Messages for Logging](../custom-messages-for-logging.md).</span><span class="sxs-lookup"><span data-stu-id="69a56-255">For more information, see [Custom Messages for Logging](../custom-messages-for-logging.md).</span></span>  
  
### <a name="differentiating-package-copies"></a><span data-ttu-id="69a56-256">Различие копий пакета</span><span class="sxs-lookup"><span data-stu-id="69a56-256">Differentiating Package Copies</span></span>  
 <span data-ttu-id="69a56-257">Данные журнала содержат имя и идентификатор GUID пакета, которому принадлежит запись журнала.</span><span class="sxs-lookup"><span data-stu-id="69a56-257">Log data includes the name and the GUID of the package to which the log entries belong.</span></span> <span data-ttu-id="69a56-258">Для создания копии пакета путем копирования существующего пакета имя и идентификатор GUID существующего пакета тоже копируются.</span><span class="sxs-lookup"><span data-stu-id="69a56-258">If you create a new package by copying an existing package, the name and the GUID of the existing package are also copied.</span></span> <span data-ttu-id="69a56-259">Это приводит к появлению двух элементов с одинаковыми именами и идентификаторами GUID, что приводит к трудностям при выделении пакетов из данных журнала.</span><span class="sxs-lookup"><span data-stu-id="69a56-259">As a result, you may have two packages that have the same GUID and name, making it difficult to differentiate between the packages in the log data.</span></span>  
  
 <span data-ttu-id="69a56-260">Чтобы устранить неоднозначность, следует обновить имя и идентификатор GUID новых пакетов.</span><span class="sxs-lookup"><span data-stu-id="69a56-260">To eliminate this ambiguity, you should update the name and the GUID of the new packages.</span></span> <span data-ttu-id="69a56-261">В среде [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)] можно заново сформировать идентификатор GUID для свойства `ID` и обновить значение свойства `Name` в окне свойств.</span><span class="sxs-lookup"><span data-stu-id="69a56-261">In [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)], you can regenerate the GUID in the `ID` property and update the value of the `Name` property in the Properties window.</span></span> <span data-ttu-id="69a56-262">Можно также изменить имя и идентификатор GUID программно или с помощью команды **dtutil** .</span><span class="sxs-lookup"><span data-stu-id="69a56-262">You can also change the GUID and the name programmatically, or by using the **dtutil** command prompt.</span></span> <span data-ttu-id="69a56-263">Дополнительные сведения см. в разделах [Установка свойств пакета](../set-package-properties.md) и [Программа dtutil](../dtutil-utility.md).</span><span class="sxs-lookup"><span data-stu-id="69a56-263">For more information, see [Set Package Properties](../set-package-properties.md) and [dtutil Utility](../dtutil-utility.md).</span></span>  
  
### <a name="parent-logging-options"></a><span data-ttu-id="69a56-264">Параметры родительского ведения журналов</span><span class="sxs-lookup"><span data-stu-id="69a56-264">Parent Logging Options</span></span>  
 <span data-ttu-id="69a56-265">Часто параметры ведения журналов задач и контейнеров «цикл по элементам» и «цикл по каждому элементу», а также контейнеров последовательности соответствуют параметрам пакета или родительского контейнера.</span><span class="sxs-lookup"><span data-stu-id="69a56-265">Frequently, the logging options of tasks and For Loop, Foreach Loop, and Sequence containers match those of the package or a parent container.</span></span> <span data-ttu-id="69a56-266">В этом случае можно настроить их для наследования настроек ведения журналов от родительского контейнера.</span><span class="sxs-lookup"><span data-stu-id="69a56-266">In that case, you can configure them to inherit their logging options from their parent container.</span></span> <span data-ttu-id="69a56-267">Например, в контейнере «цикл по элементам», включающем задачу «Выполнение SQL», эта задача может использовать параметры ведения журналов, установленные для контейнера «цикл по элементам».</span><span class="sxs-lookup"><span data-stu-id="69a56-267">For example, in a For Loop container that includes an Execute SQL task, the Execute SQL task can use the logging options that are set on the For Loop container.</span></span> <span data-ttu-id="69a56-268">Для использования родительских параметров ведения журналов установите для свойства контейнера LoggingMode значение **UseParentSetting**.</span><span class="sxs-lookup"><span data-stu-id="69a56-268">To use the parent logging options, you set the LoggingMode property of the container to **UseParentSetting**.</span></span> <span data-ttu-id="69a56-269">Можно установить это свойство в окне **Свойства** среды [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)] или через диалоговое окно **Настройка журналов служб SSIS** в конструкторе служб [!INCLUDE[ssIS](../../includes/ssis-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="69a56-269">You can set this property in the **Properties** window of [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)] or through the **Configure SSIS Logs** dialog box in [!INCLUDE[ssIS](../../includes/ssis-md.md)] Designer.</span></span>  
  
### <a name="logging-templates"></a><span data-ttu-id="69a56-270">Шаблоны ведения журналов</span><span class="sxs-lookup"><span data-stu-id="69a56-270">Logging Templates</span></span>  
 <span data-ttu-id="69a56-271">В диалоговом окне **Настройка журналов SSIS** также можно создать и сохранить часто используемые параметры ведения журналов в качестве шаблонов, и затем использовать эти шаблоны во многих пакетах.</span><span class="sxs-lookup"><span data-stu-id="69a56-271">In the **Configure SSIS Logs** dialog box, you can also create and save frequently used logging configurations as templates, and then use the templates in multiple packages.</span></span> <span data-ttu-id="69a56-272">Это облегчает применение согласованной стратегии ведения журналов многочисленных пакетов и изменения параметров ведения журналов пакетов путем обновления шаблонов с последующим их применением.</span><span class="sxs-lookup"><span data-stu-id="69a56-272">This makes it easy to apply a consistent logging strategy across multiple packages and to modify log settings on packages by updating and then applying the templates.</span></span> <span data-ttu-id="69a56-273">Шаблоны хранятся в XML-файлах.</span><span class="sxs-lookup"><span data-stu-id="69a56-273">The templates are stored in XML files.</span></span>  
  
 <span data-ttu-id="69a56-274">**Настройка ведения журналов с помощью диалогового окна «Конфигурация журналов служб SSIS»**</span><span class="sxs-lookup"><span data-stu-id="69a56-274">**To configure logging using the Configure SSIS Logs dialog box**</span></span>  
  
1.  <span data-ttu-id="69a56-275">Включите журналирование пакета и его задач.</span><span class="sxs-lookup"><span data-stu-id="69a56-275">Enable the package and its tasks for logging.</span></span> <span data-ttu-id="69a56-276">Журналирование может происходить на уровне пакета, контейнера или задачи.</span><span class="sxs-lookup"><span data-stu-id="69a56-276">Logging can occur at the package, the container, and the task level.</span></span> <span data-ttu-id="69a56-277">Можно указать различные журналы для пакетов, контейнеров и задач.</span><span class="sxs-lookup"><span data-stu-id="69a56-277">You can specify different logs for packages, containers, and tasks.</span></span>  
  
2.  <span data-ttu-id="69a56-278">Выберите регистратора и добавьте журнал пакета.</span><span class="sxs-lookup"><span data-stu-id="69a56-278">Select a log provider and add a log for the package.</span></span> <span data-ttu-id="69a56-279">Журналы могут быть созданы только на уровне пакета, а задача или контейнер должны использовать один из журналов, созданных для пакета.</span><span class="sxs-lookup"><span data-stu-id="69a56-279">Logs can be created only at the package level, and a task or container must use one of the logs created for the package.</span></span> <span data-ttu-id="69a56-280">Каждый журнал связан с одним из следующих регистраторов: текстовый файл, [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)], [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], журнал событий Windows или XML-файл.</span><span class="sxs-lookup"><span data-stu-id="69a56-280">Each log is associated with one of the following log providers: Text file, [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)], [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], Windows Event Log, or XML file.</span></span> <span data-ttu-id="69a56-281">Дополнительные сведения см. в разделе [Включение средств ведения журналов в SQL Server Data Tools](../enable-package-logging-in-sql-server-data-tools.md).</span><span class="sxs-lookup"><span data-stu-id="69a56-281">For more information, see [Enable Package Logging in SQL Server Data Tools](../enable-package-logging-in-sql-server-data-tools.md).</span></span>  
  
3.  <span data-ttu-id="69a56-282">Выберите события и схему данных журнала для этих событий, запись о которых должна содержаться в журнале.</span><span class="sxs-lookup"><span data-stu-id="69a56-282">Select the events and the log schema information about each event you want to capture in the log.</span></span> <span data-ttu-id="69a56-283">Дополнительные сведения см. в разделе [Настройка ведения журналов с помощью сохраненного файла конфигурации](../configure-logging-by-using-a-saved-configuration-file.md).</span><span class="sxs-lookup"><span data-stu-id="69a56-283">For more information, see [Configure Logging by Using a Saved Configuration File](../configure-logging-by-using-a-saved-configuration-file.md).</span></span>  
  
### <a name="configuration-of-log-provider"></a><span data-ttu-id="69a56-284">Настройка регистратора</span><span class="sxs-lookup"><span data-stu-id="69a56-284">Configuration of Log Provider</span></span>  
 <span data-ttu-id="69a56-285">Значения свойств можно задавать с помощью конструктора [!INCLUDE[ssIS](../../includes/ssis-md.md)] или программными средствами.</span><span class="sxs-lookup"><span data-stu-id="69a56-285">You can set properties through [!INCLUDE[ssIS](../../includes/ssis-md.md)] Designer or programmatically.</span></span>  
  
 <span data-ttu-id="69a56-286">Регистратор создается и настраивается как шаг в реализации регистрации в пакете.</span><span class="sxs-lookup"><span data-stu-id="69a56-286">A log provider is created and configured as a step in implementing logging in a package.</span></span> <span data-ttu-id="69a56-287">Дополнительные сведения см. в разделе [ведение журнала Integration Services](integration-services-ssis-logging.md).</span><span class="sxs-lookup"><span data-stu-id="69a56-287">For more information, see [Integration Services Logging](integration-services-ssis-logging.md).</span></span>  
  
 <span data-ttu-id="69a56-288">Просмотреть и изменить свойства регистратора после его создания можно в окне «Свойства» среды [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)].</span><span class="sxs-lookup"><span data-stu-id="69a56-288">After you create a log provider, you can view and modify its properties in the Properties window of [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)].</span></span>  
  
 <span data-ttu-id="69a56-289">Дополнительные сведения о программной установке этих свойств см. в документации по классу <xref:Microsoft.SqlServer.Dts.Runtime.LogProvider> .</span><span class="sxs-lookup"><span data-stu-id="69a56-289">For information about programmatically setting these properties, see the documentation for the <xref:Microsoft.SqlServer.Dts.Runtime.LogProvider> class.</span></span>  
  
### <a name="logging-for-data-flow-tasks"></a><span data-ttu-id="69a56-290">Ведение журналов для задач потока данных</span><span class="sxs-lookup"><span data-stu-id="69a56-290">Logging for Data Flow Tasks</span></span>  
 <span data-ttu-id="69a56-291">Задача потока данных предоставляет много пользовательских записей журнала, которые можно использовать для мониторинга и настройки производительности.</span><span class="sxs-lookup"><span data-stu-id="69a56-291">The Data Flow task provides many custom log entries that can be used to monitor and adjust performance.</span></span> <span data-ttu-id="69a56-292">Например, можно отслеживать компоненты, вызывающие утечку памяти, или следить за скоростью запуска отдельного компонента.</span><span class="sxs-lookup"><span data-stu-id="69a56-292">For example, you can monitor components that might cause memory leaks, or keep track of how long it takes to run a particular component.</span></span> <span data-ttu-id="69a56-293">Список пользовательских записей журнала и образец их вывода см. в разделе [Задача потока данных](../control-flow/data-flow-task.md).</span><span class="sxs-lookup"><span data-stu-id="69a56-293">For a list of these custom log entries and sample logging output, see [Data Flow Task](../control-flow/data-flow-task.md).</span></span>  
  
#### <a name="use-the-pipelinecomponenttime-event"></a><span data-ttu-id="69a56-294">Использование события PipelineComponentTime</span><span class="sxs-lookup"><span data-stu-id="69a56-294">Use the PipelineComponentTime Event</span></span>  
 <span data-ttu-id="69a56-295">Возможно, самой полезной записью журнала является событие PipelineComponentTime.</span><span class="sxs-lookup"><span data-stu-id="69a56-295">Perhaps the most useful custom log entry is the PipelineComponentTime event.</span></span> <span data-ttu-id="69a56-296">Эта запись журнала сообщает о времени в миллисекундах, которое каждый компонент потока данных тратит на каждом из пяти основных шагов обработки.</span><span class="sxs-lookup"><span data-stu-id="69a56-296">This log entry reports the number of milliseconds that each component in the data flow spends on each of the five major processing steps.</span></span> <span data-ttu-id="69a56-297">В следующей таблице описываются эти шаги обработки.</span><span class="sxs-lookup"><span data-stu-id="69a56-297">The following table describes these processing steps.</span></span> [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] <span data-ttu-id="69a56-298">Разработчикам эти шаги будут знакомы как основные методы класса <xref:Microsoft.SqlServer.Dts.Pipeline.PipelineComponent>.</span><span class="sxs-lookup"><span data-stu-id="69a56-298">developers will recognize these steps as the principal methods of a <xref:Microsoft.SqlServer.Dts.Pipeline.PipelineComponent>.</span></span>  
  
|<span data-ttu-id="69a56-299">Шаг</span><span class="sxs-lookup"><span data-stu-id="69a56-299">Step</span></span>|<span data-ttu-id="69a56-300">Description</span><span class="sxs-lookup"><span data-stu-id="69a56-300">Description</span></span>|  
|----------|-----------------|  
|<span data-ttu-id="69a56-301">Проверить</span><span class="sxs-lookup"><span data-stu-id="69a56-301">Validate</span></span>|<span data-ttu-id="69a56-302">Компонент проверяется на допустимость значений свойств и параметров настройки.</span><span class="sxs-lookup"><span data-stu-id="69a56-302">The component checks for valid property values and configuration settings.</span></span>|  
|<span data-ttu-id="69a56-303">PreExecute</span><span class="sxs-lookup"><span data-stu-id="69a56-303">PreExecute</span></span>|<span data-ttu-id="69a56-304">Компонент выполняет однократную обработку перед началом обработки строк данных.</span><span class="sxs-lookup"><span data-stu-id="69a56-304">The component performs one-time processing before it starts to process rows of data.</span></span>|  
|<span data-ttu-id="69a56-305">PostExecute</span><span class="sxs-lookup"><span data-stu-id="69a56-305">PostExecute</span></span>|<span data-ttu-id="69a56-306">Компонент выполняет однократную обработку после обработки всех строк данных.</span><span class="sxs-lookup"><span data-stu-id="69a56-306">The component performs one-time processing after it has processed all rows of data.</span></span>|  
|<span data-ttu-id="69a56-307">ProcessInput</span><span class="sxs-lookup"><span data-stu-id="69a56-307">ProcessInput</span></span>|<span data-ttu-id="69a56-308">Компонент преобразования или назначения обрабатывает входящие строки данных, которые передает ему вышестоящий источник или преобразование.</span><span class="sxs-lookup"><span data-stu-id="69a56-308">The transformation or destination component processes the incoming rows of data that an upstream source or transformation has passed to it.</span></span>|  
|<span data-ttu-id="69a56-309">PrimeOutput</span><span class="sxs-lookup"><span data-stu-id="69a56-309">PrimeOutput</span></span>|<span data-ttu-id="69a56-310">Компонент источника или преобразования заполняет буферы данных, которые должны передаваться в нижестоящий компонент преобразования или назначения.</span><span class="sxs-lookup"><span data-stu-id="69a56-310">The source or transformation component fills the buffers of data to be passed to a downstream transformation or destination component.</span></span>|  
  
 <span data-ttu-id="69a56-311">При включении события PipelineComponentTime службы [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] записывают в журнал одно сообщение для каждого шага обработки, выполненного каждым компонентом.</span><span class="sxs-lookup"><span data-stu-id="69a56-311">When you enable the PipelineComponentTime event, [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] logs one message for each processing step performed by each component.</span></span> <span data-ttu-id="69a56-312">Следующие записи журнала показывают подмножество сообщений, которое регистрирует образец пакета CalculatedColumns служб [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="69a56-312">The following log entries show a subset of the messages that the [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] CalculatedColumns package sample logs:</span></span>  
  
 `The component "Calculate LineItemTotalCost" (3522) spent 356 milliseconds in ProcessInput.`  
  
 `The component "Sum Quantity and LineItemTotalCost" (3619) spent 79 milliseconds in ProcessInput.`  
  
 `The component "Calculate Average Cost" (3662) spent 16 milliseconds in ProcessInput.`  
  
 `The component "Sort by ProductID" (3717) spent 125 milliseconds in ProcessInput.`  
  
 `The component "Load Data" (3773) spent 0 milliseconds in ProcessInput.`  
  
 `The component "Extract Data" (3869) spent 688 milliseconds in PrimeOutput filling buffers on output "OLE DB Source Output" (3879).`  
  
 `The component "Sum Quantity and LineItemTotalCost" (3619) spent 141 milliseconds in PrimeOutput filling buffers on output "Aggregate Output 1" (3621).`  
  
 `The component "Sort by ProductID" (3717) spent 16 milliseconds in PrimeOutput filling buffers on output "Sort Output" (3719).`  
  
 <span data-ttu-id="69a56-313">Эти записи показывают, что задача потока данных затратила наибольшее время на следующие шаги, представленные ниже в убывающем порядке.</span><span class="sxs-lookup"><span data-stu-id="69a56-313">These log entries show that the data flow task spent the most time on the following steps, shown here in descending order:</span></span>  
  
-   <span data-ttu-id="69a56-314">Источник OLE DB с именем «Извлечение данных» затратил 688 мс</span><span class="sxs-lookup"><span data-stu-id="69a56-314">The OLE DB source that is named "Extract Data" spent 688 ms.</span></span> <span data-ttu-id="69a56-315">на загрузку данных.</span><span class="sxs-lookup"><span data-stu-id="69a56-315">loading data.</span></span>  
  
-   <span data-ttu-id="69a56-316">Преобразование «Производный столбец» с именем «Вычисление LineItemTotalCost» затратило 356 мс</span><span class="sxs-lookup"><span data-stu-id="69a56-316">The Derived Column transformation that is named "Calculate LineItemTotalCost" spent 356 ms.</span></span> <span data-ttu-id="69a56-317">на выполнение вычислений с входящими строками.</span><span class="sxs-lookup"><span data-stu-id="69a56-317">performing calculations on incoming rows.</span></span>  
  
-   <span data-ttu-id="69a56-318">Преобразование "Статистическая обработка" с именем "Сложение Quantity и LineItemTotalCost" затратило в общей сложности 220 мс (141 на шаге PrimeOutput и 79 на шаге ProcessInput) на вычисление и передачу данных следующему преобразованию.</span><span class="sxs-lookup"><span data-stu-id="69a56-318">The Aggregate transformation that is named "Sum Quantity and LineItemTotalCost" spent a combined 220 ms-141 in PrimeOutput and 79 in ProcessInput-performing calculations and passing the data to the next transformation.</span></span>  
  
## <a name="related-tasks"></a><span data-ttu-id="69a56-319">Связанные задачи</span><span class="sxs-lookup"><span data-stu-id="69a56-319">Related Tasks</span></span>  
 <span data-ttu-id="69a56-320">В следующем списке приведены ссылки на разделы, в которых описывается выполнение задач, связанных с функцией ведения журналов.</span><span class="sxs-lookup"><span data-stu-id="69a56-320">The following list contains links to topics that show how to perform tasks related to the logging feature.</span></span>  
  
-   [<span data-ttu-id="69a56-321">Диалоговое окно «Настройка журналов служб SSIS»</span><span class="sxs-lookup"><span data-stu-id="69a56-321">Configure SSIS Logs Dialog Box</span></span>](../configure-ssis-logs-dialog-box.md)  
  
-   [<span data-ttu-id="69a56-322">Включение ведения журнала пакетов в SQL Server Data Tools</span><span class="sxs-lookup"><span data-stu-id="69a56-322">Enable Package Logging in SQL Server Data Tools</span></span>](../enable-package-logging-in-sql-server-data-tools.md)  
  
-   [<span data-ttu-id="69a56-323">Включение ведения журнала для выполнения пакета на сервере служб SSIS</span><span class="sxs-lookup"><span data-stu-id="69a56-323">Enable Logging for Package Execution on the SSIS Server</span></span>](../enable-logging-for-package-execution-on-the-ssis-server.md)  
  
-   [<span data-ttu-id="69a56-324">Просмотр записей журнала в окне "Регистрация событий"</span><span class="sxs-lookup"><span data-stu-id="69a56-324">View Log Entries in the Log Events Window</span></span>](../view-log-entries-in-the-log-events-window.md)  
  
## <a name="related-content"></a><span data-ttu-id="69a56-325">См. также</span><span class="sxs-lookup"><span data-stu-id="69a56-325">Related Content</span></span>  
 [<span data-ttu-id="69a56-326">Инструмент DTLoggedExec для полного и подробного ведения журнала (проект CodePlex)</span><span class="sxs-lookup"><span data-stu-id="69a56-326">DTLoggedExec Tool for Full and Detail Logging (CodePlex Project)</span></span>](https://go.microsoft.com/fwlink/?LinkId=150579)  
  
## <a name="see-also"></a><span data-ttu-id="69a56-327">См. также:</span><span class="sxs-lookup"><span data-stu-id="69a56-327">See Also</span></span>  
 [<span data-ttu-id="69a56-328">Просмотр записей журнала в окне "Регистрация событий"</span><span class="sxs-lookup"><span data-stu-id="69a56-328">View Log Entries in the Log Events Window</span></span>](../view-log-entries-in-the-log-events-window.md)  
  
  
