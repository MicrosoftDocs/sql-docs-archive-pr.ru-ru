---
title: Шаг 2. Добавление и настройка диспетчера соединений с неструктурированными файлами | Документы Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
ms.assetid: 9a77dd32-d8c2-4961-ad37-2a971f9d6043
author: chugugrace
ms.author: chugu
ms.openlocfilehash: 3ba3adee2422af8b2df027f55ec84366b90ddd7b
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87664364"
---
# <a name="step-2-adding-and-configuring-a-flat-file-connection-manager"></a>Шаг 2. Добавление и настройка диспетчера соединений с неструктурированными файлами
  В этом задании к только что созданному пакету будет добавлен диспетчер соединений с неструктурированными файлами. Диспетчер соединений с неструктурированными файлами позволяет пакету извлекать данные из неструктурированных файлов. С помощью диспетчера соединений с неструктурированными файлами можно указать имя и расположение файла, локали и кодовую страницу, а также формат файла, включая разделители столбцов. Эти данные будут использованы при извлечении пакета из неструктурированного файла. Кроме того, можно вручную указать тип данных для каждого столбца или в диалоговом окне **Предлагаемые типы столбцов** указать автоматическое сопоставление столбцов извлекаемых данных с типами данных в службах [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] .  
  
 Для каждого используемого формата файла необходимо создать отдельный диспетчер соединений с неструктурированными файлами. Так как в данном учебнике данные извлекаются из неструктурированных файлов одинакового формата, в пакет необходимо добавить только один диспетчер соединений с неструктурированными файлами.  
  
 В этом учебнике предстоит настроить следующие свойства диспетчера соединений с неструктурированными файлами:  
  
-   **Имена столбцов.** Так как в неструктурированном файле не указаны имена столбцов, диспетчер соединений с неструктурированными файлами создает имена столбцов по умолчанию. Указанные имена по умолчанию не дают представления о содержащихся в столбцах данных. Чтобы сделать имена по умолчанию более понятными, следует заменить их именами, взятыми из таблицы фактов, в которую производится загрузка данных из неструктурированных файлов.  
  
-   **Сопоставление данных.** Сопоставление типов данных, указанное для диспетчера соединений с неструктурированными файлами, используется всеми компонентами источников данных "неструктурированный файл", которые обращаются к диспетчеру соединений. Можно сопоставить типы данных вручную с помощью диспетчера соединений с неструктурированными файлами или использовать диалоговое окно **Предлагаемые типы столбцов** . В этом учебнике предстоит просмотреть сопоставления, предложенные в диалоговом окне **Предлагаемые типы столбцов** , а затем вручную создать необходимые сопоставления в диалоговом окне **Редактор диспетчера соединений с неструктурированными файлами** .  
  
 Диспетчер соединений с неструктурированными файлами предоставляет сведения о локали файла данных. Если на компьютере не настроено использование региональных параметров "Английский (США)", необходимо задать дополнительные свойства в диалоговом окне **Редактор диспетчера соединений с неструктурированными файлами** .  
  
### <a name="to-add-a-flat-file-connection-manager-to-the-ssis-package"></a>Добавление диспетчера соединений с неструктурированными файлами в пакет служб SSIS  
  
1.  Щелкните правой кнопкой мыши область **Диспетчеры соединений** и выберите команду **Создать соединение с неструктурированным файлом**.  
  
2.  В диалоговом окне **Редактор диспетчера соединений с неструктурированными файлами** в поле **Имя диспетчера соединений**введите **Образец источника данных "неструктурированный файл"**.  
  
3.  Нажмите кнопку **Обзор**.  
  
4.  В диалоговом окне **Открыть** найдите файл SampleCurrencyData.txt на компьютере.  
  
     Образцы данных включаются в состав с пакетами занятий по службам [!INCLUDE[ssIS](../includes/ssis-md.md)] . Чтобы загрузить образцы данных и пакеты занятий выполните следующие действия.  
  
    1.  Перейдите к [образцам продуктов служб Integration Services](https://go.microsoft.com/fwlink/?LinkId=275027).  
  
    2.  Перейдите на вкладку **Downloads (загрузки** ).  
  
    3.  Щелкните файл SQL2012.Integration_Services.Create_Simple_ETL_Tutorial.Sample.zip.  
  
5.  Снимите флажок «Имена столбцов в первой строке данных».  
  
### <a name="to-set-locale-sensitive-properties"></a>Установка свойств, зависящих от локали и региональных стандартов  
  
1.  В диалоговом окне **Редактор диспетчера соединений с неструктурированными файлами** перейдите на вкладку **Общие**.  
  
2.  Задайте для параметра **язык** значение английский (США) и **кодовую страницу** 1252.  
  
### <a name="to-rename-columns-in-the-flat-file-connection-manager"></a>Переименование столбцов диспетчера соединений с неструктурированными файлами  
  
1.  В диалоговом окне **Редактор диспетчера соединений с неструктурированными файлами** перейдите на вкладку **Дополнительно**.  
  
2.  На панели свойств сделайте следующие изменения.  
  
    -   Измените значение свойства имя **столбца 0** на `AverageRate` .  
  
    -   Измените значение свойства имя **столбца 1** на `CurrencyID` .  
  
    -   Измените значение свойства имя **столбца 2** на `CurrencyDate` .  
  
    -   Измените значение свойства имя **столбца 3** на `EndOfDayRate` .  
  
    > [!NOTE]  
    >  По умолчанию для всех четырех столбцов указан строковый тип данных [DT_STR] со значением параметра `OutputColumnWidth`, равным 50.  
  
### <a name="to-remap-column-data-types"></a>Сопоставление типов данных столбцов  
  
1.  В диалоговом окне **Редактор диспетчера соединений с неструктурированными файлами** нажмите кнопку **Предложить типы**.  
  
     [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] автоматически предлагают большинство соответствующих типов данных на основании первых 200 строк данных. Можно изменить параметры предложения по большему или меньшему количеству данных, чтобы указать тип данных по умолчанию для целочисленных и логических данных или чтобы добавить пробелы в дополнение к строковым столбцам.  
  
     На данный момент не изменяйте значения параметров в диалоговом окне **Предлагаемые типы столбцов** и нажмите кнопку **ОК** , чтобы службы [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] предложили типы данных для столбцов. Вы вернетесь на панель **Дополнительно** диалогового окна **Редактор диспетчера соединений с неструктурированными файлами** , где можно просмотреть типы данных столбцов, предложенные службами [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)]. (Если нажать кнопку **Отмена**, предложения в отношении метаданных столбца и используемого типа данных строки по умолчанию (DT_STR) сделаны не будут.)  
  
     В этом учебнике для данных из файла SampleCurrencyData.txt в службах [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] предлагаются типы данных, приведенные во втором столбце следующей ниже таблицы. Типы данных, требуемые для столбцов назначения, которые будут определены позже, приведены в последнем столбце следующей ниже таблицы.  
  
    |Столбец неструктурированных файлов|Предложенный тип|Целевой столбец|Тип назначения|  
    |----------------------|--------------------|------------------------|----------------------|  
    |AverageRate|float [DT_R4]|FactCurrency.AverageRate|FLOAT|  
    |CurrencyID|string [DT_STR]|DimCurrency.CurrencyAlternateKey|nchar(3)|  
    |CurrencyDate|date [DT_DATE]|DimDate.FullDateAlternateKey|Дата|  
    |EndOfDayRate|float [DT_R4]|FactCurrency.EndOfDayRate|FLOAT|  
  
     Тип данных, предложенный для `CurrencyID` столбца, несовместим с типом данных поля в целевой таблице. Поскольку тип данных типа `DimCurrency.CurrencyAlternateKey` nchar (3), `CurrencyID` должен быть изменен с string [DT_STR] на string [DT_WSTR]. Кроме того, поле `DimDate.FullDateAlternateKey` определяется как тип данных даты, поэтому `CurrencyDate` его необходимо изменить с date [DT_Date] на date [DT_DBDATE].  
  
2.  В списке выберите столбец CurrencyID и на панели свойств измените тип данных столбца `CurrencyID` строка [DT_STR] на строку в Юникоде [DT_WSTR].  
  
3.  На панели свойств измените тип данных столбца `CurrencyDate` с Date [DT_DATE] на Date [DT_DBDATE].  
  
4.  Нажмите кнопку **ОК**.  
  
## <a name="next-task-in-lesson"></a>Следующая задача занятия  
 [Шаг 3. Добавление и настройка диспетчера подключений OLE DB](lesson-1-3-adding-and-configuring-an-ole-db-connection-manager.md)  
  
## <a name="see-also"></a>См. также:  
 [Диспетчер соединений с неструктурированными файлами](connection-manager/file-connection-manager.md)   
 [Типы данных служб Integration Services](data-flow/integration-services-data-types.md)  
  
  
