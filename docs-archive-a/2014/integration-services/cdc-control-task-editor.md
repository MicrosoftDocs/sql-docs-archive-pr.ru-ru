---
title: Редактор задачи "Управление CDC" | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
f1_keywords:
- sql12.ssis.designer.cdccontroltask.config.f1
ms.assetid: 4f09d040-9ec8-4aaa-b684-f632d571f0a8
author: chugugrace
ms.author: chugu
ms.openlocfilehash: 6b60f2a9126dbbda934124b39f36ccd90b4e6cc6
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87667850"
---
# <a name="cdc-control-task-editor"></a><span data-ttu-id="7e274-102">Редактор задачи «Выполнение CDC»</span><span class="sxs-lookup"><span data-stu-id="7e274-102">CDC Control Task Editor</span></span>
  <span data-ttu-id="7e274-103">Диалоговое окно **Редактор задачи «Управление CDC»** служит для настройки задачи «Управление CDC».</span><span class="sxs-lookup"><span data-stu-id="7e274-103">Use the **CDC Control Task Editor** dialog box to configure the CDC Control task.</span></span> <span data-ttu-id="7e274-104">В процессе настройки задачи «Управление CDC» определяется соединение с базой данных CDC, операция задачи CDC и сведения об управлении состояниями.</span><span class="sxs-lookup"><span data-stu-id="7e274-104">The CDC Control task configuration includes defining a connection to the CDC database, the CDC task operation and the state management information.</span></span>  
  
 <span data-ttu-id="7e274-105">Дополнительные сведения о задаче «Управление CDC» см. в разделе [CDC Control Task](control-flow/cdc-control-task.md).</span><span class="sxs-lookup"><span data-stu-id="7e274-105">To learn more about the CDC Control task, see [CDC Control Task](control-flow/cdc-control-task.md).</span></span>  
  
 <span data-ttu-id="7e274-106">**Открытие редактора задачи «Управление CDC»**</span><span class="sxs-lookup"><span data-stu-id="7e274-106">**To open the CDC Control Task Editor**</span></span>  
  
1.  <span data-ttu-id="7e274-107">В среде [!INCLUDE[ssBIDevStudio](../includes/ssbidevstudio-md.md)]откройте пакет служб [!INCLUDE[ssISCurrent](../includes/ssiscurrent-md.md)] , содержащий задачу «Управление CDC».</span><span class="sxs-lookup"><span data-stu-id="7e274-107">In [!INCLUDE[ssBIDevStudio](../includes/ssbidevstudio-md.md)], open the [!INCLUDE[ssISCurrent](../includes/ssiscurrent-md.md)] package that has the CDC Control task.</span></span>  
  
2.  <span data-ttu-id="7e274-108">На вкладке **Поток управления** дважды щелкните задачу "Управление CDC".</span><span class="sxs-lookup"><span data-stu-id="7e274-108">On the **Control Flow** tab, double-click the CDC Control task.</span></span>  
  
## <a name="options"></a><span data-ttu-id="7e274-109">Варианты</span><span class="sxs-lookup"><span data-stu-id="7e274-109">Options</span></span>  
 <span data-ttu-id="7e274-110">**Диспетчер соединений ADO.NET базы данных SQL Server CDC**</span><span class="sxs-lookup"><span data-stu-id="7e274-110">**SQL Server CDC database ADO.NET connection manager**</span></span>  
 <span data-ttu-id="7e274-111">Выберите из списка существующий диспетчер соединений или нажмите кнопку **Создать** , чтобы создать новое соединение.</span><span class="sxs-lookup"><span data-stu-id="7e274-111">Select an existing connection manager from the list, or click **New** to create a new connection.</span></span> <span data-ttu-id="7e274-112">Соединение должно быть установлено с базой данных [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] , которая включена для CDC и в которой находится выбранная таблица изменений.</span><span class="sxs-lookup"><span data-stu-id="7e274-112">The connection must be to a [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] database that is enabled for CDC and where the selected change table is located.</span></span>  
  
 <span data-ttu-id="7e274-113">**Операция управления CDC**</span><span class="sxs-lookup"><span data-stu-id="7e274-113">**CDC Control Operation**</span></span>  
 <span data-ttu-id="7e274-114">Выберите операцию для выполнения этой задачи.</span><span class="sxs-lookup"><span data-stu-id="7e274-114">Select the operation to run for this task.</span></span> <span data-ttu-id="7e274-115">Все операции используют переменную состояния, которая хранится в переменной пакета служб SSIS и содержит состояние, которое передается между различными компонентами пакета.</span><span class="sxs-lookup"><span data-stu-id="7e274-115">All operations use the state variable that is stored in an SSIS package variable that stores the state and passes it between the different components in the package.</span></span>  
  
-   <span data-ttu-id="7e274-116">**Отметить начало начальной загрузки**. Эта операция используется при выполнении начальной загрузки из активной базы данных без моментального снимка.</span><span class="sxs-lookup"><span data-stu-id="7e274-116">**Mark initial load start**: This operation is used when executing an initial load from an active database without a snapshot.</span></span> <span data-ttu-id="7e274-117">Он вызывается в начале пакета начальной загрузки для записи текущего номера LSN в базу данных-источник перед тем, как пакет начальной загрузки начинает читать исходные таблицы.</span><span class="sxs-lookup"><span data-stu-id="7e274-117">It is invoked at the beginning of an initial-load package to record the current LSN in the source database before the initial-load package starts reading the source tables.</span></span> <span data-ttu-id="7e274-118">Для этого необходимо соединение с базой данных-источником.</span><span class="sxs-lookup"><span data-stu-id="7e274-118">This requires a connection to the source database.</span></span>  
  
     <span data-ttu-id="7e274-119">Если выбрать операцию **Отметить начало начальной загрузки** при работе в [!INCLUDE[ssCurrent](../includes/sscurrent-md.md)] CDC (не Oracle), то пользователь, указанный в диспетчере соединений, должен входить в роль  **db_owner** или **sysadmin**.</span><span class="sxs-lookup"><span data-stu-id="7e274-119">If you select **Mark Initial Load Start** when working on [!INCLUDE[ssCurrent](../includes/sscurrent-md.md)] CDC (that is, not Oracle) the user specified in the connection manager must be either  **db_owner** or **sysadmin**.</span></span>  
  
-   <span data-ttu-id="7e274-120">**Отметить конец начальной загрузки**. Эта операция используется при выполнении начальной загрузки из активной базы данных без моментального снимка.</span><span class="sxs-lookup"><span data-stu-id="7e274-120">**Mark initial load end**: This operation is used when executing an initial load from an active database without a snapshot.</span></span> <span data-ttu-id="7e274-121">Она вызывается в конце пакета начальной загрузки для записи текущего номера LSN в базу данных-источник после того, как пакет начальной нагрузки завершит чтение исходных таблиц.</span><span class="sxs-lookup"><span data-stu-id="7e274-121">It is invoked at the end of an initial-load package to record the current LSN in the source database after the initial-load package finished reading the source tables.</span></span> <span data-ttu-id="7e274-122">Номер LSN определяется путем записи текущего времени при осуществлении данной операции и последующего запроса таблицы сопоставления `cdc.lsn_time_`в базе данных CDC для поиска любого изменения, которое произошло в последующее время.</span><span class="sxs-lookup"><span data-stu-id="7e274-122">This LSN is determined by recording nthe current time when this operation occurred and then querying the `cdc.lsn_time_`mapping table in the CDC database looking for a change that occurred after that time</span></span>  
  
     <span data-ttu-id="7e274-123">Если выбрать операцию **Отметить конец начальной загрузки** при работе в [!INCLUDE[ssCurrent](../includes/sscurrent-md.md)] CDC (не Oracle), то пользователь, указанный в диспетчере соединений, должен входить в роль  **db_owner** или **sysadmin**.</span><span class="sxs-lookup"><span data-stu-id="7e274-123">If you select **Mark Initial Load End** when working on [!INCLUDE[ssCurrent](../includes/sscurrent-md.md)] CDC (that is, not Oracle) the user specified in the connection manager must be either  **db_owner** or **sysadmin**.</span></span>  
  
-   <span data-ttu-id="7e274-124">**Отменить начало CDC**. Эта операция используется, если затем выполняется начальная загрузка из базы данных моментальных снимков или из замороженной базы данных.</span><span class="sxs-lookup"><span data-stu-id="7e274-124">**Mark CDC start**: This operation is used when then the initial load is made from a snapshot database or from a quiescence database.</span></span> <span data-ttu-id="7e274-125">Она вызывается в любом месте в пакете начальной загрузки.</span><span class="sxs-lookup"><span data-stu-id="7e274-125">It is invoked at any point within the initial load package.</span></span> <span data-ttu-id="7e274-126">Операция принимает параметр, которым может быть номер LSN моментального снимка или имя базы данных моментальных снимков (из которого автоматически получается номер LSN моментального снимка). Параметр также можно оставить пустым, и тогда текущий номер LSN базы данных будет служить начальным номером LSN для пакета обработки изменений.</span><span class="sxs-lookup"><span data-stu-id="7e274-126">The operation accepts a parameter that can be a snapshot LSN, a name of a snapshot database (from which the snapshot LSN will be derived automatically) or it can be left empty, in which case the current database LSN is used as the start LSN for the change processing package.</span></span>  
  
     <span data-ttu-id="7e274-127">Эта операция используется вместо операций «Отметить начало/конец начальной загрузки».</span><span class="sxs-lookup"><span data-stu-id="7e274-127">This operation is used instead of the Mark Initial Load Start/End operations.</span></span>  
  
     <span data-ttu-id="7e274-128">Если выбрать операцию **Отметить начало CDC** при работе в [!INCLUDE[ssCurrent](../includes/sscurrent-md.md)] CDC (не Oracle), то пользователь, указанный в диспетчере соединений, должен входить в роль  **db_owner** или **sysadmin**.</span><span class="sxs-lookup"><span data-stu-id="7e274-128">If you select **Mark CDC Start** when working on [!INCLUDE[ssCurrent](../includes/sscurrent-md.md)] CDC (that is, not Oracle) the user specified in the connection manager must be either  **db_owner** or **sysadmin**.</span></span>  
  
-   <span data-ttu-id="7e274-129">**Получить диапазон обработки**. Эта операция используется в пакете обработки изменений перед вызовом потока данных, в котором применяется поток исходных данных CDC.</span><span class="sxs-lookup"><span data-stu-id="7e274-129">**Get processing range**: This operation is used in a change processing package before invoking the data flow that uses the CDC Source data flow.</span></span> <span data-ttu-id="7e274-130">Операция устанавливает диапазон номеров LSN, считываемый потоком исходных данных CDC при вызове.</span><span class="sxs-lookup"><span data-stu-id="7e274-130">It establishes a range of LSNs that the CDC Source data flow reads when invoked.</span></span> <span data-ttu-id="7e274-131">Этот диапазон хранится в переменной пакета служб SSIS, которая используется источником CDC во время обработки потока данных.</span><span class="sxs-lookup"><span data-stu-id="7e274-131">The range is stored in an SSIS package variable that is used by the CDC Source during data-flow processing.</span></span>  
  
     <span data-ttu-id="7e274-132">Дополнительные сведения о возможных состояниях CDC, которые хранятся, см. в разделе [Определение переменной состояния](data-flow/define-a-state-variable.md).</span><span class="sxs-lookup"><span data-stu-id="7e274-132">For more information about the possible CDC states that are stored, see [Define a State Variable](data-flow/define-a-state-variable.md).</span></span>  
  
-   <span data-ttu-id="7e274-133">**Отметить обработанный диапазон**. Эта операция выполняется в пакете обработки изменений после каждого запуска CDC (после успешного завершения потока данных CDC) для записи последнего номера LSN, который был полностью обработан в текущем запуске CDC.</span><span class="sxs-lookup"><span data-stu-id="7e274-133">**Mark processed range**: This operation is used in a change processing package at the end of a  CDC run (after the CDC data flow is completed successfully) to record the last LSN that was fully processed in the CDC run.</span></span> <span data-ttu-id="7e274-134">При следующем вызове `GetProcessingRange` на выполнение эта позиция определяет начало следующего диапазона обработки.</span><span class="sxs-lookup"><span data-stu-id="7e274-134">The next time `GetProcessingRange` is executed, this position determines the start of the next processing range.</span></span>  
  
-   <span data-ttu-id="7e274-135">**Сбросить состояние CDC**. Эта операция используется для сброса хранимого состояния CDC, связанного с текущим контекстом CDC.</span><span class="sxs-lookup"><span data-stu-id="7e274-135">**Reset CDC state**: This operation is used to reset the persistent CDC state associated with the current CDC context.</span></span> <span data-ttu-id="7e274-136">После выполнения этой операции текущий максимальный номер LSN из таблицы LSN-timestamp `sys.fn_cdc_get_max_lsn` становится началом следующего диапазона обработки.</span><span class="sxs-lookup"><span data-stu-id="7e274-136">After this operation is run, the current maximum LSN from the LSN-timestamp `sys.fn_cdc_get_max_lsn` table becomes the start of the range for the next processing range.</span></span> <span data-ttu-id="7e274-137">Эта операция требует создания соединения с базой данных-источником.</span><span class="sxs-lookup"><span data-stu-id="7e274-137">This operation requires a connection to the source database.</span></span>  
  
     <span data-ttu-id="7e274-138">Примером использования этой операции является случай, когда нужно обработать только недавно созданные записи об изменениях, пропуская все старые записи об изменениях.</span><span class="sxs-lookup"><span data-stu-id="7e274-138">An example of when this operation is used is when you want to process only the newly created change records and ignore all old change records.</span></span>  
  
 <span data-ttu-id="7e274-139">**Переменная, содержащая состояние CDC**</span><span class="sxs-lookup"><span data-stu-id="7e274-139">**Variable containing the CDC state**</span></span>  
 <span data-ttu-id="7e274-140">Выберите переменную пакета служб SSIS, в которой хранятся сведения о состоянии для операции задачи.</span><span class="sxs-lookup"><span data-stu-id="7e274-140">Select the SSIS package variable that stores the state information for the task operation.</span></span> <span data-ttu-id="7e274-141">Переменную необходимо определить перед началом работы.</span><span class="sxs-lookup"><span data-stu-id="7e274-141">You should define a variable before you begin.</span></span> <span data-ttu-id="7e274-142">Если выбрать параметр **Автоматическое сохранение состояния**, то переменная состояния загружается и сохраняется автоматически.</span><span class="sxs-lookup"><span data-stu-id="7e274-142">If you select **Automatic state persistence**, the state variable is loaded and saved automatically.</span></span>  
  
 <span data-ttu-id="7e274-143">Дополнительные сведения об определении переменной состояния см. в разделе [Определение переменной состояния](data-flow/define-a-state-variable.md).</span><span class="sxs-lookup"><span data-stu-id="7e274-143">For more information about defining the state variable, see [Define a State Variable](data-flow/define-a-state-variable.md).</span></span>  
  
 <span data-ttu-id="7e274-144">**Номер LSN SQL Server для начала CDC/имя моментального снимка:**</span><span class="sxs-lookup"><span data-stu-id="7e274-144">**SQL Server LSN to start the CDC/Snapshot name:**</span></span>  
 <span data-ttu-id="7e274-145">введите текущий номер LSN базы данных-источника или имя базы данных моментальных снимков, из которой выполняется начальная загрузка, чтобы определить начало CDC.</span><span class="sxs-lookup"><span data-stu-id="7e274-145">Type the current source database LSN or the name of the snapshot database from which the initial load is performed to determine where the CDC starts.</span></span> <span data-ttu-id="7e274-146">Этот параметр доступен только в том случае, если параметр **Операция управления CDC** имеет значение **Отметить начало CDC**.</span><span class="sxs-lookup"><span data-stu-id="7e274-146">This is available only if the **CDC Control Operation** is set to **Mark CDC Start**.</span></span>  
  
 <span data-ttu-id="7e274-147">Дополнительные сведения об этих операциях см. в разделе [CDC Control Task](control-flow/cdc-control-task.md).</span><span class="sxs-lookup"><span data-stu-id="7e274-147">For more information about these operations, see [CDC Control Task](control-flow/cdc-control-task.md)</span></span>  
  
 <span data-ttu-id="7e274-148">**Автоматически сохранять состояние в таблице базы данных**</span><span class="sxs-lookup"><span data-stu-id="7e274-148">**Automatically store state in a database table**</span></span>  
 <span data-ttu-id="7e274-149">Установите этот флажок для задачи «Управление CDC», чтобы автоматически обрабатывать загрузку и сохранение состояния CDC в таблице состояния, содержащейся в указанной базе данных.</span><span class="sxs-lookup"><span data-stu-id="7e274-149">Select this check box for the CDC Control task to automatically handle loading and storing the CDC state in a state table contained in the specified database.</span></span> <span data-ttu-id="7e274-150">Если этот флажок не установлен, то разработчик должен загружать состояние CDC при запуске пакета и сохранять его при изменении состояния CDC.</span><span class="sxs-lookup"><span data-stu-id="7e274-150">When not selected, the developer must load the CDC State when the package starts and save it whenever the CDC State changes.</span></span>  
  
 <span data-ttu-id="7e274-151">**Диспетчер соединений для базы данных, где хранится состояние**</span><span class="sxs-lookup"><span data-stu-id="7e274-151">**Connection manager for the database where the state is stored**</span></span>  
 <span data-ttu-id="7e274-152">Выберите из списка существующий диспетчер соединений ADO.NET или нажмите кнопку «Создать», чтобы создать новое соединение.</span><span class="sxs-lookup"><span data-stu-id="7e274-152">Select an existing ADO.NET connection manager from the list, or click New to create a new connection.</span></span> <span data-ttu-id="7e274-153">Это соединение с базой данных [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] , содержащей таблицу состояния.</span><span class="sxs-lookup"><span data-stu-id="7e274-153">This connection is to a [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] database that contains the State table.</span></span> <span data-ttu-id="7e274-154">Таблица состояния содержит сведения о состоянии.</span><span class="sxs-lookup"><span data-stu-id="7e274-154">The State table contains the State information.</span></span>  
  
 <span data-ttu-id="7e274-155">Этот параметр доступен только в том случае, если выбран параметр **Автоматическое сохранение состояния** , и является обязательным.</span><span class="sxs-lookup"><span data-stu-id="7e274-155">This is available only if **Automatic state persistence** is selected and it is a required parameter.</span></span>  
  
 <span data-ttu-id="7e274-156">**Таблица для хранения состояния**</span><span class="sxs-lookup"><span data-stu-id="7e274-156">**Table to use for storing state**</span></span>  
 <span data-ttu-id="7e274-157">Введите имя таблицы состояния, используемой для хранения состояния CDC.</span><span class="sxs-lookup"><span data-stu-id="7e274-157">Type the name of the state table to be used for storing the CDC state.</span></span> <span data-ttu-id="7e274-158">Указанная таблица должна содержать два столбца с именами **name** и **state** . Оба столбца должны иметь тип данных **varchar (256)**.</span><span class="sxs-lookup"><span data-stu-id="7e274-158">The table specified must have two columns called **name** and **state** and both columns must be of the data type **varchar (256)**.</span></span>  
  
 <span data-ttu-id="7e274-159">Также можно выбрать вариант **Создать** , чтобы получить скрипт SQL, выполняющий построение новой таблицы состояния с необходимыми столбцами (необязательно).</span><span class="sxs-lookup"><span data-stu-id="7e274-159">You can optionally select **New** to get an SQL script that builds a new State table with the required columns.</span></span> <span data-ttu-id="7e274-160">Если выбран параметр **Автоматическое сохранение состояния** , то разработчик должен создать таблицу состояния, соответствующую указанным выше требованиям.</span><span class="sxs-lookup"><span data-stu-id="7e274-160">When **Automatic state persistence** is selected, the developer must create a state table according to the requirements listed above.</span></span>  
  
 <span data-ttu-id="7e274-161">Этот параметр доступен только в том случае, если выбран параметр **Автоматическое сохранение состояния** , и является обязательным.</span><span class="sxs-lookup"><span data-stu-id="7e274-161">This is available only if **Automatic state persistence** is selected and it is a required parameter.</span></span>  
  
 <span data-ttu-id="7e274-162">**Имя состояния**</span><span class="sxs-lookup"><span data-stu-id="7e274-162">**State name**</span></span>  
 <span data-ttu-id="7e274-163">Введите имя, связанное с сохраняемым состоянием CDC.</span><span class="sxs-lookup"><span data-stu-id="7e274-163">Type a name to associate with the persistent CDC state.</span></span> <span data-ttu-id="7e274-164">В пакетах полной загрузки и пакетах CDC, работающих в одном контексте CDC, будет указываться общее имя состояния.</span><span class="sxs-lookup"><span data-stu-id="7e274-164">The full load and CDC packages that work with the same CDC context will specify a common state name.</span></span> <span data-ttu-id="7e274-165">Это имя используется для подстановки строки состояния в таблице состояния</span><span class="sxs-lookup"><span data-stu-id="7e274-165">This name is used for looking up the state row in the state table</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="7e274-166">См. также:</span><span class="sxs-lookup"><span data-stu-id="7e274-166">See Also</span></span>  
 [<span data-ttu-id="7e274-167">Пользовательские свойства задач управления CDC</span><span class="sxs-lookup"><span data-stu-id="7e274-167">CDC Control Task Custom Properties</span></span>](control-flow/cdc-control-task-custom-properties.md)  
  
  
