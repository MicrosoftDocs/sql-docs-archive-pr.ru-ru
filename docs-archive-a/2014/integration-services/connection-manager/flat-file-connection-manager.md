---
title: Диспетчер соединений с неструктурированными файлами | Документы Майкрософт
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
helpviewer_keywords:
- connection managers [Integration Services], Flat File
- connections [Integration Services], flat files
- files [Integration Services], connections
- Flat File connection manager
- flat files
- flat file connections [Integration Services]
ms.assetid: 7830f80d-af32-4e8f-a6fc-f03af6bc1946
author: chugugrace
ms.author: chugu
ms.openlocfilehash: 961fa5ebd0c254c152cb4a84a855f719b6dfaa43
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87738573"
---
# <a name="flat-file-connection-manager"></a><span data-ttu-id="8667d-102">Диспетчер соединений с неструктурированными файлами</span><span class="sxs-lookup"><span data-stu-id="8667d-102">Flat File Connection Manager</span></span>
  <span data-ttu-id="8667d-103">Диспетчер соединений с неструктурированными файлами дает возможность пакету получить доступ к данным неструктурированного файла.</span><span class="sxs-lookup"><span data-stu-id="8667d-103">A Flat File connection manager enables a package to access data in a flat file.</span></span> <span data-ttu-id="8667d-104">Например, исходные и целевые неструктурированные файлы могут использоваться диспетчерами соединений с неструктурированными файлами для извлечения и загрузки данных.</span><span class="sxs-lookup"><span data-stu-id="8667d-104">For example, the Flat File source and destination can use Flat File connection managers to extract and load data.</span></span>  
  
 <span data-ttu-id="8667d-105">Диспетчер соединений с неструктурированными файлами получает доступ только к одному файлу.</span><span class="sxs-lookup"><span data-stu-id="8667d-105">The Flat File connection manager can access only one file.</span></span> <span data-ttu-id="8667d-106">Чтобы ссылаться на несколько файлов, воспользуйтесь диспетчером соединений с несколькими неструктурированными файлами вместо обычного диспетчера соединений с неструктурированными файлами.</span><span class="sxs-lookup"><span data-stu-id="8667d-106">To reference multiple files, use a Multiple Flat Files connection manager instead of a Flat File connection manager.</span></span> <span data-ttu-id="8667d-107">Дополнительные сведения см. в разделе [Multiple Flat Files Connection Manager](multiple-flat-files-connection-manager.md).</span><span class="sxs-lookup"><span data-stu-id="8667d-107">For more information, see [Multiple Flat Files Connection Manager](multiple-flat-files-connection-manager.md).</span></span>  
  
## <a name="column-length"></a><span data-ttu-id="8667d-108">Длина столбца</span><span class="sxs-lookup"><span data-stu-id="8667d-108">Column Length</span></span>  
 <span data-ttu-id="8667d-109">По умолчанию диспетчер соединений с неструктурированными файлами устанавливает длину строки столбцов, равную 50 символам.</span><span class="sxs-lookup"><span data-stu-id="8667d-109">By default, the Flat File connection manager sets the length of string columns to 50 characters.</span></span> <span data-ttu-id="8667d-110">В диалоговом окне **Редактор диспетчера соединений с неструктурированными файлами** можно оценить образец данных и автоматически изменить длину этих столбцов во избежание обрезки данных или чрезмерной ширины столбцов.</span><span class="sxs-lookup"><span data-stu-id="8667d-110">In the **Flat File Connection Manager Editor** dialog box, you can evaluate sample data and automatically resize the length of these columns to prevent truncation of data or excess column width.</span></span> <span data-ttu-id="8667d-111">Пока не будет изменена длина столбцов в источнике неструктурированного файла или преобразования, длина строкового столбца в потоке данных останется неизменной.</span><span class="sxs-lookup"><span data-stu-id="8667d-111">Also, unless you subsequently resize the column length in a Flat File source or a transformation, the column length of string column remains the same throughout the data flow.</span></span> <span data-ttu-id="8667d-112">Если эти строки столбцов сопоставляются с более узкими целевыми столбцами, интерфейс пользователя выдаст предупреждение.</span><span class="sxs-lookup"><span data-stu-id="8667d-112">If these string columns map to destination columns that are narrower, warnings appear in the user interface.</span></span> <span data-ttu-id="8667d-113">Более того, во время выполнения могут появляться ошибки вследствие усечения данных.</span><span class="sxs-lookup"><span data-stu-id="8667d-113">Moreover, at run time, errors may occur due to data truncation.</span></span> <span data-ttu-id="8667d-114">Во избежание ошибок или усечения можно изменить размер столбцов, чтобы они были совместимы с целевыми столбцами в диспетчере соединений с неструктурированными файлами, в источнике неструктурированного файла или в преобразовании.</span><span class="sxs-lookup"><span data-stu-id="8667d-114">To avoid errors or truncation, you can resize the columns to be compatible with the destination columns in the Flat File connection manager, the Flat File source, or a transformation.</span></span> <span data-ttu-id="8667d-115">Чтобы изменить длину выходных столбцов, задайте `Length` свойство выходного столбца на вкладке **свойства входных и выходных данных** в диалоговом окне **Расширенный редактор** .</span><span class="sxs-lookup"><span data-stu-id="8667d-115">To modify the length of output columns, you set the `Length` property of the output column on the **Input and Output Properties** tab in the **Advanced Editor** dialog box.</span></span>  
  
 <span data-ttu-id="8667d-116">Изменять выходные столбцы в источнике неструктурированного файла вручную нет необходимости, если обновить длину столбцов в диспетчере соединений с неструктурированными файлами после того, как будет добавлен и настроен источник неструктурированного файла, который использует диспетчер соединения.</span><span class="sxs-lookup"><span data-stu-id="8667d-116">If you update column lengths in the Flat File connection manager after you have added and configured the Flat File source that uses the connection manager, you do not have to manually resize the output columns in the Flat File source.</span></span> <span data-ttu-id="8667d-117">При открытии диалогового окна **Источник «Неструктурированный файл»** источник неструктурированного файла предоставляет параметр для синхронизации метаданных столбца.</span><span class="sxs-lookup"><span data-stu-id="8667d-117">When you open the **Flat File Source** dialog box, the Flat File source provides an option to synchronize the column metadata.</span></span>  
  
## <a name="configuration-of-the-flat-file-connection-manager"></a><span data-ttu-id="8667d-118">Настройка диспетчера соединения с неструктурированными файлами</span><span class="sxs-lookup"><span data-stu-id="8667d-118">Configuration of the Flat File Connection Manager</span></span>  
 <span data-ttu-id="8667d-119">При добавлении к пакету диспетчера соединений с неструктурированными файлами [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] создает диспетчер соединений, который будет разрешаться в соединение с неструктурированным файлом во время выполнения, устанавливает свойства соединения с неструктурированными файлами и добавляет диспетчер соединений с неструктурированными файлами в `Connections` коллекцию пакета.</span><span class="sxs-lookup"><span data-stu-id="8667d-119">When you add a Flat File connection manager to a package, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] creates a connection manager that will resolve to a Flat File connection at run time, sets the Flat File connection properties, and adds the Flat File connection manager to the `Connections` collection of the package.</span></span>  
  
 <span data-ttu-id="8667d-120">Свойству `ConnectionManagerType` диспетчера соединений присваивается значение `FLATFILE`.</span><span class="sxs-lookup"><span data-stu-id="8667d-120">The `ConnectionManagerType` property of the connection manager is set to `FLATFILE`.</span></span>  
  
 <span data-ttu-id="8667d-121">По умолчанию диспетчер соединений с неструктурированными файлами всегда проверяет наличие разделителя строки в данных без кавычек и начинает новую строку при нахождении разделителя строки.</span><span class="sxs-lookup"><span data-stu-id="8667d-121">By default, the Flat File connection manager always checks for a row delimiter in unquoted data, and starts a new row when a row delimiter is found.</span></span> <span data-ttu-id="8667d-122">Что позволяет диспетчеру соединений правильно анализировать файлы со строками, в которых пропущены поля столбцов.</span><span class="sxs-lookup"><span data-stu-id="8667d-122">This enables the connection manager to correctly parse files with rows that are missing column fields.</span></span>  
  
 <span data-ttu-id="8667d-123">В некоторых случаях отключение этой функции может улучшить производительность пакета.</span><span class="sxs-lookup"><span data-stu-id="8667d-123">In some cases, disabling this feature may improve package performance.</span></span> <span data-ttu-id="8667d-124">Эту функцию можно отключить, задав для свойства диспетчера соединений с неструктурированными **AlwaysCheckForRowDelimiters**файлами значение AlwaysCheckForRowDelimiters `False` .</span><span class="sxs-lookup"><span data-stu-id="8667d-124">You can disable this feature by setting the Flat File connection manager property, **AlwaysCheckForRowDelimiters**, to `False`.</span></span>  
  
 <span data-ttu-id="8667d-125">Настройте диспетчер соединений с неструктурированными файлами одним из следующих способов.</span><span class="sxs-lookup"><span data-stu-id="8667d-125">You can configure the Flat File connection manager in the following ways:</span></span>  
  
-   <span data-ttu-id="8667d-126">Укажите файл, локаль и используемую кодовую страницу.</span><span class="sxs-lookup"><span data-stu-id="8667d-126">Specify the file, locale, and code page to use.</span></span> <span data-ttu-id="8667d-127">Локаль используется для интерпретации данных, зависящих от локаля, например дат, а кодовая страница используется для конвертации строковых данных в формат Юникод.</span><span class="sxs-lookup"><span data-stu-id="8667d-127">The locale is used to interpret locale-sensitive data such as dates, and the code page is used to convert string data to Unicode.</span></span>  
  
-   <span data-ttu-id="8667d-128">Укажите формат файла.</span><span class="sxs-lookup"><span data-stu-id="8667d-128">Specify the file format.</span></span> <span data-ttu-id="8667d-129">Можно использовать форматы с разделителями, фиксированной шириной или без выравнивания по правому краю.</span><span class="sxs-lookup"><span data-stu-id="8667d-129">You can use a delimited, fixed width, or ragged right format.</span></span>  
  
-   <span data-ttu-id="8667d-130">Укажите строку заголовка, строку данных и разделители столбцов.</span><span class="sxs-lookup"><span data-stu-id="8667d-130">Specify a header row, data row, and column delimiters.</span></span> <span data-ttu-id="8667d-131">Разделители столбцов могут указываться на уровне файла и перезаписываться на уровне столбцов.</span><span class="sxs-lookup"><span data-stu-id="8667d-131">Column delimiters can be set at the file level and overwritten at the column level.</span></span>  
  
-   <span data-ttu-id="8667d-132">Определите, будет ли первая строка файла содержать имена столбцов.</span><span class="sxs-lookup"><span data-stu-id="8667d-132">Indicate whether the first row in the file contains column names.</span></span>  
  
-   <span data-ttu-id="8667d-133">Укажите символ ограничителя текста.</span><span class="sxs-lookup"><span data-stu-id="8667d-133">Specify a text qualifier character.</span></span> <span data-ttu-id="8667d-134">Каждый столбец может быть настроен на распознавание текстового ограничителя.</span><span class="sxs-lookup"><span data-stu-id="8667d-134">Each column can be configured to recognize a text qualifier.</span></span>  
  
     <span data-ttu-id="8667d-135">Теперь для внедрения квалификатора символа в заданную строку можно использовать символ ограничителя.</span><span class="sxs-lookup"><span data-stu-id="8667d-135">The use of a qualifier character to embed a qualifier character into a qualified string is now supported.</span></span> <span data-ttu-id="8667d-136">Двойной экземпляр ограничителя текста интерпретируется как литерал, один экземпляр строки ограничителя.</span><span class="sxs-lookup"><span data-stu-id="8667d-136">The double instance of a text qualifier is interpreted as a literal, single instance of that string.</span></span> <span data-ttu-id="8667d-137">Например, если ограничитель текста — одинарная кавычка, а входные данные — 'abc', 'def', 'g'hi', то выходные данные будут иметь вид abc, def, g'hi.</span><span class="sxs-lookup"><span data-stu-id="8667d-137">For example, if the text qualifier is a single quote and the input data is 'abc', 'def', 'g'hi', the output data is abc, def, g'hi.</span></span>  
  
-   <span data-ttu-id="8667d-138">Установите свойства, например имя, тип данных и максимальную ширину отдельных столбцов.</span><span class="sxs-lookup"><span data-stu-id="8667d-138">Set properties such as the name, data type, and maximum width on individual columns.</span></span>  
  
 <span data-ttu-id="8667d-139">Можно задать свойство ConnectionString для диспетчера соединений с неструктурированными файлами, указывая выражение в окне "Свойства" [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)].</span><span class="sxs-lookup"><span data-stu-id="8667d-139">You can set the ConnectionString property for the Flat File connection manager by specifying an expression in the Properties window of [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)].</span></span> <span data-ttu-id="8667d-140">Для предотвращения ошибок проверки выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="8667d-140">To avoid a validation error, do the following.</span></span>  
  
-   <span data-ttu-id="8667d-141">Если для указания файла используется выражение, введите путь к файлу в поле **Имя файла** в **редакторе диспетчера соединений с неструктурированными файлами**.</span><span class="sxs-lookup"><span data-stu-id="8667d-141">When you use an expression to specify the file, add a file path in the **File name** box in the **Flat File Connection Manager Editor**.</span></span>  
  
-   <span data-ttu-id="8667d-142">Задайте свойство **DelayValidation** в диспетчере соединений с неструктурированными файлами равным **True**.</span><span class="sxs-lookup"><span data-stu-id="8667d-142">Set the **DelayValidation** property on the Flat File connection manager to **True**.</span></span>  
  
 <span data-ttu-id="8667d-143">Можно использовать выражение для создания имени файла во время выполнения, применяя диспетчер соединений с неструктурированными файлами с назначением «Неструктурированный файл».</span><span class="sxs-lookup"><span data-stu-id="8667d-143">You can use an expression to create a file name at runtime by using the Flat File connection manager with the Flat File destination.</span></span>  
  
 <span data-ttu-id="8667d-144">Значения свойств можно задавать с помощью конструктора [!INCLUDE[ssIS](../../includes/ssis-md.md)] или программными средствами.</span><span class="sxs-lookup"><span data-stu-id="8667d-144">You can set properties through [!INCLUDE[ssIS](../../includes/ssis-md.md)] Designer or programmatically.</span></span>  
  
 <span data-ttu-id="8667d-145">Дополнительные сведения о свойствах, которые можно задать в конструкторе служб [!INCLUDE[ssIS](../../includes/ssis-md.md)] , см. в следующих разделах:</span><span class="sxs-lookup"><span data-stu-id="8667d-145">For more information about the properties that you can set in [!INCLUDE[ssIS](../../includes/ssis-md.md)] Designer, click one of the following topics:</span></span>  
  
-   [<span data-ttu-id="8667d-146">Редактор диспетчера соединений с неструктурированными файлами (страница "Общие")</span><span class="sxs-lookup"><span data-stu-id="8667d-146">Flat File Connection Manager Editor &#40;General Page&#41;</span></span>](../general-page-of-integration-services-designers-options.md)  
  
-   [<span data-ttu-id="8667d-147">Редактор диспетчера подключений к неструктурированным файлам (страница "Столбцы")</span><span class="sxs-lookup"><span data-stu-id="8667d-147">Flat File Connection Manager Editor &#40;Columns Page&#41;</span></span>](../flat-file-connection-manager-editor-columns-page.md)  
  
-   [<span data-ttu-id="8667d-148">Редактор диспетчера подключений к неструктурированным файлам (страница "Дополнительно")</span><span class="sxs-lookup"><span data-stu-id="8667d-148">Flat File Connection Manager Editor &#40;Advanced Page&#41;</span></span>](../flat-file-connection-manager-editor-advanced-page.md)  
  
-   [<span data-ttu-id="8667d-149">Редактор диспетчера подключений с неструктурированными файлами (страница "Предварительный просмотр")</span><span class="sxs-lookup"><span data-stu-id="8667d-149">Flat File Connection Manager Editor &#40;Preview Page&#41;</span></span>](../flat-file-connection-manager-editor-preview-page.md)  
  
 <span data-ttu-id="8667d-150">Дополнительные сведения о программной настройке диспетчера подключений см. в разделах <xref:Microsoft.SqlServer.Dts.Runtime.ConnectionManager> и [Добавление соединений программным образом](../building-packages-programmatically/adding-connections-programmatically.md).</span><span class="sxs-lookup"><span data-stu-id="8667d-150">For information about configuring a connection manager programmatically, see <xref:Microsoft.SqlServer.Dts.Runtime.ConnectionManager> and [Adding Connections Programmatically](../building-packages-programmatically/adding-connections-programmatically.md).</span></span>  
  
  
