---
title: Конфигурации пакетов | Документация Майкрософт
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
helpviewer_keywords:
- package configuration syntax [Integration Services]
- SQL Server Integration Services packages, configurations
- SSIS packages, configurations
- XML [Integration Services]
- Integration Services packages, configurations
- configuration syntax [Integration Services]
- indirect configurations [Integration Services]
- configurations [Integration Services]
- direct configurations [Integration Services]
- packages [Integration Services], configurations
ms.assetid: d20e0311-1fc9-4ddc-a381-6d127cf11b69
author: chugugrace
ms.author: chugu
ms.openlocfilehash: 0d22dbfedcf4cf7084e1667586f9774926f3b2a2
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87668995"
---
# <a name="package-configurations"></a>Конфигурации пакетов
  Службы [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] содержат конфигурацию пакетов, которую можно использовать для обновления значений свойств во время выполнения.  
  
> [!NOTE]  
>  Доступны конфигурации для модели развертывания пакетов. Для моделей развертывания проектов вместо конфигураций используются параметры. Модель развертывания проектов позволяет развертывать проекты служб [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] на сервере служб [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] . Дополнительные сведения о моделях развертывания см. в разделе [Deployment of Projects and Packages](packages/deploy-integration-services-ssis-projects-and-packages.md).  
  
 Конфигурация представляет собой пару вида «свойство-значение», которая добавляется к завершенному пакету. Обычно свойства пакета устанавливаются в объектах пакета во время его разработки, а затем к пакету добавляется конфигурация. При выполнении пакета он получает новые значения свойств из конфигурации. Например, с помощью конфигурации можно изменить строку соединения в диспетчере соединений или обновить значение переменной.  
  
 Конфигурации пакета дают следующие преимущества.  
  
-   Конфигурации облегчают перенос пакетов из среды разработки в рабочую среду. Например, конфигурация может обновить путь к исходному файлу или изменить имя базы данных или сервера.  
  
-   Конфигурации полезны при развертывании пакетов на множестве разных серверов. Например, переменная в конфигурации каждого развернутого пакета может иметь различное значение места на диске; если доступное место на диске не соответствует этому значению, данный пакет не запускается.  
  
-   Конфигурации делают пакеты более гибкими. Например, конфигурация может обновить значение переменной, используемой в выражении свойства.  
  
 [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] поддерживают несколько различных методов хранения конфигураций пакетов, таких как XML-файлы, таблицы в базе данных [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] , переменные среды и пакета.  
  
 Каждая конфигурация является парой вида «свойство-значение». XML-файл конфигурации и [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] могут включать несколько конфигураций.  
  
 Конфигурации включаются при создании программы развертывания для установки пакетов. При установке пакета обновление конфигураций может быть одним из этапов установки.  
  
## <a name="understanding-how-package-configurations-are-applied-at-run-time"></a>Основные сведения о применении параметров конфигурации пакетов во время выполнения  
 Если для выполнения развернутого пакета используется программа командной строки **dtexec** (dtexec.exe), эта программа применяет параметры конфигурации пакета дважды. до и после применения настроек, указанных в командной строке.  
  
 Когда программа загружает и выполняет пакет, события происходят в следующем порядке.  
  
1.  Программа **dtexec** загружает пакет.  
  
2.  Программа применяет параметры конфигурации, заданные в пакете во время разработки, в порядке, который указан в пакете. (Единственным исключением являются параметры конфигурации переменных родительского пакета. Программа применяет их только один раз, в ходе дальнейшего процесса.)  
  
3.  Затем программа применяет параметры, указанные в командной строке.  
  
4.  Затем программа повторно загружает параметры конфигурации, заданные в пакете во время разработки, в порядке, который указан в пакете. (Исключением из этого правила вновь являются параметры конфигурации переменных родительского пакета.) Программа применяет указанные параметры командной строки для повторной загрузки параметров конфигурации. Поэтому возможна повторная загрузка различных значений из различных расположений.  
  
5.  Программа применяет параметры конфигурации переменных родительского пакета.  
  
6.  Программа выполняет пакет.  
  
 Способ, которым программа **dtexec** применяет параметры конфигурации, влияет на следующие параметры командной строки:  
  
-   Во время выполнения можно использовать параметр **/Connection** или **/Set** , чтобы загрузить параметры конфигурации пакета из расположения, отличного от указанного во время разработки.  
  
-   С помощью параметра **/ConfigFile** можно загрузить дополнительные конфигурации, не указанные во время разработки.  
  
 Однако к этим параметрам командной строки применяются некоторые ограничения.  
  
-   Нельзя использовать параметр **/Set** или **/Connection** для переопределения единичных значений, которые также задаются конфигурацией.  
  
-   Нельзя использовать параметр **/ConfigFile** для загрузки конфигураций, которые заменяют параметры, указанные во время разработки.  
  
 Дополнительные сведения об этих параметрах и о различиях в работе этих параметров [!INCLUDE[ssISCurrent](../includes/ssiscurrent-md.md)] в и более ранних версиях см. [в разделе изменения в работе Integration Services функций в SQL Server 2014](../../2014/integration-services/behavior-changes-to-integration-services-features-in-sql-server-2014.md).  
  
## <a name="package-configuration-types"></a>Типы конфигураций пакета  
 Следующая таблица описывает типы конфигураций пакета.  
  
|Тип|Описание|  
|----------|-----------------|  
|XML-файл конфигурации|XML-файл содержит конфигурации. XML-файл может включать несколько конфигураций.|  
|Переменная среды|Переменная среды содержит конфигурацию.|  
|Параметр реестра|Параметр реестра содержит конфигурацию.|  
|Переменная родительского пакета|Переменная пакета содержит конфигурацию. Этот тип конфигурации обычно используется для обновления свойств вызываемых пакетов.|  
|Таблица [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)]|Таблица в базе данных [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] содержит конфигурацию. Таблица может включать несколько конфигураций.|  
  
### <a name="xml-configuration-files"></a>XML-файлы конфигурации  
 Выбрав тип конфигурации **XML-файл конфигурации** , можно создать новый файл конфигурации, использовать существующий и добавить новые конфигурации или использовать существующий и перезаписать его содержимое.  
  
 XML-файл конфигурации содержит следующие два раздела.  
  
-   Заголовок, содержащий сведения о файле конфигурации. Этот элемент включает атрибуты, такие как дата создания файла и имя создателя файла.  
  
-   Элементы конфигурации, содержащие сведения о каждой конфигурации. Этот элемент включает атрибуты, такие как путь свойства и заданное значение свойства.  
  
 Следующий программный код на языке XML показывает синтаксис XML-файла конфигурации. В этом примере показана конфигурация свойства Value для целочисленной переменной с именем `MyVar`.  
  
```  
<?xml version="1.0"?>  
<DTSConfiguration>  
   <DTSConfigurationHeading>  
      <DTSConfigurationFileInfo  
          GeneratedBy="DomainName\UserName"  
          GeneratedFromPackageName="Package"  
          GeneratedFromPackageID="{2AF06766-817A-4E28-9878-0DE37A150648}"  
          GeneratedDate="2/01/2005 5:58:09 PM"/>  
   </DTSConfigurationHeading>  
   <Configuration ConfiguredType="Property" Path="\Package.Variables[User::MyVar].Value" ValueType="Int32">  
      <ConfiguredValue>0</ConfiguredValue>  
   </Configuration>  
</DTSConfiguration>  
  
```  
  
### <a name="registry-entry"></a>Параметр реестра  
 Если для хранения конфигурации нужно использовать параметр реестра, то можно либо использовать существующий раздел, либо создать новый подраздел в разделе HKEY_CURRENT_USER. Используемый раздел реестра должен иметь значение с именем `Value`. Значение может иметь строковый тип или тип DWORD.  
  
 Если выбран тип конфигурации **Запись реестра** , необходимо ввести имя раздела реестра в соответствующее поле. Формат — \<registry key>. Если есть необходимость применить раздел реестра, не находящийся в корне куста HKEY_CURRENT_USER, используйте для указания этого раздела формат \<Registry key\registry key\\...>. Например, чтобы использовать раздел MyPackage, расположенный в разделе SSISPackages, введите `SSISPackages\MyPackage`.  
  
### <a name="sql-server"></a>SQL Server  
 При выборе типа конфигурации **SQL Server** задается соединение с базой данных [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] , в которой необходимо хранить конфигурации. Можно сохранить конфигурации в существующей таблице или создать новую в указанной базе данных.  
  
 Следующая инструкция SQL показывает применяемую по умолчанию инструкцию CREATE TABLE, которую предоставляет мастер настройки пакета.  
  
```  
CREATE TABLE [dbo].[SSIS Configurations]  
(  
ConfigurationFilter NVARCHAR(255) NOT NULL,  
ConfiguredValue NVARCHAR(255) NULL,  
PackagePath NVARCHAR(255) NOT NULL,  
ConfiguredValueType NVARCHAR(20) NOT NULL  
)  
  
```  
  
 Имя, задаваемое для конфигурации, является значением, которое хранится в столбце **ConfigurationFilter** .  
  
## <a name="direct-and-indirect-configurations"></a>Прямые и косвенные конфигурации  
 [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] предоставляют прямые и косвенные конфигурации. Если задать конфигурации напрямую, службы [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] создадут прямую связь между элементом конфигурации и свойством объекта пакета. Прямые конфигурации используются в том случае, когда местоположение источника не меняется. Например, если пользователь уверен, что все развертываемые элементы пакета используют один и тот же путь к файлу, можно задать XML-файл конфигурации.  
  
 Косвенные конфигурации используют переменные среды. Конфигурация указывает на переменную среды, содержащую значение конфигурации, вместо задания значения конфигурации напрямую. Использовать косвенные конфигурации лучше в случае, когда местоположение конфигурации меняется для каждого развертываемого пакета.  
  
## <a name="related-tasks"></a>Связанные задачи  
 [Создание конфигурации пакетов](../../2014/integration-services/create-package-configurations.md)  
  
## <a name="related-content"></a>См. также  
  
-   Техническая статья [Understanding Integration Services Package Configurations](https://go.microsoft.com/fwlink/?LinkId=165643)(Основные сведения о конфигурации пакетов служб Integration Services) на сайте msdn.microsoft.com.  
  
-   Запись блога, [Создание пакетов в конфигурациях пакетов кода](https://go.microsoft.com/fwlink/?LinkId=217663)на www.sqlis.com.  
  
-   Запись блога, [Пример API — программное добавление файла конфигурации в пакет](https://go.microsoft.com/fwlink/?LinkId=217664)на blogs.MSDN.com.  
  
  
