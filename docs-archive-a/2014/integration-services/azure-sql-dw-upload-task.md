---
title: Задача отправки информации в хранилище данных SQL Azure | Документы Майкрософт
ms.custom: ''
ms.date: 12/29/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
f1_keywords:
- SQL12.DTS.DESIGNER.AFPDWUPTASK.F1
- SQL11.DTS.DESIGNER.AFPDWUPTASK.F1
ms.assetid: 112cf764-f85a-4c1a-b732-d299d717c0d4
author: yualan
ms.author: chugu
ms.openlocfilehash: d90cc36b5e8beb35313b76ecef2ed95f065dcb89
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87656534"
---
# <a name="azure-sql-dw-upload-task"></a><span data-ttu-id="eeb8b-102">Задача отправки информации в хранилище данных SQL Azure</span><span class="sxs-lookup"><span data-stu-id="eeb8b-102">Azure SQL DW Upload Task</span></span>
<span data-ttu-id="eeb8b-103">**Задача отправки информации в хранилище данных SQL Azure** позволяет отправить локальные данные в таблицу хранилища данных SQL Azure с использованием пакета SSIS.</span><span class="sxs-lookup"><span data-stu-id="eeb8b-103">The **Azure SQL DW Upload Task** enables an SSIS package to upload local data to a table in Azure SQL Data Warehouse (DW).</span></span> <span data-ttu-id="eeb8b-104">В настоящее время в качестве формата исходного файла данных поддерживается текст с разделителями в кодировке UTF-8.</span><span class="sxs-lookup"><span data-stu-id="eeb8b-104">The currently supported source data file format is delimited text in UTF8 encoding.</span></span> <span data-ttu-id="eeb8b-105">Процесс передачи соответствует эффективному подходу Polybase.</span><span class="sxs-lookup"><span data-stu-id="eeb8b-105">The uploading process follows the efficient PolyBase approach.</span></span> <span data-ttu-id="eeb8b-106">В частности, данные сначала будут переданы в хранилище BLOB-объектов Azure и лишь затем в хранилище данных SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="eeb8b-106">Specifically, data will first be uploaded to Azure Blob Storage, and then to Azure SQL DW.</span></span> <span data-ttu-id="eeb8b-107">Поэтому для использования этой задачи требуется учетная запись хранилища BLOB-объектов Azure.</span><span class="sxs-lookup"><span data-stu-id="eeb8b-107">Therefore, an Azure Blob Storage account is needed to use this task.</span></span>

<span data-ttu-id="eeb8b-108">Чтобы добавить **задачу отправки информации в хранилище данных SQL Azure**, перетащите ее из панели элементов служб SSIS на холст конструктора и дважды щелкните ее (или щелкните ее правой кнопкой мыши), а затем выберите команду **Изменить** , чтобы открыть диалоговое окно редактора задач.</span><span class="sxs-lookup"><span data-stu-id="eeb8b-108">To add an **Azure SQL DW Upload Task**, drag-drop it from SSIS Toolbox to the designer canvas, and double-click or right-click and click **Edit** to see the task editor dialog box.</span></span>

<span data-ttu-id="eeb8b-109">На странице **Общие** настройте следующие свойства.</span><span class="sxs-lookup"><span data-stu-id="eeb8b-109">On the **General** page, configure the following properties.</span></span>

<span data-ttu-id="eeb8b-110">Поле</span><span class="sxs-lookup"><span data-stu-id="eeb8b-110">Field</span></span>|<span data-ttu-id="eeb8b-111">Description</span><span class="sxs-lookup"><span data-stu-id="eeb8b-111">Description</span></span>
-----|-----------
<span data-ttu-id="eeb8b-112">LocalDirectory</span><span class="sxs-lookup"><span data-stu-id="eeb8b-112">LocalDirectory</span></span>|<span data-ttu-id="eeb8b-113">Указывает локальный каталог с файлами данных для отправки.</span><span class="sxs-lookup"><span data-stu-id="eeb8b-113">Specifies the local directory that contains the data files to be uploaded.</span></span>
<span data-ttu-id="eeb8b-114">Рекурсивно</span><span class="sxs-lookup"><span data-stu-id="eeb8b-114">Recursively</span></span>|<span data-ttu-id="eeb8b-115">Указывает, выполнять ли рекурсивный поиск в подкаталогах.</span><span class="sxs-lookup"><span data-stu-id="eeb8b-115">Specifies whether to recursively search sub-directories.</span></span>
<span data-ttu-id="eeb8b-116">FileName</span><span class="sxs-lookup"><span data-stu-id="eeb8b-116">FileName</span></span>|<span data-ttu-id="eeb8b-117">Указывает фильтр имен для выбора файлов с определенным именем.</span><span class="sxs-lookup"><span data-stu-id="eeb8b-117">Specifies a name filter to select files with certain name pattern.</span></span> <span data-ttu-id="eeb8b-118">Пример:</span><span class="sxs-lookup"><span data-stu-id="eeb8b-118">E.g.</span></span> <span data-ttu-id="eeb8b-119">при указании MySheet\*.xls\* будут выбраны такие файлы, как MySheet001.xls и MySheetABC.xlsx.</span><span class="sxs-lookup"><span data-stu-id="eeb8b-119">MySheet\*.xsl\* will include files such as MySheet001.xsl and MySheetABC.xslx.</span></span>
<span data-ttu-id="eeb8b-120">RowDelimiter</span><span class="sxs-lookup"><span data-stu-id="eeb8b-120">RowDelimiter</span></span>|<span data-ttu-id="eeb8b-121">Указывает символы, обозначающие конец строки.</span><span class="sxs-lookup"><span data-stu-id="eeb8b-121">Specifies the character(s) that marks the end of each row.</span></span>
<span data-ttu-id="eeb8b-122">ColumnDelimiter</span><span class="sxs-lookup"><span data-stu-id="eeb8b-122">ColumnDelimiter</span></span>|<span data-ttu-id="eeb8b-123">Указывает символы, обозначающие конец столбца.</span><span class="sxs-lookup"><span data-stu-id="eeb8b-123">Specifies one or more characters that mark the end of each column.</span></span> <span data-ttu-id="eeb8b-124">Пример:</span><span class="sxs-lookup"><span data-stu-id="eeb8b-124">E.g.</span></span> <span data-ttu-id="eeb8b-125">&#124; (вертикальная черта), \t (табуляция), ' (одинарная кавычка), " (двойная кавычка) и 0x5c (обратная косая черта).</span><span class="sxs-lookup"><span data-stu-id="eeb8b-125">&#124; (pipe), \t (tab), ' (single quote), " (double quote), and 0x5c (backslash).</span></span>
<span data-ttu-id="eeb8b-126">IsFirstRowHeader</span><span class="sxs-lookup"><span data-stu-id="eeb8b-126">IsFirstRowHeader</span></span>|<span data-ttu-id="eeb8b-127">Указывает, содержит ли первая строка каждого файла данных названия столбцов, а не фактические данные.</span><span class="sxs-lookup"><span data-stu-id="eeb8b-127">Specifies whether the first row in each data file contains column names instead of actual data.</span></span>
<span data-ttu-id="eeb8b-128">AzureStorageConnection</span><span class="sxs-lookup"><span data-stu-id="eeb8b-128">AzureStorageConnection</span></span>|<span data-ttu-id="eeb8b-129">Указывает диспетчер подключений службы хранилища Azure.</span><span class="sxs-lookup"><span data-stu-id="eeb8b-129">Specifies an Azure Storage connection manager.</span></span>
<span data-ttu-id="eeb8b-130">BlobContainer</span><span class="sxs-lookup"><span data-stu-id="eeb8b-130">BlobContainer</span></span>|<span data-ttu-id="eeb8b-131">Задает название контейнера больших двоичных объектов, в который будут переданы локальные данные (и который будет использоваться для их ретрансляции в хранилище данных Azure через PolyBase).</span><span class="sxs-lookup"><span data-stu-id="eeb8b-131">Specifies the name of blob container to which local data will be uploaded and relayed to Azure DW via PolyBase.</span></span> <span data-ttu-id="eeb8b-132">Если контейнер не существует, он будет создан.</span><span class="sxs-lookup"><span data-stu-id="eeb8b-132">A new container will be created if it does not exist.</span></span>
<span data-ttu-id="eeb8b-133">BlobDirectory</span><span class="sxs-lookup"><span data-stu-id="eeb8b-133">BlobDirectory</span></span>|<span data-ttu-id="eeb8b-134">Задает название каталога больших двоичных объектов (виртуальной иерархической структуры), в который будут переданы локальные данные (и который будет использоваться для их ретрансляции в хранилище данных Azure через PolyBase).</span><span class="sxs-lookup"><span data-stu-id="eeb8b-134">Specifies the blob directory (virtual hierarchical structure) to which local data will be uploaded and relayed to Azure DW via PolyBase.</span></span>
<span data-ttu-id="eeb8b-135">RetainFiles</span><span class="sxs-lookup"><span data-stu-id="eeb8b-135">RetainFiles</span></span>|<span data-ttu-id="eeb8b-136">Указывает, следует ли сохранить файлы, переданные в службу хранилища Azure.</span><span class="sxs-lookup"><span data-stu-id="eeb8b-136">Specifies whether to retain the files uploaded to Azure Storage.</span></span>
<span data-ttu-id="eeb8b-137">CompressionType</span><span class="sxs-lookup"><span data-stu-id="eeb8b-137">CompressionType</span></span>|<span data-ttu-id="eeb8b-138">Указывает формат сжатия, используемый при передаче файлов в службу хранилища Azure.</span><span class="sxs-lookup"><span data-stu-id="eeb8b-138">Specifies the compression format to use upon uploading files to Azure Storage.</span></span> <span data-ttu-id="eeb8b-139">Сжатие не влияет на локальный источник.</span><span class="sxs-lookup"><span data-stu-id="eeb8b-139">Local source is not affected.</span></span>
<span data-ttu-id="eeb8b-140">CompressionLevel</span><span class="sxs-lookup"><span data-stu-id="eeb8b-140">CompressionLevel</span></span>|<span data-ttu-id="eeb8b-141">Указывает уровень сжатия, используемый в рамках формата сжатия.</span><span class="sxs-lookup"><span data-stu-id="eeb8b-141">Specifies the compression level to use for the compression format.</span></span>
<span data-ttu-id="eeb8b-142">AzureDwConnection</span><span class="sxs-lookup"><span data-stu-id="eeb8b-142">AzureDwConnection</span></span>|<span data-ttu-id="eeb8b-143">Указывает диспетчер соединений ADO.NET для хранилища данных SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="eeb8b-143">Specifies an ADO.NET connection manager for Azure SQL DW.</span></span>
<span data-ttu-id="eeb8b-144">TableName</span><span class="sxs-lookup"><span data-stu-id="eeb8b-144">TableName</span></span>|<span data-ttu-id="eeb8b-145">Указывает название целевой таблицы.</span><span class="sxs-lookup"><span data-stu-id="eeb8b-145">Specifies name of the destination table.</span></span> <span data-ttu-id="eeb8b-146">Выберите существующую таблицу или создайте новую, выбрав пункт **\<New Table ...>** .</span><span class="sxs-lookup"><span data-stu-id="eeb8b-146">Either choose an existing table name, or create a new one by choosing **\<New Table ...>**.</span></span>
<span data-ttu-id="eeb8b-147">TableDistribution</span><span class="sxs-lookup"><span data-stu-id="eeb8b-147">TableDistribution</span></span>|<span data-ttu-id="eeb8b-148">Указывает метод распределения данных для новой таблицы.</span><span class="sxs-lookup"><span data-stu-id="eeb8b-148">Specifies the distribution method for new table.</span></span> <span data-ttu-id="eeb8b-149">Применяется, если для **TableName**указано название новой таблицы.</span><span class="sxs-lookup"><span data-stu-id="eeb8b-149">Applies if a new table name is specified for **TableName**.</span></span>
<span data-ttu-id="eeb8b-150">HashColumnName</span><span class="sxs-lookup"><span data-stu-id="eeb8b-150">HashColumnName</span></span>|<span data-ttu-id="eeb8b-151">Указывает столбец, используемый для распределения данных посредством хэш-таблицы.</span><span class="sxs-lookup"><span data-stu-id="eeb8b-151">Specifies the column used for hash table distribution.</span></span> <span data-ttu-id="eeb8b-152">Применяется, если для **TableDistribution** указано значение **HASH**.</span><span class="sxs-lookup"><span data-stu-id="eeb8b-152">Applies if **HASH** is specified for **TableDistribution**.</span></span>

<span data-ttu-id="eeb8b-153">Содержимое страницы **Сопоставления** изменяется в зависимости от того, отправляются ли данные в новую таблицу или существующую.</span><span class="sxs-lookup"><span data-stu-id="eeb8b-153">You will see a different **Mappings** page depending on whether you are uploading to a new table or to an existing one.</span></span> <span data-ttu-id="eeb8b-154">В первом случае необходимо будет настроить сопоставляемые исходные столбцы и соответствующие им названия целевых столбцов в создаваемой целевой таблице.</span><span class="sxs-lookup"><span data-stu-id="eeb8b-154">In the former case, configure which source columns are to be mapped and their corresponding names in the to-be-created destination table.</span></span> <span data-ttu-id="eeb8b-155">Во втором случае необходимо сопоставить исходные и целевые столбцы.</span><span class="sxs-lookup"><span data-stu-id="eeb8b-155">In the latter case, configure the mapping relationships between source and destination columns.</span></span>

<span data-ttu-id="eeb8b-156">На странице **Столбцы** необходимо настроить свойства типов данных для каждого исходного столбца.</span><span class="sxs-lookup"><span data-stu-id="eeb8b-156">On the **Columns** page, configure the data type properties for each source column.</span></span>

<span data-ttu-id="eeb8b-157">На странице **T-SQL** отображается код T-SQL, используемый для передачи данных из хранилища BLOB-объектов Azure в хранилище данных SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="eeb8b-157">The **T-SQL** page shows the T-SQL used to load data from Azure Blob Storage to Azure SQL DW.</span></span> <span data-ttu-id="eeb8b-158">Этот код создается автоматически на основе параметров конфигурации, выбранных на других страницах, и будет исполняться в ходе выполнения задачи.</span><span class="sxs-lookup"><span data-stu-id="eeb8b-158">The T-SQL is automatically generated from configurations on the other pages, and will be executed as part of the task execution.</span></span> <span data-ttu-id="eeb8b-159">Вы можете вручную изменить созданный код T-SQL, если нужно, нажав кнопку **Изменить** .</span><span class="sxs-lookup"><span data-stu-id="eeb8b-159">You may choose to manually edit the generated T-SQL to meet your particular needs by clicking the **Edit** button.</span></span> <span data-ttu-id="eeb8b-160">Чтобы позже вернуться к исходному коду (первоначально созданному автоматически), нажмите кнопку **Сброс** .</span><span class="sxs-lookup"><span data-stu-id="eeb8b-160">You can revert to the automatically generated one later on by clicking the **Reset** button.</span></span>
