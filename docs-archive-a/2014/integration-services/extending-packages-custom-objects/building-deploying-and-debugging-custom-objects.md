---
title: Построение, развертывание и отладка пользовательских объектов | Документы Майкрософт
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: integration-services
ms.topic: reference
helpviewer_keywords:
- custom objects [Integration Services]
ms.assetid: b03685bc-5398-4c3f-901a-1219c1098fbe
author: chugugrace
ms.author: chugu
ms.openlocfilehash: 13157fce4e5c7dd8987f4950a6b4250ea0e36094
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87736596"
---
# <a name="building-deploying-and-debugging-custom-objects"></a><span data-ttu-id="ae9b0-102">Построение, развертывание и отладка пользовательских объектов</span><span class="sxs-lookup"><span data-stu-id="ae9b0-102">Building, Deploying, and Debugging Custom Objects</span></span>
  <span data-ttu-id="ae9b0-103">После написания кода пользовательского объекта для служб [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] необходимо построить сборку, развернуть ее, интегрировать ее в конструктор служб [!INCLUDE[ssIS](../../includes/ssis-md.md)], чтобы сделать ее доступной для использования в пакетах, а затем протестировать и выполнить ее отладку.</span><span class="sxs-lookup"><span data-stu-id="ae9b0-103">After you have written the code for a custom object for [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)], you must build the assembly, deploy it, integrate it into [!INCLUDE[ssIS](../../includes/ssis-md.md)] Designer to make it available for use in packages, and test and debug it.</span></span>

##  <a name="steps-in-building-deploying-and-debugging-a-custom-object-for-integration-services"></a><a name="top"></a> <span data-ttu-id="ae9b0-104">Шаги построения, развертывания и отладки пользовательского объекта для служб Integration Services</span><span class="sxs-lookup"><span data-stu-id="ae9b0-104">Steps in Building, Deploying, and Debugging a Custom Object for Integration Services</span></span>
 <span data-ttu-id="ae9b0-105">Пользовательская функциональность для объекта уже написана.</span><span class="sxs-lookup"><span data-stu-id="ae9b0-105">You have already written the custom functionality for your object.</span></span> <span data-ttu-id="ae9b0-106">Теперь необходимо протестировать ее и сделать доступной для пользователей.</span><span class="sxs-lookup"><span data-stu-id="ae9b0-106">Now you have to test it and to make it available to users.</span></span> <span data-ttu-id="ae9b0-107">Эти шаги похожи для всех типов пользовательских объектов, которые могут быть созданы для служб [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="ae9b0-107">The steps are very similar for all the types of custom objects that you can create for [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)].</span></span>

 <span data-ttu-id="ae9b0-108">Здесь приведены шаги построения, развертывания и отладки объекта:</span><span class="sxs-lookup"><span data-stu-id="ae9b0-108">Here are the steps that you follow in building, deploying, and debugging it:</span></span>

1.  <span data-ttu-id="ae9b0-109">[Подпишите](#signing) сборку для формирования со строгим именем.</span><span class="sxs-lookup"><span data-stu-id="ae9b0-109">[Sign](#signing) the assembly to be generated with a strong name.</span></span>

2.  <span data-ttu-id="ae9b0-110">[Постройте](#building) сборку.</span><span class="sxs-lookup"><span data-stu-id="ae9b0-110">[Build](#building) the assembly.</span></span>

3.  <span data-ttu-id="ae9b0-111">[Разверните ](#deploying) сборку, переместив или скопировав ее в соответствующую папку служб [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="ae9b0-111">[Deploy](#deploying) the assembly by moving or copying it to the appropriate [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] folder.</span></span>

4.  <span data-ttu-id="ae9b0-112">[Установите](#installing) сборку в глобальный кэш сборок (GAC).</span><span class="sxs-lookup"><span data-stu-id="ae9b0-112">[Install](#installing) the assembly in the global assembly cache (GAC).</span></span>

     <span data-ttu-id="ae9b0-113">Объект автоматически добавляется в область элементов.</span><span class="sxs-lookup"><span data-stu-id="ae9b0-113">The object is automatically added to the Toolbox.</span></span>

5.  <span data-ttu-id="ae9b0-114">[Устраните неполадки](#troubleshooting) в работе развернутой сборки, если необходимо.</span><span class="sxs-lookup"><span data-stu-id="ae9b0-114">[Troubleshoot](#troubleshooting) the deployment, if necessary.</span></span>

6.  <span data-ttu-id="ae9b0-115">[Протестируйте](#testing) и выполните отладку кода.</span><span class="sxs-lookup"><span data-stu-id="ae9b0-115">[Test](#testing) and debug your code.</span></span>

##  <a name="signing-the-assembly"></a><a name="signing"></a> <span data-ttu-id="ae9b0-116">Подписывание сборки</span><span class="sxs-lookup"><span data-stu-id="ae9b0-116">Signing the Assembly</span></span>
 <span data-ttu-id="ae9b0-117">Если сборка предназначена для общего доступа, ее необходимо установить в глобальный кэш сборок.</span><span class="sxs-lookup"><span data-stu-id="ae9b0-117">When an assembly is meant to be shared, it must be installed in the global assembly cache.</span></span> <span data-ttu-id="ae9b0-118">После добавления сборки в глобальный кэш сборок, ее можно использовать в приложениях, например, в среде [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)].</span><span class="sxs-lookup"><span data-stu-id="ae9b0-118">After the assembly has been added to the global assembly cache, the assembly can be used by applications such as [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)].</span></span> <span data-ttu-id="ae9b0-119">Глобальный кэш сборок предъявляет к добавляемой сборке особое требование: она должна быть подписана строгим именем, что гарантирует глобальную уникальность сборки.</span><span class="sxs-lookup"><span data-stu-id="ae9b0-119">A requirement of the global assembly cache is that the assembly must be signed with a strong name, which guarantees that an assembly is globally unique.</span></span> <span data-ttu-id="ae9b0-120">Сборка со строгим именем имеет полное имя, включающее имя, культуру, открытый ключ и номер версии сборки.</span><span class="sxs-lookup"><span data-stu-id="ae9b0-120">A strong-named assembly has a fully qualified name that includes the name, culture, public key, and version number of the assembly.</span></span> <span data-ttu-id="ae9b0-121">Среда выполнения использует эти сведения, чтобы найти сборку и отличить ее от других сборок с тем же именем.</span><span class="sxs-lookup"><span data-stu-id="ae9b0-121">The runtime uses this information to locate the assembly and to differentiate it from other assemblies with the same name.</span></span>

 <span data-ttu-id="ae9b0-122">Чтобы подписать сборку строгим именем, необходимо иметь или создать пару открытого и закрытого ключей.</span><span class="sxs-lookup"><span data-stu-id="ae9b0-122">To sign an assembly with a strong name, you must first have or create a public/private key pair.</span></span> <span data-ttu-id="ae9b0-123">Такая пара открытого и закрытого криптографических ключей используется во время построения для создания сборки со строгим именем.</span><span class="sxs-lookup"><span data-stu-id="ae9b0-123">This public and private cryptographic key pair is used at build time to create a strong-named assembly.</span></span>

 <span data-ttu-id="ae9b0-124">Дополнительные сведения о строгих именах и шагах подписывания сборки см. в следующих разделах документации к пакету SDK платформы [!INCLUDE[dnprdnshort](../../includes/dnprdnshort-md.md)]:</span><span class="sxs-lookup"><span data-stu-id="ae9b0-124">For more information about strong names and on the steps that you must followto sign an assembly, see the following topics in the [!INCLUDE[dnprdnshort](../../includes/dnprdnshort-md.md)] SDK documentation:</span></span>

-   <span data-ttu-id="ae9b0-125">Сборки со строгими именами</span><span class="sxs-lookup"><span data-stu-id="ae9b0-125">Strong-Named Assemblies</span></span>

-   <span data-ttu-id="ae9b0-126">Создание пары ключей</span><span class="sxs-lookup"><span data-stu-id="ae9b0-126">Creating a Key Pair</span></span>

-   <span data-ttu-id="ae9b0-127">Подписывание сборки строгим именем</span><span class="sxs-lookup"><span data-stu-id="ae9b0-127">Signing an Assembly with a Strong Name</span></span>

 <span data-ttu-id="ae9b0-128">Можно легко подписать сборку строгим именем в среде [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)] во время построения.</span><span class="sxs-lookup"><span data-stu-id="ae9b0-128">You can easily sign your assembly with a strong name in [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)] at build time.</span></span> <span data-ttu-id="ae9b0-129">В диалоговом окне **Свойства проекта** перейдите на вкладку **Подписывание** . Выберите параметр для **подписания сборки** , а затем укажите путь к файлу ключа (SNK).</span><span class="sxs-lookup"><span data-stu-id="ae9b0-129">In the **Project Properties** dialog box, select the **Signing** tab. Select the option to **Sign the assembly** and then provide the path of the key (.snk) file.</span></span>

##  <a name="building-the-assembly"></a><a name="building"></a> <span data-ttu-id="ae9b0-130">Построение сборки</span><span class="sxs-lookup"><span data-stu-id="ae9b0-130">Building the Assembly</span></span>
 <span data-ttu-id="ae9b0-131">После подписывания проекта необходимо построить или перестроить проект или решение с использованием команд, доступных в меню **Построение** среды [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)].</span><span class="sxs-lookup"><span data-stu-id="ae9b0-131">After signing the project, you must build or rebuild the project or the solution by using the commands available on the **Build** menu of [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)].</span></span> <span data-ttu-id="ae9b0-132">Решение может содержать отдельный проект для пользовательского интерфейса, который также должен быть подписан строгим именем и может строиться одновременно со сборкой.</span><span class="sxs-lookup"><span data-stu-id="ae9b0-132">Your solution may contain a separate project for a custom user interface, which must also be signed with a strong name, and can be built at the same time.</span></span>

 <span data-ttu-id="ae9b0-133">Наиболее удобным способом выполнения следующих двух шагов — развертывания сборки и установки ее в глобальный кэш сборок — является создание скрипта для этих шагов, запускаемого после построения в [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)].</span><span class="sxs-lookup"><span data-stu-id="ae9b0-133">The most convenient method for performing the next two steps-deploying the assembly and installing it in the global assembly cache-is to script these steps as a post-build event in [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)].</span></span> <span data-ttu-id="ae9b0-134">События построения доступны на странице **Компиляция** свойств проекта для проекта [!INCLUDE[vbprvb](../../includes/vbprvb-md.md)] и на странице **События построения** для проекта C#.</span><span class="sxs-lookup"><span data-stu-id="ae9b0-134">Build events are available from the **Compile** page of Project Properties for a [!INCLUDE[vbprvb](../../includes/vbprvb-md.md)] project, and from the **Build Events** page for a C# project.</span></span> <span data-ttu-id="ae9b0-135">В программах командной строки, например **gacutil.exe**, необходимо указывать полный путь.</span><span class="sxs-lookup"><span data-stu-id="ae9b0-135">The full path is required for command prompt utilities such as **gacutil.exe**.</span></span> <span data-ttu-id="ae9b0-136">Пути, содержащие пробелы, и макросы, например, $(TargetPath), которые разворачиваются в пути, содержащие пробелы, необходимо заключать в кавычки.</span><span class="sxs-lookup"><span data-stu-id="ae9b0-136">Quotation marks are required both around paths that contain spaces and around macros such as $(TargetPath) that expand to paths that contain spaces.</span></span>

 <span data-ttu-id="ae9b0-137">Ниже приведен образец командной строки события после построения для пользовательского регистратора.</span><span class="sxs-lookup"><span data-stu-id="ae9b0-137">Here is an example of a post-build event command line for a custom log provider:</span></span>

```
"C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\bin\NETFX 4.0 Tools\gacutil.exe" -u $(TargetName)
"C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\bin\NETFX 4.0 Tools\gacutil.exe" -i $(TargetFileName)
copy $(TargetFileName) "C:\Program Files\Microsoft SQL Server\120\DTS\LogProviders "
```

##  <a name="deploying-the-assembly"></a><a name="deploying"></a> <span data-ttu-id="ae9b0-138">Развертывание сборки</span><span class="sxs-lookup"><span data-stu-id="ae9b0-138">Deploying the Assembly</span></span>
 <span data-ttu-id="ae9b0-139">[!INCLUDE[ssIS](../../includes/ssis-md.md)]Конструктор находит пользовательские объекты, доступные для использования в пакетах, перечисляя файлы, находящиеся в ряде папок, создаваемых при [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] установке.</span><span class="sxs-lookup"><span data-stu-id="ae9b0-139">The [!INCLUDE[ssIS](../../includes/ssis-md.md)] Designer locates the custom objects available for use in packages by enumerating the files found in a series of folders that are created when [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] is installed.</span></span> <span data-ttu-id="ae9b0-140">При [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] использовании параметров установки по умолчанию этот набор папок находится в папке **C:\PROGRAM Files\Microsoft SQL Server\120\DTS**.</span><span class="sxs-lookup"><span data-stu-id="ae9b0-140">When the default [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] installation settings are used, this set of folders is located under **C:\Program Files\Microsoft SQL Server\120\DTS**.</span></span> <span data-ttu-id="ae9b0-141">Однако при создании программы установки для пользовательского объекта следует проверить значение раздела реестра **HKEY_LOCAL_MACHINE \СОФТВАРЕ\МИКРОСОФТ\МИКРОСОФТ SQL Server\120\SSIS\Setup\DtsPath** , чтобы проверить расположение этой папки.</span><span class="sxs-lookup"><span data-stu-id="ae9b0-141">However if you create a setup program for your custom object, you should check the value of the **HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Microsoft SQL Server\120\SSIS\Setup\DtsPath** registry key to verify the location of this folder.</span></span>

 <span data-ttu-id="ae9b0-142">Можно поместить сборку в папку двумя способами.</span><span class="sxs-lookup"><span data-stu-id="ae9b0-142">You can put the assembly in the folder in two ways:</span></span>

-   <span data-ttu-id="ae9b0-143">Переместить или скопировать скомпилированную сборку в соответствующую папку после ее построения.</span><span class="sxs-lookup"><span data-stu-id="ae9b0-143">Move or copy the compiled assembly to the appropriate folder after building it.</span></span> <span data-ttu-id="ae9b0-144">(Для удобства можно включить команду копирования в событие после построения.)</span><span class="sxs-lookup"><span data-stu-id="ae9b0-144">(For convenience, you can include the copy command in a Post-build Event.)</span></span>

-   <span data-ttu-id="ae9b0-145">Построить сборку непосредственно в нужной папке.</span><span class="sxs-lookup"><span data-stu-id="ae9b0-145">Build the assembly directly in the appropriate folder.</span></span>

 <span data-ttu-id="ae9b0-146">Следующие папки развертывания в папке **C:\Program FILES\MICROSOFT SQL Server\120\DTS** используются для различных типов пользовательских объектов:</span><span class="sxs-lookup"><span data-stu-id="ae9b0-146">The following deployment folders under **C:\Program Files\Microsoft SQL Server\120\DTS** are used for the various types of custom objects:</span></span>

|<span data-ttu-id="ae9b0-147">Пользовательский объект</span><span class="sxs-lookup"><span data-stu-id="ae9b0-147">Custom object</span></span>|<span data-ttu-id="ae9b0-148">Папка развертывания</span><span class="sxs-lookup"><span data-stu-id="ae9b0-148">Deployment folder</span></span>|
|-------------------|-----------------------|
|<span data-ttu-id="ae9b0-149">Задача</span><span class="sxs-lookup"><span data-stu-id="ae9b0-149">Task</span></span>|<span data-ttu-id="ae9b0-150">Задания</span><span class="sxs-lookup"><span data-stu-id="ae9b0-150">Tasks</span></span>|
|<span data-ttu-id="ae9b0-151">Диспетчер соединений</span><span class="sxs-lookup"><span data-stu-id="ae9b0-151">Connection manager</span></span>|<span data-ttu-id="ae9b0-152">Соединения</span><span class="sxs-lookup"><span data-stu-id="ae9b0-152">Connections</span></span>|
|<span data-ttu-id="ae9b0-153">Регистратор</span><span class="sxs-lookup"><span data-stu-id="ae9b0-153">Log provider</span></span>|<span data-ttu-id="ae9b0-154">LogProviders</span><span class="sxs-lookup"><span data-stu-id="ae9b0-154">LogProviders</span></span>|
|<span data-ttu-id="ae9b0-155">Компонент потока данных</span><span class="sxs-lookup"><span data-stu-id="ae9b0-155">Data flow component</span></span>|<span data-ttu-id="ae9b0-156">PipelineComponents</span><span class="sxs-lookup"><span data-stu-id="ae9b0-156">PipelineComponents</span></span>|

> [!NOTE]
>  <span data-ttu-id="ae9b0-157">Сборки копируются в эти папки для поддержки перечисления доступных задач, диспетчеров соединений и т. д.</span><span class="sxs-lookup"><span data-stu-id="ae9b0-157">Assemblies are copied to these folders to support the enumeration of available tasks, connection managers, and so on.</span></span> <span data-ttu-id="ae9b0-158">Поэтому нет необходимости развертывать сборки, содержащие только пользовательский интерфейс для пользовательских объектов, в этих папках.</span><span class="sxs-lookup"><span data-stu-id="ae9b0-158">Therefore you do not have to deploy assemblies that contain only the custom user interface for custom objects to these folders.</span></span>

##  <a name="installing-the-assembly-in-the-global-assembly-cache"></a><a name="installing"></a> <span data-ttu-id="ae9b0-159">Установка сборки в глобальный кэш сборок</span><span class="sxs-lookup"><span data-stu-id="ae9b0-159">Installing the Assembly in the Global Assembly Cache</span></span>
 <span data-ttu-id="ae9b0-160">Чтобы установить сборку задачи в глобальный кэш сборок (GAC), используйте программу командной строки **gacutil.exe** или перетащите сборки в каталог `%system%\assembly`.</span><span class="sxs-lookup"><span data-stu-id="ae9b0-160">To install the task assembly into the global assembly cache (GAC), use the command line tool **gacutil.exe**, or drag the assemblies to the `%system%\assembly` directory.</span></span> <span data-ttu-id="ae9b0-161">Для удобства можно включить вызов программы **gacutil.exe** в событие после построения.</span><span class="sxs-lookup"><span data-stu-id="ae9b0-161">For convenience, you can also include the call to **gacutil.exe** in a Post-build Event.</span></span>

 <span data-ttu-id="ae9b0-162">Следующая команда устанавливает компонент с именем *MyTask.dll* в глобальный кэш сборок (GAC) с помощью программы **gacutil.exe**.</span><span class="sxs-lookup"><span data-stu-id="ae9b0-162">The following command installs a component named *MyTask.dll* into the GAC by using **gacutil.exe**.</span></span>

 `gacutil /iF MyTask.dll`

 <span data-ttu-id="ae9b0-163">После установки новой версии пользовательского объекта необходимо закрыть и заново открыть конструктор служб [!INCLUDE[ssIS](../../includes/ssis-md.md)].</span><span class="sxs-lookup"><span data-stu-id="ae9b0-163">You must close and reopen [!INCLUDE[ssIS](../../includes/ssis-md.md)] Designer after you install a new version of your custom object.</span></span> <span data-ttu-id="ae9b0-164">Если устаревшие версии пользовательского объекта были ранее установлены в глобальный кэш сборок, необходимо удалить их перед установкой новой версии.</span><span class="sxs-lookup"><span data-stu-id="ae9b0-164">If you have installed earlier versions of your custom object in the global assembly cache, you must remove them before installing the new version.</span></span> <span data-ttu-id="ae9b0-165">Чтобы удалить сборку, запустите программу **gacutil.exe** и укажите имя сборки с параметром `/u`.</span><span class="sxs-lookup"><span data-stu-id="ae9b0-165">To uninstall an assembly, run **gacutil.exe** and specify the assembly name with the `/u` option.</span></span>

 <span data-ttu-id="ae9b0-166">Дополнительные сведения о глобальном кэше сборок см. в разделе «Программа глобального кэша сборок (Gactutil.exe)» в документации по средствам платформы [!INCLUDE[dnprdnshort](../../includes/dnprdnshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="ae9b0-166">For more information about the global assembly cache, see Global Assembly Cache Tool (Gactutil.exe) in the [!INCLUDE[dnprdnshort](../../includes/dnprdnshort-md.md)] Tools.</span></span>

##  <a name="troubleshooting-the-deployment"></a><a name="troubleshooting"></a> <span data-ttu-id="ae9b0-167">Устранение неполадок в развертывании</span><span class="sxs-lookup"><span data-stu-id="ae9b0-167">Troubleshooting the Deployment</span></span>
 <span data-ttu-id="ae9b0-168">Если пользовательский объект отображается на **панели элементов** или в списке доступных объектов, но его не удается добавить в пакет, попробуйте выполнить следующие действия:</span><span class="sxs-lookup"><span data-stu-id="ae9b0-168">If your custom object appears in the **Toolbox** or the list of available objects, but you are not able to add it to a package, try the following:</span></span>

1.  <span data-ttu-id="ae9b0-169">Выполните поиск в глобальном кэше сборок на предмет наличия в нем нескольких версий компонента.</span><span class="sxs-lookup"><span data-stu-id="ae9b0-169">Look in the global assembly cache for multiple versions of your component.</span></span> <span data-ttu-id="ae9b0-170">При наличии нескольких версий компонента в глобальном кэше сборок конструктор не может загрузить компонент.</span><span class="sxs-lookup"><span data-stu-id="ae9b0-170">If there are multiple versions of the component in the global assembly cache, the designer may not be able to load your component.</span></span> <span data-ttu-id="ae9b0-171">Удалите все экземпляры сборки из глобального кэша сборок и добавьте сборку заново.</span><span class="sxs-lookup"><span data-stu-id="ae9b0-171">Delete all instances of the assembly from the global assembly cache, and re-add the assembly.</span></span>

2.  <span data-ttu-id="ae9b0-172">Убедитесь в том, что только один экземпляр сборки существует в папке развертывания.</span><span class="sxs-lookup"><span data-stu-id="ae9b0-172">Make sure that only a single instance of the assembly exists in the deployment folder.</span></span>

3.  <span data-ttu-id="ae9b0-173">Обновите панель элементов.</span><span class="sxs-lookup"><span data-stu-id="ae9b0-173">Refresh the Toolbox.</span></span>

4.  <span data-ttu-id="ae9b0-174">Подключитесь в среде [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)] к файлу **devenv.exe** и установите точку останова, чтобы выполнить в пошаговом режиме код инициализации и убедиться в отсутствии исключений.</span><span class="sxs-lookup"><span data-stu-id="ae9b0-174">Attach [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)] to **devenv.exe** and set a breakpoint to step through your initialization code to ensure that no exceptions occur.</span></span>

##  <a name="testing-and-debugging-your-code"></a><a name="testing"></a> <span data-ttu-id="ae9b0-175">Тестирование и отладка кода</span><span class="sxs-lookup"><span data-stu-id="ae9b0-175">Testing and Debugging Your Code</span></span>
 <span data-ttu-id="ae9b0-176">Самым простым подходом к отладке методов времени выполнения пользовательского объекта является запуск **dtexec.exe** из среды [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)] после построения пользовательского объекта и выполнение пакета, использующего этот компонент.</span><span class="sxs-lookup"><span data-stu-id="ae9b0-176">The simplest approach to debugging the run-time methods of a custom object is to start **dtexec.exe** from [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)] after building your custom object and run a package that uses the component.</span></span>

 <span data-ttu-id="ae9b0-177">Если вы хотите отладить методы времени разработки компонента, например `Validate` метод, откройте пакет, который использует этот компонент во втором экземпляре [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)] , и присоедините его к **devenv.exe** процессу.</span><span class="sxs-lookup"><span data-stu-id="ae9b0-177">If you want to debug the component's design-time methods, such as the `Validate` method, open a package that uses the component in a second instance of [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)], and attach to its **devenv.exe** process.</span></span>

 <span data-ttu-id="ae9b0-178">Если также требуется выполнить отладку методов времени выполнения компонента, когда пакет открыт и выполняется в конструкторе [!INCLUDE[ssIS](../../includes/ssis-md.md)], необходимо принудительно приостановить выполнение пакета с тем, чтобы можно было также присоединиться к процессу **DtsDebugHost.exe**.</span><span class="sxs-lookup"><span data-stu-id="ae9b0-178">If you also want to debug the component's run-time methods when a package is open and running in [!INCLUDE[ssIS](../../includes/ssis-md.md)] designer, you must force a pause in the execution of the package so that you can also attach to the **DtsDebugHost.exe** process.</span></span>

#### <a name="to-debug-an-objects-run-time-methods-by-attaching-to-dtexecexe"></a><span data-ttu-id="ae9b0-179">Отладка методов времени выполнения объекта путем подключения к dtexec.exe</span><span class="sxs-lookup"><span data-stu-id="ae9b0-179">To debug an object's run-time methods by attaching to dtexec.exe</span></span>

1.  <span data-ttu-id="ae9b0-180">Подпишите и постройте проект в конфигурации отладки, выполните развертывание и установку в глобальный кэш сборок, как описано в этом разделе.</span><span class="sxs-lookup"><span data-stu-id="ae9b0-180">Sign and build your project in the Debug configuration, deploy it, and install it in the global assembly cache as described in this topic.</span></span>

2.  <span data-ttu-id="ae9b0-181">На вкладке **Отладка** в **свойствах проекта**выберите **Запуск внешней программы** в качестве **действия при запуске**и укажите **dtexec.exe**, который устанавливается по умолчанию в папке C:\Program Files\Microsoft SQL Server\120\DTS\Binn.</span><span class="sxs-lookup"><span data-stu-id="ae9b0-181">On the **Debug** tab of **Project Properties**, select **Start external program** as the **Start Action**, and locate **dtexec.exe**, which is installed by default in C:\Program Files\Microsoft SQL Server\120\DTS\Binn.</span></span>

3.  <span data-ttu-id="ae9b0-182">В текстовом поле **Параметры командной строки** в разделе **Параметры запуска** введите аргументы командной строки, необходимые для выполнения пакета, который использует пользовательский компонент.</span><span class="sxs-lookup"><span data-stu-id="ae9b0-182">In the **Command line options** text box, under **Start Options**, enter the command line arguments required to run a package that uses your component.</span></span> <span data-ttu-id="ae9b0-183">Часто аргумент командной строки содержит параметр /F[ILE], за которым следуют путь и имя DTSX-файла.</span><span class="sxs-lookup"><span data-stu-id="ae9b0-183">Often the command-line argument will consist of the /F[ILE] switch followed by the path and file name of the .dtsx file.</span></span> <span data-ttu-id="ae9b0-184">Дополнительные сведения см. в статье [dtexec Utility](../packages/dtexec-utility.md).</span><span class="sxs-lookup"><span data-stu-id="ae9b0-184">For more information, see [dtexec Utility](../packages/dtexec-utility.md).</span></span>

4.  <span data-ttu-id="ae9b0-185">В исходном коде, где это необходимо, задайте точки останова в методах времени выполнения компонента.</span><span class="sxs-lookup"><span data-stu-id="ae9b0-185">Set breakpoints in the source code where appropriate in the run-time methods of your component.</span></span>

5.  <span data-ttu-id="ae9b0-186">Выполните проект.</span><span class="sxs-lookup"><span data-stu-id="ae9b0-186">Run your project.</span></span>

#### <a name="to-debug-a-custom-objects-design-time-methods-by-attaching-to-sql-server-data-tools"></a><span data-ttu-id="ae9b0-187">Отладка методов времени разработки пользовательского объекта путем присоединения к SQL Server Data Tools</span><span class="sxs-lookup"><span data-stu-id="ae9b0-187">To debug a custom object's design-time methods by attaching to SQL Server Data Tools</span></span>

1.  <span data-ttu-id="ae9b0-188">Подпишите и постройте проект в конфигурации отладки, выполните развертывание и установку в глобальный кэш сборок, как описано в этом разделе.</span><span class="sxs-lookup"><span data-stu-id="ae9b0-188">Sign and build your project in the Debug configuration, deploy it, and install it in the global assembly cache as described in this topic.</span></span>

2.  <span data-ttu-id="ae9b0-189">В исходном коде, где это необходимо, задайте точки останова в методах времени разработки пользовательского объекта.</span><span class="sxs-lookup"><span data-stu-id="ae9b0-189">Set breakpoints in the source code where appropriate in the design-time methods of your custom object.</span></span>

3.  <span data-ttu-id="ae9b0-190">Откройте второй экземпляр среды [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)] и загрузите проект служб [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)], содержащий пакет, в котором используется пользовательский объект.</span><span class="sxs-lookup"><span data-stu-id="ae9b0-190">Open a second instance of [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)] and load an [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] project that contains a package that uses the custom object.</span></span>

4.  <span data-ttu-id="ae9b0-191">В первом экземпляре среды [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)] подключитесь ко второму экземпляру **devenv.exe**, в котором загружен пакет, выбрав команду **Присоединиться к процессу** в меню **Отладка** первого экземпляра.</span><span class="sxs-lookup"><span data-stu-id="ae9b0-191">From the first instance of [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)], attach to the second instance of **devenv.exe** in which the package is loaded by selecting **Attach to Process** from the **Debug** menu of the first instance.</span></span>

5.  <span data-ttu-id="ae9b0-192">Выполните пакет из второго экземпляра среды [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)].</span><span class="sxs-lookup"><span data-stu-id="ae9b0-192">Run the package from the second instance of [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)].</span></span>

#### <a name="to-debug-a-custom-objects-run-time-methods-by-attaching-to-sql-server-data-tools"></a><span data-ttu-id="ae9b0-193">Отладка методов времени выполнения пользовательского объекта путем присоединения к SQL Server Data Tools</span><span class="sxs-lookup"><span data-stu-id="ae9b0-193">To debug a custom object's run-time methods by attaching to SQL Server Data Tools</span></span>

1.  <span data-ttu-id="ae9b0-194">После выполнения шагов, описанных в предыдущей процедуре, принудительно приостановите выполнение пакета, чтобы его можно было присоединить к **DtsDebugHost.exe**.</span><span class="sxs-lookup"><span data-stu-id="ae9b0-194">After you have completed the steps listed in the previous procedure, force a pause in the execution of your package so that you can attach to **DtsDebugHost.exe**.</span></span> <span data-ttu-id="ae9b0-195">Принудительно приостановить выполнение можно путем добавления точки останова в событие `OnPreExecute` либо добавления задачи «Скрипт» в проект и ввода скрипта, отображающего модальное окно сообщения.</span><span class="sxs-lookup"><span data-stu-id="ae9b0-195">You can force this pause by adding a breakpoint to the `OnPreExecute` event, or by adding a Script task to your project and entering script that displays a modal message box.</span></span>

2.  <span data-ttu-id="ae9b0-196">Запустите пакет.</span><span class="sxs-lookup"><span data-stu-id="ae9b0-196">Run the package.</span></span> <span data-ttu-id="ae9b0-197">Во время паузы переключитесь в экземпляр среды [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)], где открыт проект кода, и выберите команду **Присоединить для обработки** в меню **Отладка**.</span><span class="sxs-lookup"><span data-stu-id="ae9b0-197">When the pause occurs, switch to the instance of [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)] in which your code project is open, and select **Attach to Process** from the **Debug** menu.</span></span> <span data-ttu-id="ae9b0-198">Подсоединяться следует к экземпляру **DtsDebugHost.exe**, содержащемуся в списке **Управляемые, x86** в столбце **Тип**, а не к экземпляру из списка **x86**.</span><span class="sxs-lookup"><span data-stu-id="ae9b0-198">Make sure to attach to the instance of **DtsDebugHost.exe** listed as **Managed, x86** in the **Type** column, not to the instance listed as **x86** only.</span></span>

3.  <span data-ttu-id="ae9b0-199">Вернитесь к приостановленному пакету и продолжите выполнение после точки останова либо нажмите кнопку **ОК**, чтобы закрыть окно сообщения, выданного задачей "Скрипт", и продолжить выполнение и отладку пакета.</span><span class="sxs-lookup"><span data-stu-id="ae9b0-199">Return to the paused package and continue past the breakpoint, or click **OK** to dismiss the message box raised by the Script task, and continue package execution and debugging.</span></span>

<span data-ttu-id="ae9b0-200">![Значок Integration Services (маленький)](../media/dts-16.gif "Значок служб Integration Services (маленький)")  **следит за обновлениями Integration Services**</span><span class="sxs-lookup"><span data-stu-id="ae9b0-200">![Integration Services icon (small)](../media/dts-16.gif "Integration Services icon (small)")  **Stay Up to Date with Integration Services**</span></span><br /> <span data-ttu-id="ae9b0-201">Чтобы загрузить новейшую документацию, статьи, образцы и видеоматериалы корпорации Майкрософт, а также лучшие решения участников сообщества, посетите страницу служб [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] на сайте MSDN:</span><span class="sxs-lookup"><span data-stu-id="ae9b0-201">For the latest downloads, articles, samples, and videos from Microsoft, as well as selected solutions from the community, visit the [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] page on MSDN:</span></span><br /><br /> [<span data-ttu-id="ae9b0-202">Посетить страницу «Службы Integration Services» на сайте MSDN</span><span class="sxs-lookup"><span data-stu-id="ae9b0-202">Visit the Integration Services page on MSDN</span></span>](https://go.microsoft.com/fwlink/?LinkId=136655)<br /><br /> <span data-ttu-id="ae9b0-203">Чтобы получать автоматические уведомления об этих обновлениях, подпишитесь на RSS-каналы, предлагаемые на этой странице.</span><span class="sxs-lookup"><span data-stu-id="ae9b0-203">For automatic notification of these updates, subscribe to the RSS feeds available on the page.</span></span>

## <a name="see-also"></a><span data-ttu-id="ae9b0-204">См. также:</span><span class="sxs-lookup"><span data-stu-id="ae9b0-204">See Also</span></span>
 <span data-ttu-id="ae9b0-205">[Разработка пользовательских объектов для Integration Services](developing-custom-objects-for-integration-services.md) [Сохранение пользовательских объектов](persisting-custom-objects.md) [средства устранения неполадок для разработки пакетов](../troubleshooting/troubleshooting-tools-for-package-development.md)</span><span class="sxs-lookup"><span data-stu-id="ae9b0-205">[Developing Custom Objects for Integration Services](developing-custom-objects-for-integration-services.md) [Persisting Custom Objects](persisting-custom-objects.md) [Troubleshooting Tools for Package Development](../troubleshooting/troubleshooting-tools-for-package-development.md)</span></span>


