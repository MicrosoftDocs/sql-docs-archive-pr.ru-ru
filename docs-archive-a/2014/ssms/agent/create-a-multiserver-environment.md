---
title: Создание многосерверной среды | Документация Майкрософт
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: ssms
ms.topic: conceptual
helpviewer_keywords:
- SQL Server Agent, multiserver environments
- master servers [SQL Server], about master servers
- target servers [SQL Server], about target servers
- multiserver environments [SQL Server]
ms.assetid: edc2b60d-15da-40a1-8ba3-f1d473366ee6
author: stevestein
ms.author: sstein
ms.openlocfilehash: a6920920aa603c615cdc5f84a34a93204842052d
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87737484"
---
# <a name="create-a-multiserver-environment"></a><span data-ttu-id="aa071-102">Создание многосерверной среды</span><span class="sxs-lookup"><span data-stu-id="aa071-102">Create a Multiserver Environment</span></span>
  <span data-ttu-id="aa071-103">Администрирование нескольких серверов требует настройки главного сервера (MSX) и одного или более целевых серверов (TSX).</span><span class="sxs-lookup"><span data-stu-id="aa071-103">Multiserver administration requires that you set up a master server (MSX) and one or more target servers (TSX).</span></span> <span data-ttu-id="aa071-104">Задания, которые будут обрабатываться на всех целевых серверах, сначала определяются на главном сервере, а затем загружаются на целевые.</span><span class="sxs-lookup"><span data-stu-id="aa071-104">Jobs that will be processed on all the target servers are first defined on the master server and then downloaded to the target servers.</span></span>  
  
 <span data-ttu-id="aa071-105">По умолчанию полное шифрование SSL и проверка сертификата включены для соединений между главными и целевыми серверами.</span><span class="sxs-lookup"><span data-stu-id="aa071-105">By default, full Secure Sockets Layer (SSL) encryption and certificate validation are enabled for connections between master servers and target servers.</span></span> <span data-ttu-id="aa071-106">Дополнительные сведения см. в статье [Установка параметров шифрования на целевых серверах](set-encryption-options-on-target-servers.md).</span><span class="sxs-lookup"><span data-stu-id="aa071-106">For more information, see [Set Encryption Options on Target Servers](set-encryption-options-on-target-servers.md).</span></span>  
  
 <span data-ttu-id="aa071-107">Если используется большое количество целевых серверов, по возможности не размещайте главный сервер на рабочем сервере, на котором [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] значительно загружен другими задачами, так как трафик от целевых серверов может снизить производительность рабочего сервера.</span><span class="sxs-lookup"><span data-stu-id="aa071-107">If you have a large number of target servers, avoid defining your master server on a production server that has significant performance requirements from other [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] functionality, because target server traffic can slow performance on your production server.</span></span> <span data-ttu-id="aa071-108">При переадресации событий на выделенный главный сервер можно централизовать администрирование на одном сервере.</span><span class="sxs-lookup"><span data-stu-id="aa071-108">If you also forward events to a dedicated master server, you can centralize administration on one server.</span></span> <span data-ttu-id="aa071-109">Дополнительные сведения см. в статье [Управление событиями](manage-events.md).</span><span class="sxs-lookup"><span data-stu-id="aa071-109">For more information, see [Manage Events](manage-events.md).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="aa071-110">Чтобы использовать обработку заданий в многосерверном окружении, учетная запись агента [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] должна быть членом роли базы данных **msdb** **TargetServersRole** на главном сервере.</span><span class="sxs-lookup"><span data-stu-id="aa071-110">To use multiserver job processing, the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent service account must be a member of the **msdb** database role **TargetServersRole** on the master server.</span></span> <span data-ttu-id="aa071-111">Мастер настройки главного сервера автоматически добавляет к этой роли учетную запись службы в ходе процесса прикрепления</span><span class="sxs-lookup"><span data-stu-id="aa071-111">The Master Server Wizard automatically adds the service account to this role as part of the enlistment process</span></span>  
  
## <a name="considerations-for-multiserver-environments"></a><span data-ttu-id="aa071-112">Замечания по многосерверным средам</span><span class="sxs-lookup"><span data-stu-id="aa071-112">Considerations for Multiserver Environments</span></span>  
 <span data-ttu-id="aa071-113">В приведенной ниже таблице описаны поддерживаемые конфигурации главных/целевых (MSX/TSX) серверов.</span><span class="sxs-lookup"><span data-stu-id="aa071-113">See the table below for supported MSX/TSX configurations.</span></span>  
  
||<span data-ttu-id="aa071-114">**TSX = 7.0**</span><span class="sxs-lookup"><span data-stu-id="aa071-114">**TSX = 7.0**</span></span>|<span data-ttu-id="aa071-115">**ЦЕЛЕВОЙ СЕРВЕР = 8,0 < SP3**</span><span class="sxs-lookup"><span data-stu-id="aa071-115">**TSX = 8.0 < SP3**</span></span>|<span data-ttu-id="aa071-116">**TSX = 8.0 пакет обновления 3 (SP3) или выше**</span><span class="sxs-lookup"><span data-stu-id="aa071-116">**TSX = 8.0 SP3 or higher**</span></span>|<span data-ttu-id="aa071-117">**TSX = 9.0**</span><span class="sxs-lookup"><span data-stu-id="aa071-117">**TSX = 9.0**</span></span>|<span data-ttu-id="aa071-118">**TSX= 10.0**</span><span class="sxs-lookup"><span data-stu-id="aa071-118">**TSX= 10.0**</span></span>|<span data-ttu-id="aa071-119">**TSX = 10.5**</span><span class="sxs-lookup"><span data-stu-id="aa071-119">**TSX = 10.5**</span></span>|<span data-ttu-id="aa071-120">**TSX = 11.0**</span><span class="sxs-lookup"><span data-stu-id="aa071-120">**TSX = 11.0**</span></span>|  
|-|--------------------|---------------------------|----------------------------------|--------------------|--------------------|---------------------|---------------------|  
|<span data-ttu-id="aa071-121">**MSX = 7.0**</span><span class="sxs-lookup"><span data-stu-id="aa071-121">**MSX = 7.0**</span></span>|<span data-ttu-id="aa071-122">Да</span><span class="sxs-lookup"><span data-stu-id="aa071-122">Yes</span></span>|<span data-ttu-id="aa071-123">Да</span><span class="sxs-lookup"><span data-stu-id="aa071-123">Yes</span></span>|<span data-ttu-id="aa071-124">Нет</span><span class="sxs-lookup"><span data-stu-id="aa071-124">No</span></span>|<span data-ttu-id="aa071-125">Нет</span><span class="sxs-lookup"><span data-stu-id="aa071-125">No</span></span>|<span data-ttu-id="aa071-126">Нет</span><span class="sxs-lookup"><span data-stu-id="aa071-126">No</span></span>|<span data-ttu-id="aa071-127">Нет</span><span class="sxs-lookup"><span data-stu-id="aa071-127">No</span></span>|<span data-ttu-id="aa071-128">Нет</span><span class="sxs-lookup"><span data-stu-id="aa071-128">No</span></span>|  
|<span data-ttu-id="aa071-129">**MSX = 8,0 < SP3**</span><span class="sxs-lookup"><span data-stu-id="aa071-129">**MSX = 8.0 < SP3**</span></span>|<span data-ttu-id="aa071-130">Да</span><span class="sxs-lookup"><span data-stu-id="aa071-130">Yes</span></span>|<span data-ttu-id="aa071-131">Да</span><span class="sxs-lookup"><span data-stu-id="aa071-131">Yes</span></span>|<span data-ttu-id="aa071-132">Нет</span><span class="sxs-lookup"><span data-stu-id="aa071-132">No</span></span>|<span data-ttu-id="aa071-133">Нет</span><span class="sxs-lookup"><span data-stu-id="aa071-133">No</span></span>|<span data-ttu-id="aa071-134">Нет</span><span class="sxs-lookup"><span data-stu-id="aa071-134">No</span></span>|<span data-ttu-id="aa071-135">Нет</span><span class="sxs-lookup"><span data-stu-id="aa071-135">No</span></span>|<span data-ttu-id="aa071-136">Нет</span><span class="sxs-lookup"><span data-stu-id="aa071-136">No</span></span>|  
|<span data-ttu-id="aa071-137">**MSX = 8.0 SP3 или выше**</span><span class="sxs-lookup"><span data-stu-id="aa071-137">**MSX = 8.0 SP3 or higher**</span></span>|<span data-ttu-id="aa071-138">Нет</span><span class="sxs-lookup"><span data-stu-id="aa071-138">No</span></span>|<span data-ttu-id="aa071-139">Нет</span><span class="sxs-lookup"><span data-stu-id="aa071-139">No</span></span>|<span data-ttu-id="aa071-140">Да</span><span class="sxs-lookup"><span data-stu-id="aa071-140">Yes</span></span>|<span data-ttu-id="aa071-141">Да</span><span class="sxs-lookup"><span data-stu-id="aa071-141">Yes</span></span>|<span data-ttu-id="aa071-142">Да</span><span class="sxs-lookup"><span data-stu-id="aa071-142">Yes</span></span>|<span data-ttu-id="aa071-143">Да</span><span class="sxs-lookup"><span data-stu-id="aa071-143">Yes</span></span>|<span data-ttu-id="aa071-144">Да</span><span class="sxs-lookup"><span data-stu-id="aa071-144">Yes</span></span>|  
|<span data-ttu-id="aa071-145">**MSX = 9.0**</span><span class="sxs-lookup"><span data-stu-id="aa071-145">**MSX = 9.0**</span></span>|<span data-ttu-id="aa071-146">Нет</span><span class="sxs-lookup"><span data-stu-id="aa071-146">No</span></span>|<span data-ttu-id="aa071-147">Нет</span><span class="sxs-lookup"><span data-stu-id="aa071-147">No</span></span>|<span data-ttu-id="aa071-148">Нет</span><span class="sxs-lookup"><span data-stu-id="aa071-148">No</span></span>|<span data-ttu-id="aa071-149">Да</span><span class="sxs-lookup"><span data-stu-id="aa071-149">Yes</span></span>|<span data-ttu-id="aa071-150">Да</span><span class="sxs-lookup"><span data-stu-id="aa071-150">Yes</span></span>|<span data-ttu-id="aa071-151">Да</span><span class="sxs-lookup"><span data-stu-id="aa071-151">Yes</span></span>|<span data-ttu-id="aa071-152">Да</span><span class="sxs-lookup"><span data-stu-id="aa071-152">Yes</span></span>|  
|<span data-ttu-id="aa071-153">**MSX = 10.0**</span><span class="sxs-lookup"><span data-stu-id="aa071-153">**MSX = 10.0**</span></span>|<span data-ttu-id="aa071-154">Нет</span><span class="sxs-lookup"><span data-stu-id="aa071-154">No</span></span>|<span data-ttu-id="aa071-155">Нет</span><span class="sxs-lookup"><span data-stu-id="aa071-155">No</span></span>|<span data-ttu-id="aa071-156">Нет</span><span class="sxs-lookup"><span data-stu-id="aa071-156">No</span></span>|<span data-ttu-id="aa071-157">Нет</span><span class="sxs-lookup"><span data-stu-id="aa071-157">No</span></span>|<span data-ttu-id="aa071-158">Да</span><span class="sxs-lookup"><span data-stu-id="aa071-158">Yes</span></span>|<span data-ttu-id="aa071-159">Да</span><span class="sxs-lookup"><span data-stu-id="aa071-159">Yes</span></span>|<span data-ttu-id="aa071-160">Да</span><span class="sxs-lookup"><span data-stu-id="aa071-160">Yes</span></span>|  
|<span data-ttu-id="aa071-161">**MSX = 10.5**</span><span class="sxs-lookup"><span data-stu-id="aa071-161">**MSX = 10.5**</span></span>|<span data-ttu-id="aa071-162">Нет</span><span class="sxs-lookup"><span data-stu-id="aa071-162">No</span></span>|<span data-ttu-id="aa071-163">Нет</span><span class="sxs-lookup"><span data-stu-id="aa071-163">No</span></span>|<span data-ttu-id="aa071-164">Нет</span><span class="sxs-lookup"><span data-stu-id="aa071-164">No</span></span>|<span data-ttu-id="aa071-165">Нет</span><span class="sxs-lookup"><span data-stu-id="aa071-165">No</span></span>|<span data-ttu-id="aa071-166">Нет</span><span class="sxs-lookup"><span data-stu-id="aa071-166">No</span></span>|<span data-ttu-id="aa071-167">Да</span><span class="sxs-lookup"><span data-stu-id="aa071-167">Yes</span></span>|<span data-ttu-id="aa071-168">Да</span><span class="sxs-lookup"><span data-stu-id="aa071-168">Yes</span></span>|  
|<span data-ttu-id="aa071-169">**MSX = 11.0**</span><span class="sxs-lookup"><span data-stu-id="aa071-169">**MSX = 11.0**</span></span>|<span data-ttu-id="aa071-170">Нет</span><span class="sxs-lookup"><span data-stu-id="aa071-170">No</span></span>|<span data-ttu-id="aa071-171">Нет</span><span class="sxs-lookup"><span data-stu-id="aa071-171">No</span></span>|<span data-ttu-id="aa071-172">Нет</span><span class="sxs-lookup"><span data-stu-id="aa071-172">No</span></span>|<span data-ttu-id="aa071-173">Нет</span><span class="sxs-lookup"><span data-stu-id="aa071-173">No</span></span>|<span data-ttu-id="aa071-174">Нет</span><span class="sxs-lookup"><span data-stu-id="aa071-174">No</span></span>|<span data-ttu-id="aa071-175">Нет</span><span class="sxs-lookup"><span data-stu-id="aa071-175">No</span></span>|<span data-ttu-id="aa071-176">Да</span><span class="sxs-lookup"><span data-stu-id="aa071-176">Yes</span></span>|  
  
 <span data-ttu-id="aa071-177">При создании многосерверной среды возможны следующие проблемы:</span><span class="sxs-lookup"><span data-stu-id="aa071-177">Consider the following issues when creating a multiserver environment:</span></span>  
  
-   <span data-ttu-id="aa071-178">Каждый целевой сервер отправляет отчеты только одному главному серверу.</span><span class="sxs-lookup"><span data-stu-id="aa071-178">Each target server reports to only one master server.</span></span> <span data-ttu-id="aa071-179">Нужно открепить целевой сервер от одного главного сервера перед прикреплением его к другому.</span><span class="sxs-lookup"><span data-stu-id="aa071-179">You must defect a target server from one master server before you can enlist it into a different one.</span></span>  
  
-   <span data-ttu-id="aa071-180">Если меняется имя целевого сервера, нужно сначала открепить целевой сервер от главного, а после изменения имени прикрепить снова.</span><span class="sxs-lookup"><span data-stu-id="aa071-180">When changing the name of a target server, you must defect it before changing the name and re-enlist it after the change.</span></span>  
  
-   <span data-ttu-id="aa071-181">Если нужно удалить многосерверную конфигурацию, необходимо отключить все целевые серверы от главного сервера.</span><span class="sxs-lookup"><span data-stu-id="aa071-181">If you want to dismantle a multiserver configuration, you must defect all the target servers from the master server.</span></span>  
  
-   <span data-ttu-id="aa071-182">Службы SQL Server Integration Services поддерживают только серверы, которые имеют такую же или более высокую версию, что и версия главного сервера.</span><span class="sxs-lookup"><span data-stu-id="aa071-182">SQL Server Integration Services only supports target servers that are the same version or higher than the master server version.</span></span>  
  
## <a name="related-tasks"></a><span data-ttu-id="aa071-183">Связанные задачи</span><span class="sxs-lookup"><span data-stu-id="aa071-183">Related Tasks</span></span>  
 <span data-ttu-id="aa071-184">В следующих разделах описываются типовые задачи при создании многосерверной среды.</span><span class="sxs-lookup"><span data-stu-id="aa071-184">The following topics document common tasks for creating a multiserver environment.</span></span>  
  
|<span data-ttu-id="aa071-185">Описание</span><span class="sxs-lookup"><span data-stu-id="aa071-185">Description</span></span>|<span data-ttu-id="aa071-186">Раздел</span><span class="sxs-lookup"><span data-stu-id="aa071-186">Topic</span></span>|  
|-----------------|-----------|  
|<span data-ttu-id="aa071-187">Описывает, как создать главный сервер.</span><span class="sxs-lookup"><span data-stu-id="aa071-187">Describes how to create a master server.</span></span>|[<span data-ttu-id="aa071-188">Создание главного сервера</span><span class="sxs-lookup"><span data-stu-id="aa071-188">Make a Master Server</span></span>](make-a-master-server.md)|  
|<span data-ttu-id="aa071-189">Описывает, как создать целевой сервер.</span><span class="sxs-lookup"><span data-stu-id="aa071-189">Describes how to create a target server.</span></span>|[<span data-ttu-id="aa071-190">Создание целевого сервера</span><span class="sxs-lookup"><span data-stu-id="aa071-190">Make a Target Server</span></span>](make-a-target-server.md)|  
|<span data-ttu-id="aa071-191">Описывает, как прикрепить целевой сервер к главному.</span><span class="sxs-lookup"><span data-stu-id="aa071-191">Describes how to enlist a target server into a master server.</span></span>|[<span data-ttu-id="aa071-192">Прикрепление целевого сервера к главному</span><span class="sxs-lookup"><span data-stu-id="aa071-192">Enlist a Target Server to a Master Server</span></span>](enlist-a-target-server-to-a-master-server.md)|  
|<span data-ttu-id="aa071-193">Описывает, как исключить целевой сервер из главного.</span><span class="sxs-lookup"><span data-stu-id="aa071-193">Describes how to defect a target server from a master server.</span></span>|[<span data-ttu-id="aa071-194">Отключение целевого сервера от главного сервера</span><span class="sxs-lookup"><span data-stu-id="aa071-194">Defect a Target Server from a Master Server</span></span>](defect-a-target-server-from-a-master-server.md)|  
|<span data-ttu-id="aa071-195">Описывает, как исключить несколько целевых серверов из главного.</span><span class="sxs-lookup"><span data-stu-id="aa071-195">Describes how to defect multiple target servers from a master server.</span></span>|[<span data-ttu-id="aa071-196">Отключение нескольких целевых серверов от главного</span><span class="sxs-lookup"><span data-stu-id="aa071-196">Defect Multiple Target Servers from a Master Server</span></span>](defect-multiple-target-servers-from-a-master-server.md)|  
|<span data-ttu-id="aa071-197">Описывает, как проверить состояние целевого сервера.</span><span class="sxs-lookup"><span data-stu-id="aa071-197">Describes how to check the status of a target server.</span></span>|[<span data-ttu-id="aa071-198">sp_help_targetserver &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="aa071-198">sp_help_targetserver &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-help-targetserver-transact-sql)<br /><br /> [<span data-ttu-id="aa071-199">sp_help_targetservergroup &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="aa071-199">sp_help_targetservergroup &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-help-targetservergroup-transact-sql)|  
  
## <a name="see-also"></a><span data-ttu-id="aa071-200">См. также:</span><span class="sxs-lookup"><span data-stu-id="aa071-200">See Also</span></span>  
 [<span data-ttu-id="aa071-201">Устранение неполадок, связанных с многосерверными заданиями, использующими учетные записи-посредники</span><span class="sxs-lookup"><span data-stu-id="aa071-201">Troubleshoot Multiserver Jobs That Use Proxies</span></span>](troubleshoot-multiserver-jobs-that-use-proxies.md)  
  
  
