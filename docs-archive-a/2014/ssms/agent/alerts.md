---
title: Предупреждения | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: ssms
ms.topic: conceptual
helpviewer_keywords:
- SQL Server Agent alerts, event types
- SQL Server Agent alerts, names
- alerts [SQL Server], performance conditions
- alerts [SQL Server], about alerts
- WMI event responses [SQL Server Agent alerts]
- events [WMI]
- performance condition alerts [SQL Server Agent]
- alerts [SQL Server], event types
- SQL Server Agent alerts, performance conditions
- SQL Server Agent alerts, about alerts
- alerts [SQL Server], names
ms.assetid: 3f57d0f0-4781-46ec-82cd-b751dc5affef
author: stevestein
ms.author: sstein
ms.openlocfilehash: 946bfd0c05e7739af4bfebf799980a0dc27de245
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87737478"
---
# <a name="alerts"></a><span data-ttu-id="74a99-102">видны узлы</span><span class="sxs-lookup"><span data-stu-id="74a99-102">Alerts</span></span>
  <span data-ttu-id="74a99-103">События, формируемые [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , помещаются в журнал приложений [!INCLUDE[msCoName](../../includes/msconame-md.md)] Windows.</span><span class="sxs-lookup"><span data-stu-id="74a99-103">Events are generated by [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] and entered into the [!INCLUDE[msCoName](../../includes/msconame-md.md)] Windows application log.</span></span> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="74a99-104">Агент считывает этот журнал и сравнивает события, которые там содержатся, с определенными пользователем предупреждениями.</span><span class="sxs-lookup"><span data-stu-id="74a99-104">Agent reads the application log and compares events written there to alerts that you have defined.</span></span> <span data-ttu-id="74a99-105">Как только агент [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] обнаруживает такое соответствие, в ответ на это событие автоматически создается предупреждение.</span><span class="sxs-lookup"><span data-stu-id="74a99-105">When [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent finds a match, it fires an alert, which is an automated response to an event.</span></span> <span data-ttu-id="74a99-106">Кроме событий [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , агент [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] может отслеживать условия производительности и события инструментария управления Windows (WMI).</span><span class="sxs-lookup"><span data-stu-id="74a99-106">In addition to monitoring [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] events, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent can also monitor performance conditions and Windows Management Instrumentation (WMI) events.</span></span>  
  
 <span data-ttu-id="74a99-107">Чтобы определить предупреждение, необходимо указать:</span><span class="sxs-lookup"><span data-stu-id="74a99-107">To define an alert, you specify:</span></span>  
  
-   <span data-ttu-id="74a99-108">Имя предупреждения.</span><span class="sxs-lookup"><span data-stu-id="74a99-108">The name of the alert.</span></span>  
  
-   <span data-ttu-id="74a99-109">событие или условие производительности, по которому создается это предупреждение;</span><span class="sxs-lookup"><span data-stu-id="74a99-109">The event or performance condition that triggers the alert.</span></span>  
  
-   <span data-ttu-id="74a99-110">действие, которое агент [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] предпринимает по этому событию или условию производительности.</span><span class="sxs-lookup"><span data-stu-id="74a99-110">The action that [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent takes in response to the event or performance condition.</span></span>  
  
## <a name="naming-an-alert"></a><span data-ttu-id="74a99-111">Имена предупреждений</span><span class="sxs-lookup"><span data-stu-id="74a99-111">Naming an Alert</span></span>  
 <span data-ttu-id="74a99-112">У каждого предупреждения должно быть имя.</span><span class="sxs-lookup"><span data-stu-id="74a99-112">Every alert must have a name.</span></span> <span data-ttu-id="74a99-113">Имена предупреждений должны быть уникальны в пределах экземпляра [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] и не могут иметь длину более **128** символов.</span><span class="sxs-lookup"><span data-stu-id="74a99-113">Alert names must be unique within the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] and can be no longer than **128** characters.</span></span>  
  
## <a name="selecting-an-event-type"></a><span data-ttu-id="74a99-114">Выбор типа события</span><span class="sxs-lookup"><span data-stu-id="74a99-114">Selecting an Event Type</span></span>  
 <span data-ttu-id="74a99-115">Предупреждение создается в ответ на событие определенного типа.</span><span class="sxs-lookup"><span data-stu-id="74a99-115">An alert responds to an event of a specific type.</span></span> <span data-ttu-id="74a99-116">В частности, на следующие типы события:</span><span class="sxs-lookup"><span data-stu-id="74a99-116">Alerts respond to the following event types:</span></span>  
  
-   [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="74a99-117">события;</span><span class="sxs-lookup"><span data-stu-id="74a99-117">events</span></span>  
  
-   [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="74a99-118">условия производительности;</span><span class="sxs-lookup"><span data-stu-id="74a99-118">performance conditions</span></span>  
  
-   <span data-ttu-id="74a99-119">события инструментария WMI</span><span class="sxs-lookup"><span data-stu-id="74a99-119">WMI events</span></span>  
  
 <span data-ttu-id="74a99-120">Тип события определяет параметры, которые указываются для точного определения события.</span><span class="sxs-lookup"><span data-stu-id="74a99-120">The type of the event determines the parameters that you use to specify the precise event.</span></span>  
  
## <a name="specifying-a-sql-server-event"></a><span data-ttu-id="74a99-121">Указание события SQL Server</span><span class="sxs-lookup"><span data-stu-id="74a99-121">Specifying a SQL Server Event</span></span>  
 <span data-ttu-id="74a99-122">Можно определить, чтобы предупреждение создавалось в ответ на одно или несколько событий.</span><span class="sxs-lookup"><span data-stu-id="74a99-122">You can specify an alert to occur in response to one or more events.</span></span> <span data-ttu-id="74a99-123">Для указания событий, по которым создается предупреждение, используются следующие параметры.</span><span class="sxs-lookup"><span data-stu-id="74a99-123">Use the following parameters to specify the events that trigger an alert:</span></span>  
  
-   <span data-ttu-id="74a99-124">**Номер ошибки**</span><span class="sxs-lookup"><span data-stu-id="74a99-124">**Error number**</span></span>  
  
     [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="74a99-125">Агент создает предупреждение при возникновении определенной ошибки.</span><span class="sxs-lookup"><span data-stu-id="74a99-125">Agent fires an alert when a specific error occurs.</span></span> <span data-ttu-id="74a99-126">Например, можно указать код ошибки 2571 для отслеживания попыток неавторизованного обращения к консольным командам базы данных (DBCC).</span><span class="sxs-lookup"><span data-stu-id="74a99-126">For example, you might specify error number 2571 to respond to unauthorized attempts to invoke Database Console Commands (DBCC).</span></span>  
  
-   <span data-ttu-id="74a99-127">**Степень серьезности**</span><span class="sxs-lookup"><span data-stu-id="74a99-127">**Severity level**</span></span>  
  
     [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="74a99-128">Агент создает предупреждение при возникновении любой ошибки определенного уровня серьезности.</span><span class="sxs-lookup"><span data-stu-id="74a99-128">Agent fires an alert when any error of the specific severity occurs.</span></span> <span data-ttu-id="74a99-129">Например, можно указать уровень серьезности 15 для обработки ошибок синтаксиса в инструкциях на языке Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="74a99-129">For example, you might specify a severity level of 15 to respond to syntax errors in Transact-SQL statements.</span></span>  
  
-   <span data-ttu-id="74a99-130">**База данных**</span><span class="sxs-lookup"><span data-stu-id="74a99-130">**Database**</span></span>  
  
     [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="74a99-131">Агент создает предупреждение, когда событие возникает в определенной базе данных.</span><span class="sxs-lookup"><span data-stu-id="74a99-131">Agent fires an alert only when the event occurs in a particular database.</span></span> <span data-ttu-id="74a99-132">Этот параметр применяется в дополнение к коду или уровню серьезности ошибки.</span><span class="sxs-lookup"><span data-stu-id="74a99-132">This option applies in addition to the error number or severity level.</span></span> <span data-ttu-id="74a99-133">Например, если экземпляр содержит производственную базу данных и базу данных для отчетности, можно определить предупреждение, которое будет создаваться только при синтаксических ошибках, возникающих в производственной базе данных.</span><span class="sxs-lookup"><span data-stu-id="74a99-133">For example, if an instance contains one database that is used for production and one database that is used for reporting, you can define an alert that responds to syntax errors in the production database only.</span></span>  
  
-   <span data-ttu-id="74a99-134">**Текст события**</span><span class="sxs-lookup"><span data-stu-id="74a99-134">**Event text**</span></span>  
  
     [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="74a99-135">Агент создает предупреждение, если в сообщении о событии содержится определенная текстовая строка.</span><span class="sxs-lookup"><span data-stu-id="74a99-135">Agent fires an alert when the specified event contains a particular text string in the event message.</span></span> <span data-ttu-id="74a99-136">Например, можно определить предупреждение, которое будет создаваться для сообщений, содержащих имя определенной таблицы или ограничения.</span><span class="sxs-lookup"><span data-stu-id="74a99-136">For example, you might define an alert that responds to messages that contain the name of a particular table or a particular constraint.</span></span>  
  
## <a name="selecting-a-performance-condition"></a><span data-ttu-id="74a99-137">Выбор условия производительности</span><span class="sxs-lookup"><span data-stu-id="74a99-137">Selecting a Performance Condition</span></span>  
 <span data-ttu-id="74a99-138">Можно определить, чтобы предупреждение создавалось в ответ на определенное условие производительности.</span><span class="sxs-lookup"><span data-stu-id="74a99-138">You can specify an alert to occur in response to a particular performance condition.</span></span> <span data-ttu-id="74a99-139">В этом случае указывается отслеживаемый счетчик производительности, порог предупреждения и действие, по которому предупреждение создается.</span><span class="sxs-lookup"><span data-stu-id="74a99-139">In this case, you specify the performance counter to monitor, a threshold for the alert, and the behavior that the counter must show if the alert is to occur.</span></span> <span data-ttu-id="74a99-140">Чтобы назначить условие производительности, необходимо определить в агенте [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] значения следующих элементов на странице **Общие** диалогового окна **Создание предупреждения** или **Свойства предупреждения** :</span><span class="sxs-lookup"><span data-stu-id="74a99-140">To set a performance condition, you must define the following items on the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent **General** page of the **New Alert** or the **Alert Properties** dialog box:</span></span>  
  
-   <span data-ttu-id="74a99-141">**Объект**</span><span class="sxs-lookup"><span data-stu-id="74a99-141">**Object**</span></span>  
  
     <span data-ttu-id="74a99-142">Объект — область отслеживания производительности.</span><span class="sxs-lookup"><span data-stu-id="74a99-142">The object is the area of performance to be monitored.</span></span>  
  
-   <span data-ttu-id="74a99-143">**Счетчик**</span><span class="sxs-lookup"><span data-stu-id="74a99-143">**Counter**</span></span>  
  
     <span data-ttu-id="74a99-144">Счетчик — атрибут отслеживаемой области.</span><span class="sxs-lookup"><span data-stu-id="74a99-144">A counter is an attribute of the area to be monitored.</span></span>  
  
-   <span data-ttu-id="74a99-145">**Экземпляр**</span><span class="sxs-lookup"><span data-stu-id="74a99-145">**Instance**</span></span>  
  
     <span data-ttu-id="74a99-146">Экземпляр [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] определяет конкретный экземпляр (если есть) отслеживаемого атрибута.</span><span class="sxs-lookup"><span data-stu-id="74a99-146">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance defines the specific instance (if any) of the attribute to be monitored.</span></span>  
  
-   <span data-ttu-id="74a99-147">**Создать предупреждение, если счетчик:** и **Значение**</span><span class="sxs-lookup"><span data-stu-id="74a99-147">**Alert if counter** and **Value**</span></span>  
  
     <span data-ttu-id="74a99-148">Пороговое значение и действие, по которому срабатывает предупреждение.</span><span class="sxs-lookup"><span data-stu-id="74a99-148">The threshold for the alert and the behavior that produces the alert.</span></span> <span data-ttu-id="74a99-149">Пороговое значение — число.</span><span class="sxs-lookup"><span data-stu-id="74a99-149">The threshold is a number.</span></span> <span data-ttu-id="74a99-150">Действие — **одно из следующих значений: меньше**, **равно**или **больше по отношению к значению, указанному в поле "Значение"**.</span><span class="sxs-lookup"><span data-stu-id="74a99-150">The behavior is one **of the following: falls below**, **becomes equal to**, or **rises above a number specified for Value**.</span></span> <span data-ttu-id="74a99-151">**Значение** — числовое значение счетчика условия производительности.</span><span class="sxs-lookup"><span data-stu-id="74a99-151">The **Value** is a number that describes the performance condition counter.</span></span> <span data-ttu-id="74a99-152">Например, чтобы определить срабатывание предупреждения для объекта производительности **SQLServer:Locks** , если значение **Время ожидания блокировки** превышает 30 минут, необходимо выбрать **больше** и **указать 30 в поле значения**.</span><span class="sxs-lookup"><span data-stu-id="74a99-152">For example, to set an alert to occur for the performance object **SQLServer:Locks** when the **Lock Wait Time** exceeds 30 minutes, you would choose **rises above** and **specify 30 as the value**.</span></span>  
  
     <span data-ttu-id="74a99-153">Или, например, можно указать, что предупреждение срабатывает для объекта производительности **SQLServer:Transactions** , когда свободное место в базе данных **tempdb** становится меньше 1000 КБ.</span><span class="sxs-lookup"><span data-stu-id="74a99-153">As another example, you might specify that an alert occurs for the performance object **SQLServer:Transactions** when the free space in **tempdb** falls below 1000 KB.</span></span> <span data-ttu-id="74a99-154">Для этого выберите счетчик **Свободное пространство в tempdb (КБ)**, **меньше**и введите **1000** в поле **Значение**.</span><span class="sxs-lookup"><span data-stu-id="74a99-154">To set this, you would choose the counter **Free space in tempdb (KB)**, **falls below**,and a **Value** of **1000**.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="74a99-155">Сведения о производительности снимаются не в реальном времени, что может привести к небольшой задержке (в несколько секунд) между достижением порогового значения и срабатыванием предупреждения условия производительности.</span><span class="sxs-lookup"><span data-stu-id="74a99-155">Performance data is sampled periodically, which can lead to a small delay (a few seconds) between the threshold being reached and the occurrence of the performance alert.</span></span>  
  
## <a name="selecting-a-wmi-event"></a><span data-ttu-id="74a99-156">Выбор события инструментария WMI</span><span class="sxs-lookup"><span data-stu-id="74a99-156">Selecting a WMI Event</span></span>  
 <span data-ttu-id="74a99-157">Можно указать, чтобы предупреждение создавалось в ответ на определенное событие инструментария WMI.</span><span class="sxs-lookup"><span data-stu-id="74a99-157">You can specify that an alert occur in response to a particular WMI event.</span></span> <span data-ttu-id="74a99-158">Чтобы назначить событие инструментария WMI, необходимо определить в агенте [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] следующие элементы на странице **Общие** диалогового окна **Создание предупреждения** или **Свойства предупреждения** :</span><span class="sxs-lookup"><span data-stu-id="74a99-158">To select a WMI event, you must define the following on the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent **General** page of the **New Alert** or the **Alert Properties** dialog box:</span></span>  
  
-   <span data-ttu-id="74a99-159">**Пространство имен**</span><span class="sxs-lookup"><span data-stu-id="74a99-159">**Namespace**</span></span>  
  
     [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="74a99-160">Агент регистрируется в качестве клиента WMI в пространстве имен инструментария WMI, выделенном для запроса событий.</span><span class="sxs-lookup"><span data-stu-id="74a99-160">Agent registers as a WMI client to the WMI namespace that is provided to query for events.</span></span>  
  
-   <span data-ttu-id="74a99-161">**Запрос**</span><span class="sxs-lookup"><span data-stu-id="74a99-161">**Query**</span></span>  
  
     [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="74a99-162">Агент для определения конкретного события пользуется инструкцией на языке запросов инструментария управления Windows (WQL).</span><span class="sxs-lookup"><span data-stu-id="74a99-162">Agent uses the Windows Management Instrumentation Query Language (WQL) statement provided to identify the specific event.</span></span>  
  
 <span data-ttu-id="74a99-163">Ниже приведены ссылки на часто выполняемые задачи.</span><span class="sxs-lookup"><span data-stu-id="74a99-163">Following are links to common tasks:</span></span>  
  
 <span data-ttu-id="74a99-164">**Создание предупреждения по номеру сообщения**</span><span class="sxs-lookup"><span data-stu-id="74a99-164">**To create an alert based on a message number**</span></span>  
  
-   [<span data-ttu-id="74a99-165">Среда SQL Server Management Studio</span><span class="sxs-lookup"><span data-stu-id="74a99-165">SQL Server Management Studio</span></span>](create-an-alert-using-an-error-number.md)  
  
-   [<span data-ttu-id="74a99-166">Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="74a99-166">Transact-SQL</span></span>](/sql/relational-databases/system-stored-procedures/sp-add-alert-transact-sql)  
  
 <span data-ttu-id="74a99-167">**Создание предупреждения по уровню серьезности**</span><span class="sxs-lookup"><span data-stu-id="74a99-167">**To create an alert based on severity levels**</span></span>  
  
-   [<span data-ttu-id="74a99-168">Среда SQL Server Management Studio</span><span class="sxs-lookup"><span data-stu-id="74a99-168">SQL Server Management Studio</span></span>](create-an-alert-using-severity-level.md)  
  
-   [<span data-ttu-id="74a99-169">Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="74a99-169">Transact-SQL</span></span>](/sql/relational-databases/system-stored-procedures/sp-add-alert-transact-sql)  
  
 <span data-ttu-id="74a99-170">**Создание предупреждения по событию инструментария WMI**</span><span class="sxs-lookup"><span data-stu-id="74a99-170">**To create an alert based on a WMI event**</span></span>  
  
-   [<span data-ttu-id="74a99-171">Среда SQL Server Management Studio</span><span class="sxs-lookup"><span data-stu-id="74a99-171">SQL Server Management Studio</span></span>](create-a-wmi-event-alert.md)  
  
-   [<span data-ttu-id="74a99-172">Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="74a99-172">Transact-SQL</span></span>](/sql/relational-databases/system-stored-procedures/sp-add-alert-transact-sql)  
  
 <span data-ttu-id="74a99-173">**Определение ответа на предупреждение**</span><span class="sxs-lookup"><span data-stu-id="74a99-173">**To define the response to an alert**</span></span>  
  
-   [<span data-ttu-id="74a99-174">Среда SQL Server Management Studio</span><span class="sxs-lookup"><span data-stu-id="74a99-174">SQL Server Management Studio</span></span>](../sql-server-management-studio-ssms.md)  
  
-   [<span data-ttu-id="74a99-175">Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="74a99-175">Transact-SQL</span></span>](/sql/relational-databases/system-stored-procedures/sp-add-notification-transact-sql)  
  
 <span data-ttu-id="74a99-176">**Создание сообщения об ошибке пользовательского события**</span><span class="sxs-lookup"><span data-stu-id="74a99-176">**To create a user-defined event error message**</span></span>  
  
-   [<span data-ttu-id="74a99-177">Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="74a99-177">Transact-SQL</span></span>](/sql/relational-databases/system-stored-procedures/sp-addmessage-transact-sql)  
  
 <span data-ttu-id="74a99-178">**Изменение сообщения об ошибке пользовательского события**</span><span class="sxs-lookup"><span data-stu-id="74a99-178">**To modify a user-defined event error message**</span></span>  
  
-   [<span data-ttu-id="74a99-179">Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="74a99-179">Transact-SQL</span></span>](/sql/relational-databases/system-stored-procedures/sp-altermessage-transact-sql)  
  
 <span data-ttu-id="74a99-180">**Удаление сообщения об ошибке пользовательского события**</span><span class="sxs-lookup"><span data-stu-id="74a99-180">**To delete a user-defined event error message**</span></span>  
  
-   [<span data-ttu-id="74a99-181">Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="74a99-181">Transact-SQL</span></span>](/sql/relational-databases/system-stored-procedures/sp-dropmessage-transact-sql)  
  
 <span data-ttu-id="74a99-182">**Отключение или повторное включение предупреждения**</span><span class="sxs-lookup"><span data-stu-id="74a99-182">**To disable or reactivate an alert**</span></span>  
  
-   [<span data-ttu-id="74a99-183">Среда SQL Server Management Studio</span><span class="sxs-lookup"><span data-stu-id="74a99-183">SQL Server Management Studio</span></span>](disable-or-reactivate-an-alert.md)  
  
-   [<span data-ttu-id="74a99-184">Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="74a99-184">Transact-SQL</span></span>](/sql/relational-databases/system-stored-procedures/sp-update-alert-transact-sql)  
  
## <a name="see-also"></a><span data-ttu-id="74a99-185">См. также:</span><span class="sxs-lookup"><span data-stu-id="74a99-185">See Also</span></span>  
 [<span data-ttu-id="74a99-186">Использование объектов SQL Server</span><span class="sxs-lookup"><span data-stu-id="74a99-186">Use SQL Server Objects</span></span>](../../relational-databases/performance-monitor/use-sql-server-objects.md)  
  
  
