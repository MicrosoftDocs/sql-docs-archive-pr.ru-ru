---
title: Пользовательские отчеты в среде Management Studio | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: ssms
ms.topic: conceptual
f1_keywords:
- sql12.swb.summary.new.custom.report.f1
helpviewer_keywords:
- SQL Server Management Studio [SQL Server], custom reports
ms.assetid: 1ba3f758-f39b-4f5f-91ca-516cedc78979
author: stevestein
ms.author: sstein
ms.openlocfilehash: bc93157100738610c8576f0af40e75613c3cff62
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87654027"
---
# <a name="custom-reports-in-management-studio"></a><span data-ttu-id="c3746-102">Пользовательские отчеты в среде Management Studio</span><span class="sxs-lookup"><span data-stu-id="c3746-102">Custom Reports in Management Studio</span></span>
  <span data-ttu-id="c3746-103">Во многих узлах обозревателя объектов в среде [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]отображается набор стандартных отчетов, созданных в [!INCLUDE[msCoName](../../includes/msconame-md.md)].</span><span class="sxs-lookup"><span data-stu-id="c3746-103">In [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], many Object Explorer nodes display a set of standard reports that are created by [!INCLUDE[msCoName](../../includes/msconame-md.md)].</span></span> <span data-ttu-id="c3746-104">В этих отчетах сведены все обычно запрашиваемые данные о серверах.</span><span class="sxs-lookup"><span data-stu-id="c3746-104">These reports summarize typically requested server information.</span></span> <span data-ttu-id="c3746-105">Начиная с версии [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] с пакетом обновления 2 (SP2), администраторы могут запускать настраиваемые отчеты, созданные в среде [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)] , из среды [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)].</span><span class="sxs-lookup"><span data-stu-id="c3746-105">Starting with [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] Service Pack 2, administrators can run custom reports that were created in [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)] from [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)].</span></span>  
  
## <a name="implementation"></a><span data-ttu-id="c3746-106">Реализация</span><span class="sxs-lookup"><span data-stu-id="c3746-106">Implementation</span></span>  
 <span data-ttu-id="c3746-107">Пользовательские отчеты создаются на языке определения отчетов и хранятся в виде файлов определения отчетов (RDL).</span><span class="sxs-lookup"><span data-stu-id="c3746-107">Custom reports are stored as report definition (.rdl) files and are created by using Report Definition Language (RDL).</span></span> <span data-ttu-id="c3746-108">RDL определяет сведения о получении данных и макете отчета в формате XML.</span><span class="sxs-lookup"><span data-stu-id="c3746-108">RDL contains data retrieval and layout information for a report in an XML format.</span></span> <span data-ttu-id="c3746-109">Язык RDL представляет собой открытую схему.</span><span class="sxs-lookup"><span data-stu-id="c3746-109">RDL is an open schema.</span></span> <span data-ttu-id="c3746-110">Это дает разработчикам возможность расширять его, добавляя дополнительные атрибуты и элементы.</span><span class="sxs-lookup"><span data-stu-id="c3746-110">Developers can extend RDL with additional attributes and elements.</span></span> <span data-ttu-id="c3746-111">Внутри отчета могут выполняться любые допустимые инструкции [!INCLUDE[tsql](../../includes/tsql-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="c3746-111">Reports can execute any valid [!INCLUDE[tsql](../../includes/tsql-md.md)] statement within the report.</span></span>  
  
 <span data-ttu-id="c3746-112">Если обозреватель объектов не подключен к серверу, то пользовательские отчеты могут выполняться в контексте текущего узла, выбранного в обозревателе объектов, если отчеты ссылаются на его параметры отчета.</span><span class="sxs-lookup"><span data-stu-id="c3746-112">If Object Explorer is connected to a server, custom reports can execute in the context of the current Object Explorer selection if the reports reference report parameters of that node.</span></span> <span data-ttu-id="c3746-113">Это позволяет отчету использовать текущий контекст (например, текущую базу данных) либо согласованный контекст (например, указать в пользовательском отчете выбранную базу данных в инструкции [!INCLUDE[tsql](../../includes/tsql-md.md)] ).</span><span class="sxs-lookup"><span data-stu-id="c3746-113">This enables a report to use the current context, such as the current database; or a consistent context, such as specifying a designated database as part of the [!INCLUDE[tsql](../../includes/tsql-md.md)] statement that is contained in the custom report.</span></span>  
  
## <a name="running-a-custom-report"></a><span data-ttu-id="c3746-114">Запуск пользовательского отчета</span><span class="sxs-lookup"><span data-stu-id="c3746-114">Running a Custom Report</span></span>  
 <span data-ttu-id="c3746-115">В среде [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)] пользовательский отчет может быть запущен одним из следующих способов.</span><span class="sxs-lookup"><span data-stu-id="c3746-115">You can run a custom report in [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)] in the following ways:</span></span>  
  
-   <span data-ttu-id="c3746-116">Щелкните узел в обозревателе объектов правой кнопкой мыши, наведите указатель на **Отчеты** , а затем выберите пункт **Пользовательские отчеты**.</span><span class="sxs-lookup"><span data-stu-id="c3746-116">Right-click a node in Object Explorer, point to **Reports** and left-click **Custom Reports**.</span></span> <span data-ttu-id="c3746-117">В диалоговом окне **Открытие файла** найдите папку, содержащую RDL-файлы, и откройте нужный файл отчета.</span><span class="sxs-lookup"><span data-stu-id="c3746-117">In the **Open File** dialog box, locate a folder that contains .rdl files, and then open the appropriate report file.</span></span>  
  
-   <span data-ttu-id="c3746-118">Щелкните узел в обозревателе объектов правой кнопкой мыши, наведите указатель на **Отчеты**, а затем выберите пункт **Пользовательские отчеты**. После этого выберите из списка последних использованных файлов нужный пользовательский отчет.</span><span class="sxs-lookup"><span data-stu-id="c3746-118">Right-click a node in Object Explorer, point to **Reports**, point to **Custom Reports**, and then select a custom report from the most recently used file list.</span></span>  
  
## <a name="limitations"></a><span data-ttu-id="c3746-119">Ограничения</span><span class="sxs-lookup"><span data-stu-id="c3746-119">Limitations</span></span>  
 <span data-ttu-id="c3746-120">Во время работы с пользовательскими отчетами необходимо учитывать следующие ограничения.</span><span class="sxs-lookup"><span data-stu-id="c3746-120">When you work with custom reports, consider the following limitations:</span></span>  
  
-   <span data-ttu-id="c3746-121">Чтобы предотвратить выполнение вредоносного кода, в среде [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)] запрещен автоматический запуск отчетов даже в том случае, если в файловой системе RDL-файлы сопоставлены со средой [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)].</span><span class="sxs-lookup"><span data-stu-id="c3746-121">To prevent the unintended execution of malicious code, [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)] cannot be configured to automatically run a report, even if the file system is configured to associate .rdl files with [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)].</span></span> <span data-ttu-id="c3746-122">Отчеты не могут выполняться в среде [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)] программным способом. Кроме этого, невозможно их выполнение из командной строки среды [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)].</span><span class="sxs-lookup"><span data-stu-id="c3746-122">Reports cannot be programmatically executed in [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)] and cannot run from the command line through [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)].</span></span>  
  
-   <span data-ttu-id="c3746-123">Пользовательские отчеты могут быть запущены в контексте, который не содержит ожидаемых значений.</span><span class="sxs-lookup"><span data-stu-id="c3746-123">You can run custom reports in a context that does not produce the expected values.</span></span> <span data-ttu-id="c3746-124">Например, отчет о репликации может быть запущен в контексте базы данных, которая не участвует в репликации, либо от имени пользователя, не имеющего разрешений для доступа к данным, необходимым для его формирования.</span><span class="sxs-lookup"><span data-stu-id="c3746-124">For example, you can run a report about replication in the context of a database that is not involved in replication, or run a report as a user who does not have permission to access information that is required to generate an accurate report.</span></span> <span data-ttu-id="c3746-125">Автор пользовательского отчета отвечает за правильность его структуры и контекста.</span><span class="sxs-lookup"><span data-stu-id="c3746-125">The creator of the custom report is responsible for the validity of the report structure and its context.</span></span>  
  
-   <span data-ttu-id="c3746-126">Пользовательский отчет не может быть добавлен в список стандартных отчетов.</span><span class="sxs-lookup"><span data-stu-id="c3746-126">You cannot add a custom report to the list of standard reports.</span></span>  
  
-   <span data-ttu-id="c3746-127">Код, обрабатываемый в отчете, может оказать влияние на производительность сервера.</span><span class="sxs-lookup"><span data-stu-id="c3746-127">The code processed by the report might affect server performance.</span></span>  
  
-   <span data-ttu-id="c3746-128">Пользовательские отчеты не поддерживают вложенные отчеты.</span><span class="sxs-lookup"><span data-stu-id="c3746-128">Custom reports will not support subreports.</span></span>  
  
-   <span data-ttu-id="c3746-129">Текст команды для запросов внутри отчета не должен быть задан через выражение.</span><span class="sxs-lookup"><span data-stu-id="c3746-129">The command text for each query within the report must not be defined through an expression.</span></span>  
  
-   <span data-ttu-id="c3746-130">Любой параметр, используемый в команде (запросе), может ссылаться только на один параметр отчета и не может использовать операторы выражений.</span><span class="sxs-lookup"><span data-stu-id="c3746-130">Any query parameter that is used in a command (query) can only reference a single report parameter and cannot use any expression operators.</span></span>  
  
-   <span data-ttu-id="c3746-131">Для команд отчетов (запросов) поддерживаются только следующие типы команд: «Только текст» и «Хранимая процедура».</span><span class="sxs-lookup"><span data-stu-id="c3746-131">Only Text and Stored Procedure command types are supported for report commands (queries).</span></span>  
  
-   <span data-ttu-id="c3746-132">Среда обработки отчетов не предусматривает экранирование параметров запросов.</span><span class="sxs-lookup"><span data-stu-id="c3746-132">The report framework does not provide any parameter escaping for the queries.</span></span> <span data-ttu-id="c3746-133">Автор запроса должен проверить, что его запрос устойчив к атакам типа «Внедрение SQL».</span><span class="sxs-lookup"><span data-stu-id="c3746-133">Query authors must make sure that their queries are free from SQL injection attacks.</span></span>  
  
## <a name="managing-custom-reports"></a><span data-ttu-id="c3746-134">Управление пользовательскими отчетами</span><span class="sxs-lookup"><span data-stu-id="c3746-134">Managing Custom Reports</span></span>  
 <span data-ttu-id="c3746-135">Пользователям, имеющим несколько пользовательских отчетов, рекомендуется упорядочить их по папкам файловой системы, задав соответствующие разрешения файловой системы NTFS.</span><span class="sxs-lookup"><span data-stu-id="c3746-135">We recommend that users who have many custom reports organize them by using file system folders that have appropriate NTFS file system permissions.</span></span>  
  
## <a name="permissions"></a><span data-ttu-id="c3746-136">Разрешения</span><span class="sxs-lookup"><span data-stu-id="c3746-136">Permissions</span></span>  
 <span data-ttu-id="c3746-137">Пользовательские отчеты работают с разрешениями текущего пользователя.</span><span class="sxs-lookup"><span data-stu-id="c3746-137">Custom reports run by using the permissions of the current user.</span></span> <span data-ttu-id="c3746-138">Чтобы предотвратить изменение выполняемых отчетом запросов злоумышленниками, рекомендуется предоставлять ограниченные разрешения на папки, содержащие файлы отчетов.</span><span class="sxs-lookup"><span data-stu-id="c3746-138">To prevent a malicious user from changing the queries run by the report, permissions on the file system folder that contains the report files should be set to restrict access.</span></span>  
  
 <span data-ttu-id="c3746-139">И пользователь, и применяемая службой [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] учетная запись должны иметь доступ на чтение системной папки с файлами отчетов.</span><span class="sxs-lookup"><span data-stu-id="c3746-139">Both the user and the account that is used by the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] service require read access to the file system folder that contains the report files.</span></span>  
  
 <span data-ttu-id="c3746-140">В отчет может быть внедрена любая допустимая команда [!INCLUDE[dnprdnshort](../../includes/dnprdnshort-md.md)] , однако она не будет выполнена.</span><span class="sxs-lookup"><span data-stu-id="c3746-140">Any valid [!INCLUDE[dnprdnshort](../../includes/dnprdnshort-md.md)] command can be embedded in a report, but the command will not be executed.</span></span>  
  
> [!CAUTION]  
>  <span data-ttu-id="c3746-141">В отчет можно внедрить любую допустимую инструкцию [!INCLUDE[tsql](../../includes/tsql-md.md)] и она будет выполняться из этого отчета.</span><span class="sxs-lookup"><span data-stu-id="c3746-141">Any valid [!INCLUDE[tsql](../../includes/tsql-md.md)] statement can be embedded in and executed from a report.</span></span> <span data-ttu-id="c3746-142">Запуск отчета через учетную запись пользователя, обладающего расширенными правами доступа, делает возможным беспрепятственный запуск любых внедренных инструкций.</span><span class="sxs-lookup"><span data-stu-id="c3746-142">Running a report under a high-privileged user account makes it possible for any of these embedded instructions to execute without challenge.</span></span>  
  

  
## <a name="see-also"></a><span data-ttu-id="c3746-143">См. также:</span><span class="sxs-lookup"><span data-stu-id="c3746-143">See Also</span></span>  
 <span data-ttu-id="c3746-144">[Добавление пользовательского отчета в Management Studio](add-a-custom-report-to-management-studio.md) </span><span class="sxs-lookup"><span data-stu-id="c3746-144">[Add a Custom Report to Management Studio](add-a-custom-report-to-management-studio.md) </span></span>  
 <span data-ttu-id="c3746-145">[Отменить подавление предупреждений о выполнении пользовательских отчетов](unsuppress-run-custom-report-warnings.md) </span><span class="sxs-lookup"><span data-stu-id="c3746-145">[Unsuppress Run Custom Report Warnings](unsuppress-run-custom-report-warnings.md) </span></span>  
 [<span data-ttu-id="c3746-146">Использование пользовательских отчетов для свойств узлов обозревателя объектов</span><span class="sxs-lookup"><span data-stu-id="c3746-146">Use Custom Reports with Object Explorer Node Properties</span></span>](use-custom-reports-with-object-explorer-node-properties.md)  
  
  
