---
title: Объект диспетчера буферов (SQL Server) | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: performance
ms.topic: conceptual
helpviewer_keywords:
- Buffer Manager object
- SQLServer:Buffer Manager
ms.assetid: 9775ebde-111d-476c-9188-b77805f90e98
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: cc473447934b6274e0d202f6240634fb00d90491
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87658686"
---
# <a name="sql-server-buffer-manager-object"></a><span data-ttu-id="3470f-102">SQL Server, объект Buffer Manager</span><span class="sxs-lookup"><span data-stu-id="3470f-102">SQL Server, Buffer Manager Object</span></span>
  <span data-ttu-id="3470f-103">Объект диспетчера буферов ( **Buffer Manager** ) предоставляет счетчики, позволяющие наблюдать за тем, как [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] использует следующие ресурсы:</span><span class="sxs-lookup"><span data-stu-id="3470f-103">The **Buffer Manager** object provides counters to monitor how [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] uses:</span></span>  
  
-   <span data-ttu-id="3470f-104">Память для хранения страниц данных.</span><span class="sxs-lookup"><span data-stu-id="3470f-104">Memory to store data pages.</span></span>  
  
-   <span data-ttu-id="3470f-105">Счетчики, служащие для мониторинга физического ввода-вывода, когда [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] считывает и записывает страницы баз данных.</span><span class="sxs-lookup"><span data-stu-id="3470f-105">Counters to monitor the physical I/O as [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] reads and writes database pages.</span></span>  
  
-   <span data-ttu-id="3470f-106">Расширение буферного пула для расширения буферного кэша с использованием быстрой энергонезависимой памяти, например твердотельных накопителей (SSD).</span><span class="sxs-lookup"><span data-stu-id="3470f-106">Buffer pool extension to extend the buffer cache by using fast non-volatile storage such as solid-state drives (SSD).</span></span>  
  
 <span data-ttu-id="3470f-107">Мониторинг памяти и счетчиков, используемых [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , помогает получить следующие сведения.</span><span class="sxs-lookup"><span data-stu-id="3470f-107">Monitoring the memory and the counters used by [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] helps you determine:</span></span>  
  
-   <span data-ttu-id="3470f-108">Существуют ли «узкие места», вызванные недостатком физической памяти.</span><span class="sxs-lookup"><span data-stu-id="3470f-108">If bottlenecks exist from inadequate physical memory.</span></span> <span data-ttu-id="3470f-109">Если часто используемые данные не могут быть сохранены в кэше, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] вынужден считывать их с диска.</span><span class="sxs-lookup"><span data-stu-id="3470f-109">If it cannot store frequently accessed data in cache, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] must retrieve the data from disk.</span></span>  
  
-   <span data-ttu-id="3470f-110">Можно ли повысить эффективность выполнения запросов, увеличив объем памяти или выделив дополнительную память для кэширования данных или хранения внутренних структур [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="3470f-110">If query performance can be improved by adding more memory, or by making more memory available to the data cache or [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] internal structures.</span></span>  
  
-   <span data-ttu-id="3470f-111">Насколько часто [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] считывает данные с диска.</span><span class="sxs-lookup"><span data-stu-id="3470f-111">How often [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] needs to read data from disk.</span></span> <span data-ttu-id="3470f-112">В сравнении с другими операциями, такими как доступ к памяти, физический ввод-вывод выполняется дольше.</span><span class="sxs-lookup"><span data-stu-id="3470f-112">Compared with other operations, such as memory access, physical I/O consumes a lot of time.</span></span> <span data-ttu-id="3470f-113">Уменьшение объема ввода-вывода может повысить производительность выполнения запросов.</span><span class="sxs-lookup"><span data-stu-id="3470f-113">Minimizing physical I/O can improve query performance.</span></span>  
  
## <a name="buffer-manager-performance-objects"></a><span data-ttu-id="3470f-114">Объекты производительности диспетчера буферов</span><span class="sxs-lookup"><span data-stu-id="3470f-114">Buffer Manager Performance Objects</span></span>  
 <span data-ttu-id="3470f-115">Объекты производительности **диспетчера буферов** [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] описаны в следующей таблице.</span><span class="sxs-lookup"><span data-stu-id="3470f-115">This table describes the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] **Buffer Manager** performance objects.</span></span>  
  
|<span data-ttu-id="3470f-116">Счетчики диспетчера буферов SQL Server</span><span class="sxs-lookup"><span data-stu-id="3470f-116">SQL Server Buffer Manager counters</span></span>|<span data-ttu-id="3470f-117">Описание</span><span class="sxs-lookup"><span data-stu-id="3470f-117">Description</span></span>|  
|----------------------------------------|-----------------|  
|<span data-ttu-id="3470f-118">**Коэффициент попадания в буферный кэш**</span><span class="sxs-lookup"><span data-stu-id="3470f-118">**Buffer cache hit ratio**</span></span>|<span data-ttu-id="3470f-119">Указывает долю страниц, обнаруженных в буферном кэше без чтения с диска.</span><span class="sxs-lookup"><span data-stu-id="3470f-119">Indicates the percentage of pages found in the buffer cache without having to read from disk.</span></span> <span data-ttu-id="3470f-120">Это значение определяется как общее число попаданий в кэше, деленное на количество уточняющих запросов кэша за последние несколько тысяч операций доступа к страницам.</span><span class="sxs-lookup"><span data-stu-id="3470f-120">The ratio is the total number of cache hits divided by the total number of cache lookups over the last few thousand page accesses.</span></span> <span data-ttu-id="3470f-121">По прошествии длительного периода это соотношение изменяется очень слабо.</span><span class="sxs-lookup"><span data-stu-id="3470f-121">After a long period of time, the ratio moves very little.</span></span> <span data-ttu-id="3470f-122">Так как чтение из кэша выполняется гораздо быстрее, чем с диска, следует стремиться к наибольшему значению этого показателя.</span><span class="sxs-lookup"><span data-stu-id="3470f-122">Because reading from the cache is much less expensive than reading from disk, you want this ratio to be high.</span></span> <span data-ttu-id="3470f-123">Как правило, можно повысить коэффициент попаданий в кэш буфера, увеличив объем памяти, доступной [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , или использовав функцию расширения буферного пула.</span><span class="sxs-lookup"><span data-stu-id="3470f-123">Generally, you can increase the buffer cache hit ratio by increasing the amount of memory available to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] or by using the buffer pool extension feature.</span></span>|  
|<span data-ttu-id="3470f-124">**Страниц контрольных точек/с**</span><span class="sxs-lookup"><span data-stu-id="3470f-124">**Checkpoint pages/sec**</span></span>|<span data-ttu-id="3470f-125">Указывает число страниц, записываемых на диск за одну секунду при создании контрольной точки или выполнении другой операции, требующей, чтобы все «грязные» страницы были записаны на диск.</span><span class="sxs-lookup"><span data-stu-id="3470f-125">Indicates the number of pages flushed to disk per second by a checkpoint or other operation that require all dirty pages to be flushed.</span></span>|  
|<span data-ttu-id="3470f-126">**Страниц базы данных**</span><span class="sxs-lookup"><span data-stu-id="3470f-126">**Database pages**</span></span>|<span data-ttu-id="3470f-127">Указывает число страниц с содержимым базы данных в буферном пуле.</span><span class="sxs-lookup"><span data-stu-id="3470f-127">Indicates the number of pages in the buffer pool with database content.</span></span>|  
|<span data-ttu-id="3470f-128">**Страницы, выделенные расширением**</span><span class="sxs-lookup"><span data-stu-id="3470f-128">**Extension allocated pages**</span></span>|<span data-ttu-id="3470f-129">Общее количество занятых страниц кэша в файле расширения буферного пула.</span><span class="sxs-lookup"><span data-stu-id="3470f-129">Total number of non-free cache pages in the buffer pool extension file.</span></span>|  
|<span data-ttu-id="3470f-130">**Свободные страницы расширения**</span><span class="sxs-lookup"><span data-stu-id="3470f-130">**Extension free pages**</span></span>|<span data-ttu-id="3470f-131">Общее количество незанятых страниц кэша в файле расширения буферного пула.</span><span class="sxs-lookup"><span data-stu-id="3470f-131">Total number of free cache pages in the buffer pool extension file.</span></span>|  
|<span data-ttu-id="3470f-132">**Процент использования расширения**</span><span class="sxs-lookup"><span data-stu-id="3470f-132">**Extension in use as percentage**</span></span>|<span data-ttu-id="3470f-133">Процент файла подкачки расширения буферного пула, занятого страницами диспетчера буферов.</span><span class="sxs-lookup"><span data-stu-id="3470f-133">Percentage of the buffer pool extension paging file occupied by buffer manager pages.</span></span>|  
|<span data-ttu-id="3470f-134">**Счетчик необработанных операций ввода-вывода расширения**</span><span class="sxs-lookup"><span data-stu-id="3470f-134">**Extension outstanding IO counter**</span></span>|<span data-ttu-id="3470f-135">Длина очереди ввода-вывода для файла расширения буферного пула.</span><span class="sxs-lookup"><span data-stu-id="3470f-135">I/O queue length for the buffer pool extension file.</span></span>|  
|<span data-ttu-id="3470f-136">**Вытеснения страниц расширения/с**</span><span class="sxs-lookup"><span data-stu-id="3470f-136">**Extension page evictions/sec**</span></span>|<span data-ttu-id="3470f-137">Количество страниц, вытесняемых из файла расширения буферного пула в секунду.</span><span class="sxs-lookup"><span data-stu-id="3470f-137">Number of pages evicted from the buffer pool extension file per second.</span></span>|  
|<span data-ttu-id="3470f-138">**Чтений страниц расширения/с**</span><span class="sxs-lookup"><span data-stu-id="3470f-138">**Extension page reads/sec**</span></span>|<span data-ttu-id="3470f-139">Количество страниц, считываемых из файла расширения буферного пула в секунду.</span><span class="sxs-lookup"><span data-stu-id="3470f-139">Number of pages read from the buffer pool extension file per second.</span></span>|  
|<span data-ttu-id="3470f-140">**Время страницы в расширении без ссылки**</span><span class="sxs-lookup"><span data-stu-id="3470f-140">**Extension page unreferenced time**</span></span>|<span data-ttu-id="3470f-141">Среднее время (в секундах), в течение которого страница остается в расширении буферного пула без ссылок на нее.</span><span class="sxs-lookup"><span data-stu-id="3470f-141">Average seconds a page will stay in the buffer pool extension without references to it.</span></span>|  
|<span data-ttu-id="3470f-142">**Операции записи страниц расширения/с**</span><span class="sxs-lookup"><span data-stu-id="3470f-142">**Extension pages writes/sec**</span></span>|<span data-ttu-id="3470f-143">Число страниц, записываемых в файл расширения буферного пула в секунду.</span><span class="sxs-lookup"><span data-stu-id="3470f-143">Number of pages written to the buffer pool extension file per second.</span></span>|  
|<span data-ttu-id="3470f-144">**Простоев в ожидании свободной страницы/с**</span><span class="sxs-lookup"><span data-stu-id="3470f-144">**Free list stalls/sec**</span></span>|<span data-ttu-id="3470f-145">Указывает число инициированных за одну секунду запросов, которым пришлось дожидаться свободной страницы.</span><span class="sxs-lookup"><span data-stu-id="3470f-145">Indicates the number of requests per second that had to wait for a free page.</span></span>|  
|<span data-ttu-id="3470f-146">**Отложенных записей/с**</span><span class="sxs-lookup"><span data-stu-id="3470f-146">**Lazy writes/sec**</span></span>|<span data-ttu-id="3470f-147">Указывает число буферов, записываемых за одну секунду модулем отложенной записи, входящим в диспетчер буферов.</span><span class="sxs-lookup"><span data-stu-id="3470f-147">Indicates the number of buffers written per second by the buffer manager's lazy writer.</span></span> <span data-ttu-id="3470f-148">*Модуль отложенной записи* — это системный процесс, который записывает на диск пакеты измененных старых буферов (буферов, содержащих изменения, которые необходимо записать на диск, прежде чем буфер можно будет использовать повторно для другой страницы) и предоставляет доступ к ним для пользовательских процессов.</span><span class="sxs-lookup"><span data-stu-id="3470f-148">The *lazy writer* is a system process that flushes out batches of dirty, aged buffers (buffers that contain changes that must be written back to disk before the buffer can be reused for a different page) and makes them available to user processes.</span></span> <span data-ttu-id="3470f-149">Модуль отложенной записи устраняет необходимость частого создания контрольных точек с целью получения доступных буферов.</span><span class="sxs-lookup"><span data-stu-id="3470f-149">The lazy writer eliminates the need to perform frequent checkpoints in order to create available buffers.</span></span>|  
|<span data-ttu-id="3470f-150">**Ожидаемый срок жизни страницы**</span><span class="sxs-lookup"><span data-stu-id="3470f-150">**Page life expectancy**</span></span>|<span data-ttu-id="3470f-151">Указывает количество секунд, в течение которых страница остается в буферном пуле без ссылок на нее.</span><span class="sxs-lookup"><span data-stu-id="3470f-151">Indicates the number of seconds a page will stay in the buffer pool without references.</span></span>|  
|<span data-ttu-id="3470f-152">**Поисков страницы/с**</span><span class="sxs-lookup"><span data-stu-id="3470f-152">**Page lookups/sec**</span></span>|<span data-ttu-id="3470f-153">Указывает число инициируемых за секунду запросов поиска страницы в буферном пуле.</span><span class="sxs-lookup"><span data-stu-id="3470f-153">Indicates the number of requests per second to find a page in the buffer pool.</span></span>|  
|<span data-ttu-id="3470f-154">**Чтений страниц/с**</span><span class="sxs-lookup"><span data-stu-id="3470f-154">**Page reads/sec**</span></span>|<span data-ttu-id="3470f-155">Указывает число инициируемых за одну секунду физических операций чтения страниц базы данных.</span><span class="sxs-lookup"><span data-stu-id="3470f-155">Indicates the number of physical database page reads that are issued per second.</span></span> <span data-ttu-id="3470f-156">Этот статистический показатель отражает общее количество физических операций чтения страниц из всех баз данных.</span><span class="sxs-lookup"><span data-stu-id="3470f-156">This statistic displays the total number of physical page reads across all databases.</span></span> <span data-ttu-id="3470f-157">Физический ввод-вывод связан с большой тратой ресурсов, но иногда ее можно свести к минимуму, используя более объемный кэш данных, интеллектуальные индексы и более эффективные запросы или изменяя структуру базы данных.</span><span class="sxs-lookup"><span data-stu-id="3470f-157">Because physical I/O is expensive, you may be able to minimize the cost, either by using a larger data cache, intelligent indexes, and more efficient queries, or by changing the database design.</span></span>|  
|<span data-ttu-id="3470f-158">**Записей страниц/с**</span><span class="sxs-lookup"><span data-stu-id="3470f-158">**Page writes/sec**</span></span>|<span data-ttu-id="3470f-159">Указывает число инициируемых за одну секунду физических операций записи страниц базы данных.</span><span class="sxs-lookup"><span data-stu-id="3470f-159">Indicates the number of physical database page writes that are issued per second.</span></span>|  
|<span data-ttu-id="3470f-160">**Предварительно считанных страниц/с**</span><span class="sxs-lookup"><span data-stu-id="3470f-160">**Readahead pages/sec**</span></span>|<span data-ttu-id="3470f-161">Указывает количество считываемых за секунду страниц, которые, скорее всего, понадобятся в ближайшем будущем.</span><span class="sxs-lookup"><span data-stu-id="3470f-161">Indicates the number of pages read per second in anticipation of use.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="3470f-162">См. также:</span><span class="sxs-lookup"><span data-stu-id="3470f-162">See Also</span></span>  
 <span data-ttu-id="3470f-163">[SQL Server:Buffer Node](sql-server-buffer-node.md) </span><span class="sxs-lookup"><span data-stu-id="3470f-163">[SQL Server:Buffer Node](sql-server-buffer-node.md) </span></span>  
 <span data-ttu-id="3470f-164">[Параметры конфигурации сервера «Server Memory»](../../database-engine/configure-windows/server-memory-server-configuration-options.md) </span><span class="sxs-lookup"><span data-stu-id="3470f-164">[Server Memory Server Configuration Options](../../database-engine/configure-windows/server-memory-server-configuration-options.md) </span></span>  
 <span data-ttu-id="3470f-165">[SQL Server, объект Plan Cache](sql-server-plan-cache-object.md) </span><span class="sxs-lookup"><span data-stu-id="3470f-165">[SQL Server, Plan Cache Object](sql-server-plan-cache-object.md) </span></span>  
 <span data-ttu-id="3470f-166">[Наблюдение за использованием ресурсов (системный монитор)](monitor-resource-usage-system-monitor.md) </span><span class="sxs-lookup"><span data-stu-id="3470f-166">[Monitor Resource Usage &#40;System Monitor&#41;](monitor-resource-usage-system-monitor.md) </span></span>  
 <span data-ttu-id="3470f-167">[sys.dm_os_performance_counters (Transact-SQL)](/sql/relational-databases/system-dynamic-management-views/sys-dm-os-performance-counters-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="3470f-167">[sys.dm_os_performance_counters &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-os-performance-counters-transact-sql) </span></span>  
 [<span data-ttu-id="3470f-168">Расширение буферного пула</span><span class="sxs-lookup"><span data-stu-id="3470f-168">Buffer Pool Extension</span></span>](../../database-engine/configure-windows/buffer-pool-extension.md)  
  
  
