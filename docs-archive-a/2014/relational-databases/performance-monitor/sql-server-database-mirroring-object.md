---
title: Объект зеркального отображения базы данных (SQL Server) | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: performance
ms.topic: conceptual
helpviewer_keywords:
- SQLServer:Database Mirroring
- database mirroring [SQL Server], performance counters
- performance counters [SQL Server], database mirroring
- Database Mirroring object
ms.assetid: a27b51ee-7637-4525-9424-bcc16947dc13
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 4d4b1b9af5bced6933745d4214d3abcc15af4a60
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87666516"
---
# <a name="sql-server-database-mirroring-object"></a><span data-ttu-id="206ad-102">SQL Server, объект Database Mirroring</span><span class="sxs-lookup"><span data-stu-id="206ad-102">SQL Server, Database Mirroring Object</span></span>
  <span data-ttu-id="206ad-103">Объект производительности **SQLServer:Database Mirroring** содержит счетчики производительности, сообщающие сведения о зеркальном отображении базы данных [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="206ad-103">The **SQLServer:Database Mirroring** performance object contains performance counters that report information about [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] database mirroring.</span></span> <span data-ttu-id="206ad-104">В следующей таблице перечислены счетчики этого объекта.</span><span class="sxs-lookup"><span data-stu-id="206ad-104">The table below lists the counters that this object contains.</span></span>  
  
|<span data-ttu-id="206ad-105">Имя</span><span class="sxs-lookup"><span data-stu-id="206ad-105">Name</span></span>|<span data-ttu-id="206ad-106">Описание</span><span class="sxs-lookup"><span data-stu-id="206ad-106">Description</span></span>|  
|----------|-----------------|  
|<span data-ttu-id="206ad-107">**Получено байт/с**</span><span class="sxs-lookup"><span data-stu-id="206ad-107">**Bytes Received/sec**</span></span>|<span data-ttu-id="206ad-108">Число байт, получаемых в секунду.</span><span class="sxs-lookup"><span data-stu-id="206ad-108">Number of bytes received per second.</span></span>|  
|<span data-ttu-id="206ad-109">**Отправлено байт/с**</span><span class="sxs-lookup"><span data-stu-id="206ad-109">**Bytes Sent/sec**</span></span>|<span data-ttu-id="206ad-110">Число байт, отправляемых в секунду.</span><span class="sxs-lookup"><span data-stu-id="206ad-110">Number of bytes sent per second.</span></span>|  
|<span data-ttu-id="206ad-111">**Получено байтов журнала/с**</span><span class="sxs-lookup"><span data-stu-id="206ad-111">**Log Bytes Received/sec**</span></span>|<span data-ttu-id="206ad-112">Число байт журнала, получаемых в секунду.</span><span class="sxs-lookup"><span data-stu-id="206ad-112">Number of bytes of log received per second.</span></span>|  
|<span data-ttu-id="206ad-113">**Байтов журнала отправлено повторно из кэша/сек**</span><span class="sxs-lookup"><span data-stu-id="206ad-113">**Log Bytes Redone from Cache/sec**</span></span>|<span data-ttu-id="206ad-114">Число оправленных повторно байт журнала, которые были получены из кэша журнала зеркального отображения базы данных за последнюю секунду.</span><span class="sxs-lookup"><span data-stu-id="206ad-114">Number of redone log bytes that were obtained from the mirroring log cache, in the last second.</span></span><br /><br /> <span data-ttu-id="206ad-115">Этот счетчик используется только на зеркальном сервере.</span><span class="sxs-lookup"><span data-stu-id="206ad-115">This counter is used on only the mirror server.</span></span> <span data-ttu-id="206ad-116">На основном сервере значение всегда равно 0.</span><span class="sxs-lookup"><span data-stu-id="206ad-116">On the principal server the value is always 0.</span></span>|  
|<span data-ttu-id="206ad-117">**Байтов журнала отправлено из кэша/сек**</span><span class="sxs-lookup"><span data-stu-id="206ad-117">**Log Bytes Sent from Cache/sec**</span></span>|<span data-ttu-id="206ad-118">Число посланных байт журнала, которые были получены из кэша журнала зеркального отображения базы данных за последнюю секунду.</span><span class="sxs-lookup"><span data-stu-id="206ad-118">Number of sent log bytes that were obtained from the mirroring log cache, in the last second.</span></span><br /><br /> <span data-ttu-id="206ad-119">Этот счетчик используется только на основном сервере.</span><span class="sxs-lookup"><span data-stu-id="206ad-119">This counter is used on only the principal server.</span></span> <span data-ttu-id="206ad-120">На зеркальном сервере значение всегда равно 0.</span><span class="sxs-lookup"><span data-stu-id="206ad-120">On the mirror server the value is always 0.</span></span>|  
|<span data-ttu-id="206ad-121">**Отправлено байт журнала/с**</span><span class="sxs-lookup"><span data-stu-id="206ad-121">**Log Bytes Sent/sec**</span></span>|<span data-ttu-id="206ad-122">Число байт журнала, отправляемых в секунду.</span><span class="sxs-lookup"><span data-stu-id="206ad-122">Number of bytes of log sent per second.</span></span>|  
|<span data-ttu-id="206ad-123">**Сжатых байт журнала получено/сек**</span><span class="sxs-lookup"><span data-stu-id="206ad-123">**Log Compressed Bytes Rcvd/sec**</span></span>|<span data-ttu-id="206ad-124">Число сжатых байт журнала, полученных за последнюю секунду.</span><span class="sxs-lookup"><span data-stu-id="206ad-124">Number of compressed bytes of log received, in the last second.</span></span>|  
|<span data-ttu-id="206ad-125">**Сжатых байт журнала отправлено/сек**</span><span class="sxs-lookup"><span data-stu-id="206ad-125">**Log Compressed Bytes Sent/sec**</span></span>|<span data-ttu-id="206ad-126">Число сжатых байт журнала, отправленных за последнюю секунду.</span><span class="sxs-lookup"><span data-stu-id="206ad-126">Number of compressed bytes of log sent, in the last second.</span></span>|  
|<span data-ttu-id="206ad-127">**Время фиксации журнала (мс)**</span><span class="sxs-lookup"><span data-stu-id="206ad-127">**Log Harden Time (ms)**</span></span>|<span data-ttu-id="206ad-128">Число миллисекунд, в течение которых блоки журнала ожидали фиксации на диск за последнюю секунду.</span><span class="sxs-lookup"><span data-stu-id="206ad-128">Milliseconds that log blocks waited to be hardened to disk, in the last second.</span></span>|  
|<span data-ttu-id="206ad-129">**Объем журнала, оставшийся для отмены, КБ**</span><span class="sxs-lookup"><span data-stu-id="206ad-129">**Log Remaining for Undo KB**</span></span>|<span data-ttu-id="206ad-130">Общее число килобайт журнала, которые новому зеркальному серверу осталось просмотреть после отработки отказа.</span><span class="sxs-lookup"><span data-stu-id="206ad-130">Total kilobytes of log that remain to be scanned by the new mirror server after failover.</span></span><br /><br /> <span data-ttu-id="206ad-131">Этот счетчик используется только на зеркальном сервере во время стадии отката.</span><span class="sxs-lookup"><span data-stu-id="206ad-131">This counter is used on only the mirror server during the undo phase.</span></span> <span data-ttu-id="206ad-132">После завершения стадии отката счетчик сбрасывается в значение 0.</span><span class="sxs-lookup"><span data-stu-id="206ad-132">After the undo phase completes, the counter is reset to 0.</span></span> <span data-ttu-id="206ad-133">На основном сервере значение всегда равно 0.</span><span class="sxs-lookup"><span data-stu-id="206ad-133">On the principal server the value is always 0.</span></span>|  
|<span data-ttu-id="206ad-134">**Объем журнала, просмотренный для отмены, КБ**</span><span class="sxs-lookup"><span data-stu-id="206ad-134">**Log Scanned for Undo KB**</span></span>|<span data-ttu-id="206ad-135">Общее число килобайт журнала, которые были просмотрены новым зеркальным сервером после отработки отказа.</span><span class="sxs-lookup"><span data-stu-id="206ad-135">Total kilobytes of log that have been scanned by the new mirror server since failover.</span></span><br /><br /> <span data-ttu-id="206ad-136">Этот счетчик используется только на зеркальном сервере во время стадии отката.</span><span class="sxs-lookup"><span data-stu-id="206ad-136">This counter is used on only the mirror server during the undo phase.</span></span> <span data-ttu-id="206ad-137">После завершения стадии отката счетчик сбрасывается в значение 0.</span><span class="sxs-lookup"><span data-stu-id="206ad-137">After the undo phase completes, the counter is reset to 0.</span></span> <span data-ttu-id="206ad-138">На основном сервере значение всегда равно 0.</span><span class="sxs-lookup"><span data-stu-id="206ad-138">On the principal server the value is always 0.</span></span>|  
|<span data-ttu-id="206ad-139">**Время отправки журнала потока управления (мс)**</span><span class="sxs-lookup"><span data-stu-id="206ad-139">**Log Send Flow Control Time (ms)**</span></span>|<span data-ttu-id="206ad-140">Число миллисекунд, в течение которых поток журнала ожидал отправки потока управления за последнюю секунду.</span><span class="sxs-lookup"><span data-stu-id="206ad-140">Milliseconds that log stream messages waited for send flow control, in the last second.</span></span><br /><br /> <span data-ttu-id="206ad-141">Отправка данных журналов и метаданных участнику зеркального отображения базы данных является наиболее ресурсоемкой операцией процесса зеркального отображения. Она может монополизировать буферы отправки зеркального отображения базы данных и компонента Service Broker.</span><span class="sxs-lookup"><span data-stu-id="206ad-141">Sending log data and metadata to the mirroring partner is the most data-intensive operation in database mirroring and might monopolize the database mirroring and Service Broker send buffers.</span></span> <span data-ttu-id="206ad-142">Используйте этот счетчик для слежения за использованием этого буфера сеансом зеркального отображения базы данных.</span><span class="sxs-lookup"><span data-stu-id="206ad-142">Use this counter to monitor the use of this buffer by the database mirroring session.</span></span>|  
|<span data-ttu-id="206ad-143">**Очередь отправки журнала, КБ**</span><span class="sxs-lookup"><span data-stu-id="206ad-143">**Log Send Queue KB**</span></span>|<span data-ttu-id="206ad-144">Общее число килобайт журнала, которые еще не отправлены на зеркальный сервер.</span><span class="sxs-lookup"><span data-stu-id="206ad-144">Total number of kilobytes of log that have not yet been sent to the mirror server.</span></span>|  
|<span data-ttu-id="206ad-145">**Транзакций записи зеркального отображения/с**</span><span class="sxs-lookup"><span data-stu-id="206ad-145">**Mirrored Write Transactions/sec**</span></span>|<span data-ttu-id="206ad-146">Число транзакций, производивших запись в зеркальную базу данных за последнюю секунду и ожидавших передачи журнала в зеркальную базу данных, чтобы выполнить фиксацию.</span><span class="sxs-lookup"><span data-stu-id="206ad-146">Number of transactions that wrote to the mirrored database and waited for the log to be sent to the mirror in order to commit, in the last second.</span></span><br /><br /> <span data-ttu-id="206ad-147">Значение этого счетчика начинает увеличиваться только в том случае, если основной сервер активно передает записи журналов зеркальному серверу.</span><span class="sxs-lookup"><span data-stu-id="206ad-147">This counter is incremented only when the principal server is actively sending log records to the mirror server.</span></span>|  
|<span data-ttu-id="206ad-148">**Отправлено страниц/с**</span><span class="sxs-lookup"><span data-stu-id="206ad-148">**Pages Sent/sec**</span></span>|<span data-ttu-id="206ad-149">Число страниц, отправляемых в секунду.</span><span class="sxs-lookup"><span data-stu-id="206ad-149">Number of pages sent per second.</span></span>|  
|<span data-ttu-id="206ad-150">**Получено/с**</span><span class="sxs-lookup"><span data-stu-id="206ad-150">**Receives/sec**</span></span>|<span data-ttu-id="206ad-151">Число сообщений зеркального отображения, получаемых в секунду.</span><span class="sxs-lookup"><span data-stu-id="206ad-151">Number of mirroring messages received per second.</span></span>|  
|<span data-ttu-id="206ad-152">**Повторено байт/с**</span><span class="sxs-lookup"><span data-stu-id="206ad-152">**Redo Bytes/sec**</span></span>|<span data-ttu-id="206ad-153">Число байт журнала, накат которых выполняется в зеркальной базе данных в секунду.</span><span class="sxs-lookup"><span data-stu-id="206ad-153">Number of bytes of log rolled forward on the mirror database per second.</span></span>|  
|<span data-ttu-id="206ad-154">**Очередь на повтор, КБ**</span><span class="sxs-lookup"><span data-stu-id="206ad-154">**Redo Queue KB**</span></span>|<span data-ttu-id="206ad-155">Общее число килобайт зафиксированного журнала, которые в данный момент времени подлежат применению к зеркальной базе данных для выполнения наката.</span><span class="sxs-lookup"><span data-stu-id="206ad-155">Total number of kilobytes of hardened log that currently remain to be applied to the mirror database to roll it forward.</span></span> <span data-ttu-id="206ad-156">Это число отправляется на основной сервер зеркальным сервером.</span><span class="sxs-lookup"><span data-stu-id="206ad-156">This is sent to the Principal from the Mirror.</span></span>|  
|<span data-ttu-id="206ad-157">**Время подтверждения отправки или получения**</span><span class="sxs-lookup"><span data-stu-id="206ad-157">**Send/Receive Ack Time**</span></span>|<span data-ttu-id="206ad-158">Миллисекунды, потраченные сообщениями на ожидание подтверждения от участника за последнюю секунду.</span><span class="sxs-lookup"><span data-stu-id="206ad-158">Milliseconds that messages waited for acknowledgement from the partner, in the last second.</span></span><br /><br /> <span data-ttu-id="206ad-159">Этот счетчик может быть полезен при устранении неполадок, которые могут быть вызваны узким местом в сети (например: необъяснимые отработки отказа, большая очередь отправки или большая задержка транзакций).</span><span class="sxs-lookup"><span data-stu-id="206ad-159">This counter is helpful in troubleshooting a problem that might be caused by a network bottleneck, such as unexplained failovers, a large send queue, or high transaction latency.</span></span> <span data-ttu-id="206ad-160">В таком случае анализ значения этого счетчика поможет определить, является ли сеть причиной неполадок.</span><span class="sxs-lookup"><span data-stu-id="206ad-160">In such cases, you can analyze the value of this counter to determine whether the network is causing the problem.</span></span>|  
|<span data-ttu-id="206ad-161">**Отправок/с**</span><span class="sxs-lookup"><span data-stu-id="206ad-161">**Sends/sec**</span></span>|<span data-ttu-id="206ad-162">Число сообщений зеркального отображения, отправляемых в секунду.</span><span class="sxs-lookup"><span data-stu-id="206ad-162">Number of mirroring messages sent per second.</span></span>|  
|<span data-ttu-id="206ad-163">**Задержка транзакции**</span><span class="sxs-lookup"><span data-stu-id="206ad-163">**Transaction Delay**</span></span>|<span data-ttu-id="206ad-164">Задержки в ожидании подтверждения незавершенной фиксации.</span><span class="sxs-lookup"><span data-stu-id="206ad-164">Delay in waiting for unterminated commit acknowledgement.</span></span>|  
  
> [!NOTE]  
>  <span data-ttu-id="206ad-165">Для каждого участника некоторые из счетчиков показывают нулевое значение, в зависимости от того, в какой роли в настоящий момент выступает участник.</span><span class="sxs-lookup"><span data-stu-id="206ad-165">On each partner, some of the counters show a zero value depending on what role the partner is currently performing.</span></span>  
  
## <a name="remarks"></a><span data-ttu-id="206ad-166">Remarks</span><span class="sxs-lookup"><span data-stu-id="206ad-166">Remarks</span></span>  
 <span data-ttu-id="206ad-167">Счетчики производительности позволяют отслеживать производительность при зеркальном отображении баз данных.</span><span class="sxs-lookup"><span data-stu-id="206ad-167">The performance counters let you monitor database mirroring performance.</span></span> <span data-ttu-id="206ad-168">Например, можно просмотреть счетчик **Задержка транзакции** , чтобы узнать, влияет ли зеркальное отображение базы данных на производительность основного сервера, или просмотреть счетчики **Очередь на повтор** и **Очередь отправки журнала** , чтобы узнать, насколько быстро зеркальная база данных воспроизводит изменения основной базы данных.</span><span class="sxs-lookup"><span data-stu-id="206ad-168">For example, you can examine the **Transaction Delay** counter to see if database mirroring is impacting performance on the principal server, you can examine the **Redo Queue** and **Log Send Queue** counters to see how well the mirror database is keeping up with the principal database.</span></span> <span data-ttu-id="206ad-169">Можно просмотреть счетчик **Отправлено байтов журнала/с** , чтобы отследить объем данных журнала, пересылаемый за секунду.</span><span class="sxs-lookup"><span data-stu-id="206ad-169">You can examine the **Log Bytes Sent/sec** counter to monitor the amount of log sent per second.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="206ad-170">См. также:</span><span class="sxs-lookup"><span data-stu-id="206ad-170">See Also</span></span>  
 [<span data-ttu-id="206ad-171">Наблюдение за использованием ресурсов (системный монитор)</span><span class="sxs-lookup"><span data-stu-id="206ad-171">Monitor Resource Usage &#40;System Monitor&#41;</span></span>](monitor-resource-usage-system-monitor.md)  
  
  
