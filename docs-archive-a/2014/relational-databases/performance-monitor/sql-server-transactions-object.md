---
title: SQL Server, объект транзакции | Документация Майкрософт
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: performance
ms.topic: conceptual
helpviewer_keywords:
- SQLServer:Transactions
- Transactions object
ms.assetid: 85240267-78fd-476a-9ef6-010d6cf32dd8
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 73071af197c042bf6ef044d6b9a625cffde296e9
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87729393"
---
# <a name="sql-server-transactions-object"></a><span data-ttu-id="7380a-102">SQL Server, объект Transactions</span><span class="sxs-lookup"><span data-stu-id="7380a-102">SQL Server, Transactions Object</span></span>
  <span data-ttu-id="7380a-103">Объект **Transactions** в Microsoft [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] предоставляет счетчики для мониторинга количества активных транзакций в экземпляре [!INCLUDE[ssDE](../../includes/ssde-md.md)] и влияния этих транзакций на ресурсы, такие как хранилище версий строк изоляции моментальных снимков **tempdb**.</span><span class="sxs-lookup"><span data-stu-id="7380a-103">The **Transactions** object in Microsoft [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] provides counters to monitor the number of transactions active in an instance of the [!INCLUDE[ssDE](../../includes/ssde-md.md)], and the effects of those transactions on resources such as the snapshot isolation row version store in **tempdb**.</span></span> <span data-ttu-id="7380a-104">Транзакции представляют собой логические блоки проделанной работы — наборы операций, которые должны либо все завершиться успешно, либо быть стертыми из базы данных, чтобы соблюсти логическую целостность данных.</span><span class="sxs-lookup"><span data-stu-id="7380a-104">Transactions are logical units of work; a set of operations that must either all succeed or all be erased from a database in order to maintain the logical integrity of the data.</span></span> <span data-ttu-id="7380a-105">Все изменения данных в базах данных [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] осуществляются в транзакциях.</span><span class="sxs-lookup"><span data-stu-id="7380a-105">All modifications of data in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] databases are made in transactions.</span></span>  
  
 <span data-ttu-id="7380a-106">Если база данных допускает уровень изоляции моментальных снимков, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] должен поддерживать записи об изменениях всех строк в базе данных.</span><span class="sxs-lookup"><span data-stu-id="7380a-106">When a database is set to allow snapshot isolation level, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] must maintain a record of the modifications made to each row in a database.</span></span> <span data-ttu-id="7380a-107">Каждый раз при изменении строки копия строки в состоянии, предшествующем изменению, записывается в хранилище версий строк в базе данных **tempdb**.</span><span class="sxs-lookup"><span data-stu-id="7380a-107">Each time a row is modified, a copy of the row as it existed before the modification is recorded in a row version store in **tempdb**.</span></span> <span data-ttu-id="7380a-108">Многие счетчики в объекте **Transaction** также можно применять для мониторинга размера и скорости роста хранилища версий строк в базе данных **tempdb**.</span><span class="sxs-lookup"><span data-stu-id="7380a-108">Many of the counters in the **Transaction** object can be used to monitor the size and rate of growth of the row version store in **tempdb**.</span></span>  
  
 <span data-ttu-id="7380a-109">Счетчики объектов **Transactions** возвращают сведения обо всех транзакциях в одном экземпляре [!INCLUDE[ssDE](../../includes/ssde-md.md)].</span><span class="sxs-lookup"><span data-stu-id="7380a-109">The **Transactions** object counters report all transactions in one instance of the [!INCLUDE[ssDE](../../includes/ssde-md.md)].</span></span>  
  
 <span data-ttu-id="7380a-110">В этой таблице перечислены счетчики **SQLServer:Transactions** .</span><span class="sxs-lookup"><span data-stu-id="7380a-110">This table describes the **SQLServer:Transactions** counters.</span></span>  
  
|<span data-ttu-id="7380a-111">Счетчики Transactions в SQL Server</span><span class="sxs-lookup"><span data-stu-id="7380a-111">SQL Server Transactions counters</span></span>|<span data-ttu-id="7380a-112">Описание</span><span class="sxs-lookup"><span data-stu-id="7380a-112">Description</span></span>|  
|--------------------------------------|-----------------|  
|<span data-ttu-id="7380a-113">**Свободное пространство в базе данных tempdb (КБ)**</span><span class="sxs-lookup"><span data-stu-id="7380a-113">**Free Space in tempdb (KB)**</span></span>|<span data-ttu-id="7380a-114">Объем (в КБ) свободного пространства в базе данных **tempdb**.</span><span class="sxs-lookup"><span data-stu-id="7380a-114">The amount of space (in kilobytes) available in **tempdb**.</span></span> <span data-ttu-id="7380a-115">Должно быть достаточно свободного места для того, чтобы вместить и хранилище версий уровня изоляции моментальных снимков, и все новые временные объекты, создаваемые в данном экземпляре [!INCLUDE[ssDE](../../includes/ssde-md.md)].</span><span class="sxs-lookup"><span data-stu-id="7380a-115">There must be enough free space to hold both the snapshot isolation level version store and all new temporary objects created in this instance of the [!INCLUDE[ssDE](../../includes/ssde-md.md)].</span></span>|  
|<span data-ttu-id="7380a-116">**Наиболее продолжительное время выполнения транзакции**</span><span class="sxs-lookup"><span data-stu-id="7380a-116">**Longest Transaction Running Time**</span></span>|<span data-ttu-id="7380a-117">Время (в секундах) с момента запуска транзакции, которая оставалась активной дольше любой другой текущей транзакции.</span><span class="sxs-lookup"><span data-stu-id="7380a-117">The length of time (in seconds) since the start of the transaction that has been active longer than any other current transaction.</span></span> <span data-ttu-id="7380a-118">Этот счетчик показывает только действия, произошедшие при базе данных на уровне изоляции зафиксированной операции чтения с моментальным снимком.</span><span class="sxs-lookup"><span data-stu-id="7380a-118">This counter only shows activity when the database is under read committed snapshot isolation level.</span></span> <span data-ttu-id="7380a-119">Он не регистрирует других действий, если база данных находится в другом уровне изоляции.</span><span class="sxs-lookup"><span data-stu-id="7380a-119">It does not log any activity if the database is in any other isolation level.</span></span>|  
|<span data-ttu-id="7380a-120">**Транзакций версий без снимков**</span><span class="sxs-lookup"><span data-stu-id="7380a-120">**NonSnapshot Version Transactions**</span></span>|<span data-ttu-id="7380a-121">Число активных в настоящий момент транзакций, не использующих уровень изоляции моментальных снимков, но производящих изменения данных, которые привели к формированию версий строк в хранилище версий **tempdb** .</span><span class="sxs-lookup"><span data-stu-id="7380a-121">The number of currently active transactions that are not using snapshot isolation level and have made data modifications that have generated row versions in the **tempdb** version store.</span></span>|  
|<span data-ttu-id="7380a-122">**Транзакции моментальных снимков**</span><span class="sxs-lookup"><span data-stu-id="7380a-122">**Snapshot Transactions**</span></span>|<span data-ttu-id="7380a-123">Число активных в настоящий момент транзакций, которые используют уровень изоляции моментальных снимков.</span><span class="sxs-lookup"><span data-stu-id="7380a-123">The number of currently active transactions using the snapshot isolation level.</span></span><br /><br /> <span data-ttu-id="7380a-124">Примечание. Счетчик объекта **Транзакции моментальных снимков** возвращает данные о том, когда произошел первый доступ к данным, а не когда была выполнена инструкция `BEGIN TRANSACTION`.</span><span class="sxs-lookup"><span data-stu-id="7380a-124">Note: The **Snapshot Transactions** object counter responds when the first data access occurs, not when the `BEGIN TRANSACTION` statement is issued.</span></span>|  
|<span data-ttu-id="7380a-125">**Транзакции**</span><span class="sxs-lookup"><span data-stu-id="7380a-125">**Transactions**</span></span>|<span data-ttu-id="7380a-126">Число активных в настоящее время транзакций любого типа.</span><span class="sxs-lookup"><span data-stu-id="7380a-126">The number of currently active transactions of all types.</span></span>|  
|<span data-ttu-id="7380a-127">**Коэффициент конфликтов обновления**</span><span class="sxs-lookup"><span data-stu-id="7380a-127">**Update conflict ratio**</span></span>|<span data-ttu-id="7380a-128">Процент транзакций, использующих уровень изоляции моментальных снимков, которые столкнулись с конфликтами обновления за последнюю секунду.</span><span class="sxs-lookup"><span data-stu-id="7380a-128">The percentage of those transactions using the snapshot isolation level that have encountered update conflicts within the last second.</span></span> <span data-ttu-id="7380a-129">Конфликт обновления возникает, когда транзакция уровня изоляции моментальных снимков пытается изменить строку, которая в последний раз была изменена другой транзакцией, незафиксированной на момент запуска транзакции уровня изоляции снимков.</span><span class="sxs-lookup"><span data-stu-id="7380a-129">An update conflict occurs when a snapshot isolation level transaction attempts to modify a row that last was modified by another transaction that was not committed when the snapshot isolation level transaction started.</span></span>|  
|<span data-ttu-id="7380a-130">**Транзакции обновления моментальных снимков**</span><span class="sxs-lookup"><span data-stu-id="7380a-130">**Update Snapshot Transactions**</span></span>|<span data-ttu-id="7380a-131">Число активных в настоящий момент транзакций, которые используют уровень изоляции моментальных снимков и содержат измененные данные.</span><span class="sxs-lookup"><span data-stu-id="7380a-131">The number of currently active transactions using the snapshot isolation level and have modified data.</span></span>|  
|<span data-ttu-id="7380a-132">**Скорость очистки версий (КБ/с)**</span><span class="sxs-lookup"><span data-stu-id="7380a-132">**Version Cleanup rate (KB/s)**</span></span>|<span data-ttu-id="7380a-133">Скорость (в КБ/с) удаления версий строк из хранилища версий изоляции моментальных снимков в **tempdb**.</span><span class="sxs-lookup"><span data-stu-id="7380a-133">The rate (in kilobytes per second) at which row versions are removed from the snapshot isolation version store in **tempdb**.</span></span>|  
|<span data-ttu-id="7380a-134">**Скорость создания версий (КБ/с)**</span><span class="sxs-lookup"><span data-stu-id="7380a-134">**Version Generation rate (KB/s)**</span></span>|<span data-ttu-id="7380a-135">Скорость (в КБ/с) добавления новых версий строк в хранилище версий изоляции моментальных снимков в **tempdb**.</span><span class="sxs-lookup"><span data-stu-id="7380a-135">The rate (in kilobytes per second) at which new row versions are added to the snapshot isolation version store in **tempdb**.</span></span>|  
|<span data-ttu-id="7380a-136">**Размер хранилища версий (KБ)**</span><span class="sxs-lookup"><span data-stu-id="7380a-136">**Version Store Size (KB)**</span></span>|<span data-ttu-id="7380a-137">Объем пространства (в КБ) в базе данных **tempdb** , используемого для хранения версий строк уровня изоляции моментальных снимков.</span><span class="sxs-lookup"><span data-stu-id="7380a-137">The amount of space (in kilobytes) in **tempdb** being used to store snapshot isolation level row versions.</span></span>|  
|<span data-ttu-id="7380a-138">**Счетчик блоков хранилища версий**</span><span class="sxs-lookup"><span data-stu-id="7380a-138">**Version Store unit count**</span></span>|<span data-ttu-id="7380a-139">Число активных единиц распределения в хранилище версий изоляции моментальных снимков в **tempdb**.</span><span class="sxs-lookup"><span data-stu-id="7380a-139">The number of active allocation units in the snapshot isolation version store in **tempdb**.</span></span>|  
|<span data-ttu-id="7380a-140">**Создано блоков хранилища версий**</span><span class="sxs-lookup"><span data-stu-id="7380a-140">**Version Store unit creation**</span></span>|<span data-ttu-id="7380a-141">Число единиц распределения, созданных в хранилище изоляции моментальных снимков с момента запуска экземпляра компонента [!INCLUDE[ssDE](../../includes/ssde-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="7380a-141">The number of allocation units that have been created in the snapshot isolation store since the instance of the [!INCLUDE[ssDE](../../includes/ssde-md.md)] was started.</span></span>|  
|<span data-ttu-id="7380a-142">**Усечено блоков хранилища версий**</span><span class="sxs-lookup"><span data-stu-id="7380a-142">**Version Store unit truncation**</span></span>|<span data-ttu-id="7380a-143">Число единиц распределения, удаленных из хранилища изоляции моментальных снимков с момента запуска экземпляра [!INCLUDE[ssDE](../../includes/ssde-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="7380a-143">The number of allocation units that have been removed from the snapshot isolation store since the instance of the [!INCLUDE[ssDE](../../includes/ssde-md.md)] was started.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="7380a-144">См. также:</span><span class="sxs-lookup"><span data-stu-id="7380a-144">See Also</span></span>  
 [<span data-ttu-id="7380a-145">Наблюдение за использованием ресурсов (системный монитор)</span><span class="sxs-lookup"><span data-stu-id="7380a-145">Monitor Resource Usage &#40;System Monitor&#41;</span></span>](monitor-resource-usage-system-monitor.md)  
  
  
