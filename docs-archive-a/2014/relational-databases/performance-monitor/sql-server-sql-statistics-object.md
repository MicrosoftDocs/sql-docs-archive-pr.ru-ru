---
title: Объект статистики SQL (SQL Server) | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: performance
ms.topic: conceptual
helpviewer_keywords:
- SQLServer:SQL Statistics
- SQL Statistics object
ms.assetid: da7dbb4b-f632-45a0-b1ab-c35cc2695c86
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 8aba118f93a9a4f38179e8e7c5156eecc24012ef
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87729394"
---
# <a name="sql-server-sql-statistics-object"></a><span data-ttu-id="073e9-102">SQL Server, объект SQL Statistics</span><span class="sxs-lookup"><span data-stu-id="073e9-102">SQL Server, SQL Statistics Object</span></span>
  <span data-ttu-id="073e9-103">Объект **SQLServer: статистика SQL** в Microsoft [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] обеспечивает работу счетчиков для наблюдения компиляции и типов запросов, отправляемых экземпляру [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="073e9-103">The **SQLServer:SQL Statistics** object in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] provides counters to monitor compilation and the type of requests sent to an instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="073e9-104">Наблюдение за числом компиляций и повторных компиляций запросов и числа пакетов, полученных экземпляром [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , дает представление о том, как быстро [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] выполняет запросы пользователей и насколько эффективно их обрабатывает оптимизатор запросов.</span><span class="sxs-lookup"><span data-stu-id="073e9-104">Monitoring the number of query compilations and recompilations and the number of batches received by an instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] gives you an indication of how quickly [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] is processing user queries and how effectively the query optimizer is processing the queries.</span></span>  
  
 <span data-ttu-id="073e9-105">Компиляция занимает в обработке запроса значительную часть времени.</span><span class="sxs-lookup"><span data-stu-id="073e9-105">Compilation is a significant part of a query's turnaround time.</span></span> <span data-ttu-id="073e9-106">Чтобы сэкономить на стоимости компиляции, компонент [!INCLUDE[ssDE](../../includes/ssde-md.md)] сохраняет компилированный план запроса в кэше запросов.</span><span class="sxs-lookup"><span data-stu-id="073e9-106">In order to save the compilation cost, the [!INCLUDE[ssDE](../../includes/ssde-md.md)] saves the compiled query plan in a query cache.</span></span> <span data-ttu-id="073e9-107">Целью кэширования является снижение числа компиляций путем сохранения уже откомпилированных запросов для дальнейшего повторного использования, избавляя от необходимости повторной компиляции аналогичных запросов, которые могут поступить позже.</span><span class="sxs-lookup"><span data-stu-id="073e9-107">The objective of the cache is to reduce compilation by storing compiled queries for later reuse, therefore ending the requirement to recompile queries when later executed.</span></span> <span data-ttu-id="073e9-108">Однако каждый уникальный запрос должен быть скомпилирован хотя бы однажды.</span><span class="sxs-lookup"><span data-stu-id="073e9-108">However, each unique query must be compiled at least one time.</span></span> <span data-ttu-id="073e9-109">Компиляция запросов может быть вызвана следующими факторами:</span><span class="sxs-lookup"><span data-stu-id="073e9-109">Query recompilations can be caused by the following factors:</span></span>  
  
-   <span data-ttu-id="073e9-110">изменением схемы, включая базовые изменения (добавление в таблицу столбцов или индексов) или статистической схемой (вставка или удаление значительного числа строк в таблице);</span><span class="sxs-lookup"><span data-stu-id="073e9-110">Schema changes, including base schema changes such as adding columns or indexes to a table, or statistics schema changes such as inserting or deleting a significant number of rows from a table.</span></span>  
  
-   <span data-ttu-id="073e9-111">изменением среды (инструкцией SET).</span><span class="sxs-lookup"><span data-stu-id="073e9-111">Environment (SET statement) changes.</span></span> <span data-ttu-id="073e9-112">Изменениями параметров сеанса (например: повторную компиляцию запроса может вызвать предложение ANSI_PADDING или ANSI_NULLS).</span><span class="sxs-lookup"><span data-stu-id="073e9-112">Changes in session settings such as ANSI_PADDING or ANSI_NULLS can cause a query to be recompiled.</span></span>  
  
 <span data-ttu-id="073e9-113">Дополнительные сведения о простой и принудительной параметризации см. в статье [ALTER DATABASE (Transact-SQL)](/sql/t-sql/statements/alter-database-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="073e9-113">For more information about simple and forced parameterization, see [ALTER DATABASE &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-database-transact-sql).</span></span>  
  
 <span data-ttu-id="073e9-114">Это счетчики [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] **Статистика SQL**.</span><span class="sxs-lookup"><span data-stu-id="073e9-114">These are the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] **SQL Statistics** counters.</span></span>  
  
|<span data-ttu-id="073e9-115">Счетчики SQL Server статистика SQL</span><span class="sxs-lookup"><span data-stu-id="073e9-115">SQL Server SQL Statistics counters</span></span>|<span data-ttu-id="073e9-116">Описание</span><span class="sxs-lookup"><span data-stu-id="073e9-116">Description</span></span>|  
|----------------------------------------|-----------------|  
|<span data-ttu-id="073e9-117">**Попыток автопараметризации/с**</span><span class="sxs-lookup"><span data-stu-id="073e9-117">**Auto-Param Attempts/sec**</span></span>|<span data-ttu-id="073e9-118">Число попыток автоматической параметризации, выполненных за секунду.</span><span class="sxs-lookup"><span data-stu-id="073e9-118">Number of auto-parameterization attempts per second.</span></span> <span data-ttu-id="073e9-119">Общий итог должен быть равен сумме ошибочных, надежных и ненадежных автоматических параметризаций.</span><span class="sxs-lookup"><span data-stu-id="073e9-119">Total should be the sum of the failed, safe, and unsafe auto-parameterizations.</span></span> <span data-ttu-id="073e9-120">Автоматическая параметризация возникает в том случае, когда экземпляр [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] пытается параметризовать запрос [!INCLUDE[tsql](../../../includes/tsql-md.md)] , замещая некоторые из литералов параметрами, чтобы повторно использовать из кэша как можно больше похожих планов выполнения.</span><span class="sxs-lookup"><span data-stu-id="073e9-120">Auto-parameterization occurs when an instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] tries to parameterize a [!INCLUDE[tsql](../../../includes/tsql-md.md)] request by replacing some literals with parameters so that reuse of the resulting cached execution plan across multiple similar-looking requests is possible.</span></span> <span data-ttu-id="073e9-121">Автоматическая параметризация в более поздних версиях [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]называется «простой параметризацией».</span><span class="sxs-lookup"><span data-stu-id="073e9-121">Note that auto-parameterizations are also known as simple parameterizations in newer versions of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="073e9-122">Этот счетчик не учитывает принудительные параметризации.</span><span class="sxs-lookup"><span data-stu-id="073e9-122">This counter does not include forced parameterizations.</span></span>|  
|<span data-ttu-id="073e9-123">**Запросов пакетов/с**</span><span class="sxs-lookup"><span data-stu-id="073e9-123">**Batch Requests/sec**</span></span>|<span data-ttu-id="073e9-124">Число пакетов команд [!INCLUDE[tsql](../../../includes/tsql-md.md)] , полученных за секунду.</span><span class="sxs-lookup"><span data-stu-id="073e9-124">Number of [!INCLUDE[tsql](../../../includes/tsql-md.md)] command batches received per second.</span></span> <span data-ttu-id="073e9-125">На эту статистику влияют любые ограничения (ввод-вывод, число пользователей, размер кэша, сложность запросов и т. д.).</span><span class="sxs-lookup"><span data-stu-id="073e9-125">This statistic is affected by all constraints (such as I/O, number of users, cache size, complexity of requests, and so on).</span></span> <span data-ttu-id="073e9-126">Высокое число запросов пакетов свидетельствует о высокой пропускной способности.</span><span class="sxs-lookup"><span data-stu-id="073e9-126">High batch requests mean good throughput.</span></span>|  
|<span data-ttu-id="073e9-127">**Сбоев автопараметризации/с**</span><span class="sxs-lookup"><span data-stu-id="073e9-127">**Failed Auto-Params/sec**</span></span>|<span data-ttu-id="073e9-128">Число ошибочных попыток автоматической параметризации, выполненных за секунду.</span><span class="sxs-lookup"><span data-stu-id="073e9-128">Number of failed auto-parameterization attempts per second.</span></span> <span data-ttu-id="073e9-129">Это число обычно невелико.</span><span class="sxs-lookup"><span data-stu-id="073e9-129">This should be small.</span></span> <span data-ttu-id="073e9-130">Автоматическая параметризация в более поздних версиях [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]называется «простой параметризацией».</span><span class="sxs-lookup"><span data-stu-id="073e9-130">Note that auto-parameterizations are also known as simple parameterizations in later versions of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>|  
|<span data-ttu-id="073e9-131">**Вынужденные параметризации/с**</span><span class="sxs-lookup"><span data-stu-id="073e9-131">**Forced Parameterizations/sec**</span></span>|<span data-ttu-id="073e9-132">Число успешных принудительных параметризаций в секунду.</span><span class="sxs-lookup"><span data-stu-id="073e9-132">Number of successful forced parameterizations per second.</span></span>|  
|<span data-ttu-id="073e9-133">**Число выполнений структурированных планов/сек**</span><span class="sxs-lookup"><span data-stu-id="073e9-133">**Guided Plan Executions/sec**</span></span>|<span data-ttu-id="073e9-134">Число выполнений плана в секунду, когда план запроса создается с помощью структуры плана.</span><span class="sxs-lookup"><span data-stu-id="073e9-134">Number of plan executions per second in which the query plan has been generated by using a plan guide.</span></span>|  
|<span data-ttu-id="073e9-135">**Число выполнений неструктурированных планов/сек**</span><span class="sxs-lookup"><span data-stu-id="073e9-135">**Misguided Plan Executions/sec**</span></span>|<span data-ttu-id="073e9-136">Число выполненных планов в секунду, когда не удается обработать структуру плана во время его создания.</span><span class="sxs-lookup"><span data-stu-id="073e9-136">Number of plan executions per second in which a plan guide could not be honored during plan generation.</span></span> <span data-ttu-id="073e9-137">Структура плана не рассматривалась, а выполненный план создан путем обычной компиляции.</span><span class="sxs-lookup"><span data-stu-id="073e9-137">The plan guide was disregarded and normal compilation was used to generate the executed plan.</span></span>|  
|<span data-ttu-id="073e9-138">**Безопасных автопараметризаций/с**</span><span class="sxs-lookup"><span data-stu-id="073e9-138">**Safe Auto-Params/sec**</span></span>|<span data-ttu-id="073e9-139">Число попыток надежных автоматических параметризаций в секунду.</span><span class="sxs-lookup"><span data-stu-id="073e9-139">Number of safe auto-parameterization attempts per second.</span></span> <span data-ttu-id="073e9-140">Надежность означает, что кэшированный план выполнения может быть совместно использован несколькими похожими инструкциями [!INCLUDE[tsql](../../../includes/tsql-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="073e9-140">Safe refers to a determination that a cached execution plan can be shared between different similar-looking [!INCLUDE[tsql](../../../includes/tsql-md.md)] statements.</span></span> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="073e9-141">выполняет множество попыток автоматической параметризации; некоторые из них оказываются надежными, а остальные — ошибочными.</span><span class="sxs-lookup"><span data-stu-id="073e9-141">makes many auto-parameterization attempts some of which turn out to be safe and others fail.</span></span> <span data-ttu-id="073e9-142">Автоматическая параметризация в более поздних версиях [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]называется «простой параметризацией».</span><span class="sxs-lookup"><span data-stu-id="073e9-142">Note that auto-parameterizations are also known as simple parameterizations in later versions of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="073e9-143">Этот счетчик не включает принудительные параметризации.</span><span class="sxs-lookup"><span data-stu-id="073e9-143">This does not include forced parameterizations.</span></span>|  
|<span data-ttu-id="073e9-144">**Скорость предупреждений SQL**</span><span class="sxs-lookup"><span data-stu-id="073e9-144">**SQL Attention rate**</span></span>|<span data-ttu-id="073e9-145">Число запросов «Внимание» в секунду.</span><span class="sxs-lookup"><span data-stu-id="073e9-145">Number of attentions per second.</span></span> <span data-ttu-id="073e9-146">«Внимание» — это запрос, выдаваемый клиентом для завершения текущего выполняемого запроса.</span><span class="sxs-lookup"><span data-stu-id="073e9-146">An attention is a request by the client to end the currently running request.</span></span>|  
|<span data-ttu-id="073e9-147">**Компиляций SQL/с**</span><span class="sxs-lookup"><span data-stu-id="073e9-147">**SQL Compilations/sec**</span></span>|<span data-ttu-id="073e9-148">Число компиляций SQL, выполненных за секунду.</span><span class="sxs-lookup"><span data-stu-id="073e9-148">Number of SQL compilations per second.</span></span> <span data-ttu-id="073e9-149">Указывает число раз, когда вводился путь компиляции кода.</span><span class="sxs-lookup"><span data-stu-id="073e9-149">Indicates the number of times the compile code path is entered.</span></span> <span data-ttu-id="073e9-150">Включает повторные компиляции на уровне инструкции в [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="073e9-150">Includes compiles caused by statement-level recompilations in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="073e9-151">После того как активность пользователя [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] стабилизировалась, это значение изменяется незначительно.</span><span class="sxs-lookup"><span data-stu-id="073e9-151">After [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] user activity is stable, this value reaches a steady state.</span></span>|  
|<span data-ttu-id="073e9-152">**Повторных компиляций SQL/с**</span><span class="sxs-lookup"><span data-stu-id="073e9-152">**SQL Re-Compilations/sec**</span></span>|<span data-ttu-id="073e9-153">Число повторных компиляций инструкций в секунду.</span><span class="sxs-lookup"><span data-stu-id="073e9-153">Number of statement recompiles per second.</span></span> <span data-ttu-id="073e9-154">Подсчитывает число повторных компиляций инструкций.</span><span class="sxs-lookup"><span data-stu-id="073e9-154">Counts the number of times statement recompiles are triggered.</span></span> <span data-ttu-id="073e9-155">Обычно следует стремиться к снижению этого значения.</span><span class="sxs-lookup"><span data-stu-id="073e9-155">Generally, you want the recompiles to be low.</span></span>|  
|<span data-ttu-id="073e9-156">**Небезопасных автопараметризаций/с**</span><span class="sxs-lookup"><span data-stu-id="073e9-156">**Unsafe Auto-Params/sec**</span></span>|<span data-ttu-id="073e9-157">Число ненадежных попыток автоматической параметризации, выполненных за секунду.</span><span class="sxs-lookup"><span data-stu-id="073e9-157">Number of unsafe auto-parameterization attempts per second.</span></span> <span data-ttu-id="073e9-158">Например: если запрос обладает какими-либо характеристиками, препятствующими совместному использованию его плана из кэша,</span><span class="sxs-lookup"><span data-stu-id="073e9-158">For example, the query has some characteristics that prevent the cached plan from being shared.</span></span> <span data-ttu-id="073e9-159">он определяется как ненадежный.</span><span class="sxs-lookup"><span data-stu-id="073e9-159">These are designated as unsafe.</span></span> <span data-ttu-id="073e9-160">В это число не входят принудительные параметризации.</span><span class="sxs-lookup"><span data-stu-id="073e9-160">This does not count the number of forced parameterizations.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="073e9-161">См. также:</span><span class="sxs-lookup"><span data-stu-id="073e9-161">See Also</span></span>  
 <span data-ttu-id="073e9-162">[SQL Server, объект Plan Cache](sql-server-plan-cache-object.md) </span><span class="sxs-lookup"><span data-stu-id="073e9-162">[SQL Server, Plan Cache Object](sql-server-plan-cache-object.md) </span></span>  
 [<span data-ttu-id="073e9-163">Наблюдение за использованием ресурсов (системный монитор)</span><span class="sxs-lookup"><span data-stu-id="073e9-163">Monitor Resource Usage &#40;System Monitor&#41;</span></span>](monitor-resource-usage-system-monitor.md)  
  
  
