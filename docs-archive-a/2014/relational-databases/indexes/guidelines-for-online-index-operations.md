---
title: Рекомендации по операциям с индексами | Документация Майкрософт
ms.custom: ''
ms.date: 11/11/2016
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: table-view-index
ms.topic: conceptual
helpviewer_keywords:
- clustered indexes, online operations
- online index operations
- indexes [SQL Server], online operations
- disk space [SQL Server], indexes
- nonclustered indexes [SQL Server], online operations
- transaction logs [SQL Server], indexes
ms.assetid: d82942e0-4a86-4b34-a65f-9f143ebe85ce
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 907fe6a826607fe1cb403ad9b8debe6faf6771fc
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87668323"
---
# <a name="guidelines-for-online-index-operations"></a><span data-ttu-id="2ea7c-102">Руководящие принципы для операций с индексами</span><span class="sxs-lookup"><span data-stu-id="2ea7c-102">Guidelines for Online Index Operations</span></span>
  <span data-ttu-id="2ea7c-103">При выполнении операций с индексами в сети придерживайтесь следующих правил.</span><span class="sxs-lookup"><span data-stu-id="2ea7c-103">When you perform online index operations, the following guidelines apply:</span></span>  
  
-   <span data-ttu-id="2ea7c-104">Кластеризованные индексы должны создаваться, перестраиваться или удаляться вне сети, если базовая таблица содержит следующие типы данных больших объектов (LOB): `image` , **ntext**и `text` .</span><span class="sxs-lookup"><span data-stu-id="2ea7c-104">Clustered indexes must be created, rebuilt, or dropped offline when the underlying table contains the following large object (LOB) data types: `image`, **ntext**, and `text`.</span></span>  
  
-   <span data-ttu-id="2ea7c-105">Индексы локальных временных таблиц не могут создаваться, перестраиваться и удаляться в режиме в сети.</span><span class="sxs-lookup"><span data-stu-id="2ea7c-105">Indexes on local temp tables cannot be created, rebuilt, or dropped online.</span></span> <span data-ttu-id="2ea7c-106">Это ограничение не относится к индексам глобальных временных таблиц.</span><span class="sxs-lookup"><span data-stu-id="2ea7c-106">This restriction does not apply to indexes on global temp tables.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="2ea7c-107">Операции с индексами в сети доступны не во всех выпусках [!INCLUDE[msCoName](../../includes/msconame-md.md)][!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="2ea7c-107">Online index operations are not available in every edition of [!INCLUDE[msCoName](../../includes/msconame-md.md)][!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="2ea7c-108">Перечень функций, поддерживаемых в разных выпусках [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], см. в разделе [Features Supported by the Editions of SQL Server 2014](../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md).</span><span class="sxs-lookup"><span data-stu-id="2ea7c-108">For a list of features that are supported by the editions of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], see [Features Supported by the Editions of SQL Server 2014](../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md).</span></span>  
  
 <span data-ttu-id="2ea7c-109">В следующей таблице перечислены операции с индексами, которые могут быть выполнены в режиме в сети и индексы, которые исключаются из этих операций.</span><span class="sxs-lookup"><span data-stu-id="2ea7c-109">The following table shows the index operations that can be performed online and the indexes that are excluded from these online operations.</span></span> <span data-ttu-id="2ea7c-110">Кроме того, в ней указаны дополнительные ограничения.</span><span class="sxs-lookup"><span data-stu-id="2ea7c-110">Additional restrictions are also included.</span></span>  
  
|<span data-ttu-id="2ea7c-111">Операция с индексами в сети</span><span class="sxs-lookup"><span data-stu-id="2ea7c-111">Online index operation</span></span>|<span data-ttu-id="2ea7c-112">Исключенные индексы</span><span class="sxs-lookup"><span data-stu-id="2ea7c-112">Excluded indexes</span></span>|<span data-ttu-id="2ea7c-113">Прочие ограничения</span><span class="sxs-lookup"><span data-stu-id="2ea7c-113">Other restrictions</span></span>|  
|----------------------------|----------------------|------------------------|  
|<span data-ttu-id="2ea7c-114">ALTER INDEX REBUILD</span><span class="sxs-lookup"><span data-stu-id="2ea7c-114">ALTER INDEX REBUILD</span></span>|<span data-ttu-id="2ea7c-115">Отключенный кластеризованный индекс или отключенное индексированное представление</span><span class="sxs-lookup"><span data-stu-id="2ea7c-115">Disabled clustered index or disabled indexed view</span></span><br /><br /> <span data-ttu-id="2ea7c-116">XML-индекс</span><span class="sxs-lookup"><span data-stu-id="2ea7c-116">XML index</span></span> <br /><br /><span data-ttu-id="2ea7c-117">Индекс columnstore</span><span class="sxs-lookup"><span data-stu-id="2ea7c-117">Columnstore index</span></span><br /><br /> <span data-ttu-id="2ea7c-118">Индекс локальной временной таблицы</span><span class="sxs-lookup"><span data-stu-id="2ea7c-118">Index on a local temp table</span></span>|<span data-ttu-id="2ea7c-119">Указание ключевого слова ALL может привести к ошибке выполнения операции, если таблица содержит исключенный индекс.</span><span class="sxs-lookup"><span data-stu-id="2ea7c-119">Specifying the keyword ALL may cause the operation to fail when the table contains an excluded index.</span></span><br /><br /> <span data-ttu-id="2ea7c-120">На перестроение отключенных индексов налагаются дополнительные ограничения.</span><span class="sxs-lookup"><span data-stu-id="2ea7c-120">Additional restrictions on rebuilding disabled indexes apply.</span></span> <span data-ttu-id="2ea7c-121">Дополнительные сведения см. в статье [Отключение индексов и ограничений](disable-indexes-and-constraints.md).</span><span class="sxs-lookup"><span data-stu-id="2ea7c-121">For more information, see [Disable Indexes and Constraints](disable-indexes-and-constraints.md).</span></span>|  
|<span data-ttu-id="2ea7c-122">CREATE INDEX</span><span class="sxs-lookup"><span data-stu-id="2ea7c-122">CREATE INDEX</span></span>|<span data-ttu-id="2ea7c-123">XML-индекс</span><span class="sxs-lookup"><span data-stu-id="2ea7c-123">XML index</span></span><br /><br /> <span data-ttu-id="2ea7c-124">Исходные уникальные кластеризованные индексы представлений.</span><span class="sxs-lookup"><span data-stu-id="2ea7c-124">Initial unique clustered index on a view</span></span><br /><br /> <span data-ttu-id="2ea7c-125">Индекс локальной временной таблицы</span><span class="sxs-lookup"><span data-stu-id="2ea7c-125">Index on a local temp table</span></span>||  
|<span data-ttu-id="2ea7c-126">CREATE INDEX WITH DROP_EXISTING</span><span class="sxs-lookup"><span data-stu-id="2ea7c-126">CREATE INDEX WITH DROP_EXISTING</span></span>|<span data-ttu-id="2ea7c-127">Отключенный кластеризованный индекс или отключенное индексированное представление</span><span class="sxs-lookup"><span data-stu-id="2ea7c-127">Disabled clustered index or disabled indexed view</span></span><br /><br /> <span data-ttu-id="2ea7c-128">Индекс локальной временной таблицы</span><span class="sxs-lookup"><span data-stu-id="2ea7c-128">Index on a local temp table</span></span><br /><br /> <span data-ttu-id="2ea7c-129">XML-индекс</span><span class="sxs-lookup"><span data-stu-id="2ea7c-129">XML index</span></span>||  
|<span data-ttu-id="2ea7c-130">DROP INDEX</span><span class="sxs-lookup"><span data-stu-id="2ea7c-130">DROP INDEX</span></span>|<span data-ttu-id="2ea7c-131">Отключенный индекс</span><span class="sxs-lookup"><span data-stu-id="2ea7c-131">Disabled index</span></span><br /><br /> <span data-ttu-id="2ea7c-132">XML-индекс</span><span class="sxs-lookup"><span data-stu-id="2ea7c-132">XML index</span></span><br /><br /> <span data-ttu-id="2ea7c-133">Некластеризованный индекс</span><span class="sxs-lookup"><span data-stu-id="2ea7c-133">Nonclustered index</span></span><br /><br /> <span data-ttu-id="2ea7c-134">Индекс локальной временной таблицы</span><span class="sxs-lookup"><span data-stu-id="2ea7c-134">Index on a local temp table</span></span>|<span data-ttu-id="2ea7c-135">В одной инструкции не может быть указано несколько индексов.</span><span class="sxs-lookup"><span data-stu-id="2ea7c-135">Multiple indexes cannot be specified within a single statement.</span></span>|  
|<span data-ttu-id="2ea7c-136">ALTER TABLE ADD CONSTRAINT (PRIMARY KEY или ограничение UNIQUE)</span><span class="sxs-lookup"><span data-stu-id="2ea7c-136">ALTER TABLE ADD CONSTRAINT (PRIMARY KEY or UNIQUE)</span></span>|<span data-ttu-id="2ea7c-137">Индекс локальной временной таблицы</span><span class="sxs-lookup"><span data-stu-id="2ea7c-137">Index on a local temp table</span></span><br /><br /> <span data-ttu-id="2ea7c-138">Кластеризованный индекс</span><span class="sxs-lookup"><span data-stu-id="2ea7c-138">Clustered index</span></span>|<span data-ttu-id="2ea7c-139">Допускается только одно вложенное предложение за раз.</span><span class="sxs-lookup"><span data-stu-id="2ea7c-139">Only one subclause is allowed at a time.</span></span> <span data-ttu-id="2ea7c-140">Например: нельзя добавлять и удалять ограничения PRIMARY KEY и UNIQUE в одной и той же инструкции ALTER TABLE.</span><span class="sxs-lookup"><span data-stu-id="2ea7c-140">For example, you cannot add and drop PRIMARY KEY or UNIQUE constraints in the same ALTER TABLE statement.</span></span>|  
||||  
  
 <span data-ttu-id="2ea7c-141">Базовая таблица не может быть изменена, усечена или удалена, пока не завершилась операция с индексами в сети.</span><span class="sxs-lookup"><span data-stu-id="2ea7c-141">The underlying table cannot be modified, truncated, or dropped while an online index operation is in process.</span></span>  
  
 <span data-ttu-id="2ea7c-142">Настройка параметра ONLINE (ON или OFF), указанная при создании или удалении кластеризованного индекса, относится ко всем перестраиваемым некластеризованным индексам.</span><span class="sxs-lookup"><span data-stu-id="2ea7c-142">The online option setting (ON or OFF) specified when you create or drop a clustered index is applied to any nonclustered indexes that must be rebuilt.</span></span> <span data-ttu-id="2ea7c-143">Например: если кластеризованный индекс построен в режиме в сети с помощью инструкции CREATE INDEX WITH DROP_EXISTING, ONLINE=ON, все связанные с ним некластеризованные индексы также повторно создаются в режиме в сети.</span><span class="sxs-lookup"><span data-stu-id="2ea7c-143">For example, if the clustered index is built online by using CREATE INDEX WITH DROP_EXISTING, ONLINE=ON, all associated nonclustered indexes are re-created online also.</span></span>  
  
 <span data-ttu-id="2ea7c-144">При создании или перестроении в сети индекса UNIQUE построитель индексов и выполняющаяся одновременно пользовательская транзакция могут попытаться добавить одно и то же значение ключа, нарушая его уникальность.</span><span class="sxs-lookup"><span data-stu-id="2ea7c-144">When you create or rebuild a UNIQUE index online, the index builder and a concurrent user transaction may try to insert the same key, therefore violating uniqueness.</span></span> <span data-ttu-id="2ea7c-145">Если строка, введенная пользователем, вставляется в новый индекс прежде, чем исходная строка из таблицы-источника перемещается в новый индекс, операция с индексами вне сети завершится ошибкой.</span><span class="sxs-lookup"><span data-stu-id="2ea7c-145">If a row entered by a user is inserted into the new index (target) before the original row from the source table is moved to the new index, the online index operation will fail.</span></span>  
  
 <span data-ttu-id="2ea7c-146">С небольшой вероятностью операция с индексами в сети может вызвать взаимоблокировку при работе с базой данных, вызванную работой пользователя или приложения.</span><span class="sxs-lookup"><span data-stu-id="2ea7c-146">Although not common, the online index operation can cause a deadlock when it interacts with database updates because of user or application activities.</span></span> <span data-ttu-id="2ea7c-147">В этих редких случаях компонент [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] определит жертвой взаимоблокировки активность пользователя или приложения.</span><span class="sxs-lookup"><span data-stu-id="2ea7c-147">In these rare cases, the [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] will select the user or application activity as a deadlock victim.</span></span>  
  
 <span data-ttu-id="2ea7c-148">Можно выполнять одновременные фоновые DLL-операции индекса одной таблицы или представления только при создании нескольких некластеризованных индексов либо при реорганизации некластеризованных индексов.</span><span class="sxs-lookup"><span data-stu-id="2ea7c-148">You can perform concurrent online index DDL operations on the same table or view only when you are creating multiple new nonclustered indexes, or reorganizing nonclustered indexes.</span></span> <span data-ttu-id="2ea7c-149">Все остальные попытки выполнения операций с индексами в сети завершаются ошибкой.</span><span class="sxs-lookup"><span data-stu-id="2ea7c-149">All other online index operations performed at the same time fail.</span></span> <span data-ttu-id="2ea7c-150">Например: нельзя в режиме в сети создавать новый индекс во время перестроения существующего индекса для этой же таблицы.</span><span class="sxs-lookup"><span data-stu-id="2ea7c-150">For example, you cannot create a new index online while rebuilding an existing index online on the same table.</span></span>  
  
 <span data-ttu-id="2ea7c-151">Операцию в сети нельзя выполнить, если индекс содержит столбец с типом больших объектов, и операции в сети в той же транзакции предшествует операция обновления.</span><span class="sxs-lookup"><span data-stu-id="2ea7c-151">An online operation cannot be performed when an index contains a column of the large object type, and in the same transaction there are update operations before this online operation.</span></span> <span data-ttu-id="2ea7c-152">Для решения этой проблемы проводите операцию в сети либо вне такой транзакции, либо в транзакции, но перед операциями обновления.</span><span class="sxs-lookup"><span data-stu-id="2ea7c-152">To work around this issue, place the online operation outside the transaction or place it before any updates in the transaction.</span></span>  
  
## <a name="disk-space-considerations"></a><span data-ttu-id="2ea7c-153">Рекомендации по месту на диске</span><span class="sxs-lookup"><span data-stu-id="2ea7c-153">Disk Space Considerations</span></span>  
 <span data-ttu-id="2ea7c-154">В общем случае требования к свободному месту на диске при работе с индексами и в режиме в сети и в режиме вне сети одинаковы.</span><span class="sxs-lookup"><span data-stu-id="2ea7c-154">Generally, disk space requirements are the same for online and offline index operations.</span></span> <span data-ttu-id="2ea7c-155">Исключением является дополнительное место, необходимое для временного сопоставления индекса.</span><span class="sxs-lookup"><span data-stu-id="2ea7c-155">An exception is additional disk space required by the temporary mapping index.</span></span> <span data-ttu-id="2ea7c-156">Этот временный индекс применяется в операциях с индексами в сети при создании, перестроении или удалении кластеризованных индексов.</span><span class="sxs-lookup"><span data-stu-id="2ea7c-156">This temporary index is used in online index operations that create, rebuild, or drop a clustered index.</span></span> <span data-ttu-id="2ea7c-157">Удаление кластеризованного индекса в режиме в сети требует столько же места, сколько и его создание в режиме в сети.</span><span class="sxs-lookup"><span data-stu-id="2ea7c-157">Dropping a clustered index online requires as much space as creating a clustered index online.</span></span> <span data-ttu-id="2ea7c-158">Дополнительные сведения см. в статье [Disk Space Requirements for Index DDL Operations](disk-space-requirements-for-index-ddl-operations.md).</span><span class="sxs-lookup"><span data-stu-id="2ea7c-158">For more information, see [Disk Space Requirements for Index DDL Operations](disk-space-requirements-for-index-ddl-operations.md).</span></span>  
  
## <a name="performance-considerations"></a><span data-ttu-id="2ea7c-159">Вопросы производительности</span><span class="sxs-lookup"><span data-stu-id="2ea7c-159">Performance Considerations</span></span>  
 <span data-ttu-id="2ea7c-160">Хотя операции с индексами в сети допускают одновременную работу пользователей, в этом случае они выполняются тем дольше, чем интенсивнее происходит обновление данных.</span><span class="sxs-lookup"><span data-stu-id="2ea7c-160">Although online index operations permit concurrent user update activity, the index operations will take longer if the update activity is very heavy.</span></span> <span data-ttu-id="2ea7c-161">Обычно операции с индексами в сети выполняются медленнее, чем аналогичные операции вне сети, независимо от текущей интенсивности обновления данных.</span><span class="sxs-lookup"><span data-stu-id="2ea7c-161">Typically, online index operations will be slower than equivalent offline index operations regardless of the concurrent update activity level.</span></span>  
  
 <span data-ttu-id="2ea7c-162">Поскольку и исходная, и целевая структуры обслуживаются во время выполнения операции с индексами в сети, увеличивается потребление ресурсов при вставке, обновлении и удалении, и это увеличение может доходить до двукратного.</span><span class="sxs-lookup"><span data-stu-id="2ea7c-162">Because both the source and target structures are maintained during the online index operation, the resource usage for insert, update, and delete transactions is increased, potentially up to double.</span></span> <span data-ttu-id="2ea7c-163">Это может привести к снижению производительности и повышению нагрузки на систему, особенно ресурсов ЦП.</span><span class="sxs-lookup"><span data-stu-id="2ea7c-163">This could cause a decrease in performance and greater resource usage, especially CPU time, during the index operation.</span></span> <span data-ttu-id="2ea7c-164">Операции с индексами в сети полностью записываются в журнал.</span><span class="sxs-lookup"><span data-stu-id="2ea7c-164">Online index operations are fully logged.</span></span>  
  
 <span data-ttu-id="2ea7c-165">Несмотря на то, что рекомендуется выполнять операции с индексами в сети, необходимо предварительно оценить среду и определенные требования.</span><span class="sxs-lookup"><span data-stu-id="2ea7c-165">Although we recommend online operations, you should evaluate your environment and specific requirements.</span></span> <span data-ttu-id="2ea7c-166">Возможно, оптимальным решением может оказаться переключение в режим вне сети.</span><span class="sxs-lookup"><span data-stu-id="2ea7c-166">It may be optimal to run index operations offline.</span></span> <span data-ttu-id="2ea7c-167">При этом на время выполнения операции пользователи будут иметь ограниченный доступ к данным, но она быстрее закончится и в итоге займет меньше ресурсов.</span><span class="sxs-lookup"><span data-stu-id="2ea7c-167">In doing this, users have restricted access to the data during the operation, but the operation finishes faster and uses fewer resources.</span></span>  
  
 <span data-ttu-id="2ea7c-168">На многопроцессорных компьютерах, где установлен [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], индексные инструкции могут использовать больше процессоров для выполнения операций просмотра и сортировки, связанных с индексной инструкцией, как это делают другие запросы.</span><span class="sxs-lookup"><span data-stu-id="2ea7c-168">On multiprocessor computers that are running [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], index statements may use more processors to perform the scan and sort operations associated with the index statement just like other queries do.</span></span> <span data-ttu-id="2ea7c-169">Можно использовать параметр индекса MAXDOP с целью управления максимальным количеством процессоров, используемых для операции с индексами в сети.</span><span class="sxs-lookup"><span data-stu-id="2ea7c-169">You can use the MAXDOP index option to control the number of processors dedicated to the online index operation.</span></span> <span data-ttu-id="2ea7c-170">В этом случае можно распределить потребляемые операцией с индексом ресурсы таким образом, чтобы не пострадали одновременно работающие пользователи.</span><span class="sxs-lookup"><span data-stu-id="2ea7c-170">In this way, you can balance the resources that are used by index operation with those of the concurrent users.</span></span> <span data-ttu-id="2ea7c-171">Дополнительные сведения см. в статье [Настройка параллельных операций с индексами](configure-parallel-index-operations.md).</span><span class="sxs-lookup"><span data-stu-id="2ea7c-171">For more information, see [Configure Parallel Index Operations](configure-parallel-index-operations.md).</span></span> <span data-ttu-id="2ea7c-172">Дополнительные сведения о выпусках SQL Server, поддерживающих параллельные операции с индексами, см. [в разделе функции, поддерживаемые различными Выпусками SQL Server 2014](../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md).</span><span class="sxs-lookup"><span data-stu-id="2ea7c-172">For more information about the editions of SQL Server that support Parallel indexed operations, see [Features Supported by the Editions of SQL Server 2014](../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md).</span></span>  
  
 <span data-ttu-id="2ea7c-173">Поскольку на финальной фазе удерживаются блокировки S-lock и Sch-M, будьте внимательны при выполнении операций с индексами в сети внутри явно объявленных пользовательских транзакций (например: в блоке BEGIN TRANSACTION...COMMIT),</span><span class="sxs-lookup"><span data-stu-id="2ea7c-173">Because an S-lock or Sch-M lock is held in the final phase of the index operation, be careful when you run an online index operation inside an explicit user transaction, such as BEGIN TRANSACTION...COMMIT block.</span></span> <span data-ttu-id="2ea7c-174">поскольку в этом случае блокировка будет удерживаться до окончания транзакции, мешая одновременной работе пользователей.</span><span class="sxs-lookup"><span data-stu-id="2ea7c-174">Doing this causes the lock to be held until the end of the transaction, therefore impeding user concurrency.</span></span>  
  
 <span data-ttu-id="2ea7c-175">Перестроение индекса в сети может привести к увеличению фрагментации, когда оно выполняется с параметрами `MAX DOP > 1` и `ALLOW_PAGE_LOCKS = OFF` .</span><span class="sxs-lookup"><span data-stu-id="2ea7c-175">Online index rebuilding may increase fragmentation when it is allowed to run with `MAX DOP > 1` and `ALLOW_PAGE_LOCKS = OFF` options.</span></span> <span data-ttu-id="2ea7c-176">Дополнительные сведения см. в статье [Как это работает. Перестроение индекса в сети может привести к увеличению фрагментации](https://blogs.msdn.com/b/psssql/archive/2012/09/05/how-it-works-online-index-rebuild-can-cause-increased-fragmentation.aspx).</span><span class="sxs-lookup"><span data-stu-id="2ea7c-176">For more information, see [How It Works: Online Index Rebuild - Can Cause Increased Fragmentation](https://blogs.msdn.com/b/psssql/archive/2012/09/05/how-it-works-online-index-rebuild-can-cause-increased-fragmentation.aspx).</span></span>  
  
## <a name="transaction-log-considerations"></a><span data-ttu-id="2ea7c-177">Вопросы, касающиеся журнала транзакций</span><span class="sxs-lookup"><span data-stu-id="2ea7c-177">Transaction Log Considerations</span></span>  
 <span data-ttu-id="2ea7c-178">Масштабные операции с индексами, выполняемые в режиме в сети или вне сети, могут привести к формированию больших объемов данных, которые вызовут переполнение журнала транзакций.</span><span class="sxs-lookup"><span data-stu-id="2ea7c-178">Large-scale index operations, performed offline or online, can generate large data loads that can cause the transaction log to quickly fill.</span></span> <span data-ttu-id="2ea7c-179">Для гарантии возможности отката операций с индексами журнал транзакций не может быть усечен до завершения операции с индексом, однако может быть выполнено его резервное копирование.</span><span class="sxs-lookup"><span data-stu-id="2ea7c-179">To make sure that the index operation can be rolled back, the transaction log cannot be truncated until the index operation has been completed; however, the log can be backed up during the index operation.</span></span> <span data-ttu-id="2ea7c-180">Иными словами, журнал транзакций должен иметь достаточно места для сохранения и транзакции операции с индексом и текущих пользовательских транзакций на весь период выполнения операции с индексом.</span><span class="sxs-lookup"><span data-stu-id="2ea7c-180">Therefore, the transaction log must have sufficient space to store both the index operation transactions and any concurrent user transactions for the duration of the index operation.</span></span> <span data-ttu-id="2ea7c-181">Дополнительные сведения см. в статье [Transaction Log Disk Space for Index Operations](transaction-log-disk-space-for-index-operations.md).</span><span class="sxs-lookup"><span data-stu-id="2ea7c-181">For more information, see [Transaction Log Disk Space for Index Operations](transaction-log-disk-space-for-index-operations.md).</span></span>  
  
## <a name="related-content"></a><span data-ttu-id="2ea7c-182">См. также</span><span class="sxs-lookup"><span data-stu-id="2ea7c-182">Related Content</span></span>  
 [<span data-ttu-id="2ea7c-183">Об операциях с индексом в сети</span><span class="sxs-lookup"><span data-stu-id="2ea7c-183">How Online Index Operations Work</span></span>](how-online-index-operations-work.md)  
  
 [<span data-ttu-id="2ea7c-184">Выполнение операций с индексами в оперативном режиме</span><span class="sxs-lookup"><span data-stu-id="2ea7c-184">Perform Index Operations Online</span></span>](perform-index-operations-online.md)  
  
 [<span data-ttu-id="2ea7c-185">ALTER INDEX (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="2ea7c-185">ALTER INDEX &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/alter-index-transact-sql)  
  
 [<span data-ttu-id="2ea7c-186">CREATE INDEX &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="2ea7c-186">CREATE INDEX &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/create-index-transact-sql)  
  
  
