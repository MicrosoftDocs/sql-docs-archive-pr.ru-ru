---
title: Как работают операции с индексами | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: table-view-index
ms.topic: conceptual
helpviewer_keywords:
- online index operations
- source indexes [SQL Server]
- preexisting indexes [SQL Server]
- target indexes [SQL Server]
- temporary mapping index [SQL Server]
- index temporary mappings [SQL Server]
ms.assetid: eef0c9d1-790d-46e4-a758-d0bf6742e6ae
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 9b74690c9dfb980787087899200ffb45c2c4b6b6
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87668310"
---
# <a name="how-online-index-operations-work"></a><span data-ttu-id="5b957-102">Об операциях с индексом в сети</span><span class="sxs-lookup"><span data-stu-id="5b957-102">How Online Index Operations Work</span></span>
  <span data-ttu-id="5b957-103">В этом разделе описываются возникающие во время операции с индексами структуры в сети, а также работа служб, связанных с этими структурами.</span><span class="sxs-lookup"><span data-stu-id="5b957-103">This topic defines the structures that exist during an online index operation and shows the activities associated with these structures.</span></span>  
  
## <a name="online-index-structures"></a><span data-ttu-id="5b957-104">Структуры индексов в сети</span><span class="sxs-lookup"><span data-stu-id="5b957-104">Online Index Structures</span></span>  
 <span data-ttu-id="5b957-105">Для осуществления одновременной работы служб пользователей во время операций языка DDL необходимо во время операции с индексами в сети использовать следующие структуры: индекс источника и существующий индекс, индекс назначения, а для перестроения кучи или удаления кластеризованного индекса — временный индекс сопоставления.</span><span class="sxs-lookup"><span data-stu-id="5b957-105">To allow for concurrent user activity during an index data definition language (DDL) operation, the following structures are used during the online index operation: source and preexisting indexes, target, and for rebuilding a heap or dropping a clustered index online, a temporary mapping index.</span></span>  
  
-   <span data-ttu-id="5b957-106">**Исходные и существующие ранее индексы**</span><span class="sxs-lookup"><span data-stu-id="5b957-106">**Source and preexisting indexes**</span></span>  
  
     <span data-ttu-id="5b957-107">Источник — это исходная таблица или данные кластеризованного индекса.</span><span class="sxs-lookup"><span data-stu-id="5b957-107">The source is the original table or clustered index data.</span></span> <span data-ttu-id="5b957-108">Существующие ранее индексы — это любые некластеризованные индексы, связанные с исходной структурой.</span><span class="sxs-lookup"><span data-stu-id="5b957-108">Preexisting indexes are any nonclustered indexes that are associated with the source structure.</span></span> <span data-ttu-id="5b957-109">Например, если операция с индексами в сети перестраивает кластеризованный индекс, у которого есть четыре связанных кластеризованных индекса, то источником является существующий кластеризованный индекс, а существующими ранее индексами являются некластеризованные индексы.</span><span class="sxs-lookup"><span data-stu-id="5b957-109">For example, if the online index operation is rebuilding a clustered index that has four associated nonclustered indexes, the source is the existing clustered index and the preexisting indexes are the nonclustered indexes.</span></span>  
  
     <span data-ttu-id="5b957-110">Существующие ранее индексы доступны множеству пользователей для одновременных операций выборки, вставки, обновления или удаления.</span><span class="sxs-lookup"><span data-stu-id="5b957-110">The preexisting indexes are available to concurrent users for select, insert, update, and delete operations.</span></span> <span data-ttu-id="5b957-111">К ним относятся операции массовой вставки (поддерживаемые, но не рекомендуемые к использованию) и неявного обновления при помощи триггеров и ограничений ссылочной целостности.</span><span class="sxs-lookup"><span data-stu-id="5b957-111">This includes bulk inserts (supported but not recommended) and implicit updates by triggers and referential integrity constraints.</span></span> <span data-ttu-id="5b957-112">Все существующие ранее индексы доступны для запросов и операций поиска.</span><span class="sxs-lookup"><span data-stu-id="5b957-112">All preexisting indexes are available for queries and searches.</span></span> <span data-ttu-id="5b957-113">Из этого следует, что они могут быть выбраны оптимизатором запросов и в случае необходимости заданы в указаниях индекса.</span><span class="sxs-lookup"><span data-stu-id="5b957-113">This means they may be selected by the query optimizer and, if necessary, specified in index hints.</span></span>  
  
-   <span data-ttu-id="5b957-114">**Цель**</span><span class="sxs-lookup"><span data-stu-id="5b957-114">**Target**</span></span>  
  
     <span data-ttu-id="5b957-115">Назначение или назначения являются новым индексом (или кучей) или набором новых индексов, которые были либо созданы, либо перестроены.</span><span class="sxs-lookup"><span data-stu-id="5b957-115">The target or targets is the new index (or heap) or a set of new indexes that is being created or rebuilt.</span></span> <span data-ttu-id="5b957-116">Пользовательские операции вставки, обновления и удаления над источником применяются к назначению компонентом [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] во время операции с индексами.</span><span class="sxs-lookup"><span data-stu-id="5b957-116">User insert, update, and delete operations to the source are applied by the [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] to the target during the index operation.</span></span> <span data-ttu-id="5b957-117">Например, если операция с индексами в сети перестраивает кластеризованный индекс, то назначением является перестроенный кластеризованный индекс; компонент [!INCLUDE[ssDE](../../includes/ssde-md.md)] не перестраивает некластеризованные индексы при перестроении кластеризованного.</span><span class="sxs-lookup"><span data-stu-id="5b957-117">For example, if the online index operation is rebuilding a clustered index, the target is the rebuilt clustered index; the [!INCLUDE[ssDE](../../includes/ssde-md.md)] does not rebuild nonclustered indexes when a clustered index is rebuilt.</span></span>  
  
     <span data-ttu-id="5b957-118">При выполнении инструкции SELECT в индексе назначения не производится поиск до подтверждения операции с индексами.</span><span class="sxs-lookup"><span data-stu-id="5b957-118">The target index is not searched while processing SELECT statements until the index operation is committed.</span></span> <span data-ttu-id="5b957-119">Внутри системы индекс является доступным только для записи.</span><span class="sxs-lookup"><span data-stu-id="5b957-119">Internally, the index is marked as write-only.</span></span>  
  
-   <span data-ttu-id="5b957-120">**Временный индекс сопоставления**</span><span class="sxs-lookup"><span data-stu-id="5b957-120">**Temporary mapping index**</span></span>  
  
     <span data-ttu-id="5b957-121">Операциям с индексами в сети, создающим, удаляющим или перестраивающим кластеризованный индекс, необходим также временный индекс сопоставления.</span><span class="sxs-lookup"><span data-stu-id="5b957-121">Online index operations that create, drop, or rebuild a clustered index also require a temporary mapping index.</span></span> <span data-ttu-id="5b957-122">Этот временный индекс используется одновременно выполняемыми транзакциям для определения того, какие записи должны быть удалены во время перестроения новых индексов при удалении или обновлении строк в базовой таблице.</span><span class="sxs-lookup"><span data-stu-id="5b957-122">This temporary index is used by concurrent transactions to determine which records to delete in the new indexes that are being built when rows in the underlying table are updated or deleted.</span></span> <span data-ttu-id="5b957-123">Данный некластеризованный индекс создается на том же этапе, что и новый кластеризованный индекс (или куча) и для него не требуется отдельной операции сортировки.</span><span class="sxs-lookup"><span data-stu-id="5b957-123">This nonclustered index is created in the same step as the new clustered index (or heap) and does not require a separate sort operation.</span></span> <span data-ttu-id="5b957-124">Одновременно выполняемые транзакции поддерживают временный индекс сопоставления во всех операциях вставки, обновления или удаления.</span><span class="sxs-lookup"><span data-stu-id="5b957-124">Concurrent transactions also maintain the temporary mapping index in all their insert, update, and delete operations.</span></span>  
  
## <a name="online-index-activities"></a><span data-ttu-id="5b957-125">Работа служб в сети с использованием индексов</span><span class="sxs-lookup"><span data-stu-id="5b957-125">Online Index Activities</span></span>  
 <span data-ttu-id="5b957-126">Во время простой операции с индексами в сети, например во время создания кластеризованного индекса в неиндексированной таблице (куче), источник и назначение проходят три фазы: подготовка, сборка и завершение.</span><span class="sxs-lookup"><span data-stu-id="5b957-126">During a simple online index operation, such as creating a clustered index on a nonindexed table (heap), the source and target go through three phases: preparation, build, and final.</span></span>  
  
 <span data-ttu-id="5b957-127">На следующем рисунке показан процесс создания исходного кластеризованного индекса в сети.</span><span class="sxs-lookup"><span data-stu-id="5b957-127">The following illustration shows the process for creating an initial clustered index online.</span></span> <span data-ttu-id="5b957-128">Для исходного объекта (кучи) другие индексы не определены.</span><span class="sxs-lookup"><span data-stu-id="5b957-128">The source object (the heap) has no other indexes.</span></span> <span data-ttu-id="5b957-129">Работа служб со структурами источника и назначения показана для каждой фазы; также показаны одновременные пользовательские операции выборки, вставки, обновления или удаления.</span><span class="sxs-lookup"><span data-stu-id="5b957-129">The source and target structure activities are shown for each phase; concurrent user select, insert, update, and delete operations are also shown.</span></span> <span data-ttu-id="5b957-130">Фазы подготовки, сборки, и завершения отображаются вместе с режимами блокировки, используемыми для каждой фазы.</span><span class="sxs-lookup"><span data-stu-id="5b957-130">The preparation, build, and final phases are indicated together with the lock modes used in each phase.</span></span>  
  
 <span data-ttu-id="5b957-131">![Действия, выполняющиеся во время операции с индексами в сети](../../database-engine/media/online-index.gif "Действия, выполняющиеся во время операции с индексами в сети")</span><span class="sxs-lookup"><span data-stu-id="5b957-131">![Activities performed during online index operation](../../database-engine/media/online-index.gif "Activities performed during online index operation")</span></span>  
  
## <a name="source-structure-activities"></a><span data-ttu-id="5b957-132">Работа служб со структурами источника</span><span class="sxs-lookup"><span data-stu-id="5b957-132">Source Structure Activities</span></span>  
 <span data-ttu-id="5b957-133">В следующей таблице приведена работа служб со структурами источника во время каждой фазы операции с индексами, а также соответствующие стратегии блокировки.</span><span class="sxs-lookup"><span data-stu-id="5b957-133">The following table lists the activities involving the source structures during each phase of the index operation and the corresponding locking strategy.</span></span>  
  
|<span data-ttu-id="5b957-134">Этап</span><span class="sxs-lookup"><span data-stu-id="5b957-134">Phase</span></span>|<span data-ttu-id="5b957-135">Работа служб источника</span><span class="sxs-lookup"><span data-stu-id="5b957-135">Source activity</span></span>|<span data-ttu-id="5b957-136">Блокировки источника</span><span class="sxs-lookup"><span data-stu-id="5b957-136">Source locks</span></span>|  
|-----------|---------------------|------------------|  
|<span data-ttu-id="5b957-137">Подготовка</span><span class="sxs-lookup"><span data-stu-id="5b957-137">Preparation</span></span><br /><br /> <span data-ttu-id="5b957-138">Очень короткая фаза</span><span class="sxs-lookup"><span data-stu-id="5b957-138">Very short phase</span></span>|<span data-ttu-id="5b957-139">Подготовка системных метаданных для создания пустой структуры индекса.</span><span class="sxs-lookup"><span data-stu-id="5b957-139">System metadata preparation to create the new empty index structure.</span></span><br /><br /> <span data-ttu-id="5b957-140">Определяется моментальный снимок таблицы.</span><span class="sxs-lookup"><span data-stu-id="5b957-140">A snapshot of the table is defined.</span></span> <span data-ttu-id="5b957-141">То есть используется управление версиями строк для обеспечения согласованности считывания на уровне транзакций.</span><span class="sxs-lookup"><span data-stu-id="5b957-141">That is, row versioning is used to provide transaction-level read consistency.</span></span><br /><br /> <span data-ttu-id="5b957-142">Одновременные пользовательские операции записи на источник блокируются на очень короткий промежуток времени.</span><span class="sxs-lookup"><span data-stu-id="5b957-142">Concurrent user write operations on the source are blocked for a very short period.</span></span><br /><br /> <span data-ttu-id="5b957-143">Запрещаются все одновременные операции DDL, кроме операции создания множества некластеризованных индексов.</span><span class="sxs-lookup"><span data-stu-id="5b957-143">No concurrent DDL operations are allowed except creating multiple nonclustered indexes.</span></span>|<span data-ttu-id="5b957-144">S (совмещаемая) на таблицу\*</span><span class="sxs-lookup"><span data-stu-id="5b957-144">S (Shared) on the table\*</span></span><br /><br /> <span data-ttu-id="5b957-145">IS (с намерением совмещаемого доступа)</span><span class="sxs-lookup"><span data-stu-id="5b957-145">IS (Intent Shared)</span></span><br /><br /> <span data-ttu-id="5b957-146">INDEX_BUILD_INTERNAL_RESOURCE\*\*</span><span class="sxs-lookup"><span data-stu-id="5b957-146">INDEX_BUILD_INTERNAL_RESOURCE\*\*</span></span>|  
|<span data-ttu-id="5b957-147">Сборка</span><span class="sxs-lookup"><span data-stu-id="5b957-147">Build</span></span><br /><br /> <span data-ttu-id="5b957-148">Главная фаза</span><span class="sxs-lookup"><span data-stu-id="5b957-148">Main phase</span></span>|<span data-ttu-id="5b957-149">Данные просматриваются, сортируются, сливаются и вставляются в назначение во время операций массовой загрузки.</span><span class="sxs-lookup"><span data-stu-id="5b957-149">The data is scanned, sorted, merged, and inserted into the target in bulk load operations.</span></span><br /><br /> <span data-ttu-id="5b957-150">Одновременные пользовательские операции выборки, вставки, обновления и удаления применяются и к существовавшим ранее индексам и к новым создающимся индексам.</span><span class="sxs-lookup"><span data-stu-id="5b957-150">Concurrent user select, insert, update, and delete operations are applied to both the preexisting indexes and any new indexes being built.</span></span>|<span data-ttu-id="5b957-151">IS</span><span class="sxs-lookup"><span data-stu-id="5b957-151">IS</span></span><br /><br /> <span data-ttu-id="5b957-152">INDEX_BUILD_INTERNAL_RESOURCE\*\*</span><span class="sxs-lookup"><span data-stu-id="5b957-152">INDEX_BUILD_INTERNAL_RESOURCE\*\*</span></span>|  
|<span data-ttu-id="5b957-153">Завершение</span><span class="sxs-lookup"><span data-stu-id="5b957-153">Final</span></span><br /><br /> <span data-ttu-id="5b957-154">Очень короткая фаза</span><span class="sxs-lookup"><span data-stu-id="5b957-154">Very short phase</span></span>|<span data-ttu-id="5b957-155">Все незафиксированные транзакции обновления должны быть завершены до начала этой фазы.</span><span class="sxs-lookup"><span data-stu-id="5b957-155">All uncommitted update transactions must complete before this phase starts.</span></span> <span data-ttu-id="5b957-156">В зависимости от полученной блокировки все новые пользовательские транзакции записи или чтения блокируются на очень короткий промежуток времени до завершения этой фазы.</span><span class="sxs-lookup"><span data-stu-id="5b957-156">Depending on the acquired lock, all new user read or write transactions are blocked for a very short period until this phase is completed.</span></span><br /><br /> <span data-ttu-id="5b957-157">Системные метаданные обновляются для замены источника на назначение.</span><span class="sxs-lookup"><span data-stu-id="5b957-157">System metadata is updated to replace the source with the target.</span></span><br /><br /> <span data-ttu-id="5b957-158">При необходимости источник может быть удален.</span><span class="sxs-lookup"><span data-stu-id="5b957-158">The source is dropped if it is required.</span></span> <span data-ttu-id="5b957-159">Например, после перестроения или удаления кластеризованного индекса.</span><span class="sxs-lookup"><span data-stu-id="5b957-159">For example, after rebuilding or dropping a clustered index.</span></span>|<span data-ttu-id="5b957-160">INDEX_BUILD_INTERNAL_RESOURCE\*\*</span><span class="sxs-lookup"><span data-stu-id="5b957-160">INDEX_BUILD_INTERNAL_RESOURCE\*\*</span></span><br /><br /> <span data-ttu-id="5b957-161">S на таблицу в случае создания некластеризованного индекса.\*</span><span class="sxs-lookup"><span data-stu-id="5b957-161">S on the table if creating a nonclustered index.\*</span></span><br /><br /> <span data-ttu-id="5b957-162">SCH-M (изменение схемы) в случае удаления любой структуры источника (индекса или таблицы).\*</span><span class="sxs-lookup"><span data-stu-id="5b957-162">SCH-M (Schema Modification) if any source structure (index or table) is dropped.\*</span></span>|  
  
 <span data-ttu-id="5b957-163">\* Перед установкой блокировки S или SCH-M на таблицу выполняемая операция с индексами будет ждать завершения выполнения всех незафиксированных транзакций обновления.</span><span class="sxs-lookup"><span data-stu-id="5b957-163">\* The index operation will wait for any uncommitted update transactions to complete before acquiring the S lock or SCH-M lock on the table.</span></span>  
  
 <span data-ttu-id="5b957-164">\*\* Блокировка ресурса INDEX_BUILD_INTERNAL_RESOURCE предотвращает одновременное выполнение операций языка описания данных DDL в источнике и существовавших ранее структурах во время выполнения операции с индексами.</span><span class="sxs-lookup"><span data-stu-id="5b957-164">\*\* The resource lock INDEX_BUILD_INTERNAL_RESOURCE prevents the execution of concurrent data definition language (DDL) operations on the source and preexisting structures while the index operation is in progress.</span></span> <span data-ttu-id="5b957-165">Например, данная блокировка предотвращает одновременное перестроение двух индексов в одной таблице.</span><span class="sxs-lookup"><span data-stu-id="5b957-165">For example, this lock prevents concurrent rebuild of two indexes on the same table.</span></span> <span data-ttu-id="5b957-166">Хотя данная блокировка ресурса связана с блокировкой Sch-M, она не предотвращает выполнение инструкций по обработке данных.</span><span class="sxs-lookup"><span data-stu-id="5b957-166">Although this resource lock is associated with the Sch-M lock, it does not prevent data manipulation statements.</span></span>  
  
 <span data-ttu-id="5b957-167">В предыдущей таблице показана одна совмещаемая (S) блокировка, установленная во время фазы сборки операции с индексами в сети, включающей в себя один индекс.</span><span class="sxs-lookup"><span data-stu-id="5b957-167">The previous table shows a single Shared (S) lock acquired during the build phase of an online index operation that involves a single index.</span></span> <span data-ttu-id="5b957-168">При создании или перестроении кластеризованных и некластеризованных индексов в одной операции с индексами в сети (например во время создания исходного кластеризованного индекса в таблице, содержащей один или несколько некластеризованных индексов) во время фазы сборки создаются две краткосрочные совмещаемые (S) блокировки, а затем две долгосрочные блокировки с намерением совмещаемого доступа (IS).</span><span class="sxs-lookup"><span data-stu-id="5b957-168">When clustered and nonclustered indexes are built, or rebuilt, in a single online index operation (for example, during the initial clustered index creation on a table that contains one or more nonclustered indexes) two short-term S locks are acquired during the build phase followed by long-term Intent Shared (IS) locks.</span></span> <span data-ttu-id="5b957-169">Одна блокировка S сначала устанавливается во время создания кластеризованного индекса, а затем при завершении его создания, а вторая краткосрочная блокировка S устанавливается при создании некластеризованных индексов.</span><span class="sxs-lookup"><span data-stu-id="5b957-169">One S lock is acquired first for the clustered index creation and when creating the clustered index is completed, a second short-term S lock is acquired for creating the nonclustered indexes.</span></span> <span data-ttu-id="5b957-170">После создания некластеризованных индексов блокировка S снова сменяется блокировкой IS до начала фазы завершения операции с индексами в сети.</span><span class="sxs-lookup"><span data-stu-id="5b957-170">After the nonclustered indexes are created, the S lock is downgraded to an IS lock until the final phase of the online index operation.</span></span>  
  
### <a name="target-structure-activities"></a><span data-ttu-id="5b957-171">Работа служб со структурами назначения</span><span class="sxs-lookup"><span data-stu-id="5b957-171">Target Structure Activities</span></span>  
 <span data-ttu-id="5b957-172">В следующей таблице приведена работа служб со структурами назначения во время каждой фазы операции с индексами, а также соответствующие стратегии блокировки.</span><span class="sxs-lookup"><span data-stu-id="5b957-172">The following table lists the activities that involve the target structure during each phase of the index operation and the corresponding locking strategy.</span></span>  
  
|<span data-ttu-id="5b957-173">Этап</span><span class="sxs-lookup"><span data-stu-id="5b957-173">Phase</span></span>|<span data-ttu-id="5b957-174">Работа служб назначения</span><span class="sxs-lookup"><span data-stu-id="5b957-174">Target activity</span></span>|<span data-ttu-id="5b957-175">Блокировка назначения</span><span class="sxs-lookup"><span data-stu-id="5b957-175">Target locks</span></span>|  
|-----------|---------------------|------------------|  
|<span data-ttu-id="5b957-176">Подготовка</span><span class="sxs-lookup"><span data-stu-id="5b957-176">Preparation</span></span>|<span data-ttu-id="5b957-177">Создается новый индекс, доступный только для записи.</span><span class="sxs-lookup"><span data-stu-id="5b957-177">New index is created and set to write-only.</span></span>|<span data-ttu-id="5b957-178">IS</span><span class="sxs-lookup"><span data-stu-id="5b957-178">IS</span></span>|  
|<span data-ttu-id="5b957-179">Сборка</span><span class="sxs-lookup"><span data-stu-id="5b957-179">Build</span></span>|<span data-ttu-id="5b957-180">Вставляются данные из источника.</span><span class="sxs-lookup"><span data-stu-id="5b957-180">Data is inserted from source.</span></span><br /><br /> <span data-ttu-id="5b957-181">Применяются пользовательские изменения (вставки, обновления, удаления), уже выполненные на источнике.</span><span class="sxs-lookup"><span data-stu-id="5b957-181">User modifications (inserts, updates, deletes) applied to the source are applied.</span></span><br /><br /> <span data-ttu-id="5b957-182">Это действие прозрачно для пользователя.</span><span class="sxs-lookup"><span data-stu-id="5b957-182">This activity is transparent to the user.</span></span>|<span data-ttu-id="5b957-183">IS</span><span class="sxs-lookup"><span data-stu-id="5b957-183">IS</span></span>|  
|<span data-ttu-id="5b957-184">Завершение</span><span class="sxs-lookup"><span data-stu-id="5b957-184">Final</span></span>|<span data-ttu-id="5b957-185">Обновляются метаданные индекса.</span><span class="sxs-lookup"><span data-stu-id="5b957-185">Index metadata is updated.</span></span><br /><br /> <span data-ttu-id="5b957-186">Индекс переводится в состояние чтения/записи.</span><span class="sxs-lookup"><span data-stu-id="5b957-186">Index is set to read/write status.</span></span>|<span data-ttu-id="5b957-187">S</span><span class="sxs-lookup"><span data-stu-id="5b957-187">S</span></span><br /><br /> <span data-ttu-id="5b957-188">или диспетчер конфигурации служб</span><span class="sxs-lookup"><span data-stu-id="5b957-188">or</span></span><br /><br /> <span data-ttu-id="5b957-189">Блокировка SCH-M</span><span class="sxs-lookup"><span data-stu-id="5b957-189">SCH-M</span></span>|  
  
 <span data-ttu-id="5b957-190">До завершения операции с индексами назначение не доступно для инструкций SELECT, заданных пользователем.</span><span class="sxs-lookup"><span data-stu-id="5b957-190">The target is not accessed by SELECT statements issued by the user until the index operation is completed.</span></span>  
  
 <span data-ttu-id="5b957-191">После выполнения фаз подготовки и завершения хранящихся в кэше процедур планы запросов и обновлений становятся недействительными.</span><span class="sxs-lookup"><span data-stu-id="5b957-191">After the preparation and final phase is completed, the query and update plans that are stored in the procedure cache are invalidated.</span></span> <span data-ttu-id="5b957-192">В последующих запросах новый индекс будет использоваться.</span><span class="sxs-lookup"><span data-stu-id="5b957-192">Subsequent queries will use the new index.</span></span>  
  
 <span data-ttu-id="5b957-193">Время жизни заданного в таблице курсора, использующегося в операциях с индексами в сети, ограничено оперативными фазами индекса.</span><span class="sxs-lookup"><span data-stu-id="5b957-193">The lifetime of a cursor declared on a table that is involved in an online index operation is limited by the online index phases.</span></span> <span data-ttu-id="5b957-194">На каждой фазе курсоры обновления являются недействительными.</span><span class="sxs-lookup"><span data-stu-id="5b957-194">Update cursors are invalidated at each phase.</span></span> <span data-ttu-id="5b957-195">Доступные только для чтения курсоры становятся недействительными только после фазы завершения.</span><span class="sxs-lookup"><span data-stu-id="5b957-195">Read-only cursors are invalidated only after the final phase.</span></span>  
  
## <a name="related-content"></a><span data-ttu-id="5b957-196">См. также</span><span class="sxs-lookup"><span data-stu-id="5b957-196">Related Content</span></span>  
 [<span data-ttu-id="5b957-197">Выполнение операций с индексами в оперативном режиме</span><span class="sxs-lookup"><span data-stu-id="5b957-197">Perform Index Operations Online</span></span>](perform-index-operations-online.md)  
  
 [<span data-ttu-id="5b957-198">Рекомендации по операциям с индексами в оперативном режиме</span><span class="sxs-lookup"><span data-stu-id="5b957-198">Guidelines for Online Index Operations</span></span>](guidelines-for-online-index-operations.md)  
  
  
