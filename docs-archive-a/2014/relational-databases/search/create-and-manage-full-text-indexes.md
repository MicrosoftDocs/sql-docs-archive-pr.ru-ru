---
title: Создание полнотекстовых индексов и управление ими | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: search
ms.topic: conceptual
helpviewer_keywords:
- full-text indexes [SQL Server], about
ms.assetid: f8a98486-5438-44a8-b454-9e6ecbc74f83
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 603b5e6b929259dc8b1408c0c2a1afab383446e1
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87732537"
---
# <a name="create-and-manage-full-text-indexes"></a><span data-ttu-id="d6ed5-102">Создание и управление полнотекстовыми индексами</span><span class="sxs-lookup"><span data-stu-id="d6ed5-102">Create and Manage Full-Text Indexes</span></span>
  <span data-ttu-id="d6ed5-103">Данные полнотекстовых индексов используются средством полнотекстового поиска для компиляции полнотекстовых запросов, способных быстро находить таблицу с теми или иными словами или словосочетаниями.</span><span class="sxs-lookup"><span data-stu-id="d6ed5-103">The information in full-text indexes is used by the Full-Text Engine to compile full-text queries that can quickly search a table for particular words or combinations of words.</span></span> <span data-ttu-id="d6ed5-104">В полнотекстовом индексе хранятся данные о значимых для поиска словах и их расположении в одном или нескольких столбцах таблицы базы данных.</span><span class="sxs-lookup"><span data-stu-id="d6ed5-104">A full-text index stores information about significant words and their location within one or more columns of a database table.</span></span> <span data-ttu-id="d6ed5-105">Полнотекстовый индекс — это специальный тип функционального индекса на основе токенов, создаваемый и используемый средством полнотекстового поиска для [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d6ed5-105">A full-text index is a special type of token-based functional index that is built and maintained by the Full-Text Engine for [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="d6ed5-106">Процесс создания полнотекстового индекса отличается от создания индексов других типов.</span><span class="sxs-lookup"><span data-stu-id="d6ed5-106">The process of building a full-text index differs from building other types of indexes.</span></span> <span data-ttu-id="d6ed5-107">Вместо создания сбалансированного дерева на основе значения, хранящегося в конкретной строке, служба полнотекстового поиска создает инвертированную стековую сжатую структуру индекса на основе отдельных токенов индексируемого текста.</span><span class="sxs-lookup"><span data-stu-id="d6ed5-107">Instead of constructing a B-tree structure based on a value stored in a particular row, the Full-Text Engine builds an inverted, stacked, compressed index structure based on individual tokens from the text being indexed.</span></span>  <span data-ttu-id="d6ed5-108">Размер полнотекстового индекса ограничен только доступными ресурсами памяти компьютера, на котором запущен экземпляр [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="d6ed5-108">The size of a full-text index is limited only by the available memory resources of the computer on which the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] is running.</span></span>  
  
 <span data-ttu-id="d6ed5-109">Начиная с [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)]полнотекстовые индексы встроены в ядро СУБД, а не размещены в файловой системе, как в предыдущих версиях [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d6ed5-109">Beginning in [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)], the full-text indexes are integrated with the Database Engine, instead of residing in the file system as in previous versions of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="d6ed5-110">В новой базе данных полнотекстовый каталог является виртуальным объектом, не принадлежащим ни к одной файловой группе. Он является лишь логическим понятием, связанным с группой полнотекстовых индексов.</span><span class="sxs-lookup"><span data-stu-id="d6ed5-110">For a new database, the full-text catalog is now a virtual object that does not belong to any filegroup; it is merely a logical concept that refers to a group of the full-text indexes.</span></span> <span data-ttu-id="d6ed5-111">Однако обратите внимание, что при обновлении базы данных [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] (любого полнотекстового каталога с файлами данных) создается новая файловая группа. Дополнительные сведения см. в разделе [Обновление полнотекстового поиска](upgrade-full-text-search.md).</span><span class="sxs-lookup"><span data-stu-id="d6ed5-111">Note, however, that during upgrade of a [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] database, any full-text catalog that contains data files, a new filegroup is created; for more information, see [Upgrade Full-Text Search](upgrade-full-text-search.md).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="d6ed5-112">В [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] и более поздних версиях средство полнотекстового поиска находится в процессе [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , а не в отдельной службе.</span><span class="sxs-lookup"><span data-stu-id="d6ed5-112">In [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] and later versions, the Full-Text Engine resides in the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] process, rather than in a separate service.</span></span> <span data-ttu-id="d6ed5-113">Интеграция средства полнотекстового поиска в компонент Database Engine повышает управляемость, оптимизацию смешанных запросов и общую производительность.</span><span class="sxs-lookup"><span data-stu-id="d6ed5-113">Integrating the Full-Text Engine into the Database Engine improves full-text manageability, optimization of mixed query, and overall performance.</span></span>  
  
 <span data-ttu-id="d6ed5-114">На одну таблицу может приходиться только один полнотекстовый индекс.</span><span class="sxs-lookup"><span data-stu-id="d6ed5-114">Only one full-text index is allowed per table.</span></span> <span data-ttu-id="d6ed5-115">Чтобы в таблице можно было создать полнотекстовый индекс, она должна содержать один уникальный столбец, значением которого не является NULL.</span><span class="sxs-lookup"><span data-stu-id="d6ed5-115">For a full-text index to be created on a table, the table must have a single, unique nonnull column.</span></span> <span data-ttu-id="d6ed5-116">Можно создать полнотекстовый индекс на столбцах типа `char`, `varchar`, `nchar`, `nvarchar`, `text`, `ntext`, `image`, `xml`, `varbinary`, а также для полнотекстового поиска может индексироваться `varbinary(max)`.</span><span class="sxs-lookup"><span data-stu-id="d6ed5-116">You can build a full-text index on columns of type `char`, `varchar`, `nchar`, `nvarchar`, `text`, `ntext`, `image`, `xml`, `varbinary`, and `varbinary(max)` can be indexed for full-text search.</span></span> <span data-ttu-id="d6ed5-117">Для создания полнотекстового индекса на столбце, тип данных которого `varbinary`, `varbinary(max)`, `image` или `xml`, необходимо указать столбец типов.</span><span class="sxs-lookup"><span data-stu-id="d6ed5-117">Creating a full-text index on a column whose data type is  `varbinary`, `varbinary(max)`, `image`, or `xml` requires that you specify a type column.</span></span> <span data-ttu-id="d6ed5-118">*Столбец типов* — это столбец таблицы, в каждой строке которого хранятся расширения файлов (DOC, PDF, XLS и т. д.) документа.</span><span class="sxs-lookup"><span data-stu-id="d6ed5-118">A *type column* is a table column in which you store the file extension (.doc, .pdf, .xls, and so forth) of the document in each row.</span></span>  
  
 <span data-ttu-id="d6ed5-119">Процесс создания и сопровождения полнотекстового индекса называется *заполнением* (а также *сканированием*).</span><span class="sxs-lookup"><span data-stu-id="d6ed5-119">The process of creating and maintaining a full-text index is called a *population* (also known as a *crawl*).</span></span> <span data-ttu-id="d6ed5-120">Существует три типа заполнения полнотекстового индекса: полное заполнение, заполнение на основе отслеживания изменений и добавочное заполнение с использованием меток времени.</span><span class="sxs-lookup"><span data-stu-id="d6ed5-120">There are three types of full-text index population: full population, change tracking-based population, and incremental timestamp-based population.</span></span> <span data-ttu-id="d6ed5-121">Дополнительные сведения см. в разделе [Заполнение полнотекстовых индексов](populate-full-text-indexes.md).</span><span class="sxs-lookup"><span data-stu-id="d6ed5-121">For more information, see [Populate Full-Text Indexes](populate-full-text-indexes.md).</span></span>  
  
##  <a name="common-tasks"></a><a name="tasks"></a><span data-ttu-id="d6ed5-122">Общие задачи</span><span class="sxs-lookup"><span data-stu-id="d6ed5-122">Common Tasks</span></span>  
 <span data-ttu-id="d6ed5-123">**Создание полнотекстового индекса**</span><span class="sxs-lookup"><span data-stu-id="d6ed5-123">**To create a full-text index**</span></span>  
  
-   [<span data-ttu-id="d6ed5-124">CREATE FULLTEXT INDEX (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="d6ed5-124">CREATE FULLTEXT INDEX &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/create-fulltext-index-transact-sql)  
  
 <span data-ttu-id="d6ed5-125">**Изменение полнотекстового индекса**</span><span class="sxs-lookup"><span data-stu-id="d6ed5-125">**To alter a full-text index**</span></span>  
  
-   [<span data-ttu-id="d6ed5-126">ALTER FULLTEXT INDEX (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="d6ed5-126">ALTER FULLTEXT INDEX &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/alter-fulltext-index-transact-sql)  
  
 <span data-ttu-id="d6ed5-127">**Удаление полнотекстового индекса**</span><span class="sxs-lookup"><span data-stu-id="d6ed5-127">**To drop a full-text index**</span></span>  
  
-   [<span data-ttu-id="d6ed5-128">DROP FULLTEXT INDEX (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="d6ed5-128">DROP FULLTEXT INDEX &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/drop-fulltext-index-transact-sql)  
  
 [<span data-ttu-id="d6ed5-129">В этом разделе</span><span class="sxs-lookup"><span data-stu-id="d6ed5-129">In This Topic</span></span>](#top)  
  
##  <a name="full-text-index-structure"></a><a name="structure"></a><span data-ttu-id="d6ed5-130">Структура полнотекстового индекса</span><span class="sxs-lookup"><span data-stu-id="d6ed5-130">Full-Text Index Structure</span></span>  
 <span data-ttu-id="d6ed5-131">Чтобы понять, как работает средство полнотекстового поиска, необходимо разобраться в структуре полнотекстового индекса.</span><span class="sxs-lookup"><span data-stu-id="d6ed5-131">A good understanding of the structure of a full-text index will help you understand how the Full-Text Engine works.</span></span> <span data-ttu-id="d6ed5-132">В данном разделе в качестве примера таблицы используется следующий фрагмент таблицы **Document** в [!INCLUDE[ssSampleDBCoShort](../../includes/sssampledbcoshort-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="d6ed5-132">This topic uses the following excerpt of the **Document** table in [!INCLUDE[ssSampleDBCoShort](../../includes/sssampledbcoshort-md.md)] as an example table.</span></span> <span data-ttu-id="d6ed5-133">В данном фрагменте показываются только два столбца: **DocumentID** и **Title** , а также три строки из таблицы.</span><span class="sxs-lookup"><span data-stu-id="d6ed5-133">This excerpt shows only two columns, the **DocumentID** column and the **Title** column, and three rows from the table.</span></span>  
  
 <span data-ttu-id="d6ed5-134">В этом примере подразумевается, что полнотекстовый индекс был создан по столбцу **Title** .</span><span class="sxs-lookup"><span data-stu-id="d6ed5-134">For this example, we will assume that a full-text index has been created on the **Title** column.</span></span>  
  
|<span data-ttu-id="d6ed5-135">DocumentID</span><span class="sxs-lookup"><span data-stu-id="d6ed5-135">DocumentID</span></span>|<span data-ttu-id="d6ed5-136">Title</span><span class="sxs-lookup"><span data-stu-id="d6ed5-136">Title</span></span>|  
|----------------|-----------|  
|<span data-ttu-id="d6ed5-137">1</span><span class="sxs-lookup"><span data-stu-id="d6ed5-137">1</span></span>|<span data-ttu-id="d6ed5-138">Crank Arm and Tire Maintenance</span><span class="sxs-lookup"><span data-stu-id="d6ed5-138">Crank Arm and Tire Maintenance</span></span>|  
|<span data-ttu-id="d6ed5-139">2</span><span class="sxs-lookup"><span data-stu-id="d6ed5-139">2</span></span>|<span data-ttu-id="d6ed5-140">Front Reflector Bracket and Reflector Assembly 3</span><span class="sxs-lookup"><span data-stu-id="d6ed5-140">Front Reflector Bracket and Reflector Assembly 3</span></span>|  
|<span data-ttu-id="d6ed5-141">3</span><span class="sxs-lookup"><span data-stu-id="d6ed5-141">3</span></span>|<span data-ttu-id="d6ed5-142">Front Reflector Bracket Installation</span><span class="sxs-lookup"><span data-stu-id="d6ed5-142">Front Reflector Bracket Installation</span></span>|  
  
 <span data-ttu-id="d6ed5-143">Например, в следующей таблице, в которой приведен фрагмент 1, показано содержимое полнотекстового индекса, созданного по столбцу **Title** таблицы **Document** .</span><span class="sxs-lookup"><span data-stu-id="d6ed5-143">For example, the following table, which shows Fragment 1, depicts the contents of the full-text index created on the **Title** column of the **Document** table.</span></span> <span data-ttu-id="d6ed5-144">Полнотекстовые индексы содержат больше данных, чем представлено в этой таблице.</span><span class="sxs-lookup"><span data-stu-id="d6ed5-144">Full-text indexes contain more information than is presented in this table.</span></span> <span data-ttu-id="d6ed5-145">Таблица является логическим представлением полнотекстового индекса, она предоставляется только с целью демонстрации.</span><span class="sxs-lookup"><span data-stu-id="d6ed5-145">The table is a logical representation of a full-text index and is provided for demonstration purposes only.</span></span> <span data-ttu-id="d6ed5-146">Строки хранятся в сжатом формате для оптимизации использования диска.</span><span class="sxs-lookup"><span data-stu-id="d6ed5-146">The rows are stored in a compressed format to optimize disk usage.</span></span>  
  
 <span data-ttu-id="d6ed5-147">Обратите внимание, что данные были инвертированы по сравнению с оригинальными документами.</span><span class="sxs-lookup"><span data-stu-id="d6ed5-147">Notice that the data has been inverted from the original documents.</span></span> <span data-ttu-id="d6ed5-148">Инверсия происходит, поскольку ключевые слова сопоставлены с идентификаторами документов.</span><span class="sxs-lookup"><span data-stu-id="d6ed5-148">Inversion occurs because the keywords are mapped to the document IDs.</span></span> <span data-ttu-id="d6ed5-149">По этой причине полнотекстовый индекс часто называют инвертированным индексом.</span><span class="sxs-lookup"><span data-stu-id="d6ed5-149">For this reason, a full-text index is often referred to as an inverted index.</span></span>  
  
 <span data-ttu-id="d6ed5-150">Обратите также внимание, что ключевое слово «and» было удалено из полнотекстового индекса.</span><span class="sxs-lookup"><span data-stu-id="d6ed5-150">Also notice that the keyword "and" has been removed from the full-text index.</span></span> <span data-ttu-id="d6ed5-151">Это было сделано, поскольку «and» является стоп-словом. Удаление стоп-слов из полнотекстового индекса может привести к значительной экономии дискового пространства, тем самым увеличивая производительность запросов.</span><span class="sxs-lookup"><span data-stu-id="d6ed5-151">This is done because "and" is a stopword, and removing stopwords from a full-text index can lead to substantial savings in disk space thereby improving query performance.</span></span> <span data-ttu-id="d6ed5-152">Дополнительные сведения о стоп-словах см. в разделе [Настройка и управление стоп-словами и списками стоп-слов для полнотекстового поиска](configure-and-manage-stopwords-and-stoplists-for-full-text-search.md).</span><span class="sxs-lookup"><span data-stu-id="d6ed5-152">For more information about stopwords, see [Configure and Manage Stopwords and Stoplists for Full-Text Search](configure-and-manage-stopwords-and-stoplists-for-full-text-search.md).</span></span>  
  
 <span data-ttu-id="d6ed5-153">**Фрагмент 1**</span><span class="sxs-lookup"><span data-stu-id="d6ed5-153">**Fragment 1**</span></span>  
  
|<span data-ttu-id="d6ed5-154">Ключевое слово</span><span class="sxs-lookup"><span data-stu-id="d6ed5-154">Keyword</span></span>|<span data-ttu-id="d6ed5-155">ColId</span><span class="sxs-lookup"><span data-stu-id="d6ed5-155">ColId</span></span>|<span data-ttu-id="d6ed5-156">DocId</span><span class="sxs-lookup"><span data-stu-id="d6ed5-156">DocId</span></span>|<span data-ttu-id="d6ed5-157">Наличие</span><span class="sxs-lookup"><span data-stu-id="d6ed5-157">Occurrence</span></span>|  
|-------------|-----------|-----------|----------------|  
|<span data-ttu-id="d6ed5-158">Crank</span><span class="sxs-lookup"><span data-stu-id="d6ed5-158">Crank</span></span>|<span data-ttu-id="d6ed5-159">1</span><span class="sxs-lookup"><span data-stu-id="d6ed5-159">1</span></span>|<span data-ttu-id="d6ed5-160">1</span><span class="sxs-lookup"><span data-stu-id="d6ed5-160">1</span></span>|<span data-ttu-id="d6ed5-161">1</span><span class="sxs-lookup"><span data-stu-id="d6ed5-161">1</span></span>|  
|<span data-ttu-id="d6ed5-162">Arm</span><span class="sxs-lookup"><span data-stu-id="d6ed5-162">Arm</span></span>|<span data-ttu-id="d6ed5-163">1</span><span class="sxs-lookup"><span data-stu-id="d6ed5-163">1</span></span>|<span data-ttu-id="d6ed5-164">1</span><span class="sxs-lookup"><span data-stu-id="d6ed5-164">1</span></span>|<span data-ttu-id="d6ed5-165">2</span><span class="sxs-lookup"><span data-stu-id="d6ed5-165">2</span></span>|  
|<span data-ttu-id="d6ed5-166">Tire</span><span class="sxs-lookup"><span data-stu-id="d6ed5-166">Tire</span></span>|<span data-ttu-id="d6ed5-167">1</span><span class="sxs-lookup"><span data-stu-id="d6ed5-167">1</span></span>|<span data-ttu-id="d6ed5-168">1</span><span class="sxs-lookup"><span data-stu-id="d6ed5-168">1</span></span>|<span data-ttu-id="d6ed5-169">4</span><span class="sxs-lookup"><span data-stu-id="d6ed5-169">4</span></span>|  
|<span data-ttu-id="d6ed5-170">Обслуживание</span><span class="sxs-lookup"><span data-stu-id="d6ed5-170">Maintenance</span></span>|<span data-ttu-id="d6ed5-171">1</span><span class="sxs-lookup"><span data-stu-id="d6ed5-171">1</span></span>|<span data-ttu-id="d6ed5-172">1</span><span class="sxs-lookup"><span data-stu-id="d6ed5-172">1</span></span>|<span data-ttu-id="d6ed5-173">5</span><span class="sxs-lookup"><span data-stu-id="d6ed5-173">5</span></span>|  
|<span data-ttu-id="d6ed5-174">Front</span><span class="sxs-lookup"><span data-stu-id="d6ed5-174">Front</span></span>|<span data-ttu-id="d6ed5-175">1</span><span class="sxs-lookup"><span data-stu-id="d6ed5-175">1</span></span>|<span data-ttu-id="d6ed5-176">2</span><span class="sxs-lookup"><span data-stu-id="d6ed5-176">2</span></span>|<span data-ttu-id="d6ed5-177">1</span><span class="sxs-lookup"><span data-stu-id="d6ed5-177">1</span></span>|  
|<span data-ttu-id="d6ed5-178">Front</span><span class="sxs-lookup"><span data-stu-id="d6ed5-178">Front</span></span>|<span data-ttu-id="d6ed5-179">1</span><span class="sxs-lookup"><span data-stu-id="d6ed5-179">1</span></span>|<span data-ttu-id="d6ed5-180">3</span><span class="sxs-lookup"><span data-stu-id="d6ed5-180">3</span></span>|<span data-ttu-id="d6ed5-181">1</span><span class="sxs-lookup"><span data-stu-id="d6ed5-181">1</span></span>|  
|<span data-ttu-id="d6ed5-182">Reflector</span><span class="sxs-lookup"><span data-stu-id="d6ed5-182">Reflector</span></span>|<span data-ttu-id="d6ed5-183">1</span><span class="sxs-lookup"><span data-stu-id="d6ed5-183">1</span></span>|<span data-ttu-id="d6ed5-184">2</span><span class="sxs-lookup"><span data-stu-id="d6ed5-184">2</span></span>|<span data-ttu-id="d6ed5-185">2</span><span class="sxs-lookup"><span data-stu-id="d6ed5-185">2</span></span>|  
|<span data-ttu-id="d6ed5-186">Reflector</span><span class="sxs-lookup"><span data-stu-id="d6ed5-186">Reflector</span></span>|<span data-ttu-id="d6ed5-187">1</span><span class="sxs-lookup"><span data-stu-id="d6ed5-187">1</span></span>|<span data-ttu-id="d6ed5-188">2</span><span class="sxs-lookup"><span data-stu-id="d6ed5-188">2</span></span>|<span data-ttu-id="d6ed5-189">5</span><span class="sxs-lookup"><span data-stu-id="d6ed5-189">5</span></span>|  
|<span data-ttu-id="d6ed5-190">Reflector</span><span class="sxs-lookup"><span data-stu-id="d6ed5-190">Reflector</span></span>|<span data-ttu-id="d6ed5-191">1</span><span class="sxs-lookup"><span data-stu-id="d6ed5-191">1</span></span>|<span data-ttu-id="d6ed5-192">3</span><span class="sxs-lookup"><span data-stu-id="d6ed5-192">3</span></span>|<span data-ttu-id="d6ed5-193">2</span><span class="sxs-lookup"><span data-stu-id="d6ed5-193">2</span></span>|  
|<span data-ttu-id="d6ed5-194">Bracket</span><span class="sxs-lookup"><span data-stu-id="d6ed5-194">Bracket</span></span>|<span data-ttu-id="d6ed5-195">1</span><span class="sxs-lookup"><span data-stu-id="d6ed5-195">1</span></span>|<span data-ttu-id="d6ed5-196">2</span><span class="sxs-lookup"><span data-stu-id="d6ed5-196">2</span></span>|<span data-ttu-id="d6ed5-197">3</span><span class="sxs-lookup"><span data-stu-id="d6ed5-197">3</span></span>|  
|<span data-ttu-id="d6ed5-198">Bracket</span><span class="sxs-lookup"><span data-stu-id="d6ed5-198">Bracket</span></span>|<span data-ttu-id="d6ed5-199">1</span><span class="sxs-lookup"><span data-stu-id="d6ed5-199">1</span></span>|<span data-ttu-id="d6ed5-200">3</span><span class="sxs-lookup"><span data-stu-id="d6ed5-200">3</span></span>|<span data-ttu-id="d6ed5-201">3</span><span class="sxs-lookup"><span data-stu-id="d6ed5-201">3</span></span>|  
|<span data-ttu-id="d6ed5-202">Сборка</span><span class="sxs-lookup"><span data-stu-id="d6ed5-202">Assembly</span></span>|<span data-ttu-id="d6ed5-203">1</span><span class="sxs-lookup"><span data-stu-id="d6ed5-203">1</span></span>|<span data-ttu-id="d6ed5-204">2</span><span class="sxs-lookup"><span data-stu-id="d6ed5-204">2</span></span>|<span data-ttu-id="d6ed5-205">6</span><span class="sxs-lookup"><span data-stu-id="d6ed5-205">6</span></span>|  
|<span data-ttu-id="d6ed5-206">3</span><span class="sxs-lookup"><span data-stu-id="d6ed5-206">3</span></span>|<span data-ttu-id="d6ed5-207">1</span><span class="sxs-lookup"><span data-stu-id="d6ed5-207">1</span></span>|<span data-ttu-id="d6ed5-208">2</span><span class="sxs-lookup"><span data-stu-id="d6ed5-208">2</span></span>|<span data-ttu-id="d6ed5-209">7</span><span class="sxs-lookup"><span data-stu-id="d6ed5-209">7</span></span>|  
|<span data-ttu-id="d6ed5-210">Установка</span><span class="sxs-lookup"><span data-stu-id="d6ed5-210">Installation</span></span>|<span data-ttu-id="d6ed5-211">1</span><span class="sxs-lookup"><span data-stu-id="d6ed5-211">1</span></span>|<span data-ttu-id="d6ed5-212">3</span><span class="sxs-lookup"><span data-stu-id="d6ed5-212">3</span></span>|<span data-ttu-id="d6ed5-213">4</span><span class="sxs-lookup"><span data-stu-id="d6ed5-213">4</span></span>|  
  
 <span data-ttu-id="d6ed5-214">Столбец **Keyword** содержит представление одного токена, извлеченного при индексировании.</span><span class="sxs-lookup"><span data-stu-id="d6ed5-214">The **Keyword** column contains a representation of a single token extracted at indexing time.</span></span> <span data-ttu-id="d6ed5-215">Токены определяются средствами разбиения по словам.</span><span class="sxs-lookup"><span data-stu-id="d6ed5-215">Word breakers determine what makes up a token.</span></span>  
  
 <span data-ttu-id="d6ed5-216">Столбец **ColId** содержит значение, соответствующее столбцу, по которому выполняется полнотекстовое индексирование.</span><span class="sxs-lookup"><span data-stu-id="d6ed5-216">The **ColId** column contains a value that corresponds to a particular column that is full-text indexed.</span></span>  
  
 <span data-ttu-id="d6ed5-217">`DocId`Столбец содержит значения для 8-байтового целого числа, сопоставляемого с определенным значением полнотекстового ключа в таблице с полнотекстовым индексом.</span><span class="sxs-lookup"><span data-stu-id="d6ed5-217">The `DocId` column contains values for an eight-byte integer that maps to a particular full-text key value in a full-text indexed table.</span></span> <span data-ttu-id="d6ed5-218">Данное поведение необходимо, если полнотекстовый ключ имеет тип данных, отличный от целого.</span><span class="sxs-lookup"><span data-stu-id="d6ed5-218">This mapping is necessary when the full-text key is not an integer data type.</span></span> <span data-ttu-id="d6ed5-219">В таких случаях сопоставления между значениями полнотекстовых ключей и `DocId` значениями сохраняются в отдельной таблице, именуемой таблицей сопоставления DocId.</span><span class="sxs-lookup"><span data-stu-id="d6ed5-219">In such cases, mappings between full-text key values and `DocId` values are maintained in a separate table called the DocId Mapping table.</span></span> <span data-ttu-id="d6ed5-220">Для создания запросов к этим сопоставлениям следует использовать системную хранимую процедуру [sp_fulltext_keymappings](/sql/relational-databases/system-stored-procedures/sp-fulltext-keymappings-transact-sql) .</span><span class="sxs-lookup"><span data-stu-id="d6ed5-220">To query for these mappings use the [sp_fulltext_keymappings](/sql/relational-databases/system-stored-procedures/sp-fulltext-keymappings-transact-sql) system stored procedure.</span></span> <span data-ttu-id="d6ed5-221">Для удовлетворения условия поиска необходимо соединить значения DocId из приведенной выше таблицы с таблицей сопоставления DocId. Это позволит возвращать строки из запрашиваемой базовой таблицы.</span><span class="sxs-lookup"><span data-stu-id="d6ed5-221">To satisfy a search condition, DocId values from the above table need to be joined with the DocId Mapping table to retrieve rows from the base table being queried.</span></span> <span data-ttu-id="d6ed5-222">Если значение полнотекстового ключа из базовой таблицы имеет целочисленный тип, то само значение служит в качестве значения DocId и дополнительного сопоставления не требуется.</span><span class="sxs-lookup"><span data-stu-id="d6ed5-222">If the full-text key value of the base table is an integer type, the value directly serves as the DocId and no mapping is necessary.</span></span> <span data-ttu-id="d6ed5-223">Следовательно, использование целочисленных значений полнотекстового ключа может оптимизировать выполнение полнотекстовых запросов.</span><span class="sxs-lookup"><span data-stu-id="d6ed5-223">Therefore, using integer full-text key values can help optimize full-text queries.</span></span>  
  
 <span data-ttu-id="d6ed5-224">Столбец **Occurrence** содержит целочисленное значение.</span><span class="sxs-lookup"><span data-stu-id="d6ed5-224">The **Occurrence** column contains an integer value.</span></span> <span data-ttu-id="d6ed5-225">Каждому значению DocId соответствует список значений частотности, которые соответствуют относительным смещениям слов для определенного ключевого слова в документе с этим значением DocId.</span><span class="sxs-lookup"><span data-stu-id="d6ed5-225">For each DocId value, there is a list of occurrence values that correspond to the relative word offsets of the particular keyword within that DocId.</span></span> <span data-ttu-id="d6ed5-226">С помощью значений частотности удобно определять фразовое или близкое совпадение; например, для фраз значения частотности находятся рядом.</span><span class="sxs-lookup"><span data-stu-id="d6ed5-226">Occurrence values are useful in determining phrase or proximity matches, for example, phrases have numerically adjacent occurrence values.</span></span> <span data-ttu-id="d6ed5-227">Кроме того, их удобно использовать при вычислении коэффициента релевантности. Например, они дают возможность подсчитать частоту употребления ключевого слова в документе DocId.</span><span class="sxs-lookup"><span data-stu-id="d6ed5-227">They are also useful in computing relevance scores; for example, the number of occurrences of a keyword in a DocId may be used in scoring.</span></span>  
  
 [<span data-ttu-id="d6ed5-228">В этом разделе</span><span class="sxs-lookup"><span data-stu-id="d6ed5-228">In This Topic</span></span>](#top)  
  
##  <a name="full-text-index-fragments"></a><a name="fragments"></a><span data-ttu-id="d6ed5-229">Фрагменты полнотекстового индекса</span><span class="sxs-lookup"><span data-stu-id="d6ed5-229">Full-Text Index Fragments</span></span>  
 <span data-ttu-id="d6ed5-230">Логический полнотекстовый индекс обычно разбивается по нескольким внутренним таблицам.</span><span class="sxs-lookup"><span data-stu-id="d6ed5-230">The logical full-text index is usually split across multiple internal tables.</span></span> <span data-ttu-id="d6ed5-231">Каждая из внутренних таблиц называется фрагментом полнотекстового индекса.</span><span class="sxs-lookup"><span data-stu-id="d6ed5-231">Each internal table is called a full-text index fragment.</span></span> <span data-ttu-id="d6ed5-232">Некоторые из данных фрагментов могут содержать более свежие данные.</span><span class="sxs-lookup"><span data-stu-id="d6ed5-232">Some of these fragments might contain newer data than others.</span></span> <span data-ttu-id="d6ed5-233">Например, если пользователь обновляет следующую строку с DocId, равным 3, а в таблице выполняется автоматическое отслеживание изменений, то будет создан новый фрагмент.</span><span class="sxs-lookup"><span data-stu-id="d6ed5-233">For example, if a user updates the following row whose DocId is 3 and the table is auto change-tracked, a new fragment is created.</span></span>  
  
|<span data-ttu-id="d6ed5-234">DocumentID</span><span class="sxs-lookup"><span data-stu-id="d6ed5-234">DocumentID</span></span>|<span data-ttu-id="d6ed5-235">Title</span><span class="sxs-lookup"><span data-stu-id="d6ed5-235">Title</span></span>|  
|----------------|-----------|  
|<span data-ttu-id="d6ed5-236">3</span><span class="sxs-lookup"><span data-stu-id="d6ed5-236">3</span></span>|<span data-ttu-id="d6ed5-237">Rear Reflector</span><span class="sxs-lookup"><span data-stu-id="d6ed5-237">Rear Reflector</span></span>|  
  
 <span data-ttu-id="d6ed5-238">В следующем примере, в котором показан фрагмент 2, содержатся более новые данные о DocId 3, чем во фрагменте 1.</span><span class="sxs-lookup"><span data-stu-id="d6ed5-238">In the following example, which shows Fragment 2, the fragment contains newer data about DocId 3 compared to Fragment 1.</span></span> <span data-ttu-id="d6ed5-239">Следовательно, если пользователь запрашивает «задний отражатель», то для DocId 3 будут использованы данные из фрагмента 2.</span><span class="sxs-lookup"><span data-stu-id="d6ed5-239">Therefore, when the user queries for "Rear Reflector" the data from Fragment 2 is used for DocId 3.</span></span> <span data-ttu-id="d6ed5-240">Каждый из фрагментов имеет отметку времени создания, которую можно использовать в запросах с помощью представления каталога [sys.fulltext_index_fragments](/sql/relational-databases/system-catalog-views/sys-fulltext-index-fragments-transact-sql) .</span><span class="sxs-lookup"><span data-stu-id="d6ed5-240">Each fragment is marked with a creation timestamp that can be queried by using the [sys.fulltext_index_fragments](/sql/relational-databases/system-catalog-views/sys-fulltext-index-fragments-transact-sql) catalog view.</span></span>  
  
 <span data-ttu-id="d6ed5-241">**Фрагмент 2**</span><span class="sxs-lookup"><span data-stu-id="d6ed5-241">**Fragment 2**</span></span>  
  
|<span data-ttu-id="d6ed5-242">Ключевое слово</span><span class="sxs-lookup"><span data-stu-id="d6ed5-242">Keyword</span></span>|<span data-ttu-id="d6ed5-243">ColId</span><span class="sxs-lookup"><span data-stu-id="d6ed5-243">ColId</span></span>|<span data-ttu-id="d6ed5-244">DocId</span><span class="sxs-lookup"><span data-stu-id="d6ed5-244">DocId</span></span>|<span data-ttu-id="d6ed5-245">Occ</span><span class="sxs-lookup"><span data-stu-id="d6ed5-245">Occ</span></span>|  
|-------------|-----------|-----------|---------|  
|<span data-ttu-id="d6ed5-246">Rear</span><span class="sxs-lookup"><span data-stu-id="d6ed5-246">Rear</span></span>|<span data-ttu-id="d6ed5-247">1</span><span class="sxs-lookup"><span data-stu-id="d6ed5-247">1</span></span>|<span data-ttu-id="d6ed5-248">3</span><span class="sxs-lookup"><span data-stu-id="d6ed5-248">3</span></span>|<span data-ttu-id="d6ed5-249">1</span><span class="sxs-lookup"><span data-stu-id="d6ed5-249">1</span></span>|  
|<span data-ttu-id="d6ed5-250">Reflector</span><span class="sxs-lookup"><span data-stu-id="d6ed5-250">Reflector</span></span>|<span data-ttu-id="d6ed5-251">1</span><span class="sxs-lookup"><span data-stu-id="d6ed5-251">1</span></span>|<span data-ttu-id="d6ed5-252">3</span><span class="sxs-lookup"><span data-stu-id="d6ed5-252">3</span></span>|<span data-ttu-id="d6ed5-253">2</span><span class="sxs-lookup"><span data-stu-id="d6ed5-253">2</span></span>|  
  
 <span data-ttu-id="d6ed5-254">Как можно увидеть во фрагменте 2, полнотекстовым запросам необходимо осуществить внутреннее обращение к каждому фрагменту. Более старые записи не учитываются.</span><span class="sxs-lookup"><span data-stu-id="d6ed5-254">As can be seen from Fragment 2, full-text queries need to query each fragment internally and discard older entries.</span></span> <span data-ttu-id="d6ed5-255">Следовательно, наличие слишком большого количества полнотекстовых фрагментов индекса в полнотекстовом индексе может привести к существенному уменьшению производительности запросов.</span><span class="sxs-lookup"><span data-stu-id="d6ed5-255">Therefore, too many full-text index fragments in the full-text index can lead to substantial degradation in query performance.</span></span> <span data-ttu-id="d6ed5-256">Для уменьшения количества фрагментов выполните переорганизацию полнотекстового каталога, используя параметр REORGANIZE инструкции [ALTER FULLTEXT CATALOG](/sql/t-sql/statements/alter-fulltext-catalog-transact-sql)[!INCLUDE[tsql](../../includes/tsql-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="d6ed5-256">To reduce the number of fragments, reorganize the fulltext catalog by using the REORGANIZE option of the [ALTER FULLTEXT CATALOG](/sql/t-sql/statements/alter-fulltext-catalog-transact-sql)[!INCLUDE[tsql](../../includes/tsql-md.md)] statement.</span></span> <span data-ttu-id="d6ed5-257">Данная инструкция выполняет *слияние в единый файл*, объединяя все фрагменты в единый большой фрагмент, и удаляет все устаревшие записи из полнотекстового индекса.</span><span class="sxs-lookup"><span data-stu-id="d6ed5-257">This statement performs a *master merge*, which merges the fragments into a single larger fragment and removes all obsolete entries from the full-text index.</span></span>  
  
 <span data-ttu-id="d6ed5-258">После выполнения реорганизации в образце индекса будут содержаться следующие строки.</span><span class="sxs-lookup"><span data-stu-id="d6ed5-258">After being reorganized, the example index would contain the following rows:</span></span>  
  
|<span data-ttu-id="d6ed5-259">Ключевое слово</span><span class="sxs-lookup"><span data-stu-id="d6ed5-259">Keyword</span></span>|<span data-ttu-id="d6ed5-260">ColId</span><span class="sxs-lookup"><span data-stu-id="d6ed5-260">ColId</span></span>|<span data-ttu-id="d6ed5-261">DocId</span><span class="sxs-lookup"><span data-stu-id="d6ed5-261">DocId</span></span>|<span data-ttu-id="d6ed5-262">Occ</span><span class="sxs-lookup"><span data-stu-id="d6ed5-262">Occ</span></span>|  
|-------------|-----------|-----------|---------|  
|<span data-ttu-id="d6ed5-263">Crank</span><span class="sxs-lookup"><span data-stu-id="d6ed5-263">Crank</span></span>|<span data-ttu-id="d6ed5-264">1</span><span class="sxs-lookup"><span data-stu-id="d6ed5-264">1</span></span>|<span data-ttu-id="d6ed5-265">1</span><span class="sxs-lookup"><span data-stu-id="d6ed5-265">1</span></span>|<span data-ttu-id="d6ed5-266">1</span><span class="sxs-lookup"><span data-stu-id="d6ed5-266">1</span></span>|  
|<span data-ttu-id="d6ed5-267">Arm</span><span class="sxs-lookup"><span data-stu-id="d6ed5-267">Arm</span></span>|<span data-ttu-id="d6ed5-268">1</span><span class="sxs-lookup"><span data-stu-id="d6ed5-268">1</span></span>|<span data-ttu-id="d6ed5-269">1</span><span class="sxs-lookup"><span data-stu-id="d6ed5-269">1</span></span>|<span data-ttu-id="d6ed5-270">2</span><span class="sxs-lookup"><span data-stu-id="d6ed5-270">2</span></span>|  
|<span data-ttu-id="d6ed5-271">Tire</span><span class="sxs-lookup"><span data-stu-id="d6ed5-271">Tire</span></span>|<span data-ttu-id="d6ed5-272">1</span><span class="sxs-lookup"><span data-stu-id="d6ed5-272">1</span></span>|<span data-ttu-id="d6ed5-273">1</span><span class="sxs-lookup"><span data-stu-id="d6ed5-273">1</span></span>|<span data-ttu-id="d6ed5-274">4</span><span class="sxs-lookup"><span data-stu-id="d6ed5-274">4</span></span>|  
|<span data-ttu-id="d6ed5-275">Обслуживание</span><span class="sxs-lookup"><span data-stu-id="d6ed5-275">Maintenance</span></span>|<span data-ttu-id="d6ed5-276">1</span><span class="sxs-lookup"><span data-stu-id="d6ed5-276">1</span></span>|<span data-ttu-id="d6ed5-277">1</span><span class="sxs-lookup"><span data-stu-id="d6ed5-277">1</span></span>|<span data-ttu-id="d6ed5-278">5</span><span class="sxs-lookup"><span data-stu-id="d6ed5-278">5</span></span>|  
|<span data-ttu-id="d6ed5-279">Front</span><span class="sxs-lookup"><span data-stu-id="d6ed5-279">Front</span></span>|<span data-ttu-id="d6ed5-280">1</span><span class="sxs-lookup"><span data-stu-id="d6ed5-280">1</span></span>|<span data-ttu-id="d6ed5-281">2</span><span class="sxs-lookup"><span data-stu-id="d6ed5-281">2</span></span>|<span data-ttu-id="d6ed5-282">1</span><span class="sxs-lookup"><span data-stu-id="d6ed5-282">1</span></span>|  
|<span data-ttu-id="d6ed5-283">Rear</span><span class="sxs-lookup"><span data-stu-id="d6ed5-283">Rear</span></span>|<span data-ttu-id="d6ed5-284">1</span><span class="sxs-lookup"><span data-stu-id="d6ed5-284">1</span></span>|<span data-ttu-id="d6ed5-285">3</span><span class="sxs-lookup"><span data-stu-id="d6ed5-285">3</span></span>|<span data-ttu-id="d6ed5-286">1</span><span class="sxs-lookup"><span data-stu-id="d6ed5-286">1</span></span>|  
|<span data-ttu-id="d6ed5-287">Reflector</span><span class="sxs-lookup"><span data-stu-id="d6ed5-287">Reflector</span></span>|<span data-ttu-id="d6ed5-288">1</span><span class="sxs-lookup"><span data-stu-id="d6ed5-288">1</span></span>|<span data-ttu-id="d6ed5-289">2</span><span class="sxs-lookup"><span data-stu-id="d6ed5-289">2</span></span>|<span data-ttu-id="d6ed5-290">2</span><span class="sxs-lookup"><span data-stu-id="d6ed5-290">2</span></span>|  
|<span data-ttu-id="d6ed5-291">Reflector</span><span class="sxs-lookup"><span data-stu-id="d6ed5-291">Reflector</span></span>|<span data-ttu-id="d6ed5-292">1</span><span class="sxs-lookup"><span data-stu-id="d6ed5-292">1</span></span>|<span data-ttu-id="d6ed5-293">2</span><span class="sxs-lookup"><span data-stu-id="d6ed5-293">2</span></span>|<span data-ttu-id="d6ed5-294">5</span><span class="sxs-lookup"><span data-stu-id="d6ed5-294">5</span></span>|  
|<span data-ttu-id="d6ed5-295">Reflector</span><span class="sxs-lookup"><span data-stu-id="d6ed5-295">Reflector</span></span>|<span data-ttu-id="d6ed5-296">1</span><span class="sxs-lookup"><span data-stu-id="d6ed5-296">1</span></span>|<span data-ttu-id="d6ed5-297">3</span><span class="sxs-lookup"><span data-stu-id="d6ed5-297">3</span></span>|<span data-ttu-id="d6ed5-298">2</span><span class="sxs-lookup"><span data-stu-id="d6ed5-298">2</span></span>|  
|<span data-ttu-id="d6ed5-299">Bracket</span><span class="sxs-lookup"><span data-stu-id="d6ed5-299">Bracket</span></span>|<span data-ttu-id="d6ed5-300">1</span><span class="sxs-lookup"><span data-stu-id="d6ed5-300">1</span></span>|<span data-ttu-id="d6ed5-301">2</span><span class="sxs-lookup"><span data-stu-id="d6ed5-301">2</span></span>|<span data-ttu-id="d6ed5-302">3</span><span class="sxs-lookup"><span data-stu-id="d6ed5-302">3</span></span>|  
|<span data-ttu-id="d6ed5-303">Сборка</span><span class="sxs-lookup"><span data-stu-id="d6ed5-303">Assembly</span></span>|<span data-ttu-id="d6ed5-304">1</span><span class="sxs-lookup"><span data-stu-id="d6ed5-304">1</span></span>|<span data-ttu-id="d6ed5-305">2</span><span class="sxs-lookup"><span data-stu-id="d6ed5-305">2</span></span>|<span data-ttu-id="d6ed5-306">6</span><span class="sxs-lookup"><span data-stu-id="d6ed5-306">6</span></span>|  
|<span data-ttu-id="d6ed5-307">3</span><span class="sxs-lookup"><span data-stu-id="d6ed5-307">3</span></span>|<span data-ttu-id="d6ed5-308">1</span><span class="sxs-lookup"><span data-stu-id="d6ed5-308">1</span></span>|<span data-ttu-id="d6ed5-309">2</span><span class="sxs-lookup"><span data-stu-id="d6ed5-309">2</span></span>|<span data-ttu-id="d6ed5-310">7</span><span class="sxs-lookup"><span data-stu-id="d6ed5-310">7</span></span>|  
  
 [<span data-ttu-id="d6ed5-311">В этом разделе</span><span class="sxs-lookup"><span data-stu-id="d6ed5-311">In This Topic</span></span>](#top)  
  
  
