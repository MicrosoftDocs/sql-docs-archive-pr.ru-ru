---
title: Обновление полнотекстового поиска | Документация Майкрософт
ms.custom: ''
ms.date: 03/08/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: search
ms.topic: conceptual
helpviewer_keywords:
- full-text search [SQL Server], installing
- migrating full-text indexes [SQL Server]
- upgrading Full-Text Search
- installing Full-Text Search
- full-text search [SQL Server], upgrading
ms.assetid: 2fee4691-f2b5-472f-8ccc-fa625b654520
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: d2bdf0bdee452101bbafb8108426faf6604e7626
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87666477"
---
# <a name="upgrade-full-text-search"></a><span data-ttu-id="94314-102">Обновление полнотекстового поиска</span><span class="sxs-lookup"><span data-stu-id="94314-102">Upgrade Full-Text Search</span></span>
  <span data-ttu-id="94314-103">Обновление полнотекстового поиска с переходом к версии [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] выполняется во время установки, а также во время присоединения, восстановления или копирования файлов баз данных или полнотекстовых каталогов из более ранней версии до [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] с помощью мастера копирования баз данных.</span><span class="sxs-lookup"><span data-stu-id="94314-103">Upgrading full-text search to [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] is done during setup and when database files and full-text catalogs from the earlier version of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] are attached, restored, or copied using the Copy Database Wizard.</span></span>  
  
 <span data-ttu-id="94314-104">В данном разделе рассматриваются следующие аспекты обновления полнотекстового поиска:</span><span class="sxs-lookup"><span data-stu-id="94314-104">This topic discusses the following aspects of upgrading full-text search:</span></span>  
  
-   [<span data-ttu-id="94314-105">Обновление экземпляра сервера</span><span class="sxs-lookup"><span data-stu-id="94314-105">Upgrading a Server Instance</span></span>](#Upgrade_Server)  
  
-   [<span data-ttu-id="94314-106">Параметры полнотекстового обновления</span><span class="sxs-lookup"><span data-stu-id="94314-106">Full-Text Upgrade Options</span></span>](#FT_Upgrade_Options)  
  
-   [<span data-ttu-id="94314-107">Замечания по выбору режима полнотекстового обновления</span><span class="sxs-lookup"><span data-stu-id="94314-107">Considerations for Choosing a Full-Text Upgrade Option</span></span>](#Choosing_Upgade_Option)  
  
-   [<span data-ttu-id="94314-108">Миграция полнотекстовых индексов при обновлении базы данных до версии SQL Server 2014</span><span class="sxs-lookup"><span data-stu-id="94314-108">Migrating Full-Text Indexes When Upgrading a Database to SQL Server 2014</span></span>](#Upgrade_Db)  
  
-   [<span data-ttu-id="94314-109">Замечания по восстановлению полнотекстового каталога SQL Server 2005 в SQL Server 2014</span><span class="sxs-lookup"><span data-stu-id="94314-109">Considerations for Restoring a SQL Server 2005 Full-Text Catalog to SQL Server 2014</span></span>](#Considerations_for_Restore)  
  
-   [<span data-ttu-id="94314-110">Присоединение базы данных SQL Server 2005 к SQL Server 2014</span><span class="sxs-lookup"><span data-stu-id="94314-110">Attaching a SQL Server 2005 database to SQL Server 2014</span></span>](#Attaching_2005_ft_catalogs)  
  
##  <a name="upgrading-a-server-instance"></a><a name="Upgrade_Server"></a><span data-ttu-id="94314-111">Обновление экземпляра сервера</span><span class="sxs-lookup"><span data-stu-id="94314-111">Upgrading a Server Instance</span></span>  
 <span data-ttu-id="94314-112">Для обновления на месте экземпляр [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] устанавливается параллельно с более старой версией [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], после чего выполняется перенесение данных.</span><span class="sxs-lookup"><span data-stu-id="94314-112">For an in-place upgrade, an instance of [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] is set up side-by-side with the old version of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], and data is migrated.</span></span> <span data-ttu-id="94314-113">Если в старой версии [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] установлен компонент Full-Text Search, его новая версия устанавливается автоматически.</span><span class="sxs-lookup"><span data-stu-id="94314-113">If the old version of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] had full-text search installed, a new version of full-text search is automatically installed.</span></span> <span data-ttu-id="94314-114">Параллельная установка означает, что каждый из следующих компонентов работает на уровне экземпляра [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="94314-114">Side-by-side install means that each of the following components exists at the instance-level of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>  
  
 <span data-ttu-id="94314-115">Средства разбиения по словам, парадигматические модули и фильтры</span><span class="sxs-lookup"><span data-stu-id="94314-115">Word breakers, stemmers, and filters</span></span>  
 <span data-ttu-id="94314-116">Теперь каждый экземпляр SQL Server использует отдельный комплект средств разбиения по словам, парадигматические модули и фильтры, а не те версии этих компонентов, которые предоставляет операционная система.</span><span class="sxs-lookup"><span data-stu-id="94314-116">Each instance now uses its own set of word breakers, stemmers, and filters, rather than relying on the operating system version of these components.</span></span> <span data-ttu-id="94314-117">Более того, это облегчает регистрацию и конфигурацию этих компонентов.</span><span class="sxs-lookup"><span data-stu-id="94314-117">These components are also easier to register and configure at a per-instance level.</span></span> <span data-ttu-id="94314-118">Дополнительные сведения см. в разделах [Настройка и управление средством разбиения на слова и парадигматические модули для поиска](configure-and-manage-word-breakers-and-stemmers-for-search.md) и [Настройка и управление фильтрами для поиска](configure-and-manage-filters-for-search.md).</span><span class="sxs-lookup"><span data-stu-id="94314-118">For more information, see [Configure and Manage Word Breakers and Stemmers for Search](configure-and-manage-word-breakers-and-stemmers-for-search.md) and [Configure and Manage Filters for Search](configure-and-manage-filters-for-search.md).</span></span>  
  
 <span data-ttu-id="94314-119">Узел управляющей программы фильтрации</span><span class="sxs-lookup"><span data-stu-id="94314-119">Filter daemon host</span></span>  
 <span data-ttu-id="94314-120">Узлы управляющей программы полнотекстовой фильтрации — это процессы, которые безопасно загружают внешние расширяемые компоненты индексов и запросов (например: средства разбиения по словам, парадигматические модули и фильтры), и позволяют использовать их, не нарушая целостности средства полнотекстового поиска.</span><span class="sxs-lookup"><span data-stu-id="94314-120">The full-text filter daemon hosts are processes that safely load and drive extensible external components used for index and query, such as word breakers, stemmers, and filters, without compromising the integrity of the Full-Text Engine.</span></span> <span data-ttu-id="94314-121">Экземпляр сервера использует многопоточный процесс для всех многопоточных фильтров и однопоточный процесс для однопоточных фильтров.</span><span class="sxs-lookup"><span data-stu-id="94314-121">A server instance uses a multithreaded process for all multithreaded filters and a single-threaded process for all single-threaded filters.</span></span>  
  
> [!NOTE]  
>  [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] <span data-ttu-id="94314-122">была введена учетная запись службы для службы FDHOST Launcher (MSSQLFDLauncher).</span><span class="sxs-lookup"><span data-stu-id="94314-122">introduced a service account for the FDHOST Launcher service (MSSQLFDLauncher).</span></span> <span data-ttu-id="94314-123">Данная служба распространяет сведения учетной записи службы среди узлов управляющей программы фильтрации определенного экземпляра [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="94314-123">This service propagates the service account information to the filter daemon host processes of a specific instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="94314-124">Сведения о настройке учетной записи службы см. в разделе [Настройка учетной записи службы средства запуска управляющей программы полнотекстовой фильтрации](set-the-service-account-for-the-full-text-filter-daemon-launcher.md).</span><span class="sxs-lookup"><span data-stu-id="94314-124">For information about setting the service account, see [Set the Service Account for the Full-text Filter Daemon Launcher](set-the-service-account-for-the-full-text-filter-daemon-launcher.md).</span></span>  
  
 <span data-ttu-id="94314-125">В службах [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)]все полнотекстовые индексы располагались в полнотекстовых каталогах, принадлежащих файловой группе, имели физический путь и обрабатывались как файлы базы данных.</span><span class="sxs-lookup"><span data-stu-id="94314-125">In [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)], each full-text index resides in a full-text catalog that belongs to a filegroup, has a physical path, and is treated as a database file.</span></span> <span data-ttu-id="94314-126">В [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] и более поздних версиях полнотекстовый каталог представляет собой логический или виртуальный объект, содержащий группу полнотекстовых индексов.</span><span class="sxs-lookup"><span data-stu-id="94314-126">In [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] and later versions, a full-text catalog is a logical or virtual object that contains a group of full-text indexes.</span></span> <span data-ttu-id="94314-127">В связи с этим новые полнотекстовые каталоги не обрабатываются как файлы базы данных с физическим путем.</span><span class="sxs-lookup"><span data-stu-id="94314-127">Therefore, a new full-text catalog is not treated as a database file with a physical path.</span></span> <span data-ttu-id="94314-128">Однако при обновлении любого полнотекстового каталога, содержащего файлы данных, новая файловая группа создается на том же диске.</span><span class="sxs-lookup"><span data-stu-id="94314-128">However, during upgrade of any full-text catalog that contains data files, a new filegroup is created on same disk.</span></span> <span data-ttu-id="94314-129">Это обеспечивает соблюдение старого поведения дискового ввода-вывода после обновления.</span><span class="sxs-lookup"><span data-stu-id="94314-129">This maintains the old disk I/O behavior after upgrade.</span></span> <span data-ttu-id="94314-130">Если существует корневой путь, то любой полнотекстовый индекс размещается в новой файловой группе.</span><span class="sxs-lookup"><span data-stu-id="94314-130">Any full-text index from that catalog is placed in the new filegroup if the root path exists.</span></span> <span data-ttu-id="94314-131">Если старый путь полнотекстового каталога недействителен, то обновление будет хранить полнотекстовый индекс в той же файловой группе, в которой хранится базовая таблица, либо, в случае с секционированной таблицей, в первичной файловой группе.</span><span class="sxs-lookup"><span data-stu-id="94314-131">If the old full-text catalog path is invalid, the upgrade keeps the full-text index in the same filegroup as the base table or, for a partitioned table, in the primary filegroup.</span></span>  
  
> [!NOTE]  
>  [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)]<span data-ttu-id="94314-132">[!INCLUDE[tsql](../../includes/tsql-md.md)]Инструкции DDL, указывающие полнотекстовые каталоги, продолжают работать правильно.</span><span class="sxs-lookup"><span data-stu-id="94314-132">[!INCLUDE[tsql](../../includes/tsql-md.md)] DDL statements that specify full-text catalogs continue to work correctly.</span></span>  
  
##  <a name="full-text-upgrade-options"></a><a name="FT_Upgrade_Options"></a><span data-ttu-id="94314-133">Параметры полнотекстового обновления</span><span class="sxs-lookup"><span data-stu-id="94314-133">Full-Text Upgrade Options</span></span>  
 <span data-ttu-id="94314-134">При обновлении экземпляра сервера до версии [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]пользовательский интерфейс позволяет выбрать один из следующих режимов обновления полнотекстовых функций.</span><span class="sxs-lookup"><span data-stu-id="94314-134">When upgrading a server instance to [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], the user interface allows you to choose one of the following full-text upgrade options.</span></span>  
  
 <span data-ttu-id="94314-135">Импорт</span><span class="sxs-lookup"><span data-stu-id="94314-135">Import</span></span>  
 <span data-ttu-id="94314-136">Полнотекстовые индексы импортируются.</span><span class="sxs-lookup"><span data-stu-id="94314-136">Full-text catalogs are imported.</span></span> <span data-ttu-id="94314-137">Обычно импорт производится значительно быстрее перестроения.</span><span class="sxs-lookup"><span data-stu-id="94314-137">Typically, import is significantly faster than rebuild.</span></span> <span data-ttu-id="94314-138">Например, если используется только один ЦП, то импорт выполняется в 10 раз быстрее, чем перестроение.</span><span class="sxs-lookup"><span data-stu-id="94314-138">For example, when using only one CPU, import runs about 10 times faster than rebuild.</span></span> <span data-ttu-id="94314-139">Однако импортированный полнотекстовый каталог не использует новые средства разбиения по словам, установленные в последней версии [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="94314-139">However, an imported full-text catalog does not use the new word breakers installed with the latest version of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="94314-140">Для обеспечения согласованности результатов запроса необходимо перестроить полнотекстовые каталоги повторно.</span><span class="sxs-lookup"><span data-stu-id="94314-140">To ensure consistency in query results, full-text catalogs have to be rebuilt.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="94314-141">Перестроение может выполняться в многопоточном режиме; если доступно более 10 процессоров, то перестроение может выполниться быстрее импорта, если будет разрешено использовать все процессоры.</span><span class="sxs-lookup"><span data-stu-id="94314-141">Rebuild can run in multi-threaded mode, and if more than 10 CPUs are available, rebuild might run faster than import if you allow rebuild to use all of the CPUs.</span></span>  
  
 <span data-ttu-id="94314-142">Если полнотекстовый каталог недоступен, перестраиваются связанные полнотекстовые индексы.</span><span class="sxs-lookup"><span data-stu-id="94314-142">If a full-text catalog is not available, the associated full-text indexes are rebuilt.</span></span> <span data-ttu-id="94314-143">Этот параметр доступен только для баз данных [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="94314-143">This option is available for only [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] databases.</span></span>  
  
 <span data-ttu-id="94314-144">Дополнительные сведения о влиянии импорта полнотекстового индекса см. в подразделе «Замечания по выбору режима полнотекстового обновления» далее в этом разделе.</span><span class="sxs-lookup"><span data-stu-id="94314-144">For information about the impact of importing full-text index, see "Considerations for Choosing a Full-Text Upgrade Option," later in this topic.</span></span>  
  
 <span data-ttu-id="94314-145">Перестроение</span><span class="sxs-lookup"><span data-stu-id="94314-145">Rebuild</span></span>  
 <span data-ttu-id="94314-146">Полнотекстовые каталоги перестраиваются с помощью новых и улучшенных средств разбиения по словам.</span><span class="sxs-lookup"><span data-stu-id="94314-146">Full-text catalogs are rebuilt using the new and enhanced word breakers.</span></span> <span data-ttu-id="94314-147">Перестроение индексов может занять длительное время, а после обновления может потребоваться значительный объем ресурсов ЦП и памяти.</span><span class="sxs-lookup"><span data-stu-id="94314-147">Rebuilding indexes can take a while, and a significant amount of CPU and memory might be required after the upgrade.</span></span>  
  
 <span data-ttu-id="94314-148">Reset</span><span class="sxs-lookup"><span data-stu-id="94314-148">Reset</span></span>  
 <span data-ttu-id="94314-149">Полнотекстовые каталоги сбрасываются.</span><span class="sxs-lookup"><span data-stu-id="94314-149">Full-text catalogs are reset.</span></span> <span data-ttu-id="94314-150">При обновлении с [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)]файлы полнотекстового каталога удаляются, но метаданные для полнотекстовых каталогов и полнотекстовых индексов сохраняются.</span><span class="sxs-lookup"><span data-stu-id="94314-150">When upgrading from [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)], full-text catalog files are removed, but the metadata for full-text catalogs and full-text indexes is retained.</span></span> <span data-ttu-id="94314-151">После обновления для всех полнотекстовых индексов отключается отслеживание изменений и сканирование не запускается автоматически.</span><span class="sxs-lookup"><span data-stu-id="94314-151">After being upgraded, all full-text indexes are disabled for change tracking and crawls are not started automatically.</span></span> <span data-ttu-id="94314-152">После завершения обновления каталог останется пустым, пока не будет вручную запущено полное заполнение.</span><span class="sxs-lookup"><span data-stu-id="94314-152">The catalog will remain empty until you manually issue a full population, after the upgrade completes.</span></span>  
  
##  <a name="considerations-for-choosing-a-full-text-upgrade-option"></a><a name="Choosing_Upgade_Option"></a><span data-ttu-id="94314-153">Рекомендации по выбору режима полнотекстового обновления</span><span class="sxs-lookup"><span data-stu-id="94314-153">Considerations for Choosing a Full-Text Upgrade Option</span></span>  
 <span data-ttu-id="94314-154">При выборе режима обновления необходимо учитывать следующие соображения.</span><span class="sxs-lookup"><span data-stu-id="94314-154">When choosing the upgrade option for your upgrade, consider the following:</span></span>  
  
-   <span data-ttu-id="94314-155">Требуется ли согласованность в результатах запроса?</span><span class="sxs-lookup"><span data-stu-id="94314-155">Do you require consistency in query results?</span></span>  
  
     [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] <span data-ttu-id="94314-156">устанавливает новые средства разбиения по словам, используемые компонентами полнотекстового и семантического поиска.</span><span class="sxs-lookup"><span data-stu-id="94314-156">installs new word breakers for use by Full-Text and Semantic Search.</span></span> <span data-ttu-id="94314-157">Средства разбиения по словам используются как во время индексирования, так и при выполнении запросов.</span><span class="sxs-lookup"><span data-stu-id="94314-157">The word breakers are used both at indexing time and at query time.</span></span> <span data-ttu-id="94314-158">Если не выполнить перепостроение полнотекстовых каталогов, результаты поиска могут быть несогласованными.</span><span class="sxs-lookup"><span data-stu-id="94314-158">If you do not rebuild the full-text catalogs, your search results may be inconsistent.</span></span> <span data-ttu-id="94314-159">Полнотекстовый запрос, выполняющий поиск фразы, которая в предыдущей версии [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] была разбита средством разбиения по словам не так, как это сделано текущим средством разбиения по словам, может не обнаружить документ или строку, содержащую эту фразу.</span><span class="sxs-lookup"><span data-stu-id="94314-159">If you issue a full-text query that looks for a phrase that is broken differently by the word breaker in a previous version of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] and the current word breaker, a document or row containing the phrase might not be retrieved.</span></span> <span data-ttu-id="94314-160">Это связано с тем, что индексированные фразы были разбиты с помощью логики, которая не соответствует логике, используемой в запросе.</span><span class="sxs-lookup"><span data-stu-id="94314-160">This is because the indexed phrases were broken using different logic than the query is using.</span></span> <span data-ttu-id="94314-161">Решение заключается в том, чтобы заполнить полнотекстовые каталоги повторно (перестроить их) с помощью новых средств разбиения по словам, чтобы при индексировании и выполнении запросов использовалась одинаковая логика.</span><span class="sxs-lookup"><span data-stu-id="94314-161">The solution is to repopulate (rebuild) the full-text catalogs with the new word breakers so that index time and query time behavior are identical.</span></span> <span data-ttu-id="94314-162">Для реализации данного решения можно выбрать параметр перестроения или выполнить перестроения вручную после выбора параметра импорта.</span><span class="sxs-lookup"><span data-stu-id="94314-162">You can choose the Rebuild option to accomplish this, or you can rebuild manually after choosing the Import option.</span></span>  
  
-   <span data-ttu-id="94314-163">Были ли полнотекстовые индексы построены в целочисленных столбцах полнотекстовых ключей?</span><span class="sxs-lookup"><span data-stu-id="94314-163">Were any full-text indexes built on integer full-text key columns?</span></span>  
  
     <span data-ttu-id="94314-164">Перестроение выполняет внутренние оптимизации, которые в некоторых случаях могут увеличить производительность запросов обновленных полнотекстовых индексов.</span><span class="sxs-lookup"><span data-stu-id="94314-164">Rebuilding performs internal optimizations that improve the query performance of the upgraded full-text index in some cases.</span></span> <span data-ttu-id="94314-165">В частности, если в полнотекстовых каталогах пользователя содержатся полнотекстовые индексы, у которых полнотекстовый ключевой столбец базовой таблицы имеет тип данных integer, то при перестроении достигается идеальная производительность полнотекстовых запросов.</span><span class="sxs-lookup"><span data-stu-id="94314-165">Specifically, if you have full-text catalogs that contain full-text indexes for which the full-text key column of the base table is an integer data type, rebuilding achieves ideal performance of full-text queries after upgrade.</span></span> <span data-ttu-id="94314-166">В данном случае рекомендуется использовать параметр **Перестроение** .</span><span class="sxs-lookup"><span data-stu-id="94314-166">In this case, we highly recommend you to use the **Rebuild** option.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="94314-167">Применительно к полнотекстовым индексам в [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]рекомендуется, чтобы столбец, который служит полнотекстовым ключом, имел тип данных integer.</span><span class="sxs-lookup"><span data-stu-id="94314-167">For full-text indexes in [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], we recommend that the column serving as the full-text key be an integer data type.</span></span> <span data-ttu-id="94314-168">Дополнительные сведения см. в разделе [Улучшение производительности полнотекстовых индексов](improve-the-performance-of-full-text-indexes.md).</span><span class="sxs-lookup"><span data-stu-id="94314-168">For more information, see [Improve the Performance of Full-Text Indexes](improve-the-performance-of-full-text-indexes.md).</span></span>  
  
-   <span data-ttu-id="94314-169">Насколько важно перевести сервер в режим «в сети»?</span><span class="sxs-lookup"><span data-stu-id="94314-169">What is the priority for getting your server instance online?</span></span>  
  
     <span data-ttu-id="94314-170">Импорт или перестроение отнимает много ресурсов процессора, что задерживает обновление остальных частей экземпляра сервера и перевод его в режим «в сети».</span><span class="sxs-lookup"><span data-stu-id="94314-170">Importing or rebuilding during upgrade takes a lot of CPU resources, which delays getting the rest of the server instance upgraded and online.</span></span> <span data-ttu-id="94314-171">Если важно перевести экземпляр сервера в режим «в сети» как можно скорее, а пользователь способен выполнить после обновления заполнение вручную, то целесообразно будет использовать режим **Сброс** .</span><span class="sxs-lookup"><span data-stu-id="94314-171">If getting the server instance online as soon as possible is important and if you are willing to run a manual population after the upgrade, **Reset** is suitable.</span></span>  
  
## <a name="ensuring-consistent-query-results-after-importing-a-sql-server-2005-full-text-index"></a><span data-ttu-id="94314-172">Обеспечение согласованности результатов запроса после импорта полнотекстового индекса SQL Server 2005</span><span class="sxs-lookup"><span data-stu-id="94314-172">Ensuring Consistent Query Results after Importing a SQL Server 2005 Full-Text Index</span></span>  
 <span data-ttu-id="94314-173">Если полнотекстовый каталог был импортирован в процессе обновления базы данных [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] до [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], то возможно возникновение несоответствий между содержимым запроса и полнотекстового индекса. Это вызывается небольшой разницей в поведении между новыми и старыми средствами разбиения по словам.</span><span class="sxs-lookup"><span data-stu-id="94314-173">If a full-text catalog was imported when upgrading a [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] database to [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], mismatches between the query and the full-text index content might occur because of differences in the behavior of the old and new word breakers.</span></span> <span data-ttu-id="94314-174">В данном случае для обеспечения полного соответствия между запросами и содержимым полнотекстового индекса следует выбрать один из следующих параметров:</span><span class="sxs-lookup"><span data-stu-id="94314-174">In this case, to guarantee a total match between queries and the full-text index content, choose one of the following options:</span></span>  
  
-   <span data-ttu-id="94314-175">Выполнить повторное создание полнотекстового каталога, содержащего полнотекстовый индекс ([ALTER FULLTEXT CATALOG](/sql/t-sql/statements/alter-fulltext-catalog-transact-sql)*имя_каталога* REBUILD).</span><span class="sxs-lookup"><span data-stu-id="94314-175">Rebuild the full-text catalog that contains the full-text index ([ALTER FULLTEXT CATALOG](/sql/t-sql/statements/alter-fulltext-catalog-transact-sql)*catalog_name* REBUILD)</span></span>  
  
-   <span data-ttu-id="94314-176">Выполнить инструкцию FULL POPULATION для полнотекстового индекса ([ALTER FULLTEXT INDEX](/sql/t-sql/statements/alter-fulltext-index-transact-sql) ON *имя_таблицы* START FULL POPULATION).</span><span class="sxs-lookup"><span data-stu-id="94314-176">Issue a FULL POPULATION on the full-text index ([ALTER FULLTEXT INDEX](/sql/t-sql/statements/alter-fulltext-index-transact-sql) ON *table_name* START FULL POPULATION).</span></span>  
  
 <span data-ttu-id="94314-177">Дополнительные сведения о средствах разбиения по словам см. в разделе [Настройка и управление средством разбиения на слова и парадигматические модули для поиска](configure-and-manage-word-breakers-and-stemmers-for-search.md).</span><span class="sxs-lookup"><span data-stu-id="94314-177">For more information about word breakers, see [Configure and Manage Word Breakers and Stemmers for Search](configure-and-manage-word-breakers-and-stemmers-for-search.md).</span></span>  
  
## <a name="upgrading-noise-word-files-to-stoplists"></a><span data-ttu-id="94314-178">Обновление файлов пропускаемых слов до списков стоп-слов</span><span class="sxs-lookup"><span data-stu-id="94314-178">Upgrading Noise-Word Files to Stoplists</span></span>  
 <span data-ttu-id="94314-179">Пропускаемые слова [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] были заменены стоп-словами в [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] и более поздних версиях.</span><span class="sxs-lookup"><span data-stu-id="94314-179">[!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] noise words have been replaced by stopwords in [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] and later versions.</span></span> <span data-ttu-id="94314-180">После обновления базы данных до версии [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] от версии [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)]файлы пропускаемых слов становятся неиспользуемыми.</span><span class="sxs-lookup"><span data-stu-id="94314-180">When a database is upgraded to [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] from [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)], the noise-word files are no longer used.</span></span> <span data-ttu-id="94314-181">Но старые файлы пропускаемых слов хранятся в папке FTDATA\FTNoiseThresaurusBak, и их можно использовать в дальнейшем при обновлении или построении соответствующих списков стоп-слов [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="94314-181">However, the old noise-word files are stored in the FTDATA\ FTNoiseThesaurusBak folder, and you can use them later when updating or building the corresponding [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] stoplists.</span></span>  
  
 <span data-ttu-id="94314-182">После обновления с версии [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)]:</span><span class="sxs-lookup"><span data-stu-id="94314-182">After upgrading from [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)]:</span></span>  
  
-   <span data-ttu-id="94314-183">Если файлы пропускаемых слов в установке [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)]не добавлялись, не изменялись и не удалялись, то системный список стоп-слов будет соответствовать всем требованиям.</span><span class="sxs-lookup"><span data-stu-id="94314-183">If you never added, modified, or deleted any noise-word files in your installation of [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)], the system stoplist should meet your needs.</span></span>  
  
-   <span data-ttu-id="94314-184">Если файлы пропускаемых слов в [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)]были изменены, эти изменения в процессе обновления будут потеряны.</span><span class="sxs-lookup"><span data-stu-id="94314-184">If your noise-word files were modified in [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)], those modifications are lost during upgrade.</span></span> <span data-ttu-id="94314-185">Чтобы воссоздать эти изменения, необходимо вручную внести их в соответствующий список стоп-слов [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)].</span><span class="sxs-lookup"><span data-stu-id="94314-185">To re-create those updates, you must manually recreate those modifications in the corresponding [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] stoplist.</span></span> <span data-ttu-id="94314-186">Дополнительные сведения см. в разделе [ALTER FULLTEXT STOPLIST (Transact-SQL)](/sql/t-sql/statements/alter-fulltext-stoplist-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="94314-186">For more information, see [ALTER FULLTEXT STOPLIST &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-fulltext-stoplist-transact-sql).</span></span>  
  
-   <span data-ttu-id="94314-187">Если использование стоп-слов в полнотекстовом индексе не требуется (например, если файлы пропускаемых слов в [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] были удалены или очищены), необходимо отключить список стоп-слов для каждого обновленного полнотекстового индекса.</span><span class="sxs-lookup"><span data-stu-id="94314-187">If you do not want to apply any stopwords to your full-text indexes (for example, if you deleted or erased your noise-word files in your [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] installation), you must turn off the stoplist for each upgraded full-text index.</span></span> <span data-ttu-id="94314-188">Выполните следующую инструкцию [!INCLUDE[tsql](../../includes/tsql-md.md)] (заменив параметр *database* на имя обновленной базы данных, а *table* — на имя *таблицы*):</span><span class="sxs-lookup"><span data-stu-id="94314-188">Run the following [!INCLUDE[tsql](../../includes/tsql-md.md)] statement (replacing *database* with the name of the upgraded database and *table* with the name of the *table*):</span></span>  
  
    ```  
    Use database;   
    ALTER FULLTEXT INDEX ON table  
       SET STOPLIST OFF;  
    GO  
    ```  
  
     <span data-ttu-id="94314-189">Предложение STOPLIST OFF удаляет фильтрацию по стоп-словам; таблица будет заполняться без фильтрации неучитываемых слов.</span><span class="sxs-lookup"><span data-stu-id="94314-189">The STOPLIST OFF clause removes stop-word filtering, and it will trigger a population of the table, without filtering any words considered to be noise.</span></span>  
  
## <a name="backup-and-imported-full-text-catalogs"></a><span data-ttu-id="94314-190">Резервные копии полнотекстовых каталогов и импортированные полнотекстовые каталоги</span><span class="sxs-lookup"><span data-stu-id="94314-190">Backup and Imported Full-Text Catalogs</span></span>  
 <span data-ttu-id="94314-191">Для полнотекстовых каталогов, которые были восстановлены или сброшены во время обновления (и для новых полнотекстовых каталогов) полнотекстовый каталог является логическим понятием. Он не располагается в файловой группе.</span><span class="sxs-lookup"><span data-stu-id="94314-191">For full-text catalogs that are rebuilt or reset during upgrade (and for new full-text catalogs), the fulltext catalog is a logical concept and does not reside in a filegroup.</span></span> <span data-ttu-id="94314-192">Следовательно, чтобы создать резервную копию полнотекстового каталога в [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], следует определить все файловые группы, содержащие полнотекстовый индекс каталога, а затем последовательно создать резервные копии каждой из этих групп.</span><span class="sxs-lookup"><span data-stu-id="94314-192">Therefore, to back up a full-text catalog in [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], you must identify every filegroup that contains a full-text index of the catalog and back each of them up, one by one.</span></span> <span data-ttu-id="94314-193">Дополнительные сведения см. в разделе [Создание резервных копий и восстановление полнотекстовых каталогов и индексов](back-up-and-restore-full-text-catalogs-and-indexes.md).</span><span class="sxs-lookup"><span data-stu-id="94314-193">For more information, see [Back Up and Restore Full-Text Catalogs and Indexes](back-up-and-restore-full-text-catalogs-and-indexes.md).</span></span>  
  
 <span data-ttu-id="94314-194">Те полнотекстовые каталоги, которые были импортированы из [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)], все еще являются файлами базы данных в собственных файловых группах.</span><span class="sxs-lookup"><span data-stu-id="94314-194">For full-text catalogs that have been imported from [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)], the full-text catalog is still a database file in its own filegroup.</span></span> <span data-ttu-id="94314-195">Процесс резервного копирования [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] для полнотекстовых каталогов применим, за исключением того, что служба MSFTESQL не существует в [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)].</span><span class="sxs-lookup"><span data-stu-id="94314-195">The [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] backup process for full-text catalogs still applies except that the MSFTESQL service does not exist in [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)].</span></span> <span data-ttu-id="94314-196">Дополнительные сведения о процессе [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] см. в разделе [Резервное копирование и восстановление полнотекстовых каталогов](https://go.microsoft.com/fwlink/?LinkId=209154) электронной документации по SQL Server 2005.</span><span class="sxs-lookup"><span data-stu-id="94314-196">For information about the [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] process, see [Backing Up and Restoring Full-Text Catalogs](https://go.microsoft.com/fwlink/?LinkId=209154) in SQL Server 2005 Books Online.</span></span>  
  
##  <a name="migrating-full-text-indexes-when-upgrading-a-database-to-sscurrent"></a><a name="Upgrade_Db"></a><span data-ttu-id="94314-197">Миграция полнотекстовых индексов при обновлении базы данных до версии[!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]</span><span class="sxs-lookup"><span data-stu-id="94314-197">Migrating Full-Text Indexes When Upgrading a Database to [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]</span></span>  
 <span data-ttu-id="94314-198">Файлы баз данных и полнотекстовые каталоги из предыдущей версии [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] могут быть обновлены до версии существующего экземпляра сервера [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] при помощи присоединения, восстановления или с использованием мастера копирования баз данных.</span><span class="sxs-lookup"><span data-stu-id="94314-198">Database files and full-text catalogs from a previous version of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] can be upgraded to an existing [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] server instance by using attach, restore, or the Copy Database Wizard.</span></span> [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] <span data-ttu-id="94314-199">полнотекстовые индексы (при их наличии) импортируются, сбрасываются или перестраиваются.</span><span class="sxs-lookup"><span data-stu-id="94314-199">full-text indexes, if any, are either imported, reset, or rebuilt.</span></span> <span data-ttu-id="94314-200">Свойство сервера **upgrade_option** определяет, какой из режимов обновления полнотекстового поиска будет использоваться экземпляром сервера при обновлении базы данных.</span><span class="sxs-lookup"><span data-stu-id="94314-200">The **upgrade_option** server property controls which full-text upgrade option the server instance uses during these database upgrades.</span></span>  
  
 <span data-ttu-id="94314-201">После присоединения, восстановления или копирования любой базы данных [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] в [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]эта база данных сразу становится доступной, после чего автоматически обновляется.</span><span class="sxs-lookup"><span data-stu-id="94314-201">After you attach, restore, or copy any [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] database to [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], the database becomes available immediately and is then automatically upgraded.</span></span> <span data-ttu-id="94314-202">В зависимости от объема индексируемых данных процесс импорта может занять несколько часов, а перестроение — в несколько (до десяти) раз больше.</span><span class="sxs-lookup"><span data-stu-id="94314-202">Depending the amount of data being indexed, importing can take several hours, and rebuilding can take up to ten times longer.</span></span> <span data-ttu-id="94314-203">Обратите внимание, что если при обновлении выбран режим «Импортировать», а полнотекстовый каталог недоступен, то связанные с ним полнотекстовые индексы будут перестроены.</span><span class="sxs-lookup"><span data-stu-id="94314-203">Note also that when the upgrade option is set to import, if a full-text catalog is not available, the associated full-text indexes are rebuilt.</span></span>  
  
 <span data-ttu-id="94314-204">**Изменение поведения полнотекстового обновления на экземпляре сервера**</span><span class="sxs-lookup"><span data-stu-id="94314-204">**To change full-text upgrade behavior on a server instance**</span></span>  
  
-   [!INCLUDE[tsql](../../includes/tsql-md.md)]<span data-ttu-id="94314-205">: используйте действие **upgrade\_option** хранимой процедуры [sp\_fulltext\_service](/sql/relational-databases/system-stored-procedures/sp-fulltext-service-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="94314-205">: Use the **upgrade\_option** action of [sp\_fulltext\_service](/sql/relational-databases/system-stored-procedures/sp-fulltext-service-transact-sql)</span></span>  
  
-   [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] <span data-ttu-id="94314-206">**:** используйте параметр **Режим обновления полнотекстового каталога** в диалоговом окне **Свойства сервера** .</span><span class="sxs-lookup"><span data-stu-id="94314-206">**:** Use the **Full-Text Upgrade Option** of the **Server Properties** dialog box.</span></span> <span data-ttu-id="94314-207">Дополнительные сведения см. в разделе [Управление и наблюдение за полнотекстовым поиском для экземпляра сервера](manage-and-monitor-full-text-search-for-a-server-instance.md).</span><span class="sxs-lookup"><span data-stu-id="94314-207">For more information, see [Manage and Monitor Full-Text Search for a Server Instance](manage-and-monitor-full-text-search-for-a-server-instance.md).</span></span>  
  
##  <a name="considerations-for-restoring-a-ssversion2005-full-text-catalog-to-sscurrent"></a><a name="Considerations_for_Restore"></a><span data-ttu-id="94314-208">Рекомендации по восстановлению [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] полнотекстового каталога в[!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]</span><span class="sxs-lookup"><span data-stu-id="94314-208">Considerations for Restoring a [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] Full-Text Catalog to [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]</span></span>  
 <span data-ttu-id="94314-209">Одним из методов обновления полнотекстовых данных базы данных [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] до версии [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] является восстановление полной резервной копии базы данных до версии [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)].</span><span class="sxs-lookup"><span data-stu-id="94314-209">One method of upgrading fulltext data from a [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] database to [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] is to restore a full database backup to [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)].</span></span>  
  
 <span data-ttu-id="94314-210">При импорте каталога [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] можно выполнить резервное копирование и восстановление базы данных и файла каталога.</span><span class="sxs-lookup"><span data-stu-id="94314-210">While importing a [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] full-text catalog, you can back up and restore the database and the catalog file.</span></span> <span data-ttu-id="94314-211">Это происходит так же, как в выпуске [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)].</span><span class="sxs-lookup"><span data-stu-id="94314-211">The behavior is the same as in [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)]:</span></span>  
  
-   <span data-ttu-id="94314-212">В полную резервную копию базы данных будет включен полнотекстовый каталог.</span><span class="sxs-lookup"><span data-stu-id="94314-212">The full database backup will include the full-text catalog.</span></span> <span data-ttu-id="94314-213">Для ссылки на полнотекстовый каталог следует использовать его имя файла в [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] , sysft_+*catalog-name*.</span><span class="sxs-lookup"><span data-stu-id="94314-213">To refer to the full-text catalog, use its [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] file name, sysft_+*catalog-name*.</span></span>  
  
-   <span data-ttu-id="94314-214">Если полнотекстовый каталог находится в режиме «вне сети», то резервное копирование завершится ошибкой.</span><span class="sxs-lookup"><span data-stu-id="94314-214">If the full-text catalog is offline, the backup will fail.</span></span>  
  
 <span data-ttu-id="94314-215">Дополнительные сведения о резервном копировании и восстановлении полнотекстовых каталогов [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] см. в разделах [Резервное копирование и восстановление полнотекстовых каталогов](https://go.microsoft.com/fwlink/?LinkId=121052) и [Резервное копирование и восстановление файлов и полнотекстовые каталоги](https://go.microsoft.com/fwlink/?LinkId=121053)в электронной документации по [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="94314-215">For more information about backing up and restoring [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] full-text catalogs, see [Backing Up and Restoring Full-Text Catalogs](https://go.microsoft.com/fwlink/?LinkId=121052) and [File Backup and Restore and Full-Text Catalogs](https://go.microsoft.com/fwlink/?LinkId=121053)in [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] Books Online.</span></span>  
  
 <span data-ttu-id="94314-216">При восстановлении базы данных в [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]для полнотекстового каталога будет создан новый файл базы данных.</span><span class="sxs-lookup"><span data-stu-id="94314-216">When the database is restored on [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], a new database file will be created for the full-text catalog.</span></span> <span data-ttu-id="94314-217">По умолчанию данный файл имеет имя ftrow_*имя-каталога*.ndf.</span><span class="sxs-lookup"><span data-stu-id="94314-217">The default name of this file is ftrow_*catalog-name*.ndf.</span></span> <span data-ttu-id="94314-218">Например, если *имя-каталога* — `cat1`, то именем по умолчанию файла базы данных [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] будет `ftrow_cat1.ndf`.</span><span class="sxs-lookup"><span data-stu-id="94314-218">For example, if you *catalog-name* is `cat1`, the default name of the [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] database file would be `ftrow_cat1.ndf`.</span></span> <span data-ttu-id="94314-219">Но если имя по умолчанию уже используется в целевом каталоге, то новый файл базы данных будет называться `ftrow_` *Catalog-Name* `{` *GUID* `}.ndf` , где *GUID* — это глобальный уникальный идентификатор нового файла.</span><span class="sxs-lookup"><span data-stu-id="94314-219">But if the default name is already being used in the target directory, the new database file would be named `ftrow_`*catalog-name*`{`*GUID*`}.ndf`, where *GUID* is the Globally Unique Identifier of the new file.</span></span>  
  
 <span data-ttu-id="94314-220">После импорта каталогов обновляются представления **sys.database_files** и **sys.master_files**: удаляются записи каталога и устанавливается значение NULL для столбца **path** (путь) в **sys.fulltext_catalogs** .</span><span class="sxs-lookup"><span data-stu-id="94314-220">After the catalogs have been imported, the **sys.database_files** and **sys.master_file**s are updated to remove the catalog entries and the **path** column in **sys.fulltext_catalogs** is set to NULL.</span></span>  
  
 <span data-ttu-id="94314-221">**Создание резервной копии базы данных**</span><span class="sxs-lookup"><span data-stu-id="94314-221">**To back up a database**</span></span>  
  
-   [<span data-ttu-id="94314-222">Полные резервные копии баз данных (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="94314-222">Full Database Backups &#40;SQL Server&#41;</span></span>](../backup-restore/full-database-backups-sql-server.md)  
  
-   <span data-ttu-id="94314-223">[Резервные копии журналов транзакций (SQL Server)](../backup-restore/transaction-log-backups-sql-server.md) (только для модели полного восстановления)</span><span class="sxs-lookup"><span data-stu-id="94314-223">[Transaction Log Backups &#40;SQL Server&#41;](../backup-restore/transaction-log-backups-sql-server.md) (full recovery model only)</span></span>  
  
 <span data-ttu-id="94314-224">**Восстановление резервной копии базы данных**</span><span class="sxs-lookup"><span data-stu-id="94314-224">**To restore a database backup**</span></span>  
  
-   [<span data-ttu-id="94314-225">Выполнение полного восстановления базы данных (простая модель восстановления)</span><span class="sxs-lookup"><span data-stu-id="94314-225">Complete Database Restores &#40;Simple Recovery Model&#41;</span></span>](../backup-restore/complete-database-restores-simple-recovery-model.md)  
  
-   [<span data-ttu-id="94314-226">Выполнение полного восстановления базы данных (модель полного восстановления)</span><span class="sxs-lookup"><span data-stu-id="94314-226">Complete Database Restores &#40;Full Recovery Model&#41;</span></span>](../backup-restore/complete-database-restores-full-recovery-model.md)  
  
### <a name="example"></a><span data-ttu-id="94314-227">Пример</span><span class="sxs-lookup"><span data-stu-id="94314-227">Example</span></span>  
 <span data-ttu-id="94314-228">В приведенных ниже примерах в инструкции [RESTORE](/sql/t-sql/statements/restore-statements-transact-sql) используется предложение MOVE для восстановления базы данных [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] с именем `ftdb1`.</span><span class="sxs-lookup"><span data-stu-id="94314-228">The following example uses the MOVE clause in the [RESTORE](/sql/t-sql/statements/restore-statements-transact-sql) statement, to restore a [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] database named `ftdb1`.</span></span> <span data-ttu-id="94314-229">Файлы базы данных [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] , журнала и каталогов перемещаются в новые места в экземпляре сервера [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] следующим образом.</span><span class="sxs-lookup"><span data-stu-id="94314-229">The [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] database, log, and catalog files are moved to new locations on the [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] server instance, as follows:</span></span>  
  
-   <span data-ttu-id="94314-230">Файл базы данных `ftdb1.mdf`перемещается по адресу `C:\Program Files\Microsoft SQL Server\MSSQL.1MSSQL12.MSSQLSERVER\MSSQL\DATA\ftdb1.mdf`.</span><span class="sxs-lookup"><span data-stu-id="94314-230">The database file, `ftdb1.mdf`, is moved to `C:\Program Files\Microsoft SQL Server\MSSQL.1MSSQL12.MSSQLSERVER\MSSQL\DATA\ftdb1.mdf`.</span></span>  
  
-   <span data-ttu-id="94314-231">Файл журнала `ftdb1_log.ldf` перемещается в каталог журнала на диске журнала *log_drive* `:\` *log_directory* `\ftdb1_log.ldf` .</span><span class="sxs-lookup"><span data-stu-id="94314-231">The log file, `ftdb1_log.ldf`, is moved to a log directory on your log disk drive, *log_drive*`:\`*log_directory*`\ftdb1_log.ldf`.</span></span>  
  
-   <span data-ttu-id="94314-232">Файлы каталогов, соответствующие каталогу `sysft_cat90` , перемещаются по адресу `C:\temp`.</span><span class="sxs-lookup"><span data-stu-id="94314-232">The catalog files that correspond to the `sysft_cat90` catalog are moved to `C:\temp`.</span></span> <span data-ttu-id="94314-233">После того как был выполнен импорт полнотекстовых каталогов, они будут автоматически размещены в файле базы данных «C:\ftrow_sysft_cat90.ndf», а каталог «C:\temp» будет удален.</span><span class="sxs-lookup"><span data-stu-id="94314-233">After the full-text indexes are imported, they will automatically be placed in a database file, C:\ftrow_sysft_cat90.ndf, and the C:\temp will be deleted.</span></span>  
  
```  
RESTORE DATABASE [ftdb1] FROM  DISK = N'C:\temp\ftdb1.bak' WITH  FILE = 1,  
   MOVE N'ftdb1' TO N'C:\Program Files\Microsoft SQL Server\MSSQL12.MSSQLSERVER\MSSQL\DATA\ftdb1.mdf',  
    MOVE N'ftdb1_log' TO N'log_drive:\log_directory\ftdb1_log.ldf',  
    MOVE N'sysft_cat90' TO N'C:\temp';  
```  
  
##  <a name="attaching-a-sql-server-2005-database-to-sscurrent"></a><a name="Attaching_2005_ft_catalogs"></a><span data-ttu-id="94314-234">Присоединение базы данных SQL Server 2005 к[!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]</span><span class="sxs-lookup"><span data-stu-id="94314-234">Attaching a SQL Server 2005 Database to [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]</span></span>  
 <span data-ttu-id="94314-235">В [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] и более поздних версиях полнотекстовый каталог представляет собой логическое понятие, обозначающее группу полнотекстовых индексов.</span><span class="sxs-lookup"><span data-stu-id="94314-235">In [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] and later versions, a full-text catalog is a logical concept that refers to a group of full-text indexes.</span></span> <span data-ttu-id="94314-236">Полнотекстовый каталог является виртуальным объектом и не входит в какую-либо файловую группу.</span><span class="sxs-lookup"><span data-stu-id="94314-236">The full-text catalog is a virtual object that does not belong to any filegroup.</span></span> <span data-ttu-id="94314-237">Однако если база данных [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] , содержащая файлы полнотекстовых каталогов, присоединяется к экземпляру сервера [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] , то присоединение файлов каталогов осуществляется исходя из их предыдущего расположения (как и в случае с другими файлами баз данных), так же как в [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)].</span><span class="sxs-lookup"><span data-stu-id="94314-237">However, when you attach a [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] database that contains full-text catalog files onto a [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] server instance, the catalog files are attached from their previous location along with the other database files, the same as in [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)].</span></span>  
  
 <span data-ttu-id="94314-238">Состояние каждого присоединенного полнотекстового каталога в [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] будет идентично его состоянию во время отсоединения базы данных от [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)].</span><span class="sxs-lookup"><span data-stu-id="94314-238">The state of each attached full-text catalog on [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] is the same as when the database was detached from [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)].</span></span> <span data-ttu-id="94314-239">Если заполнение полнотекстового индекса было приостановлено операцией отсоединения, то оно будет продолжено в [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], а сам полнотекстовый индекс станет доступным для полнотекстового поиска.</span><span class="sxs-lookup"><span data-stu-id="94314-239">If any full-text index population was suspended by the detach operation, the population is resumed on [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], and the full-text index becomes available for full-text search.</span></span>  
  
 <span data-ttu-id="94314-240">Если [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] не удается найти файл полнотекстового каталога или если полнотекстовый файл был перемещен во время операции присоединения без указания нового расположения, то поведение будет зависеть от выбранного режима полнотекстового обновления.</span><span class="sxs-lookup"><span data-stu-id="94314-240">If [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] cannot find a full-text catalog file or if the full-text file was moved during the attach operation without specifying a new location, the behavior depends on the selected full-text upgrade option.</span></span> <span data-ttu-id="94314-241">Если был выбран режим обновления полнотекстового поиска **Импорт** или **Перестроение**, то присоединенный полнотекстовый каталог будет перестроен.</span><span class="sxs-lookup"><span data-stu-id="94314-241">If the full-text upgrade option is **Import** or **Rebuild**, the attached full-text catalog is rebuilt.</span></span> <span data-ttu-id="94314-242">Если был выбран режим обновления полнотекстового поиска **Сброс**, то присоединенный полнотекстовый каталог будет сброшен.</span><span class="sxs-lookup"><span data-stu-id="94314-242">If the full-text upgrade option is **Reset**, the attached full-text catalog is reset.</span></span>  
  
 <span data-ttu-id="94314-243">Дополнительные сведения о присоединении и отсоединении базы данных см. в разделах [Присоединение и отсоединение базы данных (SQL Server)](../databases/database-detach-and-attach-sql-server.md), [CREATE DATABASE (SQL Server Transact-SQL)](/sql/t-sql/statements/create-database-sql-server-transact-sql), [sp_attach_db](/sql/relational-databases/system-stored-procedures/sp-attach-db-transact-sql) и [sp_detach_db (Transact-SQL)](/sql/relational-databases/system-stored-procedures/sp-detach-db-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="94314-243">For more information about detaching and attaching a database, see [Database Detach and Attach &#40;SQL Server&#41;](../databases/database-detach-and-attach-sql-server.md), [CREATE DATABASE &#40;SQL Server Transact-SQL&#41;](/sql/t-sql/statements/create-database-sql-server-transact-sql), [sp_attach_db](/sql/relational-databases/system-stored-procedures/sp-attach-db-transact-sql), and [sp_detach_db &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-detach-db-transact-sql).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="94314-244">См. также:</span><span class="sxs-lookup"><span data-stu-id="94314-244">See Also</span></span>  
 <span data-ttu-id="94314-245">[Приступая к работе с компонентом Full-Text Search](get-started-with-full-text-search.md) </span><span class="sxs-lookup"><span data-stu-id="94314-245">[Get Started with Full-Text Search](get-started-with-full-text-search.md) </span></span>  
 <span data-ttu-id="94314-246">[Настройка средств разбиения по словам и парадигматические модули для поиска и управление ими](configure-and-manage-word-breakers-and-stemmers-for-search.md) </span><span class="sxs-lookup"><span data-stu-id="94314-246">[Configure and Manage Word Breakers and Stemmers for Search](configure-and-manage-word-breakers-and-stemmers-for-search.md) </span></span>  
 [<span data-ttu-id="94314-247">Настройка и управление фильтрами для поиска</span><span class="sxs-lookup"><span data-stu-id="94314-247">Configure and Manage Filters for Search</span></span>](configure-and-manage-filters-for-search.md)  
  
  
