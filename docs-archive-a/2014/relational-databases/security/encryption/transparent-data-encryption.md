---
title: Прозрачное шифрование данных (TDE) | Документация Майкрософт
ms.custom: ''
ms.date: 11/23/2015
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: security
ms.topic: conceptual
helpviewer_keywords:
- Transparent Data Encryption
- database encryption key, about
- TDE
- database encryption key
- TDE, about
- Transparent Data Encryption, about
- encryption [SQL Server], transparent data encryption
ms.assetid: c75d0d4b-4008-4e71-9a9d-cee2a566bd3b
author: jaszymas
ms.author: jaszymas
ms.openlocfilehash: a8118f0781d7c9e3d839c029c6bdaf8b01e074b0
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87664828"
---
# <a name="transparent-data-encryption-tde"></a><span data-ttu-id="ddfae-102">Прозрачное шифрование данных (TDE)</span><span class="sxs-lookup"><span data-stu-id="ddfae-102">Transparent Data Encryption (TDE)</span></span>
  <span data-ttu-id="ddfae-103">*Прозрачное шифрование данных* (TDE) позволяет шифровать файлы данных [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] и [!INCLUDE[ssSDSfull](../../../includes/sssdsfull-md.md)] ; это называется шифрованием неактивных данных.</span><span class="sxs-lookup"><span data-stu-id="ddfae-103">*Transparent Data Encryption* (TDE) encrypts [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] and [!INCLUDE[ssSDSfull](../../../includes/sssdsfull-md.md)] data files, known as encrypting data at rest.</span></span> <span data-ttu-id="ddfae-104">Можно принять ряд мер предосторожности для защиты базы данных, таких как проектирование безопасной системы, шифрование конфиденциальных ресурсов и создание брандмауэра на серверах базы данных.</span><span class="sxs-lookup"><span data-stu-id="ddfae-104">You can take several precautions to help secure the database such as designing a secure system, encrypting confidential assets, and building a firewall around the database servers.</span></span> <span data-ttu-id="ddfae-105">Однако в случае похищения физического носителя (например, дисков или лент с резервными копиями) злоумышленник может просто восстановить или подключить базу данных и просмотреть данные.</span><span class="sxs-lookup"><span data-stu-id="ddfae-105">However, in a scenario where the physical media (such as drives or backup tapes) are stolen, a malicious party can just restore or attach the database and browse the data.</span></span> <span data-ttu-id="ddfae-106">Одним из решений может стать шифрование конфиденциальных данных в базе данных и защита ключей, используемых при шифровании, с помощью сертификата.</span><span class="sxs-lookup"><span data-stu-id="ddfae-106">One solution is to encrypt the sensitive data in the database and protect the keys that are used to encrypt the data with a certificate.</span></span> <span data-ttu-id="ddfae-107">Это не позволит использовать данные ни одному человеку, не имеющему ключей, но такой тип защиты следует планировать заранее.</span><span class="sxs-lookup"><span data-stu-id="ddfae-107">This prevents anyone without the keys from using the data, but this kind of protection must be planned in advance.</span></span>

 <span data-ttu-id="ddfae-108">Функция прозрачного шифрования данных выполняет шифрование и дешифрование ввода-вывода в реальном времени для файлов данных и журналов.</span><span class="sxs-lookup"><span data-stu-id="ddfae-108">TDE performs real-time I/O encryption and decryption of the data and log files.</span></span> <span data-ttu-id="ddfae-109">При шифровании используется ключ шифрования базы данных (DEK), который хранится в загрузочной записи базы данных, где можно получить к нему доступ при восстановлении.</span><span class="sxs-lookup"><span data-stu-id="ddfae-109">The encryption uses a database encryption key (DEK), which is stored in the database boot record for availability during recovery.</span></span> <span data-ttu-id="ddfae-110">Ключ шифрования базы данных является симметричным ключом, защищенным сертификатом, который хранится в базе данных master на сервере, или асимметричным ключом, защищенным модулем расширенного управления ключами.</span><span class="sxs-lookup"><span data-stu-id="ddfae-110">The DEK is a symmetric key secured by using a certificate stored in the master database of the server or an asymmetric key protected by an EKM module.</span></span> <span data-ttu-id="ddfae-111">Функция прозрачного шифрования данных защищает "неактивные" данные, то есть файлы данных и журналов.</span><span class="sxs-lookup"><span data-stu-id="ddfae-111">TDE protects data "at rest", meaning the data and log files.</span></span> <span data-ttu-id="ddfae-112">Благодаря ей обеспечивается соответствие требованиям различных законов, постановлений и рекомендаций, действующих в разных отраслях.</span><span class="sxs-lookup"><span data-stu-id="ddfae-112">It provides the ability to comply with many laws, regulations, and guidelines established in various industries.</span></span> <span data-ttu-id="ddfae-113">Это позволяет разработчикам программного обеспечения шифровать данные с помощью алгоритмов шифрования AES и 3DES, не меняя существующие приложения.</span><span class="sxs-lookup"><span data-stu-id="ddfae-113">This enables software developers to encrypt data by using AES and 3DES encryption algorithms without changing existing applications.</span></span>

> [!IMPORTANT]
>  <span data-ttu-id="ddfae-114">Функция прозрачного шифрования данных не обеспечивает шифрование каналов связи.</span><span class="sxs-lookup"><span data-stu-id="ddfae-114">TDE does not provide encryption across communication channels.</span></span> <span data-ttu-id="ddfae-115">Дополнительные сведения о способах шифрования данных, передаваемых по каналам связи, см. в разделе [Включение шифрования соединений в ядре СУБД (диспетчер конфигурации SQL Server)](../../../database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine.md).</span><span class="sxs-lookup"><span data-stu-id="ddfae-115">For more information about how to encrypt data across communication channels, see [Enable Encrypted Connections to the Database Engine &#40;SQL Server Configuration Manager&#41;](../../../database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine.md).</span></span>
> 
>  <span data-ttu-id="ddfae-116">**См. также:**</span><span class="sxs-lookup"><span data-stu-id="ddfae-116">**Related topics:**</span></span>
> 
>  -   [<span data-ttu-id="ddfae-117">Прозрачное шифрование данных в Базе данных SQL Azure</span><span class="sxs-lookup"><span data-stu-id="ddfae-117">Transparent Data Encryption with Azure SQL Database</span></span>](../../../database-engine/transparent-data-encryption-with-azure-sql-database.md)
> -   [<span data-ttu-id="ddfae-118">Перемещение базы данных, защищаемой прозрачным шифрованием, в другой экземпляр SQL Server</span><span class="sxs-lookup"><span data-stu-id="ddfae-118">Move a TDE Protected Database to Another SQL Server</span></span>](move-a-tde-protected-database-to-another-sql-server.md)
> -   [<span data-ttu-id="ddfae-119">Включение TDE с помощью расширенного управления ключами</span><span class="sxs-lookup"><span data-stu-id="ddfae-119">Enable TDE Using EKM</span></span>](enable-tde-on-sql-server-using-ekm.md)

## <a name="about-tde"></a><span data-ttu-id="ddfae-120">Сведения о прозрачном шифровании данных (TDE)</span><span class="sxs-lookup"><span data-stu-id="ddfae-120">About TDE</span></span>
 <span data-ttu-id="ddfae-121">Шифрование файлов базы данных выполняется на уровне страницы.</span><span class="sxs-lookup"><span data-stu-id="ddfae-121">Encryption of the database file is performed at the page level.</span></span> <span data-ttu-id="ddfae-122">Страницы в зашифрованной базе данных шифруются до записи на диск и дешифруются при чтении в память.</span><span class="sxs-lookup"><span data-stu-id="ddfae-122">The pages in an encrypted database are encrypted before they are written to disk and decrypted when read into memory.</span></span> <span data-ttu-id="ddfae-123">Прозрачное шифрование данных не увеличивает размер зашифрованной базы данных.</span><span class="sxs-lookup"><span data-stu-id="ddfae-123">TDE does not increase the size of the encrypted database.</span></span>

 <span data-ttu-id="ddfae-124">**Сведения, применимые к[!INCLUDE[ssSDS](../../../includes/sssds-md.md)]**</span><span class="sxs-lookup"><span data-stu-id="ddfae-124">**Information applicable to [!INCLUDE[ssSDS](../../../includes/sssds-md.md)]**</span></span>

 <span data-ttu-id="ddfae-125">При использовании прозрачного шифрования данных с [!INCLUDE[sqldbesa](../../../includes/sqldbesa-md.md)] V12  ([Предварительная версия в некоторых регионах](https://azure.microsoft.com/documentation/articles/sql-database-preview-whats-new/?WT.mc_id=TSQL_GetItTag)) [!INCLUDE[ssSDS](../../../includes/sssds-md.md)]автоматически создает для вас сертификат на уровне сервера, хранящийся в базе данных master.</span><span class="sxs-lookup"><span data-stu-id="ddfae-125">When using TDE with [!INCLUDE[sqldbesa](../../../includes/sqldbesa-md.md)] V12  ([Preview in some regions](https://azure.microsoft.com/documentation/articles/sql-database-preview-whats-new/?WT.mc_id=TSQL_GetItTag)) the server-level certificate stored in the master database is automatically created for you by [!INCLUDE[ssSDS](../../../includes/sssds-md.md)].</span></span> <span data-ttu-id="ddfae-126">Чтобы переместить базу данных TDE в [!INCLUDE[ssSDS](../../../includes/sssds-md.md)] , вам необходимо расшифровать ее, переместить, а затем повторно включить TDE в целевой [!INCLUDE[ssSDS](../../../includes/sssds-md.md)].</span><span class="sxs-lookup"><span data-stu-id="ddfae-126">To move a TDE database on [!INCLUDE[ssSDS](../../../includes/sssds-md.md)] you must decrypt the database, move the database, and then re-enable TDE on the destination [!INCLUDE[ssSDS](../../../includes/sssds-md.md)].</span></span> <span data-ttu-id="ddfae-127">Пошаговые инструкции по прозрачному шифрованию данных в [!INCLUDE[ssSDS](../../../includes/sssds-md.md)]можно найти в разделе [Transparent Data Encryption with Azure SQL Database](../../../database-engine/transparent-data-encryption-with-azure-sql-database.md).</span><span class="sxs-lookup"><span data-stu-id="ddfae-127">For step-by-step instructions for TDE on [!INCLUDE[ssSDS](../../../includes/sssds-md.md)], see [Transparent Data Encryption with Azure SQL Database](../../../database-engine/transparent-data-encryption-with-azure-sql-database.md).</span></span>

 <span data-ttu-id="ddfae-128">Просмотр состояния TDE применяется даже в подмножестве географических регионов, в которых сообщается, что версия семейства V12 [!INCLUDE[ssSDS](../../../includes/sssds-md.md)] теперь общедоступна.</span><span class="sxs-lookup"><span data-stu-id="ddfae-128">The preview of status of TDE applies even in the subset of geographic regions where version family V12 of [!INCLUDE[ssSDS](../../../includes/sssds-md.md)] is announced as now being in general availability status.</span></span> <span data-ttu-id="ddfae-129">Прозрачное шифрование данных для [!INCLUDE[ssSDS](../../../includes/sssds-md.md)] не используется в рабочих базах данных до тех пор, пока [!INCLUDE[msCoName](../../../includes/msconame-md.md)] не объявит, что функция TDE становится общедоступной.</span><span class="sxs-lookup"><span data-stu-id="ddfae-129">TDE for [!INCLUDE[ssSDS](../../../includes/sssds-md.md)] is not intended for use in production databases until [!INCLUDE[msCoName](../../../includes/msconame-md.md)] announces that TDE is promoted from preview to GA.</span></span> <span data-ttu-id="ddfae-130">Дополнительные сведения о [!INCLUDE[ssSDS](../../../includes/sssds-md.md)] V12 можно найти в разделе [Новые возможности версии 12 базы данных SQL](https://azure.microsoft.com/documentation/articles/sql-database-preview-whats-new/).</span><span class="sxs-lookup"><span data-stu-id="ddfae-130">For more information about [!INCLUDE[ssSDS](../../../includes/sssds-md.md)] V12, see [What's new in Azure SQL Database](https://azure.microsoft.com/documentation/articles/sql-database-preview-whats-new/).</span></span>

 <span data-ttu-id="ddfae-131">**Сведения, применимые к[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]**</span><span class="sxs-lookup"><span data-stu-id="ddfae-131">**Information applicable to [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]**</span></span>

 <span data-ttu-id="ddfae-132">После защиты базы данных ее можно восстановить с помощью правильного сертификата.</span><span class="sxs-lookup"><span data-stu-id="ddfae-132">After it is secured, the database can be restored by using the correct certificate.</span></span> <span data-ttu-id="ddfae-133">Дополнительные сведения о сертификатах см. в разделе [SQL Server Certificates and Asymmetric Keys](../sql-server-certificates-and-asymmetric-keys.md).</span><span class="sxs-lookup"><span data-stu-id="ddfae-133">For more information about certificates, see [SQL Server Certificates and Asymmetric Keys](../sql-server-certificates-and-asymmetric-keys.md).</span></span>

 <span data-ttu-id="ddfae-134">При включении функции прозрачного шифрования данных необходимо немедленно создать резервную копию сертификата и закрытого ключа, связанного с этим сертификатом.</span><span class="sxs-lookup"><span data-stu-id="ddfae-134">When enabling TDE, you should immediately back up the certificate and the private key associated with the certificate.</span></span> <span data-ttu-id="ddfae-135">В случае если сертификат окажется недоступен или понадобится восстановить базу данных на другом сервере либо присоединить ее к другому серверу, необходимо иметь копии сертификата и закрытого ключа. Иначе будет невозможно открыть базу данных.</span><span class="sxs-lookup"><span data-stu-id="ddfae-135">If the certificate ever becomes unavailable or if you must restore or attach the database on another server, you must have backups of both the certificate and the private key or you will not be able to open the database.</span></span> <span data-ttu-id="ddfae-136">Сертификат шифрования следует сохранить, даже если функция прозрачного шифрования в базе данных будет отключена.</span><span class="sxs-lookup"><span data-stu-id="ddfae-136">The encrypting certificate should be retained even if TDE is no longer enabled on the database.</span></span> <span data-ttu-id="ddfae-137">Даже если база данных не зашифрована, части журнала транзакций могут по-прежнему оставаться защищенными, а для некоторых операций будет требоваться сертификат до выполнения полного резервного копирования базы данных.</span><span class="sxs-lookup"><span data-stu-id="ddfae-137">Even though the database is not encrypted, parts of the transaction log may still remain protected, and the certificate may be needed for some operations until the full backup of the database is performed.</span></span> <span data-ttu-id="ddfae-138">Сертификат, который превысил свой срок хранения, все еще может быть использован для шифрования и расшифровки данных с помощью прозрачного шифрования данных.</span><span class="sxs-lookup"><span data-stu-id="ddfae-138">A certificate that has exceeded its expiration date can still be used to encrypt and decrypt data with TDE.</span></span>

 <span data-ttu-id="ddfae-139">**Иерархия средств шифрования**</span><span class="sxs-lookup"><span data-stu-id="ddfae-139">**Encryption Hierarchy**</span></span>

 <span data-ttu-id="ddfae-140">На рисунке ниже показана архитектура прозрачного шифрования данных.</span><span class="sxs-lookup"><span data-stu-id="ddfae-140">The following illustration shows the architecture of TDE encryption.</span></span> <span data-ttu-id="ddfae-141">При использовании прозрачного шифрования данных в [!INCLUDE[ssSDS](../../../includes/sssds-md.md)]пользователь может настраивать только элементы уровня базы данных (ключ шифрования базы данных и фрагменты ALTER DATABASE).</span><span class="sxs-lookup"><span data-stu-id="ddfae-141">Only the database level items (the database encryption key and ALTER DATABASE portions are user-configurable when using TDE on [!INCLUDE[ssSDS](../../../includes/sssds-md.md)].</span></span>

 <span data-ttu-id="ddfae-142">![Показывает иерархию, описанную в этом разделе.](../../../database-engine/media/tde-architecture.gif "Показывает иерархию, описанную в этом разделе.")</span><span class="sxs-lookup"><span data-stu-id="ddfae-142">![Displays the hierarchy described in the topic.](../../../database-engine/media/tde-architecture.gif "Displays the hierarchy described in the topic.")</span></span>

## <a name="using-transparent-data-encryption"></a><span data-ttu-id="ddfae-143">Использование прозрачного шифрования данных</span><span class="sxs-lookup"><span data-stu-id="ddfae-143">Using Transparent Data Encryption</span></span>
 <span data-ttu-id="ddfae-144">Чтобы использовать прозрачное шифрование данных, выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="ddfae-144">To use TDE, follow these steps.</span></span>

||
|-|
|<span data-ttu-id="ddfae-145">**Применимо к**: [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="ddfae-145">**Applies to**: [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span>|

-   <span data-ttu-id="ddfae-146">Создайте главный ключ</span><span class="sxs-lookup"><span data-stu-id="ddfae-146">Create a master key</span></span>

-   <span data-ttu-id="ddfae-147">Создайте или получите сертификат, защищенный главным ключом</span><span class="sxs-lookup"><span data-stu-id="ddfae-147">Create or obtain a certificate protected by the master key</span></span>

-   <span data-ttu-id="ddfae-148">Создайте ключ шифрования базы данных и защитите его с помощью сертификата</span><span class="sxs-lookup"><span data-stu-id="ddfae-148">Create a database encryption key and protect it by the certificate</span></span>

-   <span data-ttu-id="ddfae-149">Задайте ведение шифрования базы данных</span><span class="sxs-lookup"><span data-stu-id="ddfae-149">Set the database to use encryption</span></span>

 <span data-ttu-id="ddfae-150">В следующем примере демонстрируется шифрование и дешифрование базы данных `AdventureWorks2012` с помощью сертификата с именем `MyServerCert`, установленного на сервере.</span><span class="sxs-lookup"><span data-stu-id="ddfae-150">The following example illustrates encrypting and decrypting the `AdventureWorks2012` database using a certificate installed on the server named `MyServerCert`.</span></span>

```
USE master;
GO
CREATE MASTER KEY ENCRYPTION BY PASSWORD = '<UseStrongPasswordHere>';
go
CREATE CERTIFICATE MyServerCert WITH SUBJECT = 'My DEK Certificate';
go
USE AdventureWorks2012;
GO
CREATE DATABASE ENCRYPTION KEY
WITH ALGORITHM = AES_128
ENCRYPTION BY SERVER CERTIFICATE MyServerCert;
GO
ALTER DATABASE AdventureWorks2012
SET ENCRYPTION ON;
GO
```

 <span data-ttu-id="ddfae-151">Операции шифрования и дешифрования запланированы в фоновых потоках [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="ddfae-151">The encryption and decryption operations are scheduled on background threads by [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="ddfae-152">Состояние этих операций можно просмотреть в представлениях каталога и динамических административных представлениях в списке, представленном далее в этом разделе.</span><span class="sxs-lookup"><span data-stu-id="ddfae-152">You can view the status of these operations using the catalog views and dynamic management views in the list that appears later in this topic.</span></span>

> [!CAUTION]
>  <span data-ttu-id="ddfae-153">Файлы резервных копий баз данных, в которых включено TDE, также шифруются с помощью ключа шифрования базы данных.</span><span class="sxs-lookup"><span data-stu-id="ddfae-153">Backup files of databases that have TDE enabled are also encrypted by using the database encryption key.</span></span> <span data-ttu-id="ddfae-154">Поэтому для восстановления таких резервных копий необходимо иметь сертификат, защищающий ключ шифрования базы данных.</span><span class="sxs-lookup"><span data-stu-id="ddfae-154">As a result, when you restore these backups, the certificate protecting the database encryption key must be available.</span></span> <span data-ttu-id="ddfae-155">Это значит, что помимо резервного копирования базы данных обязательно необходимо сохранять резервные копии сертификатов серверов, чтобы не допустить потери данных.</span><span class="sxs-lookup"><span data-stu-id="ddfae-155">This means that in addition to backing up the database, you have to make sure that you maintain backups of the server certificates to prevent data loss.</span></span> <span data-ttu-id="ddfae-156">Если сертификат станет недоступным, это приведет к потере данных.</span><span class="sxs-lookup"><span data-stu-id="ddfae-156">Data loss will result if the certificate is no longer available.</span></span> <span data-ttu-id="ddfae-157">Дополнительные сведения см. в статье [SQL Server Certificates and Asymmetric Keys](../sql-server-certificates-and-asymmetric-keys.md).</span><span class="sxs-lookup"><span data-stu-id="ddfae-157">For more information, see [SQL Server Certificates and Asymmetric Keys](../sql-server-certificates-and-asymmetric-keys.md).</span></span>

## <a name="commands-and-functions"></a><span data-ttu-id="ddfae-158">Команды и функции</span><span class="sxs-lookup"><span data-stu-id="ddfae-158">Commands and Functions</span></span>
 <span data-ttu-id="ddfae-159">Чтобы в следующих инструкциях можно было использовать сертификаты TDE, они должны быть зашифрованы главным ключом базы данных.</span><span class="sxs-lookup"><span data-stu-id="ddfae-159">The TDE certificates must be encrypted by the database master key to be accepted by the following statements.</span></span> <span data-ttu-id="ddfae-160">Если они зашифрованы только паролем, то они будут отклонены инструкциями как шифраторы.</span><span class="sxs-lookup"><span data-stu-id="ddfae-160">If they are encrypted by password only, the statements will reject them as encryptors.</span></span>

> [!IMPORTANT]
>  <span data-ttu-id="ddfae-161">Если после использования сертификатов в TDE включить защиту паролем, база данных станет недоступной после перезапуска.</span><span class="sxs-lookup"><span data-stu-id="ddfae-161">Altering the certificates to be password-protected after they are used by TDE will cause the database to become inaccessible after a restart.</span></span>

 <span data-ttu-id="ddfae-162">В следующей таблице представлены ссылки и объяснения команд и функций TDE.</span><span class="sxs-lookup"><span data-stu-id="ddfae-162">The following table provides links and explanations of TDE commands and functions.</span></span>

|<span data-ttu-id="ddfae-163">Команда или функция</span><span class="sxs-lookup"><span data-stu-id="ddfae-163">Command or function</span></span>|<span data-ttu-id="ddfae-164">Назначение</span><span class="sxs-lookup"><span data-stu-id="ddfae-164">Purpose</span></span>|
|-------------------------|-------------|
|[<span data-ttu-id="ddfae-165">CREATE DATABASE ENCRYPTION KEY (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="ddfae-165">CREATE DATABASE ENCRYPTION KEY &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/create-database-encryption-key-transact-sql)|<span data-ttu-id="ddfae-166">Создает ключ, используемый для шифрования базы данных.</span><span class="sxs-lookup"><span data-stu-id="ddfae-166">Creates a key that is used to encrypt a database.</span></span>|
|[<span data-ttu-id="ddfae-167">ALTER DATABASE ENCRYPTION KEY (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="ddfae-167">ALTER DATABASE ENCRYPTION KEY &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/alter-database-encryption-key-transact-sql)|<span data-ttu-id="ddfae-168">Изменяет ключ, используемый для шифрования базы данных.</span><span class="sxs-lookup"><span data-stu-id="ddfae-168">Changes the key that is used to encrypt a database.</span></span>|
|[<span data-ttu-id="ddfae-169">DROP DATABASE ENCRYPTION KEY (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="ddfae-169">DROP DATABASE ENCRYPTION KEY &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/drop-database-transact-sql)|<span data-ttu-id="ddfae-170">Удаляет ключ, использовавшийся для шифрования базы данных.</span><span class="sxs-lookup"><span data-stu-id="ddfae-170">Removes the key that was used to encrypt a database.</span></span>|
|[<span data-ttu-id="ddfae-171">Параметры ALTER DATABASE SET &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="ddfae-171">ALTER DATABASE SET Options &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/alter-database-transact-sql-set-options)|<span data-ttu-id="ddfae-172">Объясняет параметр `ALTER DATABASE`, который используется для включения TDE.</span><span class="sxs-lookup"><span data-stu-id="ddfae-172">Explains the `ALTER DATABASE` option that is used to enable TDE.</span></span>|

## <a name="catalog-views-and-dynamic-management-views"></a><span data-ttu-id="ddfae-173">Представления каталога и динамические административные представления</span><span class="sxs-lookup"><span data-stu-id="ddfae-173">Catalog Views and Dynamic Management Views</span></span>
 <span data-ttu-id="ddfae-174">В следующей таблице показаны представления каталогов и динамические административные представления TDE.</span><span class="sxs-lookup"><span data-stu-id="ddfae-174">The following table shows TDE catalog views and dynamic management views.</span></span>

|<span data-ttu-id="ddfae-175">Представление каталога или динамическое административное представление</span><span class="sxs-lookup"><span data-stu-id="ddfae-175">Catalog view or dynamic management view</span></span>|<span data-ttu-id="ddfae-176">Назначение</span><span class="sxs-lookup"><span data-stu-id="ddfae-176">Purpose</span></span>|
|---------------------------------------------|-------------|
|[<span data-ttu-id="ddfae-177">sys.databases (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="ddfae-177">sys.databases &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-catalog-views/sys-databases-transact-sql)|<span data-ttu-id="ddfae-178">Представление каталога со сведениями о базе данных.</span><span class="sxs-lookup"><span data-stu-id="ddfae-178">Catalog view that displays database information.</span></span>|
|[<span data-ttu-id="ddfae-179">sys.certificates (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="ddfae-179">sys.certificates &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-catalog-views/sys-certificates-transact-sql)|<span data-ttu-id="ddfae-180">Представление каталога с сертификатами из базы данных.</span><span class="sxs-lookup"><span data-stu-id="ddfae-180">Catalog view that shows the certificates in a database.</span></span>|
|[<span data-ttu-id="ddfae-181">sys.dm_database_encryption_keys (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="ddfae-181">sys.dm_database_encryption_keys &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-dynamic-management-views/sys-dm-database-encryption-keys-transact-sql)|<span data-ttu-id="ddfae-182">Динамическое административное представление со сведениями о ключах шифрования, используемых в базе данных, и состоянии шифрования базы данных.</span><span class="sxs-lookup"><span data-stu-id="ddfae-182">Dynamic management view that provides information about the encryption keys used in a database, and the state of encryption of a database.</span></span>|

## <a name="permissions"></a><span data-ttu-id="ddfae-183">Разрешения</span><span class="sxs-lookup"><span data-stu-id="ddfae-183">Permissions</span></span>
 <span data-ttu-id="ddfae-184">Для каждой функции или команды TDE действуют отдельные требования к разрешениям, описанные в таблицах выше.</span><span class="sxs-lookup"><span data-stu-id="ddfae-184">Each TDE feature and command has individual permission requirements, described in the tables shown earlier.</span></span>

 <span data-ttu-id="ddfae-185">Для просмотра метаданных, связанных с TDE, необходимо разрешение VIEW DEFINITION на сертификат.</span><span class="sxs-lookup"><span data-stu-id="ddfae-185">Viewing the metadata involved with TDE requires the VIEW DEFINITION permission on the certificate.</span></span>

## <a name="considerations"></a><span data-ttu-id="ddfae-186">Рекомендации</span><span class="sxs-lookup"><span data-stu-id="ddfae-186">Considerations</span></span>
 <span data-ttu-id="ddfae-187">Во время проверки базы данных на повторное шифрование, выполняемой для операции шифрования, операции обслуживания базы данных отключаются.</span><span class="sxs-lookup"><span data-stu-id="ddfae-187">While a re-encryption scan for a database encryption operation is in progress, maintenance operations to the database are disabled.</span></span> <span data-ttu-id="ddfae-188">Для выполнения операции обслуживания базы данных можно использовать однопользовательский режим.</span><span class="sxs-lookup"><span data-stu-id="ddfae-188">You can use the single user mode setting for the database to perform the maintenance operation.</span></span> <span data-ttu-id="ddfae-189">Дополнительные сведения см. в разделе [Установка однопользовательского режима базы данных](../../databases/set-a-database-to-single-user-mode.md).</span><span class="sxs-lookup"><span data-stu-id="ddfae-189">For more information, see [Set a Database to Single-user Mode](../../databases/set-a-database-to-single-user-mode.md).</span></span>

 <span data-ttu-id="ddfae-190">Состояние шифрования базы данных можно определить с помощью динамического административного представления sys.dm_database_encryption_keys.</span><span class="sxs-lookup"><span data-stu-id="ddfae-190">You can find the state of the database encryption using the sys.dm_database_encryption_keys dynamic management view.</span></span> <span data-ttu-id="ddfae-191">Дополнительные сведения см. выше в подразделе "Представления каталога и динамические административные представления" этого раздела.</span><span class="sxs-lookup"><span data-stu-id="ddfae-191">For more information, see the "Catalog Views and Dynamic Management Views"section earlier in this topic).</span></span>

 <span data-ttu-id="ddfae-192">В режиме TDE все файлы и файловые группы зашифрованы.</span><span class="sxs-lookup"><span data-stu-id="ddfae-192">In TDE, all files and filegroups in the database are encrypted.</span></span> <span data-ttu-id="ddfae-193">Если какие-либо файловые группы в базе данных помечены признаком READ ONLY, то операция шифрования базы данных завершится сбоем.</span><span class="sxs-lookup"><span data-stu-id="ddfae-193">If any filegroups in a database are marked READ ONLY, the database encryption operation will fail.</span></span>

 <span data-ttu-id="ddfae-194">Если база данных используется в зеркальном отображении базы данных или в доставке журналов, то зашифрованы будут обе базы данных.</span><span class="sxs-lookup"><span data-stu-id="ddfae-194">If a database is being used in database mirroring or log shipping, both databases will be encrypted.</span></span> <span data-ttu-id="ddfae-195">Транзакции журналов при передаче между ними будут передаваться в зашифрованном виде.</span><span class="sxs-lookup"><span data-stu-id="ddfae-195">The log transactions will be encrypted when sent between them.</span></span>

> [!IMPORTANT]
>  <span data-ttu-id="ddfae-196">Все новые полнотекстовые индексы будут шифроваться после включения шифрования базы данных.</span><span class="sxs-lookup"><span data-stu-id="ddfae-196">Any new full-text indexes will be encrypted when a database is set for encryption.</span></span> <span data-ttu-id="ddfae-197">Ранее созданные полнотекстовые индексы будут импортированы во время обновления и станут доступны для TDE после загрузки данных в [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="ddfae-197">Previously-created full-text indexes will be imported during upgrade and they will be in TDE after the data is loaded into [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="ddfae-198">Включение полнотекстового индекса в столбце может привести к тому, что во время полнотекстового индексирования данные из этого столбца будут записываться на диск в виде обычного текста.</span><span class="sxs-lookup"><span data-stu-id="ddfae-198">Enabling a full-text index on a column can cause that column's data to be written in plain text onto the disk during a full-text indexing scan.</span></span> <span data-ttu-id="ddfae-199">Не рекомендуется создавать полнотекстовый индекс на важных зашифрованных данных.</span><span class="sxs-lookup"><span data-stu-id="ddfae-199">We recommend that you do not create a full-text index on sensitive encrypted data.</span></span>

 <span data-ttu-id="ddfae-200">Зашифрованные данные подвергаются сжатию в значительно меньшей степени, чем незашифрованные.</span><span class="sxs-lookup"><span data-stu-id="ddfae-200">Encrypted data compresses significantly less than equivalent unencrypted data.</span></span> <span data-ttu-id="ddfae-201">Если TDE используется для шифрования базы данных, сжатие резервной копии не сможет значительно сжать хранилище резервных копий.</span><span class="sxs-lookup"><span data-stu-id="ddfae-201">If TDE is used to encrypt a database, backup compression will not be able to significantly compress the backup storage.</span></span> <span data-ttu-id="ddfae-202">Поэтому не рекомендуется совместное использование TDE и сжатия резервных копий.</span><span class="sxs-lookup"><span data-stu-id="ddfae-202">Therefore, using TDE and backup compression together is not recommended.</span></span>

### <a name="restrictions"></a><span data-ttu-id="ddfae-203">Ограничения</span><span class="sxs-lookup"><span data-stu-id="ddfae-203">Restrictions</span></span>
 <span data-ttu-id="ddfae-204">При первом шифровании базы данных, изменении ключа или дешифровании базы данных не допускаются следующие операции:</span><span class="sxs-lookup"><span data-stu-id="ddfae-204">The following operations are not allowed during initial database encryption, key change, or database decryption:</span></span>

-   <span data-ttu-id="ddfae-205">удаление файла из файловой группы в базе данных;</span><span class="sxs-lookup"><span data-stu-id="ddfae-205">Dropping a file from a filegroup in the database</span></span>

-   <span data-ttu-id="ddfae-206">удаление базы данных;</span><span class="sxs-lookup"><span data-stu-id="ddfae-206">Dropping the database</span></span>

-   <span data-ttu-id="ddfae-207">перевод базы данных в режим «вне сети»;</span><span class="sxs-lookup"><span data-stu-id="ddfae-207">Taking the database offline</span></span>

-   <span data-ttu-id="ddfae-208">отсоединение базы данных;</span><span class="sxs-lookup"><span data-stu-id="ddfae-208">Detaching a database</span></span>

-   <span data-ttu-id="ddfae-209">перевод базы данных или файловой группы в состояние READ ONLY.</span><span class="sxs-lookup"><span data-stu-id="ddfae-209">Transitioning a database or filegroup into a READ ONLY state</span></span>

 <span data-ttu-id="ddfae-210">При выполнении инструкций CREATE DATABASE ENCRYPTION KEY, ALTER DATABASE ENCRYPTION KEY, DROP DATABASE ENCRYPTION KEY или ALTER DATABASE...SET ENCRYPTION не допускаются следующие операции:</span><span class="sxs-lookup"><span data-stu-id="ddfae-210">The following operations are not allowed during the CREATE DATABASE ENCRYPTION KEY, ALTER DATABASE ENCRYPTION KEY, DROP DATABASE ENCRYPTION KEY, or ALTER DATABASE...SET ENCRYPTION statements.</span></span>

-   <span data-ttu-id="ddfae-211">удаление файла из файловой группы в базе данных;</span><span class="sxs-lookup"><span data-stu-id="ddfae-211">Dropping a file from a filegroup in the database.</span></span>

-   <span data-ttu-id="ddfae-212">Удаление базы данных.</span><span class="sxs-lookup"><span data-stu-id="ddfae-212">Dropping the database.</span></span>

-   <span data-ttu-id="ddfae-213">перевод базы данных в режим «вне сети»;</span><span class="sxs-lookup"><span data-stu-id="ddfae-213">Taking the database offline.</span></span>

-   <span data-ttu-id="ddfae-214">отсоединение базы данных;</span><span class="sxs-lookup"><span data-stu-id="ddfae-214">Detaching a database.</span></span>

-   <span data-ttu-id="ddfae-215">перевод базы данных или файловой группы в состояние READ ONLY;</span><span class="sxs-lookup"><span data-stu-id="ddfae-215">Transitioning a database or filegroup into a READ ONLY state.</span></span>

-   <span data-ttu-id="ddfae-216">использование команды ALTER DATABASE;</span><span class="sxs-lookup"><span data-stu-id="ddfae-216">Using an ALTER DATABASE command.</span></span>

-   <span data-ttu-id="ddfae-217">запуск резервного копирования базы данных или файла базы данных;</span><span class="sxs-lookup"><span data-stu-id="ddfae-217">Starting a database or database file backup.</span></span>

-   <span data-ttu-id="ddfae-218">запуск восстановления базы данных или файла базы данных;</span><span class="sxs-lookup"><span data-stu-id="ddfae-218">Starting a database or database file restore.</span></span>

-   <span data-ttu-id="ddfae-219">создание моментального снимка.</span><span class="sxs-lookup"><span data-stu-id="ddfae-219">Creating a snapshot.</span></span>

 <span data-ttu-id="ddfae-220">Следующие операции или условия запрещают выполнение инструкций CREATE DATABASE ENCRYPTION KEY, ALTER DATABASE ENCRYPTION KEY, DROP DATABASE ENCRYPTION KEY или ALTER DATABASE...SET ENCRYPTION.</span><span class="sxs-lookup"><span data-stu-id="ddfae-220">The following operations or conditions will prevent the CREATE DATABASE ENCRYPTION KEY, ALTER DATABASE ENCRYPTION KEY, DROP DATABASE ENCRYPTION KEY, or ALTER DATABASE...SET ENCRYPTION statements.</span></span>

-   <span data-ttu-id="ddfae-221">база данных предназначена только для чтения, или в ней есть файловые группы, доступные только для чтения;</span><span class="sxs-lookup"><span data-stu-id="ddfae-221">The database is read-only or has any read-only file groups.</span></span>

-   <span data-ttu-id="ddfae-222">выполняется команда ALTER DATABASE;</span><span class="sxs-lookup"><span data-stu-id="ddfae-222">An ALTER DATABASE command is executing.</span></span>

-   <span data-ttu-id="ddfae-223">выполняется какая-либо операция резервного копирования;</span><span class="sxs-lookup"><span data-stu-id="ddfae-223">Any data backup is running.</span></span>

-   <span data-ttu-id="ddfae-224">база данных находится в состоянии восстановления или в состоянии «вне сети»;</span><span class="sxs-lookup"><span data-stu-id="ddfae-224">The database is in an offline or restore condition.</span></span>

-   <span data-ttu-id="ddfae-225">идет создание моментального снимка;</span><span class="sxs-lookup"><span data-stu-id="ddfae-225">A snapshot is in progress.</span></span>

-   <span data-ttu-id="ddfae-226">выполняется задача обслуживания базы данных.</span><span class="sxs-lookup"><span data-stu-id="ddfae-226">Database maintenance tasks.</span></span>

 <span data-ttu-id="ddfae-227">При создании файлов базы данных быстрая инициализация файлов недоступна при включенном TDE.</span><span class="sxs-lookup"><span data-stu-id="ddfae-227">When creating database files, instant file initialization is not available when TDE is enabled.</span></span>

 <span data-ttu-id="ddfae-228">Чтобы зашифровать ключ шифрования базы данных с помощью асимметричного ключа, используемый асимметричный ключ должен находиться в поставщике расширенного управления ключами.</span><span class="sxs-lookup"><span data-stu-id="ddfae-228">In order to encrypt the database encryption key with an asymmetric key, the asymmetric key must reside on an extensible key management provider.</span></span>

### <a name="transparent-data-encryption-and-transaction-logs"></a><span data-ttu-id="ddfae-229">Прозрачное шифрование данных и журналы транзакций</span><span class="sxs-lookup"><span data-stu-id="ddfae-229">Transparent Data Encryption and Transaction Logs</span></span>
 <span data-ttu-id="ddfae-230">Включение TDE в базе данных приводит к «обнулению» оставшейся части виртуального журнала транзакций и принудительному началу нового виртуального журнала транзакций.</span><span class="sxs-lookup"><span data-stu-id="ddfae-230">Enabling a database to use TDE has the effect of "zeroing out" the remaining part of the virtual transaction log to force the next virtual transaction log.</span></span> <span data-ttu-id="ddfae-231">Это гарантирует, что после включения шифрования базы данных в журналах транзакций не останется простого текста.</span><span class="sxs-lookup"><span data-stu-id="ddfae-231">This guarantees that no clear text is left in the transaction logs after the database is set for encryption.</span></span> <span data-ttu-id="ddfae-232">Состояние шифрования файла журнала можно определить, просмотрев столбец `encryption_state` в представлении `sys.dm_database_encryption_keys`, как показано в примере:</span><span class="sxs-lookup"><span data-stu-id="ddfae-232">You can find the status of the log file encryption by viewing the `encryption_state` column in the `sys.dm_database_encryption_keys` view, as in this example:</span></span>

```
USE AdventureWorks2012;
GO
/* The value 3 represents an encrypted state 
   on the database and transaction logs. */
SELECT *
FROM sys.dm_database_encryption_keys
WHERE encryption_state = 3;
GO
```

 <span data-ttu-id="ddfae-233">Дополнительные сведения об архитектуре файлов журнала [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] см. в разделе [Журнал транзакций (SQL Server)](../../logs/the-transaction-log-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="ddfae-233">For more information about the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] log file architecture, see [The Transaction Log &#40;SQL Server&#41;](../../logs/the-transaction-log-sql-server.md).</span></span>

 <span data-ttu-id="ddfae-234">Все данные, записанные в журнале транзакций до изменения ключа шифрования базы данных, будут зашифрованы с помощью предыдущего ключа шифрования базы данных.</span><span class="sxs-lookup"><span data-stu-id="ddfae-234">All data written to the transaction log before a change in the database encryption key will be encrypted by using the previous database encryption key.</span></span>

 <span data-ttu-id="ddfae-235">После двукратного изменения ключа шифрования базы данных необходимо выполнить резервное копирование журнала перед следующим изменением ключа шифрования базы данных.</span><span class="sxs-lookup"><span data-stu-id="ddfae-235">After a database encryption key has been modified twice, a log backup must be performed before the database encryption key can be modified again.</span></span>

### <a name="transparent-data-encryption-and-the-tempdb-system-database"></a><span data-ttu-id="ddfae-236">Прозрачное шифрование данных и системная база данных tempdb</span><span class="sxs-lookup"><span data-stu-id="ddfae-236">Transparent Data Encryption and the tempdb System Database</span></span>
 <span data-ttu-id="ddfae-237">Системная база данных tempdb будет шифроваться, если с помощью TDE шифруется любая другая база данных в экземпляре [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="ddfae-237">The tempdb system database will be encrypted if any other database on the instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] is encrypted by using TDE.</span></span> <span data-ttu-id="ddfae-238">Это может влиять на производительность незашифрованных баз данных в том же экземпляре [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="ddfae-238">This might have a performance effect for unencrypted databases on the same instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="ddfae-239">Дополнительные сведения о системной базе данных tempdb см. в разделе [База данных tempdb](../../databases/tempdb-database.md).</span><span class="sxs-lookup"><span data-stu-id="ddfae-239">For more information about the tempdb system database, see [tempdb Database](../../databases/tempdb-database.md).</span></span>

### <a name="transparent-data-encryption-and-replication"></a><span data-ttu-id="ddfae-240">Прозрачное шифрование данных и репликация</span><span class="sxs-lookup"><span data-stu-id="ddfae-240">Transparent Data Encryption and Replication</span></span>
 <span data-ttu-id="ddfae-241">Репликация данных не выполняется автоматически в зашифрованном виде из базы данных с включенным TDE.</span><span class="sxs-lookup"><span data-stu-id="ddfae-241">Replication does not automatically replicate data from a TDE-enabled database in an encrypted form.</span></span> <span data-ttu-id="ddfae-242">Необходимо отдельно включить TDE, если нужно защитить базы данных распространителя и подписчика.</span><span class="sxs-lookup"><span data-stu-id="ddfae-242">You must separately enable TDE if you want to protect the distribution and subscriber databases.</span></span> <span data-ttu-id="ddfae-243">При репликации моментальных снимков и начальном распределении данных для репликации транзакций и репликации слиянием данные могут храниться в незашифрованных промежуточных файлах, например файлах BCP.</span><span class="sxs-lookup"><span data-stu-id="ddfae-243">Snapshot replication, as well as the initial distribution of data for transactional and merge replication, can store data in unencrypted intermediate files; for example, the bcp files.</span></span>  <span data-ttu-id="ddfae-244">Во время репликации транзакций или репликации слиянием шифрование можно включить для защиты каналов связи.</span><span class="sxs-lookup"><span data-stu-id="ddfae-244">During transactional or merge replication, encryption can be enabled to protect the communication channel.</span></span> <span data-ttu-id="ddfae-245">Дополнительные сведения см. в разделе [Включение шифрования соединений в компоненте Database Engine (диспетчер конфигураций SQL Server)](../../../database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine.md).</span><span class="sxs-lookup"><span data-stu-id="ddfae-245">For more information, see [Enable Encrypted Connections to the Database Engine &#40;SQL Server Configuration Manager&#41;](../../../database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine.md).</span></span>

### <a name="transparent-data-encryption-and-filestream-data"></a><span data-ttu-id="ddfae-246">Прозрачное шифрование данных и данные FILESTREAM</span><span class="sxs-lookup"><span data-stu-id="ddfae-246">Transparent Data Encryption and FILESTREAM DATA</span></span>
 <span data-ttu-id="ddfae-247">Данные FILESTREAM не шифруются, даже если включено прозрачное шифрование данных.</span><span class="sxs-lookup"><span data-stu-id="ddfae-247">FILESTREAM data is not encrypted even when TDE is enabled.</span></span>

### <a name="transparent-data-encryption-and-buffer-pool-extension"></a><span data-ttu-id="ddfae-248">Прозрачное шифрование и расширение буферного пула</span><span class="sxs-lookup"><span data-stu-id="ddfae-248">Transparent Data Encryption and Buffer Pool Extension</span></span>
 <span data-ttu-id="ddfae-249">Файлы, касающиеся расширения буферного пула, не шифруются, если база данных зашифрована с помощью прозрачного шифрования данных.</span><span class="sxs-lookup"><span data-stu-id="ddfae-249">Files related to buffer pool extension (BPE) are not encrypted when database is encrypted using TDE.</span></span> <span data-ttu-id="ddfae-250">Необходимо использовать средства шифрования на уровне файловой системы, такие как Bitlocker или файловая система EFS для файлов с расширением BPE.</span><span class="sxs-lookup"><span data-stu-id="ddfae-250">You must use file system level encryption tools like Bitlocker or EFS for BPE related files.</span></span>

## <a name="transparent-data-encryption-and-in-memory-oltp"></a><span data-ttu-id="ddfae-251">Прозрачное шифрование данных и In-Memory OLTP</span><span class="sxs-lookup"><span data-stu-id="ddfae-251">Transparent Data Encryption and In-Memory OLTP</span></span>
 <span data-ttu-id="ddfae-252">Прозрачное шифрование данных можно включить в базе данных, которая содержит объекты OLTP в памяти.</span><span class="sxs-lookup"><span data-stu-id="ddfae-252">TDE can be enabled on a database that has In-Memory OLTP objects.</span></span> <span data-ttu-id="ddfae-253">Записи журнала OLTP в памяти шифруются, если TDE включено.</span><span class="sxs-lookup"><span data-stu-id="ddfae-253">In-Memory OLTP log records are encrypted if TDE is enabled.</span></span> <span data-ttu-id="ddfae-254">Данные в файловой группе MEMORY_OPTIMIZED_DATA не шифруются при включенном TDE.</span><span class="sxs-lookup"><span data-stu-id="ddfae-254">Data in a MEMORY_OPTIMIZED_DATA filegroup is not encrypted if TDE is enabled.</span></span>

## <a name="see-also"></a><span data-ttu-id="ddfae-255">См. также:</span><span class="sxs-lookup"><span data-stu-id="ddfae-255">See Also</span></span>
 <span data-ttu-id="ddfae-256">[Перемещение базы данных, защищенной TDE, в другую SQL Server](move-a-tde-protected-database-to-another-sql-server.md) [включить TDE с использованием расширенного управления ключами](enable-tde-on-sql-server-using-ekm.md) [ПРОЗРАЧНОЕ шифрование данных с помощью базы данных SQL Azure](../../../database-engine/transparent-data-encryption-with-azure-sql-database.md) [SQL Server шифрование](sql-server-encryption.md) [SQL Server и ключи шифрования базы данных &#40;](sql-server-and-database-encryption-keys-database-engine.md) ядро СУБД&#41;[центра безопасности для SQL Server ядро СУБД и базы данных SQL Azure](../security-center-for-sql-server-database-engine-and-azure-sql-database.md) [FileStream](../../blob/filestream-sql-server.md) &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="ddfae-256">[Move a TDE Protected Database to Another SQL Server](move-a-tde-protected-database-to-another-sql-server.md) [Enable TDE Using EKM](enable-tde-on-sql-server-using-ekm.md) [Transparent Data Encryption with Azure SQL Database](../../../database-engine/transparent-data-encryption-with-azure-sql-database.md) [SQL Server Encryption](sql-server-encryption.md) [SQL Server and Database Encryption Keys &#40;Database Engine&#41;](sql-server-and-database-encryption-keys-database-engine.md) [Security Center for SQL Server Database Engine and Azure SQL Database](../security-center-for-sql-server-database-engine-and-azure-sql-database.md) [FILESTREAM &#40;SQL Server&#41;](../../blob/filestream-sql-server.md)</span></span>


