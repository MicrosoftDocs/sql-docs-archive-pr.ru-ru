---
title: Класс событий Broker:Conversation | Документация Майкрософт
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: supportability
ms.topic: conceptual
topic_type:
- apiref
helpviewer_keywords:
- Broker:Conversation event class
ms.assetid: 784707b5-cc67-46a3-8ae6-8f8ecf4b27c0
author: stevestein
ms.author: sstein
ms.openlocfilehash: 921b23c6aab8be27534d67d7a85bd7adc8258409
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87736335"
---
# <a name="brokerconversation-event-class"></a><span data-ttu-id="65e16-102">Broker:Conversation, класс событий</span><span class="sxs-lookup"><span data-stu-id="65e16-102">Broker:Conversation Event Class</span></span>
  [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="65e16-103">формирует событие **Broker:Conversation** , чтобы сообщать о ходе диалога компонента Service Broker.</span><span class="sxs-lookup"><span data-stu-id="65e16-103">generates a **Broker:Conversation** event to report the progress of a Service Broker conversation.</span></span>  
  
## <a name="brokerconversation-event-class-data-columns"></a><span data-ttu-id="65e16-104">Столбцы данных класса событий Broker:Conversation</span><span class="sxs-lookup"><span data-stu-id="65e16-104">Broker:Conversation Event Class Data Columns</span></span>  
  
|<span data-ttu-id="65e16-105">Столбец данных</span><span class="sxs-lookup"><span data-stu-id="65e16-105">Data column</span></span>|<span data-ttu-id="65e16-106">Тип</span><span class="sxs-lookup"><span data-stu-id="65e16-106">Type</span></span>|<span data-ttu-id="65e16-107">Description</span><span class="sxs-lookup"><span data-stu-id="65e16-107">Description</span></span>|<span data-ttu-id="65e16-108">Номер столбца</span><span class="sxs-lookup"><span data-stu-id="65e16-108">Column number</span></span>|<span data-ttu-id="65e16-109">Фильтруемый</span><span class="sxs-lookup"><span data-stu-id="65e16-109">Filterable</span></span>|  
|-----------------|----------|-----------------|-------------------|----------------|  
|<span data-ttu-id="65e16-110">**ApplicationName**</span><span class="sxs-lookup"><span data-stu-id="65e16-110">**ApplicationName**</span></span>|`nvarchar`|<span data-ttu-id="65e16-111">Имя клиентского приложения, установившего соединение с экземпляром [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="65e16-111">The name of the client application that created the connection to an instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="65e16-112">Этот столбец заполняется значениями, передаваемыми приложением, а не отображаемым именем программы.</span><span class="sxs-lookup"><span data-stu-id="65e16-112">This column is populated with the values passed by the application instead of the displayed name of the program.</span></span>|<span data-ttu-id="65e16-113">10</span><span class="sxs-lookup"><span data-stu-id="65e16-113">10</span></span>|<span data-ttu-id="65e16-114">Да</span><span class="sxs-lookup"><span data-stu-id="65e16-114">Yes</span></span>|  
|<span data-ttu-id="65e16-115">**ClientProcessID**</span><span class="sxs-lookup"><span data-stu-id="65e16-115">**ClientProcessID**</span></span>|`int`|<span data-ttu-id="65e16-116">Идентификатор, присвоенный компьютером сервера процессу, в котором работает клиентское приложение.</span><span class="sxs-lookup"><span data-stu-id="65e16-116">The ID assigned by the host computer to the process where the client application is running.</span></span> <span data-ttu-id="65e16-117">Этот столбец данных заполняется в том случае, если клиент вводит идентификатор клиентского процесса.</span><span class="sxs-lookup"><span data-stu-id="65e16-117">This data column is populated if the client process ID is provided by the client.</span></span>|<span data-ttu-id="65e16-118">9</span><span class="sxs-lookup"><span data-stu-id="65e16-118">9</span></span>|<span data-ttu-id="65e16-119">Да</span><span class="sxs-lookup"><span data-stu-id="65e16-119">Yes</span></span>|  
|<span data-ttu-id="65e16-120">**DatabaseID**</span><span class="sxs-lookup"><span data-stu-id="65e16-120">**DatabaseID**</span></span>|`int`|<span data-ttu-id="65e16-121">Идентификатор базы данных, указанный в инструкции USE *database* .</span><span class="sxs-lookup"><span data-stu-id="65e16-121">The ID of the database that is specified by the USE *database* statement.</span></span> <span data-ttu-id="65e16-122">Идентификатор базы данных по умолчанию, указанный в том случае, если инструкция USE *базы данных*не выполнялась.</span><span class="sxs-lookup"><span data-stu-id="65e16-122">If no USE *database*statement has been issued, the ID of the default database.</span></span> [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] <span data-ttu-id="65e16-123">отображает имя базы данных, если столбец данных **ServerName** захвачен при трассировке и сервер доступен.</span><span class="sxs-lookup"><span data-stu-id="65e16-123">displays the name of the database if the **ServerName** data column is captured in the trace and the server is available.</span></span> <span data-ttu-id="65e16-124">Определите значение для базы данных с помощью функции **DB_ID** .</span><span class="sxs-lookup"><span data-stu-id="65e16-124">Determine the value for a database by using the **DB_ID** function.</span></span>|<span data-ttu-id="65e16-125">3</span><span class="sxs-lookup"><span data-stu-id="65e16-125">3</span></span>|<span data-ttu-id="65e16-126">Да</span><span class="sxs-lookup"><span data-stu-id="65e16-126">Yes</span></span>|  
|<span data-ttu-id="65e16-127">**EventClass**</span><span class="sxs-lookup"><span data-stu-id="65e16-127">**EventClass**</span></span>|`int`|<span data-ttu-id="65e16-128">Тип захваченного класса событий.</span><span class="sxs-lookup"><span data-stu-id="65e16-128">The type of event class captured.</span></span> <span data-ttu-id="65e16-129">Всегда **124** для класса событий **Broker:Conversation**.</span><span class="sxs-lookup"><span data-stu-id="65e16-129">Always **124** for **Broker:Conversation**.</span></span>|<span data-ttu-id="65e16-130">27</span><span class="sxs-lookup"><span data-stu-id="65e16-130">27</span></span>|<span data-ttu-id="65e16-131">Нет</span><span class="sxs-lookup"><span data-stu-id="65e16-131">No</span></span>|  
|<span data-ttu-id="65e16-132">**EventSequence**</span><span class="sxs-lookup"><span data-stu-id="65e16-132">**EventSequence**</span></span>|`int`|<span data-ttu-id="65e16-133">Порядковый номер этого события.</span><span class="sxs-lookup"><span data-stu-id="65e16-133">Sequence number for this event.</span></span>|<span data-ttu-id="65e16-134">51</span><span class="sxs-lookup"><span data-stu-id="65e16-134">51</span></span>|<span data-ttu-id="65e16-135">нет</span><span class="sxs-lookup"><span data-stu-id="65e16-135">No</span></span>|  
|<span data-ttu-id="65e16-136">**EventSubClass**</span><span class="sxs-lookup"><span data-stu-id="65e16-136">**EventSubClass**</span></span>|`nvarchar`|<span data-ttu-id="65e16-137">Тип подкласса события.</span><span class="sxs-lookup"><span data-stu-id="65e16-137">The type of event subclass.</span></span> <span data-ttu-id="65e16-138">Предоставляет дополнительные сведения о каждом классе событий.</span><span class="sxs-lookup"><span data-stu-id="65e16-138">This provides more information about each event class.</span></span>|<span data-ttu-id="65e16-139">21</span><span class="sxs-lookup"><span data-stu-id="65e16-139">21</span></span>|<span data-ttu-id="65e16-140">Да</span><span class="sxs-lookup"><span data-stu-id="65e16-140">Yes</span></span>|  
|<span data-ttu-id="65e16-141">**GUID**</span><span class="sxs-lookup"><span data-stu-id="65e16-141">**GUID**</span></span>|`uniqueidentifier`|<span data-ttu-id="65e16-142">Идентификатор диалога.</span><span class="sxs-lookup"><span data-stu-id="65e16-142">The conversation ID of the dialog.</span></span> <span data-ttu-id="65e16-143">Этот идентификатор передается в составе сообщения и является общим для обоих участников диалога.</span><span class="sxs-lookup"><span data-stu-id="65e16-143">This identifier is transmitted as part of the message, and is shared between both sides of the conversation.</span></span>|<span data-ttu-id="65e16-144">54</span><span class="sxs-lookup"><span data-stu-id="65e16-144">54</span></span>|<span data-ttu-id="65e16-145">нет</span><span class="sxs-lookup"><span data-stu-id="65e16-145">No</span></span>|  
|<span data-ttu-id="65e16-146">**HostName**</span><span class="sxs-lookup"><span data-stu-id="65e16-146">**HostName**</span></span>|`nvarchar`|<span data-ttu-id="65e16-147">Имя компьютера, на котором выполняется клиентская программа.</span><span class="sxs-lookup"><span data-stu-id="65e16-147">The name of the computer on which the client is running.</span></span> <span data-ttu-id="65e16-148">Заполнение этого столбца данных производится в том случае, если клиент предоставляет имя узла.</span><span class="sxs-lookup"><span data-stu-id="65e16-148">This data column is populated if the host name is provided by the client.</span></span> <span data-ttu-id="65e16-149">Чтобы определить имя узла, используйте функцию **HOST_NAME** .</span><span class="sxs-lookup"><span data-stu-id="65e16-149">To determine the host name, use the **HOST_NAME** function.</span></span>|<span data-ttu-id="65e16-150">8</span><span class="sxs-lookup"><span data-stu-id="65e16-150">8</span></span>|<span data-ttu-id="65e16-151">Да</span><span class="sxs-lookup"><span data-stu-id="65e16-151">Yes</span></span>|  
|<span data-ttu-id="65e16-152">**IsSystem**</span><span class="sxs-lookup"><span data-stu-id="65e16-152">**IsSystem**</span></span>|`int`|<span data-ttu-id="65e16-153">Указывает, произошло событие в системном или в пользовательском процессе.</span><span class="sxs-lookup"><span data-stu-id="65e16-153">Indicates whether the event occurred on a system process or a user process.</span></span><br /><br /> <span data-ttu-id="65e16-154">0 = пользовательский процесс</span><span class="sxs-lookup"><span data-stu-id="65e16-154">0 = user</span></span><br /><br /> <span data-ttu-id="65e16-155">1 = системный процесс</span><span class="sxs-lookup"><span data-stu-id="65e16-155">1 = system</span></span>|<span data-ttu-id="65e16-156">60</span><span class="sxs-lookup"><span data-stu-id="65e16-156">60</span></span>|<span data-ttu-id="65e16-157">нет</span><span class="sxs-lookup"><span data-stu-id="65e16-157">No</span></span>|  
|<span data-ttu-id="65e16-158">**LoginSid**</span><span class="sxs-lookup"><span data-stu-id="65e16-158">**LoginSid**</span></span>|`image`|<span data-ttu-id="65e16-159">Идентификатор безопасности вошедшего в систему пользователя.</span><span class="sxs-lookup"><span data-stu-id="65e16-159">The security identification number (SID) of the logged-in user.</span></span> <span data-ttu-id="65e16-160">Значение идентификатора безопасности уникально для каждого имени входа на сервере.</span><span class="sxs-lookup"><span data-stu-id="65e16-160">Each SID is unique for each login in the server.</span></span>|<span data-ttu-id="65e16-161">41</span><span class="sxs-lookup"><span data-stu-id="65e16-161">41</span></span>|<span data-ttu-id="65e16-162">Да</span><span class="sxs-lookup"><span data-stu-id="65e16-162">Yes</span></span>|  
|<span data-ttu-id="65e16-163">**Имя_метода**</span><span class="sxs-lookup"><span data-stu-id="65e16-163">**MethodName**</span></span>|`nvarchar`|<span data-ttu-id="65e16-164">Группа сообщений, которой принадлежит диалог.</span><span class="sxs-lookup"><span data-stu-id="65e16-164">The conversation group that the conversation belongs to.</span></span>|<span data-ttu-id="65e16-165">47</span><span class="sxs-lookup"><span data-stu-id="65e16-165">47</span></span>|<span data-ttu-id="65e16-166">нет</span><span class="sxs-lookup"><span data-stu-id="65e16-166">No</span></span>|  
|<span data-ttu-id="65e16-167">**NTDomainName**</span><span class="sxs-lookup"><span data-stu-id="65e16-167">**NTDomainName**</span></span>|`nvarchar`|<span data-ttu-id="65e16-168">Домен Windows, к которому принадлежит пользователь.</span><span class="sxs-lookup"><span data-stu-id="65e16-168">The Windows domain to which the user belongs.</span></span>|<span data-ttu-id="65e16-169">7</span><span class="sxs-lookup"><span data-stu-id="65e16-169">7</span></span>|<span data-ttu-id="65e16-170">Да</span><span class="sxs-lookup"><span data-stu-id="65e16-170">Yes</span></span>|  
|<span data-ttu-id="65e16-171">**NTUserName**</span><span class="sxs-lookup"><span data-stu-id="65e16-171">**NTUserName**</span></span>|`nvarchar`|<span data-ttu-id="65e16-172">Имя пользователя, которому принадлежит соединение, создавшее это событие.</span><span class="sxs-lookup"><span data-stu-id="65e16-172">The name of the user that owns the connection that generated this event.</span></span>|<span data-ttu-id="65e16-173">6</span><span class="sxs-lookup"><span data-stu-id="65e16-173">6</span></span>|<span data-ttu-id="65e16-174">Да</span><span class="sxs-lookup"><span data-stu-id="65e16-174">Yes</span></span>|  
|<span data-ttu-id="65e16-175">**ObjectName**</span><span class="sxs-lookup"><span data-stu-id="65e16-175">**ObjectName**</span></span>|`nvarchar`|<span data-ttu-id="65e16-176">Дескриптор диалога.</span><span class="sxs-lookup"><span data-stu-id="65e16-176">The conversation handle of the dialog.</span></span>|<span data-ttu-id="65e16-177">34</span><span class="sxs-lookup"><span data-stu-id="65e16-177">34</span></span>|<span data-ttu-id="65e16-178">нет</span><span class="sxs-lookup"><span data-stu-id="65e16-178">No</span></span>|  
|<span data-ttu-id="65e16-179">**Приоритет**</span><span class="sxs-lookup"><span data-stu-id="65e16-179">**Priority**</span></span>|`int`|<span data-ttu-id="65e16-180">Уровень приоритета диалога</span><span class="sxs-lookup"><span data-stu-id="65e16-180">The priority level of the conversation</span></span>|<span data-ttu-id="65e16-181">5</span><span class="sxs-lookup"><span data-stu-id="65e16-181">5</span></span>|<span data-ttu-id="65e16-182">Да</span><span class="sxs-lookup"><span data-stu-id="65e16-182">Yes</span></span>|  
|<span data-ttu-id="65e16-183">**RoleName**</span><span class="sxs-lookup"><span data-stu-id="65e16-183">**RoleName**</span></span>|`nvarchar`|<span data-ttu-id="65e16-184">Роль дескриптора диалога.</span><span class="sxs-lookup"><span data-stu-id="65e16-184">The role of the conversation handle.</span></span> <span data-ttu-id="65e16-185">Это либо **initiator** , либо **target**.</span><span class="sxs-lookup"><span data-stu-id="65e16-185">This is either **initiator** or **target**.</span></span>|<span data-ttu-id="65e16-186">38</span><span class="sxs-lookup"><span data-stu-id="65e16-186">38</span></span>|<span data-ttu-id="65e16-187">нет</span><span class="sxs-lookup"><span data-stu-id="65e16-187">No</span></span>|  
|<span data-ttu-id="65e16-188">**ServerName**</span><span class="sxs-lookup"><span data-stu-id="65e16-188">**ServerName**</span></span>|`nvarchar`|<span data-ttu-id="65e16-189">Имя отслеживаемого экземпляра [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="65e16-189">The name of the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] that is being traced.</span></span>|<span data-ttu-id="65e16-190">26</span><span class="sxs-lookup"><span data-stu-id="65e16-190">26</span></span>|<span data-ttu-id="65e16-191">Нет</span><span class="sxs-lookup"><span data-stu-id="65e16-191">No</span></span>|  
|<span data-ttu-id="65e16-192">**Уровень серьезности**</span><span class="sxs-lookup"><span data-stu-id="65e16-192">**Severity**</span></span>|`int`|<span data-ttu-id="65e16-193">Уровень серьезности ошибки [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , если данное событие сообщает об ошибке.</span><span class="sxs-lookup"><span data-stu-id="65e16-193">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] error severity, if this event reports an error.</span></span>|<span data-ttu-id="65e16-194">29</span><span class="sxs-lookup"><span data-stu-id="65e16-194">29</span></span>|<span data-ttu-id="65e16-195">нет</span><span class="sxs-lookup"><span data-stu-id="65e16-195">No</span></span>|  
|<span data-ttu-id="65e16-196">**SPID**</span><span class="sxs-lookup"><span data-stu-id="65e16-196">**SPID**</span></span>|`int`|<span data-ttu-id="65e16-197">Идентификатор серверного процесса, который [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] присвоил процессу, связанному с клиентом.</span><span class="sxs-lookup"><span data-stu-id="65e16-197">The server process ID that is assigned by [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] to the process that is associated with the client.</span></span>|<span data-ttu-id="65e16-198">12</span><span class="sxs-lookup"><span data-stu-id="65e16-198">12</span></span>|<span data-ttu-id="65e16-199">Да</span><span class="sxs-lookup"><span data-stu-id="65e16-199">Yes</span></span>|  
|<span data-ttu-id="65e16-200">**StartTime**</span><span class="sxs-lookup"><span data-stu-id="65e16-200">**StartTime**</span></span>|`datetime`|<span data-ttu-id="65e16-201">Время начала события, если оно доступно.</span><span class="sxs-lookup"><span data-stu-id="65e16-201">The time when the event started, when available.</span></span>|<span data-ttu-id="65e16-202">14</span><span class="sxs-lookup"><span data-stu-id="65e16-202">14</span></span>|<span data-ttu-id="65e16-203">Да</span><span class="sxs-lookup"><span data-stu-id="65e16-203">Yes</span></span>|  
|<span data-ttu-id="65e16-204">**TextData**</span><span class="sxs-lookup"><span data-stu-id="65e16-204">**TextData**</span></span>|`ntext`|<span data-ttu-id="65e16-205">Текущее состояние диалога.</span><span class="sxs-lookup"><span data-stu-id="65e16-205">The current state of the conversation.</span></span> <span data-ttu-id="65e16-206">Это может быть:</span><span class="sxs-lookup"><span data-stu-id="65e16-206">One of the following:</span></span><br /><br /> <span data-ttu-id="65e16-207">**Так далее**.</span><span class="sxs-lookup"><span data-stu-id="65e16-207">**SO**.</span></span> <span data-ttu-id="65e16-208">Запущен на отправку.</span><span class="sxs-lookup"><span data-stu-id="65e16-208">Started outbound.</span></span> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="65e16-209">обработал инструкцию BEGIN CONVERSATION для этого диалога, но не было отправлено ни одного сообщения.</span><span class="sxs-lookup"><span data-stu-id="65e16-209">processed a BEGIN CONVERSATION for this conversation, but no messages have been sent.</span></span><br /><br /> <span data-ttu-id="65e16-210">**Si**.</span><span class="sxs-lookup"><span data-stu-id="65e16-210">**SI**.</span></span> <span data-ttu-id="65e16-211">Запущен на прием.</span><span class="sxs-lookup"><span data-stu-id="65e16-211">Started inbound.</span></span> <span data-ttu-id="65e16-212">Другой экземпляр компонента [!INCLUDE[ssDE](../../includes/ssde-md.md)] начал новый диалог с текущим экземпляром, но текущий экземпляр еще не завершил прием первого сообщения.</span><span class="sxs-lookup"><span data-stu-id="65e16-212">Another instance of the [!INCLUDE[ssDE](../../includes/ssde-md.md)] started a new conversation with the current instance, but the current instance has not finished receiving the first message.</span></span> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="65e16-213">может создать диалог в этом состоянии в том случае, если первая передача фрагментирована или [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] получает сообщения с нарушением порядка следования.</span><span class="sxs-lookup"><span data-stu-id="65e16-213">might create the conversation in this state if the first message is fragmented or [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] receives messages out of order.</span></span> <span data-ttu-id="65e16-214">Однако [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] может создать диалог сразу в состоянии CO, если первая передача, полученная для диалога, содержит первое сообщение целиком.</span><span class="sxs-lookup"><span data-stu-id="65e16-214">However, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] might create the conversation in the CO state if the first transmission that was received for the conversation contains the complete first message.</span></span><br /><br /> <span data-ttu-id="65e16-215">**Co**.</span><span class="sxs-lookup"><span data-stu-id="65e16-215">**CO**.</span></span> <span data-ttu-id="65e16-216">Ведение диалога.</span><span class="sxs-lookup"><span data-stu-id="65e16-216">Conversing.</span></span> <span data-ttu-id="65e16-217">Диалог установлен, и обе стороны диалога могут посылать сообщения.</span><span class="sxs-lookup"><span data-stu-id="65e16-217">The conversation is established, and both sides of the conversation can send messages.</span></span> <span data-ttu-id="65e16-218">Для обычной службы основная часть обмена данными происходит, когда диалог находится в этом состоянии.</span><span class="sxs-lookup"><span data-stu-id="65e16-218">Most communication for a typical service happens when the conversation is in this state.</span></span><br /><br /> <span data-ttu-id="65e16-219">**Di**.</span><span class="sxs-lookup"><span data-stu-id="65e16-219">**DI**.</span></span> <span data-ttu-id="65e16-220">Отключен на прием.</span><span class="sxs-lookup"><span data-stu-id="65e16-220">Disconnected inbound.</span></span> <span data-ttu-id="65e16-221">Удаленной стороной диалога была выполнена инструкция END CONVERSATION.</span><span class="sxs-lookup"><span data-stu-id="65e16-221">The remote side of the conversation has issued an END CONVERSATION.</span></span> <span data-ttu-id="65e16-222">Состояние диалога остается неизменным до тех пор, пока локальная сторона диалога не выдаст сообщение END CONVERSATION.</span><span class="sxs-lookup"><span data-stu-id="65e16-222">The conversation remains in this state until the local side of the conversation issues an END CONVERSATION.</span></span> <span data-ttu-id="65e16-223">Приложение может продолжать получать сообщения для диалога.</span><span class="sxs-lookup"><span data-stu-id="65e16-223">An application can still receive messages for the conversation.</span></span> <span data-ttu-id="65e16-224">Поскольку удаленная сторона диалога закончила диалог, приложение не может отправлять сообщения в этом диалоге.</span><span class="sxs-lookup"><span data-stu-id="65e16-224">Because the remote side of the conversation has ended the conversation, an application cannot send messages on this conversation.</span></span> <span data-ttu-id="65e16-225">Когда приложение выполняет инструкцию END CONVERSATION, диалог переходит в закрытое (CD) состояние.</span><span class="sxs-lookup"><span data-stu-id="65e16-225">When an application issues an END CONVERSATION, the conversation moves to the Closed (CD) state.</span></span><br /><br /> <span data-ttu-id="65e16-226">**Сделать**.</span><span class="sxs-lookup"><span data-stu-id="65e16-226">**DO**.</span></span> <span data-ttu-id="65e16-227">Отключен на отправку.</span><span class="sxs-lookup"><span data-stu-id="65e16-227">Disconnected outbound.</span></span> <span data-ttu-id="65e16-228">Локальной стороной диалога была выполнена инструкция END CONVERSATION.</span><span class="sxs-lookup"><span data-stu-id="65e16-228">The local side of the conversation has issued an END CONVERSATION.</span></span> <span data-ttu-id="65e16-229">Состояние диалога остается неизменным до тех пор, пока удаленная часть диалога не подтвердит сообщение END CONVERSATION.</span><span class="sxs-lookup"><span data-stu-id="65e16-229">The conversation remains in this state until the remote side of the conversation acknowledges the END CONVERSATION.</span></span> <span data-ttu-id="65e16-230">Приложение не может отправлять и получать сообщения для диалога.</span><span class="sxs-lookup"><span data-stu-id="65e16-230">An application cannot send or receive messages for the conversation.</span></span> <span data-ttu-id="65e16-231">Когда удаленная сторона диалога подтверждает END CONVERSATION, диалог переходит в закрытое (CD) состояние.</span><span class="sxs-lookup"><span data-stu-id="65e16-231">When the remote side of the conversation acknowledges the END CONVERSATION, the conversation moves to the Closed (CD) state.</span></span><br /><br /> <span data-ttu-id="65e16-232">**ER**.</span><span class="sxs-lookup"><span data-stu-id="65e16-232">**ER**.</span></span> <span data-ttu-id="65e16-233">Ошибка.</span><span class="sxs-lookup"><span data-stu-id="65e16-233">Error.</span></span> <span data-ttu-id="65e16-234">В данной конечной точке произошла ошибка.</span><span class="sxs-lookup"><span data-stu-id="65e16-234">An error has occurred on this endpoint.</span></span> <span data-ttu-id="65e16-235">Столбцы Error, Severity и State содержат подробные данные о возникшей ошибке.</span><span class="sxs-lookup"><span data-stu-id="65e16-235">The Error, Severity, and State columns contain information about the specific error that occurred.</span></span><br /><br /> <span data-ttu-id="65e16-236">**Компакт-диск**.</span><span class="sxs-lookup"><span data-stu-id="65e16-236">**CD**.</span></span> <span data-ttu-id="65e16-237">Закрыт.</span><span class="sxs-lookup"><span data-stu-id="65e16-237">Closed.</span></span> <span data-ttu-id="65e16-238">Конечная точка диалога больше не используется.</span><span class="sxs-lookup"><span data-stu-id="65e16-238">The conversation endpoint is no longer in use.</span></span>|<span data-ttu-id="65e16-239">1</span><span class="sxs-lookup"><span data-stu-id="65e16-239">1</span></span>|<span data-ttu-id="65e16-240">Да</span><span class="sxs-lookup"><span data-stu-id="65e16-240">Yes</span></span>|  
|<span data-ttu-id="65e16-241">**Transaction ID**</span><span class="sxs-lookup"><span data-stu-id="65e16-241">**Transaction ID**</span></span>|`bigint`|<span data-ttu-id="65e16-242">Назначенный системой идентификатор транзакции.</span><span class="sxs-lookup"><span data-stu-id="65e16-242">The system-assigned ID of the transaction.</span></span>|<span data-ttu-id="65e16-243">4</span><span class="sxs-lookup"><span data-stu-id="65e16-243">4</span></span>|<span data-ttu-id="65e16-244">нет</span><span class="sxs-lookup"><span data-stu-id="65e16-244">No</span></span>|  
  
 <span data-ttu-id="65e16-245">В представленной ниже таблице перечислены значения подклассов для данного класса событий.</span><span class="sxs-lookup"><span data-stu-id="65e16-245">The following table lists the subclass values for this event class.</span></span>  
  
|<span data-ttu-id="65e16-246">ID</span><span class="sxs-lookup"><span data-stu-id="65e16-246">ID</span></span>|<span data-ttu-id="65e16-247">Подкласс</span><span class="sxs-lookup"><span data-stu-id="65e16-247">Subclass</span></span>|<span data-ttu-id="65e16-248">Описание</span><span class="sxs-lookup"><span data-stu-id="65e16-248">Description</span></span>|  
|--------|--------------|-----------------|  
|<span data-ttu-id="65e16-249">1</span><span class="sxs-lookup"><span data-stu-id="65e16-249">1</span></span>|<span data-ttu-id="65e16-250">SEND Message</span><span class="sxs-lookup"><span data-stu-id="65e16-250">SEND Message</span></span>|[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]<span data-ttu-id="65e16-251">создает событие **отправки сообщения** , когда [!INCLUDE[ssDE](../../includes/ssde-md.md)] ВЫПОЛНЯЕТ инструкцию SEND.</span><span class="sxs-lookup"><span data-stu-id="65e16-251">generates a **SEND Message** event when the [!INCLUDE[ssDE](../../includes/ssde-md.md)] executes a SEND statement.</span></span>|  
|<span data-ttu-id="65e16-252">2</span><span class="sxs-lookup"><span data-stu-id="65e16-252">2</span></span>|<span data-ttu-id="65e16-253">END CONVERSATION</span><span class="sxs-lookup"><span data-stu-id="65e16-253">END CONVERSATION</span></span>|[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]<span data-ttu-id="65e16-254">формирует событие **END CONVERSATION** [!INCLUDE[ssDE](../../includes/ssde-md.md)] , когда ВЫПОЛНЯЕТ инструкцию END CONVERSATION, которая не включает предложение WITH ERROR.</span><span class="sxs-lookup"><span data-stu-id="65e16-254">generates an **END CONVERSATION** event when the [!INCLUDE[ssDE](../../includes/ssde-md.md)] executes an END CONVERSATION statement that does not include the WITH ERROR clause.</span></span>|  
|<span data-ttu-id="65e16-255">3</span><span class="sxs-lookup"><span data-stu-id="65e16-255">3</span></span>|<span data-ttu-id="65e16-256">END CONVERSATION WITH ERROR</span><span class="sxs-lookup"><span data-stu-id="65e16-256">END CONVERSATION WITH ERROR</span></span>|[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]<span data-ttu-id="65e16-257">формирует **завершающее событие с ошибкой** , когда [!INCLUDE[ssDE](../../includes/ssde-md.md)] ВЫПОЛНЯЕТ инструкцию END CONVERSATION, ВКЛЮЧАЮЩУЮ предложение WITH ERROR.</span><span class="sxs-lookup"><span data-stu-id="65e16-257">generates an **END CONVERSATION WITH ERROR** event when the [!INCLUDE[ssDE](../../includes/ssde-md.md)] executes an END CONVERSATION statement that includes the WITH ERROR clause.</span></span>|  
|<span data-ttu-id="65e16-258">4</span><span class="sxs-lookup"><span data-stu-id="65e16-258">4</span></span>|<span data-ttu-id="65e16-259">Broker Initiated Error</span><span class="sxs-lookup"><span data-stu-id="65e16-259">Broker Initiated Error</span></span>|[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]<span data-ttu-id="65e16-260">создает событие **ошибки, инициированное брокером** , каждый раз, когда [!INCLUDE[ssSB](../../includes/sssb-md.md)] создает сообщение об ошибке.</span><span class="sxs-lookup"><span data-stu-id="65e16-260">generates a **Broker Initiated Error** event whenever [!INCLUDE[ssSB](../../includes/sssb-md.md)] creates an error message.</span></span> <span data-ttu-id="65e16-261">Например, если компонент [!INCLUDE[ssSB](../../includes/sssb-md.md)] не может успешно направить сообщение для диалога, то создает сообщение об ошибке для диалога и формирует это событие.</span><span class="sxs-lookup"><span data-stu-id="65e16-261">For example, when [!INCLUDE[ssSB](../../includes/sssb-md.md)] cannot successfully route a message for a dialog, the broker creates an error message for the dialog and generates this event.</span></span> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="65e16-262">не создает это событие, если прикладная программа завершает диалог с ошибкой.</span><span class="sxs-lookup"><span data-stu-id="65e16-262">does not generate this event when an application program ends a conversation with an error.</span></span>|  
|<span data-ttu-id="65e16-263">5</span><span class="sxs-lookup"><span data-stu-id="65e16-263">5</span></span>|<span data-ttu-id="65e16-264">Terminate Dialog</span><span class="sxs-lookup"><span data-stu-id="65e16-264">Terminate Dialog</span></span>|[!INCLUDE[ssSB](../../includes/sssb-md.md)] <span data-ttu-id="65e16-265">прекратил диалог.</span><span class="sxs-lookup"><span data-stu-id="65e16-265">terminated the dialog.</span></span> [!INCLUDE[ssSB](../../includes/sssb-md.md)] <span data-ttu-id="65e16-266">прекращает диалоги в ответ на появление условий, не позволяющих продолжить диалог, но не являющихся ошибками или нормальным завершением диалога.</span><span class="sxs-lookup"><span data-stu-id="65e16-266">terminates dialogs in response to conditions that prevent the dialog from continuing, but which are not errors or the normal end of a conversation.</span></span> <span data-ttu-id="65e16-267">Например, в случае удаления службы компонент [!INCLUDE[ssSB](../../includes/sssb-md.md)] прерывает все диалоги для этой службы.</span><span class="sxs-lookup"><span data-stu-id="65e16-267">For example, dropping a service causes [!INCLUDE[ssSB](../../includes/sssb-md.md)] to terminate all dialogs for that service.</span></span>|  
|<span data-ttu-id="65e16-268">6</span><span class="sxs-lookup"><span data-stu-id="65e16-268">6</span></span>|<span data-ttu-id="65e16-269">Received Sequenced Message</span><span class="sxs-lookup"><span data-stu-id="65e16-269">Received Sequenced Message</span></span>|[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]<span data-ttu-id="65e16-270">создает класс событий **Received последовательного сообщения** [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , когда получает сообщение, содержащее порядковый номер сообщения.</span><span class="sxs-lookup"><span data-stu-id="65e16-270">generates a **Received Sequenced Message** event class when [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] receives a message that contains a message sequence number.</span></span> <span data-ttu-id="65e16-271">Все определяемые пользователем типы сообщений являются последовательными.</span><span class="sxs-lookup"><span data-stu-id="65e16-271">All user-defined message types are sequenced messages.</span></span> [!INCLUDE[ssSB](../../includes/sssb-md.md)] <span data-ttu-id="65e16-272">формирует сообщение с нарушением порядка следования в двух случаях.</span><span class="sxs-lookup"><span data-stu-id="65e16-272">generates an unsequenced message in two cases:</span></span><br /><br /> <span data-ttu-id="65e16-273">Сообщения об ошибках, формируемых компонентом [!INCLUDE[ssSB](../../includes/sssb-md.md)] , являются непоследовательными.</span><span class="sxs-lookup"><span data-stu-id="65e16-273">Error messages generated by [!INCLUDE[ssSB](../../includes/sssb-md.md)] are unsequenced.</span></span><br /><br /> <span data-ttu-id="65e16-274">Подтверждения сообщений могут быть непоследовательными.</span><span class="sxs-lookup"><span data-stu-id="65e16-274">Message acknowledgements might be unsequenced.</span></span> <span data-ttu-id="65e16-275">Чтобы повысить эффективность, компонент [!INCLUDE[ssSB](../../includes/sssb-md.md)] включает подтверждения сообщений в состав последовательного сообщения.</span><span class="sxs-lookup"><span data-stu-id="65e16-275">For efficiency, [!INCLUDE[ssSB](../../includes/sssb-md.md)] includes message any available acknowledgement as part of a sequenced message .</span></span> <span data-ttu-id="65e16-276">Однако, если приложение не посылает последовательные сообщения в удаленную конечную точку в течение определенного периода времени, компонент [!INCLUDE[ssSB](../../includes/sssb-md.md)] создает непоследовательное сообщение для подтверждения сообщения.</span><span class="sxs-lookup"><span data-stu-id="65e16-276">However, if an application does not send a sequenced message to the remote endpoint within a certain period of time, [!INCLUDE[ssSB](../../includes/sssb-md.md)] creates an unsequenced message for the message acknowledgement.</span></span>|  
|<span data-ttu-id="65e16-277">7</span><span class="sxs-lookup"><span data-stu-id="65e16-277">7</span></span>|<span data-ttu-id="65e16-278">Received END CONVERSATION</span><span class="sxs-lookup"><span data-stu-id="65e16-278">Received END CONVERSATION</span></span>|[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="65e16-279">создает событие «Received END CONVERSATION», когда [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] получает сообщение «End Dialog» от другой стороны диалога.</span><span class="sxs-lookup"><span data-stu-id="65e16-279">generates a Received END CONVERSATION event when [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] receives an End Dialog message from the other side of the conversation.</span></span>|  
|<span data-ttu-id="65e16-280">8</span><span class="sxs-lookup"><span data-stu-id="65e16-280">8</span></span>|<span data-ttu-id="65e16-281">Received END CONVERSATION WITH ERROR</span><span class="sxs-lookup"><span data-stu-id="65e16-281">Received END CONVERSATION WITH ERROR</span></span>|[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]<span data-ttu-id="65e16-282">создает событие **Received END CONVERSATION WITH ERROR** , когда [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] получает определяемую пользователем ошибку с другой стороны диалога.</span><span class="sxs-lookup"><span data-stu-id="65e16-282">generates a **Received END CONVERSATION WITH ERROR** event when [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] receives a user-defined error from the other side of the conversation.</span></span> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="65e16-283">не создает это событие, если [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] получает сообщение об определяемой посредником ошибке.</span><span class="sxs-lookup"><span data-stu-id="65e16-283">does not generate this event when [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] receives a broker-defined error.</span></span>|  
|<span data-ttu-id="65e16-284">9</span><span class="sxs-lookup"><span data-stu-id="65e16-284">9</span></span>|<span data-ttu-id="65e16-285">Received Broker Error Message</span><span class="sxs-lookup"><span data-stu-id="65e16-285">Received Broker Error Message</span></span>|[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]<span data-ttu-id="65e16-286">создает событие **Received Error Message (полученное сообщение об ошибке компонента Service Broker** ), когда [!INCLUDE[ssSB](../../includes/sssb-md.md)] получает определенное брокером сообщение об ошибке от другой стороны диалога.</span><span class="sxs-lookup"><span data-stu-id="65e16-286">generates a **Received Broker Error Message** event when [!INCLUDE[ssSB](../../includes/sssb-md.md)] receives a broker-defined error message from the other side of the conversation.</span></span> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="65e16-287">не создает этого события, если компонент [!INCLUDE[ssSB](../../includes/sssb-md.md)] получает сообщение об ошибке, формируемое приложением.</span><span class="sxs-lookup"><span data-stu-id="65e16-287">does not generate this event when [!INCLUDE[ssSB](../../includes/sssb-md.md)] receives an error message that was generated by an application.</span></span><br /><br /> <span data-ttu-id="65e16-288">Например, если текущая база данных содержит маршрут по умолчанию к базе данных пересылки, компонент [!INCLUDE[ssSB](../../includes/sssb-md.md)] направляет сообщение с неизвестным именем службы в базу данных пересылки.</span><span class="sxs-lookup"><span data-stu-id="65e16-288">For example, if the current database contains a default route to a forwarding database, [!INCLUDE[ssSB](../../includes/sssb-md.md)] routes a message with an unknown service name to the forwarding database.</span></span> <span data-ttu-id="65e16-289">Если база данных пересылки не может определить маршрут для сообщения, посредник в этой базе данных создает сообщение об ошибке и возвращает его в текущую базу данных.</span><span class="sxs-lookup"><span data-stu-id="65e16-289">If that database cannot route the message, the broker in that database creates an error message and returns that error message to the current database.</span></span> <span data-ttu-id="65e16-290">Если текущая база данных получает формируемое посредником сообщение об ошибке из базы данных пересылки, текущая база данных формирует событие **Received Broker Error Message** .</span><span class="sxs-lookup"><span data-stu-id="65e16-290">When the current database receives the broker-generated error from the forwarding database, the current database generates a **Received Broker Error Message** event.</span></span>|  
|<span data-ttu-id="65e16-291">10</span><span class="sxs-lookup"><span data-stu-id="65e16-291">10</span></span>|<span data-ttu-id="65e16-292">Received END CONVERSATION Ack</span><span class="sxs-lookup"><span data-stu-id="65e16-292">Received END CONVERSATION Ack</span></span>|[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]<span data-ttu-id="65e16-293">создает класс событий **Received END CONVERSATION ACK** , когда другая сторона диалога подтверждает завершение диалогового окна или сообщения об ошибке, отправленного этой стороной диалога.</span><span class="sxs-lookup"><span data-stu-id="65e16-293">generates a **Received END CONVERSATION Ack** event class when the other side of a conversation acknowledges an End Dialog or Error message sent by this side of the conversation.</span></span>|  
|<span data-ttu-id="65e16-294">11</span><span class="sxs-lookup"><span data-stu-id="65e16-294">11</span></span>|<span data-ttu-id="65e16-295">BEGIN DIALOG</span><span class="sxs-lookup"><span data-stu-id="65e16-295">BEGIN DIALOG</span></span>|[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]<span data-ttu-id="65e16-296">создает событие **BEGIN DIALOG** , когда ядро СУБД ВЫПОЛНЯЕТ команду BEGIN DIALOG.</span><span class="sxs-lookup"><span data-stu-id="65e16-296">generates a **BEGIN DIALOG** event when the Database Engine executes a BEGIN DIALOG command.</span></span>|  
|<span data-ttu-id="65e16-297">12</span><span class="sxs-lookup"><span data-stu-id="65e16-297">12</span></span>|<span data-ttu-id="65e16-298">Dialog Created</span><span class="sxs-lookup"><span data-stu-id="65e16-298">Dialog Created</span></span>|[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]<span data-ttu-id="65e16-299">создает событие **создания диалогового окна** при [!INCLUDE[ssSB](../../includes/sssb-md.md)] создании конечной точки для диалогового окна.</span><span class="sxs-lookup"><span data-stu-id="65e16-299">generates a **Dialog Created** event when [!INCLUDE[ssSB](../../includes/sssb-md.md)] creates an endpoint for a dialog.</span></span> [!INCLUDE[ssSB](../../includes/sssb-md.md)] <span data-ttu-id="65e16-300">создает конечную точку каждый раз при установлении нового диалога, независимо от того, является текущая база данных инициатором или целью диалога.</span><span class="sxs-lookup"><span data-stu-id="65e16-300">creates an endpoint whenever a new dialog is established, regardless of whether the current database is the initiator or the target of the dialog.</span></span>|  
|<span data-ttu-id="65e16-301">13</span><span class="sxs-lookup"><span data-stu-id="65e16-301">13</span></span>|<span data-ttu-id="65e16-302">END CONVERSATION WITH CLEANUP</span><span class="sxs-lookup"><span data-stu-id="65e16-302">END CONVERSATION WITH CLEANUP</span></span>|[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="65e16-303">формирует событие END CONVERSATION WITH CLEANUP, когда [!INCLUDE[ssDE](../../includes/ssde-md.md)] выполняет инструкцию END CONVERSATION, в которую входит предложение WITH CLEANUP.</span><span class="sxs-lookup"><span data-stu-id="65e16-303">generates an END CONVERSATION WITH CLEANUP event when the [!INCLUDE[ssDE](../../includes/ssde-md.md)] executes an END CONVERSATION statement that includes the WITH CLEANUP clause.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="65e16-304">См. также:</span><span class="sxs-lookup"><span data-stu-id="65e16-304">See Also</span></span>  
 [<span data-ttu-id="65e16-305">SQL Server Service Broker</span><span class="sxs-lookup"><span data-stu-id="65e16-305">SQL Server Service Broker</span></span>](../../database-engine/configure-windows/sql-server-service-broker.md)  
  
  
