---
title: Класс событий Audit Broker Conversation | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: supportability
ms.topic: conceptual
topic_type:
- apiref
helpviewer_keywords:
- Audit Broker Conversation event class
ms.assetid: d58e3577-e297-42e5-b8fe-206665a75d13
author: stevestein
ms.author: sstein
ms.openlocfilehash: 46c09737aeafffd04f3dc2c129692bbf78d2c096
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87732682"
---
# <a name="audit-broker-conversation-event-class"></a><span data-ttu-id="cdf5f-102">Audit Broker Conversation, класс событий</span><span class="sxs-lookup"><span data-stu-id="cdf5f-102">Audit Broker Conversation Event Class</span></span>
  [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="cdf5f-103">создает событие **Audit Broker Conversation** для выдачи сообщений аудита, относящихся к безопасности диалога компонента Service Broker.</span><span class="sxs-lookup"><span data-stu-id="cdf5f-103">creates an **Audit Broker Conversation** event to report audit messages related to Service Broker dialog security.</span></span>  
  
## <a name="audit-broker-conversation-event-class-data-columns"></a><span data-ttu-id="cdf5f-104">Столбцы данных класса события Audit Broker Conversation</span><span class="sxs-lookup"><span data-stu-id="cdf5f-104">Audit Broker Conversation Event Class Data Columns</span></span>  
  
|<span data-ttu-id="cdf5f-105">Столбец данных</span><span class="sxs-lookup"><span data-stu-id="cdf5f-105">Data column</span></span>|<span data-ttu-id="cdf5f-106">Тип</span><span class="sxs-lookup"><span data-stu-id="cdf5f-106">Type</span></span>|<span data-ttu-id="cdf5f-107">Description</span><span class="sxs-lookup"><span data-stu-id="cdf5f-107">Description</span></span>|<span data-ttu-id="cdf5f-108">Номер столбца</span><span class="sxs-lookup"><span data-stu-id="cdf5f-108">Column number</span></span>|<span data-ttu-id="cdf5f-109">Фильтруемый</span><span class="sxs-lookup"><span data-stu-id="cdf5f-109">Filterable</span></span>|  
|-----------------|----------|-----------------|-------------------|----------------|  
|<span data-ttu-id="cdf5f-110">**ApplicationName**</span><span class="sxs-lookup"><span data-stu-id="cdf5f-110">**ApplicationName**</span></span>|<span data-ttu-id="cdf5f-111">**nvarchar**</span><span class="sxs-lookup"><span data-stu-id="cdf5f-111">**nvarchar**</span></span>|<span data-ttu-id="cdf5f-112">Имя клиентского приложения, установившего соединение с экземпляром [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="cdf5f-112">The name of the client application that created the connection to an instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="cdf5f-113">Этот столбец заполняется значениями, передаваемыми приложением, а не отображаемым именем программы.</span><span class="sxs-lookup"><span data-stu-id="cdf5f-113">This column is populated with the values passed by the application rather than the displayed name of the program.</span></span>|<span data-ttu-id="cdf5f-114">10</span><span class="sxs-lookup"><span data-stu-id="cdf5f-114">10</span></span>|<span data-ttu-id="cdf5f-115">Да</span><span class="sxs-lookup"><span data-stu-id="cdf5f-115">Yes</span></span>|  
|<span data-ttu-id="cdf5f-116">**BigintData1**</span><span class="sxs-lookup"><span data-stu-id="cdf5f-116">**BigintData1**</span></span>|<span data-ttu-id="cdf5f-117">**bigint**</span><span class="sxs-lookup"><span data-stu-id="cdf5f-117">**bigint**</span></span>|<span data-ttu-id="cdf5f-118">Последовательный номер сообщения.</span><span class="sxs-lookup"><span data-stu-id="cdf5f-118">The message sequence number of the message.</span></span>|<span data-ttu-id="cdf5f-119">52</span><span class="sxs-lookup"><span data-stu-id="cdf5f-119">52</span></span>|<span data-ttu-id="cdf5f-120">нет</span><span class="sxs-lookup"><span data-stu-id="cdf5f-120">No</span></span>|  
|<span data-ttu-id="cdf5f-121">**ClientProcessID**</span><span class="sxs-lookup"><span data-stu-id="cdf5f-121">**ClientProcessID**</span></span>|<span data-ttu-id="cdf5f-122">**int**</span><span class="sxs-lookup"><span data-stu-id="cdf5f-122">**int**</span></span>|<span data-ttu-id="cdf5f-123">Идентификатор, присвоенный компьютером сервера процессу, в котором работает клиентское приложение.</span><span class="sxs-lookup"><span data-stu-id="cdf5f-123">The ID assigned by the host computer to the process where the client application is running.</span></span> <span data-ttu-id="cdf5f-124">Этот столбец данных заполняется в том случае, если клиент вводит идентификатор клиентского процесса.</span><span class="sxs-lookup"><span data-stu-id="cdf5f-124">This data column is populated if the client process ID is provided by the client.</span></span>|<span data-ttu-id="cdf5f-125">9</span><span class="sxs-lookup"><span data-stu-id="cdf5f-125">9</span></span>|<span data-ttu-id="cdf5f-126">Да</span><span class="sxs-lookup"><span data-stu-id="cdf5f-126">Yes</span></span>|  
|<span data-ttu-id="cdf5f-127">**DatabaseID**</span><span class="sxs-lookup"><span data-stu-id="cdf5f-127">**DatabaseID**</span></span>|<span data-ttu-id="cdf5f-128">**int**</span><span class="sxs-lookup"><span data-stu-id="cdf5f-128">**int**</span></span>|<span data-ttu-id="cdf5f-129">Идентификатор базы данных, указанной в инструкции USE *database* , или базы данных по умолчанию, если для данного экземпляра инструкция USE *database* не выполнялась.</span><span class="sxs-lookup"><span data-stu-id="cdf5f-129">The ID of the database specified by the USE *database* statement, or the ID of the default database if no USE *database* statement has been issued for a given instance.</span></span> [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] <span data-ttu-id="cdf5f-130">отображает имя базы данных, если столбец данных **ServerName** захвачен при трассировке и сервер доступен.</span><span class="sxs-lookup"><span data-stu-id="cdf5f-130">displays the name of the database if the **ServerName** data column is captured in the trace and the server is available.</span></span> <span data-ttu-id="cdf5f-131">Определите значение для базы данных, используя функцию DB_ID.</span><span class="sxs-lookup"><span data-stu-id="cdf5f-131">Determine the value for a database by using the DB_ID function.</span></span>|<span data-ttu-id="cdf5f-132">3</span><span class="sxs-lookup"><span data-stu-id="cdf5f-132">3</span></span>|<span data-ttu-id="cdf5f-133">Да</span><span class="sxs-lookup"><span data-stu-id="cdf5f-133">Yes</span></span>|  
|<span data-ttu-id="cdf5f-134">**Ошибка**</span><span class="sxs-lookup"><span data-stu-id="cdf5f-134">**Error**</span></span>|<span data-ttu-id="cdf5f-135">**int**</span><span class="sxs-lookup"><span data-stu-id="cdf5f-135">**int**</span></span>|<span data-ttu-id="cdf5f-136">Код ошибки [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , если событие сигнализирует об ошибке.</span><span class="sxs-lookup"><span data-stu-id="cdf5f-136">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] error number, if this event reports an error.</span></span>|<span data-ttu-id="cdf5f-137">31</span><span class="sxs-lookup"><span data-stu-id="cdf5f-137">31</span></span>|<span data-ttu-id="cdf5f-138">нет</span><span class="sxs-lookup"><span data-stu-id="cdf5f-138">No</span></span>|  
|<span data-ttu-id="cdf5f-139">**EventClass**</span><span class="sxs-lookup"><span data-stu-id="cdf5f-139">**EventClass**</span></span>|<span data-ttu-id="cdf5f-140">**int**</span><span class="sxs-lookup"><span data-stu-id="cdf5f-140">**int**</span></span>|<span data-ttu-id="cdf5f-141">Тип захваченного класса событий.</span><span class="sxs-lookup"><span data-stu-id="cdf5f-141">The type of event class captured.</span></span> <span data-ttu-id="cdf5f-142">Всегда равен **158** для класса **Audit Broker Conversation**.</span><span class="sxs-lookup"><span data-stu-id="cdf5f-142">Always **158** for **Audit Broker Conversation**.</span></span>|<span data-ttu-id="cdf5f-143">27</span><span class="sxs-lookup"><span data-stu-id="cdf5f-143">27</span></span>|<span data-ttu-id="cdf5f-144">нет</span><span class="sxs-lookup"><span data-stu-id="cdf5f-144">No</span></span>|  
|<span data-ttu-id="cdf5f-145">**EventSubClass**</span><span class="sxs-lookup"><span data-stu-id="cdf5f-145">**EventSubClass**</span></span>|<span data-ttu-id="cdf5f-146">**int**</span><span class="sxs-lookup"><span data-stu-id="cdf5f-146">**int**</span></span>|<span data-ttu-id="cdf5f-147">Тип подкласса событий, предоставляющий дополнительные сведения о каждом классе события.</span><span class="sxs-lookup"><span data-stu-id="cdf5f-147">The type of event subclass, providing further information about each event class.</span></span> <span data-ttu-id="cdf5f-148">Приведенная ниже таблица содержит список подклассов для данного класса событий.</span><span class="sxs-lookup"><span data-stu-id="cdf5f-148">The table below lists the event subclass values for this event.</span></span>|<span data-ttu-id="cdf5f-149">21</span><span class="sxs-lookup"><span data-stu-id="cdf5f-149">21</span></span>|<span data-ttu-id="cdf5f-150">Да</span><span class="sxs-lookup"><span data-stu-id="cdf5f-150">Yes</span></span>|  
|<span data-ttu-id="cdf5f-151">**FileName**</span><span class="sxs-lookup"><span data-stu-id="cdf5f-151">**FileName**</span></span>|<span data-ttu-id="cdf5f-152">**nvarchar**</span><span class="sxs-lookup"><span data-stu-id="cdf5f-152">**nvarchar**</span></span>|<span data-ttu-id="cdf5f-153">Причина ошибки входа.</span><span class="sxs-lookup"><span data-stu-id="cdf5f-153">The reason for the login failure.</span></span> <span data-ttu-id="cdf5f-154">Если вход произведен успешно, этот столбец пуст.</span><span class="sxs-lookup"><span data-stu-id="cdf5f-154">If the login succeeded, this column is empty.</span></span>|<span data-ttu-id="cdf5f-155">36</span><span class="sxs-lookup"><span data-stu-id="cdf5f-155">36</span></span>|<span data-ttu-id="cdf5f-156">нет</span><span class="sxs-lookup"><span data-stu-id="cdf5f-156">No</span></span>|  
|<span data-ttu-id="cdf5f-157">**GUID**</span><span class="sxs-lookup"><span data-stu-id="cdf5f-157">**GUID**</span></span>|<span data-ttu-id="cdf5f-158">**uniqueidentifier**</span><span class="sxs-lookup"><span data-stu-id="cdf5f-158">**uniqueidentifier**</span></span>|<span data-ttu-id="cdf5f-159">Идентификатор диалога.</span><span class="sxs-lookup"><span data-stu-id="cdf5f-159">The conversation id of the dialog.</span></span> <span data-ttu-id="cdf5f-160">Этот идентификатор передается в составе сообщения и является общим для обоих участников диалога.</span><span class="sxs-lookup"><span data-stu-id="cdf5f-160">This identifier is transmitted as part of the message, and is shared between both sides of the conversation.</span></span>|<span data-ttu-id="cdf5f-161">54</span><span class="sxs-lookup"><span data-stu-id="cdf5f-161">54</span></span>|<span data-ttu-id="cdf5f-162">нет</span><span class="sxs-lookup"><span data-stu-id="cdf5f-162">No</span></span>|  
|<span data-ttu-id="cdf5f-163">**HostName**</span><span class="sxs-lookup"><span data-stu-id="cdf5f-163">**HostName**</span></span>|<span data-ttu-id="cdf5f-164">**nvarchar**</span><span class="sxs-lookup"><span data-stu-id="cdf5f-164">**nvarchar**</span></span>|<span data-ttu-id="cdf5f-165">Имя компьютера, на котором выполняется клиентская программа.</span><span class="sxs-lookup"><span data-stu-id="cdf5f-165">The name of the computer on which the client is running.</span></span> <span data-ttu-id="cdf5f-166">Заполнение этого столбца данных производится в том случае, если клиент предоставляет имя узла.</span><span class="sxs-lookup"><span data-stu-id="cdf5f-166">This data column is populated if the host name is provided by the client.</span></span> <span data-ttu-id="cdf5f-167">Чтобы определить имя узла, используйте функцию **HOST_NAME** .</span><span class="sxs-lookup"><span data-stu-id="cdf5f-167">To determine the host name, use the **HOST_NAME** function.</span></span>|<span data-ttu-id="cdf5f-168">8</span><span class="sxs-lookup"><span data-stu-id="cdf5f-168">8</span></span>|<span data-ttu-id="cdf5f-169">Да</span><span class="sxs-lookup"><span data-stu-id="cdf5f-169">Yes</span></span>|  
|<span data-ttu-id="cdf5f-170">**IntegerData**</span><span class="sxs-lookup"><span data-stu-id="cdf5f-170">**IntegerData**</span></span>|<span data-ttu-id="cdf5f-171">**int**</span><span class="sxs-lookup"><span data-stu-id="cdf5f-171">**int**</span></span>|<span data-ttu-id="cdf5f-172">Номер фрагмента сообщения.</span><span class="sxs-lookup"><span data-stu-id="cdf5f-172">The fragment number of the message.</span></span>|<span data-ttu-id="cdf5f-173">25</span><span class="sxs-lookup"><span data-stu-id="cdf5f-173">25</span></span>|<span data-ttu-id="cdf5f-174">нет</span><span class="sxs-lookup"><span data-stu-id="cdf5f-174">No</span></span>|  
|<span data-ttu-id="cdf5f-175">**NTDomainName**</span><span class="sxs-lookup"><span data-stu-id="cdf5f-175">**NTDomainName**</span></span>|<span data-ttu-id="cdf5f-176">**nvarchar**</span><span class="sxs-lookup"><span data-stu-id="cdf5f-176">**nvarchar**</span></span>|<span data-ttu-id="cdf5f-177">Домен Windows, к которому принадлежит пользователь.</span><span class="sxs-lookup"><span data-stu-id="cdf5f-177">The Windows domain to which the user belongs.</span></span>|<span data-ttu-id="cdf5f-178">7</span><span class="sxs-lookup"><span data-stu-id="cdf5f-178">7</span></span>|<span data-ttu-id="cdf5f-179">Да</span><span class="sxs-lookup"><span data-stu-id="cdf5f-179">Yes</span></span>|  
|<span data-ttu-id="cdf5f-180">**NTUserName**</span><span class="sxs-lookup"><span data-stu-id="cdf5f-180">**NTUserName**</span></span>|<span data-ttu-id="cdf5f-181">**nvarchar**</span><span class="sxs-lookup"><span data-stu-id="cdf5f-181">**nvarchar**</span></span>|<span data-ttu-id="cdf5f-182">Имя пользователя, которому принадлежит соединение, создавшее это событие.</span><span class="sxs-lookup"><span data-stu-id="cdf5f-182">The name of the user that owns the connection that generated this event.</span></span>|<span data-ttu-id="cdf5f-183">6</span><span class="sxs-lookup"><span data-stu-id="cdf5f-183">6</span></span>|<span data-ttu-id="cdf5f-184">Да</span><span class="sxs-lookup"><span data-stu-id="cdf5f-184">Yes</span></span>|  
|<span data-ttu-id="cdf5f-185">**ObjectId**</span><span class="sxs-lookup"><span data-stu-id="cdf5f-185">**ObjectId**</span></span>|<span data-ttu-id="cdf5f-186">**int**</span><span class="sxs-lookup"><span data-stu-id="cdf5f-186">**int**</span></span>|<span data-ttu-id="cdf5f-187">Идентификатор пользователя целевой службы.</span><span class="sxs-lookup"><span data-stu-id="cdf5f-187">The user ID of the target service.</span></span>|<span data-ttu-id="cdf5f-188">22</span><span class="sxs-lookup"><span data-stu-id="cdf5f-188">22</span></span>|<span data-ttu-id="cdf5f-189">нет</span><span class="sxs-lookup"><span data-stu-id="cdf5f-189">No</span></span>|  
|<span data-ttu-id="cdf5f-190">**RoleName**</span><span class="sxs-lookup"><span data-stu-id="cdf5f-190">**RoleName**</span></span>|<span data-ttu-id="cdf5f-191">**nvarchar**</span><span class="sxs-lookup"><span data-stu-id="cdf5f-191">**nvarchar**</span></span>|<span data-ttu-id="cdf5f-192">Роль дескриптора диалога.</span><span class="sxs-lookup"><span data-stu-id="cdf5f-192">The role of the conversation handle.</span></span> <span data-ttu-id="cdf5f-193">Это либо **initiator** , либо **target**.</span><span class="sxs-lookup"><span data-stu-id="cdf5f-193">This is either **initiator** or **target**.</span></span>|<span data-ttu-id="cdf5f-194">38</span><span class="sxs-lookup"><span data-stu-id="cdf5f-194">38</span></span>|<span data-ttu-id="cdf5f-195">нет</span><span class="sxs-lookup"><span data-stu-id="cdf5f-195">No</span></span>|  
|<span data-ttu-id="cdf5f-196">**ServerName**</span><span class="sxs-lookup"><span data-stu-id="cdf5f-196">**ServerName**</span></span>|<span data-ttu-id="cdf5f-197">**nvarchar**</span><span class="sxs-lookup"><span data-stu-id="cdf5f-197">**nvarchar**</span></span>|<span data-ttu-id="cdf5f-198">Имя экземпляра [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , подвергаемого трассировке.</span><span class="sxs-lookup"><span data-stu-id="cdf5f-198">The name of the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] being traced.</span></span>|<span data-ttu-id="cdf5f-199">26</span><span class="sxs-lookup"><span data-stu-id="cdf5f-199">26</span></span>|<span data-ttu-id="cdf5f-200">нет</span><span class="sxs-lookup"><span data-stu-id="cdf5f-200">No</span></span>|  
|<span data-ttu-id="cdf5f-201">**Severity**</span><span class="sxs-lookup"><span data-stu-id="cdf5f-201">**Severity**</span></span>|<span data-ttu-id="cdf5f-202">**int**</span><span class="sxs-lookup"><span data-stu-id="cdf5f-202">**int**</span></span>|<span data-ttu-id="cdf5f-203">Уровень серьезности ошибки [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , если данное событие сообщает об ошибке.</span><span class="sxs-lookup"><span data-stu-id="cdf5f-203">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] error severity, if this event reports an error.</span></span>|<span data-ttu-id="cdf5f-204">29</span><span class="sxs-lookup"><span data-stu-id="cdf5f-204">29</span></span>|<span data-ttu-id="cdf5f-205">нет</span><span class="sxs-lookup"><span data-stu-id="cdf5f-205">No</span></span>|  
|<span data-ttu-id="cdf5f-206">**SPID**</span><span class="sxs-lookup"><span data-stu-id="cdf5f-206">**SPID**</span></span>|<span data-ttu-id="cdf5f-207">**int**</span><span class="sxs-lookup"><span data-stu-id="cdf5f-207">**int**</span></span>|<span data-ttu-id="cdf5f-208">Идентификатор процесса сервера, который [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] присвоил процессу, связанному с клиентом.</span><span class="sxs-lookup"><span data-stu-id="cdf5f-208">The server process ID assigned by [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] to the process associated with the client.</span></span>|<span data-ttu-id="cdf5f-209">12</span><span class="sxs-lookup"><span data-stu-id="cdf5f-209">12</span></span>|<span data-ttu-id="cdf5f-210">Да</span><span class="sxs-lookup"><span data-stu-id="cdf5f-210">Yes</span></span>|  
|<span data-ttu-id="cdf5f-211">**StartTime**</span><span class="sxs-lookup"><span data-stu-id="cdf5f-211">**StartTime**</span></span>|<span data-ttu-id="cdf5f-212">**datetime**</span><span class="sxs-lookup"><span data-stu-id="cdf5f-212">**datetime**</span></span>|<span data-ttu-id="cdf5f-213">Время начала события, если доступно.</span><span class="sxs-lookup"><span data-stu-id="cdf5f-213">The time at which the event started, when available.</span></span>|<span data-ttu-id="cdf5f-214">14</span><span class="sxs-lookup"><span data-stu-id="cdf5f-214">14</span></span>|<span data-ttu-id="cdf5f-215">Да</span><span class="sxs-lookup"><span data-stu-id="cdf5f-215">Yes</span></span>|  
|<span data-ttu-id="cdf5f-216">**Состояние**</span><span class="sxs-lookup"><span data-stu-id="cdf5f-216">**State**</span></span>|<span data-ttu-id="cdf5f-217">**int**</span><span class="sxs-lookup"><span data-stu-id="cdf5f-217">**int**</span></span>|<span data-ttu-id="cdf5f-218">Указывает место в исходном коде [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , которое вызвало это событие.</span><span class="sxs-lookup"><span data-stu-id="cdf5f-218">Indicates the location within the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] source code that produced the event.</span></span> <span data-ttu-id="cdf5f-219">Каждое место, которое может вызвать это событие, обозначается отдельным кодом состояния.</span><span class="sxs-lookup"><span data-stu-id="cdf5f-219">Each location that may produce this event has a different state code.</span></span> <span data-ttu-id="cdf5f-220">Сотрудник службы технической поддержки Microsoft может использовать этот код состояния для обнаружения участка, выполнение которого привело к событию.</span><span class="sxs-lookup"><span data-stu-id="cdf5f-220">A Microsoft support engineer can use this state code to find where the event was produced.</span></span>|<span data-ttu-id="cdf5f-221">30</span><span class="sxs-lookup"><span data-stu-id="cdf5f-221">30</span></span>|<span data-ttu-id="cdf5f-222">нет</span><span class="sxs-lookup"><span data-stu-id="cdf5f-222">No</span></span>|  
|<span data-ttu-id="cdf5f-223">**TextData**</span><span class="sxs-lookup"><span data-stu-id="cdf5f-223">**TextData**</span></span>|<span data-ttu-id="cdf5f-224">**ntext**</span><span class="sxs-lookup"><span data-stu-id="cdf5f-224">**ntext**</span></span>|<span data-ttu-id="cdf5f-225">Для ошибки содержит сообщение, описывающее ее причину.</span><span class="sxs-lookup"><span data-stu-id="cdf5f-225">For errors, contains a message that describes the reason for the failure.</span></span> <span data-ttu-id="cdf5f-226">Одно из следующих значений:</span><span class="sxs-lookup"><span data-stu-id="cdf5f-226">One of the following values:</span></span><br /><br /> <span data-ttu-id="cdf5f-227">**Сертификат не найден**.</span><span class="sxs-lookup"><span data-stu-id="cdf5f-227">**Cert not found**.</span></span> <span data-ttu-id="cdf5f-228">Пользователь, указанный в протоколе защиты диалога, не имеет сертификата.</span><span class="sxs-lookup"><span data-stu-id="cdf5f-228">The user specified for dialog protocol security has no certificate.</span></span><br /><br /> <span data-ttu-id="cdf5f-229">**Недопустимый срок действия**.</span><span class="sxs-lookup"><span data-stu-id="cdf5f-229">**Not in valid time period**.</span></span> <span data-ttu-id="cdf5f-230">Пользователь, указанный в протоколе защиты диалога, имеет сертификат, но срок его действия истек.</span><span class="sxs-lookup"><span data-stu-id="cdf5f-230">The user specified for dialog protocol security has a certificate, but the certificate has expired.</span></span><br /><br /> <span data-ttu-id="cdf5f-231">**Сертификат слишком велик для размещения в памяти**.</span><span class="sxs-lookup"><span data-stu-id="cdf5f-231">**Cert too large for memory allocation**.</span></span> <span data-ttu-id="cdf5f-232">Пользователь, указанный для протокола защиты диалога, имеет сертификат, но его размер слишком велик.</span><span class="sxs-lookup"><span data-stu-id="cdf5f-232">The user specified for dialog protocol security has a certificate, but the certificate is too large.</span></span> <span data-ttu-id="cdf5f-233">Максимальная длина сертификата, поддерживаемая компонентом Service Broker, составляет 32 768 байт.</span><span class="sxs-lookup"><span data-stu-id="cdf5f-233">The maximum certificate size that Service Broker supports is 32,768 bytes.</span></span><br /><br /> <span data-ttu-id="cdf5f-234">**Не найден закрытый ключ**.</span><span class="sxs-lookup"><span data-stu-id="cdf5f-234">**Private key not found**.</span></span> <span data-ttu-id="cdf5f-235">Пользователь, указанный для протокола защиты диалога, имеет сертификат, но отсутствует закрытый ключ, связанный с этим сертификатом.</span><span class="sxs-lookup"><span data-stu-id="cdf5f-235">The user specified for dialog protocol security has a certificate, but there is no private key associated with that certificate.</span></span><br /><br /> <span data-ttu-id="cdf5f-236">**Размер закрытого ключа сертификата несовместим с поставщиком службы криптографии**.</span><span class="sxs-lookup"><span data-stu-id="cdf5f-236">**The cert's private key size is incompatible with the crypto provider**.</span></span> <span data-ttu-id="cdf5f-237">Закрытый ключ для данного сертификата имеет размер, исключающий нормальную работу с ним.</span><span class="sxs-lookup"><span data-stu-id="cdf5f-237">The private key for the certificate has a key size that cannot be successfully processed.</span></span> <span data-ttu-id="cdf5f-238">Размер закрытого ключа должен быть кратен 64 байт.</span><span class="sxs-lookup"><span data-stu-id="cdf5f-238">The private key size must be a multiple of 64 bytes.</span></span><br /><br /> <span data-ttu-id="cdf5f-239">**Размер открытого ключа несовместим с поставщиком службы криптографии**.</span><span class="sxs-lookup"><span data-stu-id="cdf5f-239">**The cert's public key size is incompatible with the crypto provider**.</span></span> <span data-ttu-id="cdf5f-240">Открытый ключ для данного сертификата имеет размер, исключающий нормальную работу с ним.</span><span class="sxs-lookup"><span data-stu-id="cdf5f-240">The public key for the certificate has a key size that cannot be successfully processed.</span></span> <span data-ttu-id="cdf5f-241">Размер открытого ключа должен быть кратен 64 байт.</span><span class="sxs-lookup"><span data-stu-id="cdf5f-241">The public key size must be a multiple of 64 bytes.</span></span><br /><br /> <span data-ttu-id="cdf5f-242">**Размер закрытого ключа несовместим с зашифрованным ключом обмена ключами**.</span><span class="sxs-lookup"><span data-stu-id="cdf5f-242">**The cert's private key size is incompatible with the encrypted key exchange key**.</span></span> <span data-ttu-id="cdf5f-243">Размер ключа, указанный в ключе обмена ключами, не совпадает с размером закрытого ключа для данного сертификата.</span><span class="sxs-lookup"><span data-stu-id="cdf5f-243">The key size specified in the key exchange key does not match the size of the private key for the certificate.</span></span> <span data-ttu-id="cdf5f-244">Как правило, это свидетельствует о том, что сертификат удаленного компьютера не соответствует сертификату в базе данных.</span><span class="sxs-lookup"><span data-stu-id="cdf5f-244">This generally indicates that the certificate on the remote computer does not match the certificate in the database.</span></span><br /><br /> <span data-ttu-id="cdf5f-245">**Размер открытого ключа сертификата несовместим с подписью заголовка безопасности**.</span><span class="sxs-lookup"><span data-stu-id="cdf5f-245">**The cert's public key size is incompatible with the security header's signature**.</span></span> <span data-ttu-id="cdf5f-246">Заголовок безопасности содержит цифровую подпись, которая не может быть проверена открытым ключом сертификата.</span><span class="sxs-lookup"><span data-stu-id="cdf5f-246">The security header contains a signature that cannot be validated with the certificate's public key.</span></span> <span data-ttu-id="cdf5f-247">Как правило, это свидетельствует о том, что сертификат удаленного компьютера не соответствует сертификату в базе данных.</span><span class="sxs-lookup"><span data-stu-id="cdf5f-247">This generally indicates that the certificate on the remote computer does not match the certificate in the database.</span></span>|<span data-ttu-id="cdf5f-248">1</span><span class="sxs-lookup"><span data-stu-id="cdf5f-248">1</span></span>|<span data-ttu-id="cdf5f-249">Да</span><span class="sxs-lookup"><span data-stu-id="cdf5f-249">Yes</span></span>|  
  
 <span data-ttu-id="cdf5f-250">Следующая таблица содержит список значений подклассов события для этого класса событий.</span><span class="sxs-lookup"><span data-stu-id="cdf5f-250">The table below lists the subclass values for this event class.</span></span>  
  
|<span data-ttu-id="cdf5f-251">ID</span><span class="sxs-lookup"><span data-stu-id="cdf5f-251">ID</span></span>|<span data-ttu-id="cdf5f-252">Подкласс</span><span class="sxs-lookup"><span data-stu-id="cdf5f-252">Subclass</span></span>|<span data-ttu-id="cdf5f-253">Description</span><span class="sxs-lookup"><span data-stu-id="cdf5f-253">Description</span></span>|  
|--------|--------------|-----------------|  
|<span data-ttu-id="cdf5f-254">1</span><span class="sxs-lookup"><span data-stu-id="cdf5f-254">1</span></span>|<span data-ttu-id="cdf5f-255">Отсутствует заголовок безопасности</span><span class="sxs-lookup"><span data-stu-id="cdf5f-255">No Security Header</span></span>|<span data-ttu-id="cdf5f-256">Во время защищенного диалога компонента Service Broker получил сообщение, которое не содержит ключа сеанса.</span><span class="sxs-lookup"><span data-stu-id="cdf5f-256">During a secure conversation, Service Broker received a message that did not contain a session key.</span></span> <span data-ttu-id="cdf5f-257">Протокол требует, чтобы после установления защищенного диалога каждое сообщение содержало ключ сеанса.</span><span class="sxs-lookup"><span data-stu-id="cdf5f-257">Once a secure conversation is established, the dialog protocol requires that all messages in the conversation contain a session key.</span></span>|  
|<span data-ttu-id="cdf5f-258">2</span><span class="sxs-lookup"><span data-stu-id="cdf5f-258">2</span></span>|<span data-ttu-id="cdf5f-259">Отсутствует сертификат</span><span class="sxs-lookup"><span data-stu-id="cdf5f-259">No Certificate</span></span>|<span data-ttu-id="cdf5f-260">Компонент Service Broker не смог найти подходящего сертификата для одного из участников диалога.</span><span class="sxs-lookup"><span data-stu-id="cdf5f-260">Service Broker could not locate a usable certificate for one of the participants in the conversation.</span></span> <span data-ttu-id="cdf5f-261">Для защиты диалога база данных должна содержать сертификаты как отправителя, так и получателя.</span><span class="sxs-lookup"><span data-stu-id="cdf5f-261">To secure a conversation, the database must contain a certificate for both the sender and the recipient of the conversation.</span></span>|  
|<span data-ttu-id="cdf5f-262">3</span><span class="sxs-lookup"><span data-stu-id="cdf5f-262">3</span></span>|<span data-ttu-id="cdf5f-263">Неверная цифровая подпись</span><span class="sxs-lookup"><span data-stu-id="cdf5f-263">Invalid Signature</span></span>|<span data-ttu-id="cdf5f-264">Service Broker не смог, используя открытый ключ сертификата отправителя, проверить цифровую подпись сообщения.</span><span class="sxs-lookup"><span data-stu-id="cdf5f-264">Broker could not verify the message signature supplied by the sender using the public key in the sender's certificate.</span></span> <span data-ttu-id="cdf5f-265">Это может указывать на то, что сообщение повреждено или фальсифицировано, что для удаленной и локальной служб установлен не один и тот же сертификат или что срок действия сертификата истек.</span><span class="sxs-lookup"><span data-stu-id="cdf5f-265">This may indicate that the message is corrupt, that the message has been tampered with, that the remote service and the local service are not configured with the same user certificate, or that the certificate is out of date.</span></span>|  
|<span data-ttu-id="cdf5f-266">4</span><span class="sxs-lookup"><span data-stu-id="cdf5f-266">4</span></span>|<span data-ttu-id="cdf5f-267">Ошибка выполнения на целевом сервере</span><span class="sxs-lookup"><span data-stu-id="cdf5f-267">Run As Target Failure</span></span>|<span data-ttu-id="cdf5f-268">Пользователю назначения не предоставлены разрешения на очередь назначения.</span><span class="sxs-lookup"><span data-stu-id="cdf5f-268">The destination user does not have receive permissions on the destination queue.</span></span> <span data-ttu-id="cdf5f-269">Чтобы предотвратить получение сообщений неавторизованными пользователями, компонент Service Broker не ставит в очередь сообщения, адресованные пользователю, который не сможет получить их, независимо от того, имеет ли вызывающий пользователь разрешения на помещение сообщений в очередь.</span><span class="sxs-lookup"><span data-stu-id="cdf5f-269">To prevent unauthorized users from receiving messages, Service Broker does not enqueue messages with a destination user that cannot receive from the queue, regardless of whether the initiating user has permission to enqueue messages.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="cdf5f-270">См. также:</span><span class="sxs-lookup"><span data-stu-id="cdf5f-270">See Also</span></span>  
 [<span data-ttu-id="cdf5f-271">SQL Server Service Broker</span><span class="sxs-lookup"><span data-stu-id="cdf5f-271">SQL Server Service Broker</span></span>](../../database-engine/configure-windows/sql-server-service-broker.md)  
  
  
