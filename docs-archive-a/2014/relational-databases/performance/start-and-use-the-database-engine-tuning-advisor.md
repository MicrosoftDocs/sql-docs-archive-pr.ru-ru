---
title: Запуск и использование помощника по настройке ядра СУБД | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: performance
ms.topic: conceptual
f1_keywords:
- sql12.dta.advancedtuningoptions.f1
- sql12.dta.general.f1
- sql12.dta.tuningoptions.f1
- sql12.dta.workload.f1
- sql12.dta.progress.f1
- sql12.dta.options.f1
helpviewer_keywords:
- Database Engine Tuning Advisor [SQL Server], starting
ms.assetid: a4e3226a-3917-4ec8-bdf0-472879d231c9
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 46f8e49de657d7021d846c7e57022a580b877f8e
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87732605"
---
# <a name="start-and-use-the-database-engine-tuning-advisor"></a><span data-ttu-id="ed75b-102">Запуск и использование помощника по настройке ядра СУБД</span><span class="sxs-lookup"><span data-stu-id="ed75b-102">Start and Use the Database Engine Tuning Advisor</span></span>
  <span data-ttu-id="ed75b-103">В этом разделе описано, как запускать и использовать помощник по настройке ядра СУБД в [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)].</span><span class="sxs-lookup"><span data-stu-id="ed75b-103">This topic describes how to start and use Database Engine Tuning Advisor in [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)].</span></span> <span data-ttu-id="ed75b-104">Дополнительные сведения о просмотре и работе с результатами после настройки базы данных см. в статье [Просмотр и работа с выходными данными помощника по настройке ядра СУБД](database-engine-tuning-advisor.md).</span><span class="sxs-lookup"><span data-stu-id="ed75b-104">For information about how to view and work with the results after you tune a database, see [View and Work with the Output from the Database Engine Tuning Advisor](database-engine-tuning-advisor.md).</span></span>  
  
##  <a name="initialize-the-database-engine-tuning-advisor"></a><a name="Initialize"></a> <span data-ttu-id="ed75b-105">Инициализация помощника по настройке ядра СУБД</span><span class="sxs-lookup"><span data-stu-id="ed75b-105">Initialize the Database Engine Tuning Advisor</span></span>  
 <span data-ttu-id="ed75b-106">При первом использовании помощника по настройке ядра СУБД его должен инициализировать пользователь, имеющий предопределенную роль сервера **sysadmin** .</span><span class="sxs-lookup"><span data-stu-id="ed75b-106">On first use, a user who is member of the **sysadmin** fixed server role must initialize the Database Engine Tuning Advisor.</span></span> <span data-ttu-id="ed75b-107">Это связано с тем, что для поддержки операций настройки в базе данных `msdb` необходимо создать несколько системных таблиц.</span><span class="sxs-lookup"><span data-stu-id="ed75b-107">This is because several system tables must be created in the `msdb` database to support tuning operations.</span></span> <span data-ttu-id="ed75b-108">Инициализация также помогает пользователям, являющимся членами предопределенной роли базы данных **db_owner** , настраивать рабочие нагрузки для таблиц в принадлежащих им базах данных.</span><span class="sxs-lookup"><span data-stu-id="ed75b-108">Initialization also enables users that are members of the **db_owner** fixed database role to tune workloads on tables in databases that they own.</span></span>  
  
 <span data-ttu-id="ed75b-109">Пользователь с разрешениями системного администратора должен выполнить одно из следующих действий.</span><span class="sxs-lookup"><span data-stu-id="ed75b-109">A user that has system administrator permissions must perform either of the following actions:</span></span>  
  
-   <span data-ttu-id="ed75b-110">Через графический пользовательский интерфейс помощника по настройке ядра СУБД установить соединение с экземпляром [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)].</span><span class="sxs-lookup"><span data-stu-id="ed75b-110">Use the Database Engine Tuning Advisor graphical user interface to connect to an instance of [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)].</span></span> <span data-ttu-id="ed75b-111">Дополнительные сведения см. ниже в подразделе [Запуск помощника по настройке ядра СУБД](#Start) .</span><span class="sxs-lookup"><span data-stu-id="ed75b-111">For more information, see [Start the Database Engine Tuning Advisor](#Start) later in this topic.</span></span>  
  
-   <span data-ttu-id="ed75b-112">Воспользуйтесь для настройки первой рабочей нагрузки служебной программой **dta** .</span><span class="sxs-lookup"><span data-stu-id="ed75b-112">Use the **dta** utility to tune the first workload.</span></span> <span data-ttu-id="ed75b-113">Дополнительные сведения см. ниже в подразделе [Использование служебной программы dta](#dta) .</span><span class="sxs-lookup"><span data-stu-id="ed75b-113">For more information, see [Use the dta Utility](#dta) later in this topic.</span></span>  
  
##  <a name="start-the-database-engine-tuning-advisor"></a><a name="Start"></a> <span data-ttu-id="ed75b-114">Запуск помощника по настройке ядра СУБД</span><span class="sxs-lookup"><span data-stu-id="ed75b-114">Start the Database Engine Tuning Advisor</span></span>  
 <span data-ttu-id="ed75b-115">Запустить графический интерфейс пользователя для помощника по настройке ядра СУБД вы можете разными способами, в зависимости от необходимых возможностей настройки базы данных.</span><span class="sxs-lookup"><span data-stu-id="ed75b-115">You can start the Database Engine Tuning Advisor graphical user interface (GUI) in several different ways to support database tuning in a variety of scenarios.</span></span> <span data-ttu-id="ed75b-116">Способы запуска помощника по настройке ядра СУБД: из меню **Пуск** , из меню **Сервис** в среде [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], из редактора запросов в среде [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]и из меню **Сервис** в приложении [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)].</span><span class="sxs-lookup"><span data-stu-id="ed75b-116">The different ways to start Database Engine Tuning Advisor include: from the **Start** menu, from the **Tools** menu in [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], from the Query Editor in [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], and from the **Tools** menu in [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)].</span></span> <span data-ttu-id="ed75b-117">При первом запуске помощника по настройке ядра СУБД приложение отображает диалоговое окно **Соединение с сервером** , где вы можете указать экземпляр [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , с которым необходимо установить соединение.</span><span class="sxs-lookup"><span data-stu-id="ed75b-117">When you first start Database Engine Tuning Advisor, the application displays a **Connect to Server** dialog box where you can specify the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance to which you want to connect.</span></span>  
  
> [!WARNING]  
>  <span data-ttu-id="ed75b-118">Не следует запускать помощник по настройке ядра СУБД, если [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] работает в однопользовательском режиме.</span><span class="sxs-lookup"><span data-stu-id="ed75b-118">Do not start Database Engine Tuning Advisor when [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] is running in single-user mode.</span></span> <span data-ttu-id="ed75b-119">Если попытаться запустить его, когда сервер работает в однопользовательском режиме, будет возвращена ошибка и помощник по настройке ядра СУБД запущен не будет.</span><span class="sxs-lookup"><span data-stu-id="ed75b-119">If you attempt to start it while the server is in single-user mode, an error will be returned and Database Engine Tuning Advisor will not start.</span></span> <span data-ttu-id="ed75b-120">Дополнительные сведения об однопользовательском режиме см. в статье [Запуск SQL Server в однопользовательском режиме](../../database-engine/configure-windows/start-sql-server-in-single-user-mode.md).</span><span class="sxs-lookup"><span data-stu-id="ed75b-120">For more information about single-user mode, see [Start SQL Server in Single-User Mode](../../database-engine/configure-windows/start-sql-server-in-single-user-mode.md).</span></span>  
  
#### <a name="to-start-database-engine-tuning-advisor-from-the-windows-start-menu"></a><span data-ttu-id="ed75b-121">Запуск помощника по настройке ядра СУБД из меню «Пуск» в Windows</span><span class="sxs-lookup"><span data-stu-id="ed75b-121">To start Database Engine Tuning Advisor from the Windows Start menu</span></span>  
  
1.  <span data-ttu-id="ed75b-122">В меню **Пуск** последовательно укажите **Все программы**, **Microsoft SQL Server**, **Средства обеспечения производительности**, **Помощник по настройке ядра СУБД**.</span><span class="sxs-lookup"><span data-stu-id="ed75b-122">On the **Start** menu, point to **All Programs**, point to **Microsoft SQL Server**, point to **Performance Tools**, and then click **Database Engine Tuning Advisor**.</span></span>  
  
#### <a name="to-start-the-database-engine-tuning-advisor-in-sql-server-management-studio"></a><span data-ttu-id="ed75b-123">Запуск помощника по настройке ядра СУБД из среды SQL Server Management Studio</span><span class="sxs-lookup"><span data-stu-id="ed75b-123">To start the Database Engine Tuning Advisor in SQL Server Management Studio</span></span>  
  
1.  <span data-ttu-id="ed75b-124">В меню [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] **Сервис** выберите пункт **Помощник по настройке ядра СУБД**.</span><span class="sxs-lookup"><span data-stu-id="ed75b-124">On the [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] **Tools** menu, click **Database Engine Tuning Advisor**.</span></span>  
  
#### <a name="to-start-the-database-engine-tuning-advisor-from-the-sql-server-management-studio-query-editor"></a><span data-ttu-id="ed75b-125">Запуск помощника по настройке ядра СУБД из редактора запросов среды SQL Server Management Studio</span><span class="sxs-lookup"><span data-stu-id="ed75b-125">To start the Database Engine Tuning Advisor from the SQL Server Management Studio Query Editor</span></span>  
  
1.  <span data-ttu-id="ed75b-126">Откройте файл скрипта [!INCLUDE[tsql](../../includes/tsql-md.md)] в среде [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span><span class="sxs-lookup"><span data-stu-id="ed75b-126">Open a [!INCLUDE[tsql](../../includes/tsql-md.md)] script file in [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span></span> <span data-ttu-id="ed75b-127">Дополнительные сведения см. в статье [Редакторы запросов и текста (SQL Server Management Studio)](../scripting/query-and-text-editors-sql-server-management-studio.md).</span><span class="sxs-lookup"><span data-stu-id="ed75b-127">For more information, see [Query and Text Editors &#40;SQL Server Management Studio&#41;](../scripting/query-and-text-editors-sql-server-management-studio.md).</span></span>  
  
2.  <span data-ttu-id="ed75b-128">Выделите запрос в скриптe [!INCLUDE[tsql](../../includes/tsql-md.md)] или весь скрипт целиком, щелкните правой кнопкой мыши выбранный фрагмент и выберите пункт **Анализ запроса в помощнике по настройке ядра СУБД**.</span><span class="sxs-lookup"><span data-stu-id="ed75b-128">Select a query in the [!INCLUDE[tsql](../../includes/tsql-md.md)] script, or select the entire script, right-click the selection, and choose **Analyze Query in Database Engine Tuning Advisor**.</span></span> <span data-ttu-id="ed75b-129">Откроется графический интерфейс помощника по настройке ядра СУБД, после чего будет выполнен импорт скрипта как XML-файла рабочей нагрузки.</span><span class="sxs-lookup"><span data-stu-id="ed75b-129">The Database Engine Tuning Advisor GUI opens and imports the script as an XML file workload.</span></span> <span data-ttu-id="ed75b-130">Для настройки выбранных запросов [!INCLUDE[tsql](../../includes/tsql-md.md)] в качестве рабочей нагрузки вы можете указать имя сеанса и параметры настройки.</span><span class="sxs-lookup"><span data-stu-id="ed75b-130">You can specify a session name and tuning options to tune the selected [!INCLUDE[tsql](../../includes/tsql-md.md)] queries as your workload.</span></span>  
  
#### <a name="to-start-the-database-engine-tuning-advisor-in-sql-server-profiler"></a><span data-ttu-id="ed75b-131">Запуск помощника по настройке ядра СУБД из приложения SQL Server Profiler</span><span class="sxs-lookup"><span data-stu-id="ed75b-131">To start the Database Engine Tuning Advisor in SQL Server Profiler</span></span>  
  
1.  <span data-ttu-id="ed75b-132">В меню **Сервис** приложения SQL Server Profiler выберите пункт **Помощник по настройке ядра СУБД**.</span><span class="sxs-lookup"><span data-stu-id="ed75b-132">On the SQL Server Profiler **Tools** menu, click **Database Engine Tuning Advisor**.</span></span>  
  
##  <a name="create-a-workload"></a><a name="Create"></a> <span data-ttu-id="ed75b-133">Создание рабочей нагрузки</span><span class="sxs-lookup"><span data-stu-id="ed75b-133">Create a Workload</span></span>  
 <span data-ttu-id="ed75b-134">Рабочая нагрузка представляет собой набор инструкций [!INCLUDE[tsql](../../includes/tsql-md.md)] , выполняемый в одной или нескольких базах данных, которые необходимо настроить.</span><span class="sxs-lookup"><span data-stu-id="ed75b-134">A workload is a set of [!INCLUDE[tsql](../../includes/tsql-md.md)] statements that execute against a database or databases that you want to tune.</span></span> <span data-ttu-id="ed75b-135">Помощник по настройке ядра СУБД анализирует эти рабочие нагрузки для рекомендации индексов или стратегий секционирования, которые улучшат производительность запросов сервера.</span><span class="sxs-lookup"><span data-stu-id="ed75b-135">Database Engine Tuning Advisor analyzes these workloads to recommend indexes or partitioning strategies that will improve your server's query performance.</span></span>  
  
 <span data-ttu-id="ed75b-136">Создать рабочую нагрузку можно одним из следующих методов.</span><span class="sxs-lookup"><span data-stu-id="ed75b-136">You can create a workload by using one of the following methods.</span></span>  
  
-   <span data-ttu-id="ed75b-137">Использовать кэш планов в качестве рабочей нагрузки.</span><span class="sxs-lookup"><span data-stu-id="ed75b-137">Use the plan cache as a workload.</span></span> <span data-ttu-id="ed75b-138">Это позволяет не создавать рабочую нагрузку вручную.</span><span class="sxs-lookup"><span data-stu-id="ed75b-138">By doing this, you can avoid having to manually create a workload.</span></span> <span data-ttu-id="ed75b-139">Дополнительные сведения см. далее в подразделе [Настройка базы данных](#Tune) .</span><span class="sxs-lookup"><span data-stu-id="ed75b-139">For more information, see [Tune a Database](#Tune) later in this topic.</span></span>  
  
-   <span data-ttu-id="ed75b-140">В редакторе запросов в среде [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] или в привычном текстовом редакторе создайте скрипт рабочей нагрузки [!INCLUDE[tsql](../../includes/tsql-md.md)] вручную.</span><span class="sxs-lookup"><span data-stu-id="ed75b-140">Use the Query Editor in [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] or your favorite text editor to manually create [!INCLUDE[tsql](../../includes/tsql-md.md)] script workloads.</span></span>  
  
-   <span data-ttu-id="ed75b-141">Чтобы создать рабочие нагрузки файла или таблицы трассировки, воспользуйтесь приложением [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="ed75b-141">Use [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] to create trace file or trace table workloads</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="ed75b-142">При использовании таблицы трассировки в качестве рабочей нагрузки эта таблица должна находиться на том же сервере, на котором работает помощник по настройке ядра СУБД.</span><span class="sxs-lookup"><span data-stu-id="ed75b-142">When using a trace table as a workload, that table must exist on the same server where Database Engine Tuning Advisor is tuning.</span></span> <span data-ttu-id="ed75b-143">При создании таблицы трассировки на другом сервере необходимо затем переместить ее на тот сервер, на котором работает помощник по настройке ядра СУБД.</span><span class="sxs-lookup"><span data-stu-id="ed75b-143">If you create the trace table on a different server, then move it to the server where Database Engine Tuning Advisor is tuning.</span></span>  
  
-   <span data-ttu-id="ed75b-144">Кроме того, рабочие нагрузки могут быть внедренными во входные XML-файлы, где также можно указать весовой коэффициент для каждого события.</span><span class="sxs-lookup"><span data-stu-id="ed75b-144">Workloads can also be embedded in an XML input file, where you can also specify a weight for each event.</span></span> <span data-ttu-id="ed75b-145">Дополнительные сведения о задании внедренных рабочих нагрузок см. далее в подразделе [Создание входного файла XML-данных](#XMLInput) .</span><span class="sxs-lookup"><span data-stu-id="ed75b-145">For more information about specifying embedded workloads, see [Create an XML Input File](#XMLInput) later in this topic.</span></span>  
  
###  <a name="to-create-transact-sql-script-workloads"></a><a name="SSMS"></a> <span data-ttu-id="ed75b-146">Для создания рабочей нагрузки скрипта Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="ed75b-146">To create Transact-SQL script workloads</span></span>  
  
1.  <span data-ttu-id="ed75b-147">Запустите редактор запросов в среде [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span><span class="sxs-lookup"><span data-stu-id="ed75b-147">Launch the Query Editor in [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span></span> <span data-ttu-id="ed75b-148">Дополнительные сведения см. в статье [Редакторы запросов и текста (SQL Server Management Studio)](../scripting/query-and-text-editors-sql-server-management-studio.md).</span><span class="sxs-lookup"><span data-stu-id="ed75b-148">For more information, see [Query and Text Editors &#40;SQL Server Management Studio&#41;](../scripting/query-and-text-editors-sql-server-management-studio.md).</span></span>  
  
2.  <span data-ttu-id="ed75b-149">Введите скрипт на языке [!INCLUDE[tsql](../../includes/tsql-md.md)] в редакторе запросов.</span><span class="sxs-lookup"><span data-stu-id="ed75b-149">Type your [!INCLUDE[tsql](../../includes/tsql-md.md)] script into the Query Editor.</span></span> <span data-ttu-id="ed75b-150">Этот скрипт должен содержать набор инструкций языка [!INCLUDE[tsql](../../includes/tsql-md.md)] , выполняемых в одной или нескольких базах данных, которые необходимо настроить.</span><span class="sxs-lookup"><span data-stu-id="ed75b-150">This script should contain a set of [!INCLUDE[tsql](../../includes/tsql-md.md)] statements that execute against the database or databases that you want to tune.</span></span>  
  
3.  <span data-ttu-id="ed75b-151">Сохраните файл с расширением **SQL** .</span><span class="sxs-lookup"><span data-stu-id="ed75b-151">Save the file with a **.sql** extension.</span></span> <span data-ttu-id="ed75b-152">Графический интерфейс помощника по настройке ядра СУБД и программа командной строки **dta** могут использовать этот скрипт [!INCLUDE[tsql](../../includes/tsql-md.md)] в качестве рабочей нагрузки.</span><span class="sxs-lookup"><span data-stu-id="ed75b-152">The Database Engine Tuning Advisor GUI and the command-line **dta** utility can use this [!INCLUDE[tsql](../../includes/tsql-md.md)] script as a workload.</span></span>  
  
###  <a name="to-create-trace-file-and-trace-table-workloads"></a><a name="Profiler"></a> <span data-ttu-id="ed75b-153">Для создания рабочих нагрузок файла и таблицы трассировки.</span><span class="sxs-lookup"><span data-stu-id="ed75b-153">To create trace file and trace table workloads</span></span>  
  
1.  <span data-ttu-id="ed75b-154">Запустите приложение [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] одним из следующих способов.</span><span class="sxs-lookup"><span data-stu-id="ed75b-154">Launch [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] by using one of the following methods:</span></span>  
  
    -   <span data-ttu-id="ed75b-155">В меню **Пуск** последовательно укажите **Все программы**, **Microsoft SQL Server**, **Средства обеспечения производительности**и выберите пункт **SQL Server Profiler**.</span><span class="sxs-lookup"><span data-stu-id="ed75b-155">On the **Start** menu, point to **All Programs**, **Microsoft SQL Server**, **Performance Tools**, and then click **SQL Server Profiler**.</span></span>  
  
    -   <span data-ttu-id="ed75b-156">В среде [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]в меню **Сервис** выберите пункт **Приложение SQL Server Profiler**.</span><span class="sxs-lookup"><span data-stu-id="ed75b-156">In [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], click the **Tools** menu, and then click **SQL Server Profiler**.</span></span>  
  
2.  <span data-ttu-id="ed75b-157">Создайте файл или таблицу трассировки, как описано в представленных ниже процедурах, использующих шаблон приложения [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] **Настройка**.</span><span class="sxs-lookup"><span data-stu-id="ed75b-157">Create a trace file or table as described in the following procedures that uses the [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] **Tuning** template:</span></span>  
  
    -   [<span data-ttu-id="ed75b-158">Создание трассировки (приложение SQL Server Profiler)</span><span class="sxs-lookup"><span data-stu-id="ed75b-158">Create a Trace &#40;SQL Server Profiler&#41;</span></span>](../../tools/sql-server-profiler/create-a-trace-sql-server-profiler.md)  
  
    -   [<span data-ttu-id="ed75b-159">Сохранение результатов трассировки в файл (приложение SQL Server Profiler)</span><span class="sxs-lookup"><span data-stu-id="ed75b-159">Save Trace Results to a File &#40;SQL Server Profiler&#41;</span></span>](../../tools/sql-server-profiler/save-trace-results-to-a-file-sql-server-profiler.md)  
  
         <span data-ttu-id="ed75b-160">Помощник по настройке ядра СУБД предполагает, что файл трассировки рабочей нагрузки является файлом продолжения.</span><span class="sxs-lookup"><span data-stu-id="ed75b-160">Database Engine Tuning Advisor assumes that the workload trace file is a rollover file.</span></span> <span data-ttu-id="ed75b-161">Дополнительные сведения о файлах продолжения см. в разделе [Limit Trace File and Table Sizes](../sql-trace/limit-trace-file-and-table-sizes.md).</span><span class="sxs-lookup"><span data-stu-id="ed75b-161">For more information about rollover files, see [Limit Trace File and Table Sizes](../sql-trace/limit-trace-file-and-table-sizes.md).</span></span>  
  
    -   [<span data-ttu-id="ed75b-162">Сохранение результатов трассировки в таблицу (SQL Server Profiler)</span><span class="sxs-lookup"><span data-stu-id="ed75b-162">Save Trace Results to a Table &#40;SQL Server Profiler&#41;</span></span>](../../tools/sql-server-profiler/save-trace-results-to-a-table-sql-server-profiler.md)  
  
         <span data-ttu-id="ed75b-163">Перед использованием таблицы трассировки в качестве рабочей нагрузки необходимо убедиться, что данная трассировка остановлена.</span><span class="sxs-lookup"><span data-stu-id="ed75b-163">Make sure that tracing has stopped before using a trace table as a workload.</span></span>  
  
 <span data-ttu-id="ed75b-164">Рекомендуется использовать шаблон настройки приложения SQL Server Profiler для фиксирования рабочих нагрузок для помощника по настройке ядра СУБД.</span><span class="sxs-lookup"><span data-stu-id="ed75b-164">We recommend that you use the SQL Server Profiler Tuning template for capturing workloads for Database Engine Tuning Advisor.</span></span>  
  
 <span data-ttu-id="ed75b-165">Чтобы использовать собственный шаблон, необходимо убедиться, что отслеживаются приведенные ниже события трассировки:</span><span class="sxs-lookup"><span data-stu-id="ed75b-165">If you want to use your own template, ensure that the following trace events are captured:</span></span>  
  
-   <span data-ttu-id="ed75b-166">**RPC:Completed**</span><span class="sxs-lookup"><span data-stu-id="ed75b-166">**RPC:Completed**</span></span>  
  
-   <span data-ttu-id="ed75b-167">**SQL:BatchCompleted**</span><span class="sxs-lookup"><span data-stu-id="ed75b-167">**SQL:BatchCompleted**</span></span>  
  
-   <span data-ttu-id="ed75b-168">**SP:StmtCompleted**</span><span class="sxs-lookup"><span data-stu-id="ed75b-168">**SP:StmtCompleted**</span></span>  
  
 <span data-ttu-id="ed75b-169">Также можно использовать варианты **Starting** этих событий трассировки.</span><span class="sxs-lookup"><span data-stu-id="ed75b-169">You can also use the **Starting** versions of these trace events.</span></span> <span data-ttu-id="ed75b-170">Например **SQL:BatchStarting**.</span><span class="sxs-lookup"><span data-stu-id="ed75b-170">For example, **SQL:BatchStarting**.</span></span> <span data-ttu-id="ed75b-171">Однако варианты **Completed** этих событий трассировки включают столбец **Продолжительность** , который позволяет помощнику по настройке ядра СУБД выполнять настройку рабочих нагрузок более эффективно.</span><span class="sxs-lookup"><span data-stu-id="ed75b-171">However, the **Completed** versions of these trace events include the **Duration** column, which allows Database Engine Tuning Advisor to more effectively tune the workload.</span></span> <span data-ttu-id="ed75b-172">Помощник по настройке ядра СУБД не выполняет настройку других типов событий трассировки.</span><span class="sxs-lookup"><span data-stu-id="ed75b-172">Database Engine Tuning Advisor does not tune other types of trace events.</span></span> <span data-ttu-id="ed75b-173">Дополнительные сведения об этих событиях трассировки см. в разделах [Stored Procedures Event Category](../event-classes/stored-procedures-event-category.md) и [TSQL Event Category](../event-classes/tsql-event-category.md).</span><span class="sxs-lookup"><span data-stu-id="ed75b-173">For more information about these trace events, see [Stored Procedures Event Category](../event-classes/stored-procedures-event-category.md) and [TSQL Event Category](../event-classes/tsql-event-category.md).</span></span> <span data-ttu-id="ed75b-174">Сведения об использовании хранимых процедур трассировки SQL для создания рабочей нагрузки файла трассировки см. в статье [Создание трассировки (Transact-SQL)](../sql-trace/create-a-trace-transact-sql.md).</span><span class="sxs-lookup"><span data-stu-id="ed75b-174">For information about using the SQL Trace stored procedures to create a trace file workload, see [Create a Trace &#40;Transact-SQL&#41;](../sql-trace/create-a-trace-transact-sql.md).</span></span>  
  
### <a name="trace-file-or-trace-table-workloads-that-contain-the-loginname-data-column"></a><span data-ttu-id="ed75b-175">Рабочие нагрузки файла или таблицы трассировки, содержащие столбец данных LoginName</span><span class="sxs-lookup"><span data-stu-id="ed75b-175">Trace File or Trace Table Workloads That Contain the LoginName Data Column</span></span>  
 <span data-ttu-id="ed75b-176">Помощник по настройке ядра СУБД направляет запросы Showplan в процессе настройки.</span><span class="sxs-lookup"><span data-stu-id="ed75b-176">Database Engine Tuning Advisor submits Showplan requests as part of the tuning process.</span></span> <span data-ttu-id="ed75b-177">Если таблица или файл трассировки, содержащие столбец данных **LoginName** , используются в качестве рабочей нагрузки, помощник по настройке ядра СУБД олицетворяет пользователя, указанного в столбце **LoginName**.</span><span class="sxs-lookup"><span data-stu-id="ed75b-177">When a trace table or file that contains the **LoginName** data column is consumed as a workload, Database Engine Tuning Advisor impersonates the user specified in **LoginName**.</span></span> <span data-ttu-id="ed75b-178">Если этому пользователю не было предоставлено разрешение SHOWPLAN, которое позволяет выполнять и создавать запросы Showplan для инструкций, содержащихся в трассировке, помощник по настройке ядра СУБД не будет выполнять настройку подобных инструкций.</span><span class="sxs-lookup"><span data-stu-id="ed75b-178">If this user has not been granted the SHOWPLAN permission, which enables the user to execute and produce Showplans for the statements contained in the trace, Database Engine Tuning Advisor will not tune those statements.</span></span>  
  
##### <a name="to-avoid-granting-the-showplan-permission-to-each-user-specified-in-the-loginname-column-of-the-trace"></a><span data-ttu-id="ed75b-179">Избежание предоставления разрешения SHOWPLAN каждому пользователю, указанному в столбце трассировки LoginName</span><span class="sxs-lookup"><span data-stu-id="ed75b-179">To avoid granting the SHOWPLAN permission to each user specified in the LoginName column of the trace</span></span>  
  
1.  <span data-ttu-id="ed75b-180">Настройте рабочую нагрузку файла или таблицы трассировки.</span><span class="sxs-lookup"><span data-stu-id="ed75b-180">Tune the trace file or table workload.</span></span> <span data-ttu-id="ed75b-181">Дополнительные сведения см. далее в подразделе [Настройка базы данных](#Tune) .</span><span class="sxs-lookup"><span data-stu-id="ed75b-181">For more information, see [Tune a Database](#Tune) later in this topic.</span></span>  
  
2.  <span data-ttu-id="ed75b-182">Проверьте журнал настройки для инструкций, которые не были настроены из-за несоответствующих разрешений.</span><span class="sxs-lookup"><span data-stu-id="ed75b-182">Check the tuning log for statements that were not tuned due to inadequate permissions.</span></span> <span data-ttu-id="ed75b-183">Дополнительные сведения см. в статье [Просмотр и работа с выходными данными помощника по настройке ядра СУБД](database-engine-tuning-advisor.md).</span><span class="sxs-lookup"><span data-stu-id="ed75b-183">For more information, see [View and Work with the Output from the Database Engine Tuning Advisor](database-engine-tuning-advisor.md).</span></span>  
  
3.  <span data-ttu-id="ed75b-184">Создайте новую рабочую нагрузку путем удаления столбца **LoginName** из событий, которые не были настроены, затем в файле или таблице трассировки сохраните только ненастроенные события.</span><span class="sxs-lookup"><span data-stu-id="ed75b-184">Create a new workload by deleting the **LoginName** column from the events that were not tuned, and then save only the untuned events in a new trace file or table.</span></span> <span data-ttu-id="ed75b-185">Дополнительные сведения об удалении столбцов данных из трассировки см. в статье [Указание столбцов событий и данных для файла трассировки (приложение SQL Server Profiler)](../../tools/sql-server-profiler/specify-events-and-data-columns-for-a-trace-file-sql-server-profiler.md) или [Изменение существующей трассировки (Transact-SQL)](../sql-trace/modify-an-existing-trace-transact-sql.md).</span><span class="sxs-lookup"><span data-stu-id="ed75b-185">For more information about deleting data columns from a trace, see [Specify Events and Data Columns for a Trace File &#40;SQL Server Profiler&#41;](../../tools/sql-server-profiler/specify-events-and-data-columns-for-a-trace-file-sql-server-profiler.md) or [Modify an Existing Trace &#40;Transact-SQL&#41;](../sql-trace/modify-an-existing-trace-transact-sql.md).</span></span>  
  
4.  <span data-ttu-id="ed75b-186">Повторно передайте новую рабочую нагрузку без столбца **LoginName** помощнику по настройке ядра СУБД.</span><span class="sxs-lookup"><span data-stu-id="ed75b-186">Resubmit the new workload without the **LoginName** column to Database Engine Tuning Advisor.</span></span>  
  
 <span data-ttu-id="ed75b-187">Помощник по настройке ядра СУБД произведет настройку новой рабочей нагрузки, так как сведения об имени входа не указаны в трассировке.</span><span class="sxs-lookup"><span data-stu-id="ed75b-187">Database Engine Tuning Advisor will tune the new workload because login information is not specified in the trace.</span></span> <span data-ttu-id="ed75b-188">Если столбец **LoginName** для инструкции не существует, то помощник по настройке ядра СУБД настроит инструкцию посредством олицетворения пользователя, запустившего сеанс настройки (являющегося либо членом предопределенной роли сервера **sysadmin** , либо членом предопределенной роли базы данных **db_owner** ).</span><span class="sxs-lookup"><span data-stu-id="ed75b-188">If the **LoginName** does not exist for a statement, Database Engine Tuning Advisor tunes that statement by impersonating the user who started the tuning session (a member of either the **sysadmin** fixed server role or the **db_owner** fixed database role).</span></span>  
  
##  <a name="tune-a-database"></a><a name="Tune"></a> <span data-ttu-id="ed75b-189">Настройка базы данных</span><span class="sxs-lookup"><span data-stu-id="ed75b-189">Tune a Database</span></span>  
 <span data-ttu-id="ed75b-190">Настроить базу данных можно с помощью графического интерфейса помощника по настройке ядра СУБД или программы **dta** .</span><span class="sxs-lookup"><span data-stu-id="ed75b-190">To tune a database, you can use the Database Engine Tuning Advisor GUI or the **dta** utility.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="ed75b-191">Прежде чем использовать таблицу трассировки в качестве рабочей нагрузки для помощника по настройке ядра СУБД, убедитесь, что трассировка остановилась.</span><span class="sxs-lookup"><span data-stu-id="ed75b-191">Make sure that tracing has stopped before using a trace table as a workload for Database Engine Tuning Advisor.</span></span> <span data-ttu-id="ed75b-192">Помощник по настройке ядра СУБД не позволяет использовать в качестве рабочей нагрузки таблицу трассировки, в которую еще производится запись трассируемых событий.</span><span class="sxs-lookup"><span data-stu-id="ed75b-192">Database Engine Tuning Advisor does not support using a trace table to which trace events are still being written as a workload.</span></span>  
  
### <a name="use-the-database-engine-tuning-advisor-graphical-user-interface"></a><span data-ttu-id="ed75b-193">Использование графического пользовательского интерфейса помощника по настройке ядра СУБД</span><span class="sxs-lookup"><span data-stu-id="ed75b-193">Use the Database Engine Tuning Advisor Graphical User Interface</span></span>  
 <span data-ttu-id="ed75b-194">В графическом интерфейсе пользователя помощника по настройке ядра СУБД настроить базу данных вы можете с помощью кэша планов, а также файлов или таблиц рабочей нагрузки.</span><span class="sxs-lookup"><span data-stu-id="ed75b-194">On the Database Engine Tuning Advisor GUI, you can tune a database by using the plan cache, workload files, or workload tables.</span></span> <span data-ttu-id="ed75b-195">Графический интерфейс пользователя помощника по настройке ядра СУБД позволяет легко просмотреть результаты текущего и предыдущего сеансов настройки.</span><span class="sxs-lookup"><span data-stu-id="ed75b-195">You can use the Database Engine Tuning Advisor GUI to easily view the results of your current tuning session and results of previous tuning sessions.</span></span> <span data-ttu-id="ed75b-196">Дополнительные сведения о параметрах пользовательского интерфейса см. далее в подразделе [Описание пользовательского интерфейса](#UI) .</span><span class="sxs-lookup"><span data-stu-id="ed75b-196">For information about user interface options, see [User Interface Descriptions](#UI) later in this topic.</span></span> <span data-ttu-id="ed75b-197">Дополнительные сведения о работе с результатами после настройки базы данных см. в статье [Просмотр и работа с выходными данными помощника по настройке ядра СУБД](database-engine-tuning-advisor.md).</span><span class="sxs-lookup"><span data-stu-id="ed75b-197">For more information about working with the output after you tune a database, see [View and Work with the Output from the Database Engine Tuning Advisor](database-engine-tuning-advisor.md).</span></span>  
  
####  <a name="to-tune-a-database-by-using-the-plan-cache"></a><a name="PlanCache"></a> <span data-ttu-id="ed75b-198">Настройка базы данных при помощи кэша планов</span><span class="sxs-lookup"><span data-stu-id="ed75b-198">To tune a database by using the plan cache</span></span>  
  
1.  <span data-ttu-id="ed75b-199">Запустите помощник по настройке ядра СУБД и войдите в экземпляр [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="ed75b-199">Launch Database Engine Tuning Advisor, and log into an instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="ed75b-200">Дополнительные сведения см. выше в подразделе [Запуск помощника по настройке ядра СУБД](#Start) .</span><span class="sxs-lookup"><span data-stu-id="ed75b-200">For more information, see [Start the Database Engine Tuning Advisor](#Start) earlier in this topic.</span></span>  
  
2.  <span data-ttu-id="ed75b-201">На вкладке **Общие** введите имя в поле **Имя сеанса** , чтобы создать новый сеанс настройки.</span><span class="sxs-lookup"><span data-stu-id="ed75b-201">On the **General** tab, type a name in **Session name** to create a new tuning session.</span></span> <span data-ttu-id="ed75b-202">Перед началом сеанса настройки необходимо заполнить поля на вкладке **Общие** .</span><span class="sxs-lookup"><span data-stu-id="ed75b-202">You must configure the fields in the **General** tab before starting a tuning session.</span></span> <span data-ttu-id="ed75b-203">Перед началом сеанса настройки нет необходимости изменять параметры на вкладке **Параметры настройки** .</span><span class="sxs-lookup"><span data-stu-id="ed75b-203">It is not necessary to modify the settings of the **Tuning Options** tab before starting a tuning session.</span></span>  
  
3.  <span data-ttu-id="ed75b-204">Укажите **Кэш планов** в качестве рабочей нагрузки.</span><span class="sxs-lookup"><span data-stu-id="ed75b-204">Select **Plan Cache** as the workload option.</span></span> <span data-ttu-id="ed75b-205">Помощник по настройке ядра СУБД выбирает верхнюю тысячу событий из кэша планов для использования при анализе.</span><span class="sxs-lookup"><span data-stu-id="ed75b-205">Database Engine Tuning Advisor selects the top 1,000 events from the plan cache to use for analysis.</span></span>  
  
4.  <span data-ttu-id="ed75b-206">Выберите одну или несколько баз данных для настройки и, при необходимости, в списке **Выбранные таблицы**выберите одну или несколько таблиц из каждой базы данных.</span><span class="sxs-lookup"><span data-stu-id="ed75b-206">Select the database or databases that you want to tune, and optionally from **Selected Tables**, choose one or more tables from each database.</span></span> <span data-ttu-id="ed75b-207">Чтобы включить записи кэша для всех баз данных, в поле **Параметры настройки**выберите **Дополнительные параметры** и установите флажок **Включать события кэша планов из всех баз данных**.</span><span class="sxs-lookup"><span data-stu-id="ed75b-207">To include cache entries for all databases, from **Tuning Options**, click **Advanced Options** and then check **Include plan cache events from all databases**.</span></span>  
  
5.  <span data-ttu-id="ed75b-208">Установите флажок **Сохранить журнал настройки** , чтобы сохранить копию журнала настройки.</span><span class="sxs-lookup"><span data-stu-id="ed75b-208">Check **Save tuning log** to save a copy of the tuning log.</span></span> <span data-ttu-id="ed75b-209">Снимите этот флажок, если не нужно сохранять копию журнала настройки.</span><span class="sxs-lookup"><span data-stu-id="ed75b-209">Clear the check box if you do not want to save a copy of the tuning log.</span></span>  
  
     <span data-ttu-id="ed75b-210">Журнал настройки можно посмотреть после анализа, открыв сеанс и выбрав вкладку **Выполнение** .</span><span class="sxs-lookup"><span data-stu-id="ed75b-210">You can view the tuning log after analysis by opening the session and selecting the **Progress** tab.</span></span>  
  
6.  <span data-ttu-id="ed75b-211">Перейдите на вкладку **Параметры настройки** и выберите приведенные на ней параметры.</span><span class="sxs-lookup"><span data-stu-id="ed75b-211">Click the **Tuning Options** tab and select from the options listed there.</span></span>  
  
7.  <span data-ttu-id="ed75b-212">Нажмите кнопку **Начать анализ**.</span><span class="sxs-lookup"><span data-stu-id="ed75b-212">Click **Start Analysis**.</span></span>  
  
     <span data-ttu-id="ed75b-213">Если нужно остановить сеанс настройки после его начала, в меню **Действия** выберите один из следующих вариантов.</span><span class="sxs-lookup"><span data-stu-id="ed75b-213">If you want to stop the tuning session after it has started, choose one of the following options on the **Actions** menu:</span></span>  
  
    -   <span data-ttu-id="ed75b-214">**Остановить анализ (с рекомендациями)** прерывает сеанс настройки и выводит приглашение для выбора, должен ли помощник по настройке ядра СУБД сформировать рекомендации на основе анализа, проведенного до этого момента.</span><span class="sxs-lookup"><span data-stu-id="ed75b-214">**Stop Analysis (With Recommendations)** stops the tuning session and prompts you to decide whether you want Database Engine Tuning Advisor to generate recommendations based on the analysis done up to this point.</span></span>  
  
    -   <span data-ttu-id="ed75b-215">Пункт**Остановить анализ** прерывает сеанс настройки без формирования рекомендаций.</span><span class="sxs-lookup"><span data-stu-id="ed75b-215">**Stop Analysis** stops the tuning session without generating any recommendations.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="ed75b-216">Временная остановка помощника по настройке ядра СУБД не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="ed75b-216">Pausing Database Engine Tuning Advisor is not supported.</span></span> <span data-ttu-id="ed75b-217">Если на панели инструментов нажать кнопку **Начать анализ** после кнопки **Остановить анализ** или **Остановить анализ (с рекомендациями)** , то помощник по настройке ядра СУБД начинает новый сеанс настройки.</span><span class="sxs-lookup"><span data-stu-id="ed75b-217">If you click the **Start Analysis** toolbar button after clicking either the **Stop Analysis** or **Stop Analysis (With Recommendations)** toolbar buttons, Database Engine Tuning Advisor starts a new tuning session.</span></span>  
  
##### <a name="to-tune-a-database-using-a-workload-file-or-table-as-input"></a><span data-ttu-id="ed75b-218">Настройка базы данных с использованием в качестве входных данных файла рабочей нагрузки или таблицы</span><span class="sxs-lookup"><span data-stu-id="ed75b-218">To tune a database using a workload file or table as input</span></span>  
  
1.  <span data-ttu-id="ed75b-219">Определите все компоненты (индексы, индексированные представления, секции) базы данных, которые помощник по настройке ядра СУБД должен проанализировать на предмет добавления, удаления или сохранения.</span><span class="sxs-lookup"><span data-stu-id="ed75b-219">Determine the database features (indexes, indexed views, partitioning) you want Database Engine Tuning Advisor to consider adding, removing, or retaining during analysis.</span></span>  
  
2.  <span data-ttu-id="ed75b-220">Создайте рабочую нагрузку.</span><span class="sxs-lookup"><span data-stu-id="ed75b-220">Create a workload.</span></span> <span data-ttu-id="ed75b-221">Дополнительные сведения см. выше в подразделе [Создание рабочей нагрузки](#Create) .</span><span class="sxs-lookup"><span data-stu-id="ed75b-221">For more information, see [Create a Workload](#Create) earlier in this topic.</span></span>  
  
3.  <span data-ttu-id="ed75b-222">Запустите помощник по настройке ядра СУБД и войдите в экземпляр [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="ed75b-222">Launch Database Engine Tuning Advisor, and log into an instance of [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="ed75b-223">Дополнительные сведения см. выше в подразделе [Запуск помощника по настройке ядра СУБД](#Start) .</span><span class="sxs-lookup"><span data-stu-id="ed75b-223">For more information, see [Start the Database Engine Tuning Advisor](#Start) earlier in this topic.</span></span>  
  
4.  <span data-ttu-id="ed75b-224">На вкладке **Общие** введите имя в поле **Имя сеанса** , чтобы создать новый сеанс настройки.</span><span class="sxs-lookup"><span data-stu-id="ed75b-224">On the **General** tab, type a name in **Session name** to create a new tuning session.</span></span>  
  
5.  <span data-ttu-id="ed75b-225">Выберите **Файл рабочей нагрузки** или **Таблица** и введите в соседнем текстовом поле путь к файлу или имя таблицы.</span><span class="sxs-lookup"><span data-stu-id="ed75b-225">Choose either a **Workload File** or **Table** and type either the path to the file, or the name of the table in the adjacent text box.</span></span>  
  
     <span data-ttu-id="ed75b-226">Формат для указания таблицы</span><span class="sxs-lookup"><span data-stu-id="ed75b-226">The format for specifying a table is</span></span>  
  
    ```  
  
    database_name.schema_name.table_name  
    ```  
  
     <span data-ttu-id="ed75b-227">Чтобы найти файл рабочей нагрузки или таблицу, нажмите кнопку **Обзор**.</span><span class="sxs-lookup"><span data-stu-id="ed75b-227">To search for a workload file or table, click **Browse**.</span></span> <span data-ttu-id="ed75b-228">Помощник по настройке ядра СУБД предполагает, что файлы рабочей нагрузки — это файлы продолжения.</span><span class="sxs-lookup"><span data-stu-id="ed75b-228">Database Engine Tuning Advisor assumes that workload files are rollover files.</span></span> <span data-ttu-id="ed75b-229">Дополнительные сведения о файлах продолжения см. в разделе [Limit Trace File and Table Sizes](../sql-trace/limit-trace-file-and-table-sizes.md).</span><span class="sxs-lookup"><span data-stu-id="ed75b-229">For more information about rollover files, see [Limit Trace File and Table Sizes](../sql-trace/limit-trace-file-and-table-sizes.md).</span></span>  
  
     <span data-ttu-id="ed75b-230">При использовании таблицы трассировки в качестве рабочей нагрузки она должна находиться на том же сервере, настройку которого производит помощник по настройке ядра СУБД.</span><span class="sxs-lookup"><span data-stu-id="ed75b-230">When using a trace table as a workload, that table must exist on the same server that Database Engine Tuning Advisor is tuning.</span></span> <span data-ttu-id="ed75b-231">Если таблица трассировки создана на другом сервере, прежде чем использовать ее в качестве рабочей нагрузки, переместите эту таблицу на сервер, который настраивает помощник по настройке ядра СУБД.</span><span class="sxs-lookup"><span data-stu-id="ed75b-231">If you create the trace table on a different server, move it to the server that Database Engine Tuning Advisor is tuning before using it as your workload.</span></span>  
  
6.  <span data-ttu-id="ed75b-232">Выберите базы данных и таблицы, для которых будет выполняться рабочая нагрузка, выбранная на шаге 5.</span><span class="sxs-lookup"><span data-stu-id="ed75b-232">Select the databases and tables against which you wish to run the workload that you selected in step 5.</span></span> <span data-ttu-id="ed75b-233">Чтобы выбрать таблицы, нажмите стрелку **Выбранные таблицы** .</span><span class="sxs-lookup"><span data-stu-id="ed75b-233">To select the tables, click the **Selected Tables** arrow.</span></span>  
  
7.  <span data-ttu-id="ed75b-234">Установите флажок **Сохранить журнал настройки** , чтобы сохранить копию журнала настройки.</span><span class="sxs-lookup"><span data-stu-id="ed75b-234">Check **Save tuning log** to save a copy of the tuning log.</span></span> <span data-ttu-id="ed75b-235">Снимите этот флажок, если не нужно сохранять копию журнала настройки.</span><span class="sxs-lookup"><span data-stu-id="ed75b-235">Clear the check box if you do not want to save a copy of the tuning log.</span></span>  
  
     <span data-ttu-id="ed75b-236">Журнал настройки можно посмотреть после анализа, открыв сеанс и выбрав вкладку **Выполнение** .</span><span class="sxs-lookup"><span data-stu-id="ed75b-236">You can view the tuning log after analysis by opening the session and selecting the **Progress** tab.</span></span>  
  
8.  <span data-ttu-id="ed75b-237">Перейдите на вкладку **Параметры настройки** и выберите приведенные на ней параметры.</span><span class="sxs-lookup"><span data-stu-id="ed75b-237">Click the **Tuning Options** tab and select from the options listed there.</span></span>  
  
9. <span data-ttu-id="ed75b-238">На панели инструментов нажмите кнопку **Начать анализ** .</span><span class="sxs-lookup"><span data-stu-id="ed75b-238">Click the **Start Analysis** button in the toolbar.</span></span>  
  
     <span data-ttu-id="ed75b-239">Если нужно остановить сеанс настройки после его начала, в меню **Действия** выберите один из следующих вариантов.</span><span class="sxs-lookup"><span data-stu-id="ed75b-239">If you want to stop the tuning session after it has started, choose one of the following options on the **Actions** menu:</span></span>  
  
    -   <span data-ttu-id="ed75b-240">**Остановить анализ (с рекомендациями)** прерывает сеанс настройки и выводит приглашение для выбора, должен ли помощник по настройке ядра СУБД сформировать рекомендации на основе анализа, проведенного до этого момента.</span><span class="sxs-lookup"><span data-stu-id="ed75b-240">**Stop Analysis (With Recommendations)** stops the tuning session and prompts you to decide whether you want Database Engine Tuning Advisor to generate recommendations based on the analysis done up to this point.</span></span>  
  
    -   <span data-ttu-id="ed75b-241">Пункт**Остановить анализ** прерывает сеанс настройки без формирования рекомендаций.</span><span class="sxs-lookup"><span data-stu-id="ed75b-241">**Stop Analysis** stops the tuning session without generating any recommendations.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="ed75b-242">Временная остановка помощника по настройке ядра СУБД не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="ed75b-242">Pausing Database Engine Tuning Advisor is not supported.</span></span> <span data-ttu-id="ed75b-243">Если на панели инструментов нажать кнопку **Начать анализ** после кнопки **Остановить анализ** или **Остановить анализ (с рекомендациями)** , то помощник по настройке ядра СУБД начинает новый сеанс настройки.</span><span class="sxs-lookup"><span data-stu-id="ed75b-243">If you click the **Start Analysis** toolbar button after clicking either the **Stop Analysis** or **Stop Analysis (With Recommendations)** toolbar buttons, Database Engine Tuning Advisor starts a new tuning session.</span></span>  
  
###  <a name="use-the-dta-utility"></a><a name="dta"></a> <span data-ttu-id="ed75b-244">Использование служебной программы dta</span><span class="sxs-lookup"><span data-stu-id="ed75b-244">Use the dta Utility</span></span>  
 <span data-ttu-id="ed75b-245">Программа [dta](../../tools/dta/dta-utility.md) представляет собой программу командной строки, которая может быть использована для настройки баз данных.</span><span class="sxs-lookup"><span data-stu-id="ed75b-245">The [dta utility](../../tools/dta/dta-utility.md) provides a command prompt executable file that you can use to tune databases.</span></span> <span data-ttu-id="ed75b-246">Она дает доступ к функциональности помощника по настройке ядра СУБД в пакетных файлах и скриптах.</span><span class="sxs-lookup"><span data-stu-id="ed75b-246">It enables you to use Database Engine Tuning Advisor functionality in batch files and scripts.</span></span> <span data-ttu-id="ed75b-247">Программа **dta** использует в качестве рабочей нагрузки элементы кэша планов, файлы трассировки, таблицы трассировки и скрипты на языке [!INCLUDE[tsql](../../includes/tsql-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="ed75b-247">The **dta** utility takes plan cache entries, trace files, trace tables, and [!INCLUDE[tsql](../../includes/tsql-md.md)] scripts as workloads.</span></span> <span data-ttu-id="ed75b-248">Она также использует входные XML-данные, соответствующие схеме помощника по настройке ядра СУБД, находящейся на [веб-сайте Microsoft](https://go.microsoft.com/fwlink/?linkid=43100).</span><span class="sxs-lookup"><span data-stu-id="ed75b-248">It also takes XML input that conforms to the Database Engine Tuning Advisor XML schema, which is available at this [Microsoft Web site](https://go.microsoft.com/fwlink/?linkid=43100).</span></span>  
  
 <span data-ttu-id="ed75b-249">Перед началом настройки рабочей нагрузки при помощи программы **dta** обратите внимание на следующее.</span><span class="sxs-lookup"><span data-stu-id="ed75b-249">Consider the following before you begin tuning a workload with the **dta** utility:</span></span>  
  
-   <span data-ttu-id="ed75b-250">При использовании таблицы трассировки в качестве рабочей нагрузки она должна находиться на том же сервере, настройку которого производит помощник по настройке ядра СУБД.</span><span class="sxs-lookup"><span data-stu-id="ed75b-250">When using a trace table as a workload, that table must exist on the same server that Database Engine Tuning Advisor is tuning.</span></span> <span data-ttu-id="ed75b-251">Если таблица трассировки создается на другом сервере, переместите ее на сервер, настраиваемый помощником по настройке ядра СУБД.</span><span class="sxs-lookup"><span data-stu-id="ed75b-251">If you create the trace table on a different server, then move it to the server that Database Engine Tuning Advisor is tuning.</span></span>  
  
-   <span data-ttu-id="ed75b-252">Прежде чем использовать таблицу трассировки в качестве рабочей нагрузки для помощника по настройке ядра СУБД, убедитесь, что трассировка остановилась.</span><span class="sxs-lookup"><span data-stu-id="ed75b-252">Make sure that tracing has stopped before using a trace table as a workload for Database Engine Tuning Advisor.</span></span> <span data-ttu-id="ed75b-253">Помощник по настройке ядра СУБД не позволяет использовать в качестве рабочей нагрузки таблицу трассировки, в которую еще производится запись трассируемых событий.</span><span class="sxs-lookup"><span data-stu-id="ed75b-253">Database Engine Tuning Advisor does not support using a trace table to which trace events are still being written as a workload.</span></span>  
  
-   <span data-ttu-id="ed75b-254">Если сеанс настройки длится дольше, чем предполагалось, для остановки сеанса настройки и формирования рекомендаций, основанных на анализе, который служебная программа **dta** выполнила к данному моменту, нажмите клавиши CTRL+C.</span><span class="sxs-lookup"><span data-stu-id="ed75b-254">If a tuning session continues running longer than you had anticipated it would run, you can press CTRL+C to stop the tuning session and generate recommendations based on the analysis **dta** has completed up to this point.</span></span> <span data-ttu-id="ed75b-255">Будет выведен запрос о создании рекомендаций.</span><span class="sxs-lookup"><span data-stu-id="ed75b-255">You will be prompted to decide whether you want to generate recommendations or not.</span></span> <span data-ttu-id="ed75b-256">Чтобы прервать сеанс настройки без формирования рекомендаций, еще раз нажмите сочетание клавиш CTRL+C.</span><span class="sxs-lookup"><span data-stu-id="ed75b-256">Press CTRL+C again to stop the tuning session without generating recommendations.</span></span>  
  
 <span data-ttu-id="ed75b-257">Дополнительные сведения о синтаксисе и примеры использования программы **dta** см. в разделе [dta Utility](../../tools/dta/dta-utility.md).</span><span class="sxs-lookup"><span data-stu-id="ed75b-257">For more information about **dta** utility syntax and examples, see [dta Utility](../../tools/dta/dta-utility.md).</span></span>  
  
##### <a name="to-tune-a-database-by-using-the-plan-cache"></a><span data-ttu-id="ed75b-258">Настройка базы данных при помощи кэша планов</span><span class="sxs-lookup"><span data-stu-id="ed75b-258">To tune a database by using the plan cache</span></span>  
  
1.  <span data-ttu-id="ed75b-259">Задайте параметр **-ip** .</span><span class="sxs-lookup"><span data-stu-id="ed75b-259">Specify the **-ip** option.</span></span> <span data-ttu-id="ed75b-260">Анализируется верхняя тысяча событий кэша планов для выбранных баз данных.</span><span class="sxs-lookup"><span data-stu-id="ed75b-260">The top 1,000 plan cache events for the selected databases are analyzed.</span></span>  
  
     <span data-ttu-id="ed75b-261">В командной строке введите следующую команду:</span><span class="sxs-lookup"><span data-stu-id="ed75b-261">From a command prompt, enter the following:</span></span>  
  
    ```  
    dta -E -D DatabaseName -ip -s SessionName  
    ```  
  
2.  <span data-ttu-id="ed75b-262">Чтобы изменить количество событий для анализа, задайте параметр **–n**.</span><span class="sxs-lookup"><span data-stu-id="ed75b-262">To modify the number of events to use for analysis, specify the **-n** option.</span></span> <span data-ttu-id="ed75b-263">В следующем примере увеличивается число элементов кэша до 2 000.</span><span class="sxs-lookup"><span data-stu-id="ed75b-263">The following example increases the number of cache entries to 2,000.</span></span>  
  
    ```  
    dta -E -D DatabaseName -ip -n 2000-s SessionName1  
    ```  
  
3.  <span data-ttu-id="ed75b-264">В целях анализа событий для всех баз данных в экземпляре укажите параметр **-ipf** .</span><span class="sxs-lookup"><span data-stu-id="ed75b-264">To analyze events for all databases in the instance, specify the **-ipf** option.</span></span>  
  
    ```  
    dta -E -D DatabaseName -ip -ipf -n 2000 -s SessionName2  
    ```  
  
##### <a name="to-tune-a-database-by-using-a-workload-and-dta-utility-default-settings"></a><span data-ttu-id="ed75b-265">Настройка базы данных при помощи рабочей нагрузки и параметров программы dta по умолчанию</span><span class="sxs-lookup"><span data-stu-id="ed75b-265">To tune a database by using a workload and dta utility default settings</span></span>  
  
1.  <span data-ttu-id="ed75b-266">Определите все компоненты (индексы, индексированные представления, секции) базы данных, которые помощник по настройке ядра СУБД должен проанализировать на предмет добавления, удаления или сохранения.</span><span class="sxs-lookup"><span data-stu-id="ed75b-266">Determine the database features (indexes, indexed views, partitioning) you want Database Engine Tuning Advisor to consider adding, removing, or retaining during analysis.</span></span>  
  
2.  <span data-ttu-id="ed75b-267">Создайте рабочую нагрузку.</span><span class="sxs-lookup"><span data-stu-id="ed75b-267">Create a workload.</span></span> <span data-ttu-id="ed75b-268">Дополнительные сведения см. выше в подразделе [Создание рабочей нагрузки](#Create) .</span><span class="sxs-lookup"><span data-stu-id="ed75b-268">For more information, see [Create a Workload](#Create) earlier in this topic.</span></span>  
  
3.  <span data-ttu-id="ed75b-269">В командной строке введите следующую команду:</span><span class="sxs-lookup"><span data-stu-id="ed75b-269">From a command prompt, enter the following:</span></span>  
  
    ```  
    dta -E -D DatabaseName -if WorkloadFile -s SessionName  
    ```  
  
     <span data-ttu-id="ed75b-270">где переключатель `-E` указывает, что сеанс настройки использует доверительное соединение (вместо идентификатора входа и пароля), а переключатель `-D` задает имя настраиваемой базы данных.</span><span class="sxs-lookup"><span data-stu-id="ed75b-270">where `-E` specifies that your tuning session uses a trusted connection (instead of a login ID and password), `-D` specifies the name of the database you want to tune.</span></span> <span data-ttu-id="ed75b-271">По умолчанию программа устанавливает соединение с экземпляром [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] на локальном компьютере по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="ed75b-271">By default, the utility connects to the default instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] on the local computer.</span></span> <span data-ttu-id="ed75b-272">(Для задания удаленной базы данных, как показано в следующей процедуре, или для задания именованного экземпляра используйте переключатель `-S` ). Переключатель `-if` задает имя и путь к файлу рабочей нагрузки (который может быть скриптом на языке [!INCLUDE[tsql](../../includes/tsql-md.md)] или файлом трассировки), а переключатель `-s` задает имя сеанса настройки.</span><span class="sxs-lookup"><span data-stu-id="ed75b-272">(Use the `-S` option to specify a remote database as shown in the following procedure, or to specify a named instance.) The `-if` option specifies the name and path to a workload file (which can be a [!INCLUDE[tsql](../../includes/tsql-md.md)] script or a trace file), and `-s` specifies a name for your tuning session.</span></span>  
  
     <span data-ttu-id="ed75b-273">Перечисленные здесь четыре аргумента (имя базы данных, рабочая нагрузка, тип соединения и имя сеанса) являются обязательными.</span><span class="sxs-lookup"><span data-stu-id="ed75b-273">The four options shown here (database name, workload, connection type, and session name) are mandatory.</span></span>  
  
##### <a name="to-tune-a-remote-database-or-a-named-instance-for-a-specific-duration"></a><span data-ttu-id="ed75b-274">Настройка удаленной базы данных или именованного экземпляра в течение определенного периода времени</span><span class="sxs-lookup"><span data-stu-id="ed75b-274">To tune a remote database or a named instance for a specific duration</span></span>  
  
1.  <span data-ttu-id="ed75b-275">Определите все компоненты (индексы, индексированные представления, секции) базы данных, которые помощник по настройке ядра СУБД должен проанализировать на предмет добавления, удаления или сохранения.</span><span class="sxs-lookup"><span data-stu-id="ed75b-275">Determine the database features (indexes, indexed views, partitioning) you want Database Engine Tuning Advisor to consider adding, removing, or retaining during analysis.</span></span>  
  
2.  <span data-ttu-id="ed75b-276">Создайте рабочую нагрузку.</span><span class="sxs-lookup"><span data-stu-id="ed75b-276">Create a workload.</span></span> <span data-ttu-id="ed75b-277">Дополнительные сведения см. выше в подразделе [Создание рабочей нагрузки](#Create) .</span><span class="sxs-lookup"><span data-stu-id="ed75b-277">For more information, see [Create a Workload](#Create) earlier in this topic.</span></span>  
  
3.  <span data-ttu-id="ed75b-278">В командной строке введите следующую команду:</span><span class="sxs-lookup"><span data-stu-id="ed75b-278">From a command prompt, enter the following:</span></span>  
  
    ```  
    dta -S ServerName\Instance -D DatabaseName -it WorkloadTableName   
    -U LoginID -P Password -s SessionName -A TuningTimeInMinutes  
    ```  
  
     <span data-ttu-id="ed75b-279">где переключатель `-S` задает имя удаленного сервера и экземпляр (или именованный экземпляр на локальном сервере), а переключатель `-D` задает имя настраиваемой базы данных.</span><span class="sxs-lookup"><span data-stu-id="ed75b-279">where `-S` specifies a remote server name and instance (or a named instance on the local server) and `-D` specifies the name of the database you want to tune.</span></span> <span data-ttu-id="ed75b-280">Переключатель `-it` задает имя таблицы рабочей нагрузки, переключатели `-U` и `-P` определяют идентификатор входа и пароль для входа в удаленную базу данных, переключатель `-s` задает имя сеанса настройки и переключатель `-A` задает длительность сеанса настройки в минутах.</span><span class="sxs-lookup"><span data-stu-id="ed75b-280">The `-it` option specifies the name of the workload table, `-U` and `-P` specify the login ID and password to the remote database, `-s` specifies the tuning session name, and `-A` specifies the tuning session duration in minutes.</span></span> <span data-ttu-id="ed75b-281">По умолчанию для программы **dta** устанавливается длительность настройки, равная 8 часам.</span><span class="sxs-lookup"><span data-stu-id="ed75b-281">By default, the **dta** utility uses an 8-hour tuning duration.</span></span> <span data-ttu-id="ed75b-282">Если необходимо, чтобы помощник по настройке ядра СУБД мог настраивать рабочую нагрузку в течение неограниченного времени, задайте значение **0** (ноль) для переключателя `-A` .</span><span class="sxs-lookup"><span data-stu-id="ed75b-282">If you would like Database Engine Tuning Advisor to tune a workload for an unlimited amount of time, specify **0** (zero) with the `-A` option.</span></span>  
  
##### <a name="to-tune-a-database-using-an-xml-input-file"></a><span data-ttu-id="ed75b-283">Настройка базы данных при помощи входного файла XML</span><span class="sxs-lookup"><span data-stu-id="ed75b-283">To tune a database using an XML input file</span></span>  
  
1.  <span data-ttu-id="ed75b-284">Определите все компоненты (индексы, индексированные представления, секции) базы данных, которые помощник по настройке ядра СУБД должен проанализировать на предмет добавления, удаления или сохранения.</span><span class="sxs-lookup"><span data-stu-id="ed75b-284">Determine the database features (indexes, indexed views, partitioning) you want Database Engine Tuning Advisor to consider adding, removing, or retaining during analysis.</span></span>  
  
2.  <span data-ttu-id="ed75b-285">Создайте рабочую нагрузку.</span><span class="sxs-lookup"><span data-stu-id="ed75b-285">Create a workload.</span></span> <span data-ttu-id="ed75b-286">Дополнительные сведения см. выше в подразделе [Создание рабочей нагрузки](#Create) .</span><span class="sxs-lookup"><span data-stu-id="ed75b-286">For more information, see [Create a Workload](#Create) earlier in this topic.</span></span>  
  
3.  <span data-ttu-id="ed75b-287">Создайте входной файл XML-данных.</span><span class="sxs-lookup"><span data-stu-id="ed75b-287">Create an XML input file.</span></span> <span data-ttu-id="ed75b-288">Дополнительные сведения см. далее в подразделе [Создание входных файлов XML-данных](#XMLInput) .</span><span class="sxs-lookup"><span data-stu-id="ed75b-288">For more information, see [Create XML Input Files](#XMLInput) later in this topic.</span></span>  
  
4.  <span data-ttu-id="ed75b-289">В командной строке введите следующую команду:</span><span class="sxs-lookup"><span data-stu-id="ed75b-289">From a command prompt, enter the following:</span></span>  
  
    ```  
    dta -E -S ServerName\Instance -s SessionName -ix PathToXMLInputFile  
    ```  
  
     <span data-ttu-id="ed75b-290">где переключатель `-E` задает доверительное соединение, переключатель `-S` задает удаленный сервер и экземпляр или именованный экземпляр на локальном сервере, переключатель `-s` задает имя сеанса настройки и переключатель `-ix` задает входной файл XML-данных, используемый в сеансе настройки.</span><span class="sxs-lookup"><span data-stu-id="ed75b-290">where `-E` specifies a trusted connection, `-S` specifies a remote server and instance, or a named instance on the local server, `-s` specifies a tuning session name, and `-ix` specifies the XML input file to use for the tuning session.</span></span>  
  
5.  <span data-ttu-id="ed75b-291">После окончания настройки рабочей нагрузки результаты сеансов настройки вы можете просмотреть в графическом пользовательском интерфейсе помощника по настройке ядра СУБД.</span><span class="sxs-lookup"><span data-stu-id="ed75b-291">After the utility finishes tuning the workload, you can view the results of tuning sessions with the Database Engine Tuning Advisor GUI.</span></span> <span data-ttu-id="ed75b-292">В качестве альтернативы с помощью параметра **-ox** вы можете также указать, что рекомендации по настройке необходимо записать в XML-файл.</span><span class="sxs-lookup"><span data-stu-id="ed75b-292">As an alternative, you can also specify that the tuning recommendations be written to an XML file with the **-ox** option.</span></span> <span data-ttu-id="ed75b-293">Дополнительные сведения см. в статье [dta Utility](../../tools/dta/dta-utility.md).</span><span class="sxs-lookup"><span data-stu-id="ed75b-293">For more information, see [dta Utility](../../tools/dta/dta-utility.md).</span></span>  
  
##  <a name="create-an-xml-input-file"></a><a name="XMLInput"></a> <span data-ttu-id="ed75b-294">Создание входного файла XML-данных</span><span class="sxs-lookup"><span data-stu-id="ed75b-294">Create an XML Input File</span></span>  
 <span data-ttu-id="ed75b-295">Опытный XML-разработчик может создавать файлы в формате XML, которые помощник по настройке компонента [!INCLUDE[ssDE](../../includes/ssde-md.md)] сможет использовать для настройки рабочих нагрузок.</span><span class="sxs-lookup"><span data-stu-id="ed75b-295">If you are an experienced XML developer, you can create XML-formatted files that [!INCLUDE[ssDE](../../includes/ssde-md.md)] Tuning Advisor can use to tune workloads.</span></span> <span data-ttu-id="ed75b-296">Чтобы создать эти XML-файлы, используйте наиболее удобные для вас XML-инструменты для изменения файла образца или создания экземпляра из XML-схемы помощника по настройке компонента [!INCLUDE[ssDE](../../includes/ssde-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="ed75b-296">To create these XML files, use your favorite XML tools to edit a sample file or to generate an instance from the [!INCLUDE[ssDE](../../includes/ssde-md.md)] Tuning Advisor XML schema.</span></span>  
  
 <span data-ttu-id="ed75b-297">XML-схема помощника по настройке компонента [!INCLUDE[ssDE](../../includes/ssde-md.md)] доступна в следующем каталоге установленной копии [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]:</span><span class="sxs-lookup"><span data-stu-id="ed75b-297">The [!INCLUDE[ssDE](../../includes/ssde-md.md)] Tuning Advisor XML schema is available in your [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] installation in the following location:</span></span>  
  
 <span data-ttu-id="ed75b-298">C:\Program Files\Microsoft SQL Server\100\Tools\Binn\schemas\sqlserver\2004\07\dta\dtaschema.xsd</span><span class="sxs-lookup"><span data-stu-id="ed75b-298">C:\Program Files\Microsoft SQL Server\100\Tools\Binn\schemas\sqlserver\2004\07\dta\dtaschema.xsd</span></span>  
  
 <span data-ttu-id="ed75b-299">Схема XML помощника по настройке компонента [!INCLUDE[ssDE](../../includes/ssde-md.md)] также доступна в сети на [веб-сайте Майкрософт](https://go.microsoft.com/fwlink/?linkid=43100&clcid=0x409).</span><span class="sxs-lookup"><span data-stu-id="ed75b-299">The [!INCLUDE[ssDE](../../includes/ssde-md.md)] Tuning Advisor XML schema is also available online at this [Microsoft Web site](https://go.microsoft.com/fwlink/?linkid=43100&clcid=0x409).</span></span>  
  
 <span data-ttu-id="ed75b-300">Этот URL-адрес ведет на страницу с множеством доступных XML-схем [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="ed75b-300">This URL takes you to a page where many [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] XML schemas are available.</span></span> <span data-ttu-id="ed75b-301">Прокручивайте страницу вниз до тех пор, пока не появится строка с помощником по настройке компонента [!INCLUDE[ssDE](../../includes/ssde-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="ed75b-301">Scroll down the page until you reach the row for [!INCLUDE[ssDE](../../includes/ssde-md.md)] Tuning Advisor.</span></span>  
  
#### <a name="to-create-an-xml-input-file-to-tune-workloads"></a><span data-ttu-id="ed75b-302">Создание входного XML-файла для настройки рабочих нагрузок</span><span class="sxs-lookup"><span data-stu-id="ed75b-302">To create an XML input file to tune workloads</span></span>  
  
1.  <span data-ttu-id="ed75b-303">Создайте рабочую нагрузку.</span><span class="sxs-lookup"><span data-stu-id="ed75b-303">Create a workload.</span></span> <span data-ttu-id="ed75b-304">Можно использовать файл или таблицу трассировки через шаблон настройки в приложении [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)]либо создать скрипт [!INCLUDE[tsql](../../includes/tsql-md.md)] для воспроизведения показательной рабочей нагрузки для [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="ed75b-304">You can use a trace file or table by using the tuning template in [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)], or create a [!INCLUDE[tsql](../../includes/tsql-md.md)] script that reproduces a representative workload for [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="ed75b-305">Дополнительные сведения см. выше в подразделе [Создание рабочей нагрузки](#Create) .</span><span class="sxs-lookup"><span data-stu-id="ed75b-305">For more information, see [Create a Workload](#Create) earlier in this topic.</span></span>  
  
2.  <span data-ttu-id="ed75b-306">Создать входной XML-файл одним из следующих способов:</span><span class="sxs-lookup"><span data-stu-id="ed75b-306">Create an XML input file by one of the following methods:</span></span>  
  
    -   <span data-ttu-id="ed75b-307">Скопируйте и вставьте один из [образцов входных XML-файлов (DTA)](../../tools/dta/xml-input-file-samples-dta.md) в редактор XML по своему выбору.</span><span class="sxs-lookup"><span data-stu-id="ed75b-307">Copy and paste one of the [XML Input File Samples &#40;DTA&#41;](../../tools/dta/xml-input-file-samples-dta.md) into your favorite XML editor.</span></span> <span data-ttu-id="ed75b-308">Изменить значения с целью указания соответствующих аргументов для установки [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] и сохранения XML-файла;</span><span class="sxs-lookup"><span data-stu-id="ed75b-308">Change the values to specify the appropriate arguments for your [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] installation, and save the XML file.</span></span>  
  
    -   <span data-ttu-id="ed75b-309">Используя избранный XML-инструмент, сформировать экземпляр из схемы XML помощника по настройке компонента [!INCLUDE[ssDE](../../includes/ssde-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="ed75b-309">Using your favorite XML tool, generate an instance from the [!INCLUDE[ssDE](../../includes/ssde-md.md)] Tuning Advisor XML schema.</span></span>  
  
3.  <span data-ttu-id="ed75b-310">После создания входного XML-файла используйте его как входной файл для программы командной строки **dta** при настройке рабочей нагрузки.</span><span class="sxs-lookup"><span data-stu-id="ed75b-310">After creating the XML input file, use it as input to the **dta** command-line utility to tune the workload.</span></span> <span data-ttu-id="ed75b-311">Сведения об использовании входных файлов XML-данных с этой программой см. выше в разделе [Использование служебной программы dta](#dta) .</span><span class="sxs-lookup"><span data-stu-id="ed75b-311">For information about using XML input files with this utility, see the section [Use the dta Utililty](#dta) earlier in this topic.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="ed75b-312">Если необходимо использовать встроенную рабочую нагрузку, которая указывается непосредственно во входном файле XML-данных, воспользуйтесь образцом [Образец входного XML-файла с описанием встроенной рабочей нагрузки (DTA)](../../tools/dta/xml-input-file-sample-with-inline-workload-dta.md).</span><span class="sxs-lookup"><span data-stu-id="ed75b-312">If you want to use an inline workload, which is a workload that is specified directly in the XML input file, use the sample [XML Input File Sample with Inline Workload &#40;DTA&#41;](../../tools/dta/xml-input-file-sample-with-inline-workload-dta.md).</span></span>  
  
##  <a name="user-interface-descriptions"></a><a name="UI"></a> <span data-ttu-id="ed75b-313">Описание пользовательского интерфейса</span><span class="sxs-lookup"><span data-stu-id="ed75b-313">User Interface Descriptions</span></span>  
  
### <a name="tools-menuoptions-page"></a><span data-ttu-id="ed75b-314">Меню «Сервис»/«Страница "Параметры"»</span><span class="sxs-lookup"><span data-stu-id="ed75b-314">Tools Menu/Options Page</span></span>  
 <span data-ttu-id="ed75b-315">Это диалоговое окно служит для указания общих параметров конфигурации для помощника по настройке ядра СУБД.</span><span class="sxs-lookup"><span data-stu-id="ed75b-315">Use this dialog box to specify general configuration parameters for the Database Engine Tuning Advisor.</span></span>  
  
 <span data-ttu-id="ed75b-316">**При запуске**</span><span class="sxs-lookup"><span data-stu-id="ed75b-316">**On startup**</span></span>  
 <span data-ttu-id="ed75b-317">Укажите, что должен делать помощник по настройке ядра СУБД при его запуске: открыть без подключения к базе данных, открыть диалоговое окно **Создание соединения** , открыть новый сеанс или загрузить последний загружаемый сеанс.</span><span class="sxs-lookup"><span data-stu-id="ed75b-317">Specify what Database Engine Tuning Advisor should do when it is started: open without a database connection, show a **New Connection** dialog box, show a new session, or load the last loaded session.</span></span>  
  
 <span data-ttu-id="ed75b-318">**Изменить шрифт**</span><span class="sxs-lookup"><span data-stu-id="ed75b-318">**Change font**</span></span>  
 <span data-ttu-id="ed75b-319">Определяет шрифт, используемый в таблицах помощником по настройке ядра СУБД.</span><span class="sxs-lookup"><span data-stu-id="ed75b-319">Specify the display font used by Database Engine Tuning Advisor tables.</span></span>  
  
 <span data-ttu-id="ed75b-320">**Число элементов в списках последних использованных объектов**</span><span class="sxs-lookup"><span data-stu-id="ed75b-320">**Number of items in most recently used lists**</span></span>  
 <span data-ttu-id="ed75b-321">Указывается число сеансов или файлов, отображаемых в списках **Последние сеансы** и **Последние файлы** в меню **Файл** .</span><span class="sxs-lookup"><span data-stu-id="ed75b-321">Specify the number of sessions or files to display under **Recent Sessions** or **Recent Files** in the **File** menu.</span></span>  
  
 <span data-ttu-id="ed75b-322">**Запоминать последние параметры настройки**</span><span class="sxs-lookup"><span data-stu-id="ed75b-322">**Remember my last tuning options**</span></span>  
 <span data-ttu-id="ed75b-323">Сохранять параметры настройки между сеансами.</span><span class="sxs-lookup"><span data-stu-id="ed75b-323">Retain tuning options between sessions.</span></span> <span data-ttu-id="ed75b-324">Выбрано по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="ed75b-324">Selected by default.</span></span> <span data-ttu-id="ed75b-325">Снимите этот флажок, чтобы помощник по настройке ядра СУБД всегда запускался с параметрами по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="ed75b-325">Clear this check box to always start with the Database Engine Tuning Advisor defaults.</span></span>  
  
 <span data-ttu-id="ed75b-326">**Запрашивать подтверждение перед окончательным удалением сеансов**</span><span class="sxs-lookup"><span data-stu-id="ed75b-326">**Ask before permanently deleting sessions**</span></span>  
 <span data-ttu-id="ed75b-327">Отображать диалоговое окно подтверждения перед удалением сеансов.</span><span class="sxs-lookup"><span data-stu-id="ed75b-327">Display a confirmation dialog box before deleting sessions.</span></span>  
  
 <span data-ttu-id="ed75b-328">**Запрашивать подтверждение перед остановкой анализа сеанса**</span><span class="sxs-lookup"><span data-stu-id="ed75b-328">**Ask before stopping session analysis**</span></span>  
 <span data-ttu-id="ed75b-329">Отображать диалоговое окно подтверждения перед остановкой анализа рабочей нагрузки.</span><span class="sxs-lookup"><span data-stu-id="ed75b-329">Display a confirmation dialog box before stopping analysis of a workload.</span></span>  
  
#### <a name="general-tab-options"></a><span data-ttu-id="ed75b-330">Параметры на вкладке «Общие»</span><span class="sxs-lookup"><span data-stu-id="ed75b-330">General Tab Options</span></span>  
 <span data-ttu-id="ed75b-331">Перед началом сеанса настройки необходимо заполнить поля на вкладке **Общие** .</span><span class="sxs-lookup"><span data-stu-id="ed75b-331">You must configure the fields in the **General** tab before starting a tuning session.</span></span> <span data-ttu-id="ed75b-332">Перед началом сеанса настройки изменять параметры на вкладке **Параметры настройки** не обязательно.</span><span class="sxs-lookup"><span data-stu-id="ed75b-332">You do not have to modify the settings of the **Tuning Options** tab before starting a tuning session.</span></span>  
  
 <span data-ttu-id="ed75b-333">**Имя сеанса**</span><span class="sxs-lookup"><span data-stu-id="ed75b-333">**Session name**</span></span>  
 <span data-ttu-id="ed75b-334">Укажите имя для этого сеанса.</span><span class="sxs-lookup"><span data-stu-id="ed75b-334">Specify a name for the session.</span></span> <span data-ttu-id="ed75b-335">Это имя сеанса связывает имя с сеансом настройки.</span><span class="sxs-lookup"><span data-stu-id="ed75b-335">The session name associates a name with a tuning session.</span></span> <span data-ttu-id="ed75b-336">Впоследствии по этому имени можно обращаться к данному сеансу настройки.</span><span class="sxs-lookup"><span data-stu-id="ed75b-336">You can refer to this name to review the tuning session later.</span></span>  
  
 <span data-ttu-id="ed75b-337">**Файл**</span><span class="sxs-lookup"><span data-stu-id="ed75b-337">**File**</span></span>  
 <span data-ttu-id="ed75b-338">Укажите SQL-скрипт или файл трассировки для рабочей нагрузки.</span><span class="sxs-lookup"><span data-stu-id="ed75b-338">Specify a .sql script or trace file for a workload.</span></span> <span data-ttu-id="ed75b-339">Укажите путь и имя файла в соответствующих полях.</span><span class="sxs-lookup"><span data-stu-id="ed75b-339">Specify the path and filename in the associated text box.</span></span> <span data-ttu-id="ed75b-340">Помощник по настройке ядра СУБД предполагает, что файл трассировки рабочей нагрузки является файлом продолжения.</span><span class="sxs-lookup"><span data-stu-id="ed75b-340">Database Engine Tuning Advisor assumes that the workload trace file is a rollover file.</span></span> <span data-ttu-id="ed75b-341">Дополнительные сведения о файлах продолжения см. в разделе [Limit Trace File and Table Sizes](../sql-trace/limit-trace-file-and-table-sizes.md).</span><span class="sxs-lookup"><span data-stu-id="ed75b-341">For more information about rollover files, see [Limit Trace File and Table Sizes](../sql-trace/limit-trace-file-and-table-sizes.md).</span></span>  
  
 <span data-ttu-id="ed75b-342">**Таблица**</span><span class="sxs-lookup"><span data-stu-id="ed75b-342">**Table**</span></span>  
 <span data-ttu-id="ed75b-343">Укажите таблицу трассировки для рабочей нагрузки.</span><span class="sxs-lookup"><span data-stu-id="ed75b-343">Specify a trace table for a workload.</span></span> <span data-ttu-id="ed75b-344">Укажите полное имя таблицы трассировки в текстовом поле следующим образом:</span><span class="sxs-lookup"><span data-stu-id="ed75b-344">Specify the fully qualified name of the trace table in the associated text box as follows:</span></span>  
  
```  
database_name.owner_name.table_name  
```  
  
-   <span data-ttu-id="ed75b-345">Перед использованием таблицы трассировки в качестве рабочей нагрузки необходимо убедиться, что данная трассировка остановлена.</span><span class="sxs-lookup"><span data-stu-id="ed75b-345">Make sure that tracing has stopped before using a trace table as a workload.</span></span>  
  
-   <span data-ttu-id="ed75b-346">Таблица трассировки должна находиться на том же сервере, который настраивается помощником по настройке ядра СУБД.</span><span class="sxs-lookup"><span data-stu-id="ed75b-346">The trace table must exist on the same server that Database Engine Tuning Advisor is tuning.</span></span> <span data-ttu-id="ed75b-347">Если таблица трассировки создается на другом сервере, переместите ее на сервер, настраиваемый помощником по настройке ядра СУБД.</span><span class="sxs-lookup"><span data-stu-id="ed75b-347">If you create the trace table on a different server, then move it to the server that Database Engine Tuning Advisor is tuning.</span></span>  
  
 <span data-ttu-id="ed75b-348">**Кэш планов**</span><span class="sxs-lookup"><span data-stu-id="ed75b-348">**Plan Cache**</span></span>  
 <span data-ttu-id="ed75b-349">Укажите кэш планов в качестве рабочей нагрузки.</span><span class="sxs-lookup"><span data-stu-id="ed75b-349">Specify the plan cache as a workload.</span></span> <span data-ttu-id="ed75b-350">Это позволяет не создавать рабочую нагрузку вручную.</span><span class="sxs-lookup"><span data-stu-id="ed75b-350">By doing this, you can avoid having to manually create a workload.</span></span> <span data-ttu-id="ed75b-351">Помощник по настройке ядра СУБД выбирает верхнюю тысячу событий для использования при анализе.</span><span class="sxs-lookup"><span data-stu-id="ed75b-351">Database Engine Tuning Advisor selects the top 1,000 events to use for analysis.</span></span>  
  
 <span data-ttu-id="ed75b-352">**Xml**</span><span class="sxs-lookup"><span data-stu-id="ed75b-352">**Xml**</span></span>  
 <span data-ttu-id="ed75b-353">Этот параметр не появляется, если рабочая нагрузка не импортируется из среды [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span><span class="sxs-lookup"><span data-stu-id="ed75b-353">This does not appear unless you import a workload query from [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span></span>  
  
 <span data-ttu-id="ed75b-354">Для импорта запроса рабочей нагрузки из среды [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]сделайте следующее:</span><span class="sxs-lookup"><span data-stu-id="ed75b-354">To import a workload query from [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]:</span></span>  
  
1.  <span data-ttu-id="ed75b-355">Введите запрос в редакторе запросов и выделите его.</span><span class="sxs-lookup"><span data-stu-id="ed75b-355">Type a query into Query Editor and highlight it.</span></span>  
  
2.  <span data-ttu-id="ed75b-356">Щелкните выделение правой кнопкой мыши и выберите команду **Анализ запроса в помощнике по настройке ядра СУБД**.</span><span class="sxs-lookup"><span data-stu-id="ed75b-356">Right-click the highlighted query and click **Analyze Query in Database Engine Tuning Advisor**.</span></span>  
  
 <span data-ttu-id="ed75b-357">**Выберите рабочую нагрузку [файл или таблицу]**</span><span class="sxs-lookup"><span data-stu-id="ed75b-357">**Browse for a workload [file or table]**</span></span>  
 <span data-ttu-id="ed75b-358">Если в качестве источника рабочей нагрузки выбраны **Файл** или **Таблица** , то источник можно выбрать, нажав эту кнопку просмотра.</span><span class="sxs-lookup"><span data-stu-id="ed75b-358">When **File** or **Table** is selected as the workload source, use this browse button to select the target.</span></span>  
  
 <span data-ttu-id="ed75b-359">**Предварительный просмотр рабочей нагрузки в формате XML**</span><span class="sxs-lookup"><span data-stu-id="ed75b-359">**Preview the XML workload**</span></span>  
 <span data-ttu-id="ed75b-360">Просмотр рабочей нагрузки в формате XML, импортированной из среды [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span><span class="sxs-lookup"><span data-stu-id="ed75b-360">View an XML-formatted workload that has been imported from [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span></span>  
  
 <span data-ttu-id="ed75b-361">**База данных для анализа рабочей нагрузки**</span><span class="sxs-lookup"><span data-stu-id="ed75b-361">**Database for workload analysis**</span></span>  
 <span data-ttu-id="ed75b-362">Укажите первую базу данных, к которой подключается помощник по настройке ядра СУБД при настройке рабочей нагрузки.</span><span class="sxs-lookup"><span data-stu-id="ed75b-362">Specify the first database to which Database Engine Tuning Advisor connects when tuning a workload.</span></span> <span data-ttu-id="ed75b-363">После начала настройки помощник по настройке ядра СУБД подключается к базам данных, определенным в инструкциях `USE DATABASE` , которые содержатся в рабочей нагрузке.</span><span class="sxs-lookup"><span data-stu-id="ed75b-363">After tuning begins, Database Engine Tuning Advisor connects to the databases specified by the `USE DATABASE` statements contained in the workload.</span></span>  
  
 <span data-ttu-id="ed75b-364">**Выберите базы данных и таблицы для настройки**</span><span class="sxs-lookup"><span data-stu-id="ed75b-364">**Select databases and tables to tune**</span></span>  
 <span data-ttu-id="ed75b-365">Выберите настраиваемые базы данных и таблицы.</span><span class="sxs-lookup"><span data-stu-id="ed75b-365">Specify the databases and tables to be tuned.</span></span> <span data-ttu-id="ed75b-366">Чтобы выбрать все базы данных, установите флажок в заголовке столбца **Имя** .</span><span class="sxs-lookup"><span data-stu-id="ed75b-366">To specify all of the databases, select the check box in the **Name** column heading.</span></span> <span data-ttu-id="ed75b-367">Чтобы выбрать определенные базы данных, установите флажки рядом с их именами.</span><span class="sxs-lookup"><span data-stu-id="ed75b-367">To specify certain databases, select the check box next to the database name.</span></span> <span data-ttu-id="ed75b-368">По умолчанию все таблицы для выбранных баз данных автоматически включаются в сеанс настройки.</span><span class="sxs-lookup"><span data-stu-id="ed75b-368">By default, all of the tables for selected databases are automatically included in the tuning session.</span></span> <span data-ttu-id="ed75b-369">Для исключения таблиц щелкните стрелку в столбце **Выбранные таблицы** , затем снимите флажки против таблиц, которые не нужно настраивать.</span><span class="sxs-lookup"><span data-stu-id="ed75b-369">To exclude tables, click the arrow in the **Selected Tables** column, and then clear the check boxes next to the tables that you do not want to tune.</span></span>  
  
 <span data-ttu-id="ed75b-370">Стрелка вниз**Выбранные таблицы**</span><span class="sxs-lookup"><span data-stu-id="ed75b-370">**Selected Tables** down arrow</span></span>  
 <span data-ttu-id="ed75b-371">Выводит список таблиц для выбора отдельных таблиц для настройки.</span><span class="sxs-lookup"><span data-stu-id="ed75b-371">Expand the tables list to allow selecting individual tables for tuning.</span></span>  
  
 <span data-ttu-id="ed75b-372">**Сохранить журнал настройки**</span><span class="sxs-lookup"><span data-stu-id="ed75b-372">**Save tuning log**</span></span>  
 <span data-ttu-id="ed75b-373">Создает журнал и записывает сообщения об ошибках сеанса.</span><span class="sxs-lookup"><span data-stu-id="ed75b-373">Create a log and record errors during the session.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="ed75b-374">Помощник по настройке ядра СУБД не обновляет автоматически данные о строках для таблиц, выведенных на вкладке **Общие** . Вместо этого он основывается на метаданных в базе данных.</span><span class="sxs-lookup"><span data-stu-id="ed75b-374">Database Engine Tuning Advisor does not automatically update the rows information for the tables displayed on the **General** tab. Instead it relies upon the metadata in the database.</span></span> <span data-ttu-id="ed75b-375">Если есть основания считать, что данные о строках устарели, выполните команду DBCC UPDATEUSAGE для соответствующих объектов.</span><span class="sxs-lookup"><span data-stu-id="ed75b-375">If you suspect that the rows information is outdated, run the DBCC UPDATEUSAGE command for the relevant objects.</span></span>  
  
##### <a name="tuning-tab-options"></a><span data-ttu-id="ed75b-376">Вкладка «Параметры настройки»</span><span class="sxs-lookup"><span data-stu-id="ed75b-376">Tuning Tab Options</span></span>  
 <span data-ttu-id="ed75b-377">На вкладке **Параметры настройки** задаются общие параметры настройки по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="ed75b-377">Use the **Tuning Options** tab to modify default settings of general tuning options.</span></span> <span data-ttu-id="ed75b-378">Перед началом сеанса настройки изменять параметры на вкладке **Параметры настройки** не обязательно.</span><span class="sxs-lookup"><span data-stu-id="ed75b-378">You do not have to modify the settings of the **Tuning Options** tab before starting a tuning session.</span></span>  
  
 <span data-ttu-id="ed75b-379">**Ограничить время настройки**</span><span class="sxs-lookup"><span data-stu-id="ed75b-379">**Limit tuning time**</span></span>  
 <span data-ttu-id="ed75b-380">Ограничивается время текущего сеанса настройки.</span><span class="sxs-lookup"><span data-stu-id="ed75b-380">Limits the time for the current tuning session.</span></span> <span data-ttu-id="ed75b-381">Предоставление большего количества времени для настройки повышает качество рекомендаций.</span><span class="sxs-lookup"><span data-stu-id="ed75b-381">Providing more time for turning improves the quality of the recommendations.</span></span> <span data-ttu-id="ed75b-382">Для обеспечения наилучших рекомендаций не выбирайте этот параметр.</span><span class="sxs-lookup"><span data-stu-id="ed75b-382">To ensure the best recommendations, do not select this option.</span></span>  
  
> [!NOTE]  
>  [!INCLUDE[ssDE](../../includes/ssde-md.md)] <span data-ttu-id="ed75b-383">во время анализа потребляет системные ресурсы.</span><span class="sxs-lookup"><span data-stu-id="ed75b-383">Tuning Advisor consumes system resources during analysis.</span></span> <span data-ttu-id="ed75b-384">Параметр **Ограничить время настройки** служит для прекращения настройки до начала ожидаемой высокой рабочей нагрузки настраиваемого сервера.</span><span class="sxs-lookup"><span data-stu-id="ed75b-384">Use **Limit tuning time** to stop tuning before periods of anticipated heavy workload on the server being tuned.</span></span>  
  
 <span data-ttu-id="ed75b-385">**Дополнительные параметры**</span><span class="sxs-lookup"><span data-stu-id="ed75b-385">**Advanced Options**</span></span>  
 <span data-ttu-id="ed75b-386">Диалоговое окно **Дополнительные параметры настройки** служит для настройки максимально доступного свободного пространства, максимального количества ключевых столбцов и рекомендаций по индексам в сети.</span><span class="sxs-lookup"><span data-stu-id="ed75b-386">Use the **Advanced Tuning Options** dialog box to configure the maximum space, maximum key columns, and online index recommendations.</span></span>  
  
 <span data-ttu-id="ed75b-387">**Определить размер места для рекомендаций (МБ)**</span><span class="sxs-lookup"><span data-stu-id="ed75b-387">**Define max. space for recommendations (MB)**</span></span>  
 <span data-ttu-id="ed75b-388">Укажите рекомендованный помощником по настройке ядра СУБД максимальный объем пространства, которое будет использовано структурами физического проектирования.</span><span class="sxs-lookup"><span data-stu-id="ed75b-388">Type the maximum amount of space to be used by physical design structures recommended by Database Engine Tuning Advisor.</span></span>  
  
 <span data-ttu-id="ed75b-389">Если здесь не будет указано какое-либо значение, помощник по настройке Database Engine выберет наименьший из указанных ниже объемов пространства.</span><span class="sxs-lookup"><span data-stu-id="ed75b-389">If no value is entered here, Database Engine Tuning Advisor assumes the smaller of the following space limits:</span></span>  
  
-   <span data-ttu-id="ed75b-390">троекратный текущий размер необработанных данных, включая общий размер куч и кластеризованных индексов в таблицах базы данных;</span><span class="sxs-lookup"><span data-stu-id="ed75b-390">Three times the current raw data size, which includes the total size of heaps and clustered indexes on tables in the database.</span></span>  
  
-   <span data-ttu-id="ed75b-391">свободное место на всех присоединенных дисках плюс размер необработанных данных.</span><span class="sxs-lookup"><span data-stu-id="ed75b-391">The free space on all attached disk drives plus the raw data size.</span></span>  
  
 <span data-ttu-id="ed75b-392">**Включать события кэша планов из всех баз данных**</span><span class="sxs-lookup"><span data-stu-id="ed75b-392">**Include plan cache events from all databases**</span></span>  
 <span data-ttu-id="ed75b-393">Укажите, что анализируются события кэша планов из всех баз данных.</span><span class="sxs-lookup"><span data-stu-id="ed75b-393">Specify that plan cache events from all databases are analyzed.</span></span>  
  
 <span data-ttu-id="ed75b-394">**Максимальное число столбцов в индексе**</span><span class="sxs-lookup"><span data-stu-id="ed75b-394">**Max. columns per index**</span></span>  
 <span data-ttu-id="ed75b-395">Укажите максимальное число столбцов, включаемых в любой индекс.</span><span class="sxs-lookup"><span data-stu-id="ed75b-395">Specify the maximum number of columns to include in any index.</span></span> <span data-ttu-id="ed75b-396">Значение по умолчанию — 1023.</span><span class="sxs-lookup"><span data-stu-id="ed75b-396">The default is 1023.</span></span>  
  
 <span data-ttu-id="ed75b-397">**Создавать только рекомендации вне сети**</span><span class="sxs-lookup"><span data-stu-id="ed75b-397">**All recommendations are offline**</span></span>  
 <span data-ttu-id="ed75b-398">Создать по возможности наилучшие рекомендации, но не рекомендовать создания структур физического проектирования в режиме в сети.</span><span class="sxs-lookup"><span data-stu-id="ed75b-398">Generate the best recommendations possible, but do not recommend that any physical design structures be created online.</span></span>  
  
 <span data-ttu-id="ed75b-399">**Создавать рекомендации в сети, когда возможно**</span><span class="sxs-lookup"><span data-stu-id="ed75b-399">**Generate online recommendations where possible**</span></span>  
 <span data-ttu-id="ed75b-400">При создании инструкций [!INCLUDE[tsql](../../includes/tsql-md.md)] для внедрения рекомендаций используйте методы, которые можно реализовать при функционировании сервера в режиме в сети, даже если существуют более быстрые методы при работе в автономном режиме.</span><span class="sxs-lookup"><span data-stu-id="ed75b-400">When creating [!INCLUDE[tsql](../../includes/tsql-md.md)] statements to implement the recommendations, choose methods that can be implemented with the server online, even if a faster offline method is available.</span></span>  
  
 <span data-ttu-id="ed75b-401">**Создавать только рекомендации в сети**</span><span class="sxs-lookup"><span data-stu-id="ed75b-401">**Generate only online recommendations**</span></span>  
 <span data-ttu-id="ed75b-402">Создавать только такие рекомендации, которые позволяют серверам оставаться в режиме в сети.</span><span class="sxs-lookup"><span data-stu-id="ed75b-402">Only make recommendations that allow the server to stay online.</span></span>  
  
 <span data-ttu-id="ed75b-403">**Остановиться на**</span><span class="sxs-lookup"><span data-stu-id="ed75b-403">**Stop at**</span></span>  
 <span data-ttu-id="ed75b-404">Указывает дату и время, когда помощник по настройке компонента [!INCLUDE[ssDE](../../includes/ssde-md.md)] должен прекратить работу.</span><span class="sxs-lookup"><span data-stu-id="ed75b-404">Provide the date and time when [!INCLUDE[ssDE](../../includes/ssde-md.md)] Tuning Advisor should stop.</span></span>  
  
 <span data-ttu-id="ed75b-405">**Индексы и индексированные представления**</span><span class="sxs-lookup"><span data-stu-id="ed75b-405">**Indexes and indexed views**</span></span>  
 <span data-ttu-id="ed75b-406">Убедитесь в том, что это поле содержит рекомендации по добавлению кластеризованных и некластеризованных индексов, а также индексированных представлений.</span><span class="sxs-lookup"><span data-stu-id="ed75b-406">Check this box to include recommendations for adding clustered indexes, nonclustered indexes, and indexed views.</span></span>  
  
 <span data-ttu-id="ed75b-407">**Индексированные представления**</span><span class="sxs-lookup"><span data-stu-id="ed75b-407">**Indexed views**</span></span>  
 <span data-ttu-id="ed75b-408">Включаются только рекомендации по добавлению индексированных представлений.</span><span class="sxs-lookup"><span data-stu-id="ed75b-408">Only include recommendations for adding indexed views.</span></span> <span data-ttu-id="ed75b-409">Рекомендаций по кластеризованным и некластеризованным индексам не будет.</span><span class="sxs-lookup"><span data-stu-id="ed75b-409">Clustered and nonclustered indexes will not be recommended.</span></span>  
  
 <span data-ttu-id="ed75b-410">**Включить отфильтрованные индексы**</span><span class="sxs-lookup"><span data-stu-id="ed75b-410">**Include filtered indexes**</span></span>  
 <span data-ttu-id="ed75b-411">Включает рекомендации по добавлению отфильтрованных индексов.</span><span class="sxs-lookup"><span data-stu-id="ed75b-411">Include recommendations for adding filtered indexes.</span></span> <span data-ttu-id="ed75b-412">Этот параметр доступен при выборе одной из следующих физических структур: **Индексы и индексированные представления**, **Индексы** или **Некластеризованные индексы**.</span><span class="sxs-lookup"><span data-stu-id="ed75b-412">This option is available if you select one of these physical design structures: **Indexes and indexed views**, **Indexes**, or **Nonclustered indexes**.</span></span>  
  
 <span data-ttu-id="ed75b-413">**Индексы**</span><span class="sxs-lookup"><span data-stu-id="ed75b-413">**Indexes**</span></span>  
 <span data-ttu-id="ed75b-414">Включаются только рекомендации по добавлению кластеризованных и некластеризованных индексов.</span><span class="sxs-lookup"><span data-stu-id="ed75b-414">Only include recommendations for adding clustered and nonclustered indexes.</span></span> <span data-ttu-id="ed75b-415">Без рекомендаций по индексированным представлениям.</span><span class="sxs-lookup"><span data-stu-id="ed75b-415">Indexed views will not be recommended.</span></span>  
  
 <span data-ttu-id="ed75b-416">**Некластеризованные индексы**</span><span class="sxs-lookup"><span data-stu-id="ed75b-416">**Nonclustered indexes**</span></span>  
 <span data-ttu-id="ed75b-417">Включаются рекомендации только по некластеризованным индексам.</span><span class="sxs-lookup"><span data-stu-id="ed75b-417">Include recommendations for only nonclustered indexes.</span></span> <span data-ttu-id="ed75b-418">Без рекомендаций по кластеризованным индексам и индексированным представлениям.</span><span class="sxs-lookup"><span data-stu-id="ed75b-418">Clustered indexes and indexed views will not be recommended.</span></span>  
  
 <span data-ttu-id="ed75b-419">**Оценивать использование только существующих структур PDS**</span><span class="sxs-lookup"><span data-stu-id="ed75b-419">**Evaluate utilization of existing PDS only**</span></span>  
 <span data-ttu-id="ed75b-420">Оценка эффективности текущих индексов без рекомендаций по дополнительным индексам или индексированным представлениям.</span><span class="sxs-lookup"><span data-stu-id="ed75b-420">Evaluate the effectiveness of the current indexes but do not recommend additional indexes or indexed views.</span></span>  
  
 <span data-ttu-id="ed75b-421">**Без секционирования**</span><span class="sxs-lookup"><span data-stu-id="ed75b-421">**No partitioning**</span></span>  
 <span data-ttu-id="ed75b-422">Не формировать рекомендации по секционированию.</span><span class="sxs-lookup"><span data-stu-id="ed75b-422">Do not recommend partitioning.</span></span>  
  
 <span data-ttu-id="ed75b-423">**Полное секционирование**</span><span class="sxs-lookup"><span data-stu-id="ed75b-423">**Full partitioning**</span></span>  
 <span data-ttu-id="ed75b-424">Включить рекомендации по секционированию.</span><span class="sxs-lookup"><span data-stu-id="ed75b-424">Include recommendations for partitioning.</span></span>  
  
 <span data-ttu-id="ed75b-425">**Секционирование с выравниванием**</span><span class="sxs-lookup"><span data-stu-id="ed75b-425">**Aligned partitioning**</span></span>  
 <span data-ttu-id="ed75b-426">Для облегчения обслуживания секции, создаваемые в соответствии с новыми рекомендациями, будут выровнены.</span><span class="sxs-lookup"><span data-stu-id="ed75b-426">New recommended partitions will be aligned to make partitions easy to maintain.</span></span>  
  
 <span data-ttu-id="ed75b-427">**Не сохранять существующие PDS**</span><span class="sxs-lookup"><span data-stu-id="ed75b-427">**Do not keep any existing PDS**</span></span>  
 <span data-ttu-id="ed75b-428">Рекомендуется удаление ненужных существующих индексов, представлений и секций.</span><span class="sxs-lookup"><span data-stu-id="ed75b-428">Recommend dropping unnecessary existing indexes, views, and partitioning.</span></span> <span data-ttu-id="ed75b-429">Если существующая структура физического проектирования (PDS) полезна для рабочей нагрузки, помощник по настройке компонента [!INCLUDE[ssDE](../../includes/ssde-md.md)] не рекомендует ее удалять.</span><span class="sxs-lookup"><span data-stu-id="ed75b-429">If an existing physical design structure (PDS) is useful to the workload, [!INCLUDE[ssDE](../../includes/ssde-md.md)] Tuning Advisor does not recommend dropping it.</span></span>  
  
 <span data-ttu-id="ed75b-430">**Сохранять только индексы**</span><span class="sxs-lookup"><span data-stu-id="ed75b-430">**Keep indexes only**</span></span>  
 <span data-ttu-id="ed75b-431">Сохраняются все существующие индексы, но рекомендуется удаление ненужных индексированных представлений и секционирования.</span><span class="sxs-lookup"><span data-stu-id="ed75b-431">Keep all existing indexes but recommend dropping unnecessary indexed views, and partitioning.</span></span>  
  
 <span data-ttu-id="ed75b-432">**Сохранять все существующие PDS**</span><span class="sxs-lookup"><span data-stu-id="ed75b-432">**Keep all existing PDS**</span></span>  
 <span data-ttu-id="ed75b-433">Сохраняются все существующие индексы, индексированные представления и секции.</span><span class="sxs-lookup"><span data-stu-id="ed75b-433">Keep all existing indexes, indexed views, and partitioning.</span></span>  
  
 <span data-ttu-id="ed75b-434">**Сохранять только кластеризованные индексы**</span><span class="sxs-lookup"><span data-stu-id="ed75b-434">**Keep clustered indexes only**</span></span>  
 <span data-ttu-id="ed75b-435">Сохраняются все существующие кластеризованные индексы, но рекомендуется удаление ненужных индексированных представлений, секций и некластеризованных индексов.</span><span class="sxs-lookup"><span data-stu-id="ed75b-435">Keep all existing clustered indexes but recommend dropping unnecessary indexed views, partitions, and nonclustered indexes.</span></span>  
  
 <span data-ttu-id="ed75b-436">**Сохранять секционирование с выравниванием**</span><span class="sxs-lookup"><span data-stu-id="ed75b-436">**Keep aligned partitioning**</span></span>  
 <span data-ttu-id="ed75b-437">Сохраняются выровненные в настоящее время структуры секционирования, но рекомендуется удаление ненужных индексированных представлений, индексов и невыровненных секций.</span><span class="sxs-lookup"><span data-stu-id="ed75b-437">Keep partitioning structures that are currently aligned, but recommend dropping unnecessary indexed views, indexes, and non-aligned partitioning.</span></span> <span data-ttu-id="ed75b-438">Все дополнительные рекомендованные структуры будут выровнены по секциям в соответствии с текущей схемой секционирования.</span><span class="sxs-lookup"><span data-stu-id="ed75b-438">Any additional partitioning recommended will align with the current partitioning scheme.</span></span>  
  
###### <a name="progress-tab-options"></a><span data-ttu-id="ed75b-439">Параметры на вкладке «Выполнение»</span><span class="sxs-lookup"><span data-stu-id="ed75b-439">Progress Tab Options</span></span>  
 <span data-ttu-id="ed75b-440">Вкладка **Выполнение** помощника по настройке ядра СУБД появляется после того, как он начинает анализ рабочей нагрузки.</span><span class="sxs-lookup"><span data-stu-id="ed75b-440">The **Progress** tab of Database Engine Tuning Advisor appears after Database Engine Tuning Advisor begins analyzing a workload.</span></span>  
  
 <span data-ttu-id="ed75b-441">Если нужно остановить сеанс настройки после его начала, в меню **Действия** выберите один из следующих вариантов.</span><span class="sxs-lookup"><span data-stu-id="ed75b-441">If you want to stop the tuning session after it has started, choose one of the following options on the **Actions** menu:</span></span>  
  
-   <span data-ttu-id="ed75b-442">**Остановить анализ (с рекомендациями)** прерывает сеанс настройки и выводит приглашение для выбора, должен ли помощник по настройке ядра СУБД сформировать рекомендации на основе анализа, проведенного до этого момента.</span><span class="sxs-lookup"><span data-stu-id="ed75b-442">**Stop Analysis (With Recommendations)** stops the tuning session and prompts you to decide whether you want Database Engine Tuning Advisor to generate recommendations based on the analysis done up to this point.</span></span>  
  
-   <span data-ttu-id="ed75b-443">Пункт**Остановить анализ** прерывает сеанс настройки без формирования рекомендаций.</span><span class="sxs-lookup"><span data-stu-id="ed75b-443">**Stop Analysis** stops the tuning session without generating any recommendations.</span></span>  
  
 <span data-ttu-id="ed75b-444">**Ход настройки**</span><span class="sxs-lookup"><span data-stu-id="ed75b-444">**Tuning Progress**</span></span>  
 <span data-ttu-id="ed75b-445">Отображает текущее состояние процесса настройки.</span><span class="sxs-lookup"><span data-stu-id="ed75b-445">Indicates the current status of the progress.</span></span> <span data-ttu-id="ed75b-446">Содержит количество выполненных действий, ошибок, полученных сообщений об успешном выполнении и сообщений с предупреждениями.</span><span class="sxs-lookup"><span data-stu-id="ed75b-446">Contains the number of actions performed, and the number of error, success, and warning messages received.</span></span>  
  
 <span data-ttu-id="ed75b-447">**Сведения**</span><span class="sxs-lookup"><span data-stu-id="ed75b-447">**Details**</span></span>  
 <span data-ttu-id="ed75b-448">Содержит значок, обозначающий состояние.</span><span class="sxs-lookup"><span data-stu-id="ed75b-448">Contains an icon indicating status.</span></span>  
  
 <span data-ttu-id="ed75b-449">**Действие**</span><span class="sxs-lookup"><span data-stu-id="ed75b-449">**Action**</span></span>  
 <span data-ttu-id="ed75b-450">Отображает выполняемые этапы.</span><span class="sxs-lookup"><span data-stu-id="ed75b-450">Displays the steps being performed.</span></span>  
  
 <span data-ttu-id="ed75b-451">**Состояние**</span><span class="sxs-lookup"><span data-stu-id="ed75b-451">**Status**</span></span>  
 <span data-ttu-id="ed75b-452">Отображает состояние этапа действия.</span><span class="sxs-lookup"><span data-stu-id="ed75b-452">Displays the status of the action step.</span></span>  
  
 <span data-ttu-id="ed75b-453">**Сообщение**</span><span class="sxs-lookup"><span data-stu-id="ed75b-453">**Message**</span></span>  
 <span data-ttu-id="ed75b-454">Содержит сообщения, возвращенные этапами действия.</span><span class="sxs-lookup"><span data-stu-id="ed75b-454">Contains any messages returned by the action steps.</span></span>  
  
 <span data-ttu-id="ed75b-455">**Журнал настройки**</span><span class="sxs-lookup"><span data-stu-id="ed75b-455">**Tuning Log**</span></span>  
 <span data-ttu-id="ed75b-456">Содержит сведения, касающиеся этого сеанса настройки.</span><span class="sxs-lookup"><span data-stu-id="ed75b-456">Contains information regarding this tuning session.</span></span> <span data-ttu-id="ed75b-457">Для распечатки этого журнала щелкните его правой кнопкой мыши и выберите пункт **Печать**.</span><span class="sxs-lookup"><span data-stu-id="ed75b-457">To print this log, right-click the log, and then click **Print**.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="ed75b-458">См. также:</span><span class="sxs-lookup"><span data-stu-id="ed75b-458">See Also</span></span>  
 <span data-ttu-id="ed75b-459">[Просмотр и работа с выходными данными помощника по настройке ядра СУБД](database-engine-tuning-advisor.md) </span><span class="sxs-lookup"><span data-stu-id="ed75b-459">[View and Work with the Output from the Database Engine Tuning Advisor](database-engine-tuning-advisor.md) </span></span>  
 [<span data-ttu-id="ed75b-460">dta Utility</span><span class="sxs-lookup"><span data-stu-id="ed75b-460">dta Utility</span></span>](../../tools/dta/dta-utility.md)  
  
  
