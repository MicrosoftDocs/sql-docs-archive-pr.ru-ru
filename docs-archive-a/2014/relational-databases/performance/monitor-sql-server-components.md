---
title: Наблюдение за компонентами SQL Server | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: performance
ms.topic: conceptual
ms.assetid: e8f1b16b-ea40-4e12-886c-967ebda4e6e4
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: baefe9aa1848bc3347a9a5a87c2ab81c382a6717
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87657733"
---
# <a name="monitor-sql-server-components"></a><span data-ttu-id="147ff-102">Наблюдение за компонентами SQL Server</span><span class="sxs-lookup"><span data-stu-id="147ff-102">Monitor SQL Server Components</span></span>
  <span data-ttu-id="147ff-103">Важность мониторинга обусловлена динамикой среды, в которой выполняется [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="147ff-103">Monitoring is important because [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] provides a service in a dynamic environment.</span></span> <span data-ttu-id="147ff-104">Данные приложений постоянно изменяются.</span><span class="sxs-lookup"><span data-stu-id="147ff-104">The data in the application changes.</span></span> <span data-ttu-id="147ff-105">Меняется тип доступа, который требуется пользователям.</span><span class="sxs-lookup"><span data-stu-id="147ff-105">The type of access that users require changes.</span></span> <span data-ttu-id="147ff-106">Меняется способ подключения пользователей.</span><span class="sxs-lookup"><span data-stu-id="147ff-106">The way that users connect changes.</span></span> <span data-ttu-id="147ff-107">Может измениться даже тип приложений, обращающихся к [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , однако [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] автоматически управляет такими системными ресурсами, как память и место на диске, поэтому ручная настройка системы практически не требуется.</span><span class="sxs-lookup"><span data-stu-id="147ff-107">The types of applications accessing [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] may even change, but [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] automatically manages system-level resources, such as memory and disk space, to minimize the need for extensive system-level manual tuning.</span></span> <span data-ttu-id="147ff-108">Мониторинг позволяет администраторам следить за тенденциями изменения производительности и определять ситуации, когда требуются изменения.</span><span class="sxs-lookup"><span data-stu-id="147ff-108">Monitoring lets administrators identify performance trends to determine if changes are necessary.</span></span>  
  
 <span data-ttu-id="147ff-109">Для организации эффективного мониторинга компонентов [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="147ff-109">To monitor any component of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] effectively:</span></span>  
  
1.  <span data-ttu-id="147ff-110">Определите цели мониторинга.</span><span class="sxs-lookup"><span data-stu-id="147ff-110">Determine your monitoring goals.</span></span>  
  
2.  <span data-ttu-id="147ff-111">Выберите подходящее средство.</span><span class="sxs-lookup"><span data-stu-id="147ff-111">Select the appropriate tool.</span></span>  
  
3.  <span data-ttu-id="147ff-112">Определите компоненты, подлежащие мониторингу.</span><span class="sxs-lookup"><span data-stu-id="147ff-112">Identify components to monitor.</span></span>  
  
4.  <span data-ttu-id="147ff-113">Выберите метрики для этих компонентов.</span><span class="sxs-lookup"><span data-stu-id="147ff-113">Select metrics for those components.</span></span>  
  
5.  <span data-ttu-id="147ff-114">Произведите мониторинг работы сервера.</span><span class="sxs-lookup"><span data-stu-id="147ff-114">Monitor the server.</span></span>  
  
6.  <span data-ttu-id="147ff-115">Проанализируйте данные.</span><span class="sxs-lookup"><span data-stu-id="147ff-115">Analyze the data.</span></span>  
  
 <span data-ttu-id="147ff-116">Ниже подробно описан каждый шаг.</span><span class="sxs-lookup"><span data-stu-id="147ff-116">These steps are discussed in turn below.</span></span>  
  
## <a name="determine-your-monitoring-goals"></a><span data-ttu-id="147ff-117">Определение целей мониторинга</span><span class="sxs-lookup"><span data-stu-id="147ff-117">Determine Your Monitoring Goals</span></span>  
 <span data-ttu-id="147ff-118">Чтобы обеспечить эффективность мониторинга [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , необходимо четко определить, для чего он нужен.</span><span class="sxs-lookup"><span data-stu-id="147ff-118">To monitor [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] effectively you should clearly identify your reason for monitoring.</span></span> <span data-ttu-id="147ff-119">Мониторинг может осуществляться в следующих целях.</span><span class="sxs-lookup"><span data-stu-id="147ff-119">Reasons can include the following:</span></span>  
  
-   <span data-ttu-id="147ff-120">Формирование основных критериев оценки производительности.</span><span class="sxs-lookup"><span data-stu-id="147ff-120">Establish a baseline for performance.</span></span>  
  
-   <span data-ttu-id="147ff-121">Определение изменений производительности во времени.</span><span class="sxs-lookup"><span data-stu-id="147ff-121">Identify performance changes over time.</span></span>  
  
-   <span data-ttu-id="147ff-122">Диагностика проблем, связанных с производительностью.</span><span class="sxs-lookup"><span data-stu-id="147ff-122">Diagnose specific performance problems.</span></span>  
  
-   <span data-ttu-id="147ff-123">Определение компонентов и процессов, требующих оптимизации.</span><span class="sxs-lookup"><span data-stu-id="147ff-123">Identify components or processes to optimize.</span></span>  
  
-   <span data-ttu-id="147ff-124">Сравнение влияния различных клиентских приложений на производительность.</span><span class="sxs-lookup"><span data-stu-id="147ff-124">Compare the effect of different client applications on performance.</span></span>  
  
-   <span data-ttu-id="147ff-125">Аудит активности пользователей.</span><span class="sxs-lookup"><span data-stu-id="147ff-125">Audit user activity.</span></span>  
  
-   <span data-ttu-id="147ff-126">Проверка работы сервера под воздействием различных нагрузок.</span><span class="sxs-lookup"><span data-stu-id="147ff-126">Test a server under different loads.</span></span>  
  
-   <span data-ttu-id="147ff-127">Проверка архитектуры базы данных.</span><span class="sxs-lookup"><span data-stu-id="147ff-127">Test database architecture.</span></span>  
  
-   <span data-ttu-id="147ff-128">Проверка расписания обслуживания.</span><span class="sxs-lookup"><span data-stu-id="147ff-128">Test maintenance schedules.</span></span>  
  
-   <span data-ttu-id="147ff-129">Проверка планов резервного копирования и восстановления.</span><span class="sxs-lookup"><span data-stu-id="147ff-129">Test backup and restore plans.</span></span>  
  
-   <span data-ttu-id="147ff-130">Определение необходимости изменения конфигурации оборудования.</span><span class="sxs-lookup"><span data-stu-id="147ff-130">Determining when to modify your hardware configuration.</span></span>  
  
## <a name="select-the-appropriate-tool"></a><span data-ttu-id="147ff-131">Выбор подходящего средства</span><span class="sxs-lookup"><span data-stu-id="147ff-131">Select the Appropriate Tool</span></span>  
 <span data-ttu-id="147ff-132">Определив цели мониторинга, следует выбрать соответствующие средства для этого типа мониторинга:</span><span class="sxs-lookup"><span data-stu-id="147ff-132">After determining why you are monitoring, you should select the appropriate tools for that type of monitoring.</span></span> <span data-ttu-id="147ff-133">В состав [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] и операционной системы Windows входит полный набор средств мониторинга серверов в средах с большим количеством транзакций.</span><span class="sxs-lookup"><span data-stu-id="147ff-133">The Windows operating system and [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] provide a complete set of tools to monitor servers in transaction-intensive environments.</span></span> <span data-ttu-id="147ff-134">Эти средства подробно описывают состояние экземпляра компонента SQL Server Database Engine или экземпляра служб SQL Server Analysis Services.</span><span class="sxs-lookup"><span data-stu-id="147ff-134">These tools clearly reveal the condition of an instance of the SQL Server Database Engine or an instance of SQL Server Analysis Services.</span></span>  
  
 <span data-ttu-id="147ff-135">Windows предоставляет следующие средства мониторинга приложений, запущенных на сервере.</span><span class="sxs-lookup"><span data-stu-id="147ff-135">Windows provides the following tools for monitoring applications that are running on a server:</span></span>  
  
-   <span data-ttu-id="147ff-136">Системный монитор, который позволяет собирать и просматривать данные об использовании памяти, диска и процессора в реальном времени</span><span class="sxs-lookup"><span data-stu-id="147ff-136">System Monitor, which lets you collect and view real-time data about activities such as memory, disk, and processor usage</span></span>  
  
-   <span data-ttu-id="147ff-137">Журналы и предупреждения производительности</span><span class="sxs-lookup"><span data-stu-id="147ff-137">Performance logs and alerts</span></span>  
  
-   <span data-ttu-id="147ff-138">Диспетчер задач</span><span class="sxs-lookup"><span data-stu-id="147ff-138">Task Manager</span></span>  
  
 <span data-ttu-id="147ff-139">Дополнительные сведения о средствах Windows Server и Windows см. в документации по операционной системе Windows.</span><span class="sxs-lookup"><span data-stu-id="147ff-139">For more information about Windows Server or Windows tools, see the Windows documentation.</span></span>  
  
 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="147ff-140">предоставляет следующие средства мониторинга компонентов [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]:</span><span class="sxs-lookup"><span data-stu-id="147ff-140">provides the following tools for monitoring components of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]:</span></span>  
  
-   <span data-ttu-id="147ff-141">Трассировка SQL</span><span class="sxs-lookup"><span data-stu-id="147ff-141">SQL Trace</span></span>  
  
-   [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)]  
  
-   <span data-ttu-id="147ff-142">Программа распределенного воспроизведения</span><span class="sxs-lookup"><span data-stu-id="147ff-142">Distributed Replay Utility</span></span>  
  
-   [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] <span data-ttu-id="147ff-143">Монитор активности</span><span class="sxs-lookup"><span data-stu-id="147ff-143">Activity Monitor</span></span>  
  
-   [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] <span data-ttu-id="147ff-144">Графическое отображение инструкции Showplan</span><span class="sxs-lookup"><span data-stu-id="147ff-144">Graphical Showplan</span></span>  
  
-   <span data-ttu-id="147ff-145">Хранимые процедуры</span><span class="sxs-lookup"><span data-stu-id="147ff-145">Stored procedures</span></span>  
  
-   <span data-ttu-id="147ff-146">Консольные команды базы данных (DBCC)</span><span class="sxs-lookup"><span data-stu-id="147ff-146">Database Console Commands (DBCC)</span></span>  
  
-   <span data-ttu-id="147ff-147">Встроенные функции</span><span class="sxs-lookup"><span data-stu-id="147ff-147">Built-in functions</span></span>  
  
-   <span data-ttu-id="147ff-148">Флаги трассировки</span><span class="sxs-lookup"><span data-stu-id="147ff-148">Trace flags</span></span>  
  
 <span data-ttu-id="147ff-149">Дополнительные сведения о средствах наблюдения [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] см. в статье [Средства контроля и настройки производительности](performance-monitoring-and-tuning-tools.md).</span><span class="sxs-lookup"><span data-stu-id="147ff-149">For more information about [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] monitoring tools, see [Performance Monitoring and Tuning Tools](performance-monitoring-and-tuning-tools.md).</span></span>  
  
## <a name="identify-the-components-to-monitor"></a><span data-ttu-id="147ff-150">Определение компонентов, подлежащих мониторингу</span><span class="sxs-lookup"><span data-stu-id="147ff-150">Identify the Components to Monitor</span></span>  
 <span data-ttu-id="147ff-151">На этом шаге требуется определить компоненты [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , которые нужно контролировать.</span><span class="sxs-lookup"><span data-stu-id="147ff-151">The third step to monitoring an instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] is to identify the components that you monitor.</span></span> <span data-ttu-id="147ff-152">Например, при трассировке сервера при помощи приложения [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] можно собирать данные об определенных событиях.</span><span class="sxs-lookup"><span data-stu-id="147ff-152">For example, if you are using [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] to trace a server you can define the trace to collect data about specific events.</span></span> <span data-ttu-id="147ff-153">Кроме того, можно исключить из трассировки события, ненужные в данной конкретной ситуации.</span><span class="sxs-lookup"><span data-stu-id="147ff-153">You can also exclude events that do not apply to your situation.</span></span>  
  
## <a name="select-metrics-for-monitored-components"></a><span data-ttu-id="147ff-154">Выбор метрик для наблюдаемых компонентов</span><span class="sxs-lookup"><span data-stu-id="147ff-154">Select Metrics for Monitored Components</span></span>  
 <span data-ttu-id="147ff-155">Определив компоненты, подлежащие мониторингу, укажите метрики.</span><span class="sxs-lookup"><span data-stu-id="147ff-155">After identifying the components to monitor, determine the metrics for components you monitor.</span></span> <span data-ttu-id="147ff-156">Например, выбрав события для включения в трассировку, можно указать, какие именно данные требуются для анализа.</span><span class="sxs-lookup"><span data-stu-id="147ff-156">For example, after selecting the events to include in a trace, you can choose to include only specific data about the events.</span></span> <span data-ttu-id="147ff-157">Ограничив круг отслеживаемых данных можно сэкономить ресурсы системы, которые требуются для выполнения трассировки.</span><span class="sxs-lookup"><span data-stu-id="147ff-157">Limiting the trace to data that is relevant to the trace minimizes the system resources required to perform the tracing.</span></span>  
  
## <a name="monitor-the-server"></a><span data-ttu-id="147ff-158">Мониторинг работы сервера</span><span class="sxs-lookup"><span data-stu-id="147ff-158">Monitor the Server</span></span>  
 <span data-ttu-id="147ff-159">Для наблюдения за сервером запустите средство мониторинга, настроенное для сбора данных.</span><span class="sxs-lookup"><span data-stu-id="147ff-159">To monitor the server, run the monitoring tool that you have configured to gather data.</span></span> <span data-ttu-id="147ff-160">Например, определив трассировку, запустите ее, чтобы собрать данные о событиях, происходящих на сервере.</span><span class="sxs-lookup"><span data-stu-id="147ff-160">For example, after a trace is defined, you can run the trace to gather data about events raised in the server.</span></span>  
  
## <a name="analyze-the-data"></a><span data-ttu-id="147ff-161">Анализ данных</span><span class="sxs-lookup"><span data-stu-id="147ff-161">Analyze the Data</span></span>  
 <span data-ttu-id="147ff-162">После окончания трассировки проанализируйте данные и попытайтесь понять, достигнута ли цель мониторинга.</span><span class="sxs-lookup"><span data-stu-id="147ff-162">After the trace has finished, analyze the data to see if you have achieved your monitoring goal.</span></span> <span data-ttu-id="147ff-163">Если нет, измените компоненты или метрики, которые используются для мониторинга сервера.</span><span class="sxs-lookup"><span data-stu-id="147ff-163">If you have not, modify the components or metrics that you used to monitor the server.</span></span>  
  
 <span data-ttu-id="147ff-164">Ниже описан процесс сбора данных о событиях и работа с ними.</span><span class="sxs-lookup"><span data-stu-id="147ff-164">The following outlines the process for capturing event data and putting it to use.</span></span>  
  
1.  <span data-ttu-id="147ff-165">Примените фильтры, чтобы ограничить объем собираемых данных о событиях.</span><span class="sxs-lookup"><span data-stu-id="147ff-165">Apply filters to limit the event data collected.</span></span>  
  
     <span data-ttu-id="147ff-166">Фильтры позволяют системе собирать данные только о тех событиях, которые имеют отношение к поставленной задаче мониторинга.</span><span class="sxs-lookup"><span data-stu-id="147ff-166">Limiting the event data allows for the system to focus on the events pertinent to the monitoring scenario.</span></span> <span data-ttu-id="147ff-167">Например, если требуется проконтролировать медленные запросы, с помощью фильтра можно собрать данные только о тех запросах к конкретной базе данных, которые выполняются более 30 секунд.</span><span class="sxs-lookup"><span data-stu-id="147ff-167">For example, if you want to monitor slow queries, you can use a filter to monitor only those queries issued by the application that take more than 30 seconds to run against a particular database.</span></span> <span data-ttu-id="147ff-168">Дополнительные сведения см. в статьях [Создание фильтра трассировки (Transact-SQL)](../../ssms/agent/set-sql-server-alias-for-sql-server-agent-service-ssms.md) и [Фильтровать события в трассировке (приложение SQL Server Profiler)](../../tools/sql-server-profiler/filter-events-in-a-trace-sql-server-profiler.md).</span><span class="sxs-lookup"><span data-stu-id="147ff-168">For more information, see [Set a Trace Filter &#40;Transact-SQL&#41;](../../ssms/agent/set-sql-server-alias-for-sql-server-agent-service-ssms.md) and [Filter Events in a Trace &#40;SQL Server Profiler&#41;](../../tools/sql-server-profiler/filter-events-in-a-trace-sql-server-profiler.md).</span></span>  
  
2.  <span data-ttu-id="147ff-169">Соберите данные о событиях.</span><span class="sxs-lookup"><span data-stu-id="147ff-169">Monitor (capture) events.</span></span>  
  
     <span data-ttu-id="147ff-170">После включения мониторинга собираются данные указанного приложения, экземпляра [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]или операционной системы.</span><span class="sxs-lookup"><span data-stu-id="147ff-170">As soon as it is enabled, active monitoring captures data from the specified application, instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], or operating system.</span></span> <span data-ttu-id="147ff-171">Например, при мониторинге активности диска с помощью системного монитора собираются и отображаются на экране данные о событиях чтения и записи.</span><span class="sxs-lookup"><span data-stu-id="147ff-171">For example, when disk activity is monitored using System Monitor, monitoring captures event data, such as disk reads and writes, and displays it on the screen.</span></span> <span data-ttu-id="147ff-172">Дополнительные сведения см. в статье [Наблюдение за использованием ресурсов (системный монитор)](../performance-monitor/monitor-resource-usage-system-monitor.md).</span><span class="sxs-lookup"><span data-stu-id="147ff-172">For more information, see [Monitor Resource Usage &#40;System Monitor&#41;](../performance-monitor/monitor-resource-usage-system-monitor.md).</span></span>  
  
3.  <span data-ttu-id="147ff-173">Сохраните собранные данные о событиях.</span><span class="sxs-lookup"><span data-stu-id="147ff-173">Save captured event data.</span></span>  
  
     <span data-ttu-id="147ff-174">Сохранение данных собираемых событий позволяет позже проанализировать их и даже воспроизвести в программе распределенного воспроизведения или в приложении [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)].</span><span class="sxs-lookup"><span data-stu-id="147ff-174">Saving captured event data lets you analyze it later or even replay it using the Distributed Replay Utility or [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)].</span></span> <span data-ttu-id="147ff-175">Данные сохраняются в файле, который впоследствии можно загрузить обратно в средство, изначально создавшее этот файл для целей анализа.</span><span class="sxs-lookup"><span data-stu-id="147ff-175">Captured event data is saved to a file that can be loaded back into the tool that originally created it for analysis.</span></span> [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] <span data-ttu-id="147ff-176">позволяет сохранить данные о событиях в таблице [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="147ff-176">permits event data to be saved to a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] table.</span></span> <span data-ttu-id="147ff-177">Возможность сохранения играет важную роль при определении базового уровня производительности.</span><span class="sxs-lookup"><span data-stu-id="147ff-177">Saving captured event data is important when you are creating a performance baseline.</span></span> <span data-ttu-id="147ff-178">Данные базового уровня производительности сохраняются и используются для сравнения с данными новых событий, что позволяет определить, является ли производительность оптимальной.</span><span class="sxs-lookup"><span data-stu-id="147ff-178">The performance baseline data is saved and used, when comparing recently captured event data, to determine whether performance is optimal.</span></span> <span data-ttu-id="147ff-179">Дополнительные сведения см. в статье [Шаблоны и разрешения приложения SQL Server Profiler](../../tools/sql-server-profiler/sql-server-profiler-templates-and-permissions.md).</span><span class="sxs-lookup"><span data-stu-id="147ff-179">For more information, see [SQL Server Profiler Templates and Permissions](../../tools/sql-server-profiler/sql-server-profiler-templates-and-permissions.md).</span></span>  
  
4.  <span data-ttu-id="147ff-180">Создайте шаблоны трассировки, содержащие параметры сбора событий.</span><span class="sxs-lookup"><span data-stu-id="147ff-180">Create trace templates that contain the settings specified to capture the events.</span></span>  
  
     <span data-ttu-id="147ff-181">Шаблоны трассировки включают определения самих событий, данных о событиях и фильтрах, которые применяются для сбора данных.</span><span class="sxs-lookup"><span data-stu-id="147ff-181">Trace templates include specifications about the events themselves, event data, and filters that are used to capture data.</span></span> <span data-ttu-id="147ff-182">Эти шаблоны применяются для мониторинга определенного набора событий в будущем и не требуют переопределения событий, данных и фильтров.</span><span class="sxs-lookup"><span data-stu-id="147ff-182">These templates can be used to monitor a specific set of events later without redefining the events, event data, and filters.</span></span> <span data-ttu-id="147ff-183">Например, если часто приходится наблюдать за количеством взаимоблокировок и за тем, какие пользователи затронуты этими взаимоблокировками, можно создать шаблон, определив нужные события, данные событий и фильтры, и сохранить его в отдельном файле; впоследствии этот фильтр можно использовать для наблюдения за взаимоблокировками.</span><span class="sxs-lookup"><span data-stu-id="147ff-183">For example, if you want to frequently monitor the number of deadlocks, and the users involved in those deadlocks, you can create a template defining those events, event data, and event filters; save the template; and reapply the filter the next time that you want to monitor deadlocks.</span></span> [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] <span data-ttu-id="147ff-184">для этой цели используются шаблоны трассировки.</span><span class="sxs-lookup"><span data-stu-id="147ff-184">uses trace templates for this purpose.</span></span> <span data-ttu-id="147ff-185">Дополнительные сведения см. в статьях [Установка определения трассировки по умолчанию (приложение SQL Server Profiler)](../../tools/sql-server-profiler/set-trace-definition-defaults-sql-server-profiler.md) и [Создание шаблона трассировки (приложение SQL Server Profiler)](../../tools/sql-server-profiler/create-a-trace-template-sql-server-profiler.md).</span><span class="sxs-lookup"><span data-stu-id="147ff-185">For more information, see [Set Trace Definition Defaults &#40;SQL Server Profiler&#41;](../../tools/sql-server-profiler/set-trace-definition-defaults-sql-server-profiler.md) and [Create a Trace Template &#40;SQL Server Profiler&#41;](../../tools/sql-server-profiler/create-a-trace-template-sql-server-profiler.md).</span></span>  
  
5.  <span data-ttu-id="147ff-186">Проанализируйте собранные данные о событиях.</span><span class="sxs-lookup"><span data-stu-id="147ff-186">Analyze captured event data.</span></span>  
  
     <span data-ttu-id="147ff-187">Для анализа сохраненные данные загружаются в приложение, с помощью которого они были собраны.</span><span class="sxs-lookup"><span data-stu-id="147ff-187">To be analyzed, the captured event data is loaded into the application that captured the data.</span></span> <span data-ttu-id="147ff-188">Например, трассировку, собранную приложением [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] , можно повторно загрузить в [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] для просмотра и анализа.</span><span class="sxs-lookup"><span data-stu-id="147ff-188">For example, a captured trace from [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] can be reloaded into [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] for viewing and analysis.</span></span> <span data-ttu-id="147ff-189">Дополнительные сведения см. в статье [Просмотр и анализ трассировок с помощью приложения SQL Server Profiler](../../tools/sql-server-profiler/view-and-analyze-traces-with-sql-server-profiler.md).</span><span class="sxs-lookup"><span data-stu-id="147ff-189">For more information, see [View and Analyze Traces with SQL Server Profiler](../../tools/sql-server-profiler/view-and-analyze-traces-with-sql-server-profiler.md).</span></span>  
  
     <span data-ttu-id="147ff-190">Анализ данных подразумевает определение того, что происходит и почему.</span><span class="sxs-lookup"><span data-stu-id="147ff-190">Analyzing event data involves determining what is occurring and why.</span></span> <span data-ttu-id="147ff-191">В зависимости от типа анализа эти сведения позволяют совершить действия, которые могут увеличить производительность, например добавить память, изменить индексы, исправить проблемы в коде инструкций Transact-SQL и хранимых процедур и т. п.</span><span class="sxs-lookup"><span data-stu-id="147ff-191">This information lets you make changes that can improve performance, such as adding more memory, changing indexes, correcting coding problems with Transact-SQL statements or stored procedures, and so on, depending on the type of analysis performed.</span></span> <span data-ttu-id="147ff-192">Например, используя помощник по настройке компонента [!INCLUDE[ssDE](../../includes/ssde-md.md)] , можно проанализировать трассировку, записанную приложением [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] , и получить рекомендации по построению индексов.</span><span class="sxs-lookup"><span data-stu-id="147ff-192">For example, you can use the [!INCLUDE[ssDE](../../includes/ssde-md.md)] Tuning Advisor to analyze a captured trace from [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] and make index recommendations based on the results.</span></span>  
  
6.  <span data-ttu-id="147ff-193">Воспроизведите собранные данные о событиях.</span><span class="sxs-lookup"><span data-stu-id="147ff-193">Replay captured event data.</span></span>  
  
     <span data-ttu-id="147ff-194">Возможность воспроизведения позволяет создать копию базы данных, в которой были собраны данные, и повторить события, как будто они произошли в реальной системе.</span><span class="sxs-lookup"><span data-stu-id="147ff-194">Event replay lets you establish a test copy of the database environment from which the data was captured, and then repeat the captured events as they occurred originally on the real system.</span></span> <span data-ttu-id="147ff-195">Это возможно только в программе распределенного воспроизведения или в приложении [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)].</span><span class="sxs-lookup"><span data-stu-id="147ff-195">This capability is only available with the Distributed Replay Utility or [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)].</span></span> <span data-ttu-id="147ff-196">События можно воспроизводить с первоначальной скоростью, с максимально возможной скоростью (чтобы загрузить систему) или пошагово (чтобы проанализировать состояние системы после каждого события).</span><span class="sxs-lookup"><span data-stu-id="147ff-196">You can replay the events at the same speed as they originally occurred, as fast as possible (to stress the system), or more likely, one step at a time (to analyze the system after each event has occurred).</span></span> <span data-ttu-id="147ff-197">Анализ событий в тестовой среде позволяет избежать повреждений в производственной системе.</span><span class="sxs-lookup"><span data-stu-id="147ff-197">By analyzing the exact events in a test environment, you can prevent harm to the production system.</span></span> <span data-ttu-id="147ff-198">Дополнительные сведения см. в статье [Воспроизведение трассировок](../../tools/sql-server-profiler/replay-traces.md).</span><span class="sxs-lookup"><span data-stu-id="147ff-198">For more information, see [Replay Traces](../../tools/sql-server-profiler/replay-traces.md).</span></span>  
  
  
