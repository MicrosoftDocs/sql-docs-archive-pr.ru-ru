---
title: Автоматическое преобразование символьных данных | Документация Майкрософт
ms.custom: ''
ms.date: 03/07/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: native-client
ms.topic: reference
helpviewer_keywords:
- result sets [ODBC], autotranslating character data
- data types [ODBC], autotranslating character data
- ACPs
- SQL Server Native Client ODBC driver, result sets
- ODBC applications, result sets
- AutoTranslate feature
- ANSI code pages
- character data autotranslation [ODBC]
- autotranslating character data
- SQL Server Native Client ODBC driver, data types
- ODBC data types, autotranslating character data
ms.assetid: 86a8adda-c5ad-477f-870f-cb370c39ee13
author: rothja
ms.author: jroth
ms.openlocfilehash: 91dd1714d553f201c1cab78bbca77d2445b42923
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87750880"
---
# <a name="autotranslation-of-character-data"></a><span data-ttu-id="2fc61-102">Автоматическое преобразование символьных данных</span><span class="sxs-lookup"><span data-stu-id="2fc61-102">Autotranslation of Character Data</span></span>
  <span data-ttu-id="2fc61-103">Символьные данные, такие как переменные символов ANSI, объявленные с SQL_C_CHAR или с данными, хранящимися в [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] с использованием типов данных **char**, **varchar**или **Text** , могут представлять только ограниченное число символов.</span><span class="sxs-lookup"><span data-stu-id="2fc61-103">Character data, such as ANSI character variables declared with SQL_C_CHAR or data stored in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] using the **char**, **varchar**, or **text** data types, can represent only a limited number of characters.</span></span> <span data-ttu-id="2fc61-104">Символьные данные, в которых для обозначения одного символа требуется один байт данных, могут представлять только 256 символов.</span><span class="sxs-lookup"><span data-stu-id="2fc61-104">Character data stored using one byte per character can only represent 256 characters.</span></span> <span data-ttu-id="2fc61-105">Для интерпретации значений, содержащихся в переменных SQL_C_CHAR, используются кодовые страницы ANSI (ACP) клиентского компьютера.</span><span class="sxs-lookup"><span data-stu-id="2fc61-105">The values stored in SQL_C_CHAR variables are interpreted using the ANSI code page (ACP) of the client computer.</span></span> <span data-ttu-id="2fc61-106">Значения, хранимые с помощью типов данных **char**, **varchar**или **Text** на сервере, оцениваются с помощью ACP сервера.</span><span class="sxs-lookup"><span data-stu-id="2fc61-106">The values stored using **char**, **varchar**, or **text** data types on the server are evaluated using the ACP of the server.</span></span>  
  
 <span data-ttu-id="2fc61-107">Если сервер и клиент имеют один и тот же ACP, у них нет проблем с интерпретацией значений, хранящихся в SQL_C_CHAR, **char**, **varchar**или **Text** Objects.</span><span class="sxs-lookup"><span data-stu-id="2fc61-107">If both the server and the client have the same ACP, then they have no problems in interpreting the values stored in SQL_C_CHAR, **char**, **varchar**, or **text** objects.</span></span> <span data-ttu-id="2fc61-108">Если сервер и клиент имеют разные ACP, то SQL_C_CHAR данные с клиента могут интерпретироваться как разные символы на сервере, если они используются в столбцах **char**, **varchar**или **Text** , переменных или параметрах.</span><span class="sxs-lookup"><span data-stu-id="2fc61-108">If the server and client have different ACPs, then SQL_C_CHAR data from the client may be interpreted as a different character on the server if it is used in **char**, **varchar**, or **text** columns, variables, or parameters.</span></span> <span data-ttu-id="2fc61-109">Например, байт символов, содержащий значение 0xA5, интерпретируется как символ??</span><span class="sxs-lookup"><span data-stu-id="2fc61-109">For example, a character byte containing the value 0xA5 is interpreted as the character ??</span></span> <span data-ttu-id="2fc61-110">на компьютере с кодовой страницей 437 и интерпретируется как знак «??» на компьютере с кодовой страницей 1252.</span><span class="sxs-lookup"><span data-stu-id="2fc61-110">on a computer using code page 437 and is interpreted as the yen sign (??) on a computer running code page 1252.</span></span>  
  
 <span data-ttu-id="2fc61-111">Символы в формате Юникода записываются с использованием двух байт данных.</span><span class="sxs-lookup"><span data-stu-id="2fc61-111">Unicode data is stored using two bytes per character.</span></span> <span data-ttu-id="2fc61-112">В стандарт Юникод включены все дополнительные символы, поэтому все символы Юникода интерпретируются всеми компьютерами одинаково.</span><span class="sxs-lookup"><span data-stu-id="2fc61-112">All extended characters are covered by the Unicode specification, so all Unicode characters are interpreted the same by all computers.</span></span>  
  
 <span data-ttu-id="2fc61-113">Функция автоматического преобразования [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] драйвера ODBC собственного клиента пытается устранить проблемы при переносе символьных данных между клиентом и сервером с разными кодовыми страницами.</span><span class="sxs-lookup"><span data-stu-id="2fc61-113">The AutoTranslate feature of the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Native Client ODBC driver attempts to minimize the problems in moving character data between a client and a server that have different code pages.</span></span> <span data-ttu-id="2fc61-114">Параметр автотрансляции может быть задан в строке подключения [SQLDriverConnect](../native-client-odbc-api/sqldriverconnect.md), в строке конфигурации [SQLConfigDataSource](../native-client-odbc-api/sqlconfigdatasource.md)или при настройке источников данных для [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] драйвера ODBC для собственного клиента с помощью администратора ODBC.</span><span class="sxs-lookup"><span data-stu-id="2fc61-114">AutoTranslate can be set in the connect string of [SQLDriverConnect](../native-client-odbc-api/sqldriverconnect.md), in the configuration string of [SQLConfigDataSource](../native-client-odbc-api/sqlconfigdatasource.md), or when configuring data sources for the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Native Client ODBC driver using ODBC Administrator.</span></span>  
  
 <span data-ttu-id="2fc61-115">Если параметру автоперевода присвоено значение "нет", преобразования данных, перемещаемых между переменными SQL_C_CHAR на клиенте **и в**столбцах **, переменных** **или** параметрах в базе данных, не выполняются [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="2fc61-115">When AutoTranslate is set to "no", no conversions are done on data moved between SQL_C_CHAR variables on the client and **char**, **varchar**, or **text** columns, variables, or parameters in a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] database.</span></span> <span data-ttu-id="2fc61-116">Эти битовые шаблоны могут по-разному интерпретироваться клиентом и сервером, если данные содержат символы национального алфавита, и два компьютера имеют различные кодовые страницы.</span><span class="sxs-lookup"><span data-stu-id="2fc61-116">The bit patterns may be interpreted differently on the client and server computers if the data contains extended characters and the two computers have different code pages.</span></span> <span data-ttu-id="2fc61-117">Данные интерпретируются единообразно, если оба компьютера используют одну и ту же кодовую страницу.</span><span class="sxs-lookup"><span data-stu-id="2fc61-117">The data will be interpreted the same if both computers have the same code page.</span></span>  
  
 <span data-ttu-id="2fc61-118">Если для параметра автоперевода задано значение "Да", [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] драйвер ODBC для собственного клиента использует Юникод для преобразования данных, перемещаемых между переменными SQL_C_CHAR на клиенте, а также столбцами **типа char**, **varchar**или **Text** в [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] базе данных.</span><span class="sxs-lookup"><span data-stu-id="2fc61-118">When AutoTranslate is set to "yes", the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Native Client ODBC driver uses Unicode to convert data moved between SQL_C_CHAR variables on the client and **char**, **varchar**, or **text** columns, variables, or parameters in a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] database:</span></span>  
  
-   <span data-ttu-id="2fc61-119">Когда данные отправляются из переменной SQL_C_CHAR на клиенте в столбец **типа char**, **varchar**или **Text** , переменную или параметр в [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] базе данных, драйвер ODBC сначала ПРЕОБРАЗУЕТ из SQL_C_CHAR в Юникод с помощью ACP клиента, а затем обратно в кодировке Юникод, используя ACP сервера.</span><span class="sxs-lookup"><span data-stu-id="2fc61-119">When data is sent from an SQL_C_CHAR variable on the client to a **char**, **varchar**, or **text** column, variable, or parameter in an [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] database, the ODBC driver first converts from SQL_C_CHAR to Unicode using the ACP of the client, then from Unicode back to character using the ACP of the server.</span></span>  
  
-   <span data-ttu-id="2fc61-120">Когда данные отправляются из столбца **типа char**, **varchar**или **Text** в [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] базе данных в переменную SQL_C_CHAR на клиенте, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] драйвер ODBC для собственного клиента сначала преобразует символы в Юникод с помощью программы ACP сервера, а затем обратно в формате Юникод в SQL_C_CHAR с помощью ACP клиента.</span><span class="sxs-lookup"><span data-stu-id="2fc61-120">When data is sent from a **char**, **varchar**, or **text** column, variable, or parameter in a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] database to a SQL_C_CHAR variable on the client, the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Native Client ODBC driver first converts from character to Unicode using the ACP of the server, then from Unicode back to SQL_C_CHAR using the ACP of the client.</span></span>  
  
 <span data-ttu-id="2fc61-121">Так как все эти преобразования выполняются [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] драйвером ODBC для собственного клиента, который выполняется на клиенте, то в качестве сервера может использоваться одна из кодовых страниц, установленных на клиентском компьютере.</span><span class="sxs-lookup"><span data-stu-id="2fc61-121">Because all of these conversions are done by the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Native Client ODBC driver executing on the client, the server ACP must be one of the code pages installed on the client computer.</span></span>  
  
 <span data-ttu-id="2fc61-122">Выполнение символьных преобразований с использованием формата Юникод гарантирует правильное преобразование всех символов, существующих на обеих кодовых страницах.</span><span class="sxs-lookup"><span data-stu-id="2fc61-122">Making the character conversions through Unicode ensures the proper conversion of all characters that exist in both code pages.</span></span> <span data-ttu-id="2fc61-123">Но если символ имеется на одной кодовой странице и отсутствует на другой, этот символ не может быть представлен на целевой кодовой странице.</span><span class="sxs-lookup"><span data-stu-id="2fc61-123">If a character exists in one code page but not another, however, then the character cannot be represented in the target code page.</span></span> <span data-ttu-id="2fc61-124">Например, кодовая страница 1252 содержит символ охраняемого товарного знака (??), а кодовая страница 437 — нет.</span><span class="sxs-lookup"><span data-stu-id="2fc61-124">For example, code page 1252 has the registered trademark symbol (??), while code page 437 does not.</span></span>  
  
 <span data-ttu-id="2fc61-125">Настройка AutoTranslate не оказывает влияния на эти преобразования.</span><span class="sxs-lookup"><span data-stu-id="2fc61-125">The AutoTranslate setting has no effect on these conversions:</span></span>  
  
-   <span data-ttu-id="2fc61-126">Перемещение данных между символьными SQL_C_CHAR клиентскими переменными и столбцами, переменными или **параметрами Юникода в**Юникоде, **nvarchar**, OR **ntext** в [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] базах данных.</span><span class="sxs-lookup"><span data-stu-id="2fc61-126">Moving data between character SQL_C_CHAR client variables and Unicode **nchar**, **nvarchar**, or **ntext** columns, variables, or parameters in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] databases.</span></span>  
  
-   <span data-ttu-id="2fc61-127">Перемещение данных между клиентскими переменными SQL_C_WCHAR Юникода и символьными столбцами **char**, **varchar**или **Text** , переменными или параметрами в [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] базах данных.</span><span class="sxs-lookup"><span data-stu-id="2fc61-127">Moving data between Unicode SQL_C_WCHAR client variables and character **char**, **varchar**, or **text** columns, variables, or parameters in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] databases.</span></span>  
  
 <span data-ttu-id="2fc61-128">Данные всегда нужно преобразовывать при переходе из символьного формата в Юникод.</span><span class="sxs-lookup"><span data-stu-id="2fc61-128">Data always must be converted when moved from character to Unicode.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="2fc61-129">См. также:</span><span class="sxs-lookup"><span data-stu-id="2fc61-129">See Also</span></span>  
 <span data-ttu-id="2fc61-130">[Обработка результатов &#40;ODBC&#41;](processing-results-odbc.md) </span><span class="sxs-lookup"><span data-stu-id="2fc61-130">[Processing Results &#40;ODBC&#41;](processing-results-odbc.md) </span></span>  
 [<span data-ttu-id="2fc61-131">Поддержка параметров сортировки и Юникода</span><span class="sxs-lookup"><span data-stu-id="2fc61-131">Collation and Unicode Support</span></span>](../collations/collation-and-unicode-support.md)  
  
  
