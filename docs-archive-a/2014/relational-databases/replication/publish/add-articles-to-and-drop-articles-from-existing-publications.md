---
title: Добавление и удаление статей в имеющихся публикациях | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- articles [SQL Server replication], dropping
- deleting articles
- removing articles
- dropping articles
- adding articles
- administering replication, articles
- publications [SQL Server replication], adding and dropping articles
- articles [SQL Server replication], adding
ms.assetid: b148e907-e1f2-483b-bdb2-59ea596efceb
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: f72f15886e7105dde8d0e15dd0598a7474ed7e39
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87668781"
---
# <a name="add-articles-to-and-drop-articles-from-existing-publications"></a><span data-ttu-id="3518b-102">Добавление и удаление статей в существующих публикациях</span><span class="sxs-lookup"><span data-stu-id="3518b-102">Add Articles to and Drop Articles from Existing Publications</span></span>
  <span data-ttu-id="3518b-103">Возможно добавлять и удалять статьи после создания публикации.</span><span class="sxs-lookup"><span data-stu-id="3518b-103">After a publication is created, it is possible to add and drop articles.</span></span> <span data-ttu-id="3518b-104">Можно добавить статьи в любое время, но действия, необходимые для удаления статей, зависят от типа репликации и времени удаления статьи.</span><span class="sxs-lookup"><span data-stu-id="3518b-104">Articles can be added at any time, but the actions required for dropping articles depend on the type of replication and when the article is dropped.</span></span>  
  
## <a name="adding-articles"></a><span data-ttu-id="3518b-105">добавление статей</span><span class="sxs-lookup"><span data-stu-id="3518b-105">Adding Articles</span></span>  
 <span data-ttu-id="3518b-106">Добавление статьи включает следующие операции: добавление статьи в публикацию, создание нового моментального снимка публикации, синхронизация подписки для применения схемы и данных для новой статьи.</span><span class="sxs-lookup"><span data-stu-id="3518b-106">Adding an article involves: adding the article to the publication; creating a new snapshot for the publication; synchronizing the subscription to apply the schema and data for the new article.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="3518b-107">Если при добавлении статьи в публикацию слиянием, существующая статья зависит от новой статьи, необходимо задать порядок обработки для обеих статей с помощью параметра **\@processing_order** процедур [sp_addmergearticle](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql) и [sp_changemergearticle](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="3518b-107">If you add an article to a merge publication and an existing article depends on the new article, you must specify a processing order for both articles using the **\@processing_order** parameter of [sp_addmergearticle](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql) and [sp_changemergearticle](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql).</span></span> <span data-ttu-id="3518b-108">Рассмотрим следующий сценарий: необходимо опубликовать таблицу без публикации функции, на которую ссылается эта таблица.</span><span class="sxs-lookup"><span data-stu-id="3518b-108">Consider the following scenario: you publish a table but you do not publish a function that the table references.</span></span> <span data-ttu-id="3518b-109">Если функция не будет опубликована, то таблица не сможет быть создана на подписчике.</span><span class="sxs-lookup"><span data-stu-id="3518b-109">If you do not publish the function, the table cannot be created at the Subscriber.</span></span> <span data-ttu-id="3518b-110">При добавлении функции к публикации: задайте значение **1** для параметра **\@processing_order** процедуры **sp_addmergearticle** и значение **2** для параметра **\@processing_order** процедуры **sp_changemergearticle**, указав имя таблицы в параметре **\@article**.</span><span class="sxs-lookup"><span data-stu-id="3518b-110">When you add the function to the publication: specify a value of **1** for the **\@processing_order** parameter of **sp_addmergearticle**; and specify a value of **2** for the **\@processing_order** parameter of **sp_changemergearticle**, specifying the table name for the parameter **\@article**.</span></span> <span data-ttu-id="3518b-111">Этот порядок обработки гарантирует создание функции на подписчике до создания таблицы, которая зависит от нее.</span><span class="sxs-lookup"><span data-stu-id="3518b-111">This processing order ensures that you create the function at the Subscriber before the table that depends on it.</span></span> <span data-ttu-id="3518b-112">Можно использовать различные числа для каждой статьи при условии, что число для функции меньше числа для таблицы.</span><span class="sxs-lookup"><span data-stu-id="3518b-112">You can use different numbers for each article, as long as the number for the function is lower than the number for the table.</span></span>  
  
1.  <span data-ttu-id="3518b-113">Добавьте одну или несколько статей с помощью следующих методов:</span><span class="sxs-lookup"><span data-stu-id="3518b-113">Add one or more articles through one of the following methods:</span></span>  
  
    -   [<span data-ttu-id="3518b-114">Добавление и удаление статей в существующих публикациях</span><span class="sxs-lookup"><span data-stu-id="3518b-114">Add Articles to and Drop Articles from a Publication &#40;SQL Server Management Studio&#41;</span></span>](add-articles-to-and-drop-articles-from-a-publication.md)  
  
    -   [<span data-ttu-id="3518b-115">Определение статьи</span><span class="sxs-lookup"><span data-stu-id="3518b-115">Define an Article</span></span>](define-an-article.md)  
  
2.  <span data-ttu-id="3518b-116">После добавления статьи в публикацию необходимо создать новый моментальный снимок для публикации (и все секции, если это публикация слиянием с параметризованными фильтрами).</span><span class="sxs-lookup"><span data-stu-id="3518b-116">After adding an article to a publication, you must create a new snapshot for the publication (and all partitions if it is a merge publication with parameterized filters).</span></span> <span data-ttu-id="3518b-117">Затем агент распространителя или агент слияния копирует схему и данные для новой статьи на подписчик (он не инициализирует заново всю публикацию).</span><span class="sxs-lookup"><span data-stu-id="3518b-117">The Distribution Agent or Merge Agent then copies the schema and data for the new article to the Subscriber (it does not reinitialize the entire publication).</span></span>  
  
    -   <span data-ttu-id="3518b-118">Сведения о создании моментального снимка см. в разделе [Create and Apply the Initial Snapshot](../create-and-apply-the-initial-snapshot.md).</span><span class="sxs-lookup"><span data-stu-id="3518b-118">To create a new snapshot, see [Create and Apply the Initial Snapshot](../create-and-apply-the-initial-snapshot.md).</span></span>  
  
    -   <span data-ttu-id="3518b-119">Чтобы создать моментальный снимок публикации с параметризованными фильтрами, ознакомьтесь с [этой статьей](../create-a-snapshot-for-a-merge-publication-with-parameterized-filters.md).</span><span class="sxs-lookup"><span data-stu-id="3518b-119">To create a new snapshot for a merge publication with parameterized filters, see [Create a Snapshot for a Merge Publication with Parameterized Filters](../create-a-snapshot-for-a-merge-publication-with-parameterized-filters.md).</span></span>  
  
3.  <span data-ttu-id="3518b-120">После создания моментального снимка синхронизируйте подписку, чтобы скопировать схему и данные для новой статьи.</span><span class="sxs-lookup"><span data-stu-id="3518b-120">After the snapshot is created, synchronize the subscription to copy the schema and data for the new article.</span></span>  
  
    -   <span data-ttu-id="3518b-121">Сведения о синхронизации принудительной подписки см. в разделе [Synchronize a Push Subscription](../synchronize-a-push-subscription.md).</span><span class="sxs-lookup"><span data-stu-id="3518b-121">To synchronize a push subscription, see [Synchronize a Push Subscription](../synchronize-a-push-subscription.md).</span></span>  
  
    -   <span data-ttu-id="3518b-122">Сведения о синхронизации подписки по запросу см. в разделе [Synchronize a Pull Subscription](../synchronize-a-pull-subscription.md).</span><span class="sxs-lookup"><span data-stu-id="3518b-122">To synchronize a pull subscription, see [Synchronize a Pull Subscription](../synchronize-a-pull-subscription.md).</span></span>  
  
## <a name="dropping-articles"></a><span data-ttu-id="3518b-123">удаление статей</span><span class="sxs-lookup"><span data-stu-id="3518b-123">Dropping Articles</span></span>  
 <span data-ttu-id="3518b-124">Статьи могут быть удалены из публикации в любое время, но следует принять во внимание следующие аспекты:</span><span class="sxs-lookup"><span data-stu-id="3518b-124">Articles can be dropped from a publication at any time, but you must take into account the following behaviors:</span></span>  
  
-   <span data-ttu-id="3518b-125">Удаление статьи из публикации не удаляет объект из базы данных публикации или соответствующий объект из базы данных подписки.</span><span class="sxs-lookup"><span data-stu-id="3518b-125">Dropping an article from a publication does not remove the object from the publication database or the corresponding object from the subscription database.</span></span> <span data-ttu-id="3518b-126">Используйте DROP \<Object> для удаления этих объектов при необходимости.</span><span class="sxs-lookup"><span data-stu-id="3518b-126">Use DROP \<Object> to remove these objects if necessary.</span></span> <span data-ttu-id="3518b-127">При удалении статьи, связанной с другими опубликованными статьями с помощью ограничений внешних ключей, мы рекомендуем удалить таблицу на подписчике вручную или выполнить скрипт по требованию: укажите скрипт, который содержит соответствующие инструкции DROP \<Object>.</span><span class="sxs-lookup"><span data-stu-id="3518b-127">When you drop an article that is related to other published articles through foreign key constraints, we recommend that you drop the table at the Subscriber manually or by using on-demand script execution: specify a script that includes the appropriate DROP \<Object> statements.</span></span> <span data-ttu-id="3518b-128">Дополнительные сведения см. в статье [Выполнение скриптов во время синхронизации (программирование репликации на языке Transact-SQL)](../execute-scripts-during-synchronization-replication-transact-sql-programming.md).</span><span class="sxs-lookup"><span data-stu-id="3518b-128">For more information, see [Execute Scripts During Synchronization &#40;Replication Transact-SQL Programming&#41;](../execute-scripts-during-synchronization-replication-transact-sql-programming.md).</span></span>  
  
-   <span data-ttu-id="3518b-129">Для публикации слиянием с уровнем совместимости 90RTM и выше возможно удаление статей в любое время, но требуется новый моментальный снимок.</span><span class="sxs-lookup"><span data-stu-id="3518b-129">For merge publications with a compatibility level of 90RTM or higher, articles can be dropped at any time, but a new snapshot is required.</span></span> <span data-ttu-id="3518b-130">Дополнительно:</span><span class="sxs-lookup"><span data-stu-id="3518b-130">Additionally:</span></span>  
  
    -   <span data-ttu-id="3518b-131">Если статья является родительской статьей в фильтре соединения или в отношении логической записи, сначала нужно удалить отношения, и это требует повторной инициализации.</span><span class="sxs-lookup"><span data-stu-id="3518b-131">If an article is a parent article in a join filter or logical record relationship, the relationships must be dropped first, which requires reinitialization.</span></span>  
  
    -   <span data-ttu-id="3518b-132">Если статья содержит последний параметризованный фильтр в публикации, подписки должны быть повторно инициализированы.</span><span class="sxs-lookup"><span data-stu-id="3518b-132">If an article has the last parameterized filter in a publication, subscriptions must be reinitialized.</span></span>  
  
-   <span data-ttu-id="3518b-133">Для публикаций слиянием с уровнем совместимости ниже 90RTM статьи можно удалить без особых размышлений до первоначальной синхронизации подписок.</span><span class="sxs-lookup"><span data-stu-id="3518b-133">For merge publications with a compatibility level lower than 90RTM, articles can be dropped with no special considerations prior to the initial synchronization of subscriptions.</span></span> <span data-ttu-id="3518b-134">Если статья удалена после синхронизации одной подписки или более, подписки должны быть удалены, заново созданы и синхронизированы.</span><span class="sxs-lookup"><span data-stu-id="3518b-134">If an article is dropped after one or more subscriptions is synchronized, the subscriptions must be dropped, re-created, and synchronized.</span></span>  
  
-   <span data-ttu-id="3518b-135">Для публикации моментальных снимков или публикации транзакций статьи можно удалить без особых размышлений до создания подписок.</span><span class="sxs-lookup"><span data-stu-id="3518b-135">For snapshot or transactional publications, articles can be dropped with no special considerations prior to subscriptions being created.</span></span> <span data-ttu-id="3518b-136">Если статья удалена после создания одной или более подписок, подписки должны быть удалены, заново созданы и синхронизированы.</span><span class="sxs-lookup"><span data-stu-id="3518b-136">If an article is dropped after one or more subscriptions is created, the subscriptions must be dropped, recreated, and synchronized.</span></span> <span data-ttu-id="3518b-137">Дополнительные сведения об удалении подписок см. в статьях [Подписка на публикации](../subscribe-to-publications.md) и [sp_dropsubscription (Transact-SQL)](/sql/relational-databases/system-stored-procedures/sp-dropsubscription-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="3518b-137">For more information about dropping subscriptions, see [Subscribe to Publications](../subscribe-to-publications.md) and [sp_dropsubscription &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-dropsubscription-transact-sql).</span></span> <span data-ttu-id="3518b-138">**sp_dropsubscription** позволяет удалить одну статью из подписки, а не всю подписку.</span><span class="sxs-lookup"><span data-stu-id="3518b-138">**sp_dropsubscription** allows you to drop a single article from the subscription rather than the entire subscription.</span></span>  
  
1.  <span data-ttu-id="3518b-139">Удаление статьи из публикации включает удаление статьи и создание нового моментального снимка для публикации.</span><span class="sxs-lookup"><span data-stu-id="3518b-139">Dropping an article from a publication involves dropping the article and creating a new snapshot for the publication.</span></span> <span data-ttu-id="3518b-140">Удаление статьи сделает текущий моментальный снимок недействительным; поэтому должен быть создан новый моментальный снимок.</span><span class="sxs-lookup"><span data-stu-id="3518b-140">Dropping an article invalidates the current snapshot; therefore a new snapshot must be created.</span></span>  
  
    -   <span data-ttu-id="3518b-141">Дополнительные сведения об удалении статьи из публикации см. в статьях [Add Articles to and Drop Articles from a Publication](add-articles-to-and-drop-articles-from-a-publication.md) (Добавление и удаление статей в публикации) или [Delete an Article](delete-an-article.md) (Удаление статьи).</span><span class="sxs-lookup"><span data-stu-id="3518b-141">To drop an article from a publication, see [Add Articles to and Drop Articles from a Publication &#40;SQL Server Management Studio&#41;](add-articles-to-and-drop-articles-from-a-publication.md) or [Delete an Article](delete-an-article.md).</span></span>  
  
2.  <span data-ttu-id="3518b-142">После удаления статьи из публикации необходимо создать новый моментальный снимок для публикации (и все секции, если это публикация слиянием с параметризованными фильтрами).</span><span class="sxs-lookup"><span data-stu-id="3518b-142">After dropping an article from a publication, you must create a new snapshot for the publication (and all partitions if it is a merge publication with parameterized filters).</span></span>  
  
    -   <span data-ttu-id="3518b-143">Сведения о создании моментального снимка см. в разделе [Create and Apply the Initial Snapshot](../create-and-apply-the-initial-snapshot.md).</span><span class="sxs-lookup"><span data-stu-id="3518b-143">To create a new snapshot, see [Create and Apply the Initial Snapshot](../create-and-apply-the-initial-snapshot.md).</span></span>  
  
    -   <span data-ttu-id="3518b-144">Чтобы создать моментальный снимок публикации с параметризованными фильтрами, ознакомьтесь с [этой статьей](../create-a-snapshot-for-a-merge-publication-with-parameterized-filters.md).</span><span class="sxs-lookup"><span data-stu-id="3518b-144">To create a new snapshot for a merge publication with parameterized filters, see [Create a Snapshot for a Merge Publication with Parameterized Filters](../create-a-snapshot-for-a-merge-publication-with-parameterized-filters.md).</span></span>  
  
 <span data-ttu-id="3518b-145">Как указано выше, в некоторых случаях удаление статьи требует, чтобы подписки были удалены, заново созданы и синхронизированы.</span><span class="sxs-lookup"><span data-stu-id="3518b-145">As noted above, in some cases dropping an article requires subscriptions to be dropped, recreated, and then synchronized.</span></span> <span data-ttu-id="3518b-146">Дополнительные сведения см. в статьях [Подписка на публикации](../subscribe-to-publications.md) и [Синхронизация данных](../synchronize-data.md).</span><span class="sxs-lookup"><span data-stu-id="3518b-146">For more information, see [Subscribe to Publications](../subscribe-to-publications.md) and [Synchronize Data](../synchronize-data.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="3518b-147">См. также:</span><span class="sxs-lookup"><span data-stu-id="3518b-147">See Also</span></span>  
 <span data-ttu-id="3518b-148">[Публикация данных и объектов базы данных](publish-data-and-database-objects.md) </span><span class="sxs-lookup"><span data-stu-id="3518b-148">[Publish Data and Database Objects](publish-data-and-database-objects.md) </span></span>  
 <span data-ttu-id="3518b-149">[Повторная инициализация подписок](../reinitialize-subscriptions.md) </span><span class="sxs-lookup"><span data-stu-id="3518b-149">[Reinitialize Subscriptions](../reinitialize-subscriptions.md) </span></span>  
 [<span data-ttu-id="3518b-150">Внесение изменений в схемы баз данных публикации</span><span class="sxs-lookup"><span data-stu-id="3518b-150">Make Schema Changes on Publication Databases</span></span>](make-schema-changes-on-publication-databases.md)  
  
  
