---
title: Управление столбцами идентификаторов | Документация Майкрософт
ms.custom: ''
ms.date: 03/07/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- identity values [SQL Server replication]
- merge replication [SQL Server replication], identity range management
- publishing [SQL Server replication], identity columns
- transactional replication, identity range management
- identity columns [SQL Server], replication
ms.assetid: 98892836-cf63-494a-bd5d-6577d9810ddf
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 1b9a7b28c288ef80d24fb67479727d94c3c09fa5
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87655050"
---
# <a name="manage-identity-columns"></a><span data-ttu-id="c2037-102">Управление столбцами идентификаторов</span><span class="sxs-lookup"><span data-stu-id="c2037-102">Manage Identity Columns</span></span>
  <span data-ttu-id="c2037-103">В этом разделе описывается управление столбцами идентификаторов в [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] с помощью среды [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)] или [!INCLUDE[tsql](../../../includes/tsql-md.md)].</span><span class="sxs-lookup"><span data-stu-id="c2037-103">This topic describes how to manage identity columns in [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] by using [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)] or [!INCLUDE[tsql](../../../includes/tsql-md.md)].</span></span> <span data-ttu-id="c2037-104">Если операции вставки с подписчика реплицируются обратно на издатель, необходимо управлять столбцами идентификаторов, чтобы избежать присваивания одинаковых значений идентификаторов на подписчике и издателе.</span><span class="sxs-lookup"><span data-stu-id="c2037-104">When Subscriber inserts are replicated back to the Publisher, identity columns must be managed to avoid assignment of the same identity value at both the Subscriber and Publisher.</span></span> <span data-ttu-id="c2037-105">Репликация может управлять диапазонами идентификаторов автоматически, или можно управлять диапазонами идентификаторов вручную.</span><span class="sxs-lookup"><span data-stu-id="c2037-105">Replication can manage identity ranges automatically or you can choose to manually handle identity range management.</span></span>  <span data-ttu-id="c2037-106">Сведения о параметрах управления диапазонами идентификаторов, предоставляемых репликацией, см. в статье [Replicate Identity Columns](replicate-identity-columns.md) (Репликация столбцов идентификаторов).</span><span class="sxs-lookup"><span data-stu-id="c2037-106">For information about the identity range management options provided by replication, see [Replicate Identity Columns](replicate-identity-columns.md).</span></span>  
  
  
##  <a name="before-you-begin"></a><a name="BeforeYouBegin"></a> <span data-ttu-id="c2037-107">Перед началом</span><span class="sxs-lookup"><span data-stu-id="c2037-107">Before You Begin</span></span>  
  
###  <a name="recommendations"></a><a name="Recommendations"></a> <span data-ttu-id="c2037-108">Рекомендации</span><span class="sxs-lookup"><span data-stu-id="c2037-108">Recommendations</span></span>  
  
-   <span data-ttu-id="c2037-109">При публикации таблицы в нескольких публикациях необходимо указать одинаковые параметры управления диапазонами идентификаторов для всех публикаций.</span><span class="sxs-lookup"><span data-stu-id="c2037-109">When publishing a table in more than one publication, you must specify the same identity range management options for both publications.</span></span> <span data-ttu-id="c2037-110">Дополнительные сведения см. в разделе "Публикация таблиц в нескольких публикациях" статьи [Публикация данных и объектов базы данных](publish-data-and-database-objects.md).</span><span class="sxs-lookup"><span data-stu-id="c2037-110">For more information, see "Publishing Tables in More Than One Publication" in [Publish Data and Database Objects](publish-data-and-database-objects.md).</span></span>  
  
-   <span data-ttu-id="c2037-111">Сведения о том, как создать автоматически увеличивающееся числовое значение, которое может использоваться в нескольких таблицах или вызываться из приложений без ссылки на какие-либо таблицы, см. в разделе [Порядковые номера](../../sequence-numbers/sequence-numbers.md).</span><span class="sxs-lookup"><span data-stu-id="c2037-111">To create an automatically incrementing number that can be used in multiple tables or that can be called from applications without referencing any table, see [Sequence Numbers](../../sequence-numbers/sequence-numbers.md).</span></span>  
  
##  <a name="using-sql-server-management-studio"></a><a name="SSMSProcedure"></a> <span data-ttu-id="c2037-112">Использование среды SQL Server Management Studio</span><span class="sxs-lookup"><span data-stu-id="c2037-112">Using SQL Server Management Studio</span></span>  
 <span data-ttu-id="c2037-113">Укажите параметр управления столбцами идентификаторов на вкладке **Свойства** в диалоговом окне **Свойства статьи —\<Article>** мастера создания публикации.</span><span class="sxs-lookup"><span data-stu-id="c2037-113">Specify an identity column management option on the **Properties** tab of the **Article Properties -\<Article>** dialog box of the New Publication Wizard.</span></span> <span data-ttu-id="c2037-114">Дополнительные сведения об использовании мастера см. в статье [Создание публикации](create-a-publication.md).</span><span class="sxs-lookup"><span data-stu-id="c2037-114">For more information about using this wizard, see [Create a Publication](create-a-publication.md).</span></span> <span data-ttu-id="c2037-115">В мастере создания публикации выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="c2037-115">In the New Publication Wizard:</span></span>  
  
-   <span data-ttu-id="c2037-116">Если выбрана настройка **Публикация слиянием** или **Публикация транзакций с обновляемыми подписками** на странице **Тип публикации** , выберите автоматическое или ручное управление диапазонами идентификаторов (рекомендуется автоматический режим, используемый по умолчанию).</span><span class="sxs-lookup"><span data-stu-id="c2037-116">If you select **Merge publication** or **Transactional publication with updating subscriptions** on the **Publication Type** page, select automatic or manual identity range management (automatic, the default, is recommended).</span></span> <span data-ttu-id="c2037-117">После публикации таблицы данное свойство невозможно изменить, но другие связанные свойства изменить можно.</span><span class="sxs-lookup"><span data-stu-id="c2037-117">After the table is published, the property cannot be modified, but other related properties can be modified.</span></span>  
  
-   <span data-ttu-id="c2037-118">При выборе других типов публикаций должен быть установлен ручной режим управления диапазонами идентификаторов.</span><span class="sxs-lookup"><span data-stu-id="c2037-118">If you select other publication types, identity range management should be set to manual.</span></span>  
  
 <span data-ttu-id="c2037-119">Диапазоны идентификаторов и пороговые значения можно изменить на вкладке **Свойства** диалогового окна **Свойства статьи —\<Article>** , которая доступна в диалоговом окне **Свойства публикации — \<Publication>** .</span><span class="sxs-lookup"><span data-stu-id="c2037-119">Modify identity ranges and thresholds on the **Properties** tab of the **Article Properties -\<Article>**, which is available in the **Publication Properties - \<Publication>** dialog box.</span></span> <span data-ttu-id="c2037-120">Дополнительные сведения о доступе к этому диалоговому окну см. в разделе [Просмотр и изменение свойств публикации](view-and-modify-publication-properties.md).</span><span class="sxs-lookup"><span data-stu-id="c2037-120">For more information about accessing this dialog box, see [View and Modify Publication Properties](view-and-modify-publication-properties.md).</span></span>  
  
#### <a name="to-specify-an-identity-column-management-option"></a><span data-ttu-id="c2037-121">Указание параметра управления столбцом идентификаторов</span><span class="sxs-lookup"><span data-stu-id="c2037-121">To specify an identity column management option</span></span>  
  
1.  <span data-ttu-id="c2037-122">Если на издателе запущена версия [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , более ранняя, чем [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)], то на странице **Тип публикации** мастера создания публикаций выберите **Публикация слиянием** или **Публикация транзакций с обновляемыми подписками**.</span><span class="sxs-lookup"><span data-stu-id="c2037-122">If the Publisher is running a version of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] prior to [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)], on the **Publication Type** page of the New Publication Wizard, select **Merge publication** or **Transactional publication with updating subscriptions**.</span></span>  
  
2.  <span data-ttu-id="c2037-123">На странице **Статьи** выберите таблицу со столбцом идентификаторов.</span><span class="sxs-lookup"><span data-stu-id="c2037-123">On the **Articles** page, select a table with an identity column.</span></span>  
  
3.  <span data-ttu-id="c2037-124">Щелкните **Свойства статьи**, затем щелкните **Указать свойства выделенной статьи таблицы**.</span><span class="sxs-lookup"><span data-stu-id="c2037-124">Click **Article Properties**, and then click **Set Properties of Highlighted Table Article**.</span></span>  
  
4.  <span data-ttu-id="c2037-125">На вкладке **Свойства** диалогового окна **Свойства статьи — \<Article>** , в разделе **Управление диапазоном идентификаторов** установите для свойства **Автоматически управлять диапазонами идентификаторов** значение **Автоматически** или **Вручную** (для издателей, использующих [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] или более позднюю версию) либо **True** или **False** (для издателей, использующих версию [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], предшествующую [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)]).</span><span class="sxs-lookup"><span data-stu-id="c2037-125">On the **Properties** tab of the **Article Properties - \<Article>** dialog box, in the **Identity Range Management** section, set the **Automatically manage identity ranges** property to **Automatic** or **Manual** (for Publishers running [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] or later), or **True** or **False** (for Publishers running a version of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] prior to [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)]).</span></span>  
  
5.  <span data-ttu-id="c2037-126">Если на шаге 4 выбрано **Автоматически** или **True** , введите значения для параметров в следующей таблице.</span><span class="sxs-lookup"><span data-stu-id="c2037-126">If you selected **Automatic** or **True** in step 4, enter values for the options in the following table.</span></span> <span data-ttu-id="c2037-127">Дополнительные сведения об использовании данных настроек см. в разделе "Назначение диапазонов идентификаторов" статьи [Replicate Identity Columns](replicate-identity-columns.md) (Репликация столбцов идентификаторов).</span><span class="sxs-lookup"><span data-stu-id="c2037-127">For more information on how these settings are used, see the "Assigning Identity Ranges" section of [Replicate Identity Columns](replicate-identity-columns.md).</span></span>  
  
    |<span data-ttu-id="c2037-128">Параметр</span><span class="sxs-lookup"><span data-stu-id="c2037-128">Option</span></span>|<span data-ttu-id="c2037-129">Значение</span><span class="sxs-lookup"><span data-stu-id="c2037-129">Value</span></span>|<span data-ttu-id="c2037-130">Описание</span><span class="sxs-lookup"><span data-stu-id="c2037-130">Description</span></span>|  
    |------------|-----------|-----------------|  
    |<span data-ttu-id="c2037-131">**Размер диапазона издателя**</span><span class="sxs-lookup"><span data-stu-id="c2037-131">**Publisher range size**</span></span>|<span data-ttu-id="c2037-132">Целое значение для размера диапазона (например, 20 000).</span><span class="sxs-lookup"><span data-stu-id="c2037-132">Integer value for range size (for example, 20000).</span></span>|<span data-ttu-id="c2037-133">Дополнительные сведения см. в разделе "Назначение диапазонов идентификаторов" статьи [Replicate Identity Columns](replicate-identity-columns.md) (Репликация столбцов идентификаторов).</span><span class="sxs-lookup"><span data-stu-id="c2037-133">See the "Assigning Identity Ranges" section of [Replicate Identity Columns](replicate-identity-columns.md).</span></span>|  
    |<span data-ttu-id="c2037-134">**Размер диапазона на стороне подписчика**</span><span class="sxs-lookup"><span data-stu-id="c2037-134">**Subscriber range size**</span></span>|<span data-ttu-id="c2037-135">Целое значение для размера диапазона (например, 10000).</span><span class="sxs-lookup"><span data-stu-id="c2037-135">Integer value for range size (for example, 10000).</span></span>|<span data-ttu-id="c2037-136">Дополнительные сведения см. в разделе "Назначение диапазонов идентификаторов" статьи [Replicate Identity Columns](replicate-identity-columns.md) (Репликация столбцов идентификаторов).</span><span class="sxs-lookup"><span data-stu-id="c2037-136">See the "Assigning Identity Ranges" section of [Replicate Identity Columns](replicate-identity-columns.md).</span></span>|  
    |<span data-ttu-id="c2037-137">**Процентный порог выделения диапазона**</span><span class="sxs-lookup"><span data-stu-id="c2037-137">**Range threshold percentage**</span></span>|<span data-ttu-id="c2037-138">Целое значение для процентного порога (например, 90 эквивалентно 90 процентам).</span><span class="sxs-lookup"><span data-stu-id="c2037-138">Integer value for percent threshold (for example, 90 is equivalent to 90 percent).</span></span>|<span data-ttu-id="c2037-139">Процент общего числа значений идентификаторов, используемый в узле до задания нового диапазона идентификаторов.</span><span class="sxs-lookup"><span data-stu-id="c2037-139">Percent of total identity values used at a node before a new identity range is assigned.</span></span><br /><br /> <span data-ttu-id="c2037-140">Примечание. Данное значение должно быть указано, но оно используется только подписчиками, использующими подписки, обновляемые посредством очередей, а также подписчиками публикаций слиянием, на которых выполняется [!INCLUDE[ssEW](../../../includes/ssew-md.md)] или предыдущие версии других выпусков SQL Server.</span><span class="sxs-lookup"><span data-stu-id="c2037-140">Note: This value must be specified, but it is only used by: Subscribers using queued updating subscriptions; and Subscribers to merge publications running [!INCLUDE[ssEW](../../../includes/ssew-md.md)] or previous versions of other SQL Server editions.</span></span> <span data-ttu-id="c2037-141">Дополнительные сведения см. в разделе "Назначение диапазонов идентификаторов" статьи [Replicate Identity Columns](replicate-identity-columns.md) (Репликация столбцов идентификаторов).</span><span class="sxs-lookup"><span data-stu-id="c2037-141">For more information, see the "Assigning Identity Ranges" section of [Replicate Identity Columns](replicate-identity-columns.md).</span></span>|  
    |<span data-ttu-id="c2037-142">**Начальное значение следующего диапазона**</span><span class="sxs-lookup"><span data-stu-id="c2037-142">**Next range starting value**</span></span>|<span data-ttu-id="c2037-143">Целое значение.</span><span class="sxs-lookup"><span data-stu-id="c2037-143">Integer value.</span></span> <span data-ttu-id="c2037-144">Только для чтения.</span><span class="sxs-lookup"><span data-stu-id="c2037-144">Read-only.</span></span>|<span data-ttu-id="c2037-145">Значение, с которого начнется следующий диапазон.</span><span class="sxs-lookup"><span data-stu-id="c2037-145">The value at which the next range will start.</span></span> <span data-ttu-id="c2037-146">Например, если текущий диапазон 5001-6000, то это значение будет равно 6001.</span><span class="sxs-lookup"><span data-stu-id="c2037-146">For example, if the current range is 5001-6000, this value will be 6001.</span></span>|  
    |<span data-ttu-id="c2037-147">**Максимальное значение идентификатора**</span><span class="sxs-lookup"><span data-stu-id="c2037-147">**Maximum identity value**</span></span>|<span data-ttu-id="c2037-148">Целое значение.</span><span class="sxs-lookup"><span data-stu-id="c2037-148">Integer value.</span></span> <span data-ttu-id="c2037-149">Только для чтения.</span><span class="sxs-lookup"><span data-stu-id="c2037-149">Read-only.</span></span>|<span data-ttu-id="c2037-150">Наибольшее значение для столбца идентификаторов.</span><span class="sxs-lookup"><span data-stu-id="c2037-150">The largest value for the identity column.</span></span> <span data-ttu-id="c2037-151">Определяется базовым типом данных столбца.</span><span class="sxs-lookup"><span data-stu-id="c2037-151">Determined by the base data type of the column.</span></span>|  
    |<span data-ttu-id="c2037-152">**Приращение**</span><span class="sxs-lookup"><span data-stu-id="c2037-152">**Increment**</span></span>|<span data-ttu-id="c2037-153">Целое значение.</span><span class="sxs-lookup"><span data-stu-id="c2037-153">Integer value.</span></span> <span data-ttu-id="c2037-154">Только для чтения.</span><span class="sxs-lookup"><span data-stu-id="c2037-154">Read-only.</span></span>|<span data-ttu-id="c2037-155">Значение, на которое должно увеличиться или уменьшиться для каждой вставки значение в столбце идентификаторов. Обычно используется значение 1.</span><span class="sxs-lookup"><span data-stu-id="c2037-155">The amount by which the number in the identity column should increase or decrease for each insert: typically set to 1.</span></span>|  
  
6.  [!INCLUDE[clickOK](../../../includes/clickok-md.md)]  
  
#### <a name="to-modify-identity-ranges-and-thresholds-after-a-table-is-published"></a><span data-ttu-id="c2037-156">Изменение диапазонов идентификаторов и пороговых значений после публикации таблицы</span><span class="sxs-lookup"><span data-stu-id="c2037-156">To modify identity ranges and thresholds after a table is published</span></span>  
  
1.  <span data-ttu-id="c2037-157">На странице **Статьи** диалогового окна **Свойства публикации — \<Publication>** выберите таблицу в столбце идентификаторов.</span><span class="sxs-lookup"><span data-stu-id="c2037-157">On the **Articles** page of the **Publication Properties - \<Publication>** dialog box, select a table with an identity column.</span></span>  
  
2.  <span data-ttu-id="c2037-158">Щелкните **Свойства статьи**, затем щелкните **Указать свойства выделенной статьи таблицы**.</span><span class="sxs-lookup"><span data-stu-id="c2037-158">Click **Article Properties**, and then click **Set Properties of Highlighted Table Article**.</span></span>  
  
3.  <span data-ttu-id="c2037-159">На вкладке **Свойства** диалогового окна **Article Свойства статьи — \<Article>** в разделе **Управление диапазонами идентификаторов** введите значения для одного или нескольких из следующих параметров: **Размер диапазона издателя**, **Размер диапазона на стороне подписчика** и **Процентный порог выделения диапазона**.</span><span class="sxs-lookup"><span data-stu-id="c2037-159">On the **Properties** tab of the **Article Properties - \<Article>** dialog box, in the **Identity Range Management** section, enter values for one or more of the following properties: **Publisher range size**, **Subscriber range size**, and **Range threshold percentage**.</span></span>  
  
4.  [!INCLUDE[clickOK](../../../includes/clickok-md.md)]  
  
5.  <span data-ttu-id="c2037-160">Нажмите кнопку **ОК**, чтобы вернуться в диалоговое окно **Свойства публикации — \<Publication>** .</span><span class="sxs-lookup"><span data-stu-id="c2037-160">Click **OK** on the **Publication Properties - \<Publication>** dialog box.</span></span>  
  
##  <a name="using-transact-sql"></a><a name="TsqlProcedure"></a> <span data-ttu-id="c2037-161">Использование Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="c2037-161">Using Transact-SQL</span></span>  
 <span data-ttu-id="c2037-162">Чтобы указать параметры управления диапазонами идентификаторов, при создании статьи можно использовать хранимые процедуры репликации.</span><span class="sxs-lookup"><span data-stu-id="c2037-162">You can use replication stored procedures to specify identity range management options when an article is created.</span></span>  
  
#### <a name="to-enable-automatic-identity-range-management-when-defining-articles-for-a-transactional-publication"></a><span data-ttu-id="c2037-163">Включение автоматического управления диапазонами идентификаторов при определении статей для публикации транзакций</span><span class="sxs-lookup"><span data-stu-id="c2037-163">To enable automatic identity range management when defining articles for a transactional publication</span></span>  
  
1.  <span data-ttu-id="c2037-164">Выполните процедуру [sp_addarticle](/sql/relational-databases/system-stored-procedures/sp-addarticle-transact-sql)на издателе в базе данных публикации.</span><span class="sxs-lookup"><span data-stu-id="c2037-164">At the Publisher on the publication database, execute [sp_addarticle](/sql/relational-databases/system-stored-procedures/sp-addarticle-transact-sql).</span></span> <span data-ttu-id="c2037-165">Если в публикуемой исходной таблице имеется столбец идентификаторов, укажите значение **auto** в параметре **\@identityrangemanagementoption**, диапазон значений идентификаторов, назначенный издателю, в параметре **\@pub_identity_range**, диапазон значений идентификаторов, назначенный каждому подписчику, в параметре **\@identity_range** и процент использованных значений идентификаторов, по достижении которого назначается новый диапазон идентификаторов, в параметре **\@threshold**.</span><span class="sxs-lookup"><span data-stu-id="c2037-165">If the source table being published has an identity column, specify a value of **auto** for **\@identityrangemanagementoption**, the range of identity values assigned to the Publisher for **\@pub_identity_range**, the range of identity values assigned to each Subscribers for **\@identity_range**, and the percent of total identity values used before a new identity range is assigned for **\@threshold**.</span></span> <span data-ttu-id="c2037-166">Дополнительные сведения об определении статей см. в [этой статье](define-an-article.md).</span><span class="sxs-lookup"><span data-stu-id="c2037-166">For more information about defining articles, see [Define an Article](define-an-article.md).</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="c2037-167">Убедитесь, что тип данных столбца идентификаторов достаточно большой, чтобы поддерживать полный диапазон идентификаторов, назначаемый всем подписчикам.</span><span class="sxs-lookup"><span data-stu-id="c2037-167">Ensure that the data type of the identity column is large enough to support the total range of identities being assigned to all Subscribers.</span></span>  
  
#### <a name="to-disable-automatic-identity-range-management-when-defining-articles-for-a-transactional-publication"></a><span data-ttu-id="c2037-168">Отключение автоматического управления диапазонами идентификаторов при определении статей для публикации транзакций</span><span class="sxs-lookup"><span data-stu-id="c2037-168">To disable automatic identity range management when defining articles for a transactional publication</span></span>  
  
1.  <span data-ttu-id="c2037-169">Выполните процедуру [sp_addarticle](/sql/relational-databases/system-stored-procedures/sp-addarticle-transact-sql)на издателе в базе данных публикации.</span><span class="sxs-lookup"><span data-stu-id="c2037-169">At the Publisher on the publication database, execute [sp_addarticle](/sql/relational-databases/system-stored-procedures/sp-addarticle-transact-sql).</span></span> <span data-ttu-id="c2037-170">Укажите значение **manual** в параметре **\@identityrangemanagementoption**.</span><span class="sxs-lookup"><span data-stu-id="c2037-170">Specify a value of **manual** for **\@identityrangemanagementoption**.</span></span> <span data-ttu-id="c2037-171">Дополнительные сведения об определении статей см. в [этой статье](define-an-article.md).</span><span class="sxs-lookup"><span data-stu-id="c2037-171">For more information about defining articles, see [Define an Article](define-an-article.md).</span></span>  
  
2.  <span data-ttu-id="c2037-172">Назначьте диапазоны для столбцов идентификаторов в статье на подписчике, чтобы избежать возникновения конфликтов при обновлении подписчиков.</span><span class="sxs-lookup"><span data-stu-id="c2037-172">Assign ranges to identity article columns at the Subscriber to avoid generating conflicts for updating Subscribers.</span></span> <span data-ttu-id="c2037-173">Дополнительные сведения см. в разделе Assigning ranges for manual identity range management (Назначение диапазонов для управления диапазонами идентификаторов вручную) статьи [Replicate Identity Columns](replicate-identity-columns.md) (Репликация столбцов идентификаторов).</span><span class="sxs-lookup"><span data-stu-id="c2037-173">For more information, see the section on assigning ranges for manual identity range management in the topic [Replicate Identity Columns](replicate-identity-columns.md).</span></span>  
  
#### <a name="to-enable-automatic-identity-range-management-when-defining-articles-for-a-merge-publication"></a><span data-ttu-id="c2037-174">Включение автоматического управления диапазонами идентификаторов при определении статей для публикации слиянием</span><span class="sxs-lookup"><span data-stu-id="c2037-174">To enable automatic identity range management when defining articles for a merge publication</span></span>  
  
1.  <span data-ttu-id="c2037-175">В базе данных публикации на издателе выполните процедуру [sp_addmergearticle](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="c2037-175">At the Publisher on the publication database, execute [sp_addmergearticle](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql).</span></span> <span data-ttu-id="c2037-176">Если в публикуемой исходной таблице имеется столбец идентификаторов, укажите значение **auto** в параметре **\@identityrangemanagementoption**, диапазон значений идентификаторов, назначенный серверной подписке, в параметре **\@pub_identity_range**, диапазон значений идентификаторов, назначенный издателю и каждой клиентской подписке, в параметре **\@identity_range**, и процент значений идентификаторов, который должен быть использован перед назначением нового диапазона идентификаторов, в параметре **\@threshold**.</span><span class="sxs-lookup"><span data-stu-id="c2037-176">If the source table being published has an identity column, specify a value of **auto** for **\@identityrangemanagementoption**, the range of identity values assigned to a server subscription for **\@pub_identity_range**, the range of identity values assigned to the Publisher and each client subscription for **\@identity_range**, and the percent of total identity values used before a new identity range is assigned for **\@threshold**.</span></span> <span data-ttu-id="c2037-177">Дополнительные сведения о времени назначения диапазонов идентификаторов см. в разделе Assigning Identity Ranges (Назначение диапазонов идентификаторов) статьи [Replicate Identity Columns](replicate-identity-columns.md) (Репликация столбцов идентификаторов).</span><span class="sxs-lookup"><span data-stu-id="c2037-177">For more information on when new identity ranges are assigned, see Assigning Identity Ranges in the topic [Replicate Identity Columns](replicate-identity-columns.md).</span></span> <span data-ttu-id="c2037-178">Дополнительные сведения об определении статей см. в [этой статье](define-an-article.md).</span><span class="sxs-lookup"><span data-stu-id="c2037-178">For more information about defining articles, see [Define an Article](define-an-article.md).</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="c2037-179">Убедитесь, что тип данных столбца идентификаторов достаточно большой, чтобы поддерживать полный диапазон идентификаторов, назначаемый всем подписчикам, особенно для подписчиков с серверными подписками.</span><span class="sxs-lookup"><span data-stu-id="c2037-179">Ensure that the data type of the identity column is large enough to support the total range of identities being assigned to all Subscribers, particularly for Subscribers with server subscriptions.</span></span>  
  
#### <a name="to-disable-automatic-identity-range-management-when-defining-articles-for-a-merge-publication"></a><span data-ttu-id="c2037-180">Отключение автоматического управления диапазонами идентификаторов при определении статей для публикации слиянием</span><span class="sxs-lookup"><span data-stu-id="c2037-180">To disable automatic identity range management when defining articles for a merge publication</span></span>  
  
1.  <span data-ttu-id="c2037-181">В базе данных публикации на издателе выполните процедуру [sp_addmergearticle](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="c2037-181">At the Publisher on the publication database, execute [sp_addmergearticle](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql).</span></span> <span data-ttu-id="c2037-182">Укажите одно из следующих значений в параметре **\@identityrangemanagementoption**:</span><span class="sxs-lookup"><span data-stu-id="c2037-182">Specify one of the following values for **\@identityrangemanagementoption**:</span></span>  
  
    -   <span data-ttu-id="c2037-183">**manual** — диапазоны идентификаторов должны назначаться вручную для обновляемых подписчиков;</span><span class="sxs-lookup"><span data-stu-id="c2037-183">**manual** - Identity ranges must be assigned manually for updating Subscribers.</span></span>  
  
    -   <span data-ttu-id="c2037-184">**none** — столбцы идентификаторов на издателе не будут определяться как столбцы идентификаторов на подписчике.</span><span class="sxs-lookup"><span data-stu-id="c2037-184">**none** - Identity columns at the Publisher will not be defined as identity columns at the Subscriber.</span></span>  
  
     <span data-ttu-id="c2037-185">Дополнительные сведения об определении статей см. в [этой статье](define-an-article.md).</span><span class="sxs-lookup"><span data-stu-id="c2037-185">For more information about defining articles, see [Define an Article](define-an-article.md).</span></span>  
  
2.  <span data-ttu-id="c2037-186">Назначьте диапазоны для столбцов идентификаторов в статье на подписчике, чтобы избежать возникновения конфликтов при обновлении подписчиков.</span><span class="sxs-lookup"><span data-stu-id="c2037-186">Assign ranges to identity article columns at the Subscriber to avoid generating conflicts for updating Subscribers.</span></span>  
  
#### <a name="to-change-automatic-identity-range-management-settings-for-an-existing-article-in-a-snapshot-or-transactional-publication"></a><span data-ttu-id="c2037-187">Изменение настроек автоматического управления диапазонами идентификаторов для существующей статьи в публикации моментального снимка или публикации транзакций</span><span class="sxs-lookup"><span data-stu-id="c2037-187">To change automatic identity range management settings for an existing article in a snapshot or transactional publication</span></span>  
  
1.  <span data-ttu-id="c2037-188">На издателе в базе данных публикации выполните хранимую процедуру [sp_helparticle](/sql/relational-databases/system-stored-procedures/sp-helparticle-transact-sql) и проверьте значение параметра **identityrangemanagementoption** в результирующем наборе.</span><span class="sxs-lookup"><span data-stu-id="c2037-188">At the Publisher on the publication database, execute [sp_helparticle](/sql/relational-databases/system-stored-procedures/sp-helparticle-transact-sql) and note the value of **identityrangemanagementoption** in the result set.</span></span> <span data-ttu-id="c2037-189">Если это значение равно **0**, автоматическое управление диапазонами идентификаторов отключено.</span><span class="sxs-lookup"><span data-stu-id="c2037-189">If this value is **0**, automatic identity range management is not enabled.</span></span>  
  
2.  <span data-ttu-id="c2037-190">Если значение **identityrangemanagementoption** в результирующем наборе равно **1**, измените настройки следующим образом.</span><span class="sxs-lookup"><span data-stu-id="c2037-190">If the value of **identityrangemanagementoption** in the result set is **1**, change the settings as follows:</span></span>  
  
    -   <span data-ttu-id="c2037-191">Чтобы изменить назначенные диапазоны идентификаторов, выполните на издателе в базе данных публикации хранимую процедуру [sp_changearticle](/sql/relational-databases/system-stored-procedures/sp-changearticle-transact-sql) .</span><span class="sxs-lookup"><span data-stu-id="c2037-191">To change the assigned identity ranges, execute [sp_changearticle](/sql/relational-databases/system-stored-procedures/sp-changearticle-transact-sql) at the Publisher on the publication database.</span></span> <span data-ttu-id="c2037-192">Укажите значение **identity_range** или **pub_identity_range** в параметре **\@property** и задайте новое значение диапазона в параметре **\@value**.</span><span class="sxs-lookup"><span data-stu-id="c2037-192">Specify a value of **identity_range** or **pub_identity_range** for **\@property** and the new range value for **\@value**.</span></span>  
  
    -   <span data-ttu-id="c2037-193">Чтобы изменить пороговое значение, с которого назначаются диапазоны идентификаторов, выполните на издателе в базе данных публикации хранимую процедуру [sp_changearticle](/sql/relational-databases/system-stored-procedures/sp-changearticle-transact-sql) .</span><span class="sxs-lookup"><span data-stu-id="c2037-193">To change the threshold at which new ranges are assigned, execute [sp_changearticle](/sql/relational-databases/system-stored-procedures/sp-changearticle-transact-sql) at the Publisher on the publication database.</span></span> <span data-ttu-id="c2037-194">Укажите значение **threshold** в параметре **\@property** и задайте новое пороговое значение в параметре **\@value**.</span><span class="sxs-lookup"><span data-stu-id="c2037-194">Specify a value of **threshold** for **\@property** and the new threshold value for **\@value**.</span></span>  
  
#### <a name="to-change-automatic-identity-range-management-settings-for-an-existing-article-in-a-merge-publication"></a><span data-ttu-id="c2037-195">Изменение настроек автоматического управления диапазонами идентификаторов для существующей статьи в публикации слиянием</span><span class="sxs-lookup"><span data-stu-id="c2037-195">To change automatic identity range management settings for an existing article in a merge publication</span></span>  
  
1.  <span data-ttu-id="c2037-196">На издателе в базе данных публикации выполните хранимую процедуру [sp_helpmergearticle](/sql/relational-databases/system-stored-procedures/sp-helpmergearticle-transact-sql) и проверьте значение параметра **identity_support** в результирующем наборе.</span><span class="sxs-lookup"><span data-stu-id="c2037-196">At the Publisher on the publication database, execute [sp_helpmergearticle](/sql/relational-databases/system-stored-procedures/sp-helpmergearticle-transact-sql) and note the value of **identity_support** in the result set.</span></span> <span data-ttu-id="c2037-197">Если это значение равно **0**, автоматическое управление диапазонами идентификаторов отключено.</span><span class="sxs-lookup"><span data-stu-id="c2037-197">If this value is **0**, automatic identity range management is not enabled.</span></span>  
  
2.  <span data-ttu-id="c2037-198">Если значение **identity_support** в результирующем наборе равно **1**, измените настройки следующим образом.</span><span class="sxs-lookup"><span data-stu-id="c2037-198">If the value of **identity_support** in the result set is **1**, change the settings as follows:</span></span>  
  
    -   <span data-ttu-id="c2037-199">Чтобы изменить назначенный диапазон идентификаторов, выполните на издателе в базе данных публикации хранимую процедуру [sp_changemergearticle](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql) .</span><span class="sxs-lookup"><span data-stu-id="c2037-199">To change the assigned identity ranges, execute [sp_changemergearticle](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql) at the Publisher on the publication database.</span></span> <span data-ttu-id="c2037-200">Укажите значение **identity_range** или **pub_identity_range** в параметре **\@property** и задайте новое значение диапазона в параметре **\@value**.</span><span class="sxs-lookup"><span data-stu-id="c2037-200">Specify a value of **identity_range** or **pub_identity_range** for **\@property** and the new range value for **\@value**.</span></span>  
  
    -   <span data-ttu-id="c2037-201">Чтобы изменить пороговое значение, с которого назначаются диапазоны идентификаторов, выполните на издателе в базе данных публикации хранимую процедуру [sp_changemergearticle](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql) .</span><span class="sxs-lookup"><span data-stu-id="c2037-201">To change the threshold at which new ranges are assigned, execute [sp_changemergearticle](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql) at the Publisher on the publication database.</span></span> <span data-ttu-id="c2037-202">Укажите значение **threshold** в параметре **\@property** и задайте новое пороговое значение в параметре **\@value**.</span><span class="sxs-lookup"><span data-stu-id="c2037-202">Specify a value of **threshold** for **\@property** and the new threshold value for **\@value**.</span></span> <span data-ttu-id="c2037-203">Дополнительные сведения о времени назначения диапазонов идентификаторов см. в разделе Assigning Identity Ranges (Назначение диапазонов идентификаторов) статьи [Replicate Identity Columns](replicate-identity-columns.md) (Репликация столбцов идентификаторов).</span><span class="sxs-lookup"><span data-stu-id="c2037-203">For more information on when new identity ranges are assigned, see Assigning Identity Ranges in the topic [Replicate Identity Columns](replicate-identity-columns.md).</span></span>  
  
    -   <span data-ttu-id="c2037-204">Чтобы отключить автоматическое управление диапазонами идентификаторов, выполните на издателе в базе данных публикации хранимую процедуру [sp_changemergearticle](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql) .</span><span class="sxs-lookup"><span data-stu-id="c2037-204">To disable automatic identity range management, execute [sp_changemergearticle](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql) at the Publisher on the publication database.</span></span> <span data-ttu-id="c2037-205">Укажите значение **identityrangemanagementoption** в параметре **\@property** и значение **manual** или **none** в параметре **\@value**.</span><span class="sxs-lookup"><span data-stu-id="c2037-205">Specify a value of **identityrangemanagementoption** for **\@property** and either **manual** or **none** for **\@value**.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="c2037-206">См. также:</span><span class="sxs-lookup"><span data-stu-id="c2037-206">See Also</span></span>  
 <span data-ttu-id="c2037-207">[Одноранговая репликация транзакций](../transactional/peer-to-peer-transactional-replication.md) </span><span class="sxs-lookup"><span data-stu-id="c2037-207">[Peer-to-Peer Transactional Replication](../transactional/peer-to-peer-transactional-replication.md) </span></span>  
 <span data-ttu-id="c2037-208">[Replication System Stored Procedures Concepts](../concepts/replication-system-stored-procedures-concepts.md) </span><span class="sxs-lookup"><span data-stu-id="c2037-208">[Replication System Stored Procedures Concepts](../concepts/replication-system-stored-procedures-concepts.md) </span></span>  
 [<span data-ttu-id="c2037-209">Репликация столбцов идентификаторов</span><span class="sxs-lookup"><span data-stu-id="c2037-209">Replicate Identity Columns</span></span>](replicate-identity-columns.md)  
  
  
