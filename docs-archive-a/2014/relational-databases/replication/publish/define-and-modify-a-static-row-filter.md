---
title: Определение и изменение статического строкового фильтра | Документация Майкрософт
ms.custom: ''
ms.date: 06/30/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- modifying filters, static row
- static row filters
- filters [SQL Server replication], static row
ms.assetid: a6ebb026-026f-4c39-b6a9-b9998c3babab
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: d13fd93b6afdcce6b55e9b181f52087fd620913c
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87656331"
---
# <a name="define-and-modify-a-static-row-filter"></a><span data-ttu-id="35800-102">Определение и изменение статического строкового фильтра</span><span class="sxs-lookup"><span data-stu-id="35800-102">Define and Modify a Static Row Filter</span></span>
  <span data-ttu-id="35800-103">В этом разделе описывается определение и изменение статического строкового фильтра [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] при помощи среды [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)] или [!INCLUDE[tsql](../../../includes/tsql-md.md)].</span><span class="sxs-lookup"><span data-stu-id="35800-103">This topic describes how to define and modify a static row filter in [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] by using [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)] or [!INCLUDE[tsql](../../../includes/tsql-md.md)].</span></span>  
  
 <span data-ttu-id="35800-104">**В этом разделе**</span><span class="sxs-lookup"><span data-stu-id="35800-104">**In This Topic**</span></span>  
  
-   <span data-ttu-id="35800-105">**Перед началом работы**</span><span class="sxs-lookup"><span data-stu-id="35800-105">**Before you begin:**</span></span>  
  
     [<span data-ttu-id="35800-106">Ограничения</span><span class="sxs-lookup"><span data-stu-id="35800-106">Limitations and Restrictions</span></span>](#Restrictions)  
  
     [<span data-ttu-id="35800-107">Рекомендации</span><span class="sxs-lookup"><span data-stu-id="35800-107">Recommendations</span></span>](#Recommendations)  
  
-   <span data-ttu-id="35800-108">**Для определения и изменения статической строковой фильтрации используется:**</span><span class="sxs-lookup"><span data-stu-id="35800-108">**To define and modify a static row filter, using:**</span></span>  
  
     [<span data-ttu-id="35800-109">Среда SQL Server Management Studio</span><span class="sxs-lookup"><span data-stu-id="35800-109">SQL Server Management Studio</span></span>](#SSMSProcedure)  
  
     [<span data-ttu-id="35800-110">Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="35800-110">Transact-SQL</span></span>](#TsqlProcedure)  
  
##  <a name="before-you-begin"></a><a name="BeforeYouBegin"></a> <span data-ttu-id="35800-111">Перед началом</span><span class="sxs-lookup"><span data-stu-id="35800-111">Before You Begin</span></span>  
  
###  <a name="limitations-and-restrictions"></a><a name="Restrictions"></a> <span data-ttu-id="35800-112">Ограничения</span><span class="sxs-lookup"><span data-stu-id="35800-112">Limitations and Restrictions</span></span>  
  
-   <span data-ttu-id="35800-113">Если добавление, изменение или удаление статической строковой фильтрацией выполняется после инициализации подписок на публикацию, следует создать новый моментальный снимок и повторно инициализировать все подписки после внесения изменений.</span><span class="sxs-lookup"><span data-stu-id="35800-113">If you add, modify, or delete a static row filter after subscriptions to the publication have been initialized, you must generate a new snapshot and reinitialize all subscriptions after making the change.</span></span> <span data-ttu-id="35800-114">Дополнительные сведения о требованиях к изменениям свойств см. в статье [Изменение свойств публикации и статьи](change-publication-and-article-properties.md).</span><span class="sxs-lookup"><span data-stu-id="35800-114">For more information about requirements for property changes, see [Change Publication and Article Properties](change-publication-and-article-properties.md).</span></span>  
  
-   <span data-ttu-id="35800-115">Если публикация включена для одноранговой репликации транзакций, таблицы не могут быть отфильтрованы.</span><span class="sxs-lookup"><span data-stu-id="35800-115">If the publication is enabled for peer-to-peer transactional replication, tables cannot be filtered.</span></span>  
  
###  <a name="recommendations"></a><a name="Recommendations"></a> <span data-ttu-id="35800-116">Рекомендации</span><span class="sxs-lookup"><span data-stu-id="35800-116">Recommendations</span></span>  
  
-   <span data-ttu-id="35800-117">Поскольку эти фильтры являются статическими, все подписчики получат один и тот же поднабор данных.</span><span class="sxs-lookup"><span data-stu-id="35800-117">Because these filters are static, all subscribers will receive the same subset of the data.</span></span> <span data-ttu-id="35800-118">Если необходимо динамически фильтровать строки в статье таблицы, принадлежащей к публикации слиянием, чтобы каждый подписчик получал собственную секцию данных, см. раздел [Определение и изменение параметризованного фильтра строк для статьи публикации слиянием](define-and-modify-a-parameterized-row-filter-for-a-merge-article.md).</span><span class="sxs-lookup"><span data-stu-id="35800-118">If you need to dynamically filter rows in a table article belonging to a merge publication so that each subscriber receives a different partition of the data, see [Define and Modify a Parameterized Row Filter for a Merge Article](define-and-modify-a-parameterized-row-filter-for-a-merge-article.md).</span></span> <span data-ttu-id="35800-119">Репликация слиянием также позволяет фильтровать связанные строки на основе существующего фильтра строк.</span><span class="sxs-lookup"><span data-stu-id="35800-119">Merge replication also enables you to filter related rows based on an existing row filter.</span></span> <span data-ttu-id="35800-120">Дополнительные сведения см. в статье [Определение и изменение фильтра соединения между статьями публикации слиянием](define-and-modify-a-join-filter-between-merge-articles.md).</span><span class="sxs-lookup"><span data-stu-id="35800-120">For more information, see [Define and Modify a Join Filter Between Merge Articles](define-and-modify-a-join-filter-between-merge-articles.md).</span></span>  
  
##  <a name="using-sql-server-management-studio"></a><a name="SSMSProcedure"></a> <span data-ttu-id="35800-121">Использование среды SQL Server Management Studio</span><span class="sxs-lookup"><span data-stu-id="35800-121">Using SQL Server Management Studio</span></span>  
 <span data-ttu-id="35800-122">Операции определения, изменения и удаления статических строковых фильтров выполняются на странице **Фильтрация строк таблицы** мастера создания публикаций или на странице **Фильтрация строк** диалогового окна **Свойства публикации — \<Publication>** .</span><span class="sxs-lookup"><span data-stu-id="35800-122">Define, modify, and delete static row filters on the **Filter Table Rows** page of the New Publication Wizard or the **Filter Rows** page of the **Publication Properties - \<Publication>** dialog box.</span></span> <span data-ttu-id="35800-123">Дополнительные сведения об использовании мастера и доступе к этому диалоговому окну см. в статьях [Создание публикации](create-a-publication.md) и [Просмотр и изменение свойств публикации](view-and-modify-publication-properties.md).</span><span class="sxs-lookup"><span data-stu-id="35800-123">For more information about using the wizard and accessing the dialog box, see [Create a Publication](create-a-publication.md) and [View and Modify Publication Properties](view-and-modify-publication-properties.md).</span></span>  
  
#### <a name="to-define-a-static-row-filter"></a><span data-ttu-id="35800-124">Определение статического фильтра строк</span><span class="sxs-lookup"><span data-stu-id="35800-124">To define a static row filter</span></span>  
  
1.  <span data-ttu-id="35800-125">Действия, выполняемые на странице **Фильтрация строк таблицы** мастера создания публикаций или на странице **Фильтрация строк** диалогового окна **Свойства публикации — \<Publication>** , зависят от типа публикации:</span><span class="sxs-lookup"><span data-stu-id="35800-125">On the **Filter Table Rows** page of the New Publication Wizard or the **Filter Rows** page of the **Publication Properties - \<Publication>** dialog box, the action you take depends on the type of publication:</span></span>  
  
    -   <span data-ttu-id="35800-126">Для публикации моментальных снимков или публикации транзакций щелкните **Добавить**.</span><span class="sxs-lookup"><span data-stu-id="35800-126">For a snapshot or transactional publication, click **Add**.</span></span>  
  
    -   <span data-ttu-id="35800-127">Для публикации слиянием щелкните **Добавить**, а затем щелкните **Добавить фильтр**.</span><span class="sxs-lookup"><span data-stu-id="35800-127">For a merge publication, click **Add**, and then click **Add Filter**.</span></span>  
  
2.  <span data-ttu-id="35800-128">В окне **Добавление фильтра** выберите в раскрывающемся списке таблицу для фильтрации.</span><span class="sxs-lookup"><span data-stu-id="35800-128">In the **Add Filter** dialog box, select a table to filter from the drop-down list box.</span></span>  
  
3.  <span data-ttu-id="35800-129">Создайте инструкцию фильтра в текстовом поле **Инструкция фильтра** .</span><span class="sxs-lookup"><span data-stu-id="35800-129">Create a filter statement in the **Filter statement** text area.</span></span> <span data-ttu-id="35800-130">Можно ввести текст в тестовом поле или перетащить столбцы из списка **Столбцы** .</span><span class="sxs-lookup"><span data-stu-id="35800-130">You can type directly in the text area, and you can also drag and drop columns from the **Columns** list box.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="35800-131">В предложении WHERE необходимо использовать имена, состоящие из двух частей; имена, состоящие из трех или четырех частей, не поддерживаются.</span><span class="sxs-lookup"><span data-stu-id="35800-131">The WHERE clause should use two-part naming; three-part naming and four-part naming are not supported.</span></span> <span data-ttu-id="35800-132">Если публикация является публикацией от издателя Oracle, предложение WHERE должно соответствовать синтаксису Oracle.</span><span class="sxs-lookup"><span data-stu-id="35800-132">If the publication is from an Oracle Publisher, the WHERE clause must be compliant with Oracle syntax.</span></span>  
  
    -   <span data-ttu-id="35800-133">Текстовая область **Инструкция фильтра** содержит текст по умолчанию, в виде:</span><span class="sxs-lookup"><span data-stu-id="35800-133">The **Filter statement** text area includes the default text, which is in the form of:</span></span>  
  
        ```sql  
        SELECT <published_columns> FROM [schema].[tablename] WHERE  
        ```  
  
    -   <span data-ttu-id="35800-134">Текст по умолчанию изменять нельзя. Введите предложение фильтра после ключевого слова WHERE, используя стандартный синтаксис SQL.</span><span class="sxs-lookup"><span data-stu-id="35800-134">The default text cannot be changed; type the filter clause after the WHERE keyword using standard SQL syntax.</span></span> <span data-ttu-id="35800-135">Законченное предложение фильтра должно выглядеть следующим образом:</span><span class="sxs-lookup"><span data-stu-id="35800-135">The complete filter clause would appear like:</span></span>  
  
        ```sql  
        SELECT <published_columns> FROM [HumanResources].[Employee] WHERE [LoginID] = 'adventure-works\ranjit0'  
        ```  
  
    -   <span data-ttu-id="35800-136">В статическом фильтре строк может содержаться определяемая пользователем функция.</span><span class="sxs-lookup"><span data-stu-id="35800-136">A static row filter can include a user-defined function.</span></span> <span data-ttu-id="35800-137">Полное предложение фильтра для статического фильтра строк с определяемой пользователем функцией должно выглядеть следующим образом:</span><span class="sxs-lookup"><span data-stu-id="35800-137">The complete filter clause for a static row filter with a user-defined function would appear like:</span></span>  
  
        ```sql  
        SELECT <published_columns> FROM [Sales].[SalesOrderHeader] WHERE MyFunction([Freight]) > 100  
        ```  
  
4.  [!INCLUDE[clickOK](../../../includes/clickok-md.md)]  
  
5.  <span data-ttu-id="35800-138">Если вы находитесь в диалоговом окне **Свойства публикации — \<Publication>** , нажмите кнопку **OK**, чтобы сохранить результаты и закрыть диалоговое окно.</span><span class="sxs-lookup"><span data-stu-id="35800-138">If you are in the **Publication Properties - \<Publication>** dialog box, click **OK** to save and close the dialog box.</span></span>  
  
#### <a name="to-modify-a-static-row-filter"></a><span data-ttu-id="35800-139">Изменение статического фильтра строк</span><span class="sxs-lookup"><span data-stu-id="35800-139">To modify a static row filter</span></span>  
  
1.  <span data-ttu-id="35800-140">На странице **Фильтрация строк таблицы** мастера создания публикаций или на странице **Фильтрация строк** диалогового окна **Свойства публикации — \<Publication>** выберите фильтр в области **Отфильтрованные таблицы**, а затем нажмите кнопку **Изменить**.</span><span class="sxs-lookup"><span data-stu-id="35800-140">On the **Filter Table Rows** page of the New Publication Wizard or the **Filter Rows** page of the **Publication Properties - \<Publication>** dialog box, select a filter in the **Filtered Tables** pane, and then click **Edit**.</span></span>  
  
2.  <span data-ttu-id="35800-141">В окне **Изменение фильтра** измените фильтр.</span><span class="sxs-lookup"><span data-stu-id="35800-141">In the **Edit Filter** dialog box, modify the filter.</span></span>  
  
3.  [!INCLUDE[clickOK](../../../includes/clickok-md.md)]  
  
#### <a name="to-delete-a-static-row-filter"></a><span data-ttu-id="35800-142">Удаление статического фильтра строк</span><span class="sxs-lookup"><span data-stu-id="35800-142">To delete a static row filter</span></span>  
  
1.  <span data-ttu-id="35800-143">На странице **Фильтрация строк таблицы** мастера создания публикаций или на странице **Фильтрация строк** диалогового окна **Свойства публикации — \<Publication>** выберите фильтр в области **Отфильтрованные таблицы**, а затем нажмите кнопку **Удалить**.</span><span class="sxs-lookup"><span data-stu-id="35800-143">On the **Filter Table Rows** page of the New Publication Wizard or the **Filter Rows** page of the **Publication Properties - \<Publication>** dialog box, select a filter in the **Filtered Tables** pane, and then click **Delete**.</span></span>  
  
##  <a name="using-transact-sql"></a><a name="TsqlProcedure"></a> <span data-ttu-id="35800-144">Использование Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="35800-144">Using Transact-SQL</span></span>  
 <span data-ttu-id="35800-145">При создании статей таблиц можно определить предложение WHERE для фильтрации строк из статьи.</span><span class="sxs-lookup"><span data-stu-id="35800-145">When creating table articles, you can define a WHERE clause to filter rows out of an article.</span></span> <span data-ttu-id="35800-146">Также можно изменить фильтр строк уже после того, как он был определен.</span><span class="sxs-lookup"><span data-stu-id="35800-146">You can also change a row filter after it has been defined.</span></span> <span data-ttu-id="35800-147">Статические фильтры строк можно создавать и изменять программно, с помощью хранимых процедур репликации.</span><span class="sxs-lookup"><span data-stu-id="35800-147">Static row filters can be created and modified programmatically using replication stored procedures.</span></span>  
  
#### <a name="to-define-a-static-row-filter-for-a-snapshot-or-transactional-publication"></a><span data-ttu-id="35800-148">Определение статического фильтра строк для публикации транзакций или публикации моментальных снимков</span><span class="sxs-lookup"><span data-stu-id="35800-148">To define a static row filter for a snapshot or transactional publication</span></span>  
  
1.  <span data-ttu-id="35800-149">Определите статью для фильтрации.</span><span class="sxs-lookup"><span data-stu-id="35800-149">Define the article to filter.</span></span> <span data-ttu-id="35800-150">Дополнительные сведения см. в статье [определить статью](define-an-article.md).</span><span class="sxs-lookup"><span data-stu-id="35800-150">For more information, see [Define an Article](define-an-article.md).</span></span>  
  
2.  <span data-ttu-id="35800-151">В издателе в базе данных публикации выполните процедуру [sp_articlefilter &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-articlefilter-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="35800-151">At the Publisher on the publication database, execute [sp_articlefilter &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-articlefilter-transact-sql).</span></span> <span data-ttu-id="35800-152">Укажите имя статьи в параметре **\@article**, имя публикации в параметре **\@publication**, имя фильтра в параметре **\@filter_name** и предложение фильтрации в параметре **\@filter_clause** (не включая `WHERE`).</span><span class="sxs-lookup"><span data-stu-id="35800-152">Specify the name of the article for **\@article**, the name of the publication for **\@publication**, a name for the filter for **\@filter_name**, and the filtering clause for **\@filter_clause** (not including `WHERE`).</span></span>  
  
3.  <span data-ttu-id="35800-153">При необходимости определения фильтра столбцов см. раздел [Определение или изменение фильтра столбцов](define-and-modify-a-column-filter.md).</span><span class="sxs-lookup"><span data-stu-id="35800-153">If a column filter must still be defined, see [Define and Modify a Column Filter](define-and-modify-a-column-filter.md).</span></span> <span data-ttu-id="35800-154">В противном случае выполнение процедуру [sp_articleview (Transact-SQL)](/sql/relational-databases/system-stored-procedures/sp-articleview-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="35800-154">Otherwise, execute [sp_articleview &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-articleview-transact-sql).</span></span> <span data-ttu-id="35800-155">В параметре **\@publication** укажите имя публикации, в параметре **\@article** — имя фильтруемой статьи, а в параметре **\@filter_clause** — условие фильтра, указанное в шаге 2.</span><span class="sxs-lookup"><span data-stu-id="35800-155">Specify the publication name for **\@publication**, the name of the filtered article for **\@article**, and the filter clause specified in step 2 for **\@filter_clause**.</span></span> <span data-ttu-id="35800-156">Будут созданы объекты синхронизации для отфильтрованной статьи.</span><span class="sxs-lookup"><span data-stu-id="35800-156">This creates the synchronization objects for the filtered article.</span></span>  
  
#### <a name="to-modify-a-static-row-filter-for-a-snapshot-or-transactional-publication"></a><span data-ttu-id="35800-157">Изменение статического фильтра строк для моментального снимка публикации транзакций</span><span class="sxs-lookup"><span data-stu-id="35800-157">To modify a static row filter for a snapshot or transactional publication</span></span>  
  
1.  <span data-ttu-id="35800-158">В издателе в базе данных публикации выполните процедуру [sp_articlefilter &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-articlefilter-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="35800-158">At the Publisher on the publication database, execute [sp_articlefilter &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-articlefilter-transact-sql).</span></span> <span data-ttu-id="35800-159">Укажите имя статьи в параметре **\@article**, имя публикации в параметре **\@publication**, имя фильтра в параметре **\@filter_name** и новое предложение фильтрации в параметре **\@filter_clause** (не включая `WHERE`).</span><span class="sxs-lookup"><span data-stu-id="35800-159">Specify the name of the article for **\@article**, the name of the publication for **\@publication**, a name for the new filter for **\@filter_name**, and the new filtering clause for **\@filter_clause** (not including `WHERE`).</span></span> <span data-ttu-id="35800-160">Так как в результате этого изменения данные в существующей подписке станут недопустимыми, укажите значение **1** в параметре **\@force_reinit_subscription**.</span><span class="sxs-lookup"><span data-stu-id="35800-160">Because this change will invalidate data in existing subscriptions, specify a value of **1** for **\@force_reinit_subscription**.</span></span>  
  
2.  <span data-ttu-id="35800-161">В издателе в базе данных публикации выполните процедуру [sp_articleview &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-articleview-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="35800-161">At the Publisher on the publication database, execute [sp_articleview &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-articleview-transact-sql).</span></span> <span data-ttu-id="35800-162">В параметре **\@publication** укажите имя публикации, в параметре **\@article** — имя фильтруемой статьи, а в параметре **\@filter_clause** — условие фильтра, указанное в шаге 1.</span><span class="sxs-lookup"><span data-stu-id="35800-162">Specify the publication name for **\@publication**, the name of the filtered article for **\@article**, and the filter clause specified in step 1 for **\@filter_clause**.</span></span> <span data-ttu-id="35800-163">В результате будет повторно создано представление, определяющее опубликованную статью.</span><span class="sxs-lookup"><span data-stu-id="35800-163">This re-creates the view that defines the filtered article.</span></span>  
  
3.  <span data-ttu-id="35800-164">Чтобы сформировать обновленный моментальный снимок, перезапустите задание агента моментальных снимков для публикации.</span><span class="sxs-lookup"><span data-stu-id="35800-164">Rerun the Snapshot Agent job for the publication to generate an updated snapshot.</span></span> <span data-ttu-id="35800-165">Дополнительные сведения см. в разделе [Create and Apply the Initial Snapshot](../create-and-apply-the-initial-snapshot.md).</span><span class="sxs-lookup"><span data-stu-id="35800-165">For more information, see [Create and Apply the Initial Snapshot](../create-and-apply-the-initial-snapshot.md).</span></span>  
  
4.  <span data-ttu-id="35800-166">Повторная инициализация подписок.</span><span class="sxs-lookup"><span data-stu-id="35800-166">Reinitialize subscriptions.</span></span> <span data-ttu-id="35800-167">Дополнительные сведения см. в статье [Повторная инициализация подписок](../reinitialize-subscriptions.md).</span><span class="sxs-lookup"><span data-stu-id="35800-167">For more information, see [Reinitialize Subscriptions](../reinitialize-subscriptions.md).</span></span>  
  
#### <a name="to-delete-a-static-row-filter-for-a-snapshot-or-transactional-publication"></a><span data-ttu-id="35800-168">Удаление статического фильтра строк для моментального снимка публикации транзакций</span><span class="sxs-lookup"><span data-stu-id="35800-168">To delete a static row filter for a snapshot or transactional publication</span></span>  
  
1.  <span data-ttu-id="35800-169">В издателе в базе данных публикации выполните процедуру [sp_articlefilter &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-articlefilter-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="35800-169">At the Publisher on the publication database, execute [sp_articlefilter &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-articlefilter-transact-sql).</span></span> <span data-ttu-id="35800-170">Укажите имя статьи в параметре **\@article**, имя публикации в параметре **\@publication**, значение NULL в параметре **\@filter_name** и NULL в параметре **\@filter_clause**.</span><span class="sxs-lookup"><span data-stu-id="35800-170">Specify the name of the article for **\@article**, the name of the publication for **\@publication**, a value of NULL for **\@filter_name**, and a value of NULL for **\@filter_clause**.</span></span> <span data-ttu-id="35800-171">Так как в результате этого изменения данные в существующей подписке станут недопустимыми, укажите значение **1** в параметре **\@force_reinit_subscription**.</span><span class="sxs-lookup"><span data-stu-id="35800-171">Because this change will invalidate data in existing subscriptions, specify a value of **1** for **\@force_reinit_subscription**.</span></span>  
  
2.  <span data-ttu-id="35800-172">Чтобы сформировать обновленный моментальный снимок, перезапустите задание агента моментальных снимков для публикации.</span><span class="sxs-lookup"><span data-stu-id="35800-172">Rerun the Snapshot Agent job for the publication to generate an updated snapshot.</span></span> <span data-ttu-id="35800-173">Дополнительные сведения см. в разделе [Create and Apply the Initial Snapshot](../create-and-apply-the-initial-snapshot.md).</span><span class="sxs-lookup"><span data-stu-id="35800-173">For more information, see [Create and Apply the Initial Snapshot](../create-and-apply-the-initial-snapshot.md).</span></span>  
  
3.  <span data-ttu-id="35800-174">Повторная инициализация подписок.</span><span class="sxs-lookup"><span data-stu-id="35800-174">Reinitialize subscriptions.</span></span> <span data-ttu-id="35800-175">Дополнительные сведения см. в статье [Повторная инициализация подписок](../reinitialize-subscriptions.md).</span><span class="sxs-lookup"><span data-stu-id="35800-175">For more information, see [Reinitialize Subscriptions](../reinitialize-subscriptions.md).</span></span>  
  
#### <a name="to-define-a-static-row-filter-for-a-merge-publication"></a><span data-ttu-id="35800-176">Определение статического фильтра строк для публикации слиянием</span><span class="sxs-lookup"><span data-stu-id="35800-176">To define a static row filter for a merge publication</span></span>  
  
1.  <span data-ttu-id="35800-177">В базе данных публикации на издателе выполните процедуру [sp_addmergearticle (Transact-SQL)](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="35800-177">At the Publisher on the publication database, execute [sp_addmergearticle &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql).</span></span> <span data-ttu-id="35800-178">Укажите предложение фильтрации в параметре **\@subset_filterclause** (не включая `WHERE`).</span><span class="sxs-lookup"><span data-stu-id="35800-178">Specify the filtering clause for **\@subset_filterclause** (not including `WHERE`).</span></span> <span data-ttu-id="35800-179">Дополнительные сведения см. в статье [определить статью](define-an-article.md).</span><span class="sxs-lookup"><span data-stu-id="35800-179">For more information, see [Define an Article](define-an-article.md).</span></span>  
  
2.  <span data-ttu-id="35800-180">При необходимости определения фильтра столбцов см. раздел [Определение или изменение фильтра столбцов](define-and-modify-a-column-filter.md).</span><span class="sxs-lookup"><span data-stu-id="35800-180">If a column filter must still be defined, see [Define and Modify a Column Filter](define-and-modify-a-column-filter.md).</span></span>  
  
#### <a name="to-modify-a-static-row-filter-for-a-merge-publication"></a><span data-ttu-id="35800-181">Изменение статического фильтра строк для публикации слиянием</span><span class="sxs-lookup"><span data-stu-id="35800-181">To modify a static row filter for a merge publication</span></span>  
  
1.  <span data-ttu-id="35800-182">В базе данных публикации на издателе выполните процедуру [sp_changemergearticle (Transact-SQL)](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="35800-182">At the Publisher on the publication database, execute [sp_changemergearticle &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql).</span></span> <span data-ttu-id="35800-183">Укажите имя публикации в параметре **\@publication**, имя фильтруемой статьи в параметре **\@article**, значение свойства **subset_filterclause** в параметре **\@property** и новое предложение фильтра в параметре **\@value** (не включая `WHERE`).</span><span class="sxs-lookup"><span data-stu-id="35800-183">Specify the publication name for **\@publication**, the name of the filtered article for **\@article**, a value of **subset_filterclause** for **\@property**, and the new filtering clause for **\@value** (not including `WHERE`).</span></span> <span data-ttu-id="35800-184">Так как в результате этого изменения данные в существующих подписках станут недопустимыми, укажите значение 1 в параметре **\@force_reinit_subscription**.</span><span class="sxs-lookup"><span data-stu-id="35800-184">Because this change will invalidate data in existing subscriptions, specify a value of 1 for **\@force_reinit_subscription**.</span></span>  
  
2.  <span data-ttu-id="35800-185">Чтобы сформировать обновленный моментальный снимок, перезапустите задание агента моментальных снимков для публикации.</span><span class="sxs-lookup"><span data-stu-id="35800-185">Rerun the Snapshot Agent job for the publication to generate an updated snapshot.</span></span> <span data-ttu-id="35800-186">Дополнительные сведения см. в разделе [Create and Apply the Initial Snapshot](../create-and-apply-the-initial-snapshot.md).</span><span class="sxs-lookup"><span data-stu-id="35800-186">For more information, see [Create and Apply the Initial Snapshot](../create-and-apply-the-initial-snapshot.md).</span></span>  
  
3.  <span data-ttu-id="35800-187">Повторная инициализация подписок.</span><span class="sxs-lookup"><span data-stu-id="35800-187">Reinitialize subscriptions.</span></span> <span data-ttu-id="35800-188">Дополнительные сведения см. в статье [Повторная инициализация подписок](../reinitialize-subscriptions.md).</span><span class="sxs-lookup"><span data-stu-id="35800-188">For more information, see [Reinitialize Subscriptions](../reinitialize-subscriptions.md).</span></span>  
  
###  <a name="examples-transact-sql"></a><a name="TsqlExample"></a> <span data-ttu-id="35800-189">Примеры (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="35800-189">Examples (Transact-SQL)</span></span>  
 <span data-ttu-id="35800-190">В этом примере репликации транзакций статья фильтруется горизонтально, чтобы удалить все неподдерживаемые продукты.</span><span class="sxs-lookup"><span data-stu-id="35800-190">In this transactional replication example, the article is filtered horizontally to remove all discontinued products.</span></span>  
  
 [!code-sql[HowTo#sp_AddTranArticle](../../../snippets/tsql/SQL15/replication/howto/tsql/createtranpub.sql#sp_addtranarticle)]  
  
 <span data-ttu-id="35800-191">В этом примере репликации слиянием статьи фильтруются горизонтально, чтобы возвратить только строки, связанные с указанным менеджером по продажам.</span><span class="sxs-lookup"><span data-stu-id="35800-191">In this merge replication example, the articles are filtered horizontally to return only rows that belong to the specified salesperson.</span></span> <span data-ttu-id="35800-192">Также используется фильтр соединения.</span><span class="sxs-lookup"><span data-stu-id="35800-192">A join filter is also used.</span></span> <span data-ttu-id="35800-193">Дополнительные сведения см. в статье [Определение и изменение фильтра соединения между статьями публикации слиянием](define-and-modify-a-join-filter-between-merge-articles.md).</span><span class="sxs-lookup"><span data-stu-id="35800-193">For more information, see [Define and Modify a Join Filter Between Merge Articles](define-and-modify-a-join-filter-between-merge-articles.md).</span></span>  
  
 [!code-sql[HowTo#sp_AddMergeArticle](../../../snippets/tsql/SQL15/replication/howto/tsql/createmergepub.sql#sp_addmergearticle)]  
  
## <a name="see-also"></a><span data-ttu-id="35800-194">См. также:</span><span class="sxs-lookup"><span data-stu-id="35800-194">See Also</span></span>  
 <span data-ttu-id="35800-195">[Определение и изменение параметризованного фильтра строк для статьи публикации слиянием](define-and-modify-a-parameterized-row-filter-for-a-merge-article.md) </span><span class="sxs-lookup"><span data-stu-id="35800-195">[Define and Modify a Parameterized Row Filter for a Merge Article](define-and-modify-a-parameterized-row-filter-for-a-merge-article.md) </span></span>  
 <span data-ttu-id="35800-196">[Изменение свойств публикации и статьи](change-publication-and-article-properties.md) </span><span class="sxs-lookup"><span data-stu-id="35800-196">[Change Publication and Article Properties](change-publication-and-article-properties.md) </span></span>  
 <span data-ttu-id="35800-197">[Фильтрация опубликованных данных](filter-published-data.md) </span><span class="sxs-lookup"><span data-stu-id="35800-197">[Filter Published Data](filter-published-data.md) </span></span>  
 [<span data-ttu-id="35800-198">Фильтрация опубликованных данных для репликации слиянием</span><span class="sxs-lookup"><span data-stu-id="35800-198">Filter Published Data for Merge Replication</span></span>](../merge/filter-published-data-for-merge-replication.md)  
  
  
