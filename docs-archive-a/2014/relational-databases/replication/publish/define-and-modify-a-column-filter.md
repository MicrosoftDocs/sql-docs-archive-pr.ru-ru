---
title: Определение или изменение фильтра столбцов | Документация Майкрософт
ms.custom: ''
ms.date: 06/14/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- filters [SQL Server replication], column
- modifying filters, column
- modifying filters
- column filters [SQL Server replication]
ms.assetid: d7c3186a-9a8c-45d8-ab34-05beec4c26dd
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 3a655976f925f83d8c9446cab99016f32ab14887
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87668774"
---
# <a name="define-and-modify-a-column-filter"></a><span data-ttu-id="b3a2e-102">Определение или изменение фильтра столбцов</span><span class="sxs-lookup"><span data-stu-id="b3a2e-102">Define and Modify a Column Filter</span></span>
  <span data-ttu-id="b3a2e-103">В этом разделе описывается определение и изменение фильтра столбцов [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] при помощи среды [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)] или [!INCLUDE[tsql](../../../includes/tsql-md.md)].</span><span class="sxs-lookup"><span data-stu-id="b3a2e-103">This topic describes how to define and modify a column filter in [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] by using [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)] or [!INCLUDE[tsql](../../../includes/tsql-md.md)].</span></span>  
  
 <span data-ttu-id="b3a2e-104">**В этом разделе**</span><span class="sxs-lookup"><span data-stu-id="b3a2e-104">**In This Topic**</span></span>  
  
-   <span data-ttu-id="b3a2e-105">**Перед началом работы**</span><span class="sxs-lookup"><span data-stu-id="b3a2e-105">**Before you begin:**</span></span>  
  
     [<span data-ttu-id="b3a2e-106">Ограничения</span><span class="sxs-lookup"><span data-stu-id="b3a2e-106">Limitations and Restrictions</span></span>](#Restrictions)  
  
-   <span data-ttu-id="b3a2e-107">**Для определения и изменения фильтра столбцов используется:**</span><span class="sxs-lookup"><span data-stu-id="b3a2e-107">**To define and modify a column filter, using:**</span></span>  
  
     [<span data-ttu-id="b3a2e-108">Среда SQL Server Management Studio</span><span class="sxs-lookup"><span data-stu-id="b3a2e-108">SQL Server Management Studio</span></span>](#SSMSProcedure)  
  
     [<span data-ttu-id="b3a2e-109">Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="b3a2e-109">Transact-SQL</span></span>](#TsqlProcedure)  
  
##  <a name="before-you-begin"></a><a name="BeforeYouBegin"></a> <span data-ttu-id="b3a2e-110">Перед началом</span><span class="sxs-lookup"><span data-stu-id="b3a2e-110">Before You Begin</span></span>  
  
###  <a name="limitations-and-restrictions"></a><a name="Restrictions"></a> <span data-ttu-id="b3a2e-111">Ограничения</span><span class="sxs-lookup"><span data-stu-id="b3a2e-111">Limitations and Restrictions</span></span>  
  
-   <span data-ttu-id="b3a2e-112">К некоторым столбцам фильтрация не может применяться. Дополнительные сведения см. в статье [Фильтрация опубликованных данных](filter-published-data.md).</span><span class="sxs-lookup"><span data-stu-id="b3a2e-112">Some columns cannot be filtered; for more information, see [Filter Published Data](filter-published-data.md).</span></span> <span data-ttu-id="b3a2e-113">При изменении фильтра столбцов после инициализации подписок необходимо создать новый моментальный снимок и выполнить повторную инициализацию всех подписок после выполнения изменений.</span><span class="sxs-lookup"><span data-stu-id="b3a2e-113">If you modify a column filter after subscriptions have been initialized, you must generate a new snapshot and reinitialize all subscriptions after making the change.</span></span> <span data-ttu-id="b3a2e-114">Дополнительные сведения о требованиях к изменениям свойств см. в статье [Изменение свойств публикации и статьи](change-publication-and-article-properties.md).</span><span class="sxs-lookup"><span data-stu-id="b3a2e-114">For more information about requirements for property changes, see [Change Publication and Article Properties](change-publication-and-article-properties.md).</span></span>  
  
##  <a name="using-sql-server-management-studio"></a><a name="SSMSProcedure"></a> <span data-ttu-id="b3a2e-115">Использование среды SQL Server Management Studio</span><span class="sxs-lookup"><span data-stu-id="b3a2e-115">Using SQL Server Management Studio</span></span>  
 <span data-ttu-id="b3a2e-116">Определение фильтров столбцов выполняется на странице **Статьи** мастера создания публикации.</span><span class="sxs-lookup"><span data-stu-id="b3a2e-116">Define column filters on the **Articles** page of the New Publication Wizard.</span></span> <span data-ttu-id="b3a2e-117">Дополнительные сведения об использовании мастера создания публикации см. в статье [Создание публикации](create-a-publication.md).</span><span class="sxs-lookup"><span data-stu-id="b3a2e-117">For more information about using the New Publication Wizard, see [Create a Publication](create-a-publication.md).</span></span>  
  
 <span data-ttu-id="b3a2e-118">Определите и измените фильтры столбцов на странице **Статьи** диалогового окна **Свойства публикации — \<Publication>** .</span><span class="sxs-lookup"><span data-stu-id="b3a2e-118">Define and modify column filters on the **Articles** page of the **Publication Properties - \<Publication>** dialog box.</span></span> <span data-ttu-id="b3a2e-119">Дополнительные сведения об изменении свойств публикаций и статей см. в [этой статье](view-and-modify-publication-properties.md).</span><span class="sxs-lookup"><span data-stu-id="b3a2e-119">For more information about publication and article properties, see [View and Modify Publication Properties](view-and-modify-publication-properties.md).</span></span>  
  
#### <a name="to-define-a-column-filter"></a><span data-ttu-id="b3a2e-120">Определение фильтра столбцов</span><span class="sxs-lookup"><span data-stu-id="b3a2e-120">To define a column filter</span></span>  
  
1.  <span data-ttu-id="b3a2e-121">На странице **Статьи** мастера создания публикации раскройте таблицу, которую необходимо отфильтровать, на панели **Объекты для публикации** .</span><span class="sxs-lookup"><span data-stu-id="b3a2e-121">On the **Articles** page of the New Publication Wizard, expand the table to be filtered in the **Objects to publish** pane.</span></span>  
  
2.  <span data-ttu-id="b3a2e-122">Снимите флажки рядом со столбцами, которые необходимо отфильтровать.</span><span class="sxs-lookup"><span data-stu-id="b3a2e-122">Clear the check box next to each column you want to filter.</span></span>  
  
#### <a name="to-modify-column-filtering"></a><span data-ttu-id="b3a2e-123">Изменение параметров фильтрации столбцов</span><span class="sxs-lookup"><span data-stu-id="b3a2e-123">To modify column filtering</span></span>  
  
1.  <span data-ttu-id="b3a2e-124">На странице **Статьи** диалогового окна **Свойства публикации — \<Publication>** , на панели **Объекты для публикации** разверните таблицу, которую хотите отфильтровать.</span><span class="sxs-lookup"><span data-stu-id="b3a2e-124">On the **Articles** page of the **Publication Properties - \<Publication>** dialog box, expand the table to be filtered in the **Objects to publish** pane.</span></span>  
  
2.  <span data-ttu-id="b3a2e-125">Снимите флажки рядом со столбцами, которые необходимо отфильтровать, и проверьте, чтобы были установлены флажки для столбцов, которые должны быть включены в статью.</span><span class="sxs-lookup"><span data-stu-id="b3a2e-125">Clear the check box next to each column you want to filter, and ensure that the check box is selected for each column that should be included in the article.</span></span>  
  
3.  [!INCLUDE[clickOK](../../../includes/clickok-md.md)]  
  
##  <a name="using-transact-sql"></a><a name="TsqlProcedure"></a> <span data-ttu-id="b3a2e-126">Использование Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="b3a2e-126">Using Transact-SQL</span></span>  
 <span data-ttu-id="b3a2e-127">При создании статей таблицы можно определить столбцы, которые нужно включить в статью, и изменить эти столбцы после определения статьи.</span><span class="sxs-lookup"><span data-stu-id="b3a2e-127">When creating table articles, you can define which columns to include in the article and change the columns after the article has been defined.</span></span> <span data-ttu-id="b3a2e-128">Можно создать и изменить фильтруемые столбцы программно с помощью хранимых процедур репликации.</span><span class="sxs-lookup"><span data-stu-id="b3a2e-128">You can create and modify filtered columns programmatically using replication stored procedures.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="b3a2e-129">В следующей процедуре предполагается, что базовая таблица не изменилась.</span><span class="sxs-lookup"><span data-stu-id="b3a2e-129">The following procedures assume that the underlying table has not changed.</span></span> <span data-ttu-id="b3a2e-130">Сведения о репликации изменений, выполненных с помощью языка DDL, в опубликованные таблицы см. в статье [Внесение изменений в схемы баз данных публикации](make-schema-changes-on-publication-databases.md).</span><span class="sxs-lookup"><span data-stu-id="b3a2e-130">For information on replicating data definition language (DDL) changes to published tables, see [Make Schema Changes on Publication Databases](make-schema-changes-on-publication-databases.md).</span></span>  
  
#### <a name="to-define-a-column-filter-for-an-article-published-in-a-snapshot-or-transactional-publication"></a><span data-ttu-id="b3a2e-131">Определение фильтра столбца для статьи, опубликованной в публикации моментальных снимков или публикации транзакций</span><span class="sxs-lookup"><span data-stu-id="b3a2e-131">To define a column filter for an article published in a snapshot or transactional publication</span></span>  
  
1.  <span data-ttu-id="b3a2e-132">Определите статью для фильтрации.</span><span class="sxs-lookup"><span data-stu-id="b3a2e-132">Define the article to filter.</span></span> <span data-ttu-id="b3a2e-133">Дополнительные сведения см. в статье [определить статью](define-an-article.md).</span><span class="sxs-lookup"><span data-stu-id="b3a2e-133">For more information, see [Define an Article](define-an-article.md).</span></span>  
  
2.  <span data-ttu-id="b3a2e-134">На издателе в базе данных публикации выполните хранимую процедуру [sp_articlecolumn](/sql/relational-databases/system-stored-procedures/sp-articlecolumn-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="b3a2e-134">At the Publisher on the publication database, execute [sp_articlecolumn](/sql/relational-databases/system-stored-procedures/sp-articlecolumn-transact-sql).</span></span> <span data-ttu-id="b3a2e-135">Столбцы для включения в статью или удаления из нее будут определены.</span><span class="sxs-lookup"><span data-stu-id="b3a2e-135">This defines the columns to include or remove from the article.</span></span>  
  
    -   <span data-ttu-id="b3a2e-136">При публикации нескольких столбцов из таблицы с большим числом столбцов выполните хранимую процедуру [sp_articlecolumn](/sql/relational-databases/system-stored-procedures/sp-articlecolumn-transact-sql) один раз для каждого добавляемого столбца.</span><span class="sxs-lookup"><span data-stu-id="b3a2e-136">If publishing only a few columns from a table with many columns, execute [sp_articlecolumn](/sql/relational-databases/system-stored-procedures/sp-articlecolumn-transact-sql) once for each column being added.</span></span> <span data-ttu-id="b3a2e-137">Укажите имя столбца в параметре **\@column** и значение **add** в параметре **\@operation**.</span><span class="sxs-lookup"><span data-stu-id="b3a2e-137">Specify the column name for **\@column** and a value of **add** for **\@operation**.</span></span>  
  
    -   <span data-ttu-id="b3a2e-138">При публикации большинства столбцов таблицы с большим числом столбцов выполните хранимую процедуру [sp_articlecolumn](/sql/relational-databases/system-stored-procedures/sp-articlecolumn-transact-sql), указав значение **NULL** в параметре **\@column** и значение **add** в параметре **\@operation**, чтобы добавить все столбцы.</span><span class="sxs-lookup"><span data-stu-id="b3a2e-138">If publishing most of the columns in a table with many columns, execute [sp_articlecolumn](/sql/relational-databases/system-stored-procedures/sp-articlecolumn-transact-sql), specifying a value of **null** for **\@column** and a value of **add** for **\@operation** to add all columns.</span></span> <span data-ttu-id="b3a2e-139">Затем выполните хранимую процедуру [sp_articlecolumn](/sql/relational-databases/system-stored-procedures/sp-articlecolumn-transact-sql) один раз для каждого исключаемого столбца, указав значение **drop** в параметре **\@operation** и имя исключаемого столбца в параметре **\@column**.</span><span class="sxs-lookup"><span data-stu-id="b3a2e-139">Then execute [sp_articlecolumn](/sql/relational-databases/system-stored-procedures/sp-articlecolumn-transact-sql), once for each column being excluded, specifying a value of **drop** for **\@operation** and the excluded column name for **\@column**.</span></span>  
  
3.  <span data-ttu-id="b3a2e-140">В базе данных публикации на издателе выполните процедуру [sp_articleview](/sql/relational-databases/system-stored-procedures/sp-articleview-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="b3a2e-140">At the Publisher on the publication database, execute [sp_articleview](/sql/relational-databases/system-stored-procedures/sp-articleview-transact-sql).</span></span> <span data-ttu-id="b3a2e-141">Укажите имя публикации в параметре **\@publication**, а имя отфильтрованной статьи — в параметре **\@article**.</span><span class="sxs-lookup"><span data-stu-id="b3a2e-141">Specify the publication name for **\@publication** and the name of the filtered article for **\@article**.</span></span> <span data-ttu-id="b3a2e-142">Будут созданы объекты синхронизации для отфильтрованной статьи.</span><span class="sxs-lookup"><span data-stu-id="b3a2e-142">This creates the synchronization objects for the filtered article.</span></span>  
  
#### <a name="to-change-a-column-filter-to-include-additional-columns-for-an-article-published-in-a-snapshot-or-transactional-publication"></a><span data-ttu-id="b3a2e-143">Изменение фильтра столбца с целью включения дополнительных столбцов в статью, опубликованную в публикации моментальных снимков или публикации транзакций</span><span class="sxs-lookup"><span data-stu-id="b3a2e-143">To change a column filter to include additional columns for an article published in a snapshot or transactional publication</span></span>  
  
1.  <span data-ttu-id="b3a2e-144">На издателе в базе данных публикации выполните хранимую процедуру [sp_articlecolumn](/sql/relational-databases/system-stored-procedures/sp-articlecolumn-transact-sql) один раз для каждого добавляемого столбца.</span><span class="sxs-lookup"><span data-stu-id="b3a2e-144">At the Publisher on the publication database, execute [sp_articlecolumn](/sql/relational-databases/system-stored-procedures/sp-articlecolumn-transact-sql) once for each column being added.</span></span> <span data-ttu-id="b3a2e-145">Укажите имя столбца в параметре **\@column** и значение **add** в параметре **\@operation**.</span><span class="sxs-lookup"><span data-stu-id="b3a2e-145">Specify the column name for **\@column** and a value of **add** for **\@operation**.</span></span>  
  
2.  <span data-ttu-id="b3a2e-146">В базе данных публикации на издателе выполните процедуру [sp_articleview](/sql/relational-databases/system-stored-procedures/sp-articleview-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="b3a2e-146">At the Publisher on the publication database, execute [sp_articleview](/sql/relational-databases/system-stored-procedures/sp-articleview-transact-sql).</span></span> <span data-ttu-id="b3a2e-147">Укажите имя публикации в параметре **\@publication**, а имя отфильтрованной статьи — в параметре **\@article**.</span><span class="sxs-lookup"><span data-stu-id="b3a2e-147">Specify the publication name for **\@publication** and the name of the filtered article for **\@article**.</span></span> <span data-ttu-id="b3a2e-148">Если у публикации есть существующие подписки, укажите в параметре **\@change_active** значение **1**.</span><span class="sxs-lookup"><span data-stu-id="b3a2e-148">If the publication has existing subscriptions, specify a value of **1** for **\@change_active**.</span></span> <span data-ttu-id="b3a2e-149">Объекты синхронизации для отфильтрованной статьи при этом будут повторно созданы.</span><span class="sxs-lookup"><span data-stu-id="b3a2e-149">This re-creates the synchronization objects for the filtered article.</span></span>  
  
3.  <span data-ttu-id="b3a2e-150">Чтобы сформировать обновленный моментальный снимок, перезапустите задание агента моментальных снимков для публикации.</span><span class="sxs-lookup"><span data-stu-id="b3a2e-150">Rerun the Snapshot Agent job for the publication to generate an updated snapshot.</span></span>  
  
4.  <span data-ttu-id="b3a2e-151">Повторная инициализация подписок.</span><span class="sxs-lookup"><span data-stu-id="b3a2e-151">Reinitialize subscriptions.</span></span> <span data-ttu-id="b3a2e-152">Дополнительные сведения см. в статье [Повторная инициализация подписок](../reinitialize-subscriptions.md).</span><span class="sxs-lookup"><span data-stu-id="b3a2e-152">For more information, see [Reinitialize Subscriptions](../reinitialize-subscriptions.md).</span></span>  
  
#### <a name="to-change-a-column-filter-to-remove-columns-for-an-article-published-in-a-snapshot-or-transactional-publication"></a><span data-ttu-id="b3a2e-153">Изменение фильтра столбца с целью удаления столбцов из статьи, опубликованной в публикации моментальных снимков или публикации транзакций</span><span class="sxs-lookup"><span data-stu-id="b3a2e-153">To change a column filter to remove columns for an article published in a snapshot or transactional publication</span></span>  
  
1.  <span data-ttu-id="b3a2e-154">На издателе в базе данных публикации выполните хранимую процедуру [sp_articlecolumn](/sql/relational-databases/system-stored-procedures/sp-articlecolumn-transact-sql) один раз для каждого удаляемого столбца.</span><span class="sxs-lookup"><span data-stu-id="b3a2e-154">At the Publisher on the publication database, execute [sp_articlecolumn](/sql/relational-databases/system-stored-procedures/sp-articlecolumn-transact-sql) once for each column being removed.</span></span> <span data-ttu-id="b3a2e-155">Укажите имя столбца в параметре **\@column** и значение **drop** в параметре **\@operation**.</span><span class="sxs-lookup"><span data-stu-id="b3a2e-155">Specify the column name for **\@column** and a value of **drop** for **\@operation**.</span></span>  
  
2.  <span data-ttu-id="b3a2e-156">В базе данных публикации на издателе выполните процедуру [sp_articleview](/sql/relational-databases/system-stored-procedures/sp-articleview-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="b3a2e-156">At the Publisher on the publication database, execute [sp_articleview](/sql/relational-databases/system-stored-procedures/sp-articleview-transact-sql).</span></span> <span data-ttu-id="b3a2e-157">Укажите имя публикации в параметре **\@publication**, а имя отфильтрованной статьи — в параметре **\@article**.</span><span class="sxs-lookup"><span data-stu-id="b3a2e-157">Specify the publication name for **\@publication** and the name of the filtered article for **\@article**.</span></span> <span data-ttu-id="b3a2e-158">Если у публикации есть существующие подписки, укажите в параметре **\@change_active** значение **1**.</span><span class="sxs-lookup"><span data-stu-id="b3a2e-158">If the publication has existing subscriptions, specify a value of **1** for **\@change_active**.</span></span> <span data-ttu-id="b3a2e-159">Объекты синхронизации для отфильтрованной статьи при этом будут повторно созданы.</span><span class="sxs-lookup"><span data-stu-id="b3a2e-159">This re-creates the synchronization objects for the filtered article.</span></span>  
  
3.  <span data-ttu-id="b3a2e-160">Чтобы сформировать обновленный моментальный снимок, перезапустите задание агента моментальных снимков для публикации.</span><span class="sxs-lookup"><span data-stu-id="b3a2e-160">Rerun the Snapshot Agent job for the publication to generate an updated snapshot.</span></span>  
  
4.  <span data-ttu-id="b3a2e-161">Повторная инициализация подписок.</span><span class="sxs-lookup"><span data-stu-id="b3a2e-161">Reinitialize subscriptions.</span></span> <span data-ttu-id="b3a2e-162">Дополнительные сведения см. в статье [Повторная инициализация подписок](../reinitialize-subscriptions.md).</span><span class="sxs-lookup"><span data-stu-id="b3a2e-162">For more information, see [Reinitialize Subscriptions](../reinitialize-subscriptions.md).</span></span>  
  
#### <a name="to-define-a-column-filter-for-an-article-published-in-a-merge-publication"></a><span data-ttu-id="b3a2e-163">Определение фильтра столбца для статьи, опубликованной в публикации слиянием</span><span class="sxs-lookup"><span data-stu-id="b3a2e-163">To define a column filter for an article published in a merge publication</span></span>  
  
1.  <span data-ttu-id="b3a2e-164">Определите статью для фильтрации.</span><span class="sxs-lookup"><span data-stu-id="b3a2e-164">Define the article to filter.</span></span> <span data-ttu-id="b3a2e-165">Дополнительные сведения см. в статье [определить статью](define-an-article.md).</span><span class="sxs-lookup"><span data-stu-id="b3a2e-165">For more information, see [Define an Article](define-an-article.md).</span></span>  
  
2.  <span data-ttu-id="b3a2e-166">На издателе в базе данных публикации выполните хранимую процедуру [sp_mergearticlecolumn](/sql/relational-databases/system-stored-procedures/sp-mergearticlecolumn-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="b3a2e-166">At the Publisher on the publication database, execute [sp_mergearticlecolumn](/sql/relational-databases/system-stored-procedures/sp-mergearticlecolumn-transact-sql).</span></span> <span data-ttu-id="b3a2e-167">Столбцы для включения в статью или удаления из нее будут определены.</span><span class="sxs-lookup"><span data-stu-id="b3a2e-167">This defines the columns to include or remove from the article.</span></span>  
  
    -   <span data-ttu-id="b3a2e-168">При публикации нескольких столбцов таблицы с большим числом столбцов выполните хранимую процедуру [sp_mergearticlecolumn](/sql/relational-databases/system-stored-procedures/sp-mergearticlecolumn-transact-sql) один раз для каждого добавляемого столбца.</span><span class="sxs-lookup"><span data-stu-id="b3a2e-168">If publishing only a few columns from a table with many columns, execute [sp_mergearticlecolumn](/sql/relational-databases/system-stored-procedures/sp-mergearticlecolumn-transact-sql) once for each column being added.</span></span> <span data-ttu-id="b3a2e-169">Укажите имя столбца в параметре **\@column** и значение **add** в параметре **\@operation**.</span><span class="sxs-lookup"><span data-stu-id="b3a2e-169">Specify the column name for **\@column** and a value of **add** for **\@operation**.</span></span>  
  
    -   <span data-ttu-id="b3a2e-170">При публикации большинства столбцов таблицы с большим числом столбцов выполните хранимую процедуру [sp_mergearticlecolumn](/sql/relational-databases/system-stored-procedures/sp-mergearticlecolumn-transact-sql), указав значение **NULL** в параметре **\@column** и значение **add** в параметре **\@operation**, чтобы добавить все столбцы.</span><span class="sxs-lookup"><span data-stu-id="b3a2e-170">If publishing most of the columns in a table with many columns, execute [sp_mergearticlecolumn](/sql/relational-databases/system-stored-procedures/sp-mergearticlecolumn-transact-sql), specifying a value of **null** for **\@column** and a value of **add** for **\@operation** to add all columns.</span></span> <span data-ttu-id="b3a2e-171">Затем выполните хранимую процедуру [sp_mergearticlecolumn](/sql/relational-databases/system-stored-procedures/sp-mergearticlecolumn-transact-sql) один раз для каждого исключаемого столбца, указав значение **drop** в параметре **\@operation** и имя исключаемого столбца в параметре **\@column**.</span><span class="sxs-lookup"><span data-stu-id="b3a2e-171">Then execute [sp_mergearticlecolumn](/sql/relational-databases/system-stored-procedures/sp-mergearticlecolumn-transact-sql), once for each column being excluded, specifying a value of **drop** for **\@operation** and the excluded column name for **\@column**.</span></span>  
  
#### <a name="to-change-a-column-filter-to-include-additional-columns-for-an-article-published-in-a-merge-publication"></a><span data-ttu-id="b3a2e-172">Изменение фильтра столбца с целью включения дополнительных столбцов в статью, опубликованную в публикации слиянием</span><span class="sxs-lookup"><span data-stu-id="b3a2e-172">To change a column filter to include additional columns for an article published in a merge publication</span></span>  
  
1.  <span data-ttu-id="b3a2e-173">На издателе в базе данных публикации выполните хранимую процедуру [sp_mergearticlecolumn](/sql/relational-databases/system-stored-procedures/sp-mergearticlecolumn-transact-sql) один раз для каждого добавляемого столбца.</span><span class="sxs-lookup"><span data-stu-id="b3a2e-173">At the Publisher on the publication database, execute [sp_mergearticlecolumn](/sql/relational-databases/system-stored-procedures/sp-mergearticlecolumn-transact-sql) once for each column being added.</span></span> <span data-ttu-id="b3a2e-174">Укажите имя столбца в параметре **\@column**, значение **add** в параметре **\@operation** и значение **1** как в параметре **\@force_invalidate_snapshot**, так и в параметре **\@force_reinit_subscription**.</span><span class="sxs-lookup"><span data-stu-id="b3a2e-174">Specify the column name for **\@column**, a value of **add** for **\@operation** and a value of **1** for both **\@force_invalidate_snapshot** and **\@force_reinit_subscription**.</span></span>  
  
2.  <span data-ttu-id="b3a2e-175">Чтобы сформировать обновленный моментальный снимок, перезапустите задание агента моментальных снимков для публикации.</span><span class="sxs-lookup"><span data-stu-id="b3a2e-175">Rerun the Snapshot Agent job for the publication to generate an updated snapshot.</span></span>  
  
3.  <span data-ttu-id="b3a2e-176">Повторная инициализация подписок.</span><span class="sxs-lookup"><span data-stu-id="b3a2e-176">Reinitialize subscriptions.</span></span> <span data-ttu-id="b3a2e-177">Дополнительные сведения см. в статье [Повторная инициализация подписок](../reinitialize-subscriptions.md).</span><span class="sxs-lookup"><span data-stu-id="b3a2e-177">For more information, see [Reinitialize Subscriptions](../reinitialize-subscriptions.md).</span></span>  
  
#### <a name="to-change-a-column-filter-to-remove-columns-for-an-article-published-in-a-merge-publication"></a><span data-ttu-id="b3a2e-178">Изменение фильтра столбца с целью удаления столбцов из статьи, опубликованной в публикации слиянием</span><span class="sxs-lookup"><span data-stu-id="b3a2e-178">To change a column filter to remove columns for an article published in a merge publication</span></span>  
  
1.  <span data-ttu-id="b3a2e-179">На издателе в базе данных публикации выполните хранимую процедуру [sp_mergearticlecolumn](/sql/relational-databases/system-stored-procedures/sp-mergearticlecolumn-transact-sql) один раз для каждого удаляемого столбца.</span><span class="sxs-lookup"><span data-stu-id="b3a2e-179">At the Publisher on the publication database, execute [sp_mergearticlecolumn](/sql/relational-databases/system-stored-procedures/sp-mergearticlecolumn-transact-sql) once for each column being removed.</span></span> <span data-ttu-id="b3a2e-180">Укажите имя столбца в параметре **\@column**, значение **drop** в параметре **\@operation** и значение **1** как в параметре **\@force_invalidate_snapshot**, так и в параметре **\@force_reinit_subscription**.</span><span class="sxs-lookup"><span data-stu-id="b3a2e-180">Specify the column name for **\@column**, a value of **drop** for **\@operation** and a value of **1** for both **\@force_invalidate_snapshot** and **\@force_reinit_subscription**.</span></span>  
  
2.  <span data-ttu-id="b3a2e-181">Чтобы сформировать обновленный моментальный снимок, перезапустите задание агента моментальных снимков для публикации.</span><span class="sxs-lookup"><span data-stu-id="b3a2e-181">Rerun the Snapshot Agent job for the publication to generate an updated snapshot.</span></span>  
  
3.  <span data-ttu-id="b3a2e-182">Повторная инициализация подписок.</span><span class="sxs-lookup"><span data-stu-id="b3a2e-182">Reinitialize subscriptions.</span></span> <span data-ttu-id="b3a2e-183">Дополнительные сведения см. в статье [Повторная инициализация подписок](../reinitialize-subscriptions.md).</span><span class="sxs-lookup"><span data-stu-id="b3a2e-183">For more information, see [Reinitialize Subscriptions](../reinitialize-subscriptions.md).</span></span>  
  
###  <a name="example-transact-sql"></a><a name="TsqlExample"></a> <span data-ttu-id="b3a2e-184">Примеры (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="b3a2e-184">Example (Transact-SQL)</span></span>  
 <span data-ttu-id="b3a2e-185">В этом примере репликации транзакций столбец `DaysToManufacture` удаляется из статьи, основанной на таблице `Product` .</span><span class="sxs-lookup"><span data-stu-id="b3a2e-185">In this transactional replication example, the `DaysToManufacture` column is removed from an article based on the `Product` table.</span></span>  
  
 [!code-sql[HowTo#sp_AddTranArticle](../../../snippets/tsql/SQL15/replication/howto/tsql/createtranpub.sql#sp_addtranarticle)]  
  
 <span data-ttu-id="b3a2e-186">В этом примере репликации слиянием столбец `CreditCardApprovalCode` удаляется из статьи, основанной на таблице `SalesOrderHeader` .</span><span class="sxs-lookup"><span data-stu-id="b3a2e-186">In this merge replication example, the `CreditCardApprovalCode` column is removed from an article based on the `SalesOrderHeader` table.</span></span>  
  
 [!code-sql[HowTo#sp_AddMergeArticle](../../../snippets/tsql/SQL15/replication/howto/tsql/createmergepub.sql#sp_addmergearticle)]  
  
## <a name="see-also"></a><span data-ttu-id="b3a2e-187">См. также:</span><span class="sxs-lookup"><span data-stu-id="b3a2e-187">See Also</span></span>  
 <span data-ttu-id="b3a2e-188">[Изменение свойств публикации и статьи](change-publication-and-article-properties.md) </span><span class="sxs-lookup"><span data-stu-id="b3a2e-188">[Change Publication and Article Properties](change-publication-and-article-properties.md) </span></span>  
 <span data-ttu-id="b3a2e-189">[Фильтрация опубликованных данных](filter-published-data.md) </span><span class="sxs-lookup"><span data-stu-id="b3a2e-189">[Filter Published Data](filter-published-data.md) </span></span>  
 [<span data-ttu-id="b3a2e-190">Фильтрация опубликованных данных для репликации слиянием</span><span class="sxs-lookup"><span data-stu-id="b3a2e-190">Filter Published Data for Merge Replication</span></span>](../merge/filter-published-data-for-merge-replication.md)  
  
  
