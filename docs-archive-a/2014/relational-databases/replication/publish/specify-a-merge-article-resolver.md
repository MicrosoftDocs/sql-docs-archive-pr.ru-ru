---
title: Определение сопоставителя статей публикации слиянием | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- articles [SQL Server replication], conflict resolution
- conflict resolution [SQL Server replication], merge replication
- merge replication conflict resolution [SQL Server replication], merge article resolvers
ms.assetid: a40083b3-4f7b-4a25-a5a3-6ef67bdff440
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: ca32ef4936f31ca5c75dfc2df1eb965d17f7b039
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87733878"
---
# <a name="specify-a-merge-article-resolver"></a><span data-ttu-id="c78ed-102">Определение сопоставителя статей публикации слиянием</span><span class="sxs-lookup"><span data-stu-id="c78ed-102">Specify a Merge Article Resolver</span></span>
  <span data-ttu-id="c78ed-103">В этом разделе описывается определение арбитра статей публикации слиянием в [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] с помощью среды [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)] или [!INCLUDE[tsql](../../../includes/tsql-md.md)].</span><span class="sxs-lookup"><span data-stu-id="c78ed-103">This topic describes how to specify a merge article resolver in [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] by using [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)] or [!INCLUDE[tsql](../../../includes/tsql-md.md)].</span></span>  
  
 <span data-ttu-id="c78ed-104">**В этом разделе**</span><span class="sxs-lookup"><span data-stu-id="c78ed-104">**In This Topic**</span></span>  
  
-   <span data-ttu-id="c78ed-105">**Перед началом работы**</span><span class="sxs-lookup"><span data-stu-id="c78ed-105">**Before you begin:**</span></span>  
  
     [<span data-ttu-id="c78ed-106">Рекомендации</span><span class="sxs-lookup"><span data-stu-id="c78ed-106">Recommendations</span></span>](#Recommendations)  
  
-   <span data-ttu-id="c78ed-107">**Для определения арбитра статей публикации слиянием используется:**</span><span class="sxs-lookup"><span data-stu-id="c78ed-107">**To specify a merge article resolver, using:**</span></span>  
  
     [<span data-ttu-id="c78ed-108">Среда SQL Server Management Studio</span><span class="sxs-lookup"><span data-stu-id="c78ed-108">SQL Server Management Studio</span></span>](#SSMSProcedure)  
  
     [<span data-ttu-id="c78ed-109">Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="c78ed-109">Transact-SQL</span></span>](#TsqlProcedure)  
  
##  <a name="before-you-begin"></a><a name="BeforeYouBegin"></a> <span data-ttu-id="c78ed-110">Перед началом</span><span class="sxs-lookup"><span data-stu-id="c78ed-110">Before You Begin</span></span>  
  
###  <a name="recommendations"></a><a name="Recommendations"></a> <span data-ttu-id="c78ed-111">Рекомендации</span><span class="sxs-lookup"><span data-stu-id="c78ed-111">Recommendations</span></span>  
  
-   <span data-ttu-id="c78ed-112">Репликация слиянием допускает следующие типы сопоставителей статей:</span><span class="sxs-lookup"><span data-stu-id="c78ed-112">Merge replication allows the following types of article resolvers:</span></span>  
  
    -   <span data-ttu-id="c78ed-113">Сопоставитель по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="c78ed-113">The default resolver.</span></span> <span data-ttu-id="c78ed-114">Поведение сопоставителя по умолчанию зависит от того, является подписка клиентской или серверной.</span><span class="sxs-lookup"><span data-stu-id="c78ed-114">The behavior of the default resolver depends on whether the subscription is a client subscription or a server subscription.</span></span> <span data-ttu-id="c78ed-115">Дополнительные сведения об указании типа подписки см. в статье [Указание типа подписки слиянием и приоритета устранения конфликтов](../specify-a-merge-subscription-type-and-conflict-resolution-priority.md).</span><span class="sxs-lookup"><span data-stu-id="c78ed-115">For more information about specifying subscription type, see [Specify a Merge Subscription Type and Conflict Resolution Priority &#40;SQL Server Management Studio&#41;](../specify-a-merge-subscription-type-and-conflict-resolution-priority.md).</span></span>  
  
    -   <span data-ttu-id="c78ed-116">Пользовательский сопоставитель, который может быть обработчиком бизнес-логики (написанным на управляемом коде), или пользовательским, основанным на технологии COM.</span><span class="sxs-lookup"><span data-stu-id="c78ed-116">A custom resolver you have written, which can be a business logic handler (written in managed code) or a custom COM-based resolver.</span></span> <span data-ttu-id="c78ed-117">Дополнительные сведения см. в разделе [Advanced Merge Replication Conflict Detection and Resolution](../merge/advanced-merge-replication-conflict-detection-and-resolution.md).</span><span class="sxs-lookup"><span data-stu-id="c78ed-117">For more information, see [Advanced Merge Replication Conflict Detection and Resolution](../merge/advanced-merge-replication-conflict-detection-and-resolution.md).</span></span> <span data-ttu-id="c78ed-118">Если требуется применить пользовательскую логику, исполняемую для каждой реплицируемой строки, а не только для конфликтующих строк, см. раздел [Реализация обработчика бизнес-логики для статьи публикации слиянием](../implement-a-business-logic-handler-for-a-merge-article.md).</span><span class="sxs-lookup"><span data-stu-id="c78ed-118">If you need to implement custom logic that is executed for each replicated row, not just for conflicting rows, see [Implement a Business Logic Handler for a Merge Article](../implement-a-business-logic-handler-for-a-merge-article.md).</span></span>  
  
    -   <span data-ttu-id="c78ed-119">Стандартный арбитр, основанный на COM, который входит в состав [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="c78ed-119">A standard COM-based resolver, which is included with [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span>  
  
-   <span data-ttu-id="c78ed-120">Чтобы использовать сопоставитель, отличный от сопоставителя по умолчанию, необходимо скопировать сопоставитель на компьютер, на котором выполняется агент слияния, и зарегистрировать его (если используется обработчик бизнес-логики, он также должен быть зарегистрирован на издателе).</span><span class="sxs-lookup"><span data-stu-id="c78ed-120">To use a resolver other than the default resolver, you must copy the resolver to the computer on which the Merge Agent runs and register it (if you are using a business logic handler, it must also be registered at the Publisher).</span></span> <span data-ttu-id="c78ed-121">Агент слияния выполняется на:</span><span class="sxs-lookup"><span data-stu-id="c78ed-121">The Merge Agent runs at:</span></span>  
  
    -   <span data-ttu-id="c78ed-122">распространителе для принудительной подписки;</span><span class="sxs-lookup"><span data-stu-id="c78ed-122">The Distributor for a push subscription</span></span>  
  
    -   <span data-ttu-id="c78ed-123">подписчике для подписки по запросу;</span><span class="sxs-lookup"><span data-stu-id="c78ed-123">The Subscriber for a pull subscription</span></span>  
  
    -   <span data-ttu-id="c78ed-124">IIS-сервер [!INCLUDE[msCoName](../../../includes/msconame-md.md)] для подписки по запросу, которая использует веб-синхронизацию</span><span class="sxs-lookup"><span data-stu-id="c78ed-124">The [!INCLUDE[msCoName](../../../includes/msconame-md.md)] Internet Information Services (IIS) server for a pull subscription that uses Web synchronization</span></span>  
  
##  <a name="using-sql-server-management-studio"></a><a name="SSMSProcedure"></a> <span data-ttu-id="c78ed-125">Использование среды SQL Server Management Studio</span><span class="sxs-lookup"><span data-stu-id="c78ed-125">Using SQL Server Management Studio</span></span>  
 <span data-ttu-id="c78ed-126">После регистрации сопоставителя дайте указание статье использовать сопоставитель на вкладке **Сопоставитель** диалогового окна **Свойства статьи — \<Article>** , которое доступно в мастере создания публикаций и в диалоговом окне **Свойства публикации — \<Publication>** .</span><span class="sxs-lookup"><span data-stu-id="c78ed-126">After the resolver is registered, specify that an article should use the resolver on the **Resolver** tab of the **Article Properties - \<Article>** dialog box, which is available in the New Publication Wizard and the **Publication Properties - \<Publication>** dialog box.</span></span> <span data-ttu-id="c78ed-127">Дополнительные сведения об использовании мастера и доступе к этому диалоговому окну см. в статьях [Создание публикации](create-a-publication.md) и [Просмотр и изменение свойств публикации](view-and-modify-publication-properties.md).</span><span class="sxs-lookup"><span data-stu-id="c78ed-127">For more information about using the wizard and accessing the dialog box, see [Create a Publication](create-a-publication.md) and [View and Modify Publication Properties](view-and-modify-publication-properties.md).</span></span>  
  
#### <a name="to-specify-a-resolver"></a><span data-ttu-id="c78ed-128">Указание сопоставителя</span><span class="sxs-lookup"><span data-stu-id="c78ed-128">To specify a resolver</span></span>  
  
1.  <span data-ttu-id="c78ed-129">На странице **Статьи** мастера создания публикаций или в диалоговом окне **Свойства публикации — \<Publication>** выберите таблицу.</span><span class="sxs-lookup"><span data-stu-id="c78ed-129">On the **Articles** page of the New Publication Wizard or the **Publication Properties - \<Publication>** dialog box, select a table.</span></span>  
  
2.  <span data-ttu-id="c78ed-130">Щелкните **Свойства статьи**, затем щелкните **Указать свойства выделенной статьи таблицы**.</span><span class="sxs-lookup"><span data-stu-id="c78ed-130">Click **Article Properties**, and then click **Set Properties of Highlighted Table Article**.</span></span>  
  
3.  <span data-ttu-id="c78ed-131">На странице **Свойства статьи — \<Article>** щелкните вкладку **Сопоставитель**.</span><span class="sxs-lookup"><span data-stu-id="c78ed-131">On the **Article Properties - \<Article>** page, click the **Resolver** tab.</span></span>  
  
4.  <span data-ttu-id="c78ed-132">Выберите **Использовать пользовательский сопоставитель (зарегистрированный на распространителе):** , затем щелкните в списке сопоставитель.</span><span class="sxs-lookup"><span data-stu-id="c78ed-132">Select **Use a custom resolver (registered at the Distributor)**, and then in the list, click the resolver.</span></span>  
  
5.  <span data-ttu-id="c78ed-133">Если сопоставитель запрашивает входные данные (такие, как имя столбца), укажите их в текстовом поле **Введите данные, необходимые сопоставителю** .</span><span class="sxs-lookup"><span data-stu-id="c78ed-133">If the resolver requires input (such as a column name), specify it in the **Enter information needed by the resolver** text box.</span></span>  
  
6.  [!INCLUDE[clickOK](../../../includes/clickok-md.md)]  
  
7.  <span data-ttu-id="c78ed-134">Повторите этот процесс для каждой статьи, которая запрашивает сопоставитель.</span><span class="sxs-lookup"><span data-stu-id="c78ed-134">Repeat this process for each article that requires a resolver.</span></span>  
  
##  <a name="using-transact-sql"></a><a name="TsqlProcedure"></a> <span data-ttu-id="c78ed-135">Использование Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="c78ed-135">Using Transact-SQL</span></span>  
  
#### <a name="to-register-a-custom-conflict-resolver"></a><span data-ttu-id="c78ed-136">Регистрация пользовательского сопоставителя конфликтов</span><span class="sxs-lookup"><span data-stu-id="c78ed-136">To register a custom conflict resolver</span></span>  
  
1.  <span data-ttu-id="c78ed-137">Если планируется зарегистрировать собственный пользовательский сопоставитель конфликтов, создайте один из следующих типов.</span><span class="sxs-lookup"><span data-stu-id="c78ed-137">If you plan to register your own custom conflict resolver, create one of the following types:</span></span>  
  
    -   <span data-ttu-id="c78ed-138">Сопоставитель на основе управляемого кода в качестве обработчика бизнес-логики.</span><span class="sxs-lookup"><span data-stu-id="c78ed-138">Managed code-based resolver as a business logic handler.</span></span> <span data-ttu-id="c78ed-139">Дополнительные сведения см. в статье [Реализация обработчика бизнес-логики для статьи публикации слиянием](../implement-a-business-logic-handler-for-a-merge-article.md).</span><span class="sxs-lookup"><span data-stu-id="c78ed-139">For more information, see [Implement a Business Logic Handler for a Merge Article](../implement-a-business-logic-handler-for-a-merge-article.md).</span></span>  
  
    -   <span data-ttu-id="c78ed-140">Арбитр на основе хранимых процедур и арбитр на основе COM.</span><span class="sxs-lookup"><span data-stu-id="c78ed-140">Stored procedure-based resolver and COM-based resolver.</span></span> <span data-ttu-id="c78ed-141">Дополнительные сведения см. в разделе [Реализация пользовательского арбитра конфликтов для статьи публикации слиянием](../implement-a-custom-conflict-resolver-for-a-merge-article.md).</span><span class="sxs-lookup"><span data-stu-id="c78ed-141">For more information, see [Implement a Custom Conflict Resolver for a Merge Article](../implement-a-custom-conflict-resolver-for-a-merge-article.md).</span></span>  
  
2.  <span data-ttu-id="c78ed-142">Чтобы определить, зарегистрирован ли нужный сопоставитель, выполните хранимую процедуру [sp_enumcustomresolvers (Transact-SQL)](/sql/relational-databases/system-stored-procedures/sp-enumcustomresolvers-transact-sql) на издателе для любой базы данных.</span><span class="sxs-lookup"><span data-stu-id="c78ed-142">To determine if the desired resolver is already registered, execute [sp_enumcustomresolvers &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-enumcustomresolvers-transact-sql) at the Publisher on any database.</span></span> <span data-ttu-id="c78ed-143">Будет выведено описание пользовательского сопоставителя, а также идентификатор класса (CLSID) для каждого сопоставителя на основе COM, зарегистрированного на распространителе, или сведения об управляемой сборке для каждого обработчика бизнес-логики, зарегистрированного на распространителе.</span><span class="sxs-lookup"><span data-stu-id="c78ed-143">This displays a description of the custom resolver as well as the class identifier (CLSID) for each COM-based resolver registered at the Distributor or information on the managed assembly for each business logic handler registered at the Distributor.</span></span>  
  
3.  <span data-ttu-id="c78ed-144">Если нужный пользовательский сопоставитель еще не зарегистрирован, выполните хранимую процедуру [sp_registercustomresolver (Transact-SQL)](/sql/relational-databases/system-stored-procedures/sp-registercustomresolver-transact-sql) на распространителе.</span><span class="sxs-lookup"><span data-stu-id="c78ed-144">If the desired custom resolver is not already registered, execute [sp_registercustomresolver &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-registercustomresolver-transact-sql) at the Distributor.</span></span> <span data-ttu-id="c78ed-145">Укажите имя распознавателя **@article_resolver** ; для обработчика бизнес-логики это понятное имя сборки.</span><span class="sxs-lookup"><span data-stu-id="c78ed-145">Specify a name for the resolver for **@article_resolver**; for a business logic handler, this is the friendly name of the assembly.</span></span> <span data-ttu-id="c78ed-146">Для арбитров конфликтов на основе COM укажите CLSID библиотеки DLL для **@resolver_clsid** , а для обработчика бизнес-логики укажите значение `true` для, **@is_dotnet_assembly** имя сборки для **@dotnet_assembly_name** и полное имя класса, переопределяющий <xref:Microsoft.SqlServer.Replication.BusinessLogicSupport.BusinessLogicModule> для **@dotnet_class_name** .</span><span class="sxs-lookup"><span data-stu-id="c78ed-146">For COM-based resolvers, specify the CLSID of the DLL for **@resolver_clsid**, and for a business logic handler, specify a value of `true` for **@is_dotnet_assembly**, the name of the assembly for **@dotnet_assembly_name**, and the fully-qualified name of the class that overrides <xref:Microsoft.SqlServer.Replication.BusinessLogicSupport.BusinessLogicModule> for **@dotnet_class_name**.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="c78ed-147">Если сборка обработчика бизнес-логики не развернута в том же каталоге, что и исполняемый файл агент слияния, в том же каталоге, что и приложение, синхронно запускающее агент слияния, или в глобальном кэше сборок (GAC), необходимо указать полный путь с именем сборки для **@dotnet_assembly_name** .</span><span class="sxs-lookup"><span data-stu-id="c78ed-147">If a business logic handler assembly is not deployed in the same directory as the Merge Agent executable, in the same directory as the application that synchronously starts the Merge Agent, or in the global assembly cache (GAC), you need to specify the full path with the assembly name for **@dotnet_assembly_name**.</span></span>  
  
4.  <span data-ttu-id="c78ed-148">Если сопоставитель является сопоставителем на основе COM, сделайте следующее.</span><span class="sxs-lookup"><span data-stu-id="c78ed-148">If the resolver is a COM-based resolver:</span></span>  
  
    -   <span data-ttu-id="c78ed-149">Скопируйте DLL-библиотеку пользовательского сопоставителя на распространитель для принудительных подписок либо на подписчик для подписок по запросу.</span><span class="sxs-lookup"><span data-stu-id="c78ed-149">Copy the custom resolver DLL to the Distributor for push subscriptions or to the Subscriber for pull subscriptions.</span></span>  
  
        > [!NOTE]  
        >  <span data-ttu-id="c78ed-150">Пользовательские сопоставители[!INCLUDE[msCoName](../../../includes/msconame-md.md)] можно найти в каталоге COM [!INCLUDE[ssInstallPath](../../../includes/ssinstallpath-md.md)].</span><span class="sxs-lookup"><span data-stu-id="c78ed-150">[!INCLUDE[msCoName](../../../includes/msconame-md.md)] custom resolvers can be found in the [!INCLUDE[ssInstallPath](../../../includes/ssinstallpath-md.md)]COM directory.</span></span>  
  
    -   <span data-ttu-id="c78ed-151">Используйте файл regsvr32.exe, чтобы зарегистрировать DLL-библиотеку пользовательского сопоставителя в операционной системе.</span><span class="sxs-lookup"><span data-stu-id="c78ed-151">Use regsvr32.exe to register the custom resolver DLL with the operating system.</span></span> <span data-ttu-id="c78ed-152">Например, чтобы зарегистрировать аддитивный сопоставитель конфликтов [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , введите в командной строке следующее.</span><span class="sxs-lookup"><span data-stu-id="c78ed-152">For example, executing the following from the command prompt registers the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Additive Conflict Resolver:</span></span>  
  
        ```  
        regsvr32 ssradd.dll  
        ```  
  
5.  <span data-ttu-id="c78ed-153">Если сопоставитель является обработчиком бизнес-логики, разверните сборку в той же папке, где находится агент слияния исполняемый файл (replmerg.exe), в той же папке, что и приложение, вызывающее агент слияния, или в папке, указанной для **@dotnet_assembly_name** параметра на шаге 3.</span><span class="sxs-lookup"><span data-stu-id="c78ed-153">If the resolver is a business logic handler, deploy the assembly in the same folder as the Merge Agent executable (replmerg.exe), in the same folder as an application that invokes the Merge Agent, or in the folder specified for the **@dotnet_assembly_name** parameter in step 3.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="c78ed-154">Местом установки по умолчанию исполняемого файла агента слияния является [!INCLUDE[ssInstallPath](../../../includes/ssinstallpath-md.md)]COM.</span><span class="sxs-lookup"><span data-stu-id="c78ed-154">The default installation location of the Merge Agent executable is [!INCLUDE[ssInstallPath](../../../includes/ssinstallpath-md.md)]COM.</span></span>  
  
#### <a name="to-specify-a-custom-resolver-when-defining-a-merge-article"></a><span data-ttu-id="c78ed-155">Указание пользовательского сопоставителя при определении статьи публикации слиянием</span><span class="sxs-lookup"><span data-stu-id="c78ed-155">To specify a custom resolver when defining a merge article</span></span>  
  
1.  <span data-ttu-id="c78ed-156">Если планируется использовать собственный пользовательский сопоставитель конфликтов, создайте и зарегистрируйте сопоставитель с помощью описанной выше процедуры.</span><span class="sxs-lookup"><span data-stu-id="c78ed-156">If you plan to use a custom conflict resolver, create and register the resolver using the above procedure.</span></span>  
  
2.  <span data-ttu-id="c78ed-157">На издателе выполните хранимую процедуру [sp_enumcustomresolvers (Transact-SQL)](/sql/relational-databases/system-stored-procedures/sp-enumcustomresolvers-transact-sql) и запомните имя нужного пользовательского сопоставителя в поле **value** результирующего набора.</span><span class="sxs-lookup"><span data-stu-id="c78ed-157">At the Publisher, execute [sp_enumcustomresolvers &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-enumcustomresolvers-transact-sql) and note the name of the desired custom resolver in the **value** field of result set.</span></span>  
  
3.  <span data-ttu-id="c78ed-158">В базе данных публикации на издателе выполните процедуру [sp_addmergearticle (Transact-SQL)](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="c78ed-158">At the Publisher on the publication database, execute [sp_addmergearticle &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql).</span></span> <span data-ttu-id="c78ed-159">Укажите имя распознавателя из шага 2 для **@article_resolver** и все необходимые входные данные для пользовательского сопоставителя с помощью **@resolver_info** параметра.</span><span class="sxs-lookup"><span data-stu-id="c78ed-159">Specify the name of the resolver from step 2 for **@article_resolver** and any required input to the custom resolver using the **@resolver_info** parameter.</span></span> <span data-ttu-id="c78ed-160">Для пользовательских арбитров конфликтов на основе хранимых процедур **@resolver_info** — это имя хранимой процедуры.</span><span class="sxs-lookup"><span data-stu-id="c78ed-160">For stored procedure-based custom resolvers, **@resolver_info** is the name of the stored procedure.</span></span> <span data-ttu-id="c78ed-161">Дополнительные сведения о необходимых входных данных для сопоставителей, предоставляемых [!INCLUDE[msCoName](../../../includes/msconame-md.md)], см. в статье о [сопоставителях на базе технологии Microsoft COM](../merge/advanced-merge-replication-conflict-com-based-resolvers.md).</span><span class="sxs-lookup"><span data-stu-id="c78ed-161">For more information about required input for resolvers supplied by [!INCLUDE[msCoName](../../../includes/msconame-md.md)], see [Microsoft COM-Based Resolvers](../merge/advanced-merge-replication-conflict-com-based-resolvers.md).</span></span>  
  
#### <a name="to-specify-or-change-a-custom-resolver-for-an-existing-merge-article"></a><span data-ttu-id="c78ed-162">Указание или изменение пользовательского сопоставителя для существующей статьи публикации слиянием</span><span class="sxs-lookup"><span data-stu-id="c78ed-162">To specify or change a custom resolver for an existing merge article</span></span>  
  
1.  <span data-ttu-id="c78ed-163">Чтобы выяснить, был ли пользовательский сопоставитель определен для статьи, или чтобы получить имя арбитра, выполните хранимую процедуру [sp_helpmergearticle (Transact-SQL)](/sql/relational-databases/system-stored-procedures/sp-helpmergearticle-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="c78ed-163">To determine if a custom resolver has been defined for an article, or to get the name of the resolver, execute [sp_helpmergearticle &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-helpmergearticle-transact-sql).</span></span> <span data-ttu-id="c78ed-164">Если для статьи был определен пользовательский сопоставитель, его имя отобразится в поле **article_resolver** .</span><span class="sxs-lookup"><span data-stu-id="c78ed-164">If there is a custom resolver defined for the article, its name will be displayed in the **article_resolver** field.</span></span> <span data-ttu-id="c78ed-165">Любые входные данные, переданные сопоставителю, будут отображены в поле **resolver_info** результирующего набора.</span><span class="sxs-lookup"><span data-stu-id="c78ed-165">Any input supplied to the resolver will be displayed in the **resolver_info** field of the result set.</span></span>  
  
2.  <span data-ttu-id="c78ed-166">На издателе выполните хранимую процедуру [sp_enumcustomresolvers (Transact-SQL)](/sql/relational-databases/system-stored-procedures/sp-enumcustomresolvers-transact-sql) и запомните имя нужного пользовательского сопоставителя в поле **value** результирующего набора.</span><span class="sxs-lookup"><span data-stu-id="c78ed-166">At the Publisher, execute [sp_enumcustomresolvers &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-enumcustomresolvers-transact-sql) and note the name of the desired custom resolver in the **value** field of the result set.</span></span>  
  
3.  <span data-ttu-id="c78ed-167">В базе данных публикации на издателе выполните процедуру [sp_changemergearticle (Transact-SQL)](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="c78ed-167">At the Publisher on the publication database, execute [sp_changemergearticle &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql).</span></span> <span data-ttu-id="c78ed-168">Укажите значение для **article_resolver**, включая полный путь к обработчику бизнес-логики, в параметре **@property**, и имя нужного пользовательского сопоставителя из шага 2 в параметре **@value**.</span><span class="sxs-lookup"><span data-stu-id="c78ed-168">Specify a value of **article_resolver**, including the full path for business logic handlers, for **@property**, and the name of the desired custom resolver from step 2 for **@value**.</span></span>  
  
4.  <span data-ttu-id="c78ed-169">Чтобы изменить какие-либо необходимые входные данные для пользовательского сопоставителя, выполните хранимую процедуру [sp_changemergearticle (Transact-SQL)](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql) еще раз.</span><span class="sxs-lookup"><span data-stu-id="c78ed-169">To change any required input for the custom resolver, execute [sp_changemergearticle &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql) again.</span></span> <span data-ttu-id="c78ed-170">Укажите значение для **resolver_info** в параметре **@property** и любые необходимые входные данные для пользовательского сопоставителя в параметре **@value**.</span><span class="sxs-lookup"><span data-stu-id="c78ed-170">Specify a value of **resolver_info** for **@property** and any required input to the custom resolver for **@value**.</span></span> <span data-ttu-id="c78ed-171">Для пользовательских арбитров конфликтов на основе хранимых процедур **@resolver_info** — это имя хранимой процедуры.</span><span class="sxs-lookup"><span data-stu-id="c78ed-171">For stored procedure-based custom resolvers, **@resolver_info** is the name of the stored procedure.</span></span> <span data-ttu-id="c78ed-172">Дополнительные сведения о необходимых входных данных см. в статье о [сопоставителях на базе технологии Microsoft COM](../merge/advanced-merge-replication-conflict-com-based-resolvers.md).</span><span class="sxs-lookup"><span data-stu-id="c78ed-172">For more information about required input, see [Microsoft COM-Based Resolvers](../merge/advanced-merge-replication-conflict-com-based-resolvers.md).</span></span>  
  
#### <a name="to-unregister-a-custom-conflict-resolver"></a><span data-ttu-id="c78ed-173">Отмена регистрации пользовательского сопоставителя конфликтов</span><span class="sxs-lookup"><span data-stu-id="c78ed-173">To unregister a custom conflict resolver</span></span>  
  
1.  <span data-ttu-id="c78ed-174">На издателе выполните хранимую процедуру [sp_enumcustomresolvers (Transact-SQL)](/sql/relational-databases/system-stored-procedures/sp-enumcustomresolvers-transact-sql) и запомните имя пользовательского сопоставителя, которое нужно удалить, в поле **value** результирующего набора.</span><span class="sxs-lookup"><span data-stu-id="c78ed-174">At the Publisher, execute [sp_enumcustomresolvers &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-enumcustomresolvers-transact-sql) and note the name of the custom resolver to remove in the **value** field of the result set.</span></span>  
  
2.  <span data-ttu-id="c78ed-175">Выполните процедуру [sp_unregistercustomresolver (Transact-SQL)](/sql/relational-databases/system-stored-procedures/sp-unregistercustomresolver-transact-sql) на распространителе.</span><span class="sxs-lookup"><span data-stu-id="c78ed-175">Execute [sp_unregistercustomresolver &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-unregistercustomresolver-transact-sql) at the Distributor.</span></span> <span data-ttu-id="c78ed-176">Укажите полное имя пользовательского сопоставителя из шага 1 в параметре **@article_resolver** .</span><span class="sxs-lookup"><span data-stu-id="c78ed-176">Specify the full name of the custom resolver from step 1 for **@article_resolver**.</span></span>  
  
###  <a name="examples-transact-sql"></a><a name="TsqlExample"></a> <span data-ttu-id="c78ed-177">Примеры (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="c78ed-177">Examples (Transact-SQL)</span></span>  
 <span data-ttu-id="c78ed-178">В этом примере создается новая статья и указывается, что усредняющий сопоставитель конфликтов [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] при возникновении конфликта должен использоваться для вычисления среднего значения в столбце **UnitPrice** .</span><span class="sxs-lookup"><span data-stu-id="c78ed-178">This example creates a new article and specifies that the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Averaging Conflict Resolver be used to calculate the average of the **UnitPrice** column when conflicts occur.</span></span>  
  
 [!code-sql[HowTo#sp_addmerge_resolver](../../../snippets/tsql/SQL15/replication/howto/tsql/mergearticleresolvers.sql#sp_addmerge_resolver)]  
  
 <span data-ttu-id="c78ed-179">В этом примере изменяется статья и указывается, что аддитивный сопоставитель конфликтов [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] при возникновении конфликта должен использоваться для вычисления суммы значений в столбце **UnitsOnOrder** .</span><span class="sxs-lookup"><span data-stu-id="c78ed-179">This example changes an article to specify using the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Additive Conflict Resolver to calculate the sum of the **UnitsOnOrder** column when conflicts occur.</span></span>  
  
 [!code-sql[HowTo#sp_changemerge_resolver](../../../snippets/tsql/SQL15/replication/howto/tsql/mergearticleresolvers.sql#sp_changemerge_resolver)]  
  
## <a name="see-also"></a><span data-ttu-id="c78ed-180">См. также:</span><span class="sxs-lookup"><span data-stu-id="c78ed-180">See Also</span></span>  
 <span data-ttu-id="c78ed-181">[Advanced Merge Replication Conflict Detection and Resolution](../merge/advanced-merge-replication-conflict-detection-and-resolution.md) </span><span class="sxs-lookup"><span data-stu-id="c78ed-181">[Advanced Merge Replication Conflict Detection and Resolution](../merge/advanced-merge-replication-conflict-detection-and-resolution.md) </span></span>  
 [<span data-ttu-id="c78ed-182">Реализация обработчика бизнес-логики для статьи публикации слиянием</span><span class="sxs-lookup"><span data-stu-id="c78ed-182">Implement a Business Logic Handler for a Merge Article</span></span>](../implement-a-business-logic-handler-for-a-merge-article.md)  
  
  
