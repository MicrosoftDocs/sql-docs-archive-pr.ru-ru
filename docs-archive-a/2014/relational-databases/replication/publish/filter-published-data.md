---
title: Фильтрация опубликованных данных | Документация Майкрософт
ms.custom: ''
ms.date: 06/14/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- filters [SQL Server replication]
- filters [SQL Server replication], about filtering
- filtering [SQL Server replication]
- static row filters
- transactional replication, filtering published data
- replication [SQL Server], filtering published data
- filtering published data [SQL Server replication]
- snapshot replication [SQL Server], filtering published data
- column filters [SQL Server replication]
ms.assetid: 8a914947-72dc-4119-b631-b39c8070c71b
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 525e90cecbc4cd6ee817b8fd07748abaf651b524
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87656323"
---
# <a name="filter-published-data"></a><span data-ttu-id="88ce4-102">Фильтрация опубликованных данных</span><span class="sxs-lookup"><span data-stu-id="88ce4-102">Filter Published Data</span></span>
  <span data-ttu-id="88ce4-103">Фильтрация статей таблиц позволяет создавать секции публикуемых данных.</span><span class="sxs-lookup"><span data-stu-id="88ce4-103">Filtering table articles enables you to create partitions of data to be published.</span></span> <span data-ttu-id="88ce4-104">С помощью фильтрации опубликованных данных можно достичь следующих целей:</span><span class="sxs-lookup"><span data-stu-id="88ce4-104">By filtering published data, you can:</span></span>  
  
-   <span data-ttu-id="88ce4-105">Минимизировать объем данных, передаваемых по сети.</span><span class="sxs-lookup"><span data-stu-id="88ce4-105">Minimize the amount of data sent over the network.</span></span>  
  
-   <span data-ttu-id="88ce4-106">Снизить необходимый подписчику объем для хранения.</span><span class="sxs-lookup"><span data-stu-id="88ce4-106">Reduce the amount of storage space required at the Subscriber.</span></span>  
  
-   <span data-ttu-id="88ce4-107">Настраивать публикации и приложения на основе индивидуальных требований подписчиков.</span><span class="sxs-lookup"><span data-stu-id="88ce4-107">Customize publications and applications based on individual Subscriber requirements.</span></span>  
  
-   <span data-ttu-id="88ce4-108">Избежать конфликтов или уменьшить их количество, если подписчики обновляют данные, так как различным подписчикам можно отправить различные секции данных (то есть два подписчика не будут обновлять одни и те же значения данных).</span><span class="sxs-lookup"><span data-stu-id="88ce4-108">Avoid or reduce conflicts if Subscribers are updating data, because different data partitions can be sent to different Subscribers (no two Subscribers will be updating the same data values).</span></span>  
  
-   <span data-ttu-id="88ce4-109">Избежать передачи конфиденциальных данных.</span><span class="sxs-lookup"><span data-stu-id="88ce4-109">Avoid transmitting sensitive data.</span></span> <span data-ttu-id="88ce4-110">Фильтры строк и фильтры столбцов могут быть использованы для ограничения доступа подписчика к данным.</span><span class="sxs-lookup"><span data-stu-id="88ce4-110">Row filters and column filters can be used to restrict a Subscriber's access to data.</span></span> <span data-ttu-id="88ce4-111">При репликации слиянием может возникать проблема безопасности, если используется параметризованный фильтр, содержащий HOST_NAME().</span><span class="sxs-lookup"><span data-stu-id="88ce4-111">For merge replication, there are security considerations if you use a parameterized filter that includes HOST_NAME().</span></span> <span data-ttu-id="88ce4-112">Дополнительные сведения см. в подразделе «Фильтрация с использованием HOST_NAME()» раздела [Parameterized Row Filters](../merge/parameterized-filters-parameterized-row-filters.md).</span><span class="sxs-lookup"><span data-stu-id="88ce4-112">For more information, see the section "Filtering with HOST_NAME()" in [Parameterized Row Filters](../merge/parameterized-filters-parameterized-row-filters.md).</span></span>  
  
 <span data-ttu-id="88ce4-113">Репликация предлагает четыре типа фильтров:</span><span class="sxs-lookup"><span data-stu-id="88ce4-113">Replication offers four types of filters:</span></span>  
  
-   <span data-ttu-id="88ce4-114">Статические фильтры строк, которые доступны со всеми типами репликаций.</span><span class="sxs-lookup"><span data-stu-id="88ce4-114">Static row filters, which are available with all types of replication.</span></span>  
  
     <span data-ttu-id="88ce4-115">Используя статические фильтры строк, можно выбрать для публикации подмножество строк.</span><span class="sxs-lookup"><span data-stu-id="88ce4-115">Using static row filters, you can choose a subset of rows to be published.</span></span> <span data-ttu-id="88ce4-116">Все подписчики на фильтрованную публикацию получают одно и то же подмножество строк фильтрованной таблицы.</span><span class="sxs-lookup"><span data-stu-id="88ce4-116">All Subscribers to a filtered publication receive the same subset of rows for the filtered table.</span></span> <span data-ttu-id="88ce4-117">Дополнительные сведения см. в подразделе «Статические фильтры строк» данного раздела.</span><span class="sxs-lookup"><span data-stu-id="88ce4-117">For more information, see the section "Static Row Filters" in this topic.</span></span>  
  
-   <span data-ttu-id="88ce4-118">Фильтры столбцов, доступные со всеми типами репликаций.</span><span class="sxs-lookup"><span data-stu-id="88ce4-118">Column filters, which are available with all types of replication.</span></span>  
  
     <span data-ttu-id="88ce4-119">Используя фильтры столбцов, можно выбрать для публикации подмножество столбцов.</span><span class="sxs-lookup"><span data-stu-id="88ce4-119">Using column filters, you can choose a subset of columns to be published.</span></span> <span data-ttu-id="88ce4-120">Дополнительные сведения см. в подразделе «Фильтры столбцов» данного раздела.</span><span class="sxs-lookup"><span data-stu-id="88ce4-120">For more information, see the section "Column Filters" in this topic.</span></span>  
  
-   <span data-ttu-id="88ce4-121">Параметризованные фильтры строк, доступные только с репликацией слиянием.</span><span class="sxs-lookup"><span data-stu-id="88ce4-121">Parameterized row filters, which are available only with merge replication.</span></span>  
  
     <span data-ttu-id="88ce4-122">Используя параметризованные фильтры строк, можно выбрать для публикации подмножество строк.</span><span class="sxs-lookup"><span data-stu-id="88ce4-122">Using parameterized row filters, you can choose a subset of rows to be published.</span></span> <span data-ttu-id="88ce4-123">В отличие от статических фильтров, которые отправляют одно и то же подмножество строк всем подписчикам, параметризованные фильтры строк используют получаемые от подписчиков значения данных для отправки подписчикам разных подмножеств строк.</span><span class="sxs-lookup"><span data-stu-id="88ce4-123">Unlike static filters that send the same subset of rows to every Subscriber, parameterized row filters use a data value supplied by the Subscriber to send Subscribers different subsets of rows.</span></span> <span data-ttu-id="88ce4-124">Дополнительные сведения см. в разделе [Параметризованные фильтры строк](../merge/parameterized-filters-parameterized-row-filters.md).</span><span class="sxs-lookup"><span data-stu-id="88ce4-124">For more information, see [Parameterized Row Filters](../merge/parameterized-filters-parameterized-row-filters.md).</span></span>  
  
-   <span data-ttu-id="88ce4-125">Фильтры соединения, доступные только с репликацией слиянием.</span><span class="sxs-lookup"><span data-stu-id="88ce4-125">Join filters, which are available only with merge replication.</span></span>  
  
     <span data-ttu-id="88ce4-126">Используя фильтры соединения, можно расширить фильтр строк с одной публикуемой таблицы на другую.</span><span class="sxs-lookup"><span data-stu-id="88ce4-126">Using join filters, you can extend a row filter from one published table to another.</span></span> <span data-ttu-id="88ce4-127">Дополнительные сведения см. в статье [Join Filters](../merge/join-filters.md).</span><span class="sxs-lookup"><span data-stu-id="88ce4-127">For more information, see [Join Filters](../merge/join-filters.md).</span></span>  
  
## <a name="static-row-filters"></a><span data-ttu-id="88ce4-128">статические фильтры строк</span><span class="sxs-lookup"><span data-stu-id="88ce4-128">Static Row Filters</span></span>  
 <span data-ttu-id="88ce4-129">На следующей иллюстрации показана опубликованная таблица, которая отфильтрована так, что в публикацию включаются только строки 2, 3 и 6.</span><span class="sxs-lookup"><span data-stu-id="88ce4-129">The following illustration shows a published table that is filtered so that only rows 2, 3, and 6 are included in the publication.</span></span>  
  
 <span data-ttu-id="88ce4-130">![Фильтрация строк](../media/repl-16.gif "Фильтрация строк")</span><span class="sxs-lookup"><span data-stu-id="88ce4-130">![Row filtering](../media/repl-16.gif "Row filtering")</span></span>  
  
 <span data-ttu-id="88ce4-131">Статический строковой фильтр использует предложение WHERE для отбора соответствующих данных для публикации; необходимо указать заключительную часть предложения WHERE.</span><span class="sxs-lookup"><span data-stu-id="88ce4-131">A static row filter uses a WHERE clause to select the appropriate data to be published; you specify the final part of the WHERE clause.</span></span> <span data-ttu-id="88ce4-132">Рассмотрите таблицу **Product** в примере базы данных AdventureWorks, содержащую столбец **ProductLine**.</span><span class="sxs-lookup"><span data-stu-id="88ce4-132">Consider the **Product Table** in the Adventure Works sample database, which contains the column **ProductLine**.</span></span> <span data-ttu-id="88ce4-133">Для публикации только строк с данными о продуктах, относящихся к горным велосипедам, укажите `ProductLine = 'M'`.</span><span class="sxs-lookup"><span data-stu-id="88ce4-133">To publish only the rows with data on products related to mountain bikes, specify `ProductLine = 'M'`.</span></span>  
  
 <span data-ttu-id="88ce4-134">Применение статического фильтра строк приводит к выборке одного набора данных для каждой публикации.</span><span class="sxs-lookup"><span data-stu-id="88ce4-134">A static row filter results in a single set of data for each publication.</span></span> <span data-ttu-id="88ce4-135">В предыдущем примере все подписчики получили бы только строки с данными о продуктах, относящихся к горным велосипедам.</span><span class="sxs-lookup"><span data-stu-id="88ce4-135">In the previous example, all Subscribers would receive only the rows with data on products related to mountain bikes.</span></span> <span data-ttu-id="88ce4-136">Если имеется другой подписчик, которому нужны только строки с данными о продуктах, относящихся к дорожным велосипедам,</span><span class="sxs-lookup"><span data-stu-id="88ce4-136">If you have another Subscriber that requires only the rows with data on products related to road bikes:</span></span>  
  
-   <span data-ttu-id="88ce4-137">с помощью репликации моментальных снимков или репликации транзакций можно создать другую публикацию и включить таблицу в обе публикации (в предложении фильтра для статьи в этой публикации укажите `ProductLine = 'R')`.</span><span class="sxs-lookup"><span data-stu-id="88ce4-137">With snapshot or transactional replication, you can create another publication and include the table in both publications (in the filter clause for the article in that publication, specify `ProductLine = 'R')`.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="88ce4-138">Фильтры строк в публикациях транзакций могут существенно увеличить объем дополнительно выполняемых служебных операций, поскольку предложение фильтра статьи оценивается для каждой строки журнала, записанной для публикуемой таблицы, с целью определения необходимости репликации строки.</span><span class="sxs-lookup"><span data-stu-id="88ce4-138">Row filters in transactional publications can add significant overhead because the article filter clause is evaluated for each log row written for a published table, to determine whether the row should be replicated.</span></span> <span data-ttu-id="88ce4-139">Необходимо избегать фильтров строк в публикациях транзакций, если каждый узел репликации может поддерживать полную загрузку данных, а общий набор данных достаточно невелик.</span><span class="sxs-lookup"><span data-stu-id="88ce4-139">Row filters in transactional publications should be avoided if each replication node can support the full data load, and the overall data set is reasonably small.</span></span>  
  
-   <span data-ttu-id="88ce4-140">Вместо создания нескольких публикаций со статическими фильтрами строк используйте с репликацией слиянием параметризованные фильтры строк.</span><span class="sxs-lookup"><span data-stu-id="88ce4-140">With merge replication, use parameterized row filters rather than creating multiple publications with static row filters.</span></span> <span data-ttu-id="88ce4-141">Дополнительные сведения см. в разделе [Параметризованные фильтры строк](../merge/parameterized-filters-parameterized-row-filters.md).</span><span class="sxs-lookup"><span data-stu-id="88ce4-141">For more information, see [Parameterized Row Filters](../merge/parameterized-filters-parameterized-row-filters.md).</span></span>  
  
 <span data-ttu-id="88ce4-142">Сведения об определении или изменении статического строкового фильтра см. в разделе [Define and Modify a Static Row Filter](define-and-modify-a-static-row-filter.md).</span><span class="sxs-lookup"><span data-stu-id="88ce4-142">To define or modify a static row filter, see [Define and Modify a Static Row Filter](define-and-modify-a-static-row-filter.md).</span></span>  
  
## <a name="column-filters"></a><span data-ttu-id="88ce4-143">Фильтры столбцов</span><span class="sxs-lookup"><span data-stu-id="88ce4-143">Column Filters</span></span>  
 <span data-ttu-id="88ce4-144">На следующей иллюстрации показана публикация, которая отфильтровывает столбец «C».</span><span class="sxs-lookup"><span data-stu-id="88ce4-144">The following illustration shows a publication that filters out column C.</span></span>  
  
 <span data-ttu-id="88ce4-145">![Фильтрация столбцов](../media/repl-17.gif "Фильтрация столбцов")</span><span class="sxs-lookup"><span data-stu-id="88ce4-145">![Column filtering](../media/repl-17.gif "Column filtering")</span></span>  
  
 <span data-ttu-id="88ce4-146">Как показано здесь, можно также применять фильтр строк и фильтр столбцов совместно.</span><span class="sxs-lookup"><span data-stu-id="88ce4-146">You can also use row and column filtering together, as illustrated here.</span></span>  
  
 <span data-ttu-id="88ce4-147">![Фильтрация строк и столбцов](../media/repl-18.gif "Фильтрация строк и столбцов")</span><span class="sxs-lookup"><span data-stu-id="88ce4-147">![Row and column filtering](../media/repl-18.gif "Row and column filtering")</span></span>  
  
 <span data-ttu-id="88ce4-148">После создания публикации можно использовать фильтр столбцов, чтобы удалить столбец из существующей публикации, но сохранить его в таблице у издателя, а также, чтобы включить существующий столбец в публикацию.</span><span class="sxs-lookup"><span data-stu-id="88ce4-148">After a publication is created, you can use column filtering to drop a column from an existing publication, but retain the column in the table at the Publisher, and also to include an existing column in the publication.</span></span> <span data-ttu-id="88ce4-149">Для внесения других изменений, например, для добавления нового столбца в таблицу с последующим добавлением этой таблицы в опубликованную статью, используйте репликацию изменения схемы.</span><span class="sxs-lookup"><span data-stu-id="88ce4-149">For other changes, such as adding a new column to a table and then adding it to the published article, use schema change replication.</span></span> <span data-ttu-id="88ce4-150">Дополнительные сведения см. в подразделах "Добавление столбцов" и "Удаление столбцов" раздела [Внесение изменений схем в базы данных публикации](make-schema-changes-on-publication-databases.md).</span><span class="sxs-lookup"><span data-stu-id="88ce4-150">For more information, see the "Adding Columns" and "Dropping Columns" sections in the topic [Make Schema Changes on Publication Databases](make-schema-changes-on-publication-databases.md).</span></span>  
  
 <span data-ttu-id="88ce4-151">Типы столбцов, перечисленных в следующей таблице, не могут быть отфильтрованы из определенных типов публикаций.</span><span class="sxs-lookup"><span data-stu-id="88ce4-151">The types of columns listed in the following table cannot be filtered out of certain types of publications.</span></span>  
  
|<span data-ttu-id="88ce4-152">Тип столбца</span><span class="sxs-lookup"><span data-stu-id="88ce4-152">Column type</span></span>|<span data-ttu-id="88ce4-153">Тип публикации и параметры</span><span class="sxs-lookup"><span data-stu-id="88ce4-153">Type of publication and options</span></span>|  
|-----------------|-------------------------------------|  
|<span data-ttu-id="88ce4-154">Первичный ключевой столбец</span><span class="sxs-lookup"><span data-stu-id="88ce4-154">Primary key column</span></span>|<span data-ttu-id="88ce4-155">Первичные ключевые столбцы требуются во всех таблицах публикации транзакций.</span><span class="sxs-lookup"><span data-stu-id="88ce4-155">Primary key columns are required for all tables in transactional publications.</span></span> <span data-ttu-id="88ce4-156">Первичные ключи не требуются для таблиц в публикациях слиянием, но если первичный ключевой столбец имеется, то к нему не может быть применен фильтр.</span><span class="sxs-lookup"><span data-stu-id="88ce4-156">Primary keys are not required for tables in merge publications, but if a primary key column is present, it cannot be filtered.</span></span>|  
|<span data-ttu-id="88ce4-157">Внешний ключевой столбец</span><span class="sxs-lookup"><span data-stu-id="88ce4-157">Foreign key column</span></span>|<span data-ttu-id="88ce4-158">Все публикации создаются с использованием мастера создания публикаций.</span><span class="sxs-lookup"><span data-stu-id="88ce4-158">All publications created using the New Publication wizard.</span></span> <span data-ttu-id="88ce4-159">Внешние ключевые столбцы могут фильтроваться с помощью хранимых процедур Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="88ce4-159">You can filter foreign key columns using Transact-SQL stored procedures.</span></span> <span data-ttu-id="88ce4-160">Дополнительные сведения см. в разделе [Define and Modify a Column Filter](define-and-modify-a-column-filter.md).</span><span class="sxs-lookup"><span data-stu-id="88ce4-160">For more information, [Define and Modify a Column Filter](define-and-modify-a-column-filter.md).</span></span>|  
|<span data-ttu-id="88ce4-161">Столбец **rowguid**</span><span class="sxs-lookup"><span data-stu-id="88ce4-161">The **rowguid** column</span></span>|<span data-ttu-id="88ce4-162">Публикации слиянием<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="88ce4-162">Merge publications<sup>1</sup></span></span>|  
|<span data-ttu-id="88ce4-163">Столбец **msrepl_tran_version**</span><span class="sxs-lookup"><span data-stu-id="88ce4-163">The **msrepl_tran_version** column</span></span>|<span data-ttu-id="88ce4-164">Публикации моментальных снимков или публикации транзакций, разрешающие использование обновляемых подписок</span><span class="sxs-lookup"><span data-stu-id="88ce4-164">Snapshot or transactional publications that allow updatable subscriptions</span></span>|  
|<span data-ttu-id="88ce4-165">Столбцы, не допускающие значения NULL и не имеющие значений по умолчанию или набора свойств IDENTITY.</span><span class="sxs-lookup"><span data-stu-id="88ce4-165">Columns that do not allow NULL and do not have default values or the IDENTITY property set.</span></span>|<span data-ttu-id="88ce4-166">Публикации моментальных снимков или публикации транзакций, разрешающие использование обновляемых подписок</span><span class="sxs-lookup"><span data-stu-id="88ce4-166">Snapshot or transactional publications that allow updatable subscriptions</span></span>|  
|<span data-ttu-id="88ce4-167">Столбцы с уникальными ограничениями или индексами</span><span class="sxs-lookup"><span data-stu-id="88ce4-167">Columns with unique constraints or indexes</span></span>|<span data-ttu-id="88ce4-168">Публикации моментальных снимков или публикации транзакций, разрешающие использование обновляемых подписок</span><span class="sxs-lookup"><span data-stu-id="88ce4-168">Snapshot or transactional publications that allow updatable subscriptions</span></span>|  
|<span data-ttu-id="88ce4-169">Все столбцы в публикации слиянием SQL Server 7.0</span><span class="sxs-lookup"><span data-stu-id="88ce4-169">All columns in a SQL Server 7.0 merge publication</span></span>|<span data-ttu-id="88ce4-170">В публикациях слиянием SQL Server 7.0 к столбцам фильтр применен быть не может.</span><span class="sxs-lookup"><span data-stu-id="88ce4-170">Columns cannot be filtered in SQL Server 7.0 merge publications.</span></span>|  
|<span data-ttu-id="88ce4-171">Отметка времени</span><span class="sxs-lookup"><span data-stu-id="88ce4-171">Timestamp</span></span>|<span data-ttu-id="88ce4-172">Публикации моментальных снимков или публикации транзакций SQL Server 7.0, которые разрешают использование обновляемых подписок</span><span class="sxs-lookup"><span data-stu-id="88ce4-172">SQL Server 7.0 snapshot or transactional publications that allow updatable subscriptions</span></span>|  
  
 <span data-ttu-id="88ce4-173"><sup>1</sup> если вы публикуете таблицу в публикации слиянием, а эта таблица уже содержит столбец типа данных `uniqueidentifier` с `ROWGUIDCOL` набором свойств, то репликация может использовать этот столбец вместо создания дополнительного столбца с именем **rowguid**.</span><span class="sxs-lookup"><span data-stu-id="88ce4-173"><sup>1</sup> If you are publishing a table in a merge publication and that table already contains a column of data type `uniqueidentifier` with the `ROWGUIDCOL` property set, replication can use this column instead of creating an additional column named **rowguid**.</span></span> <span data-ttu-id="88ce4-174">В этом случае должен быть опубликован существующий столбец.</span><span class="sxs-lookup"><span data-stu-id="88ce4-174">In this case, the existing column must be published.</span></span>  
  
 <span data-ttu-id="88ce4-175">Сведения об определении или изменении фильтра столбцов см. в разделе [Define and Modify a Column Filter](define-and-modify-a-column-filter.md).</span><span class="sxs-lookup"><span data-stu-id="88ce4-175">To define or modify a column filter, see [Define and Modify a Column Filter](define-and-modify-a-column-filter.md).</span></span>  
  
## <a name="filtering-considerations"></a><span data-ttu-id="88ce4-176">Вопросы применения фильтров</span><span class="sxs-lookup"><span data-stu-id="88ce4-176">Filtering Considerations</span></span>  
 <span data-ttu-id="88ce4-177">При фильтрации данных учитывайте следующие требования:</span><span class="sxs-lookup"><span data-stu-id="88ce4-177">Keep the following considerations in mind when filtering data:</span></span>  
  
-   <span data-ttu-id="88ce4-178">В публикацию должны быть включены все столбцы, на которые имеются ссылки в фильтрах строк.</span><span class="sxs-lookup"><span data-stu-id="88ce4-178">All columns referenced in row filters must be included in the publication.</span></span> <span data-ttu-id="88ce4-179">Иными словами, нельзя использовать фильтр столбцов для исключения столбца, который используется в фильтре строк.</span><span class="sxs-lookup"><span data-stu-id="88ce4-179">In other words, you cannot use a column filter to exclude a column that is used in a row filter.</span></span>  
  
-   <span data-ttu-id="88ce4-180">Если добавление или изменение фильтра производится после инициализации подписок, то подписки должны быть инициализированы повторно.</span><span class="sxs-lookup"><span data-stu-id="88ce4-180">If a filter is added or changed after subscriptions have been initialized, the subscriptions must be reinitialized.</span></span>  
  
-   <span data-ttu-id="88ce4-181">Максимальное число байтов, разрешенное для столбца, используемого в фильтре, равно 1024 для статьи в публикации слиянием и 8000 для статьи в публикации транзакций.</span><span class="sxs-lookup"><span data-stu-id="88ce4-181">The maximum number of bytes allowed for a column used in a filter is 1024 for an article in a merge publication and 8000 for an article in a transactional publication.</span></span>  
  
-   <span data-ttu-id="88ce4-182">В фильтрах строк или фильтрах соединения не допускаются ссылки на столбцы со следующими типами данных:</span><span class="sxs-lookup"><span data-stu-id="88ce4-182">Columns with the following data types cannot be referenced in row filters or join filters:</span></span>  
  
    -   `varchar(max) and nvarchar(max)`  
  
    -   `varbinary(max)`  
  
    -   `text and ntext`  
  
    -   `image`  
  
    -   `XML`  
  
    -   `UDT`  
  
-   <span data-ttu-id="88ce4-183">Репликация транзакций позволяет реплицировать индексированное представление либо в виде представления, либо в виде таблицы.</span><span class="sxs-lookup"><span data-stu-id="88ce4-183">Transactional replication allows you to replicate an indexed view as a view or as a table.</span></span> <span data-ttu-id="88ce4-184">Если выполняется репликация представления в виде таблицы, отфильтровать столбцы из таблицы не удастся.</span><span class="sxs-lookup"><span data-stu-id="88ce4-184">If you replicate the view as a table, you cannot filter columns from the table.</span></span>  
  
 <span data-ttu-id="88ce4-185">Фильтры строк не предназначены для работы в нескольких базах данных.</span><span class="sxs-lookup"><span data-stu-id="88ce4-185">Row filters are not designed to work across databases.</span></span> <span data-ttu-id="88ce4-186">В [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] выполнение `sp_replcmds` (в котором применяются фильтры) намеренно разрешается только владельцу базы данных (`dbo`).</span><span class="sxs-lookup"><span data-stu-id="88ce4-186">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] intentionally restricts the execution of `sp_replcmds` (which filters execute under) to the database owner (`dbo`).</span></span> <span data-ttu-id="88ce4-187">`dbo` не имеет межбазовых прав доступа.</span><span class="sxs-lookup"><span data-stu-id="88ce4-187">The `dbo` does not have cross database privileges.</span></span> <span data-ttu-id="88ce4-188">Благодаря добавлению CDC (системы отслеживания измененных данных) в [!INCLUDE[ssKatmai](../../../includes/sskatmai-md.md)] логика `sp_replcmds` вносит в таблицы отслеживания изменений данные, которые могут возвращаться и запрашиваться пользователем.</span><span class="sxs-lookup"><span data-stu-id="88ce4-188">With the addition of CDC (Change Data Capture) in [!INCLUDE[ssKatmai](../../../includes/sskatmai-md.md)] the `sp_replcmds` logic populates the change tracking tables with information that the user can return to and query.</span></span> <span data-ttu-id="88ce4-189">По соображениям безопасности следует [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] ограничивать выполнение этой логики, чтобы злоумышленник `dbo` не хигхжакк этот путь выполнения.</span><span class="sxs-lookup"><span data-stu-id="88ce4-189">For security reasons, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] restricts the execution of this logic so that a malicious `dbo` can't highjack this execution path.</span></span> <span data-ttu-id="88ce4-190">Например, злонамеренный `dbo` может добавить в CDC-таблицы триггеры, которые впоследствии могут сработать в контексте пользователя, вызвавшего `sp_replcmds`, в данном случае агента чтения журнала.</span><span class="sxs-lookup"><span data-stu-id="88ce4-190">For example, a malicious `dbo` could add triggers on CDC tables which would then get executed under the context of the user calling `sp_replcmds`, in this case the logreader agent.</span></span>  <span data-ttu-id="88ce4-191">Если учетная запись, под которой запущен агент, имеет более высокие права доступа, злонамеренный `dbo` может повысить свой уровень прав.</span><span class="sxs-lookup"><span data-stu-id="88ce4-191">If the account the agent is running under has higher privilege the malicious `dbo` could escalate his privileges.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="88ce4-192">См. также:</span><span class="sxs-lookup"><span data-stu-id="88ce4-192">See Also</span></span>  
 [<span data-ttu-id="88ce4-193">Публикация данных и объектов базы данных</span><span class="sxs-lookup"><span data-stu-id="88ce4-193">Publish Data and Database Objects</span></span>](publish-data-and-database-objects.md)  
  
  
