---
title: Наблюдение за производительностью с помощью монитора репликации | Документация Майкрософт
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- monitoring performance [SQL Server replication], Replication Monitor
- Log Reader Agent, monitoring
- Replication Monitor, performance
- Merge Agent, monitoring
- Queue Reader Agent, monitoring
- Snapshot Agent, monitoring
- Distribution Agent, monitoring
- monitoring performance [SQL Server replication]
ms.assetid: f212397d-1bfd-496b-a246-668952891d09
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: d02cb17aae5dfe72a9660de62e516e61313ef03c
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87657650"
---
# <a name="monitor-performance-with-replication-monitor"></a>Наблюдение за производительностью с помощью монитора репликации
  Монитор репликации [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] позволяет осуществлять наблюдение за производительностью репликации транзакций и репликации слиянием следующими способами.  
  
-   Установка предупреждений и порогов.  
  
-   Просмотр показателей производительности.  
  
-   Определение задержки с помощью трассировочных токенов (репликация транзакций).  
  
-   Просмотр подробной статистики синхронизации (репликация слиянием).  
  
-   Просмотр времени выполнения и доставки транзакций (репликация транзакций).  
  
## <a name="set-warnings-and-thresholds"></a>Настройка предупреждений и пороговых значений  
 С помощью монитора репликации можно включить предупреждения для ряда условий производительности. При включении предупреждения требуется задать пороговое значение. Если при выполнении транзакции было достигнуто или превышено пороговое значение, предупреждение отображается в столбце **Состояние** для подписки и публикации, с которой она синхронизируется (за исключением случаев, когда требуется отобразить сообщение с более высоким приоритетом). Достижение порогового значения помимо отображения предупреждения в мониторе репликации может также вызывать системное предупреждение. Можно включить предупреждения для следующих условий производительности:  
  
-   Превышение указанного времени задержки (время между моментом фиксирования транзакции на издателе и моментом фиксирования соответствующей транзакции на подписчике).  
  
     Это условие применяется к репликации транзакций. Когда достигается или превышается указанное значение порога, состояние отображается как **Критическое для производительности**.  
  
-   Превышение заданного времени синхронизации.  
  
     Это условие применяется к репликации слиянием. Когда достигается или превышается указанное значение порога, состояние отображается как **Продолжительное слияние**. Для коммутируемого соединения и соединения по локальной сети можно задать разные пороговые значения.  
  
-   Невозможность обработки заданного числа строк за указанное время.  
  
     Это условие применяется к репликации слиянием. Когда достигается или превышается указанное значение порога, состояние отображается как **Критическое для производительности**. Для коммутируемого соединения и соединения по локальной сети можно задать разные пороговые значения.  
  
 Дополнительные сведения см. в статье [Set Thresholds and Warnings in Replication Monitor](set-thresholds-and-warnings-in-replication-monitor.md).  
  
## <a name="view-performance-measurements"></a>Просмотр показателей производительности  
 Монитор репликации отображает значения качества производительности для репликации транзакций и репликации слиянием в столбцах **Текущая средняя производительность** и **Худшая производительность в данный момент** для публикации и в столбце **Производительность** для подписок. Значения качества производительности:  
  
-   Высокая  
  
-   Хорошая.  
  
-   удовлетворительная  
  
-   Низкая  
  
-   Критическое (только для репликаций транзакций).  
  
 Значения определяются следующим образом:  
  
-   Для репликаций транзакций качество производительности определяется пороговым значением времени задержки. Если пороговое значение не задано, значение не отображается. В следующей таблице показана взаимосвязь между пороговым значением и значением качества производительности. Например, если для порога задано значение 60 секунд, а текущая задержка — 30 секунд, то задержка составляет 50% заданного порогового значения, что приводит к значению качества производительности «Хорошее».  
  
    |Высокая|Хорошая.|удовлетворительная|Низкая|Critical|  
    |---------------|----------|----------|----------|--------------|  
    |0–34 %|35–59 %|60–84 %|85–99 %|100 % +|  
  
-   Для репликаций слиянием качество производительности не зависит ни от каких пороговых значений (пороговое значение для обработки строк определяет только появление значения **Критическое для производительности** в столбце **Состояние** ). Оценка качества производительности определяется посредством сравнения производительности индивидуальной подписки со средним значением производительности за длительный период для подписок на данную публикацию, имеющих один и тот же тип соединения (коммутируемое или по локальной сети). Монитор репликации отображает значение после пяти синхронизаций, использующих один тип соединения, каждая из которых содержит 50 или более изменений. В случае, если произошло менее 5 синхронизаций с 50 и более изменениями или если в последней выполненной синхронизации менее 50 изменений, монитор репликации не отображает это значение.  
  
     В следующей таблице показана взаимосвязь между средней производительностью и значением качества производительности. Например, если десять подписчиков осуществили синхронизацию, используя соединение по локальной сети со средним показателем 100 строк в секунду, после чего при синхронизации одной из подписок показатель был 125 строк в секунду, производительность синхронизации для этого подписчика будет 125% от среднего значения, что соответствует качеству производительности «Хорошее».  
  
    |Высокая|Хорошая.|удовлетворительная|Низкая|  
    |---------------|----------|----------|----------|  
    |151+%|76–150 %|26–75 %|0–25 %|  
  
 Дополнительные сведения о просмотре информации о подписках см. в статье [Просмотр сведений и выполнение задач с помощью монитора репликации](view-information-and-perform-tasks-replication-monitor.md).  
  
## <a name="determine-latency-with-tracer-tokens"></a>Определение времени задержки с помощью трассировочных токенов  
 Репликация транзакций позволяет измерить период задержки в системе путем вставки токена (некоторого количества данных) в журнал транзакций базы данных публикации и записи периода времени, необходимого токену для прибытия на распространитель и подписчики. Токен позволяет также определить случаи, когда данные не достигают распространителя или подписчика. Дополнительные сведения см. в статье [Измерение задержки и проверка правильности соединений для репликации транзакций](measure-latency-and-validate-connections-for-transactional-replication.md).  
  
## <a name="view-detailed-synchronization-performance-for-merge-replication"></a>Просмотр подробных сведений о производительности синхронизации для репликации слиянием  
 Для репликаций слиянием монитор репликации отображает подробную статистику для каждой статьи, обработанной в процессе синхронизации, включая время, затраченное на каждую стадию обработки (передача изменений, загрузка изменений и т.д.). С помощью монитора репликации можно обнаружить особые таблицы, вызывающие замедление, к тому же, в мониторе репликации удобно устранять проблемы, связанные с производительностью подписок на публикацию слиянием. Дополнительные сведения о просмотре подробной статистики см. в статье [Просмотр сведений и выполнение задач с помощью монитора репликации](view-information-and-perform-tasks-replication-monitor.md).  
  
## <a name="view-transactions-and-delivery-time-for-transactional-replication"></a>Просмотр времени выполнения и доставки транзакций для репликации транзакций  
 Для репликации транзакций монитор репликации отображает информацию о количестве транзакций в базе данных распространителя, которые еще не были переданы на подписчик, и предполагаемое время, затрачиваемое на распространение этих транзакций. Дополнительные сведения см. в статье [Просмотр сведений и выполнение задач с помощью монитора репликации](view-information-and-perform-tasks-replication-monitor.md).  
  
## <a name="see-also"></a>См. также:  
 [Наблюдение за репликацией](../monitoring-replication.md)   
 [Set Thresholds and Warnings in Replication Monitor](set-thresholds-and-warnings-in-replication-monitor.md)  
  
  
