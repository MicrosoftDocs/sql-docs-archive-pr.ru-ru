---
title: Формирование фильтров | Документация Майкрософт
ms.custom: ''
ms.date: 06/14/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
f1_keywords:
- sql12.rep.newpubwizard.generatefilters.f1
ms.assetid: be28515c-5d6d-467b-b933-d7c8d97a45b4
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: b0e484c89c97d3f32f3e41197800202f796a25d2
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87655603"
---
# <a name="generate-filters"></a><span data-ttu-id="4a95c-102">Формирование фильтров</span><span class="sxs-lookup"><span data-stu-id="4a95c-102">Generate Filters</span></span>
  <span data-ttu-id="4a95c-103">Диалоговое окно **Формирование фильтров** позволяет определить фильтр строк на одной таблице в публикации слиянием. Далее репликация автоматически распространяет фильтр на другие таблицы, связанные через связи внешних ключей.</span><span class="sxs-lookup"><span data-stu-id="4a95c-103">The **Generate Filters** dialog box allows you to define a row filter on one table in a merge publication; replication then automatically extends the filter to other tables that are related through foreign key relationships.</span></span> <span data-ttu-id="4a95c-104">Например, если фильтр определяется на таблице заказчика таким образом, чтобы в результате фильтрации оставались только данные о французских заказчиках, репликация распространяет этот фильтр таким образом, что соответствующие заказы и таблицы с подробностями заказов будут содержать только данные, относящиеся к французским заказчикам.</span><span class="sxs-lookup"><span data-stu-id="4a95c-104">For example, if you define a filter on a customer table so that it only contains data on French customers, replication extends that filter so that related orders and order details tables contain only information related to French customers.</span></span>  
  
## <a name="options"></a><span data-ttu-id="4a95c-105">Параметры</span><span class="sxs-lookup"><span data-stu-id="4a95c-105">Options</span></span>  
 <span data-ttu-id="4a95c-106">В этом диалоговом окне используется трехступенчатый процесс создания фильтра строк на таблице.</span><span class="sxs-lookup"><span data-stu-id="4a95c-106">This dialog box involves a three-step process to create a row filter on a table.</span></span> <span data-ttu-id="4a95c-107">Затем фильтр распространяется на таблицы, связанные с фильтруемой таблицей связями первичного и внешнего ключей.</span><span class="sxs-lookup"><span data-stu-id="4a95c-107">The filter is then extended to the tables related to the filtered table through primary key and foreign key relationships.</span></span> <span data-ttu-id="4a95c-108">Допустим, имеются три таблицы: **Customer**, **SalesOrderHeader**и **SalesOrderDetail**. Допустим, имеются связи между таблицами **Customer** и **SalesOrderHeader**, а также между **SalesOrderHeader** и **SalesOrderDetail**. Тогда, если фильтр строк применяется к таблице **Customer**, репликация распространяет этот фильтр на таблицы **SalesOrderHeader** и **SalesOrderDetail**.</span><span class="sxs-lookup"><span data-stu-id="4a95c-108">For example, given the three tables **Customer**, **SalesOrderHeader**, and **SalesOrderDetail**, with a relationship between **Customer** and **SalesOrderHeader**, and a relationship between **SalesOrderHeader** and **SalesOrderDetail**, apply a row filter to **Customer**, and replication extends that filter to **SalesOrderHeader** and **SalesOrderDetail**.</span></span>  
  
1.  <span data-ttu-id="4a95c-109">**Выберите таблицу для фильтрации.**</span><span class="sxs-lookup"><span data-stu-id="4a95c-109">**Select the table to filter.**</span></span>  
  
     <span data-ttu-id="4a95c-110">Выберите таблицу из раскрывающегося списка.</span><span class="sxs-lookup"><span data-stu-id="4a95c-110">Select a table from the drop-down list box.</span></span> <span data-ttu-id="4a95c-111">В этом списке присутствуют только те таблицы, которые были выбраны на странице **Статьи** .</span><span class="sxs-lookup"><span data-stu-id="4a95c-111">Tables appear in the list box only if they were selected on the **Articles** page.</span></span>  
  
2.  <span data-ttu-id="4a95c-112">**Завершите инструкцию фильтра, чтобы указать те строки таблицы, которые будут получать подписчики.**</span><span class="sxs-lookup"><span data-stu-id="4a95c-112">**Complete the filter statement to identify which table rows Subscribers will receive.**</span></span>  
  
     <span data-ttu-id="4a95c-113">Определите новую инструкцию фильтра.</span><span class="sxs-lookup"><span data-stu-id="4a95c-113">Define a new filter statement.</span></span> <span data-ttu-id="4a95c-114">Список **Столбцы** содержит все столбцы, публикуемые из выбранной таблицы в поле **Выберите таблицу для фильтрации**.</span><span class="sxs-lookup"><span data-stu-id="4a95c-114">The **Columns** list box lists all the columns that you are publishing from the table you selected in **Select the table to filter**.</span></span> <span data-ttu-id="4a95c-115">Текстовая область **Инструкция фильтра** содержит текст по умолчанию, в виде:</span><span class="sxs-lookup"><span data-stu-id="4a95c-115">The **Filter statement** text area includes the default text, which is in the form of:</span></span>  
  
     `SELECT <published_columns> FROM [tableowner].[tablename] WHERE`  
  
     <span data-ttu-id="4a95c-116">Этот текст не может быть изменен; введите предложение фильтра после ключевого слова WHERE, используя обычный синтаксис [!INCLUDE[tsql](../../includes/tsql-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="4a95c-116">This text cannot be changed; type the filter clause after the WHERE keyword using standard [!INCLUDE[tsql](../../includes/tsql-md.md)] syntax.</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="4a95c-117">По соображениям производительности не рекомендуется применять функции к именам столбцов в предложениях параметризованных фильтров строк, например `LEFT([MyColumn]) = SUSER_SNAME()`.</span><span class="sxs-lookup"><span data-stu-id="4a95c-117">For performance reasons, we recommended that you not apply functions to column names in parameterized row filter clauses, such as `LEFT([MyColumn]) = SUSER_SNAME()`.</span></span> <span data-ttu-id="4a95c-118">Если в предложении фильтра используется HOST_NAME и переопределяется значение HOST_NAME, может быть, необходимо выполнить преобразование типов данных при помощи инструкции CONVERT.</span><span class="sxs-lookup"><span data-stu-id="4a95c-118">If you use HOST_NAME in a filter clause and override the HOST_NAME value, it might be necessary to convert data types using CONVERT.</span></span> <span data-ttu-id="4a95c-119">Дополнительные сведения см. в подразделе «Переопределение значения HOST_NAME()» раздела [Parameterized Row Filters](merge/parameterized-filters-parameterized-row-filters.md).</span><span class="sxs-lookup"><span data-stu-id="4a95c-119">For more information about best practices for this case, see the section "Overriding the HOST_NAME() Value" in the topic [Parameterized Row Filters](merge/parameterized-filters-parameterized-row-filters.md).</span></span>  
  
3.  <span data-ttu-id="4a95c-120">**Укажите, сколько подписок будет получать данные из этой таблицы.**</span><span class="sxs-lookup"><span data-stu-id="4a95c-120">**Specify how many subscriptions will receive data from this table.**</span></span>  
  
     <span data-ttu-id="4a95c-121">Только для [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] и более поздних версий.</span><span class="sxs-lookup"><span data-stu-id="4a95c-121">[!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] and later versions only.</span></span> <span data-ttu-id="4a95c-122">Репликация слиянием позволяет указать тип секций, наилучшим образом подходящих для данных и приложения пользователя.</span><span class="sxs-lookup"><span data-stu-id="4a95c-122">Merge replication allows you to specify the type of partitions that are best suited to your data and application.</span></span> <span data-ttu-id="4a95c-123">При выборе значения **Строка из этой таблицы будет отправлена только одной подписке**репликация слиянием устанавливает параметр неперекрывающихся секций.</span><span class="sxs-lookup"><span data-stu-id="4a95c-123">If you select **A row from this table will go to only one subscription**, merge replication sets the nonoverlapping partitions option.</span></span> <span data-ttu-id="4a95c-124">Для повышения производительности неперекрывающиеся секции работают в сочетании с предварительно вычисляемыми секциями; при этом неперекрывающиеся секции предельно снижают стоимость передачи, связанную с предварительно вычисляемыми секциями.</span><span class="sxs-lookup"><span data-stu-id="4a95c-124">Nonoverlapping partitions work in conjunction with precomputed partitions to improve performance, with nonoverlapping partitions minimizing the upload cost associated with precomputed partitions.</span></span> <span data-ttu-id="4a95c-125">Повышение производительности благодаря применению неперекрывающихся секций наиболее заметно при использовании более сложных параметризованных фильтров и фильтров соединения.</span><span class="sxs-lookup"><span data-stu-id="4a95c-125">The performance benefit of nonoverlapping partitions is more noticeable when the parameterized filters and join filters used are more complex.</span></span> <span data-ttu-id="4a95c-126">При выборе этого параметра необходимо убедиться в том, что данные секционированы таким образом, что строка не может реплицироваться на несколько подписчиков.</span><span class="sxs-lookup"><span data-stu-id="4a95c-126">If you select this option, you must ensure that the data is partitioned in such a way that a row cannot be replicated to more than one Subscriber.</span></span> <span data-ttu-id="4a95c-127">Дополнительные сведения см. в подразделе «Настройка параметров секционирования» раздела [Параметризованные фильтры строк](merge/parameterized-filters-parameterized-row-filters.md).</span><span class="sxs-lookup"><span data-stu-id="4a95c-127">For more information, see the section "Setting 'partition options'" in the topic [Parameterized Row Filters](merge/parameterized-filters-parameterized-row-filters.md).</span></span>  
  
 <span data-ttu-id="4a95c-128">После добавления фильтра нажмите кнопку **ОК** для выхода и закрытия диалогового окна.</span><span class="sxs-lookup"><span data-stu-id="4a95c-128">After you have added a filter, click **OK** to exit and close the dialog box.</span></span> <span data-ttu-id="4a95c-129">Проводится синтаксический анализ указанного фильтра, после чего фильтр применяется к таблице в предложении SELECT.</span><span class="sxs-lookup"><span data-stu-id="4a95c-129">The filter you specified is parsed and run against the table in the SELECT clause.</span></span> <span data-ttu-id="4a95c-130">Если оператор фильтра содержит синтаксические ошибки или встречаются другие проблемы, пользователь уведомляется, после чего может отредактировать эту инструкцию фильтра.</span><span class="sxs-lookup"><span data-stu-id="4a95c-130">If the filter statement contains syntax errors or other problems, you will be notified and will be able to edit the filter statement.</span></span>  
  
 <span data-ttu-id="4a95c-131">После выполнения синтаксического анализа инструкции репликация создает необходимые фильтры соединения.</span><span class="sxs-lookup"><span data-stu-id="4a95c-131">After the statement is parsed, replication creates the necessary join filters.</span></span> <span data-ttu-id="4a95c-132">Если распространитель еще не настроен на издателя, на котором выполняется этот мастер, пользователю предлагается настроить распространитель.</span><span class="sxs-lookup"><span data-stu-id="4a95c-132">If you have not yet configured the Distributor for the Publisher against which this wizard is running, you are prompted to configure it.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="4a95c-133">См. также:</span><span class="sxs-lookup"><span data-stu-id="4a95c-133">See Also</span></span>  
 <span data-ttu-id="4a95c-134">[Create a Publication](publish/create-a-publication.md) </span><span class="sxs-lookup"><span data-stu-id="4a95c-134">[Create a Publication](publish/create-a-publication.md) </span></span>  
 <span data-ttu-id="4a95c-135">[Просмотр и изменение свойств публикации](publish/view-and-modify-publication-properties.md) </span><span class="sxs-lookup"><span data-stu-id="4a95c-135">[View and Modify Publication Properties](publish/view-and-modify-publication-properties.md) </span></span>  
 <span data-ttu-id="4a95c-136">[Фильтрация опубликованных данных](publish/filter-published-data.md) </span><span class="sxs-lookup"><span data-stu-id="4a95c-136">[Filter Published Data](publish/filter-published-data.md) </span></span>  
 <span data-ttu-id="4a95c-137">[Join Filters](merge/join-filters.md) </span><span class="sxs-lookup"><span data-stu-id="4a95c-137">[Join Filters](merge/join-filters.md) </span></span>  
 <span data-ttu-id="4a95c-138">[Parameterized Row Filters](merge/parameterized-filters-parameterized-row-filters.md) </span><span class="sxs-lookup"><span data-stu-id="4a95c-138">[Parameterized Row Filters](merge/parameterized-filters-parameterized-row-filters.md) </span></span>  
 [<span data-ttu-id="4a95c-139">Публикация данных и объектов базы данных</span><span class="sxs-lookup"><span data-stu-id="4a95c-139">Publish Data and Database Objects</span></span>](publish/publish-data-and-database-objects.md)  
  
  
