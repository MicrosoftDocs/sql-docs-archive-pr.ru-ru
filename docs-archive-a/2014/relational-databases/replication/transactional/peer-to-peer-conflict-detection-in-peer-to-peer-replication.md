---
title: Обнаружение конфликтов в одноранговой репликации | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- transactional replication, peer-to-peer replication
- peer-to-peer transactional replication, conflict detection
ms.assetid: 754a1070-59bc-438d-998b-97fdd77d45ca
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 301a751bf5b5959ab1fc434ac2a583a6b0378fdd
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87664850"
---
# <a name="conflict-detection-in-peer-to-peer-replication"></a><span data-ttu-id="38748-102">Обнаружение конфликтов в одноранговой репликации</span><span class="sxs-lookup"><span data-stu-id="38748-102">Conflict Detection in Peer-to-Peer Replication</span></span>
  <span data-ttu-id="38748-103">Одноранговая репликация транзакций дает возможность вставлять, обновлять и удалять данные в любом узле топологии и передавать изменения в данных на другие узлы.</span><span class="sxs-lookup"><span data-stu-id="38748-103">Peer-to-peer transactional replication lets you insert, update, or delete data at any node in a topology and have data changes propagated to the other nodes.</span></span> <span data-ttu-id="38748-104">Данные можно изменять в любом узле, поэтому изменения, вносимые на различных узлах, могут конфликтовать друг с другом.</span><span class="sxs-lookup"><span data-stu-id="38748-104">Because you can change data at any node, data changes at different nodes could conflict with each other.</span></span> <span data-ttu-id="38748-105">Если строка изменяется на нескольких узлах, это может вызвать конфликт или даже потерю обновления, когда эта строка передается на другие узлы.</span><span class="sxs-lookup"><span data-stu-id="38748-105">If a row is modified at more than one node, it can cause a conflict or even a lost update when the row is propagated to other nodes.</span></span>  
  
 <span data-ttu-id="38748-106">Одноранговая репликация в [!INCLUDE[ssKatmai](../../../includes/sskatmai-md.md)] и более поздних версиях предоставляет возможность включить обнаружение конфликтов во всей одноранговой топологии.</span><span class="sxs-lookup"><span data-stu-id="38748-106">Peer-to-peer replication in [!INCLUDE[ssKatmai](../../../includes/sskatmai-md.md)] and later versions provides the option to enable conflict detection across a peer-to-peer topology.</span></span> <span data-ttu-id="38748-107">Этот режим помогает избежать проблемы, которые вызываются необнаруженными конфликтами, в том числе недопустимым поведением приложения и потерянными обновлениями.</span><span class="sxs-lookup"><span data-stu-id="38748-107">This option would help prevent the issues that are caused by undetected conflicts, including inconsistent application behavior and lost updates.</span></span> <span data-ttu-id="38748-108">При включенном режиме обнаружения конфликтов конфликтующее изменение по умолчанию рассматривается как критическая ошибка, вызывающая сбой агента распространителя.</span><span class="sxs-lookup"><span data-stu-id="38748-108">With this option enabled, by default a conflicting change is treated as a critical error that causes the failure of the Distribution Agent.</span></span> <span data-ttu-id="38748-109">В случае конфликта топология остается в несогласованном состоянии, пока конфликт не будет разрешен, а данные согласованы во всей топологии.</span><span class="sxs-lookup"><span data-stu-id="38748-109">In the event of a conflict, the topology remains in an inconsistent state until the conflict is resolved and the data is made consistent across the topology.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="38748-110">Чтобы избежать возможной несогласованности данных, убедитесь, что в одноранговой топологии отсутствуют конфликты, даже при включенном обнаружении конфликтов.</span><span class="sxs-lookup"><span data-stu-id="38748-110">To avoid potential data inconsistency, make sure that you avoid conflicts in a peer-to-peer topology, even with conflict detection enabled.</span></span> <span data-ttu-id="38748-111">Чтобы операции записи выполнялись только на одном узле, приложения, получающие доступ к данным и изменяющие их, должны секционировать операции вставки, обновления и удаления.</span><span class="sxs-lookup"><span data-stu-id="38748-111">To ensure that write operations for a particular row are performed at only one node, applications that access and change data must partition insert, update, and delete operations.</span></span> <span data-ttu-id="38748-112">Такое секционирование обеспечивает тот факт, что изменения конкретной строки на одном узле синхронизируются с остальными узлами в топологии, прежде чем эта строка будет изменена другим узлом.</span><span class="sxs-lookup"><span data-stu-id="38748-112">This partitioning ensures that modifications to a given row that is originating at one node are synchronized with all other nodes in the topology before the row is modified by a different node.</span></span> <span data-ttu-id="38748-113">Если приложению требуется усложненное обнаружение конфликтов, используйте репликацию слиянием.</span><span class="sxs-lookup"><span data-stu-id="38748-113">If an application requires sophisticated conflict detection and resolution capabilities, use merge replication.</span></span> <span data-ttu-id="38748-114">Дополнительные сведения см. в статьях [Merge Replication](../merge/merge-replication.md) (Репликация слиянием) и [Detect and Resolve Merge Replication Conflicts](../merge/advanced-merge-replication-conflict-detection-and-resolution.md) (Обнаружение и разрешение конфликтов репликации слиянием).</span><span class="sxs-lookup"><span data-stu-id="38748-114">For more information, see [Merge Replication](../merge/merge-replication.md) and [Detect and Resolve Merge Replication Conflicts](../merge/advanced-merge-replication-conflict-detection-and-resolution.md).</span></span>  
  
## <a name="understanding-conflicts-and-conflict-detection"></a><span data-ttu-id="38748-115">Основные сведения о конфликтах и обнаружении конфликтов</span><span class="sxs-lookup"><span data-stu-id="38748-115">Understanding Conflicts and Conflict Detection</span></span>  
 <span data-ttu-id="38748-116">В одной базе данных изменения, вносимые в одну строку различными приложениями, не создают конфликта.</span><span class="sxs-lookup"><span data-stu-id="38748-116">In a single database, changes that are made to the same row by different applications do not cause a conflict.</span></span> <span data-ttu-id="38748-117">Это происходит потому, что транзакции сериализуются, а для обработки параллельных изменений используются блокировки.</span><span class="sxs-lookup"><span data-stu-id="38748-117">This is because transactions are serialized, and locks are used to handle concurrent changes.</span></span> <span data-ttu-id="38748-118">В асинхронной распределенной системе, какой является одноранговая репликация, транзакции воздействуют на каждый узел независимо друг от друга, при этом механизм сериализации транзакций по нескольким узлам отсутствует.</span><span class="sxs-lookup"><span data-stu-id="38748-118">In an asynchronous distributed system such as peer-to-peer replication, transactions act independently on each node; and there is no mechanism to serialize transactions across multiple nodes.</span></span> <span data-ttu-id="38748-119">Здесь можно использовать протокол, такой как двухфазная фиксация, но это приводит к существенному снижению производительности.</span><span class="sxs-lookup"><span data-stu-id="38748-119">A protocol like two-phase commit could be used, but this affects performance significantly.</span></span>  
  
 <span data-ttu-id="38748-120">В таких системах, как одноранговая репликация, конфликты не обнаруживаются, если изменения фиксируются на отдельных узлах.</span><span class="sxs-lookup"><span data-stu-id="38748-120">In systems such as peer-to-peer replication, conflicts are not detected when changes are committed at individual peers.</span></span> <span data-ttu-id="38748-121">Но они обнаруживаются в случаях, когда эти изменения реплицируются и применяются на других узлах.</span><span class="sxs-lookup"><span data-stu-id="38748-121">Instead, they are detected when those changes are replicated and applied at other peers.</span></span> <span data-ttu-id="38748-122">При выполнении одноранговой репликации конфликты обнаруживаются с помощью хранимых процедур, которые применяют изменения к каждому узлу в соответствии с содержимым скрытого столбца в каждой опубликованной таблице.</span><span class="sxs-lookup"><span data-stu-id="38748-122">In peer-to-peer replication, conflicts are detected by the stored procedures that apply changes to each node, based on a hidden column in each published table.</span></span> <span data-ttu-id="38748-123">В этом скрытом столбце хранится идентификатор, сочетающий в себе *идентификатор инициатора* , указываемый пользователем для каждого узла, и версию строки.</span><span class="sxs-lookup"><span data-stu-id="38748-123">This hidden column stores an ID that combines an *originator ID* that you specify for each node and the version of the row.</span></span> <span data-ttu-id="38748-124">В ходе синхронизации агент распределителя выполняет процедуры для каждой таблицы.</span><span class="sxs-lookup"><span data-stu-id="38748-124">During synchronization, the Distribution Agent executes procedures for each table.</span></span> <span data-ttu-id="38748-125">Эти процедуры выполняют операции вставки, обновления и удаления с других узлов.</span><span class="sxs-lookup"><span data-stu-id="38748-125">These procedures apply insert, update, and delete operations from other peers.</span></span> <span data-ttu-id="38748-126">Если одна из этих процедур обнаруживает конфликт при считывании значения скрытого столбца, она фиксирует ошибку 22815 со степенью серьезности 16.</span><span class="sxs-lookup"><span data-stu-id="38748-126">If one of the procedures detects a conflict when it reads the hidden column value, it raises error 22815 that has a severity level of 16:</span></span>  
  
 `A conflict of type '%s' was detected at peer %d between peer %d (incoming), transaction id %s  and peer %d (on disk), transaction id %s`  
  
 <span data-ttu-id="38748-127">По умолчанию при возникновении этой ошибки агент распространителя прекращает применение изменений к данному узлу.</span><span class="sxs-lookup"><span data-stu-id="38748-127">By default, this error causes the Distribution Agent to stop applying changes to that node.</span></span> <span data-ttu-id="38748-128">Сведения об обработке выявленных конфликтов см. ниже в разделе «Обработка конфликтов».</span><span class="sxs-lookup"><span data-stu-id="38748-128">For information about how to handle the conflicts that are detected, see "Handling Conflicts" later in this topic.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="38748-129">Работать со скрытым столбцом может только пользователь, вошедший в систему через выделенное административное соединение.</span><span class="sxs-lookup"><span data-stu-id="38748-129">The hidden column can be accessed only by a user that is logged in through the Dedicated Administrator Connection (DAC).</span></span> <span data-ttu-id="38748-130">Информацию о DAC вы найдете в статье [Диагностическое соединение для администраторов баз данных](../../../database-engine/configure-windows/diagnostic-connection-for-database-administrators.md).</span><span class="sxs-lookup"><span data-stu-id="38748-130">For information about DAC, see [Diagnostic Connection for Database Administrators](../../../database-engine/configure-windows/diagnostic-connection-for-database-administrators.md).</span></span>  
  
 <span data-ttu-id="38748-131">При выполнении одноранговой репликации обнаруживаются следующие типы конфликтов.</span><span class="sxs-lookup"><span data-stu-id="38748-131">Peer-to-peer replication detects the following types of conflicts:</span></span>  
  
-   <span data-ttu-id="38748-132">Вставка-вставка</span><span class="sxs-lookup"><span data-stu-id="38748-132">Insert-insert</span></span>  
  
     <span data-ttu-id="38748-133">Все строки во всех таблицах, участвующих в одноранговой репликации, уникальным образом идентифицируются с помощью значений первичного ключа.</span><span class="sxs-lookup"><span data-stu-id="38748-133">All rows in each table participating in peer-to-peer replication are uniquely identified by using primary key values.</span></span> <span data-ttu-id="38748-134">Конфликт «вставка-вставка» имеет место тогда, когда вставка строки с одним и тем же значением ключа осуществляется более чем на одном узле.</span><span class="sxs-lookup"><span data-stu-id="38748-134">An insert-insert conflict occurs when a row with the same key value was inserted at more than one node.</span></span>  
  
-   <span data-ttu-id="38748-135">Обновление-обновление</span><span class="sxs-lookup"><span data-stu-id="38748-135">Update-update</span></span>  
  
     <span data-ttu-id="38748-136">Происходит, когда одна и та же строка обновляется более чем на одном узле.</span><span class="sxs-lookup"><span data-stu-id="38748-136">Occurs when the same row was updated at more than one node.</span></span>  
  
-   <span data-ttu-id="38748-137">Вставка-обновление</span><span class="sxs-lookup"><span data-stu-id="38748-137">Insert-update</span></span>  
  
     <span data-ttu-id="38748-138">Происходит, когда строка обновляется на одном узле, а на другом та же строка удаляется и затем вновь вставляется.</span><span class="sxs-lookup"><span data-stu-id="38748-138">Occurs if a row was updated at one node, but the same row was deleted and then reinserted at another node.</span></span>  
  
-   <span data-ttu-id="38748-139">Вставка-удаление</span><span class="sxs-lookup"><span data-stu-id="38748-139">Insert-delete</span></span>  
  
     <span data-ttu-id="38748-140">Происходит, если строка удаляется на одном узле, а на другом та же строка удаляется и затем вновь вставляется.</span><span class="sxs-lookup"><span data-stu-id="38748-140">Occurs if a row was deleted at one node, but the same row was deleted and then reinserted at another node.</span></span>  
  
-   <span data-ttu-id="38748-141">Обновление-удаление</span><span class="sxs-lookup"><span data-stu-id="38748-141">Update-delete</span></span>  
  
     <span data-ttu-id="38748-142">Происходит, когда строка обновляется на одном узле, а на другом та же строка удаляется.</span><span class="sxs-lookup"><span data-stu-id="38748-142">Occurs if a row was updated at one node, but the same row was deleted at another node.</span></span>  
  
-   <span data-ttu-id="38748-143">Удаление-удаление</span><span class="sxs-lookup"><span data-stu-id="38748-143">Delete-delete</span></span>  
  
     <span data-ttu-id="38748-144">Происходит, когда строка удаляется более чем на одном узле.</span><span class="sxs-lookup"><span data-stu-id="38748-144">Occurs when a row was deleted at more than one node.</span></span>  
  
## <a name="enabling-conflict-detection"></a><span data-ttu-id="38748-145">Активизация функции обнаружения конфликтов</span><span class="sxs-lookup"><span data-stu-id="38748-145">Enabling Conflict Detection</span></span>  
 <span data-ttu-id="38748-146">Для использования обнаружения конфликтов на всех узлах должен выполняться [!INCLUDE[ssKatmai](../../../includes/sskatmai-md.md)] или более поздней версии; кроме того, обнаружение должно быть включено на всех узлах.</span><span class="sxs-lookup"><span data-stu-id="38748-146">To use conflict detection, all nodes must be running [!INCLUDE[ssKatmai](../../../includes/sskatmai-md.md)] or a later version; and detection must be enabled for all nodes.</span></span> <span data-ttu-id="38748-147">В [!INCLUDE[ssKatmai](../../../includes/sskatmai-md.md)] и более поздних версий по умолчанию средства обнаружения конфликтов активизированы в [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)].</span><span class="sxs-lookup"><span data-stu-id="38748-147">In [!INCLUDE[ssKatmai](../../../includes/sskatmai-md.md)] and later versions, by default, conflict detection is enabled in [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)].</span></span> <span data-ttu-id="38748-148">Мы рекомендуем включать функцию обнаружения конфликтов — даже в тех случаях, когда возникновение конфликтов не ожидается.</span><span class="sxs-lookup"><span data-stu-id="38748-148">We recommend that you have detection enabled, even in scenarios in which you do not expect any conflicts.</span></span> <span data-ttu-id="38748-149">Средства обнаружения конфликтов могут быть включены и отключены с помощью среды [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)] или хранимых процедур на языке [!INCLUDE[tsql](../../../includes/tsql-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="38748-149">Conflict detection can be enabled and disabled by using [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)] or [!INCLUDE[tsql](../../../includes/tsql-md.md)] stored procedures:</span></span>  
  
-   <span data-ttu-id="38748-150">Включение и отключение средств обнаружения в [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)] осуществляется либо на странице **Параметры подписки** диалогового окна **Свойства публикации** , либо на странице **Настройка топологии** мастера настройки одноранговой топологии.</span><span class="sxs-lookup"><span data-stu-id="38748-150">You can enable and disable detection in [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)] either by using the **Subscription Options** page of the **Publication Properties** dialog box or the **Configure Topology** page of the Configure Peer-to-Peer Topology Wizard.</span></span>  
  
     <span data-ttu-id="38748-151">Если настройка режима обнаружения конфликтов осуществляется с помощью среды [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)], агент распределителя прекращает применение изменений при обнаружении конфликта.</span><span class="sxs-lookup"><span data-stu-id="38748-151">If you configure conflict detection by using [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)], the Distribution Agent is configured to stop applying changes when a conflict is detected.</span></span>  
  
-   <span data-ttu-id="38748-152">Кроме того, режим обнаружения можно включать и отключать с помощью следующих хранимых процедур: [sp_addpublication](/sql/relational-databases/system-stored-procedures/sp-addpublication-transact-sql) или [sp_configure_peerconflictdetection](/sql/relational-databases/system-stored-procedures/sp-configure-peerconflictdetection-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="38748-152">You can also enable and disable detection by using the following stored procedures: [sp_addpublication](/sql/relational-databases/system-stored-procedures/sp-addpublication-transact-sql) or [sp_configure_peerconflictdetection](/sql/relational-databases/system-stored-procedures/sp-configure-peerconflictdetection-transact-sql).</span></span>  
  
     <span data-ttu-id="38748-153">В случае настройки режима обнаружения конфликтов с помощью хранимых процедур пользователь может указать, должен ли агент распространителя прекратить применение изменений при обнаружении конфликта.</span><span class="sxs-lookup"><span data-stu-id="38748-153">If you configure conflict detection by using stored procedures, you can specify whether the Distribution Agent should stop applying changes when a conflict is detected.</span></span> <span data-ttu-id="38748-154">По умолчанию агент прекращает применение изменений.</span><span class="sxs-lookup"><span data-stu-id="38748-154">The default is for the agent to stop.</span></span> <span data-ttu-id="38748-155">Рекомендуется использовать настройки по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="38748-155">We recommend that you use the default setting.</span></span>  
  
## <a name="handling-conflicts"></a><span data-ttu-id="38748-156">Обработка конфликтов</span><span class="sxs-lookup"><span data-stu-id="38748-156">Handling Conflicts</span></span>  
 <span data-ttu-id="38748-157">Когда в ходе одноранговой репликации имеет место конфликт, формируется предупреждение об обнаружении конфликтов в одноранговой репликации.</span><span class="sxs-lookup"><span data-stu-id="38748-157">When a conflict occurs in peer-to-peer replication, the Peer-to-peer conflict detection alert is raised.</span></span> <span data-ttu-id="38748-158">Рекомендуется настраивать это предупреждение таким образом, чтобы оповещение происходило при возникновении конфликта.</span><span class="sxs-lookup"><span data-stu-id="38748-158">We recommend that you configure this alert so that you are notified when a conflict occurs.</span></span> <span data-ttu-id="38748-159">Дополнительные сведения об оповещениях см. в статье [Использование предупреждений для событий агента репликации](../agents/use-alerts-for-replication-agent-events.md).</span><span class="sxs-lookup"><span data-stu-id="38748-159">For more information about alerts, see [Use Alerts for Replication Agent Events](../agents/use-alerts-for-replication-agent-events.md).</span></span>  
  
 <span data-ttu-id="38748-160">По прекращении действий агента распространителя и после направления предупреждения обрабатывайте происшедший конфликт в соответствии с одним из следующих подходов.</span><span class="sxs-lookup"><span data-stu-id="38748-160">After the Distribution Agent stops and the alert is raised, use one of the following approaches to handle the conflicts that occurred:</span></span>  
  
-   <span data-ttu-id="38748-161">Выполните повторную инициализацию узла, на котором был обнаружен конфликт, с резервной копии узла, содержащей необходимые данные (рекомендуемый подход).</span><span class="sxs-lookup"><span data-stu-id="38748-161">Reinitialize the node where the conflict was detected from the backup of a node that contains the required data (the recommended approach).</span></span> <span data-ttu-id="38748-162">Этот метод гарантирует сохранение данных в согласованном состоянии.</span><span class="sxs-lookup"><span data-stu-id="38748-162">This method ensures that data is in a consistent state.</span></span>  
  
-   <span data-ttu-id="38748-163">Попытайтесь вновь синхронизировать узел, дав возможность агенту распространителя продолжить применение изменений.</span><span class="sxs-lookup"><span data-stu-id="38748-163">Try to synchronize the node again by enabling the Distribution Agent to continue to apply changes:</span></span>  
  
    1.  <span data-ttu-id="38748-164">Выполнить [sp_changepublication](/sql/relational-databases/system-stored-procedures/sp-changepublication-transact-sql): укажите "p2p_continue_onconflict" для @property параметра и `true` для @value параметра.</span><span class="sxs-lookup"><span data-stu-id="38748-164">Execute [sp_changepublication](/sql/relational-databases/system-stored-procedures/sp-changepublication-transact-sql): specify 'p2p_continue_onconflict' for the @property parameter and `true` for the @value parameter.</span></span>  
  
    2.  <span data-ttu-id="38748-165">Перезапустите агент распространителя.</span><span class="sxs-lookup"><span data-stu-id="38748-165">Restart the Distribution Agent.</span></span>  
  
    3.  <span data-ttu-id="38748-166">Проверьте обнаруженные конфликты с помощью средства просмотра конфликтов и определите вовлеченные в конфликты строки, тип конфликта, а также выигравшую сторону.</span><span class="sxs-lookup"><span data-stu-id="38748-166">Verify the conflicts that were detected by using the conflict viewer and determine the rows that were involved, the type of conflict, and the winner.</span></span> <span data-ttu-id="38748-167">Конфликт разрешается в соответствии со значением идентификатора инициатора, указанным пользователем во время настройки: победителем в конфликте становится строка, инициированная на узле с самым высоким значением идентификатора.</span><span class="sxs-lookup"><span data-stu-id="38748-167">The conflict is resolved based on the originator ID value that you specified during configuration: the row that originated at the node with the highest ID wins the conflict.</span></span> <span data-ttu-id="38748-168">Дополнительные сведения см. в статье [Просмотр конфликтов данных для публикаций транзакций (среда SQL Server Management Studio)](../view-data-conflicts-for-transactional-publications-sql-server-management-studio.md).</span><span class="sxs-lookup"><span data-stu-id="38748-168">For more information, see [View Data Conflicts for Transactional Publications &#40;SQL Server Management Studio&#41;](../view-data-conflicts-for-transactional-publications-sql-server-management-studio.md).</span></span>  
  
    4.  <span data-ttu-id="38748-169">Выполните проверку и убедитесь в том, что конвергенция конфликтующих строк завершилась верно.</span><span class="sxs-lookup"><span data-stu-id="38748-169">Run validation to ensure that the conflicting rows converged correctly.</span></span> <span data-ttu-id="38748-170">Дополнительные сведения см. в статье [Проверка реплицированных данных](../validate-data-at-the-subscriber.md).</span><span class="sxs-lookup"><span data-stu-id="38748-170">For more information, see [Validate Replicated Data](../validate-data-at-the-subscriber.md).</span></span>  
  
        > [!NOTE]  
        >  <span data-ttu-id="38748-171">Если по выполнении этого шага несогласованность данных сохраняется, необходимо вручную обновить строки узла с самым высоким приоритетом, а затем разрешить распространение изменений с этого узла.</span><span class="sxs-lookup"><span data-stu-id="38748-171">If data is inconsistent after this step, you must manually update rows on the node that has the highest priority, and then let the changes propagate from this node.</span></span> <span data-ttu-id="38748-172">Если в топологии более нет конфликтующих изменений, все узлы будут приведены в согласованное состояние.</span><span class="sxs-lookup"><span data-stu-id="38748-172">If there are no further conflicting changes in the topology, all nodes will be brought to a consistent state.</span></span>  
  
    5.  <span data-ttu-id="38748-173">Выполнить [sp_changepublication](/sql/relational-databases/system-stored-procedures/sp-changepublication-transact-sql): укажите "p2p_continue_onconflict" для @property параметра и `false` для @value параметра.</span><span class="sxs-lookup"><span data-stu-id="38748-173">Execute [sp_changepublication](/sql/relational-databases/system-stored-procedures/sp-changepublication-transact-sql): specify 'p2p_continue_onconflict' for the @property parameter and `false` for the @value parameter.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="38748-174">См. также:</span><span class="sxs-lookup"><span data-stu-id="38748-174">See Also</span></span>  
 [<span data-ttu-id="38748-175">Peer-to-Peer Transactional Replication</span><span class="sxs-lookup"><span data-stu-id="38748-175">Peer-to-Peer Transactional Replication</span></span>](peer-to-peer-transactional-replication.md)  
  
  
