---
title: Администрирование агента репликации | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- Snapshot Agent, administering
- Log Reader Agent, administering
- Queue Reader Agent, administering
- shared agents [SQL Server replication]
- Merge Agent, administering
- Distribution Agent, administering
- agents [SQL Server replication], administering
- replication cleanup jobs [SQL Server]
- administering replication, agents
- replication [SQL Server], administering
- independent agents [SQL Server replication]
ms.assetid: f27186b8-b1b2-4da0-8b2b-91f632c2ab7e
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 99cf9be6b31310e5ae0ebac3c096851ac4f63452
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87657673"
---
# <a name="replication-agent-administration"></a>Администрирование агента репликации
  Агенты репликации выполняют многие задачи, связанные с репликацией, включая создание копий схемы и данных, обнаружение обновлений на издателе или подписчике и распространение изменений между серверами. По умолчанию агенты репликации выполняются в рамках отдельных шагов задания агента [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]. Агенты являются обычными исполняемыми приложениями, поэтому их можно вызывать непосредственно из командной строки или пакетных скриптов. Каждый агент репликации поддерживает набор параметров исполнения, используемых для управления его работой. Эти параметры задаются в профиле агента или в командной строке.  
  
> [!IMPORTANT]  
>  Служба агента [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] по умолчанию отключается при установке [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , если только во время установки не будет явно выбран режим автоматического запуска.  
  
 Файлы агента репликации находятся в папке [!INCLUDE[ssInstallPathVar](../../../includes/ssinstallpathvar-md.md)]\COM. В следующей таблице перечислены имена исполняемых объектов и файлов. Щелкните ссылку для соответствующего агента, чтобы просмотреть информацию о его параметрах.  
  
|Исполняемый объект агента|Имя файла|  
|----------------------|---------------|  
|[Replication Snapshot Agent](replication-snapshot-agent.md)|snapshot.exe|  
|[Replication Distribution Agent](replication-distribution-agent.md)|distrib.exe|  
|[Агент чтения журнала репликации](replication-log-reader-agent.md)|logread.exe|  
|[Replication Queue Reader Agent](replication-queue-reader-agent.md)|qrdrsvc.exe|  
|[Replication Merge Agent](replication-merge-agent.md)|replmerg.exe|  
  
 Кроме агентов репликации, для репликации существует ряд заданий, выполняющих обслуживание по расписанию и по требованию.  
  
 **Запуск агентов и задания обслуживания**  
  
-   [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)]и монитор репликации: [Запуск и завершение работы агента репликации &#40;SQL Server Management Studio&#41;](start-and-stop-a-replication-agent-sql-server-management-studio.md).  
  
-   Программирование репликации: [Replication Agent Executables Concepts](../concepts/replication-agent-executables-concepts.md)  
  
## <a name="agent-profiles"></a>Профили агентов  
 При настройке репликации на распространителе устанавливается набор профилей агентов. Профиль агента содержит набор параметров, используемых при каждом запуске агента: каждый агент регистрируется на распространителе во время запуска и запрашивает параметры в своем профиле. Служба репликации предоставляет каждому агенту профиль по умолчанию и набор дополнительных предопределенных профилей для агента чтения журнала, агента распространителя и агента слияния. Кроме предоставляемых профилей можно создать профили в соответствии с требованиями приложений. Дополнительные сведения см. в статье [Replication Agent Profiles](replication-agent-profiles.md).  
  
 Дополнительные сведения о прямом указании параметров командной строки см. в статье [Основные понятия исполняемых файлов агента репликации](../concepts/replication-agent-executables-concepts.md).  
  
## <a name="monitoring-replication-agents"></a>Наблюдение за агентами репликации  
 Монитор репликации позволяет просматривать сведения и выполнять задачи, связанные с каждым из агентов репликации. В приведенном ниже списке перечислены все агенты, для которых существуют вкладки в мониторе репликации, а также дается ссылка на раздел, где описывается порядок доступа к этим вкладкам.  
  
-   С публикациями в мониторе репликации связаны следующие агенты.  
  
    -   агент моментальных снимков  
  
    -   Агент чтения журнала.  
  
    -   Агент чтения очереди.  
  
     Доступ к сведениям и задачам, связанным с этими агентами, осуществляется на вкладке **агенты** . Дополнительные сведения см. в разделе [Просмотр сведений и выполнение задач с помощью монитора репликации](../monitor/view-information-and-perform-tasks-replication-monitor.md).  
  
-   С подписками в мониторе репликации связаны следующие агенты:  
  
    -   Агент распространителя  
  
    -   Агент слияния.  
  
     Получить доступ к сведениям и задачам, связанным с этими агентами, можно на следующих вкладках: **Список наблюдения за подписками** (доступна для каждого издателя) или вкладка **Все подписки** (доступна для каждой публикации). Дополнительные сведения см. в статье [Просмотр сведений и выполнение задач с помощью монитора репликации](../monitor/view-information-and-perform-tasks-replication-monitor.md).  
  
## <a name="independent-and-shared-agents"></a>Независимые и общие агенты  
 Независимым является агент, обслуживающий одну подписку. Общий агент обслуживает несколько подписок. Если подпискам, обслуживаемым одним и тем же общим агентом, требуется синхронизация, они по умолчанию ожидают в очереди, пока общий агент обслуживает их по одной. При использовании независимых агентов снижается задержка, поскольку агент находится в состоянии готовности в любой момент, когда требуется синхронизация подписки. В репликациях слиянием всегда используются независимые агенты, в репликациях транзакций независимые агенты используются по умолчанию для публикаций, созданных с помощью мастера создания публикаций (в предыдущих версиях [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]в репликациях транзакций по умолчанию использовались общие агенты).  
  
## <a name="replication-maintenance-jobs"></a>Задания обслуживания репликации  
 Следующие задания используются службой репликаций для выполнения обслуживания по расписанию или обслуживания по требованию.  
  
|Очистка задания|Описание|Расписание по умолчанию|  
|------------------|-----------------|----------------------|  
|Очистка журнала агента: Distribution|Удаляется журнал агента репликации из базы данных распространителя.|Запускается каждые десять минут|  
|Очистка распространения: Distribution|Удаляются реплицированные транзакции из базы данных распространителя. Деактивируются подписки, которые не были синхронизированы в течение максимального срока хранения распространения.|Запускается каждые десять минут|  
|Очистка истекшей подписки|Обнаруживаются и удаляются подписки с истекшим сроком из баз данных публикации.|Запускается каждый день в 1:00.|  
|Повторная инициализация подписок, имеющих сбои при выполнении проверки данных|Обнаруживаются все подписки со сбоями при выполнении проверки данных, и они помечаются для повторной инициализации. При следующем запуске агента слияния или агента распространителя к подписчикам применяется новый моментальный снимок.|Нет расписания по умолчанию (по умолчанию отключено).|  
|Проверка агентов репликации|Обнаруживаются агенты репликации, которые не регистрируют свои действия в журнале. В журнале событий [!INCLUDE[msCoName](../../../includes/msconame-md.md)] Windows делается запись, если при выполнении шага задания происходит сбой.|Запускается каждые десять минут.|  
|Обновитель наблюдения репликации для распространения|Обновляет кэшированные запросы, используемые монитором репликации.|Выполняется постоянно.|  
  
## <a name="see-also"></a>См. также:  
 [Наблюдение за репликацией](../monitoring-replication.md)  
  
  
