---
title: Занятие 3. Настройка распространения | Документация Майкрософт
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- replication [SQL Server], tutorials
ms.assetid: f248984a-0b59-4c2f-a56d-31f8dafe72b5
author: rothja
ms.author: jroth
ms.openlocfilehash: 52b284b6186e599b7afe73bd37ab0a8348ec38da
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87739701"
---
# <a name="lesson-3-configuring-distribution"></a>Урок 3. Настройка распространения
  На этом занятии предстоит настроить распространение на издателе и установить необходимые разрешения на базу данных публикации и распространителя. Если распространитель уже настроен, необходимо отключить публикацию и распространение перед тем, как приступить к занятию. Не следует этого выполнять в случае, если необходимо сохранить существующую топологию репликации.  
  
 Настройка издателя с удаленным распространителем не рассматривается в этом учебнике.  
  
### <a name="configuring-distribution-at-the-publisher"></a>Настройка распространителя на издателе  
  
1.  Подключитесь к издателю в среде [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], а затем раскройте узел сервера.  
  
2.  Щелкните правой кнопкой мыши папку **Репликация** и выберите пункт **Настройка распространения**.  
  
    > [!NOTE]  
    >  Если подключение к [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] установлено с помощью **localhost** , а не фактического имени сервера, на экране появится предупреждение о том, что [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] не может подключиться к серверу **'localhost'**. В диалоговом окне предупреждения нажмите кнопку **ОК** . В диалоговом окне **Соединение с сервером** измените значение в поле **Имя сервера** с **localhost** на имя своего сервера. Нажмите кнопку **Подключиться**.  
  
     Будет запущен мастер настройки распространителя.  
  
3.  На странице **распространитель** выберите **"** _\<ServerName>_ **", будет работать как собственный распространитель; SQL Server создаст базу данных распространителя и журнал**, а затем нажмите кнопку **Далее**.  
  
4.  Если служба [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] не запущена, на странице [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]**Запуск агента** выберите **Да**и настройте автоматический запуск службы агента [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] . Щелкните **Далее**.  
  
5.  **\\\\** \<_Machine_Name> В текстовое поле **Папка моментальных снимков** введите _**\repldata** , где \<*Machine_Name> * — это имя издателя, а затем нажмите кнопку **Далее**.  
  
6.  Примите значения по умолчанию на оставшихся страницах мастера.  
  
7.  Чтобы включить распространение, нажмите кнопку **Готово** .  
  
### <a name="setting-database-permissions-at-the-publisher"></a>Установка разрешений базы данных на издателе  
  
1.  В [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] разверните узел **Безопасность**, щелкните правой кнопкой мыши элемент **имена входа**и выберите **создать имя входа**.  
  
2.  На странице **Общие** нажмите кнопку **Поиск**, введите \<_Machine_Name> _**\ repl_snapshot** в поле **введите имя объекта** , где \<*Machine_Name> * — это имя локального сервера издателя, щелкните **Проверить имена**, а затем нажмите кнопку **ОК**.  
  
3.  На странице **Сопоставление пользователей** в списке Пользователи, **сопоставленные с этим именем входа** выберите **распределение** и [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] базы данных.  
  
     В списке **членство в роли базы данных** выберите `db_owner` роль для имени входа для обеих баз данных.  
  
4.  Нажмите кнопку **ОК** , чтобы создать имя входа.  
  
5.  Для создания имени входа для локальной учетной записи repl_logreader повторите шаги 1-4. Это имя входа также должно быть сопоставлено с пользователями, которые являются членами `db_owner` предопределенной роли базы данных в базах данных **Distribution** и **AdventureWorks** .  
  
6.  Для создания имени входа для локальной учетной записи repl_distribution повторите шаги 1-4. Это имя входа должно быть сопоставлено с пользователем, который является членом `db_owner` предопределенной роли базы данных в базе данных **распространителя** .  
  
7.  Для создания имени входа для локальной учетной записи repl_merge повторите шаги 1-4. С этим именем входа должны быть сопоставлены пользователи в базах данных **distribution** и **AdventureWorks** .  
  
## <a name="see-also"></a>См. также:  
 [Настройка распространения](configure-distribution.md)   
 [Replication Agent Security Model](security/replication-agent-security-model.md) (Модель безопасности агента репликации)  
  
  
