---
title: Организация безопасности распространителя | Документация Майкрософт
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- security [SQL Server replication], Distributors
- Distributors [SQL Server replication], security
ms.assetid: 76d78229-0ff2-4aa4-9b4e-ad97534c5296
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: d55f5e214f89b678367124da8342ec9801ab686a
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87654146"
---
# <a name="secure-the-distributor"></a><span data-ttu-id="2d571-102">Организация безопасности распространителя</span><span class="sxs-lookup"><span data-stu-id="2d571-102">Secure the Distributor</span></span>
  <span data-ttu-id="2d571-103">К распространителю подключаются следующие агенты репликации: агент чтения журнала, агент моментальных снимков, агент чтения очереди, агент распространителя и агент слияния.</span><span class="sxs-lookup"><span data-stu-id="2d571-103">The following replication agents connect to the Distributor: the Log Reader Agent, Snapshot Agent, Queue Reader Agent, Distribution Agent, and Merge Agent.</span></span> <span data-ttu-id="2d571-104">Важно обеспечить для каждого из этих агентов соответствующее имя входа, соблюдая при этом принцип предоставления минимальных необходимых прав, а также защищая хранилище всех паролей:</span><span class="sxs-lookup"><span data-stu-id="2d571-104">It is important to provide an appropriate login for each of these agents while following the principle of granting the minimal rights necessary and also protecting the storage of all passwords:</span></span>  
  
-   <span data-ttu-id="2d571-105">Сведения об управлении именами для входа и паролями см. в статье [Управление именами для входа и паролями при репликации](identity-and-access-control-replication.md#manage-logins-and-passwords-in-replication).</span><span class="sxs-lookup"><span data-stu-id="2d571-105">For information about managing logins and passwords, see [Manage Logins and Passwords in Replication](identity-and-access-control-replication.md#manage-logins-and-passwords-in-replication).</span></span>  
  
-   <span data-ttu-id="2d571-106">Дополнительные сведения о разрешениях, необходимых каждому агенту, см. в разделе [Replication Agent Security Model](replication-agent-security-model.md).</span><span class="sxs-lookup"><span data-stu-id="2d571-106">For detailed information about the permissions required for each agent, see [Replication Agent Security Model](replication-agent-security-model.md).</span></span>  
  
 <span data-ttu-id="2d571-107">В дополнение к надлежащему управлению именами входа и паролями важно понимать роль канала связи с удаленным сервером **repl_distributor** и учетной записи **distributor_admin** .</span><span class="sxs-lookup"><span data-stu-id="2d571-107">In addition to managing logins and passwords appropriately, it is important to understand the role of the **repl_distributor** remote server link and the **distributor_admin** account.</span></span>  
  
## <a name="securing-the-connection-from-the-publisher-to-the-distributor"></a><span data-ttu-id="2d571-108">Защита соединения издателя с распространителем</span><span class="sxs-lookup"><span data-stu-id="2d571-108">Securing the Connection from the Publisher to the Distributor</span></span>  
 <span data-ttu-id="2d571-109">Система репликации автоматически настраивает удаленный сервер **repl_distributor**для поддержания связи, необходимой при выполнении административных хранимых процедур на издателе и при обновлении данных на распространителе.</span><span class="sxs-lookup"><span data-stu-id="2d571-109">To support the communication necessary when administrative stored procedures execute at the Publisher and update information at the Distributor, replication automatically configures the remote server **repl_distributor**.</span></span> <span data-ttu-id="2d571-110">Запись удаленного сервера **repl_distributor** используется для связи с базой данных распространителя вне зависимости от того, содержится ли эта база данных на экземпляре издателя (локальный распространитель) или находится на удаленном экземпляре [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] (удаленный распространитель).</span><span class="sxs-lookup"><span data-stu-id="2d571-110">The **repl_distributor** remote server entry is used for communication to the distribution database regardless of whether the distribution database is contained within the Publisher instance (a local Distributor) or resides within a remote [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance (a remote Distributor).</span></span>  
  
 <span data-ttu-id="2d571-111">Когда база данных распространителя содержится на локальном экземпляре, формируется и автоматически настраивается случайный пароль.</span><span class="sxs-lookup"><span data-stu-id="2d571-111">When the distribution database is contained on a local instance, a random password is generated and configured automatically.</span></span> <span data-ttu-id="2d571-112">Когда база данных распространителя находится на удаленном экземпляре сервера, администратор настраивает общий пароль при настройке издателя и распространителя; в дальнейшем этот пароль используется для проверки подлинности трафика, проходящего через канал связи с сервером **repl_distributor** .</span><span class="sxs-lookup"><span data-stu-id="2d571-112">When the distribution database is located on a remote instance, the administrator configures a shared password during setup of the Publisher and Distributor; this password is then used to provide authentication of traffic that traverses the **repl_distributor** link.</span></span>  
  
 <span data-ttu-id="2d571-113">Распространитель использует запись удаленного сервера **repl_distributor** , чтобы удостовериться в том, что удаленный сервер настроен на распространителе как издатель, проверяет пароль, предъявляемый издателем, а во время выполнения хранимой процедуры проверяет, что это — хранимая процедура репликации.</span><span class="sxs-lookup"><span data-stu-id="2d571-113">The Distributor uses the **repl_distributor** remote server entry to verify that the calling server is configured as a Publisher at the Distributor, validates the password supplied by the Publisher, and validates that the stored procedure is a replication stored procedure during execution.</span></span>  
  
 <span data-ttu-id="2d571-114">Пароль, устанавливаемый для записи удаленного сервера **repl_distributor** при первоначальной настройке, связан с именем входа [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , **distributor_admin**, добавляемым к предопределенной роли сервера **sysadmin** на распространителе.</span><span class="sxs-lookup"><span data-stu-id="2d571-114">The password configured for the **repl_distributor** remote server entry during setup is associated with a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] login, **distributor_admin**, which is added to the **sysadmin** fixed server role at the Distributor.</span></span> <span data-ttu-id="2d571-115">Имя входа **distributor_admin** используется хранимыми процедурами репликации при подключении к распространителю.</span><span class="sxs-lookup"><span data-stu-id="2d571-115">The **distributor_admin** login is used by replication stored procedures when connecting to the Distributor.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="2d571-116">Не меняйте пароль для имени **distributor_admin** вручную.</span><span class="sxs-lookup"><span data-stu-id="2d571-116">Do not change the password for the **distributor_admin** manually.</span></span> <span data-ttu-id="2d571-117">Всегда пользуйтесь хранимой процедурой **sp_changedistributor_password** или диалоговыми окнами **Свойства распространителя** и **Обновление паролей репликации** в среде [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)], потому что в этом случае изменения паролей применяются к локальным публикациям автоматически.</span><span class="sxs-lookup"><span data-stu-id="2d571-117">Always use the **sp_changedistributor_password** stored procedure, or the **Distributor Properties** or **Update Replication Passwords** dialog boxes in [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)], because password changes are then applied to local publications automatically.</span></span>  
  
## <a name="snapshot-folder-security"></a><span data-ttu-id="2d571-118">Безопасность папки моментальных снимков</span><span class="sxs-lookup"><span data-stu-id="2d571-118">Snapshot Folder Security</span></span>  
 <span data-ttu-id="2d571-119">Убедитесь в том, что учетной записи, под которой выполняется агент слияния (для репликации слиянием) или агент распространителя (для репликации моментальных снимков и репликации транзакций), предоставлен доступ к хранилищу моментальных снимков на чтение, а учетной записи, под которой выполняется агент моментальных снимков, предоставлен доступ к хранилищу моментальных снимков на запись.</span><span class="sxs-lookup"><span data-stu-id="2d571-119">Ensure that the snapshot share has read access granted to the account under which the Merge Agent (for merge replication) or Distribution Agent (for snapshot or transactional replication) runs and write access granted to the account under which the Snapshot Agent runs.</span></span> <span data-ttu-id="2d571-120">Дополнительные сведения о папке моментальных снимков см. в статье [Организация безопасности папки моментальных снимков](secure-the-snapshot-folder.md).</span><span class="sxs-lookup"><span data-stu-id="2d571-120">For more information about the snapshot folder, see [Secure the Snapshot Folder](secure-the-snapshot-folder.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="2d571-121">См. также:</span><span class="sxs-lookup"><span data-stu-id="2d571-121">See Also</span></span>  
 <span data-ttu-id="2d571-122">[Просмотр и изменение параметров безопасности репликации](view-and-modify-replication-security-settings.md) </span><span class="sxs-lookup"><span data-stu-id="2d571-122">[View and Modify Replication Security Settings](view-and-modify-replication-security-settings.md) </span></span>  
 <span data-ttu-id="2d571-123">[Включение шифрования соединений в ядре СУБД (диспетчер конфигурации SQL Server)](../../../database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine.md) </span><span class="sxs-lookup"><span data-stu-id="2d571-123">[Enable Encrypted Connections to the Database Engine &#40;SQL Server Configuration Manager&#41;](../../../database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine.md) </span></span>  
 <span data-ttu-id="2d571-124">[Replication Security Best Practices](replication-security-best-practices.md) </span><span class="sxs-lookup"><span data-stu-id="2d571-124">[Replication Security Best Practices](replication-security-best-practices.md) </span></span>  
 [<span data-ttu-id="2d571-125">Безопасность Репликация SQL Server</span><span class="sxs-lookup"><span data-stu-id="2d571-125">SQL Server Replication Security</span></span>](view-and-modify-replication-security-settings.md)  
  
  
