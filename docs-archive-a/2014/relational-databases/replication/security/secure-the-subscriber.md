---
title: Организация безопасности подписчика | Документация Майкрософт
ms.custom: ''
ms.date: 04/26/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- subscriptions [SQL Server replication], security
- Subscribers [SQL Server replication], security
- security [SQL Server replication], Subscribers
ms.assetid: c8f0d62a-8b5d-4a21-9aec-223da52bb708
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 1f03b9a202c3c49f147368460518a579f28dc850
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87666488"
---
# <a name="secure-the-subscriber"></a>Организация безопасности подписчика
  Агенты слияния и распространителей подключаются к подписчику. Эти подключения могут выполняться в контексте имени входа [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] или имени входа Windows. Важно предоставить для этих агентов соответствующее имя входа, придерживаясь принципа предоставления минимально необходимых прав и обеспечивая защиту хранилища всех паролей. Сведения о разрешениях, необходимых для каждого агента, см. в разделе [Replication Agent Security Model](replication-agent-security-model.md).  
  
## <a name="distribution-agent"></a>Агент распространителя  
 Может использоваться либо один агент распространителя на подписку (независимый агент, установленный по умолчанию для публикаций, созданных в мастере создания публикаций), либо один агент распространителя на пару баз данных публикации и подписки (общий агент). T  
  
 Указание сведений о подключении для принудительной подписки рассматривается в статье [Создание принудительной подписки](../create-a-push-subscription.md).  
  
 Указание сведений о подключении для подписки по запросу рассматривается в статье [Создание подписки по запросу](../create-a-pull-subscription.md).  
  
## <a name="merge-agent"></a>Агент слияния.  
 Каждая подписка на публикацию слиянием имеет собственный агент, который подключается к издателю и обновляет как издателя, так и подписчика.  
  
 Указание сведений о подключении для принудительной подписки рассматривается в статье [Создание принудительной подписки](../create-a-push-subscription.md).  
  
 Указание сведений о подключении для подписки по запросу рассматривается в статье [Создание подписки по запросу](../create-a-pull-subscription.md).  
  
## <a name="immediate-updating-subscriptions"></a>Немедленно обновляемые подписки  
 Когда выполняется настройка немедленно обновляемой подписки, на подписчике выбирается учетная запись, от имени которой устанавливается подключение к издателю. Соединения используются триггерами, которые запускаются на подписчике и распространяют изменения на издатель. Для этого типа соединения имеются следующие три параметра.  
  
-   Связанный сервер, который создает репликация. Подключение устанавливается с учетными данными, задаваемыми во время настройки.  
  
-   Связанный сервер, создаваемый репликацией; соединение устанавливается с использованием учетных данных пользователя, который вносит изменения на подписчике.  
  
-   Уже определенный связанный или удаленный сервер.  
  
> [!IMPORTANT]  
>  Чтобы указать сведения о подключении, используйте хранимую процедуру [sp_link_publication &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-link-publication-transact-sql). Также можно воспользоваться страницей **Имя входа для обновляемых подписок** в мастере создания подписки, который вызывает хранимую процедуру **sp_link_publication**. При определенных обстоятельствах выполнение этой хранимой процедуры может завершиться ошибкой, если подписчик работает с [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] с пакетом обновлений 1, а издатель работает с более ранней версией. Если хранимая процедура завершается ошибкой в этом сценарии, обновите издатель до версии [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] с пакетом обновлений 1 (SP1) или более поздней версии.  
  
 Дополнительные сведения см. в статьях [Создание обновляемых подписок для публикаций транзакций](../publish/create-an-updatable-subscription-to-a-transactional-publication.md) и [Просмотр и изменение параметров безопасности репликации](view-and-modify-replication-security-settings.md).  
  
> [!IMPORTANT]  
>  Учетная запись, заданная для соединения, должна предоставлять только разрешения для вставки, обновления и удаления данных в представлениях, которые репликация создает в базе данных публикации. Она не должна иметь никаких дополнительных разрешений. Предоставьте разрешения на представления в базе данных публикации, которые имеют имена в виде **syncobj_** _\<HexadecimalNumber>_ , для учетной записи, настроенной на каждом подписчике.  
  
## <a name="queued-updating-subscriptions"></a>Подписки, обновляемые посредством очередей  
 При настройке обновляемых посредством очередей подписок необходимо учитывать два аспекта, касающихся безопасности:  
  
-   Для каждого распространителя существует только один агент чтения очереди. Рекомендуется настраивать для каждого распространителя не более одной публикации, для которой включены обновляемые посредством очередей подписки.  
  
-   Агент чтения очереди осуществляет подключения к распространителю, издателю и к каждому подписчику:  
  
    -   Учетная запись, под которой агент выполняется и устанавливает подключения к распространителю, задается при создании агента (если используется мастер создания публикации, агент создается при создании публикации, для которой включены подписки, обновляемые по очереди).  
  
    -   Учетная запись, под которой агент выполняет подключения к издателю, задается при настройке распространения для издателя. Укажите учетную запись Windows, под которой выполняется агент, или учетную запись [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .  
  
    -   Учетная запись, под которой агент выполняет подключения к подписчику, задается при создании подписки.  
  
    > [!IMPORTANT]  
    >  Используйте проверку подлинности [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] для подключений к подписчикам, и задавайте разные учетные записи для подключения к каждому подписчику. При использовании подписки по запросу репликация всегда устанавливает соединение для использования проверки подлинности Windows (для подписок по запросу репликация не может обратиться к метаданным на подписчике, необходимым для использования проверки подлинности [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] ). В этом случае измените соединение таким образом, чтобы использовать проверку подлинности [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] после настройки подписки.  
  
     Дополнительные сведения см. в разделе "Как Создание обновляемых подписок для публикаций транзакций (среда SQL Server Management Studio)" и [Просмотр и изменение параметров безопасности репликации](view-and-modify-replication-security-settings.md).  
  
## <a name="see-also"></a>См. также:  
 [Включение шифрования соединений в ядре СУБД (диспетчер конфигурации SQL Server)](../../../database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine.md)   
 [Replication Security Best Practices](replication-security-best-practices.md)   
 [Безопасность Репликация SQL Server](view-and-modify-replication-security-settings.md)  
  
  
