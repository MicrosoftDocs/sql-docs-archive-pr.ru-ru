---
title: Организация безопасности подписчика | Документация Майкрософт
ms.custom: ''
ms.date: 04/26/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- subscriptions [SQL Server replication], security
- Subscribers [SQL Server replication], security
- security [SQL Server replication], Subscribers
ms.assetid: c8f0d62a-8b5d-4a21-9aec-223da52bb708
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 1f03b9a202c3c49f147368460518a579f28dc850
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87666488"
---
# <a name="secure-the-subscriber"></a><span data-ttu-id="7976f-102">Организация безопасности подписчика</span><span class="sxs-lookup"><span data-stu-id="7976f-102">Secure the Subscriber</span></span>
  <span data-ttu-id="7976f-103">Агенты слияния и распространителей подключаются к подписчику.</span><span class="sxs-lookup"><span data-stu-id="7976f-103">Merge Agents and Distribution Agents connect to the Subscriber.</span></span> <span data-ttu-id="7976f-104">Эти подключения могут выполняться в контексте имени входа [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] или имени входа Windows.</span><span class="sxs-lookup"><span data-stu-id="7976f-104">These connections can be made under the context of a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] login or a Windows login.</span></span> <span data-ttu-id="7976f-105">Важно предоставить для этих агентов соответствующее имя входа, придерживаясь принципа предоставления минимально необходимых прав и обеспечивая защиту хранилища всех паролей.</span><span class="sxs-lookup"><span data-stu-id="7976f-105">It is important to provide an appropriate login for these agents while following the principle of granting the minimal rights necessary and also protecting the storage of all passwords.</span></span> <span data-ttu-id="7976f-106">Сведения о разрешениях, необходимых для каждого агента, см. в разделе [Replication Agent Security Model](replication-agent-security-model.md).</span><span class="sxs-lookup"><span data-stu-id="7976f-106">For information about the permissions required for each agent, see [Replication Agent Security Model](replication-agent-security-model.md).</span></span>  
  
## <a name="distribution-agent"></a><span data-ttu-id="7976f-107">Агент распространителя</span><span class="sxs-lookup"><span data-stu-id="7976f-107">Distribution Agent</span></span>  
 <span data-ttu-id="7976f-108">Может использоваться либо один агент распространителя на подписку (независимый агент, установленный по умолчанию для публикаций, созданных в мастере создания публикаций), либо один агент распространителя на пару баз данных публикации и подписки (общий агент).</span><span class="sxs-lookup"><span data-stu-id="7976f-108">There is either one Distribution Agent per subscription (an independent agent, the default for publications created in the New Publication Wizard) or one Distribution Agent per publication database and subscription database pair (a shared agent).</span></span> <span data-ttu-id="7976f-109">T</span><span class="sxs-lookup"><span data-stu-id="7976f-109">T</span></span>  
  
 <span data-ttu-id="7976f-110">Указание сведений о подключении для принудительной подписки рассматривается в статье [Создание принудительной подписки](../create-a-push-subscription.md).</span><span class="sxs-lookup"><span data-stu-id="7976f-110">To specify connection information for push subscriptions, see [Create a Push Subscription](../create-a-push-subscription.md).</span></span>  
  
 <span data-ttu-id="7976f-111">Указание сведений о подключении для подписки по запросу рассматривается в статье [Создание подписки по запросу](../create-a-pull-subscription.md).</span><span class="sxs-lookup"><span data-stu-id="7976f-111">To specify connection information for pull subscriptions, see [Create a Pull Subscription](../create-a-pull-subscription.md)</span></span>  
  
## <a name="merge-agent"></a><span data-ttu-id="7976f-112">Агент слияния.</span><span class="sxs-lookup"><span data-stu-id="7976f-112">Merge Agent</span></span>  
 <span data-ttu-id="7976f-113">Каждая подписка на публикацию слиянием имеет собственный агент, который подключается к издателю и обновляет как издателя, так и подписчика.</span><span class="sxs-lookup"><span data-stu-id="7976f-113">Each merge subscription has its own Merge Agent that connects to and updates both the Publisher and the Subscriber.</span></span>  
  
 <span data-ttu-id="7976f-114">Указание сведений о подключении для принудительной подписки рассматривается в статье [Создание принудительной подписки](../create-a-push-subscription.md).</span><span class="sxs-lookup"><span data-stu-id="7976f-114">To specify connection information for push subscriptions, see [Create a Push Subscription](../create-a-push-subscription.md).</span></span>  
  
 <span data-ttu-id="7976f-115">Указание сведений о подключении для подписки по запросу рассматривается в статье [Создание подписки по запросу](../create-a-pull-subscription.md).</span><span class="sxs-lookup"><span data-stu-id="7976f-115">To specify connection information for pull subscriptions, see [Create a Pull Subscription](../create-a-pull-subscription.md).</span></span>  
  
## <a name="immediate-updating-subscriptions"></a><span data-ttu-id="7976f-116">Немедленно обновляемые подписки</span><span class="sxs-lookup"><span data-stu-id="7976f-116">Immediate Updating Subscriptions</span></span>  
 <span data-ttu-id="7976f-117">Когда выполняется настройка немедленно обновляемой подписки, на подписчике выбирается учетная запись, от имени которой устанавливается подключение к издателю.</span><span class="sxs-lookup"><span data-stu-id="7976f-117">When you configure an immediate updating subscription, you specify an account at the Subscriber under which connections to the Publisher are made.</span></span> <span data-ttu-id="7976f-118">Соединения используются триггерами, которые запускаются на подписчике и распространяют изменения на издатель.</span><span class="sxs-lookup"><span data-stu-id="7976f-118">Connections are used by the triggers that fire at the Subscriber and propagate changes to the Publisher.</span></span> <span data-ttu-id="7976f-119">Для этого типа соединения имеются следующие три параметра.</span><span class="sxs-lookup"><span data-stu-id="7976f-119">There are three options available for the type of connection:</span></span>  
  
-   <span data-ttu-id="7976f-120">Связанный сервер, который создает репликация. Подключение устанавливается с учетными данными, задаваемыми во время настройки.</span><span class="sxs-lookup"><span data-stu-id="7976f-120">A linked server that replication creates; the connection is made with the credentials you specify at configuration time.</span></span>  
  
-   <span data-ttu-id="7976f-121">Связанный сервер, создаваемый репликацией; соединение устанавливается с использованием учетных данных пользователя, который вносит изменения на подписчике.</span><span class="sxs-lookup"><span data-stu-id="7976f-121">A linked server that replication creates; the connection is made with the credentials of the user making the change at the Subscriber.</span></span>  
  
-   <span data-ttu-id="7976f-122">Уже определенный связанный или удаленный сервер.</span><span class="sxs-lookup"><span data-stu-id="7976f-122">A linked server or remote server that you have already defined.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="7976f-123">Чтобы указать сведения о подключении, используйте хранимую процедуру [sp_link_publication &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-link-publication-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="7976f-123">To specify connection information, use the stored procedure [sp_link_publication &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-link-publication-transact-sql).</span></span> <span data-ttu-id="7976f-124">Также можно воспользоваться страницей **Имя входа для обновляемых подписок** в мастере создания подписки, который вызывает хранимую процедуру **sp_link_publication**.</span><span class="sxs-lookup"><span data-stu-id="7976f-124">You can also use the **Login for Updatable Subscriptions** page of the New Subscription Wizard, which calls **sp_link_publication**.</span></span> <span data-ttu-id="7976f-125">При определенных обстоятельствах выполнение этой хранимой процедуры может завершиться ошибкой, если подписчик работает с [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] с пакетом обновлений 1, а издатель работает с более ранней версией.</span><span class="sxs-lookup"><span data-stu-id="7976f-125">Under certain conditions, this stored procedure can fail if the Subscriber is running [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] Service Pack 1 (SP1) or later, and the Publisher is running an earlier version.</span></span> <span data-ttu-id="7976f-126">Если хранимая процедура завершается ошибкой в этом сценарии, обновите издатель до версии [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] с пакетом обновлений 1 (SP1) или более поздней версии.</span><span class="sxs-lookup"><span data-stu-id="7976f-126">If the stored procedure fails in this scenario, upgrade the Publisher to [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] SP1 or later.</span></span>  
  
 <span data-ttu-id="7976f-127">Дополнительные сведения см. в статьях [Создание обновляемых подписок для публикаций транзакций](../publish/create-an-updatable-subscription-to-a-transactional-publication.md) и [Просмотр и изменение параметров безопасности репликации](view-and-modify-replication-security-settings.md).</span><span class="sxs-lookup"><span data-stu-id="7976f-127">For more information, see [Create an Updatable Subscription to a Transactional Publication](../publish/create-an-updatable-subscription-to-a-transactional-publication.md) and [View and Modify Replication Security Settings](view-and-modify-replication-security-settings.md).</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="7976f-128">Учетная запись, заданная для соединения, должна предоставлять только разрешения для вставки, обновления и удаления данных в представлениях, которые репликация создает в базе данных публикации. Она не должна иметь никаких дополнительных разрешений.</span><span class="sxs-lookup"><span data-stu-id="7976f-128">The account specified for the connection should only be granted permission to insert, update, and delete data on the views that replication creates in the publication database; it should not be given any additional permissions.</span></span> <span data-ttu-id="7976f-129">Предоставьте разрешения на представления в базе данных публикации, которые имеют имена в виде **syncobj_** _\<HexadecimalNumber>_ , для учетной записи, настроенной на каждом подписчике.</span><span class="sxs-lookup"><span data-stu-id="7976f-129">Grant permissions on views in the publication database that are named in the form **syncobj_**_\<HexadecimalNumber>_ to the account you configured at each Subscriber.</span></span>  
  
## <a name="queued-updating-subscriptions"></a><span data-ttu-id="7976f-130">Подписки, обновляемые посредством очередей</span><span class="sxs-lookup"><span data-stu-id="7976f-130">Queued Updating Subscriptions</span></span>  
 <span data-ttu-id="7976f-131">При настройке обновляемых посредством очередей подписок необходимо учитывать два аспекта, касающихся безопасности:</span><span class="sxs-lookup"><span data-stu-id="7976f-131">When you configure queued updating subscriptions, there are two areas to keep in mind that relate to security:</span></span>  
  
-   <span data-ttu-id="7976f-132">Для каждого распространителя существует только один агент чтения очереди.</span><span class="sxs-lookup"><span data-stu-id="7976f-132">There is only one Queue Reader Agent for each Distributor.</span></span> <span data-ttu-id="7976f-133">Рекомендуется настраивать для каждого распространителя не более одной публикации, для которой включены обновляемые посредством очередей подписки.</span><span class="sxs-lookup"><span data-stu-id="7976f-133">It is recommended that for each Distributor, you configure at most one publication that is enabled for queued updating subscriptions.</span></span>  
  
-   <span data-ttu-id="7976f-134">Агент чтения очереди осуществляет подключения к распространителю, издателю и к каждому подписчику:</span><span class="sxs-lookup"><span data-stu-id="7976f-134">The Queue Reader agent makes connections to the Distributor, Publisher, and each Subscriber:</span></span>  
  
    -   <span data-ttu-id="7976f-135">Учетная запись, под которой агент выполняется и устанавливает подключения к распространителю, задается при создании агента (если используется мастер создания публикации, агент создается при создании публикации, для которой включены подписки, обновляемые по очереди).</span><span class="sxs-lookup"><span data-stu-id="7976f-135">The account under which the agent runs and makes connections to the Distributor is specified when you create the agent (if you use the New Publication Wizard, the agent is created when you create a publication that is enabled for updating subscriptions).</span></span>  
  
    -   <span data-ttu-id="7976f-136">Учетная запись, под которой агент выполняет подключения к издателю, задается при настройке распространения для издателя.</span><span class="sxs-lookup"><span data-stu-id="7976f-136">The account under which the agent makes connections to the Publisher is specified when you configure distribution for a Publisher.</span></span> <span data-ttu-id="7976f-137">Укажите учетную запись Windows, под которой выполняется агент, или учетную запись [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="7976f-137">Specify the Windows account under which the agent runs or a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] account.</span></span>  
  
    -   <span data-ttu-id="7976f-138">Учетная запись, под которой агент выполняет подключения к подписчику, задается при создании подписки.</span><span class="sxs-lookup"><span data-stu-id="7976f-138">The account under which the agent makes connections to the Subscriber is specified when you create the subscription.</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="7976f-139">Используйте проверку подлинности [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] для подключений к подписчикам, и задавайте разные учетные записи для подключения к каждому подписчику.</span><span class="sxs-lookup"><span data-stu-id="7976f-139">Use [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Authentication for connections to Subscribers, and specify a different account for the connection to each Subscriber.</span></span> <span data-ttu-id="7976f-140">При использовании подписки по запросу репликация всегда устанавливает соединение для использования проверки подлинности Windows (для подписок по запросу репликация не может обратиться к метаданным на подписчике, необходимым для использования проверки подлинности [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] ).</span><span class="sxs-lookup"><span data-stu-id="7976f-140">If you use a pull subscription, replication always sets the connection to use Windows Authentication (for pull subscriptions, replication cannot access metadata at the Subscriber required to use [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Authentication).</span></span> <span data-ttu-id="7976f-141">В этом случае измените соединение таким образом, чтобы использовать проверку подлинности [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] после настройки подписки.</span><span class="sxs-lookup"><span data-stu-id="7976f-141">In this case, change the connection to use [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Authentication after the subscription is configured.</span></span>  
  
     <span data-ttu-id="7976f-142">Дополнительные сведения см. в разделе "Как Создание обновляемых подписок для публикаций транзакций (среда SQL Server Management Studio)" и [Просмотр и изменение параметров безопасности репликации](view-and-modify-replication-security-settings.md).</span><span class="sxs-lookup"><span data-stu-id="7976f-142">For more information, see How to: Create an Updating Subscription to a Transactional Publication (SQL Server Management Studio) and [View and Modify Replication Security Settings](view-and-modify-replication-security-settings.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="7976f-143">См. также:</span><span class="sxs-lookup"><span data-stu-id="7976f-143">See Also</span></span>  
 <span data-ttu-id="7976f-144">[Включение шифрования соединений в ядре СУБД (диспетчер конфигурации SQL Server)](../../../database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine.md) </span><span class="sxs-lookup"><span data-stu-id="7976f-144">[Enable Encrypted Connections to the Database Engine &#40;SQL Server Configuration Manager&#41;](../../../database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine.md) </span></span>  
 <span data-ttu-id="7976f-145">[Replication Security Best Practices](replication-security-best-practices.md) </span><span class="sxs-lookup"><span data-stu-id="7976f-145">[Replication Security Best Practices](replication-security-best-practices.md) </span></span>  
 [<span data-ttu-id="7976f-146">Безопасность Репликация SQL Server</span><span class="sxs-lookup"><span data-stu-id="7976f-146">SQL Server Replication Security</span></span>](view-and-modify-replication-security-settings.md)  
  
  
