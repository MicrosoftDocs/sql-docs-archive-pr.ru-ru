---
title: Организация безопасности издателя | Документация Майкрософт
ms.custom: ''
ms.date: 03/08/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- logins [SQL Server replication], publication access list
- publications [SQL Server replication], publication access lists
- publication access list (PAL)
- PAL (publication access list)
- Publishers [SQL Server replication], security
- publications [SQL Server replication], security
ms.assetid: 4513a18d-dd6e-407a-b009-49dc9432ec7e
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: dca3f704c43a97c2c34921007341b9bd613676ea
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87666492"
---
# <a name="secure-the-publisher"></a><span data-ttu-id="c3319-102">Организация безопасности издателя</span><span class="sxs-lookup"><span data-stu-id="c3319-102">Secure the Publisher</span></span>
  <span data-ttu-id="c3319-103">К издателю подключаются следующие агенты репликации:</span><span class="sxs-lookup"><span data-stu-id="c3319-103">The following replication agents connect to the Publisher:</span></span>  
  
-   <span data-ttu-id="c3319-104">Агент чтения журнала.</span><span class="sxs-lookup"><span data-stu-id="c3319-104">Log Reader Agent</span></span>  
  
-   <span data-ttu-id="c3319-105">агент моментальных снимков</span><span class="sxs-lookup"><span data-stu-id="c3319-105">Snapshot Agent</span></span>  
  
-   <span data-ttu-id="c3319-106">Агент чтения очереди.</span><span class="sxs-lookup"><span data-stu-id="c3319-106">Queue Reader Agent</span></span>  
  
-   <span data-ttu-id="c3319-107">Агент слияния.</span><span class="sxs-lookup"><span data-stu-id="c3319-107">Merge Agent</span></span>  
  
 <span data-ttu-id="c3319-108">Рекомендуется выделить для этих агентов соответствующе имена входа, придерживаясь принципа предоставления минимально необходимых прав, и обеспечить надежное хранение их паролей.</span><span class="sxs-lookup"><span data-stu-id="c3319-108">We recommend that you provide an appropriate login for these agents, follow the principle of granting the minimal rights that are required, and protect the storage of all passwords.</span></span> <span data-ttu-id="c3319-109">Сведения о разрешениях, необходимых для каждого из перечисленных агентов, см. в разделе [Replication Agent Security Model](replication-agent-security-model.md).</span><span class="sxs-lookup"><span data-stu-id="c3319-109">For information about the permissions that are required for each agent, see [Replication Agent Security Model](replication-agent-security-model.md).</span></span>  
  
 <span data-ttu-id="c3319-110">Помимо надлежащего управления именами входа и паролями, следует понимать роль, которую играет список доступа к публикации (PAL).</span><span class="sxs-lookup"><span data-stu-id="c3319-110">Besides appropriately managing logins and passwords, you should understand the role of the publication access list (PAL).</span></span> <span data-ttu-id="c3319-111">Он позволяет именам входа производить доступ к данным публикации, ограничивая при этом нерегламентированный доступ к базе данных издателя.</span><span class="sxs-lookup"><span data-stu-id="c3319-111">The PAL is used to enable logins to access to publication data while restricting ad hoc access to the database at the Publisher.</span></span>  
  
## <a name="publication-access-list"></a><span data-ttu-id="c3319-112">Список доступа к публикации</span><span class="sxs-lookup"><span data-stu-id="c3319-112">Publication Access List</span></span>  
 <span data-ttu-id="c3319-113">Список доступа к публикации представляет собой первичный механизм защиты публикаций на издателе.</span><span class="sxs-lookup"><span data-stu-id="c3319-113">The PAL is the primary mechanism for securing publications at the Publisher.</span></span> <span data-ttu-id="c3319-114">Он работает так же, как и список управления доступом [!INCLUDE[msCoName](../../../includes/msconame-md.md)] Windows.</span><span class="sxs-lookup"><span data-stu-id="c3319-114">The PAL functions similarly to a [!INCLUDE[msCoName](../../../includes/msconame-md.md)] Windows access control list.</span></span> <span data-ttu-id="c3319-115">При создании публикации репликация создает список доступа для этой публикации.</span><span class="sxs-lookup"><span data-stu-id="c3319-115">When you create a publication, replication creates a PAL for the publication.</span></span> <span data-ttu-id="c3319-116">Список доступа к публикации может быть сконфигурирован таким образом, что будет содержать список имен входа и групп, которым предоставлен доступ к публикации.</span><span class="sxs-lookup"><span data-stu-id="c3319-116">The PAL can be configured to contain a list of logins and groups that are granted access to the publication.</span></span> <span data-ttu-id="c3319-117">Когда агент подключается к издателю или распространителю и запрашивает доступ к публикации, данные проверки подлинности из списка доступа к публикации сравниваются с именем входа издателя, который предоставлен этим агентом.</span><span class="sxs-lookup"><span data-stu-id="c3319-117">When an agent connects to the Publisher or Distributor and requests access to a publication, the authentication information in the PAL is compared to the Publisher login that the agent provides.</span></span> <span data-ttu-id="c3319-118">Этот процесс обеспечивает дополнительную защиту издателя, так как имена входа издателя и распространителя не могут использоваться клиентскими средствами для внесения изменений непосредственно на издателе.</span><span class="sxs-lookup"><span data-stu-id="c3319-118">This process provides additional security for the Publisher by preventing the Publisher and Distributor login from being used by a client tool to perform modifications on the Publisher directly.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="c3319-119">Репликация создает для каждой публикации роль на издателе для ввода в действие списка доступа к публикации.</span><span class="sxs-lookup"><span data-stu-id="c3319-119">Replication creates a role on the Publisher for each publication to enforce PAL membership.</span></span> <span data-ttu-id="c3319-120">Для репликации слиянием эта роль имеет имя вида **Msmerge_** _\<PublicationID>_ , а для репликации транзакций и репликации моментальных снимков — вида **MSReplPAL_** _\<PublicationDatabaseID>_ **_** _\<PublicationID>_ .</span><span class="sxs-lookup"><span data-stu-id="c3319-120">The role has a name in the form **Msmerge_**_\<PublicationID>_ for merge replication and **MSReplPAL_**_\<PublicationDatabaseID>_**_**_\<PublicationID>_ for transactional and snapshot replication.</span></span>  
  
 <span data-ttu-id="c3319-121">По умолчанию в список доступа к публикации включаются члены предопределенной роли сервера **sysadmin** (существующие на момент создания публикации) и имя входа, использованное для ее создания.</span><span class="sxs-lookup"><span data-stu-id="c3319-121">By default, the following logins are included in the PAL: the members of the **sysadmin** fixed server role at the time the publication is created and the login that is used to create the publication.</span></span> <span data-ttu-id="c3319-122">По умолчанию все имена входа, являющиеся членами предопределенной роли сервера **sysadmin** или предопределенной роли базы данных **db_owner** в базе данных публикации, могут подписываться на публикацию, даже если они отсутствуют в списке доступа к ней.</span><span class="sxs-lookup"><span data-stu-id="c3319-122">By default, all logins that are members of the **sysadmin** fixed server role or the **db_owner** fixed database role on the publication database can subscribe to a publication without being explicitly added to the PAL.</span></span>  
  
 <span data-ttu-id="c3319-123">При работе со списком доступа к публикации следует учитывать следующие моменты:</span><span class="sxs-lookup"><span data-stu-id="c3319-123">When you are using the PAL, consider the following guidelines:</span></span>  
  
-   <span data-ttu-id="c3319-124">Перед добавлением имени входа в список доступа к публикации имени входа [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] необходимо связать его с пользователем базы данных публикации.</span><span class="sxs-lookup"><span data-stu-id="c3319-124">You must associate the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] login with a database user in the publication database before adding the login to the PAL.</span></span>  
  
-   <span data-ttu-id="c3319-125">Следуйте принципу наименьших необходимых прав доступа, предоставляя именам входа из списка доступа к публикации только те разрешения, которые им необходимы для выполнения задач репликации.</span><span class="sxs-lookup"><span data-stu-id="c3319-125">Follow the principle of least privilege by allowing logins in the PAL only the permissions the logins must have to perform replication tasks.</span></span> <span data-ttu-id="c3319-126">Не добавляйте имена входа в какие-либо предопределенные роли базы данных или роли сервера, ненужные для репликации.</span><span class="sxs-lookup"><span data-stu-id="c3319-126">Do not add the logins to any fixed database roles or server roles that are not required for replication.</span></span> <span data-ttu-id="c3319-127">Дополнительные сведения о необходимых разрешениях см. в разделах [Replication Agent Security Model](replication-agent-security-model.md) и [Replication Security Best Practices](replication-security-best-practices.md).</span><span class="sxs-lookup"><span data-stu-id="c3319-127">For more information about the permissions that are required, see [Replication Agent Security Model](replication-agent-security-model.md) and [Replication Security Best Practices](replication-security-best-practices.md).</span></span>  
  
-   <span data-ttu-id="c3319-128">Если используется удаленный распространитель, то учетные записи в списке доступа к публикации должны быть доступны как на издателе, так и на распространителе.</span><span class="sxs-lookup"><span data-stu-id="c3319-128">If a remote Distributor is used, accounts in the PAL must be available at both the Publisher and the Distributor.</span></span> <span data-ttu-id="c3319-129">Это должны быть либо учетные записи домена, либо локальные учетные записи, определенные на обоих серверах.</span><span class="sxs-lookup"><span data-stu-id="c3319-129">The account must be either a domain account or a local account that is defined at both servers.</span></span> <span data-ttu-id="c3319-130">Связанные с обоими именами входа пароли также должны совпадать.</span><span class="sxs-lookup"><span data-stu-id="c3319-130">The passwords associated with both logins must be the same.</span></span>  
  
-   <span data-ttu-id="c3319-131">Если список доступа к публикации содержит учетные записи Windows и домен использует службу Active Directory, то учетная запись, под которой выполняется [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , должна иметь разрешения на чтение в каталогах Active Directory.</span><span class="sxs-lookup"><span data-stu-id="c3319-131">If the PAL contains Windows accounts and the domain uses Active Directory, the account under which [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] runs must have permissions to read from Active Directory.</span></span> <span data-ttu-id="c3319-132">Если имеются проблемы с учетными записями Windows, убедитесь в том, что учетная запись, под которой выполняется [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , имеет достаточные разрешения.</span><span class="sxs-lookup"><span data-stu-id="c3319-132">If you experience issues with Windows accounts, make sure that the account under which [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] runs has sufficient permissions.</span></span> <span data-ttu-id="c3319-133">Дополнительные сведения см. в документации по Windows.</span><span class="sxs-lookup"><span data-stu-id="c3319-133">For more information, see the Windows documentation.</span></span>  
  
 <span data-ttu-id="c3319-134">Управление списками доступа к публикации описано в статье [Управление именами входа в списке доступа к публикации](manage-logins-in-the-publication-access-list.md).</span><span class="sxs-lookup"><span data-stu-id="c3319-134">To manage the PAL, see [Manage Logins in the Publication Access List](manage-logins-in-the-publication-access-list.md).</span></span>  
  
## <a name="snapshot-agent"></a><span data-ttu-id="c3319-135">агент моментальных снимков</span><span class="sxs-lookup"><span data-stu-id="c3319-135">Snapshot Agent</span></span>  
 <span data-ttu-id="c3319-136">Для каждой публикации существует один агент моментальных снимков.</span><span class="sxs-lookup"><span data-stu-id="c3319-136">There is one Snapshot Agent for each publication.</span></span> <span data-ttu-id="c3319-137">Дополнительные сведения см. в разделе [Create a Publication](../publish/create-a-publication.md).</span><span class="sxs-lookup"><span data-stu-id="c3319-137">For more information, see [Create a Publication](../publish/create-a-publication.md).</span></span>  
  
## <a name="ftp-snapshot-delivery"></a><span data-ttu-id="c3319-138">Доставка моментальных снимков по FTP</span><span class="sxs-lookup"><span data-stu-id="c3319-138">FTP Snapshot Delivery</span></span>  
 <span data-ttu-id="c3319-139">Если указать, что моментальные снимки должны быть доступны через общий FTP-ресурс, а не через общий UNC-ресурс, при настройке доступа по FTP необходимо будет указать имя входа и пароль.</span><span class="sxs-lookup"><span data-stu-id="c3319-139">If you specify that snapshots should be made available through an FTP share rather than a UNC share, you must specify a login and password when configuring FTP access.</span></span> <span data-ttu-id="c3319-140">Дополнительные сведения см. в статье [Доставка моментального снимка через FTP](../publish/deliver-a-snapshot-through-ftp.md).</span><span class="sxs-lookup"><span data-stu-id="c3319-140">For more information, see [Deliver a Snapshot Through FTP](../publish/deliver-a-snapshot-through-ftp.md).</span></span>  
  
## <a name="log-reader-agent"></a><span data-ttu-id="c3319-141">Агент чтения журнала.</span><span class="sxs-lookup"><span data-stu-id="c3319-141">Log Reader Agent</span></span>  
 <span data-ttu-id="c3319-142">У каждой базы данных, опубликованной для репликации транзакций, может быть только один агент чтения журнала.</span><span class="sxs-lookup"><span data-stu-id="c3319-142">There is one Log Reader Agent for each database published for transactional replication.</span></span> <span data-ttu-id="c3319-143">Дополнительные сведения см. в разделе [Create a Publication](../publish/create-a-publication.md).</span><span class="sxs-lookup"><span data-stu-id="c3319-143">For more information, see [Create a Publication](../publish/create-a-publication.md).</span></span>  
  
## <a name="queue-reader-agent"></a><span data-ttu-id="c3319-144">Агент чтения очереди.</span><span class="sxs-lookup"><span data-stu-id="c3319-144">Queue Reader Agent</span></span>  
 <span data-ttu-id="c3319-145">Для всех издателей и публикаций (допускающих подписки, обновляемые посредством очередей), связанных с определенным распространителем, существует один агент чтения очереди.</span><span class="sxs-lookup"><span data-stu-id="c3319-145">There is one Queue Reader Agent for all Publishers and publications (that allow queued updating subscriptions) associated with a given Distributor.</span></span> <span data-ttu-id="c3319-146">Дополнительные сведения см. в статье [Включение обновляемых подписок для публикации транзакций](../publish/enable-updating-subscriptions-for-transactional-publications.md).</span><span class="sxs-lookup"><span data-stu-id="c3319-146">For more information, see [Enable Updating Subscriptions for Transactional Publications](../publish/enable-updating-subscriptions-for-transactional-publications.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="c3319-147">См. также:</span><span class="sxs-lookup"><span data-stu-id="c3319-147">See Also</span></span>  
 <span data-ttu-id="c3319-148">[Включение шифрования соединений в ядре СУБД (диспетчер конфигурации SQL Server)](../../../database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine.md) </span><span class="sxs-lookup"><span data-stu-id="c3319-148">[Enable Encrypted Connections to the Database Engine &#40;SQL Server Configuration Manager&#41;](../../../database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine.md) </span></span>  
 <span data-ttu-id="c3319-149">[Replication Security Best Practices](replication-security-best-practices.md) </span><span class="sxs-lookup"><span data-stu-id="c3319-149">[Replication Security Best Practices](replication-security-best-practices.md) </span></span>  
 [<span data-ttu-id="c3319-150">Безопасность Репликация SQL Server</span><span class="sxs-lookup"><span data-stu-id="c3319-150">SQL Server Replication Security</span></span>](view-and-modify-replication-security-settings.md)  
  
  
