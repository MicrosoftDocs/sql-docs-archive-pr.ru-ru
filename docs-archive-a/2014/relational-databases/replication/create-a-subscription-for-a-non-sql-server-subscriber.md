---
title: Создание подписки для подписчика, отличного от подписчика SQL Server | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- subscriptions [SQL Server replication], non-SQL Server Subscribers
- Subscribers [SQL Server replication], non-SQL Server Subscribers
- non-SQL Server Subscribers, subscriptions
ms.assetid: 5020ee68-b988-4d57-8066-67d183e61237
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 31a7d1e52c53cb858039f1fd0ed403f255ad5ca2
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87730518"
---
# <a name="create-a-subscription-for-a-non-sql-server-subscriber"></a><span data-ttu-id="2a589-102">Создание подписки для подписчика, отличного от подписчика SQL Server</span><span class="sxs-lookup"><span data-stu-id="2a589-102">Create a Subscription for a Non-SQL Server Subscriber</span></span>
  <span data-ttu-id="2a589-103">В данном разделе описывается процесс создания подписки в [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] для подписчика, отличного от подписчика SQL Server, с помощью среды [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] или [!INCLUDE[tsql](../../includes/tsql-md.md)].</span><span class="sxs-lookup"><span data-stu-id="2a589-103">This topic describes how to create a subscription for a non-SQL Server Subscriber in [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] by using [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] or [!INCLUDE[tsql](../../includes/tsql-md.md)].</span></span> <span data-ttu-id="2a589-104">Репликация транзакций и репликация моментальных снимков поддерживают публикацию данных на подписчики, отличные от[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="2a589-104">Transactional and snapshot replication support publishing data to non-[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Subscribers.</span></span> <span data-ttu-id="2a589-105">Сведения о поддерживаемых платформах подписчиков см. в разделе [Non-SQL Server Subscribers](non-sql/non-sql-server-subscribers.md).</span><span class="sxs-lookup"><span data-stu-id="2a589-105">For information about supported Subscriber platforms, see [Non-SQL Server Subscribers](non-sql/non-sql-server-subscribers.md).</span></span>  
  
 <span data-ttu-id="2a589-106">**В этом разделе**</span><span class="sxs-lookup"><span data-stu-id="2a589-106">**In This Topic**</span></span>  
  
-   <span data-ttu-id="2a589-107">**Для создания подписки для подписчика, отличного от подписчика SQL Server, используется:**</span><span class="sxs-lookup"><span data-stu-id="2a589-107">**To create a subscription for a non-SQL Server Subscriber, using:**</span></span>  
  
     [<span data-ttu-id="2a589-108">Среда SQL Server Management Studio</span><span class="sxs-lookup"><span data-stu-id="2a589-108">SQL Server Management Studio</span></span>](#SSMSProcedure)  
  
     [<span data-ttu-id="2a589-109">Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="2a589-109">Transact-SQL</span></span>](#TsqlProcedure)  
  
##  <a name="using-sql-server-management-studio"></a><a name="SSMSProcedure"></a> <span data-ttu-id="2a589-110">Использование среды SQL Server Management Studio</span><span class="sxs-lookup"><span data-stu-id="2a589-110">Using SQL Server Management Studio</span></span>  
 <span data-ttu-id="2a589-111">Чтобы создать подписку для подписчика, отличного от[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="2a589-111">To create a subscription for a non-[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Subscriber:</span></span>  
  
1.  <span data-ttu-id="2a589-112">Установите и настройте на распространителе [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] соответствующее клиентское программное обеспечение и соответствующий поставщик OLE DB.</span><span class="sxs-lookup"><span data-stu-id="2a589-112">Install and configure the appropriate client software and OLE DB provider(s) on the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Distributor.</span></span> <span data-ttu-id="2a589-113">Дополнительные сведения см. в разделах [Oracle Subscribers](non-sql/oracle-subscribers.md) и [IBM DB2 Subscribers](non-sql/ibm-db2-subscribers.md).</span><span class="sxs-lookup"><span data-stu-id="2a589-113">For more information, see [Oracle Subscribers](non-sql/oracle-subscribers.md) and [IBM DB2 Subscribers](non-sql/ibm-db2-subscribers.md).</span></span>  
  
2.  <span data-ttu-id="2a589-114">Создайте публикацию с помощью мастера создания публикаций.</span><span class="sxs-lookup"><span data-stu-id="2a589-114">Create a publication using the New Publication Wizard.</span></span> <span data-ttu-id="2a589-115">Дополнительные сведения о создании публикаций см. в статьях [Создание публикации](publish/create-a-publication.md) и [Создание публикации из базы данных Oracle](publish/create-a-publication-from-an-oracle-database.md).</span><span class="sxs-lookup"><span data-stu-id="2a589-115">For more information about creating publications, see [Create a Publication](publish/create-a-publication.md) and [Create a Publication from an Oracle Database](publish/create-a-publication-from-an-oracle-database.md).</span></span> <span data-ttu-id="2a589-116">Укажите в мастере создания публикаций следующие параметры:</span><span class="sxs-lookup"><span data-stu-id="2a589-116">Specify the following options in the New Publication Wizard:</span></span>  
  
    -   <span data-ttu-id="2a589-117">На странице **Тип публикации** выберите **Публикация моментальных снимков** или **Публикация транзакций**.</span><span class="sxs-lookup"><span data-stu-id="2a589-117">On the **Publication Type** page, select **Snapshot publication** or **Transactional publication**.</span></span>  
  
    -   <span data-ttu-id="2a589-118">На странице **Агент моментальных снимков** снимите флажок **Создать моментальный снимок немедленно**.</span><span class="sxs-lookup"><span data-stu-id="2a589-118">On the **Snapshot Agent** page, clear **Create a snapshot immediately**.</span></span>  
  
         <span data-ttu-id="2a589-119">Моментальный снимок создается после включения публикации для подписчиков, не относящихся к[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , чтобы гарантировать, что агент моментальных снимков создаст скрипты моментального снимка и инициализации, пригодные для подписчиков, отличных от[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="2a589-119">You create the snapshot after the publication is enabled for non-[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Subscribers to ensure that the Snapshot Agent generates a snapshot and initialization scripts that are suitable for non-[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Subscribers.</span></span>  
  
3.  <span data-ttu-id="2a589-120">В диалоговом окне **Свойства публикации — \<PublicationName>** разрешите публикацию для подписчиков, отличных от [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="2a589-120">Enable the publication for non-[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Subscribers using the **Publication Properties - \<PublicationName>** dialog box.</span></span> <span data-ttu-id="2a589-121">Дополнительные сведения об этом шаге см. в разделе [Publication Properties, Subscription Options](publication-properties-subscription-options.md) .</span><span class="sxs-lookup"><span data-stu-id="2a589-121">See [Publication Properties, Subscription Options](publication-properties-subscription-options.md) for more information about this step.</span></span>  
  
4.  <span data-ttu-id="2a589-122">Создайте подписку с помощью мастера создания подписок.</span><span class="sxs-lookup"><span data-stu-id="2a589-122">Create a subscription using the New Subscription Wizard.</span></span> <span data-ttu-id="2a589-123">В этом разделе содержатся дополнительные сведения об этом шаге.</span><span class="sxs-lookup"><span data-stu-id="2a589-123">This topic provides more information about this step.</span></span>  
  
5.  <span data-ttu-id="2a589-124">(Необязательно) Измените свойство статьи **pre_creation_cmd** для сохранения таблиц на подписчике.</span><span class="sxs-lookup"><span data-stu-id="2a589-124">(Optional) Change the **pre_creation_cmd** article property to retain tables at the Subscriber.</span></span> <span data-ttu-id="2a589-125">В этом разделе содержатся дополнительные сведения об этом шаге.</span><span class="sxs-lookup"><span data-stu-id="2a589-125">This topic provides more information about this step.</span></span>  
  
6.  <span data-ttu-id="2a589-126">Создайте моментальный снимок для публикации.</span><span class="sxs-lookup"><span data-stu-id="2a589-126">Generate a snapshot for the publication.</span></span> <span data-ttu-id="2a589-127">В этом разделе содержатся дополнительные сведения об этом шаге.</span><span class="sxs-lookup"><span data-stu-id="2a589-127">This topic provides more information about this step.</span></span>  
  
7.  <span data-ttu-id="2a589-128">Синхронизация подписки.</span><span class="sxs-lookup"><span data-stu-id="2a589-128">Synchronize the subscription.</span></span> <span data-ttu-id="2a589-129">Дополнительные сведения см. в статье [Синхронизация принудительной подписки](synchronize-a-push-subscription.md).</span><span class="sxs-lookup"><span data-stu-id="2a589-129">For more information, see [Synchronize a Push Subscription](synchronize-a-push-subscription.md).</span></span>  
  
#### <a name="to-enable-a-publication-for-non-sql-server-subscribers"></a><span data-ttu-id="2a589-130">Включение публикации для подписчиков, отличных от подписчиков SQL Server</span><span class="sxs-lookup"><span data-stu-id="2a589-130">To enable a publication for non-SQL Server Subscribers</span></span>  
  
1.  <span data-ttu-id="2a589-131">Подключитесь к издателю в среде [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], а затем раскройте узел сервера.</span><span class="sxs-lookup"><span data-stu-id="2a589-131">Connect to the Publisher in [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], and then expand the server node.</span></span>  
  
2.  <span data-ttu-id="2a589-132">Раскройте папку **Репликация** , а затем папку **Локальные публикации** .</span><span class="sxs-lookup"><span data-stu-id="2a589-132">Expand the **Replication** folder, and then expand the **Local Publications** folder.</span></span>  
  
3.  <span data-ttu-id="2a589-133">Щелкните правой кнопкой мыши публикацию, а затем щелкните **Свойства**.</span><span class="sxs-lookup"><span data-stu-id="2a589-133">Right-click the publication, and then click **Properties**.</span></span>  
  
4.  <span data-ttu-id="2a589-134">На странице **Параметры подписки** выберите значение **True** для параметра **Разрешать подписчики, отличные от подписчиков SQL Server**.</span><span class="sxs-lookup"><span data-stu-id="2a589-134">On the **Subscription Options** page, select a value of **True** for the option **Allow non-SQL Server Subscribers**.</span></span> <span data-ttu-id="2a589-135">Выбор этого параметра изменяет количество свойств так, чтобы публикация была совместимой с подписчиками, отличными от подписчика[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="2a589-135">Selecting this option changes a number of properties so that the publication is compatible with non-[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Subscribers.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="2a589-136">Если выбрано значение **True** , то свойство статьи **pre_creation_cmd** устанавливается в значение «drop».</span><span class="sxs-lookup"><span data-stu-id="2a589-136">Selecting **True** sets the value of the **pre_creation_cmd** article property to 'drop'.</span></span> <span data-ttu-id="2a589-137">Этот параметр говорит о том, что репликация должна удалить таблицу на подписчике, если ее имя совпадает с именем таблицы в статье.</span><span class="sxs-lookup"><span data-stu-id="2a589-137">This setting specifies that replication should drop a table at the Subscriber if it matches the name of the table in the article.</span></span> <span data-ttu-id="2a589-138">Если на подписчике имеются таблицы, которые необходимо сохранить, вызовите хранимую процедуру [sp_changearticle](/sql/relational-databases/system-stored-procedures/sp-changearticle-transact-sql) для каждой статьи, указав значение none в качестве параметра **pre_creation_cmd**: `sp_changearticle @publication= 'MyPublication', @article= 'MyArticle', @property='pre_creation_cmd', @value='none'`.</span><span class="sxs-lookup"><span data-stu-id="2a589-138">If you have existing tables at the Subscriber that you want to keep, use the [sp_changearticle](/sql/relational-databases/system-stored-procedures/sp-changearticle-transact-sql) stored procedure for each article; specify a value 'none' for **pre_creation_cmd**: `sp_changearticle @publication= 'MyPublication', @article= 'MyArticle', @property='pre_creation_cmd', @value='none'`.</span></span>  
  
5.  [!INCLUDE[clickOK](../../includes/clickok-md.md)] <span data-ttu-id="2a589-139">Будет предложено создать новый моментальный снимок для публикации.</span><span class="sxs-lookup"><span data-stu-id="2a589-139">You will be prompted to create a new snapshot for the publication.</span></span> <span data-ttu-id="2a589-140">Если не нужно создавать его в данный момент, выполните позднее шаги, описанные в следующей процедуре «Инструкции».</span><span class="sxs-lookup"><span data-stu-id="2a589-140">If you do not want to create one at this time, use the steps described in the next "how to" procedure at a later time.</span></span>  
  
#### <a name="to-create-a-subscription-for-a-non-sql-server-subscriber"></a><span data-ttu-id="2a589-141">Создание подписки для подписчика, отличного от подписчика SQL Server</span><span class="sxs-lookup"><span data-stu-id="2a589-141">To create a subscription for a non-SQL Server Subscriber</span></span>  
  
1.  <span data-ttu-id="2a589-142">Раскройте папку **Репликация** , а затем папку **Локальные публикации** .</span><span class="sxs-lookup"><span data-stu-id="2a589-142">Expand the **Replication** folder, and then expand the **Local Publications** folder.</span></span>  
  
2.  <span data-ttu-id="2a589-143">Щелкните правой кнопкой мыши соответствующую публикацию, а затем щелкните **Создать подписку**.</span><span class="sxs-lookup"><span data-stu-id="2a589-143">Right-click the appropriate publication, and then click **New Subscriptions**.</span></span>  
  
3.  <span data-ttu-id="2a589-144">Убедитесь в том, что на странице **Расположение агента распространителя** установлен флажок **Выполнять все агенты на распространителе** .</span><span class="sxs-lookup"><span data-stu-id="2a589-144">On the **Distribution Agent Location** page, ensure **Run all agents at the Distributor** is selected.</span></span> <span data-ttu-id="2a589-145">Подписчики, отличные от[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , не поддерживают выполнение агентов на подписчике.</span><span class="sxs-lookup"><span data-stu-id="2a589-145">Non-[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Subscribers do not support running agents at the Subscriber.</span></span>  
  
4.  <span data-ttu-id="2a589-146">На странице **Подписчики** щелкните **Добавить подписчик** , а затем — **Добавить подписчик, отличный от подписчика SQL Server**.</span><span class="sxs-lookup"><span data-stu-id="2a589-146">On the **Subscribers** page, click **Add Subscriber** and then click **Add Non-SQL Server Subscriber**.</span></span>  
  
5.  <span data-ttu-id="2a589-147">В диалоговом окне **Добавление подписчика, отличного от подписчика SQL Server** выберите тип подписчика.</span><span class="sxs-lookup"><span data-stu-id="2a589-147">In the **Add Non-SQL Server Subscriber** dialog box, select the type of Subscriber.</span></span>  
  
6.  <span data-ttu-id="2a589-148">Введите значение в поле **Имя источника данных**:</span><span class="sxs-lookup"><span data-stu-id="2a589-148">Enter a value in **Data source name**:</span></span>  
  
    -   <span data-ttu-id="2a589-149">Для Oracle это будет введенное TNS-имя (transparent network substrate).</span><span class="sxs-lookup"><span data-stu-id="2a589-149">For Oracle, this is the transparent network substrate (TNS) name you configured.</span></span>  
  
    -   <span data-ttu-id="2a589-150">Для IBM это может быть любое имя.</span><span class="sxs-lookup"><span data-stu-id="2a589-150">For IBM, this can be any name.</span></span> <span data-ttu-id="2a589-151">Обычно указывается сетевой адрес подписчика.</span><span class="sxs-lookup"><span data-stu-id="2a589-151">It is typical to specify the network address of the Subscriber.</span></span>  
  
     <span data-ttu-id="2a589-152">На этом этапе вводится имя источника данных, и учетные данные, указанные на шаге 9, этим мастером не проверяются.</span><span class="sxs-lookup"><span data-stu-id="2a589-152">The data source name entered in this step and the credentials specified in step 9 are not validated by this wizard.</span></span> <span data-ttu-id="2a589-153">Они не используются репликацией, пока для этой подписки выполняется агент распространителя.</span><span class="sxs-lookup"><span data-stu-id="2a589-153">They are not used by replication until the Distribution Agent runs for the subscription.</span></span> <span data-ttu-id="2a589-154">Подключившись к подписчику с помощью клиентского средства (например, **sqlplus** для Oracle), убедитесь в том, что все значения проверены.</span><span class="sxs-lookup"><span data-stu-id="2a589-154">Ensure that all values have been tested by connecting to the Subscriber using a client tool (such as **sqlplus** for Oracle).</span></span> <span data-ttu-id="2a589-155">Дополнительные сведения см. в разделах [Oracle Subscribers](non-sql/oracle-subscribers.md) и [IBM DB2 Subscribers](non-sql/ibm-db2-subscribers.md).</span><span class="sxs-lookup"><span data-stu-id="2a589-155">For more information, see [Oracle Subscribers](non-sql/oracle-subscribers.md) and [IBM DB2 Subscribers](non-sql/ibm-db2-subscribers.md).</span></span>  
  
7.  [!INCLUDE[clickOK](../../includes/clickok-md.md)] <span data-ttu-id="2a589-156">Теперь на странице **Подписчики** мастера данный подписчик будет отображен в столбце **Подписчик** с доступным только для чтения значением **(назначение по умолчанию)** в столбце **База данных подписки** :</span><span class="sxs-lookup"><span data-stu-id="2a589-156">On the **Subscribers** page of the wizard, the Subscriber is now displayed in the **Subscriber** column with a read-only **(default destination)** in the **Subscription Database** column:</span></span>  
  
    -   <span data-ttu-id="2a589-157">Для СУБД Oracle сервер имеет не более одной базы данных, поэтому нет необходимости указывать базу данных.</span><span class="sxs-lookup"><span data-stu-id="2a589-157">For Oracle, a server has at most one database, so it is not necessary to specify the database.</span></span>  
  
    -   <span data-ttu-id="2a589-158">Для IBM DB2 база данных указывается в свойстве строки соединения DB2 **Исходный каталог** , которое может быть введено в поле **Дополнительные параметры соединения** , описанном далее в этом разделе.</span><span class="sxs-lookup"><span data-stu-id="2a589-158">For IBM DB2, the database is specified in the **Initial Catalog** property of the DB2 connection string, which can be entered in the **Additional connection options** field described later in this process.</span></span>  
  
8.  <span data-ttu-id="2a589-159">На странице **безопасность агент распространения** нажмите кнопку свойств (**...**) рядом с подписчиком, чтобы открыть диалоговое окно **безопасность агент распространения** .</span><span class="sxs-lookup"><span data-stu-id="2a589-159">On the **Distribution Agent Security** page, click the properties button (**...**) next to the Subscriber to access the **Distribution Agent Security** dialog box.</span></span>  
  
9. <span data-ttu-id="2a589-160">В диалоговом окне **Безопасность агента распространителя** выполните следующие действия:</span><span class="sxs-lookup"><span data-stu-id="2a589-160">In the **Distribution Agent Security** dialog box:</span></span>  
  
    -   <span data-ttu-id="2a589-161">Введите в поля **Учетная запись процесса**, **Пароль**и **Подтверждение пароля** учетную запись и пароль [!INCLUDE[msCoName](../../includes/msconame-md.md)] Windows, под которыми будет выполняться агент распространителя, и установите локальное соединение с распространителем.</span><span class="sxs-lookup"><span data-stu-id="2a589-161">In the **Process account**, **Password**, and **Confirm password** fields, enter the [!INCLUDE[msCoName](../../includes/msconame-md.md)] Windows account and password under which the Distribution Agent should run and make local connections to the Distributor.</span></span>  
  
         <span data-ttu-id="2a589-162">Эта учетная запись должна иметь следующие минимальные разрешения: членство в предопределенной роли базы данных **db_owner** в базе данных распространителя; членство в списке доступа к публикации (PAL); разрешения на чтение хранилища моментального снимка; разрешение на чтение каталога установки поставщика OLE DB.</span><span class="sxs-lookup"><span data-stu-id="2a589-162">The account requires these minimum permissions: member of the **db_owner** fixed database role in the distribution database; member of the publication access list (PAL); read permissions on the snapshot share; and read permission on the install directory of the OLE DB provider.</span></span> <span data-ttu-id="2a589-163">Дополнительные сведения о списке доступа к публикации см. в статье [Организация безопасности издателя](security/secure-the-publisher.md).</span><span class="sxs-lookup"><span data-stu-id="2a589-163">For more information about the PAL, see [Secure the Publisher](security/secure-the-publisher.md).</span></span>  
  
    -   <span data-ttu-id="2a589-164">Под полем **Соединиться с подписчиком**введите в поля **Имя входа**, **Пароль**и **Подтверждение пароля** имя входа и пароль, которые следует использовать для соединения с подписчиком.</span><span class="sxs-lookup"><span data-stu-id="2a589-164">Under **Connect to the Subscriber**, in the **Login**, **Password**, and **Confirm password** fields, enter the login and password that should be used to connect to the Subscriber.</span></span> <span data-ttu-id="2a589-165">Это имя входа уже должно быть сконфигурировано и иметь разрешения, достаточные для создания объектов в базе данных подписки.</span><span class="sxs-lookup"><span data-stu-id="2a589-165">This login should already be configured and should have sufficient permissions to create objects in the subscription database.</span></span>  
  
    -   <span data-ttu-id="2a589-166">В поле **Дополнительные параметры соединения** укажите любые параметры соединения для подписчика в форме строки соединения (Oracle не требует дополнительных параметров).</span><span class="sxs-lookup"><span data-stu-id="2a589-166">In the **Additional connection options** field, specify any connection options for the Subscriber in the form of a connection string (Oracle does not require additional options).</span></span> <span data-ttu-id="2a589-167">Параметры разделяются точками с запятой.</span><span class="sxs-lookup"><span data-stu-id="2a589-167">Each option should be separated by a semi-colon.</span></span> <span data-ttu-id="2a589-168">Ниже приводится пример строки соединения DB2 (переносы строк использованы для удобства чтения):</span><span class="sxs-lookup"><span data-stu-id="2a589-168">The following is an example of a DB2 connection string (line breaks are for readability):</span></span>  
  
        ```  
        Provider=DB2OLEDB;Initial Catalog=MY_SUBSCRIBER_DB;Network Transport Library=TCP;Host CCSID=1252;  
        PC Code Page=1252;Network Address=MY_SUBSCRIBER;Network Port=50000;Package Collection=MY_PKGCOL;  
        Default Schema=MY_SCHEMA;Process Binary as Character=False;Units of Work=RUW;DBMS Platform=DB2/NT;  
        Persist Security Info=False;Connection Pooling=True;  
        ```  
  
         <span data-ttu-id="2a589-169">Большая часть параметров в строке зависят от настраиваемого сервера DB2, но параметр **Обрабатывать двоичное значение как символ** всегда должен иметь значение **False**.</span><span class="sxs-lookup"><span data-stu-id="2a589-169">Most of the options in the string are specific to the DB2 server you are configuring, but the **Process Binary as Character** option should always be set to **False**.</span></span> <span data-ttu-id="2a589-170">Параметр **Исходный каталог** должен иметь значение для идентификации базы данных подписки.</span><span class="sxs-lookup"><span data-stu-id="2a589-170">A value is required for the **Initial Catalog** option to identify the subscription database.</span></span>  
  
10. <span data-ttu-id="2a589-171">На странице **Расписание синхронизации** выберите из меню **Расписание агента** расписание для агента распространителя (обычно используется расписание **Выполнять постоянно**).</span><span class="sxs-lookup"><span data-stu-id="2a589-171">On the **Synchronization Schedule** page, select a schedule for the Distribution Agent from the **Agent Schedule** menu (the schedule is typically **Run continuously**).</span></span>  
  
11. <span data-ttu-id="2a589-172">На странице **Инициализация подписок** укажите, следует ли инициализировать подписку и, если да, когда ее необходимо инициализировать:</span><span class="sxs-lookup"><span data-stu-id="2a589-172">On the **Initialize Subscriptions** page, specify whether the subscription should be initialized and, if so, when it should be initialized:</span></span>  
  
    -   <span data-ttu-id="2a589-173">Снимите флажок **Инициализировать** , только если были созданы все объекты и были добавлены все необходимые данные в базу данных подписки.</span><span class="sxs-lookup"><span data-stu-id="2a589-173">Clear **Initialize** only if you have created all objects and added all required data in the subscription database.</span></span>  
  
    -   <span data-ttu-id="2a589-174">Чтобы после завершения выполнения этого мастера агент распространителя передал файлы моментальных снимков подписчику, выберите в раскрывающемся списке столбца **Инициализировать, когда** значение **Немедленно** .</span><span class="sxs-lookup"><span data-stu-id="2a589-174">Select **Immediately** from the drop-down list in the **Initialize When** column to have the Distribution Agent transfer snapshot files to the Subscriber after this wizard is completed.</span></span> <span data-ttu-id="2a589-175">Выберите пункт **При первой синхронизации** , чтобы агент переслал файлы при следующем запланированном запуске.</span><span class="sxs-lookup"><span data-stu-id="2a589-175">Select **At first synchronization** to have the agent transfer the files the next time it is scheduled to run.</span></span>  
  
12. <span data-ttu-id="2a589-176">На странице **Действия мастера** при желании можно написать скрипт для подписки.</span><span class="sxs-lookup"><span data-stu-id="2a589-176">On the **Wizard Actions** page, optionally script the subscription.</span></span> <span data-ttu-id="2a589-177">Дополнительные сведения см. в разделе [Scripting Replication](scripting-replication.md).</span><span class="sxs-lookup"><span data-stu-id="2a589-177">For more information, see [Scripting Replication](scripting-replication.md).</span></span>  
  
#### <a name="to-retain-tables-at-the-subscriber"></a><span data-ttu-id="2a589-178">Сохранение таблиц на подписчике</span><span class="sxs-lookup"><span data-stu-id="2a589-178">To retain tables at the Subscriber</span></span>  
  
-   <span data-ttu-id="2a589-179">По умолчанию при разрешении публикации для подписчиков, не являющихся подписчиками[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , значение свойства статьи **pre_creation_cmd** устанавливается в «drop».</span><span class="sxs-lookup"><span data-stu-id="2a589-179">By default, enabling a publication for non-[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Subscribers sets the value of the **pre_creation_cmd** article property to 'drop'.</span></span> <span data-ttu-id="2a589-180">Этот параметр говорит о том, что репликация должна удалить таблицу на подписчике, если ее имя совпадает с именем таблицы в статье.</span><span class="sxs-lookup"><span data-stu-id="2a589-180">This setting specifies that replication should drop a table at the Subscriber if it matches the name of the table in the article.</span></span> <span data-ttu-id="2a589-181">Если на подписчике уже существуют таблицы, которые необходимо сохранить, то для каждой статьи вызовите хранимую процедуру [sp_changearticle](/sql/relational-databases/system-stored-procedures/sp-changearticle-transact-sql) , указав в качестве параметра **pre_creation_cmd**значение «none».</span><span class="sxs-lookup"><span data-stu-id="2a589-181">If you have existing tables at the Subscriber that you want to keep, use the [sp_changearticle](/sql/relational-databases/system-stored-procedures/sp-changearticle-transact-sql) stored procedure for each article; specify a value 'none' for **pre_creation_cmd**.</span></span> <span data-ttu-id="2a589-182">`sp_changearticle @publication= 'MyPublication', @article= 'MyArticle', @property='pre_creation_cmd', @value='none'`.</span><span class="sxs-lookup"><span data-stu-id="2a589-182">`sp_changearticle @publication= 'MyPublication', @article= 'MyArticle', @property='pre_creation_cmd', @value='none'`.</span></span>  
  
#### <a name="to-generate-a-snapshot-for-the-publication"></a><span data-ttu-id="2a589-183">Создание моментального снимка для публикации</span><span class="sxs-lookup"><span data-stu-id="2a589-183">To generate a snapshot for the publication</span></span>  
  
1.  <span data-ttu-id="2a589-184">Раскройте папку **Репликация** , а затем папку **Локальные публикации** .</span><span class="sxs-lookup"><span data-stu-id="2a589-184">Expand the **Replication** folder, and then expand the **Local Publications** folder.</span></span>  
  
2.  <span data-ttu-id="2a589-185">Щелкните правой кнопкой мыши публикацию, а затем щелкните **Просмотреть состояние агента моментальных снимков**.</span><span class="sxs-lookup"><span data-stu-id="2a589-185">Right-click the publication, and then click **View Snapshot Agent Status**.</span></span>  
  
3.  <span data-ttu-id="2a589-186">В диалоговом окне **Просмотр состояния агента моментальных снимков — \<Publication>** нажмите кнопку **Пуск**.</span><span class="sxs-lookup"><span data-stu-id="2a589-186">In the **View Snapshot Agent Status - \<Publication>** dialog box, click **Start**.</span></span>  
  
 <span data-ttu-id="2a589-187">Когда агент моментальных снимков завершит создание моментального снимка, на экран будет выведено примерно следующее сообщение: «[100%] Создан моментальный снимок 17 статей».</span><span class="sxs-lookup"><span data-stu-id="2a589-187">When the Snapshot Agent finishes generating the snapshot, a message is displayed, such as "[100%] A snapshot of 17 article(s) was generated."</span></span>  
  
##  <a name="using-transact-sql"></a><a name="TsqlProcedure"></a> <span data-ttu-id="2a589-188">Использование Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="2a589-188">Using Transact-SQL</span></span>  
 <span data-ttu-id="2a589-189">Можно программно создавать принудительные подписки для подписчиков, отличных от[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , с помощью хранимых процедур репликации.</span><span class="sxs-lookup"><span data-stu-id="2a589-189">You can create push subscriptions to non-[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Subscribers programmatically using replication stored procedures.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="2a589-190">По возможности предлагайте пользователям вводить учетные данные системы безопасности во время выполнения приложения.</span><span class="sxs-lookup"><span data-stu-id="2a589-190">When possible, prompt users to enter security credentials at runtime.</span></span> <span data-ttu-id="2a589-191">В случае необходимости хранения учетных данных в файле скрипта этот файл следует защищать во избежание несанкционированного доступа.</span><span class="sxs-lookup"><span data-stu-id="2a589-191">If you must store credentials in a script file, you must secure the file to prevent unauthorized access.</span></span>  
  
#### <a name="to-create-a-push-subscription-for-a-transactional-or-snapshot-publication-to-a-non-sql-server-subscriber"></a><span data-ttu-id="2a589-192">Создание принудительной подписки для публикации транзакций или публикации моментальных снимков на подписчики, отличные от SQL Server</span><span class="sxs-lookup"><span data-stu-id="2a589-192">To create a push subscription for a transactional or snapshot publication to a non-SQL Server Subscriber</span></span>  
  
1.  <span data-ttu-id="2a589-193">Установите последнюю версию поставщика OLE DB для подписчика, отличного от[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , на издателе и распространителе.</span><span class="sxs-lookup"><span data-stu-id="2a589-193">Install the most recent OLE DB provider for the non-[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Subscriber at both the Publisher and Distributor.</span></span> <span data-ttu-id="2a589-194">Требования репликации к поставщику OLE DB см. в разделах [Non-SQL Server Subscribers](non-sql/non-sql-server-subscribers.md), [Oracle Subscribers](non-sql/oracle-subscribers.md), [IBM DB2 Subscribers](non-sql/ibm-db2-subscribers.md).</span><span class="sxs-lookup"><span data-stu-id="2a589-194">For the replication requirements for an OLE DB provider, see [Non-SQL Server Subscribers](non-sql/non-sql-server-subscribers.md), [Oracle Subscribers](non-sql/oracle-subscribers.md), [IBM DB2 Subscribers](non-sql/ibm-db2-subscribers.md).</span></span>  
  
2.  <span data-ttu-id="2a589-195">В издателе в базе данных издателя проверьте, поддерживает ли публикация подписчиков, отличных от [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], выполнив процедуру [sp_helppublication &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-helppublication-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="2a589-195">At the Publisher on the publication database, verify that the publication supports non-[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Subscribers by executing [sp_helppublication &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-helppublication-transact-sql).</span></span>  
  
    -   <span data-ttu-id="2a589-196">Если параметр `enabled_for_het_sub` имеет значение 1, то подписчики, отличные от [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], поддерживаются.</span><span class="sxs-lookup"><span data-stu-id="2a589-196">If the value of `enabled_for_het_sub` is 1, non-[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Subscribers are supported.</span></span>  
  
    -   <span data-ttu-id="2a589-197">Если значение `enabled_for_het_sub` равно 0, выполните [Sp_changepublication &#40;TRANSACT-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-changepublication-transact-sql), указав `enabled_for_het_sub` для **@property** и `true` для **@value** .</span><span class="sxs-lookup"><span data-stu-id="2a589-197">If the value of `enabled_for_het_sub` is 0, execute [sp_changepublication &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-changepublication-transact-sql), specifying `enabled_for_het_sub` for **@property** and `true` for **@value**.</span></span>  
  
        > [!NOTE]  
        >  <span data-ttu-id="2a589-198">Перед изменением значения `enabled_for_het_sub` на `true` необходимо удалить все существующие подписки на публикацию.</span><span class="sxs-lookup"><span data-stu-id="2a589-198">Before changing `enabled_for_het_sub` to `true`, you must drop any existing subscriptions to the publication.</span></span> <span data-ttu-id="2a589-199">Нельзя присвоить параметру `enabled_for_het_sub` значение `true`, если публикация также поддерживает обновляемые подписки.</span><span class="sxs-lookup"><span data-stu-id="2a589-199">You cannot set `enabled_for_het_sub` to `true` when the publication also supports updating subscriptions.</span></span> <span data-ttu-id="2a589-200">Изменение параметра `enabled_for_het_sub` отразится на других свойствах публикации.</span><span class="sxs-lookup"><span data-stu-id="2a589-200">Changing `enabled_for_het_sub` will affect other publication properties.</span></span> <span data-ttu-id="2a589-201">Дополнительные сведения см. в статье [Non-SQL Server Subscribers](non-sql/non-sql-server-subscribers.md).</span><span class="sxs-lookup"><span data-stu-id="2a589-201">For more information, see [Non-SQL Server Subscribers](non-sql/non-sql-server-subscribers.md).</span></span>  
  
3.  <span data-ttu-id="2a589-202">В издателе в базе данных публикации выполните процедуру [sp_addsubscription &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addsubscription-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="2a589-202">At the Publisher on the publication database, execute [sp_addsubscription &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addsubscription-transact-sql).</span></span> <span data-ttu-id="2a589-203">Укажите **@publication** , **@subscriber** , значение **(назначение по умолчанию)** для **@destination_db** , значение **Push** в параметре **@subscription_type** и значение 3 для **@subscriber_type** (указывает поставщика OLE DB).</span><span class="sxs-lookup"><span data-stu-id="2a589-203">Specify **@publication**, **@subscriber**, a value of **(default destination)** for **@destination_db**, a value of **push** for **@subscription_type**, and a value of 3 for **@subscriber_type** (specifies an OLE DB provider).</span></span>  
  
4.  <span data-ttu-id="2a589-204">В издателе в базе данных публикации выполните процедуру [sp_addpushsubscription_agent &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addpushsubscription-agent-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="2a589-204">At the Publisher on the publication database, execute [sp_addpushsubscription_agent &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addpushsubscription-agent-transact-sql).</span></span> <span data-ttu-id="2a589-205">Укажите следующее.</span><span class="sxs-lookup"><span data-stu-id="2a589-205">Specify the following:</span></span>  
  
    -   <span data-ttu-id="2a589-206">**@subscriber**Параметры и **@publication** .</span><span class="sxs-lookup"><span data-stu-id="2a589-206">The **@subscriber**and **@publication** parameters.</span></span>  
  
    -   <span data-ttu-id="2a589-207">Значение **(назначение по умолчанию)** для **@subscriber_db** ,</span><span class="sxs-lookup"><span data-stu-id="2a589-207">A value of **(default destination)** for **@subscriber_db**,</span></span>  
  
    -   <span data-ttu-id="2a589-208">Свойства [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] источника, не являющегося источником данных, для **@subscriber_provider** ,,, **@subscriber_datasrc** **@subscriber_location** **@subscriber_provider_string** и **@subscriber_catalog** .</span><span class="sxs-lookup"><span data-stu-id="2a589-208">The properties of the non-[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] data source for **@subscriber_provider**, **@subscriber_datasrc**, **@subscriber_location**, **@subscriber_provider_string**, and **@subscriber_catalog**.</span></span>  
  
    -   <span data-ttu-id="2a589-209">[!INCLUDE[msCoName](../../includes/msconame-md.md)]Учетные данные Windows, с которыми работает агент распространения на распространителе **@job_login** , для и **@job_password** .</span><span class="sxs-lookup"><span data-stu-id="2a589-209">The [!INCLUDE[msCoName](../../includes/msconame-md.md)] Windows credentials under which the Distribution Agent at the Distributor runs for **@job_login** and **@job_password**.</span></span>  
  
        > [!NOTE]  
        >  <span data-ttu-id="2a589-210">Соединения, выполняемые с помощью встроенной проверки подлинности Windows, всегда используют учетные данные Windows, указанные в **@job_login** и **@job_password** .</span><span class="sxs-lookup"><span data-stu-id="2a589-210">Connections made using Windows Integrated Authentication always use the Windows credentials specified by **@job_login** and **@job_password**.</span></span> <span data-ttu-id="2a589-211">Агент распространителя всегда создает локальные соединения с распространителем через встроенную систему проверки подлинности Windows.</span><span class="sxs-lookup"><span data-stu-id="2a589-211">The Distribution Agent always makes the local connection to the Distributor using Windows Integrated Authentication.</span></span> <span data-ttu-id="2a589-212">По умолчанию агент подключается к подписчику через встроенную систему проверки подлинности Windows;</span><span class="sxs-lookup"><span data-stu-id="2a589-212">By default, the agent will connect to the Subscriber using Windows Integrated Authentication.</span></span>  
  
    -   <span data-ttu-id="2a589-213">Значение **0** в параметре **@subscriber_security_mode** и сведения об имени входа поставщика OLE DB для **@subscriber_login** и **@subscriber_password** .</span><span class="sxs-lookup"><span data-stu-id="2a589-213">A value of **0** for **@subscriber_security_mode** and the OLE DB provider login information for **@subscriber_login** and **@subscriber_password**.</span></span>  
  
    -   <span data-ttu-id="2a589-214">Расписание задания агента распространителя для этой подписки.</span><span class="sxs-lookup"><span data-stu-id="2a589-214">A schedule for the Distribution Agent job for this subscription.</span></span> <span data-ttu-id="2a589-215">Дополнительные сведения см. в статье [Specify Synchronization Schedules](specify-synchronization-schedules.md).</span><span class="sxs-lookup"><span data-stu-id="2a589-215">For more information, see [Specify Synchronization Schedules](specify-synchronization-schedules.md).</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="2a589-216">При создании принудительной подписки на издателе с удаленным распространителем значения, указываемые для всех параметров, включая *job_login* и *job_password*, передаются распространителю в виде обычного текста.</span><span class="sxs-lookup"><span data-stu-id="2a589-216">When creating a push subscription at a Publisher with a remote Distributor, the values supplied for all parameters, including *job_login* and *job_password*, are sent to the Distributor as plain text.</span></span> <span data-ttu-id="2a589-217">Прежде чем выполнять эту хранимую процедуру, необходимо зашифровать соединение между издателем и его удаленным распространителем.</span><span class="sxs-lookup"><span data-stu-id="2a589-217">You should encrypt the connection between the Publisher and its remote Distributor before executing this stored procedure.</span></span> <span data-ttu-id="2a589-218">Дополнительные сведения см. в разделе [Включение шифрования соединений в компоненте Database Engine (диспетчер конфигураций SQL Server)](../../database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine.md).</span><span class="sxs-lookup"><span data-stu-id="2a589-218">For more information, see [Enable Encrypted Connections to the Database Engine &#40;SQL Server Configuration Manager&#41;](../../database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="2a589-219">См. также:</span><span class="sxs-lookup"><span data-stu-id="2a589-219">See Also</span></span>  
 <span data-ttu-id="2a589-220">[IBM DB2 Subscribers](non-sql/ibm-db2-subscribers.md) </span><span class="sxs-lookup"><span data-stu-id="2a589-220">[IBM DB2 Subscribers](non-sql/ibm-db2-subscribers.md) </span></span>  
 <span data-ttu-id="2a589-221">[Oracle Subscribers](non-sql/oracle-subscribers.md) </span><span class="sxs-lookup"><span data-stu-id="2a589-221">[Oracle Subscribers](non-sql/oracle-subscribers.md) </span></span>  
 <span data-ttu-id="2a589-222">[Другие подписчики, отличные от SQL Server](non-sql/other-non-sql-server-subscribers.md) </span><span class="sxs-lookup"><span data-stu-id="2a589-222">[Other Non-SQL Server Subscribers](non-sql/other-non-sql-server-subscribers.md) </span></span>  
 <span data-ttu-id="2a589-223">[Replication System Stored Procedures Concepts](concepts/replication-system-stored-procedures-concepts.md) </span><span class="sxs-lookup"><span data-stu-id="2a589-223">[Replication System Stored Procedures Concepts](concepts/replication-system-stored-procedures-concepts.md) </span></span>  
 [<span data-ttu-id="2a589-224">Рекомендации по защите репликации</span><span class="sxs-lookup"><span data-stu-id="2a589-224">Replication Security Best Practices</span></span>](security/replication-security-best-practices.md)  
  
  
