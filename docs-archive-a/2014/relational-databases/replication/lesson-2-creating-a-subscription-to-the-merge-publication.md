---
title: Занятие 2. Создание подписки на публикацию слиянием | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- replication [SQL Server], tutorials
ms.assetid: 06722baa-9065-443e-b1d5-99036cf89074
author: rothja
ms.author: jroth
ms.openlocfilehash: 2ca4f9cdf9c40d80b428d65b4201be61c2ea3eae
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87665290"
---
# <a name="lesson-2-creating-a-subscription-to-the-merge-publication"></a>Занятие 2. Создание подписки на публикацию слиянием
  На этом занятии будет создана подписка с помощью среды [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]. Затем будут установлены разрешения на базу данных подписки и вручную будет сформирован моментальный снимок отфильтрованных данных для новой подписки. Приступать к этому занятию нужно только по завершении предыдущего: [Занятие 1. Публикация данных с помощью репликации слиянием](lesson-1-publishing-data-using-merge-replication.md).  
  
### <a name="to-create-the-subscription"></a>Создание подписки  
  
1.  Подключитесь к подписчику в среде [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], разверните узел сервера и папку **Репликация** , щелкните правой кнопкой мыши папку **Локальные подписки** и выберите пункт **Создать подписку**.  
  
     Откроется мастер создания подписки.  
  
2.  На странице **Публикация** из списка **Издатель** выберите **Найти издатель SQL Server** .  
  
3.  В диалоговом окне **Соединение с сервером** введите имя экземпляра издателя в поле **Имя сервера** , а затем щелкните **Подключиться**.  
  
4.  Щелкните элемент **AdvWorksSalesOrdersMerge**, а затем нажмите кнопку **Далее**.  
  
5.  На странице "Расположение агента слияния" щелкните **Выполнять каждый агент на своем подписчике**и нажмите кнопку **Далее**.  
  
6.  На странице "Подписчики" выберите имя экземпляра сервера подписчика и в списке **База данных подписки**выберите **\<New Database>** .  
  
7.  В диалоговом окне **Новая база данных** в поле **Имя базы данных** введите **SalesOrdersReplica** , нажмите кнопку **ОК**, а затем кнопку **Далее**.  
  
8.  На странице Безопасность агент слияния нажмите кнопку с многоточием (**...**), введите \<_Machine_Name> _**\ repl_merge** в поле **учетная запись процесса** , укажите пароль для этой учетной записи, нажмите **кнопку ОК**, нажмите кнопку **Далее**, а затем кнопку **Далее** еще раз.  
  
9. На странице "Инициализация подписок" выберите из списка **Инициализировать, когда** пункт **При первой синхронизации** , нажмите кнопку **Далее**, а затем снова кнопку **Далее** .  
  
10. На странице значения HOST_NAME введите значение `adventure-works\pamela0` в поле **HOST_NAME значение** и нажмите кнопку **Готово**.  
  
11. Нажмите снова кнопку **Готово** и после создания подписки нажмите кнопку **Закрыть**.  
  
### <a name="setting-database-permissions-at-the-subscriber"></a>Установка разрешений базы данных на подписчике  
  
1.  Подключитесь к подписчику в среде [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], разверните узлы **Базы данных**, **SalesOrdersReplica**и **Безопасность**, щелкните правой кнопкой мыши элемент **Пользователи**и выберите пункт **Новый пользователь**.  
  
2.  На странице **Общие** введите \<_Machine_Name> _ **\ repl_merge** в поле **имя пользователя** нажмите кнопку с многоточием (**...**), нажмите кнопку **Обзор**, \<_Machine_Name> выберите _ **\ repl_merge**, нажмите кнопку **ОК**, щелкните **Проверить имена**и нажмите кнопку **ОК**.  
  
3.  Чтобы создать пользователя, в поле **Членство в роли базы данных**выберите **db_owner**и нажмите кнопку **ОК** .  
  
### <a name="to-create-the-filtered-data-snapshot-for-the-subscription"></a>Создание моментального снимка отфильтрованных данных подписки  
  
1.  Подключитесь к издателю в среде [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], а затем раскройте узел сервера и папку **Репликация** .  
  
2.  В папке **Локальные публикации** щелкните правой кнопкой мыши публикацию **AdvWorksSalesOrdersMerge** и выберите пункт **Свойства**.  
  
     Откроется диалоговое окно **Свойства публикации** .  
  
3.  Выберите страницу **Секции данных** и нажмите кнопку **Добавить**.  
  
4.  В диалоговом окне **Добавление секции данных** введите `adventure-works\pamela0` в поле **HOST_NAME значение** и нажмите кнопку **ОК**.  
  
5.  Выберите добавленную секцию, щелкните **Создать выбранные моментальные снимки**и нажмите кнопку **ОК**.  
  
## <a name="next-steps"></a>Next Steps  
 Подписка на публикацию слиянием создана успешно, и сформирован отфильтрованный моментальный снимок секций данных новой подписки, так что снимок будет доступен при инициализации подписки. Далее предстоит предоставить права агенту слияния на базу данных подписки и запустить агент слияния, чтобы приступить к синхронизации и инициализировать подписку. См. [Занятие 3. Синхронизация подписки на публикацию слиянием](lesson-3-synchronizing-the-subscription-to-the-merge-publication.md).  
  
## <a name="see-also"></a>См. также:  
 [Subscribe to Publications](subscribe-to-publications.md)   
 [Create a Pull Subscription](create-a-pull-subscription.md)   
 [Snapshots for Merge Publications with Parameterized Filters](snapshots-for-merge-publications-with-parameterized-filters.md)  
  
  
