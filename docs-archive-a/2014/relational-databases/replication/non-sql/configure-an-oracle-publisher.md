---
title: Настройка издателя Oracle | Документация Майкрософт
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- Oracle publishing [SQL Server replication], configuring
ms.assetid: 240c8416-c8e5-4346-8433-07e0f779099f
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 4941a02deb770678f4efcf4d2dfc7b08243fff54
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87733942"
---
# <a name="configure-an-oracle-publisher"></a>Настройка издателя Oracle
  Публикации издателей Oracle создаются таким же способом, как и публикации моментальных снимков и публикации транзакций, но перед тем как создать публикацию от издателя Oracle, необходимо выполнить следующие шаги (в данном разделе подробно описаны шаги 1, 3 и 4):  
  
1.  Используя предоставленный скрипт, создайте в базе данных Oracle административного пользователя для репликации.  
  
2.  На каждую из публикуемых таблиц предоставьте разрешение SELECT непосредственно (не через роль) пользователю с правами администратора Oracle, созданному на шаге 1.  
  
3.  Установите на распространитель [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] клиентское ПО Oracle и поставщик OLE DB, а затем остановите и перезапустите экземпляр [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]. Если распространитель запущен на 64-разрядной платформе, необходимо использовать 64-разрядную версию поставщика OLE DB Oracle.  
  
4.  Настройте базу данных Oracle как издатель на распространителе [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .  
  
 Список объектов, которые могут реплицироваться из базы данных Oracle, приводится в статье [Рассмотрение структуры и ограничений издателей Oracle](design-considerations-and-limitations-for-oracle-publishers.md).  
  
> [!NOTE]  
>  Необходимо быть членом предопределенной роли сервера **sysadmin** , чтобы включить издатель или распространитель и создать публикацию или подписку Oracle из публикации Oracle.  
  
## <a name="creating-the-replication-administrative-user-schema-within-the-oracle-database"></a>Создание схемы администратора репликации в базе данных Oracle  
 Агенты репликации подключаются к базе данных Oracle и выполняют операции в контексте созданной пользовательской схемы. Этой схеме должны быть предоставлены некоторые разрешения, перечисленные далее. Данная схема является владельцем всех объектов, созданных в процессе репликации [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] на издателе Oracle, за исключением открытого синонима **MSSQLSERVERDISTRIBUTOR**. Дополнительные сведения об объектах, создаваемых в базе данных Oracle, см. в разделе [Objects Created on the Oracle Publisher](objects-created-on-the-oracle-publisher.md).  
  
> [!NOTE]  
>  При удалении открытого синонима **MSSQLSERVERDISTRIBUTOR** и пользователя сконфигурированной репликации Oracle с параметром **CASCADE** из издателя Oracle удаляются все объекты репликации.  
  
 Для помощи в настройке пользовательской схемы репликации предоставляется образец скрипта. После установки [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] скрипт можно найти в следующем каталоге: *\<drive>* :\\\Program Files\Microsoft SQL Server\\ *\<InstanceName>* \MSSQL\Install\oracleadmin.sql. Он также содержится в разделе [Script to Grant Oracle Permissions](script-to-grant-oracle-permissions.md).  
  
 Подключитесь к базе данных Oracle под учетной записью с правами доступа администратора базы данных (DBA) и выполните скрипт. Данный скрипт запрашивает имя пользователя и пароль для схемы администратора репликации, а также табличное пространство по умолчанию, в котором будут создаваться объекты (табличное пространство уже должно существовать в базе данных Oracle). Сведения об указании других табличных пространств для объектов см. в статье [Управление табличными пространствами Oracle](manage-oracle-tablespaces.md). Выберите любое имя пользователя и надежный пароль, запишите их, так как позднее при настройке базы данных Oracle как издателя запрашиваются это имя и пароль. Рекомендуется использовать схему только для объектов, которые требуются для репликации. Не создавайте таблиц, которые будут публиковаться в этой схеме.  
  
### <a name="creating-the-user-schema-manually"></a>Создание пользовательской схемы вручную  
 При создании схемы администратора репликации необходимо предоставить схеме следующие разрешения, непосредственно или через роль базы данных:  
  
-   CREATE PUBLIC SYNONYM and DROP PUBLIC SYNONYM  
  
-   CREATE PROCEDURE  
  
-   CREATE SEQUENCE  
  
-   CREATE SESSION  
  
 Необходимо также предоставить пользователю непосредственно (не через роль) следующие разрешения:  
  
-   CREATE ANY TRIGGER. Это требуется, только если одновременно выполняется репликация моментальных снимков и транзакций.  
  
-   CREATE TABLE  
  
-   CREATE VIEW  
  
## <a name="installing-and-configuring-oracle-client-networking-software-on-the-sql-server-distributor"></a>Установка и настройка клиентского сетевого ПО Oracle на распространителе SQL Server  
 На распространителе [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] необходимо установить и настроить клиентское сетевое ПО Oracle и поставщик OLE DB Oracle, чтобы распространитель мог подключаться к издателю Oracle. После установки ПО задайте для папок установки соответствующие разрешения, а затем остановите и перезапустите экземпляр [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , чтобы обеспечить обновление всех параметров (разрешения описаны ниже в разделе «Установка разрешений для каталогов»).  
  
> [!NOTE]  
>  Необходимо использовать клиентское сетевое ПО Oracle последней доступной версии. Oracle рекомендует пользователям установить самую новую версию клиентского программного обеспечения. Клиентское программное обеспечение часто бывает новее, чем программное обеспечение баз данных.  
  
 Наиболее простой способ установки и настройки клиентского сетевого ПО заключается в использовании универсального установщика Oracle и программы Net Configuration Assistant, расположенных на компакт-диске с клиентским ПО Oracle.  
  
 В универсальном установщике Oracle необходимо ввести следующие сведения:  
  
|Сведения|Описание|  
|-----------------|-----------------|  
|Oracle Home|Это путь к каталогу, в который устанавливается программное обеспечение Oracle. Примите значение по умолчанию (C:\oracle\ora90 или похожее) или задайте другой путь. Дополнительные сведения о каталоге Oracle Home см. в подразделе «Рассмотрение Oracle Home» далее в этом разделе.|  
|Имя каталога Oracle Home|Псевдоним для пути к каталогу Oracle Home.|  
|Тип установки|В Oracle 10g выберите параметр установки **Administrator** .|  
  
 После того как установка Oracle завершена, для настройки сетевых подключений используйте компонент Net Configuration Assistant. Для настройки сетевых подключений необходимо ввести сведения в четырех разделах. Администратор базы данных Oracle настраивает сеть, когда устанавливает базу данных и прослушиватель, поэтому он должен быть способен предоставить эти сведения, если они отсутствуют. Необходимо выполнить следующие действия:  
  
|Действие|Описание|  
|------------|-----------------|  
|Идентификация базы данных|Существует два способа идентификации базы данных. Первый способ использует компонент Oracle System Identifier (SID), который доступен во всех версиях Oracle. Второй метод использует компонент Service Name, доступный в версиях Oracle, начиная с 8.0. Оба метода используют значение, которое конфигурируется при создании базы данных, и важно, чтобы конфигурация сетевого клиента использовала тот же метод именования, что и администратор при конфигурации прослушивателя базы данных.|  
|Идентификация сетевого псевдонима базы данных|Необходимо указать сетевой псевдоним, который будет использоваться для доступа к базе данных Oracle. Этот же псевдоним следует использовать при идентификации базы данных Oracle в качестве издателя на распространителе [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] . Сетевой псевдоним — это, по существу, указатель на удаленный SID или имя службы, сконфигурированное при создании базы данных. Это относится к нескольким названиям в различных версиях и продуктах Oracle, включая Net Service Name и TNS Alias. SQL*Plus запрашивает этот псевдоним как параметр «Host String» при входе.|  
|Выберите сетевой протокол.|Выберите соответствующие поддерживаемые протоколы. Большинство приложений использует протокол TCP.|  
|Задайте сведения об узле для идентификации прослушивателя базы данных|Узел — это имя или DNS-псевдоним компьютера, на котором запущен прослушиватель Oracle. Обычно это тот же компьютер, на котором расположена база данных. Для некоторых протоколов, возможно, нужно будет указать дополнительные сведения. Например если выбрать протокол ТСР, нужно будет указать порт, который слушается прослушивателем для запросов на подключение к целевой базе данных. По умолчанию для протокола TCP используется порт 1521.|  
  
### <a name="setting-directory-permissions"></a>Установка разрешений для каталогов  
 Учетной записи, под которой выполняется служба [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] на распространителе, должны быть предоставлены разрешения на чтение и выполнение для каталога (и всех подкаталогов), в котором установлено клиентское сетевое ПО Oracle.  
  
### <a name="testing-connectivity-between-the-sql-server-distributor-and-the-oracle-publisher"></a>Проверка соединения между распространителем SQL Server и издателем Oracle  
 Перед завершением программы Net Configuration Assistant есть возможность проверить подключения к издателю Oracle. До начала проверки соединения убедитесь в том, что экземпляр базы данных Oracle находится в режиме «в сети» и запущен прослушиватель Oracle. Если проверка не удалась, свяжитесь с администратором Oracle, ответственным за базу данных, к которой была предпринята попытка подключиться.  
  
 После успешного подключения к издателю Oracle попробуйте подключиться к базе данных под учетной записью и паролем, связанным с созданной схемой администратора репликации. Необходимо выполнить следующие действия при использовании той же учетной записи Windows, которую использует служба [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] :  
  
1.  Нажмите кнопку **Пуск**, затем щелкните **Выполнить**.  
  
2.  Введите `cmd` и нажмите кнопку **ОК**.  
  
3.  В командной строке введите:  
  
     `sqlplus <UserSchemaLogin>/<UserSchemaPassword>@<NetServiceName>`  
  
     Например: `sqlplus replication/$tr0ngPasswerd@Oracle90Server`  
  
4.  Если настройка сети прошла удачно, будет выполнен вход и появится окно сеанса `SQL` .  
  
5.  Если при подключении к базе данных Oracle возникли проблемы, см. раздел «Распространителю [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] не удается подключиться к экземпляру базы данных Oracle» в [Troubleshooting Oracle Publishers](troubleshooting-oracle-publishers.md).  
  
### <a name="considerations-for-oracle-home"></a>Рассмотрение Oracle Home  
 Oracle поддерживает параллельную установку двоичных файлов приложений, но только один набор двоичных файлов может использоваться для репликации в текущий момент. Каждый набор двоичных файлов связан с Oracle Home; двоичные файлы находятся в каталоге %ORACLE_HOME%\bin. Когда репликация выполняет подключение к издателю Oracle, необходимо убедиться в том, что используется правильный набор двоичных файлов (а именно, последняя версия клиентского сетевого ПО).  
  
 Войдите на распространитель под учетными записями, используемыми службой [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] и службой агентов [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , установите соответствующие переменные среды. Переменная %ORACLE_HOME% должна указывать на точку установки, заданную при установке сетевого клиентского программного обеспечения. Переменная %PATH% должна включать каталог %ORACLE_HOME% \bin в качестве первой записи, относящейся к Oracle. Сведения о настройке переменных среды см. в документации по операционной системе Windows.  
  
## <a name="configuring-the-oracle-database-as-a-publisher-at-the-sql-server-distributor"></a>Настройка базы данных Oracle как издателя на распространителе SQL Server  
 Издатели Oracle всегда используют удаленный распространитель. Необходимо настроить экземпляр [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , чтобы он работал как распространитель для издателя Oracle (издатель Oracle может использовать только один распределитель, но отдельный распространитель может обслуживать несколько издателей Oracle). После настройки распространителя определите экземпляр базы данных Oracle как издатель на распространителе [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] с помощью среды [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)], Transact-SQL или объектов RMO. Дополнительные сведения о настройке распространителя см. в [этой статье](../configure-distribution.md).  
  
> [!NOTE]  
>  Издатель Oracle не может иметь то же имя, что и его распространитель [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , или имя любого из издателей [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , использующих тот же распространитель.  
  
 При идентификации баз данных Oracle в качестве издателя необходимо выбрать параметр публикации Oracle: Complete или Oracle Gateway. После идентификации издателя изменить данный параметр без удаления и перенастройки издателя невозможно. Параметр «Complete» предназначен для обеспечения публикаций моментальными снимками и публикаций транзакций полным набором поддерживаемых функций, необходимых для публикаций Oracle. Параметр «Oracle Gateway» обеспечивает оптимизацию производительности для случаев, когда шлюзом между системами выступает репликация.  
  
 После идентификации издателя Oracle на распространителе [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] репликация создает связанный сервер с таким же именем, как и служба TNS базы данных Oracle. Этот связанный сервер может использоваться только репликацией. Если вам нужно подключиться к издателю Oracle через подключение связанного сервера, создайте другое имя службы TNS и используйте это имя при вызове процедуры [sp_addlinkedserver &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addlinkedserver-transact-sql).  
  
 Чтобы настроить издатель Oracle и создать публикацию, см. раздел [Create a Publication from an Oracle Database](../publish/create-a-publication-from-an-oracle-database.md).  
  
## <a name="see-also"></a>См. также:  
 [Administrative Considerations for Oracle Publishers](administrative-considerations-for-oracle-publishers.md)  (Вопросы управления издателями Oracle)  
 [Data Type Mapping for Oracle Publishers](data-type-mapping-for-oracle-publishers.md)   
 [Глоссарий терминов по публикации Oracle](glossary-of-terms-for-oracle-publishing.md)   
 [Обзор публикации Oracle](oracle-publishing-overview.md)  
  
  
