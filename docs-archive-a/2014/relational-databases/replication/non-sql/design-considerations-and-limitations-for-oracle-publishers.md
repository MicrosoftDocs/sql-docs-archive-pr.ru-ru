---
title: Рассмотрение структуры и ограничений издателей Oracle | Документация Майкрософт
ms.custom: ''
ms.date: 05/24/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- Oracle publishing [SQL Server replication], design considerations and limitations
ms.assetid: 8d9dcc59-3de8-4d36-a61f-bc3ca96516b6
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: b2776452e0da93cb1f170b6ee3356d95158df6b6
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87736197"
---
# <a name="design-considerations-and-limitations-for-oracle-publishers"></a>Рассмотрение структуры и ограничений издателей Oracle
  Публикация из базы данных Oracle предназначена для работы практически одинаково для публикации из [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] базы данных. Однако необходимо знать о следующих ограничениях и проблемах:  
  
-   Параметр Oracle Gateway обеспечивает большую производительность по сравнению с параметром Oracle Complete. Тем не менее этот параметр нельзя использовать для публикации одной и той же таблицы в нескольких публикациях транзакций. Таблица может присутствовать только в одной публикации транзакций и в любом количестве публикаций моментальных снимков. Если необходимо опубликовать одну таблицу в нескольких публикациях транзакций, выберите параметр Oracle Complete.  
  
-   Репликация поддерживает публикацию таблиц, индексов и материализованных представлений. Репликация других объектов не производится.  
  
-   В базах данных Oracle и [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] имеются некоторые небольшие различия между хранением и обработкой данных, которые влияют на репликацию.  
  
-   При использовании издателя Oracle существует ряд различий в способе поддержки свойств репликации транзакций.  
  
## <a name="support-for-publishing-objects-from-oracle"></a>Поддержка публикации объектов из Oracle  
 Репликация поддерживает копирование следующих объектов из баз данных Oracle:  
  
-   Таблицы  
  
-   Таблицы, упорядоченные по индексу;  
  
-   Индексы  
  
-   Материализованные представления (реплицируются в виде таблиц).  
  
 Следующие компоненты могут присутствовать в публикуемых таблицах, но не реплицируются:  
  
-   Индексы на основе домена;  
  
-   Индексы на основе функций;  
  
-   Умолчания;  
  
-   Проверочные ограничения  
  
-   Внешние ключи;  
  
-   Параметры хранения (пространства таблиц, кластеры, и т. д.).  
  
 Не могут быть реплицированы следующие объекты:  
  
-   Вложенные таблицы;  
  
-   Представления  
  
-   Пакеты, тела пакетов, процедуры и триггеры;  
  
-   Очереди  
  
-   Последовательности  
  
-   Синонимы  
  
 Сведения о поддерживаемых типах данных см. в разделе [Data Type Mapping for Oracle Publishers](data-type-mapping-for-oracle-publishers.md).  
  
## <a name="differences-between-oracle-and-sql-server"></a>Различия между Oracle и SQL Server  
  
-   Oracle имеет другие ограничения максимального размера для некоторых объектов. Любые объекты, созданные в базе данных публикации Oracle, не должны превышать максимальных размеров для соответствующих объектов в [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]. Дополнительные сведения об ограничениях в [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] см. в статье [Maximum Capacity Specifications for SQL Server](../../../sql-server/maximum-capacity-specifications-for-sql-server.md) (Спецификации максимально допустимых параметров SQL Server).  
  
-   Имена объектов Oracle по умолчанию создаются в верхнем регистре. Убедитесь, что имена объектов Oracle передаются набранными в верхнем регистре при их публикации с помощью распространителя [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , если эти имена введены прописными буквами в базе данных Oracle. Неправильный регистр букв в имени объекта может привести к сообщению об ошибке, указывающему, что объект не найден.  
  
-   Oracle имеет диалект SQL, немного отличающийся от SQL [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]; синтаксис фильтров строк должен поддерживаться Oracle.  
  
### <a name="considerations-for-large-objects"></a>Вопросы использования больших объектов  
 Данные больших объектов (Large object, LOB) не хранятся в таблице журнала статьи; обновления данных больших объектов всегда извлекаются непосредственно из опубликованной таблицы. Обновления копируются в публикации транзакций только в тех случаях, когда операция, изменяющая большой объект, вызывает срабатывание триггера репликации в реплицируемой таблице. Триггеры Oracle срабатывают, когда вставляются или удаляются строки, содержащие большие объекты; однако обновления столбцов больших объектов не приводят к запуску триггеров. Обновление столбца больших объектов будет немедленно реплицировано только в том случае, если в той же самой транзакции Oracle будет также выполняться обновление столбца небольших объектов, находящегося в той же самой строке. В противном случае столбец больших объектов будет обновлен на подписчике при следующем обновлении столбца небольших объектов, находящегося в той же самой строке. Убедитесь, что данная логика действий приемлема для вашего приложения.  
  
 Для репликации обновлений столбцов больших объектов в публикациях транзакций рассмотрите одну из следующих стратегий записи приложения.  
  
-   Удаление строки с последующей ее вставкой в пределах транзакции вместо обновления строки: указание нового большого объекта при повторной вставке строки. Поскольку и удаление, и вставка приводят к срабатыванию триггера, строка будет реплицирована.  
  
-   Включите в обновление строки в дополнение к столбцу больших объектов столбец небольших объектов, или обновите в строке столбец небольших объектов в пределах той же самой транзакции Oracle. В обоих случаях обновление столбца небольших объектов обеспечивает срабатывание триггера.  
  
 Дополнительные сведения о больших объектах (LOB) см. в разделе [Data Type Mapping for Oracle Publishers](data-type-mapping-for-oracle-publishers.md).  
  
### <a name="unique-indexes-and-constraints"></a>Уникальные индексы и ограничения  
 Для репликации моментальных снимков и репликации транзакций столбцы, содержащиеся в уникальных индексах и ограничениях (включая ограничения первичных ключей), должны соответствовать определенным условиям. Если они не соответствуют этим условиям, то ограничение или индекс не реплицируется.  
  
-   Максимальное число столбцов в индексе [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] равно 16.  
  
-   Все столбцы, включенные в уникальные ограничения, должны содержать поддерживаемые типы данных. Дополнительные сведения о типах данных см. в разделе [Data Type Mapping for Oracle Publishers](data-type-mapping-for-oracle-publishers.md).  
  
-   Должны быть опубликованы все столбцы, включенные в уникальные ограничения (к ним не могут применяться фильтры).  
  
-   Столбцы, включенные в уникальные ограничения или индексы, не должны иметь значений null.  
  
 Рассмотрите также следующие вопросы:  
  
-   Oracle и [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] обрабатывают значение NULL по-разному: Oracle допускает наличие нескольких строк со значениями NULL для столбцов, которые могут содержать значения NULL и включаются в ограничения уникальности или индексы. [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] обеспечивает уникальность, разрешая наличие только одной строки со значением NULL для одного и того же столбца. Нельзя опубликовать уникальное ограничение или индекс, разрешающий значение NULL, поскольку в этом случае произошло бы нарушение ограничения на подписчике, если публикуемая таблица содержит несколько строк со значениями NULL для любого из столбцов, включенных в индекс или ограничение.  
  
-   При проверке на уникальность конечные пробелы в поле игнорируются [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , а в Oracle — учитываются.  
  
 Как и в репликации транзакций [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , таблицы в публикациях транзакций Oracle требуют наличия первичного ключа; первичный ключ должен быть уникальным на основе правил, указанных выше. В случае если первичный ключ не соответствует правилам, указанным выше, таблица не может быть опубликована для репликации транзакций.  
  
## <a name="differences-between-oracle-publishing-and-standard-transactional-replication"></a>Различия между публикациями Oracle и стандартными репликациями транзакций  
  
-   Издатель Oracle не может иметь то же имя, что и его распространитель [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , любой из издателей [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , использующих этот распространитель, а также любой из подписчиков, которые получают публикацию. Публикации, обслуживаемые одним и тем же распространителем, должны иметь уникальное имя.  
  
-   Таблица, опубликованная в публикации Oracle, не может принимать реплицированные данные. Поэтому публикации Oracle не поддерживают публикации с немедленным обновлением или с обновляемыми посредством очередей подписками, а также топологии, в которых таблицы публикации действуют так же, как таблицы подписок, например одноранговые и двунаправленные репликации.  
  
-   Взаимосвязи первичных ключей с внешними ключами в базе данных Oracle не реплицируются на подписчики. Однако при получении изменений взаимосвязи в данных сохраняются.  
  
-   Стандартные публикации транзакций поддерживают таблицы, содержащие до 1000 столбцов. Публикации транзакций Oracle поддерживают 995 столбцов (репликация добавляет пять столбцов в каждую публикуемую таблицу).  
  
-   К инструкциям CREATE TABLE добавляются выражения порядка следования, чтобы сделать возможными сравнения, учитывающие регистр, которые имеют важные значения для первичных ключей и уникальных ограничений. Это поведение управляется параметром схемы 0x1000, который указывается с помощью **@schema_option** параметра [Sp_addarticle &#40;TRANSACT-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addarticle-transact-sql).  
  
-   Если для настройки или обслуживания издателя Oracle используются хранимые процедуры, не вставляйте эти процедуры в явную транзакцию. Такая вложенность не поддерживается связанным сервером, используемым для подключения к издателю Oracle.  
  
-   При создании подписки по запросу на публикацию Oracle с помощью мастера следует использовать мастер создания подписок, поставляемый с [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] и более поздними версиями. Тем не менее для предыдущих версий [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]можно использовать хранимые процедуры и интерфейсы SQL-DMO, чтобы настроить подписки по запросу на публикации Oracle.  
  
-   Если для распространения изменений на подписчики используются хранимые процедуры (по умолчанию), учтите, что синтаксис MCALL поддерживается, но имеет другую логику поведения, если публикация исходит от издателя Oracle. Обычно MCALL предоставляет битовую схему, которая показывает, какие столбцы у издателя были обновлены. В случае публикации Oracle битовая схема всегда показывает, что все столбцы были обновлены. Дополнительные сведения об использовании хранимых процедур см. в статье [Указание способа распространения изменений для статей транзакций](../transactional/transactional-articles-specify-how-changes-are-propagated.md).  
  
### <a name="transactional-replication-feature-support"></a>Поддержка функций репликации транзакций  
  
-   Публикации Oracle не поддерживают все параметры схемы, поддерживаемые публикациями SQL Server. Дополнительные сведения о параметрах схемы см. в статье [sp_addarticle (Transact-SQL)](/sql/relational-databases/system-stored-procedures/sp-addarticle-transact-sql).  
  
-   Подписчики на публикации Oracle не могут использовать немедленное обновление или очереди обновляемых подписок, а также не могут действовать в качестве узлов в одноранговой или двунаправленной топологии.  
  
-   Подписчики на публикации Oracle не могут быть повторно автоматически инициализированы из резервной копии.  
  
-   [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] поддерживает два типа проверки данных: двоичную и количества строк. Издатели Oracle поддерживают только проверку количества строк. Дополнительные сведения см. в статье [Проверка реплицированных данных](../validate-data-at-the-subscriber.md).  
  
-   [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] предусматривает два формата моментальных снимков: собственный режим bcp и символьный режим. Издатели Oracle поддерживают символьный режим моментальных снимков.  
  
-   Изменения схем для опубликованных таблиц Oracle не поддерживаются. Для внесения изменения схемы сначала надо удалить публикацию, внести изменения, и затем вновь создать публикацию и все подписки.  
  
    > [!NOTE]  
    >  Если изменения схемы и последующее удаление с воссозданием публикации и подписок выполняются во время отсутствия активности на публикуемых таблицах, можно установить для подписок параметр «поддержка только репликации». Это позволяет им синхронизироваться без необходимости копировать моментальный снимок на каждый подписчик. Дополнительные сведения см. в статье [Инициализация подписки на публикацию транзакций без моментального снимка](../initialize-a-transactional-subscription-without-a-snapshot.md).  
  
### <a name="replication-security-model"></a>Модель безопасности репликации  
 Модель безопасности публикации Oracle — та же самая, что и модель безопасности стандартной репликации транзакций, за следующими исключениями.  
  
-   Учетная запись, под которой агент моментальных снимков и агент чтения журналов устанавливают подключения от распространителя к издателю, указывается с помощью одного из следующих методов:  
  
    -   **@security_mode**Параметр [sp_adddistpublisher &#40;&#41;TRANSACT-SQL](/sql/relational-databases/system-stored-procedures/sp-adddistpublisher-transact-sql) (также указываются значения параметров **@login** и, **@password** Если используется проверка подлинности Oracle).  
  
    -   в диалоговом окне **Соединение с сервером** в среде SQL Server Management Studio, которое используется при настройке издателя Oracle на распространителе [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .  
  
     В стандартной репликации транзакций учетная запись указывается с помощью хранимых процедур [sp_addpublication_snapshot (Transact-SQL)](/sql/relational-databases/system-stored-procedures/sp-addpublication-snapshot-transact-sql) и [sp_addlogreader_agent (Transact-SQL)](/sql/relational-databases/system-stored-procedures/sp-addlogreader-agent-transact-sql).  
  
-   Учетную запись, под которой агент моментальных снимков и агент чтения журналов устанавливают подключения, невозможно изменить с помощью хранимой процедуры [sp_changedistpublisher (Transact-SQL)](/sql/relational-databases/system-stored-procedures/sp-changedistpublisher-transact-sql) или таблицы свойств, но пароль можно изменить.  
  
-   Если указать значение 1 (встроенная проверка подлинности Windows) для **@security_mode** параметра [Sp_adddistpublisher &#40;TRANSACT-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-adddistpublisher-transact-sql):  
  
    -   Учетная запись процесса и пароль, используемые для агент моментальных снимков и агент чтения журнала ( **@job_login** Параметры и **@job_password** для [sp_addpublication_snapshot &#40;transact-sql&#41;](/sql/relational-databases/system-stored-procedures/sp-addpublication-snapshot-transact-sql) и [sp_addlogreader_agent &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addlogreader-agent-transact-sql)) должны совпадать с учетной записью и паролем, используемыми для подключения к издателю Oracle.  
  
    -   Нельзя изменить **@job_login** параметр с помощью [Sp_changepublication_snapshot &#40;TRANSACT-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-changepublication-snapshot-transact-sql) или [SP_CHANGELOGREADER_AGENT &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-changelogreader-agent-transact-sql), но пароль можно изменить.  
  
 Дополнительные сведения о безопасности репликации см. в разделе [репликация SQL Server Security](../security/view-and-modify-replication-security-settings.md).  
  
## <a name="see-also"></a>См. также:  
 [Administrative Considerations for Oracle Publishers](administrative-considerations-for-oracle-publishers.md)  (Вопросы управления издателями Oracle)  
 [Настройка издателя Oracle](configure-an-oracle-publisher.md)   
 [Обзор публикации Oracle](oracle-publishing-overview.md)  
  
  
