---
title: Настройка служб IIS для веб-синхронизации | Документация Майкрософт
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- IIS server configuration [SQL Server replication]
- websync.log
- Web synchronization, IIS servers
ms.assetid: d651186e-c9ca-4864-a444-2cd6943b8e35
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 523c4fc30151acd3ee4df21f2fdaa2187e702870
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87657659"
---
# <a name="configure-iis-for-web-synchronization"></a><span data-ttu-id="1d369-102">настроить сервер IIS для веб-синхронизации</span><span class="sxs-lookup"><span data-stu-id="1d369-102">Configure IIS for Web Synchronization</span></span>
  <span data-ttu-id="1d369-103">Описанные в данном разделе процедуры составляют второй этап настройки веб-синхронизации при репликации слиянием.</span><span class="sxs-lookup"><span data-stu-id="1d369-103">The procedures in this topic make up the second step in configuring Web synchronization for merge replication.</span></span> <span data-ttu-id="1d369-104">Эти процедуры выполняют после включения веб-синхронизации для публикации.</span><span class="sxs-lookup"><span data-stu-id="1d369-104">You perform this step after you enable a publication for Web synchronization.</span></span> <span data-ttu-id="1d369-105">Обзор этого процесса настройки см. в разделе [Настроить веб-синхронизацию](configure-web-synchronization.md).</span><span class="sxs-lookup"><span data-stu-id="1d369-105">For an overview of the configuration process, see [Configure Web Synchronization](configure-web-synchronization.md).</span></span> <span data-ttu-id="1d369-106">После завершения выполнения процедур, описанных в этом разделе, перейдите к третьему этапу — настройке подписки для использования веб-синхронизации.</span><span class="sxs-lookup"><span data-stu-id="1d369-106">After you complete the procedures in this topic, continue to the third step, configuring a subscription to use Web synchronization.</span></span> <span data-ttu-id="1d369-107">Этот этап описывается в следующих разделах:</span><span class="sxs-lookup"><span data-stu-id="1d369-107">This third step is described in the following topics:</span></span>  
  
-   [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]<span data-ttu-id="1d369-108">: [Как настроить подписку для использования веб-синхронизации \(среда SQL Server Management Studio\)](https://msdn.microsoft.com/library/ms345214.aspx)</span><span class="sxs-lookup"><span data-stu-id="1d369-108">: [How to: Configure a Subscription to Use Web Synchronization \(SQL Server Management Studio\)](https://msdn.microsoft.com/library/ms345214.aspx)</span></span>  
  
-   <span data-ttu-id="1d369-109">Программирование репликации [!INCLUDE[tsql](../../includes/tsql-md.md)] : [How to: Configure a Subscription to Use Web Synchronization (Программирование репликации Transact-SQL Programming)](https://msdn.microsoft.com/library/ms345206.aspx).</span><span class="sxs-lookup"><span data-stu-id="1d369-109">Replication [!INCLUDE[tsql](../../includes/tsql-md.md)] programming: [How to: Configure a Subscription to Use Web Synchronization (Replication Transact-SQL Programming)](https://msdn.microsoft.com/library/ms345206.aspx)</span></span>  
  
-   <span data-ttu-id="1d369-110">RMO: [Как настроить подписку для использования веб-синхронизации (программирование объектов RMO)](https://msdn.microsoft.com/library/ms345207.aspx).</span><span class="sxs-lookup"><span data-stu-id="1d369-110">RMO: [How to: Configure a Subscription to Use Web Synchronization (RMO Programming)](https://msdn.microsoft.com/library/ms345207.aspx)</span></span>  
  
 <span data-ttu-id="1d369-111">Веб-синхронизация использует сервер служб [!INCLUDE[msCoName](../../includes/msconame-md.md)] IIS для синхронизации подписок по запросу на публикации слиянием.</span><span class="sxs-lookup"><span data-stu-id="1d369-111">Web synchronization uses a computer that is running [!INCLUDE[msCoName](../../includes/msconame-md.md)] Internet Information Services (IIS) to synchronize pull subscriptions to merge publications.</span></span> <span data-ttu-id="1d369-112">Поддерживаются службы IIS версий 5.0, 6.0 и 7.0.</span><span class="sxs-lookup"><span data-stu-id="1d369-112">IIS version 5.0, IIS version 6.0, and IIS version 7.0 are supported.</span></span> <span data-ttu-id="1d369-113">Мастер настройки веб-синхронизации не поддерживается в версии служб IIS 7.0.</span><span class="sxs-lookup"><span data-stu-id="1d369-113">The Configure Web Synchronization Wizard is not supported on IIS version 7.0.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="1d369-114">Убедитесь в том, что приложение использует только [!INCLUDE[dnprdnlong](../../includes/dnprdnlong-md.md)] или более позднюю версию, а более ранние версии [!INCLUDE[dnprdnshort](../../includes/dnprdnshort-md.md)] на IIS-сервере не установлены.</span><span class="sxs-lookup"><span data-stu-id="1d369-114">Make sure that your application uses only [!INCLUDE[dnprdnlong](../../includes/dnprdnlong-md.md)] or later versions, and that earlier versions of the [!INCLUDE[dnprdnshort](../../includes/dnprdnshort-md.md)] are not installed on the IIS server.</span></span> <span data-ttu-id="1d369-115">Более ранние версии [!INCLUDE[dnprdnshort](../../includes/dnprdnshort-md.md)] могут вызывать ошибки.</span><span class="sxs-lookup"><span data-stu-id="1d369-115">Earlier versions of the [!INCLUDE[dnprdnshort](../../includes/dnprdnshort-md.md)] can cause errors.</span></span> <span data-ttu-id="1d369-116">В частности: "Недопустимый формат сообщения во время веб-синхронизации.</span><span class="sxs-lookup"><span data-stu-id="1d369-116">These include the following: "The format of a message during Web synchronization was invalid.</span></span> <span data-ttu-id="1d369-117">Убедитесь в том, что компоненты репликации на веб-сервере настроены правильно».</span><span class="sxs-lookup"><span data-stu-id="1d369-117">Ensure that replication components are properly configured at the Web server".</span></span>  
  
> [!CAUTION]  
>  <span data-ttu-id="1d369-118">Не используйте одновременно и расположение WebSync, и альтернативное расположение папки моментальных снимков.</span><span class="sxs-lookup"><span data-stu-id="1d369-118">Do not use both WebSync and alternate snapshot folder locations at the same time.</span></span>  
  
 <span data-ttu-id="1d369-119">Чтобы использовать веб-синхронизацию, необходимо настроить службы IIS, выполнив следующие шаги.</span><span class="sxs-lookup"><span data-stu-id="1d369-119">To use Web synchronization, you must configure IIS by completing the following steps.</span></span> <span data-ttu-id="1d369-120">Каждый шаг подробно описан в данном разделе.</span><span class="sxs-lookup"><span data-stu-id="1d369-120">Each step is described in detail in this topic.</span></span>  
  
1.  <span data-ttu-id="1d369-121">Настройте протокол SSL (Secure Sockets Layer).</span><span class="sxs-lookup"><span data-stu-id="1d369-121">Configure Secure Sockets Layer (SSL).</span></span> <span data-ttu-id="1d369-122">Протокол SSL необходим для связи между сервером IIS и всеми подписчиками.</span><span class="sxs-lookup"><span data-stu-id="1d369-122">SSL is required for communication between IIS and all Subscribers.</span></span>  
  
2.  <span data-ttu-id="1d369-123">Установите [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] компоненты подключения на компьютере, где работают службы IIS, с помощью [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] мастера установки.</span><span class="sxs-lookup"><span data-stu-id="1d369-123">Install [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] connectivity components on the computer that is running IIS by using the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Installation Wizard.</span></span> <span data-ttu-id="1d369-124">Если планируется использовать мастер настройки веб-синхронизации, упомянутый в шаге 3, то также необходимо установить среду [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] на сервер IIS.</span><span class="sxs-lookup"><span data-stu-id="1d369-124">If you plan to use the Configure Web Synchronization Wizard that is mentioned in step 3, you must also install [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] on the computer that is running IIS.</span></span>  
  
3.  <span data-ttu-id="1d369-125">Настройте сервер IIS для проведения веб-синхронизации.</span><span class="sxs-lookup"><span data-stu-id="1d369-125">Configure the computer that is running IIS for Web synchronization.</span></span> <span data-ttu-id="1d369-126">Можно выполнить настройку вручную или использовать мастер настройки веб-синхронизации.</span><span class="sxs-lookup"><span data-stu-id="1d369-126">You can configure the computer manually or use the Configure Web Synchronization Wizard.</span></span> <span data-ttu-id="1d369-127">Рекомендуется использовать мастер настройки веб-синхронизации.</span><span class="sxs-lookup"><span data-stu-id="1d369-127">We recommend that you use the wizard.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="1d369-128">Если сервер служб IIS работает под управлением 64-разрядной версии Windows, необходимо выполнить следующую команду, чтобы убедиться, что этот сервер правильно настроен для запуска приложений ISAPI.</span><span class="sxs-lookup"><span data-stu-id="1d369-128">If the computer that is running IIS is running on a 64-bit version of Windows, you must run following command to make sure that the server is properly configured to run Internet Server API (ISAPI) applications.</span></span> <span data-ttu-id="1d369-129">Дополнительные сведения см. в документации служб IIS.</span><span class="sxs-lookup"><span data-stu-id="1d369-129">For more information, see the IIS documentation.</span></span>  
  
    ```  
    cscript %SystemDrive%\inetpub\AdminScripts\adsutil.vbs set w3svc/AppPools/Enable32bitAppOnWin64 1  
    ```  
  
4.  <span data-ttu-id="1d369-130">Установите нужные разрешения для средства прослушивания репликации [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="1d369-130">Set the appropriate permissions for the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Replication Listener.</span></span>  
  
5.  <span data-ttu-id="1d369-131">Запустите веб-синхронизацию в диагностическом режиме, чтобы проверить соединение с сервером IIS и убедиться, что SSL-сертификат установлен правильно.</span><span class="sxs-lookup"><span data-stu-id="1d369-131">Run Web synchronization in diagnostic mode to test the connection to the computer that is running IIS and to make sure that the SSL certificate is properly installed.</span></span>  
  
## <a name="configuring-secure-sockets-layer"></a><span data-ttu-id="1d369-132">Настройка протокола SSL</span><span class="sxs-lookup"><span data-stu-id="1d369-132">Configuring Secure Sockets Layer</span></span>  
 <span data-ttu-id="1d369-133">Чтобы настроить протокол SSL, укажите сертификат, который будет использоваться сервером IIS.</span><span class="sxs-lookup"><span data-stu-id="1d369-133">To configure SSL, specify a certificate for the computer that is running IIS to use.</span></span> <span data-ttu-id="1d369-134">Веб-синхронизация для репликации слиянием поддерживает использование серверных сертификатов, а не клиентских.</span><span class="sxs-lookup"><span data-stu-id="1d369-134">Web synchronization for merge replication supports using server certificates but not client certificates.</span></span> <span data-ttu-id="1d369-135">Чтобы настроить службы IIS для развертывания, необходимо вначале получить сертификат из центра сертификации (certification authority, CA).</span><span class="sxs-lookup"><span data-stu-id="1d369-135">To configure IIS for deployment, you must first obtain a certificate from a certification authority (CA).</span></span> <span data-ttu-id="1d369-136">Центр сертификации — это организация, отвечающая за установку и документальное подтверждение подлинности открытых ключей шифрования, принадлежащих пользователям, компьютерам и другим центрам сертификации.</span><span class="sxs-lookup"><span data-stu-id="1d369-136">A certificate authority is an entity that is responsible for establishing and vouching for the authenticity of public encryption keys that belong to users, computers, or other certification authorities.</span></span> <span data-ttu-id="1d369-137">Дополнительные сведения о сертификатах см. в документации по службам IIS.</span><span class="sxs-lookup"><span data-stu-id="1d369-137">For more information about certificates, see the IIS documentation.</span></span> <span data-ttu-id="1d369-138">После установки сертификата необходимо связать сертификат с веб-сайтом, который используется веб-синхронизацией.</span><span class="sxs-lookup"><span data-stu-id="1d369-138">After you install the certificate, you must associate the certificate with the Web site that is used by Web synchronization.</span></span>  
  
#### <a name="to-specify-a-certificate-for-deployment"></a><span data-ttu-id="1d369-139">Указание сертификата для развертывания</span><span class="sxs-lookup"><span data-stu-id="1d369-139">To specify a certificate for deployment</span></span>  
  
1.  <span data-ttu-id="1d369-140">Войдите на сервер IIS под учетной записью администратора.</span><span class="sxs-lookup"><span data-stu-id="1d369-140">Log on to the computer that is running IIS as an administrator.</span></span>  
  
2.  <span data-ttu-id="1d369-141">Запустите **диспетчер служб IIS**:</span><span class="sxs-lookup"><span data-stu-id="1d369-141">Start **Internet Information Services (IIS) Manager**:</span></span>  
  
    1.  <span data-ttu-id="1d369-142">Нажмите кнопку **Пуск**, затем щелкните **Выполнить**.</span><span class="sxs-lookup"><span data-stu-id="1d369-142">Click **Start**, and then click **Run**.</span></span>  
  
    2.  <span data-ttu-id="1d369-143">В поле **Открыть** введите `inetmgr` и нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="1d369-143">In the **Open** box, type `inetmgr`, and then click **OK**.</span></span>  
  
3.  <span data-ttu-id="1d369-144">Запустите мастер сертификатов служб IIS:</span><span class="sxs-lookup"><span data-stu-id="1d369-144">Run the IIS Certificate Wizard:</span></span>  
  
    1.  <span data-ttu-id="1d369-145">В окне **Диспетчер служб IIS**раскройте узел **локальный компьютер** , а затем — папку **Веб-сайты** .</span><span class="sxs-lookup"><span data-stu-id="1d369-145">In **Internet Information Services (IIS) Manager**, expand the **local computer** node, and then expand the **Web Sites** folder.</span></span>  
  
    2.  <span data-ttu-id="1d369-146">Щелкните правой кнопкой **Веб-сайт по умолчанию**и выберите **Свойства**.</span><span class="sxs-lookup"><span data-stu-id="1d369-146">Right-click **Default Web Site**, and then click **Properties**.</span></span>  
  
    3.  <span data-ttu-id="1d369-147">В диалоговом окне **Свойства веб-сайта по умолчанию** на вкладке **Безопасность каталогов** щелкните **Сертификат сервера**.</span><span class="sxs-lookup"><span data-stu-id="1d369-147">In the **Default Web Site Properties** dialog box, on the **Directory Security** tab, click **Server Certificate**.</span></span>  
  
    4.  <span data-ttu-id="1d369-148">Выполните все указания мастера сертификатов веб-сервера</span><span class="sxs-lookup"><span data-stu-id="1d369-148">Complete the Web Server Certificate Wizard.</span></span>  
  
4.  <span data-ttu-id="1d369-149">Нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="1d369-149">Click **OK**.</span></span>  
  
 <span data-ttu-id="1d369-150">Если не удается получить сертификат от центра сертификации, можно указать сертификат для тестирования.</span><span class="sxs-lookup"><span data-stu-id="1d369-150">If you cannot obtain a server certificate from a CA, you can specify a certificate for testing.</span></span> <span data-ttu-id="1d369-151">Чтобы настроить службы IIS 6.0 для тестирования, установите сертификат с помощью программы SelfSSL.</span><span class="sxs-lookup"><span data-stu-id="1d369-151">To configure IIS 6.0 for testing, install a certificate by using the SelfSSL utility.</span></span> <span data-ttu-id="1d369-152">Эта программа доступна в IIS 6.0 Resource Kit.</span><span class="sxs-lookup"><span data-stu-id="1d369-152">This utility is available in the IIS 6.0 Resource Kit.</span></span> <span data-ttu-id="1d369-153">Инструменты можно загрузить в [центре загрузки Майкрософт](https://www.microsoft.com/download/details.aspx?id=5135).</span><span class="sxs-lookup"><span data-stu-id="1d369-153">You can download the tools from the [Microsoft Download Center](https://www.microsoft.com/download/details.aspx?id=5135).</span></span> <span data-ttu-id="1d369-154">Дополнительные сведения об использовании служб IIS версии 5.0 см. на [веб-сайте справки и поддержки Майкрософт](https://go.microsoft.com/fwlink/?LinkId=46229).</span><span class="sxs-lookup"><span data-stu-id="1d369-154">For IIS 5.0, go to [Microsoft Help and Support](https://go.microsoft.com/fwlink/?LinkId=46229).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="1d369-155">Сертификат должен быть связан с веб-сайтом, прежде чем этот сайт сможет использовать протокол SSL.</span><span class="sxs-lookup"><span data-stu-id="1d369-155">A certificate must be associated with a Web site before that Web site can use SSL.</span></span> <span data-ttu-id="1d369-156">Программа SelfSSL автоматически связывает сертификат с веб-сайтом по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="1d369-156">SelfSSL automatically associates the certificate with the default Web site.</span></span> <span data-ttu-id="1d369-157">Если сертификат уже имеется или будет установлен позже из центра сертификации, то необходимо явно связать этот сертификат с веб-сайтом, который используется для веб-синхронизации.</span><span class="sxs-lookup"><span data-stu-id="1d369-157">If you already have a certificate or later install a certificate from a CA, you must explicitly associate that certificate with the Web site that is used by Web synchronization.</span></span> <span data-ttu-id="1d369-158">Убедитесь, что существует только один сертификат, связанный с веб-сайтом, который используется для синхронизации подписок.</span><span class="sxs-lookup"><span data-stu-id="1d369-158">Make sure there is only one certificate associated with the Web site that is used to synchronize subscriptions.</span></span> <span data-ttu-id="1d369-159">Если имеется несколько сертификатов, подписчик будет использовать первый доступный веб-сайт.</span><span class="sxs-lookup"><span data-stu-id="1d369-159">If there are multiple certificates, the Subscriber will use the first available Web site.</span></span>  
  
#### <a name="to-specify-a-certificate-for-testing-in-iis-60"></a><span data-ttu-id="1d369-160">Указание сертификата для тестирования в службах IIS 6.0</span><span class="sxs-lookup"><span data-stu-id="1d369-160">To specify a certificate for testing in IIS 6.0</span></span>  
  
1.  <span data-ttu-id="1d369-161">Войдите на сервер IIS под учетной записью администратора.</span><span class="sxs-lookup"><span data-stu-id="1d369-161">Log on to the computer that is running IIS as an administrator.</span></span>  
  
2.  <span data-ttu-id="1d369-162">Загрузите и установите программу SelfSSL.</span><span class="sxs-lookup"><span data-stu-id="1d369-162">Download and install SelfSSL.</span></span> <span data-ttu-id="1d369-163">По умолчанию приложение устанавливается в \<*drive*> папку: \Program Files\IIS Resources\SelfSSL.</span><span class="sxs-lookup"><span data-stu-id="1d369-163">By default, the application is installed to \<*drive*>:\Program Files\IIS Resources\SelfSSL.</span></span> <span data-ttu-id="1d369-164">Ярлыки приложений и документов копируются в \<*drive*> : \Documents and Settings\All Settings\all users\start Menu\Programs\IIS Resources\SelfSSL.</span><span class="sxs-lookup"><span data-stu-id="1d369-164">Application and documentation shortcuts are copied to \<*drive*>:\Documents and Settings\All Users\Start Menu\Programs\IIS Resources\SelfSSL.</span></span>  
  
3.  <span data-ttu-id="1d369-165">Запустите SelfSSL:</span><span class="sxs-lookup"><span data-stu-id="1d369-165">Run SelfSSL:</span></span>  
  
    -   <span data-ttu-id="1d369-166">Чтобы запустить SelfSSL со значениями по умолчанию для всех параметров, найдите каталог установки этой программы, а затем дважды щелкните файл SelfSSL.exe.</span><span class="sxs-lookup"><span data-stu-id="1d369-166">To run SelfSSL with default values for all parameters, locate the installation directory for the application, and then double-click SelfSSL.exe.</span></span>  
  
        > [!NOTE]  
        >  <span data-ttu-id="1d369-167">По умолчанию сертификат, устанавливаемый программой SelfSSL, действителен в течение семи дней.</span><span class="sxs-lookup"><span data-stu-id="1d369-167">By default, the certificate that is installed by SelfSSL is valid for seven days.</span></span>  
  
    -   <span data-ttu-id="1d369-168">Чтобы указать значения для одного или нескольких параметров, нажмите кнопку **Пуск**и выберите **Выполнить**.</span><span class="sxs-lookup"><span data-stu-id="1d369-168">To specify values for one or more parameters: click **Start**, and then click **Run**.</span></span> <span data-ttu-id="1d369-169">В поле **Открыть** введите `cmd` , а затем нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="1d369-169">In the **Open** box, enter `cmd`, and then click **OK**.</span></span> <span data-ttu-id="1d369-170">Найдите каталог установки программы SelfSSL, введите `SelfSSL`, а затем задайте значения для одного или нескольких параметров.</span><span class="sxs-lookup"><span data-stu-id="1d369-170">Locate the SelfSSL installation directory, type `SelfSSL`, and then specify values for one or more parameters.</span></span> <span data-ttu-id="1d369-171">Для просмотра списка параметров введите команду `SelfSSL -?`.</span><span class="sxs-lookup"><span data-stu-id="1d369-171">For a list of parameters, type `SelfSSL -?`.</span></span>  
  
## <a name="installing-connectivity-components-and-sql-server-management-studio"></a><span data-ttu-id="1d369-172">Установка сетевых компонентов и среды SQL Server Management Studio</span><span class="sxs-lookup"><span data-stu-id="1d369-172">Installing Connectivity Components and SQL Server Management Studio</span></span>  
  
#### <a name="to-install-sql-server-connectivity-components-and-sql-server-management-studio"></a><span data-ttu-id="1d369-173">Установка сетевых компонентов SQL Server и среды SQL Server Management Studio</span><span class="sxs-lookup"><span data-stu-id="1d369-173">To install SQL Server connectivity components and SQL Server Management Studio</span></span>  
  
1.  <span data-ttu-id="1d369-174">Войдите на компьютер, где работает IIS под учетной записью администратора.</span><span class="sxs-lookup"><span data-stu-id="1d369-174">Log on as an administrator to the computer that is running IIS.</span></span>  
  
2.  <span data-ttu-id="1d369-175">С установочного диска [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] запустите мастер установки [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="1d369-175">From the [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] installation disk, start the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Installation Wizard.</span></span> <span data-ttu-id="1d369-176">Дополнительные сведения об использовании этого мастера см. [в разделе Install SQL Server 2014 мастера установки &#40;&#41;установки ](../../database-engine/install-windows/install-sql-server-from-the-installation-wizard-setup.md).</span><span class="sxs-lookup"><span data-stu-id="1d369-176">For more information about using this wizard, see [Install SQL Server 2014 from the Installation Wizard &#40;Setup&#41;](../../database-engine/install-windows/install-sql-server-from-the-installation-wizard-setup.md).</span></span>  
  
3.  <span data-ttu-id="1d369-177">На странице **Выбор компонентов** выберите **Средства связи клиентских средств**.</span><span class="sxs-lookup"><span data-stu-id="1d369-177">On the **Feature Selection** page, select **Client Tools Connectivity**.</span></span>  
  
4.  <span data-ttu-id="1d369-178">Если планируется использовать мастер настройки веб-синхронизации, то выберите **Средства управления — основные**.</span><span class="sxs-lookup"><span data-stu-id="1d369-178">If you plan to use the Configure Web Synchronization Wizard, select **Management Tools - Basic**.</span></span>  
  
5.  <span data-ttu-id="1d369-179">Выполните все инструкции мастера и перезапустите компьютер.</span><span class="sxs-lookup"><span data-stu-id="1d369-179">Complete the wizard, and then restart the computer.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="1d369-180">Можно установить дополнительные компоненты, но для веб-синхронизации требуются только сетевые компоненты.</span><span class="sxs-lookup"><span data-stu-id="1d369-180">You can install additional components, but only the connectivity components are required for Web synchronization.</span></span>  
  
## <a name="configuring-the-computer-that-is-running-iis-by-using-the-configure-web-synchronization-wizard"></a><span data-ttu-id="1d369-181">Настройка сервера IIS с помощью мастера настройки веб-синхронизации</span><span class="sxs-lookup"><span data-stu-id="1d369-181">Configuring the Computer That Is Running IIS by Using the Configure Web Synchronization Wizard</span></span>  
 <span data-ttu-id="1d369-182">Настройте сервер IIS вручную или с помощью мастера настройки веб-синхронизации.</span><span class="sxs-lookup"><span data-stu-id="1d369-182">Configure the IIS server by using the Configure Web Synchronization Wizard or manually.</span></span> <span data-ttu-id="1d369-183">Рекомендуется использовать мастер настройки, несмотря на это, в следующем разделе содержатся инструкции по настройке вручную.</span><span class="sxs-lookup"><span data-stu-id="1d369-183">We recommend using the wizard, but we also provide steps for manual configuration in the next section.</span></span> <span data-ttu-id="1d369-184">Мастер веб-синхронизации [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] может использоваться только для публикаций, созданных на издателе, на котором работает [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)], или на издателе, обновленном до уровня [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)].</span><span class="sxs-lookup"><span data-stu-id="1d369-184">The Web Synchronization Wizard that is available with [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] can be used only for publications that were created on a Publisher that is running [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)], or a Publisher that was upgraded to [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)].</span></span> <span data-ttu-id="1d369-185">Мастер нельзя использовать для публикаций на [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)].</span><span class="sxs-lookup"><span data-stu-id="1d369-185">The wizard cannot be used for publications on [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)].</span></span> <span data-ttu-id="1d369-186">Мастер можно использовать при работе с подписками на [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] и более поздних версиях, а также на [!INCLUDE[ssEWnoversion](../../includes/ssewnoversion-md.md)] 3.0 и более поздних версиях.</span><span class="sxs-lookup"><span data-stu-id="1d369-186">The wizard can be used with subscriptions on [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] and later versions, and [!INCLUDE[ssEWnoversion](../../includes/ssewnoversion-md.md)] 3.0 and later versions.</span></span>  
  
 <span data-ttu-id="1d369-187">Эта конфигурация имеет следующие характеристики.</span><span class="sxs-lookup"><span data-stu-id="1d369-187">The configuration has the following characteristics:</span></span>  
  
-   <span data-ttu-id="1d369-188">Использует веб-сайт по умолчанию в IIS.</span><span class="sxs-lookup"><span data-stu-id="1d369-188">Uses the default Web site in IIS.</span></span> <span data-ttu-id="1d369-189">Однако можно использовать другой веб-сайт.</span><span class="sxs-lookup"><span data-stu-id="1d369-189">However, you can use another Web site.</span></span> <span data-ttu-id="1d369-190">Дополнительные сведения о том, как создавать веб-сайты, содержатся в документации по службам IIS.</span><span class="sxs-lookup"><span data-stu-id="1d369-190">For more information about how to create Web sites, see the IIS documentation.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="1d369-191">Заданный веб-сайт обеспечивает доступ к компонентам, которые используются при веб-синхронизации.</span><span class="sxs-lookup"><span data-stu-id="1d369-191">The Web site that you specify provides access to the components that are used by Web synchronization.</span></span> <span data-ttu-id="1d369-192">Веб-сайт не предоставляет доступ к другим данным или веб-страницами, если его не настроить соответствующим образом.</span><span class="sxs-lookup"><span data-stu-id="1d369-192">The Web site does not provide access to other data or Web pages unless you configure the site to do so.</span></span>  
  
-   <span data-ttu-id="1d369-193">Создает виртуальный каталог и связанный с ним псевдоним.</span><span class="sxs-lookup"><span data-stu-id="1d369-193">Creates a virtual directory and its associated alias.</span></span> <span data-ttu-id="1d369-194">Этот псевдоним используется при доступе к компонентам веб-синхронизации.</span><span class="sxs-lookup"><span data-stu-id="1d369-194">The alias is used when accessing the Web synchronization components.</span></span> <span data-ttu-id="1d369-195">Например, если адрес сервера IIS — `https://*server.domain.com*` и указан псевдоним "websync1", то для доступа к компоненту replisapi.dll будет использоваться адрес `https://*server.domain.com*/websync1/replisapi.dll`.</span><span class="sxs-lookup"><span data-stu-id="1d369-195">For example, if the IIS address is `https://*server.domain.com*` and you specify an alias of 'websync1', the address to access the replisapi.dll component is `https://*server.domain.com*/websync1/replisapi.dll`.</span></span>  
  
-   <span data-ttu-id="1d369-196">Использует обычную проверку подлинности.</span><span class="sxs-lookup"><span data-stu-id="1d369-196">Uses Basic Authentication.</span></span> <span data-ttu-id="1d369-197">Рекомендуется использовать процедуру обычной проверки подлинности, поскольку она позволяет запускать сервер IIS и издатель/распространитель [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] на отдельных компьютерах (рекомендованная конфигурация) без делегирования Kerberos.</span><span class="sxs-lookup"><span data-stu-id="1d369-197">We recommend using Basic Authentication because Basic Authentication enables you to run IIS and the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Publisher/Distributor on separate computers (the recommended configuration) without requiring Kerberos delegation.</span></span> <span data-ttu-id="1d369-198">Использование протокола SSL в сочетании с обычной проверкой подлинности обеспечивает шифрование имен входа, паролей и всех данных в процессе передачи.</span><span class="sxs-lookup"><span data-stu-id="1d369-198">Using SSL with Basic Authentication makes sure that logins, passwords, and all data are encrypted in transit.</span></span> <span data-ttu-id="1d369-199">(Требуется протокол SSL, независимо от используемого типа проверки подлинности.) Дополнительные сведения о рекомендациях по веб-синхронизации см. в разделе "рекомендации по обеспечению безопасности для веб-синхронизации" статьи [Настройка веб-синхронизации](configure-web-synchronization.md).</span><span class="sxs-lookup"><span data-stu-id="1d369-199">(SSL is required, regardless of the type of authentication that is used.) For more information about best practices for Web synchronization, see the section "Security Best Practices for Web Synchronization" in [Configure Web Synchronization](configure-web-synchronization.md).</span></span>  
  
#### <a name="to-configure-the-computer-that-is-running-iis-by-using-the-configure-web-synchronization-wizard"></a><span data-ttu-id="1d369-200">Настройка сервера IIS с помощью мастера настройки веб-синхронизации</span><span class="sxs-lookup"><span data-stu-id="1d369-200">To configure the computer that is running IIS by using the Configure Web Synchronization Wizard</span></span>  
  
1.  <span data-ttu-id="1d369-201">На сервере IIS запустите среду [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span><span class="sxs-lookup"><span data-stu-id="1d369-201">On the computer that is running IIS, start [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span></span>  
  
2.  <span data-ttu-id="1d369-202">Подключитесь к издателю и разверните узел сервера.</span><span class="sxs-lookup"><span data-stu-id="1d369-202">Connect to the Publisher, and then expand the server node.</span></span>  
  
3.  <span data-ttu-id="1d369-203">Раскройте папку **Локальные публикации** , щелкните правой кнопкой мыши нужную публикацию и выберите **Настроить веб-синхронизацию**.</span><span class="sxs-lookup"><span data-stu-id="1d369-203">Expand the **Local Publications** folder, right-click the publication, and then click **Configure Web Synchronization**.</span></span>  
  
4.  <span data-ttu-id="1d369-204">В мастере настройки веб-синхронизации на странице **Тип подписчика** выберите **SQL Server**.</span><span class="sxs-lookup"><span data-stu-id="1d369-204">In the Configure Web Synchronization Wizard, on the **Subscriber Type** page, select **SQL Server**.</span></span>  
  
5.  <span data-ttu-id="1d369-205">На странице **Веб-сервер** выполните следующие действия:</span><span class="sxs-lookup"><span data-stu-id="1d369-205">On the **Web Server** page:</span></span>  
  
    1.  <span data-ttu-id="1d369-206">Выберите экземпляр сервер IIS, который будет синхронизировать подписки.</span><span class="sxs-lookup"><span data-stu-id="1d369-206">Select the instance of IIS that will synchronize subscriptions.</span></span>  
  
    2.  <span data-ttu-id="1d369-207">Выберите **Создать новый виртуальный каталог**.</span><span class="sxs-lookup"><span data-stu-id="1d369-207">Select **Create a new virtual directory**.</span></span>  
  
    3.  <span data-ttu-id="1d369-208">В нижней панели страницы разверните экземпляр сервера IIS, раскройте **Веб-сайты**и щелкните **Веб-сайт по умолчанию**.</span><span class="sxs-lookup"><span data-stu-id="1d369-208">In the lower pane of the page, expand the instance of IIS, expand **Web Sites**, and then click **Default Web Site**.</span></span>  
  
6.  <span data-ttu-id="1d369-209">На странице **Сведения виртуального каталога** выполните следующие действия:</span><span class="sxs-lookup"><span data-stu-id="1d369-209">On the **Virtual Directory Information** page:</span></span>  
  
    1.  <span data-ttu-id="1d369-210">Введите псевдоним виртуального каталога в поле **Псевдоним** .</span><span class="sxs-lookup"><span data-stu-id="1d369-210">In the **Alias** box, enter an alias for the virtual directory.</span></span>  
  
    2.  <span data-ttu-id="1d369-211">Введите путь виртуального каталога в поле **Путь** .</span><span class="sxs-lookup"><span data-stu-id="1d369-211">In the **Path** box, enter a path of the virtual directory.</span></span> <span data-ttu-id="1d369-212">Например, если ввести `websync1` в поле **псевдоним** , введите `C:\Inetpub\wwwroot\websync1` в поле **путь** .</span><span class="sxs-lookup"><span data-stu-id="1d369-212">For example, if you entered `websync1` in the **Alias** box, enter `C:\Inetpub\wwwroot\websync1` in the **Path** box.</span></span> <span data-ttu-id="1d369-213">Щелкните **Далее**.</span><span class="sxs-lookup"><span data-stu-id="1d369-213">Click **Next**.</span></span>  
  
    3.  <span data-ttu-id="1d369-214">В обоих диалоговых окнах нажмите кнопку **Да**.</span><span class="sxs-lookup"><span data-stu-id="1d369-214">On both dialog boxes, click **Yes**.</span></span> <span data-ttu-id="1d369-215">Это означает, что нужно создать новую папку и скопировать [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Internet Server API (ISAPI) DLL.</span><span class="sxs-lookup"><span data-stu-id="1d369-215">This specifies that you want to create a new folder and that you want to copy the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Internet Server API (ISAPI) DLL.</span></span> <span data-ttu-id="1d369-216">.</span><span class="sxs-lookup"><span data-stu-id="1d369-216">.</span></span>  
  
7.  <span data-ttu-id="1d369-217">На странице **Доступ с проверкой подлинности** выполните следующие действия:</span><span class="sxs-lookup"><span data-stu-id="1d369-217">On the **Authenticated Access** page:</span></span>  
  
    1.  <span data-ttu-id="1d369-218">Убедитесь, что сняты флажки **Встроенная проверка подлинности Windows** и **Краткая проверка для серверов доменов Windows** .</span><span class="sxs-lookup"><span data-stu-id="1d369-218">Make sure that **Integrated Windows authentication** and **Digest authentication for Windows domain servers** are cleared.</span></span>  
  
    2.  <span data-ttu-id="1d369-219">Установите флажок **Обычная проверка подлинности**.</span><span class="sxs-lookup"><span data-stu-id="1d369-219">Select **Basic Authentication**.</span></span>  
  
    3.  <span data-ttu-id="1d369-220">В полях **Домен по умолчанию** и **Область** введите имя домена, в котором развернут сервер IIS.</span><span class="sxs-lookup"><span data-stu-id="1d369-220">In the **Default Domain** and **Realm** boxes, enter the domain of the computer that is running IIS.</span></span>  
  
8.  <span data-ttu-id="1d369-221">На странице **Доступ к каталогам** выполните следующие действия:</span><span class="sxs-lookup"><span data-stu-id="1d369-221">On the **Directory Access** page:</span></span>  
  
    1.  <span data-ttu-id="1d369-222">Нажмите кнопку **Добавить**и в диалоговом окне **Выбор пользователей или групп** добавьте учетные записи, с которыми подписчик будет подключаться к серверу IIS.</span><span class="sxs-lookup"><span data-stu-id="1d369-222">Click **Add**, and then in the **Select Users or Groups** dialog box, add the accounts under which Subscribers will make connections to IIS.</span></span> <span data-ttu-id="1d369-223">Эти учетные записи указываются на странице **Данные о веб-сервере** мастера создания подписки или в качестве значения параметра *@internet_login* процедуры [sp_addmergepullsubscription_agent](/sql/relational-databases/system-stored-procedures/sp-addmergepullsubscription-agent-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="1d369-223">These are the accounts that you will specify on the **Web Server Information** page of the New Subscription Wizard or as the value for the [sp_addmergepullsubscription_agent](/sql/relational-databases/system-stored-procedures/sp-addmergepullsubscription-agent-transact-sql)*@internet_login* parameter.</span></span>  
  
9. <span data-ttu-id="1d369-224">На странице **Общий доступ к хранилищу моментальных снимков** укажите общую папку моментальных снимков.</span><span class="sxs-lookup"><span data-stu-id="1d369-224">On the **Snapshot Share Access** page, enter the snapshot share.</span></span> <span data-ttu-id="1d369-225">Устанавливаются соответствующие разрешения для этой общей папки, чтобы подписчики могли получить доступ к файлам моментальных снимков.</span><span class="sxs-lookup"><span data-stu-id="1d369-225">The appropriate permissions are set on this share so that Subscribers can access the snapshot files.</span></span> <span data-ttu-id="1d369-226">Дополнительные сведения о разрешениях для общей папки см. в статье [Организация безопасности папки моментальных снимков](security/secure-the-snapshot-folder.md).</span><span class="sxs-lookup"><span data-stu-id="1d369-226">For more information about permissions for the share, see [Secure the Snapshot Folder](security/secure-the-snapshot-folder.md).</span></span>  
  
10. <span data-ttu-id="1d369-227">На странице **Завершение работы мастера** нажмите кнопку **Готово**.</span><span class="sxs-lookup"><span data-stu-id="1d369-227">On the **Completing the Wizard** page, click **Finish**.</span></span>  
  
     <span data-ttu-id="1d369-228">Если во время настройки удаленного сервера IIS произойдет ошибка, например ошибка в сети, то по всем выполненным действиям выполняется откат, а оставшиеся действия отменяются.</span><span class="sxs-lookup"><span data-stu-id="1d369-228">If a failure occurs, such as a network error while trying to configure a remote computer that is running IIS, all completed actions are rolled back and all remaining actions are canceled.</span></span> <span data-ttu-id="1d369-229">Если для выполненного действия не удается выполнить откат, на последней странице мастера отображается состояние **Успешно** , а выполненные действия остаются зафиксированными.</span><span class="sxs-lookup"><span data-stu-id="1d369-229">If a completed action cannot be rolled back, the status in the final page of the wizard displays **Success** and the completed actions remain committed.</span></span>  
  
11. <span data-ttu-id="1d369-230">Если службы IIS работают на компьютере под управлением 64-разрядной версии Windows, библиотека replisapi.dll должна быть скопирована в соответствующий каталог.</span><span class="sxs-lookup"><span data-stu-id="1d369-230">If the computer that is running IIS is running on a 64-bit version of Windows, replisapi.dll must be copied to the appropriate directory:</span></span>  
  
    1.  <span data-ttu-id="1d369-231">Нажмите кнопку **Пуск**, затем щелкните **Выполнить**.</span><span class="sxs-lookup"><span data-stu-id="1d369-231">Click **Start**, and then click **Run**.</span></span> <span data-ttu-id="1d369-232">В поле **Открыть** введите `iisreset` , а затем нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="1d369-232">In the **Open** box, enter `iisreset`, and then click **OK**.</span></span>  
  
    2.  <span data-ttu-id="1d369-233">После остановки и перезапуска служб IIS скопируйте файл replisapi.dll из расположения [!INCLUDE[ssInstallPathVar](../../includes/ssinstallpathvar-md.md)]COM\replisapi в каталог, указанный в шаге 6б.</span><span class="sxs-lookup"><span data-stu-id="1d369-233">After IIS stops and restarts, copy replisapi.dll from [!INCLUDE[ssInstallPathVar](../../includes/ssinstallpathvar-md.md)]COM\replisapi to the directory that is specified in step 6b.</span></span>  
  
    3.  <span data-ttu-id="1d369-234">Нажмите кнопку **Пуск**, затем щелкните **Выполнить**.</span><span class="sxs-lookup"><span data-stu-id="1d369-234">Click **Start**, and then click **Run**.</span></span> <span data-ttu-id="1d369-235">В поле **Открыть** введите `cmd` , а затем нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="1d369-235">In the **Open** box, enter `cmd`, and then click **OK**.</span></span>  
  
    4.  <span data-ttu-id="1d369-236">В каталоге указанном на шаге 6б выполните следующую команду:</span><span class="sxs-lookup"><span data-stu-id="1d369-236">In the directory that you specified in step 6b, execute the following command:</span></span>  
  
         `regsvr32 replisapi.dll`  
  
## <a name="manually-configuring-the-computer-that-is-running-iis"></a><span data-ttu-id="1d369-237">Ручная настройка сервера IIS</span><span class="sxs-lookup"><span data-stu-id="1d369-237">Manually Configuring the Computer That Is Running IIS</span></span>  
 <span data-ttu-id="1d369-238">Для ручной настройки сервера IIS необходимо установить и настроить средство прослушивания репликации [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , а затем настроить авторизацию для подписчиков, которые подключаются к серверу IIS.</span><span class="sxs-lookup"><span data-stu-id="1d369-238">To configure the computer that is running IIS manually, you must install and configure the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Replication Listener, and then configure authorization for Subscribers that will connect to IIS.</span></span>  
  
#### <a name="to-install-and-configure-the-sql-server-replication-listener"></a><span data-ttu-id="1d369-239">Установка и настройка средства прослушивания репликации SQL Server</span><span class="sxs-lookup"><span data-stu-id="1d369-239">To install and configure the SQL Server Replication Listener</span></span>  
  
1.  <span data-ttu-id="1d369-240">Создайте на компьютере, где работают службы IIS, каталог для файла replisapi.dll.</span><span class="sxs-lookup"><span data-stu-id="1d369-240">Create a file directory on the computer that is running IIS to contain replisapi.dll.</span></span> <span data-ttu-id="1d369-241">Этот каталог можно создать в любом месте, но рекомендуется разместить его в каталоге \<*drive*>:\Inetpub.</span><span class="sxs-lookup"><span data-stu-id="1d369-241">You can create the directory wherever you want, but we recommend that you create the directory under the \<*drive*>:\Inetpub directory.</span></span> <span data-ttu-id="1d369-242">Например, создайте каталог \<*drive*>:\Inetpub\SQLReplication\\.</span><span class="sxs-lookup"><span data-stu-id="1d369-242">For example, create the directory \<*drive*>:\Inetpub\SQLReplication\\.</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="1d369-243">Настоятельно рекомендуется создавать этот каталог в разделе жесткого диска с файловой системой NTFS, а не с файловой системой FAT.</span><span class="sxs-lookup"><span data-stu-id="1d369-243">We strongly recommend that you create this directory on an NTFS file system partition instead of a FAT file system.</span></span> <span data-ttu-id="1d369-244">При выборе файловой системы NTFS для точного управления доступом пользователей к репликации [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] можно использовать разрешения файловой системы NTFS.</span><span class="sxs-lookup"><span data-stu-id="1d369-244">When you use the NTFS file system, you can use NTFS file system permissions to control precisely the users that can access [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] replication.</span></span>  
  
2.  <span data-ttu-id="1d369-245">Скопируйте файл replisapi.dll из каталога [!INCLUDE[ssInstallPathVar](../../includes/ssinstallpathvar-md.md)]com\ в каталог с файлами, созданный на шаге 1.</span><span class="sxs-lookup"><span data-stu-id="1d369-245">Copy replisapi.dll from the directory [!INCLUDE[ssInstallPathVar](../../includes/ssinstallpathvar-md.md)]com\ to the file directory that you created in step 1.</span></span>  
  
3.  <span data-ttu-id="1d369-246">Зарегистрируйте файл replisapi.dll:</span><span class="sxs-lookup"><span data-stu-id="1d369-246">Register replisapi.dll:</span></span>  
  
    1.  <span data-ttu-id="1d369-247">Нажмите кнопку **Пуск**, затем щелкните **Выполнить**.</span><span class="sxs-lookup"><span data-stu-id="1d369-247">Click **Start**, and then click **Run**.</span></span> <span data-ttu-id="1d369-248">В поле **Открыть** введите `cmd` , а затем нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="1d369-248">In the **Open** box, enter `cmd`, and then click **OK**.</span></span>  
  
    2.  <span data-ttu-id="1d369-249">В каталоге созданном на шаге 1 выполните следующую команду:</span><span class="sxs-lookup"><span data-stu-id="1d369-249">In the directory that you created in step 1, execute the following command:</span></span>  
  
         `regsvr32 replisapi.dll`  
  
4.  <span data-ttu-id="1d369-250">Создайте новый веб-сайт для репликации или воспользуйтесь уже существующим.</span><span class="sxs-lookup"><span data-stu-id="1d369-250">Create a new Web site for replication, or use an existing site.</span></span> <span data-ttu-id="1d369-251">Во время синхронизации компоненты репликации будут обращаться к этому веб-сайту.</span><span class="sxs-lookup"><span data-stu-id="1d369-251">The Web site will be accessed by replication components during synchronization.</span></span> <span data-ttu-id="1d369-252">Дополнительные сведения о том, как создавать веб-сайты, содержатся в документации по службам IIS.</span><span class="sxs-lookup"><span data-stu-id="1d369-252">For more information about how to create Web sites, see the IIS documentation.</span></span>  
  
5.  <span data-ttu-id="1d369-253">Создайте виртуальный каталог в службах IIS.</span><span class="sxs-lookup"><span data-stu-id="1d369-253">Create a virtual directory in IIS.</span></span> <span data-ttu-id="1d369-254">Виртуальный каталог должен быть создан на веб-сайте, созданном на шаге 4, и сопоставлен с каталогом, созданным на шаге 1.</span><span class="sxs-lookup"><span data-stu-id="1d369-254">The virtual directory should be created under the Web site that was created in step 4, and should be mapped to the directory that was created in step 1.</span></span> <span data-ttu-id="1d369-255">Дополнительные сведения о создании виртуальных каталогов см. в документации по службам IIS.</span><span class="sxs-lookup"><span data-stu-id="1d369-255">For more information about how to create virtual directories, see the IIS documentation.</span></span> <span data-ttu-id="1d369-256">При назначении разрешений для этого каталога рекомендуется установить максимальные ограничения.</span><span class="sxs-lookup"><span data-stu-id="1d369-256">We recommend that you be as restrictive as possible when you assign permissions to this directory.</span></span> <span data-ttu-id="1d369-257">Необходимо установить разрешения **Чтение** и **Выполнить** , при этом разрешения **Запуск скриптов**, **Запись**и **Обзор** можно отменить.</span><span class="sxs-lookup"><span data-stu-id="1d369-257">You must select **Read** and **Execute** permissions, but you can clear **Run scripts**, **Write**, and **Browse** permissions.</span></span>  
  
6.  <span data-ttu-id="1d369-258">Установите в настройках служб IIS разрешение выполнять файл replisapi.dll.</span><span class="sxs-lookup"><span data-stu-id="1d369-258">Configure IIS to enable replisapi.dll to execute.</span></span> <span data-ttu-id="1d369-259">Для предыдущих версий служб IIS достаточно разрешений, назначенных на шаге 4, однако для служб IIS 6.0 необходимо включить модули Internet Server API (ISAPI).</span><span class="sxs-lookup"><span data-stu-id="1d369-259">The permissions that are assigned in step 4 are sufficient for earlier versions of IIS; however, IIS version 6.0 requires Internet Server API (ISAPI) extensions to be enabled.</span></span> <span data-ttu-id="1d369-260">Дополнительные сведения см. в разделах «Настройка модулей ISAPI» и «Включение и выключение динамического содержимого» документации по службам IIS 6.0.</span><span class="sxs-lookup"><span data-stu-id="1d369-260">For more information, see "Configuring ISAPI Extensions" and "Enabling and Disabling Dynamic Content" in the IIS 6.0 documentation.</span></span>  
  
#### <a name="to-configure-iis-authentication"></a><span data-ttu-id="1d369-261">Настройка проверки подлинности службами IIS</span><span class="sxs-lookup"><span data-stu-id="1d369-261">To configure IIS authentication</span></span>  
  
-   <span data-ttu-id="1d369-262">При подключении подписчиков к серверу IIS службы IIS должны проверить подлинность подключаемых подписчиков перед предоставлением им доступа к ресурсам и процессам.</span><span class="sxs-lookup"><span data-stu-id="1d369-262">When Subscribers connect to IIS, IIS must authenticate the Subscribers before they can access resources and processes.</span></span> <span data-ttu-id="1d369-263">Службы IIS выполняют три типа проверки подлинности: анонимную, обычную и встроенную.</span><span class="sxs-lookup"><span data-stu-id="1d369-263">IIS offers three types of authentication: Anonymous, Basic, and Integrated.</span></span> <span data-ttu-id="1d369-264">Проверка подлинности может выполняться для всего веб-сайта или для созданного виртуального каталога.</span><span class="sxs-lookup"><span data-stu-id="1d369-264">Authentication can be applied to the whole Web site or to the virtual directory that you created.</span></span>  
  
     <span data-ttu-id="1d369-265">Рекомендуется использовать процедуру обычной проверки подлинности в сочетании с протоколом SSL.</span><span class="sxs-lookup"><span data-stu-id="1d369-265">We recommend that you use Basic Authentication with SSL.</span></span> <span data-ttu-id="1d369-266">Протокол SSL должен использоваться вне независимости от типа применяемой проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="1d369-266">SSL is required, regardless of the type of authentication that is used.</span></span> <span data-ttu-id="1d369-267">Дополнительные сведения о настройке проверки подлинности см. в документации по службам IIS.</span><span class="sxs-lookup"><span data-stu-id="1d369-267">For more information about how to configure authentication, see the IIS documentation.</span></span>  
  
## <a name="setting-permissions-for-the-sql-server-replication-listener"></a><span data-ttu-id="1d369-268">Установка разрешений для средства прослушивания репликации SQL Server</span><span class="sxs-lookup"><span data-stu-id="1d369-268">Setting Permissions for the SQL Server Replication Listener</span></span>  
 <span data-ttu-id="1d369-269">При подключении подписчика к серверу IIS проверка подлинности подписчика производится с помощью типа проверки подлинности, который был задан при настройке служб IIS.</span><span class="sxs-lookup"><span data-stu-id="1d369-269">When a Subscriber connects to the computer that is running IIS, the Subscriber is authenticated by using the type of authentication that was specified when you configured IIS.</span></span> <span data-ttu-id="1d369-270">После проверки подлинности подписчика службы IIS проверяют, обладает ли подписчик правами для вызова репликации [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="1d369-270">After IIS authenticates the Subscriber, IIS checks whether the Subscriber is authorized to invoke [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] replication.</span></span> <span data-ttu-id="1d369-271">Задание разрешений на файл replisapi.dll позволяет определить пользователей, которые получают возможность запускать репликацию [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="1d369-271">You control the users that can invoke [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] replication by setting permissions for replisapi.dll.</span></span> <span data-ttu-id="1d369-272">Правильная настройка разрешений необходима для предотвращения несанкционированного доступа к репликации [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="1d369-272">Properly configuring permissions is necessary to prevent unauthorized access to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] replication.</span></span>  
  
 <span data-ttu-id="1d369-273">Чтобы установить минимальные разрешения для учетной записи, под которой может запускаться средство прослушивания репликации [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , выполните следующую процедуру.</span><span class="sxs-lookup"><span data-stu-id="1d369-273">To configure the minimum permissions for the account under which the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Replication Listener runs, complete the following procedure.</span></span> <span data-ttu-id="1d369-274">Действия, описанные в этой процедуре, относятся к [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[winxpsvr](../../includes/winxpsvr-md.md)] запуску IIS 6,0.</span><span class="sxs-lookup"><span data-stu-id="1d369-274">The steps in the procedure apply to [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[winxpsvr](../../includes/winxpsvr-md.md)] running IIS 6.0.</span></span>  
  
 <span data-ttu-id="1d369-275">Помимо выполнения следующих шагов, убедитесь в том, что все необходимые имена входа содержатся в списке доступа к публикации (PAL).</span><span class="sxs-lookup"><span data-stu-id="1d369-275">In addition to performing the following steps, make sure that the required logins are in the publication access list (PAL).</span></span> <span data-ttu-id="1d369-276">Дополнительные сведения о списке доступа к публикации см. в статье [Организация безопасности издателя](security/secure-the-publisher.md).</span><span class="sxs-lookup"><span data-stu-id="1d369-276">For more information about the PAL, see [Secure the Publisher](security/secure-the-publisher.md).</span></span>  
  
#### <a name="to-configure-the-account-and-permissions"></a><span data-ttu-id="1d369-277">Настройка учетной записи и разрешений</span><span class="sxs-lookup"><span data-stu-id="1d369-277">To configure the account and permissions</span></span>  
  
1.  <span data-ttu-id="1d369-278">На сервере IIS создайте локальную учетную запись:</span><span class="sxs-lookup"><span data-stu-id="1d369-278">Create a local account on the computer that is running IIS:</span></span>  
  
    1.  <span data-ttu-id="1d369-279">Щелкните правой кнопкой мыши ярлык **Мой компьютер** и выберите пункт **Управление**.</span><span class="sxs-lookup"><span data-stu-id="1d369-279">Right-click **My Computer**, and then click **Manage**.</span></span>  
  
    2.  <span data-ttu-id="1d369-280">В окне **Управление компьютером**раскройте **Локальные пользователи и группы**.</span><span class="sxs-lookup"><span data-stu-id="1d369-280">In **Computer Management**, expand **Local Users and Groups**.</span></span>  
  
    3.  <span data-ttu-id="1d369-281">Щелкните правой кнопкой мыши значок **Пользователи**, а затем выберите **Новый пользователь…** .</span><span class="sxs-lookup"><span data-stu-id="1d369-281">Right-click **Users**, and then click **New User**.</span></span>  
  
    4.  <span data-ttu-id="1d369-282">Введите имя пользователя и надежный пароль.</span><span class="sxs-lookup"><span data-stu-id="1d369-282">Enter a user name and a strong password.</span></span>  
  
    5.  <span data-ttu-id="1d369-283">Нажмите кнопку **Создать**, а затем кнопку **Закрыть**.</span><span class="sxs-lookup"><span data-stu-id="1d369-283">Click **Create**, and then click **Close**.</span></span>  
  
2.  <span data-ttu-id="1d369-284">Добавьте учетную запись в группу IIS_WPG:</span><span class="sxs-lookup"><span data-stu-id="1d369-284">Add the account to the IIS_WPG group:</span></span>  
  
    1.  <span data-ttu-id="1d369-285">В окне **Управление компьютером**раскройте **Локальные пользователи и группы**, затем выберите **Группы**.</span><span class="sxs-lookup"><span data-stu-id="1d369-285">In **Computer Management**, expand **Local Users and Groups**, and then click **Groups**.</span></span>  
  
    2.  <span data-ttu-id="1d369-286">Щелкните правой кнопкой мыши **IIS_WPG**, а затем щелкните **Добавить в группу**.</span><span class="sxs-lookup"><span data-stu-id="1d369-286">Right-click **IIS_WPG**, and then click **Add to Group**.</span></span>  
  
    3.  <span data-ttu-id="1d369-287">В диалоговом окне **Свойства: IIS_WPG** щелкните **Добавить...**.</span><span class="sxs-lookup"><span data-stu-id="1d369-287">In the **IIS_WPG Properties** dialog box, click **Add**.</span></span>  
  
    4.  <span data-ttu-id="1d369-288">В диалоговом окне **Выбор: Пользователи, Компьютеры или Группы** добавьте учетную запись, созданную на шаге 1.</span><span class="sxs-lookup"><span data-stu-id="1d369-288">In the **Select Users, Computers, or Groups** dialog box, add the account created in step 1.</span></span>  
  
    5.  <span data-ttu-id="1d369-289">Убедитесь, что в поле **В следующем месте:** указано имя локального компьютера, а не домена.</span><span class="sxs-lookup"><span data-stu-id="1d369-289">Make sure that the name in the **From this location** field is the name of the local computer instead of a domain.</span></span> <span data-ttu-id="1d369-290">Если это не имя локального компьютера, то нажмите кнопку **Расположение...**.</span><span class="sxs-lookup"><span data-stu-id="1d369-290">If the name is not a local computer, click **Locations**.</span></span> <span data-ttu-id="1d369-291">В диалоговом окне **Расположение...** выберите локальный компьютер, а затем нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="1d369-291">In the **Locations** dialog box, elect the local computer, and then click **OK**.</span></span>  
  
    6.  <span data-ttu-id="1d369-292">В диалоговых окнах **Выбор пользователей** и **Свойства: IIS_WPG** нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="1d369-292">In the **Select Users** dialog box and the **IIS_WPG Properties** dialog box, click **OK**.</span></span>  
  
3.  <span data-ttu-id="1d369-293">Предоставьте учетной записи минимальные разрешения для доступа к папке, содержащей библиотеку replisapi.dll:</span><span class="sxs-lookup"><span data-stu-id="1d369-293">Grant the minimum permissions on the folder that contains replisapi.dll to the account :</span></span>  
  
    1.  <span data-ttu-id="1d369-294">Найдите место расположения каталога, созданного для файла replisapi.dll, щелкните правой кнопкой мыши этот каталог, а затем выберите **Общий доступ и безопасность**.</span><span class="sxs-lookup"><span data-stu-id="1d369-294">Locate the folder that you created for replisapi.dll, right-click the folder, and then click **Sharing and Security**.</span></span>  
  
    2.  <span data-ttu-id="1d369-295">На вкладке **Безопасность** нажмите кнопку **Добавить**.</span><span class="sxs-lookup"><span data-stu-id="1d369-295">On the **Security** tab, click **Add**.</span></span>  
  
    3.  <span data-ttu-id="1d369-296">В диалоговом окне **Выбор: Пользователи, Компьютеры или Группы** добавьте учетную запись, созданную на шаге 1.</span><span class="sxs-lookup"><span data-stu-id="1d369-296">In the **Select Users, Computers, or Groups** dialog box, add the account that you created in step 1.</span></span>  
  
    4.  <span data-ttu-id="1d369-297">Убедитесь, что в поле **В следующем месте:** указано имя локального компьютера, а не домена.</span><span class="sxs-lookup"><span data-stu-id="1d369-297">Make sure that the name in the **From this location** field is the name of the local computer instead of a domain.</span></span> <span data-ttu-id="1d369-298">Если это не имя локального компьютера, то нажмите кнопку **Расположение...**.</span><span class="sxs-lookup"><span data-stu-id="1d369-298">If the name is not a local computer, click **Locations**.</span></span> <span data-ttu-id="1d369-299">В диалоговом окне **Расположение...** выберите локальный компьютер, а затем нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="1d369-299">In the **Locations** dialog box, select the local computer, and then click **OK**.</span></span>  
  
    5.  <span data-ttu-id="1d369-300">Убедитесь, что для этой учетной записи предоставлены только разрешения **Чтение**, **Чтение и выполнение** и **Просмотр содержимого папок**.</span><span class="sxs-lookup"><span data-stu-id="1d369-300">Make sure that the account is granted only **Read**, **Read & Execute**, and **List Folder Contents** permissions.</span></span>  
  
    6.  <span data-ttu-id="1d369-301">Выберите пользователей и группы, которым не требуется доступ к этому каталогу, и нажмите **Удалить**.</span><span class="sxs-lookup"><span data-stu-id="1d369-301">Select any users or groups that do not require access to the directory, and then click **Remove**.</span></span>  
  
    7.  <span data-ttu-id="1d369-302">Нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="1d369-302">Click **OK**.</span></span>  
  
4.  <span data-ttu-id="1d369-303">Создайте пул приложений в **диспетчере служб IIS**:</span><span class="sxs-lookup"><span data-stu-id="1d369-303">Create an application pool in **Internet Information Services (IIS) Manager**:</span></span>  
  
    1.  <span data-ttu-id="1d369-304">Нажмите кнопку **Пуск**, затем щелкните **Выполнить**.</span><span class="sxs-lookup"><span data-stu-id="1d369-304">Click **Start**, and then click **Run**.</span></span>  
  
    2.  <span data-ttu-id="1d369-305">В поле **Открыть** введите `inetmgr` и нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="1d369-305">In the **Open** box, type `inetmgr`, and then click **OK**.</span></span>  
  
    3.  <span data-ttu-id="1d369-306">В **диспетчере служб IIS**раскройте узел **Локальный компьютер** .</span><span class="sxs-lookup"><span data-stu-id="1d369-306">In **Internet Information Services (IIS) Manager**, expand the **local computer** node.</span></span>  
  
    4.  <span data-ttu-id="1d369-307">Щелкните правой кнопкой мыши **Пулы приложений**, выберите пункт **Создать** , а затем выберите **Пул приложений**.</span><span class="sxs-lookup"><span data-stu-id="1d369-307">Right-click **Application Pools**, point to **New** and then click **Application Pool**.</span></span>  
  
    5.  <span data-ttu-id="1d369-308">Введите имя пула в поле **Идентификатор пула приложений** и нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="1d369-308">Enter a name for the pool in the **Application pool ID** field, and then click **OK**.</span></span>  
  
5.  <span data-ttu-id="1d369-309">Свяжите учетную запись с этим пулом приложений:</span><span class="sxs-lookup"><span data-stu-id="1d369-309">Associate the account with the application pool:</span></span>  
  
    1.  <span data-ttu-id="1d369-310">В **диспетчере служб IIS**раскройте узел **Локальный компьютер** , затем — **Пулы приложений**.</span><span class="sxs-lookup"><span data-stu-id="1d369-310">In **Internet Information Services (IIS) Manager**, expand the **local computer** node, and then expand **Application Pools**.</span></span>  
  
    2.  <span data-ttu-id="1d369-311">Щелкните правой кнопкой мыши созданный пул приложений, а затем выберите **Свойства**.</span><span class="sxs-lookup"><span data-stu-id="1d369-311">Right-click the application pool that you created, and then click **Properties**.</span></span>  
  
    3.  <span data-ttu-id="1d369-312">В диалоговом окне \*\* \<ApplicationPoolName> Свойства\*\* на вкладке **удостоверение** щелкните **Настраиваемый**.</span><span class="sxs-lookup"><span data-stu-id="1d369-312">In the **\<ApplicationPoolName> Properties** dialog box, on the **Identity** tab, click **Configurable**.</span></span>  
  
    4.  <span data-ttu-id="1d369-313">В полях **Имя пользователя** и **Пароль** введите имя пользователя и пароль для учетной записи, созданной на шаге 1.</span><span class="sxs-lookup"><span data-stu-id="1d369-313">In the **User name** and **password** fields, enter the account and password that were created in step 1.</span></span>  
  
    5.  <span data-ttu-id="1d369-314">Нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="1d369-314">Click **OK**.</span></span>  
  
6.  <span data-ttu-id="1d369-315">Свяжите пул приложений с виртуальным каталогом, используемым для веб-синхронизации:</span><span class="sxs-lookup"><span data-stu-id="1d369-315">Associate the application pool with the virtual directory that is used for Web synchronization:</span></span>  
  
    1.  <span data-ttu-id="1d369-316">В **диспетчере служб IIS**раскройте узел **Локальный компьютер** , затем — **Веб-сайты**.</span><span class="sxs-lookup"><span data-stu-id="1d369-316">In **Internet Information Services (IIS) Manager**, expand the **local computer** node, and then expand **Web Sites**.</span></span>  
  
    2.  <span data-ttu-id="1d369-317">Раскройте веб-сайт, который используется для веб-синхронизации, щелкните правой кнопкой мыши виртуальный каталог, созданный для веб-синхронизации, а затем выберите **Свойства**.</span><span class="sxs-lookup"><span data-stu-id="1d369-317">Expand the Web site that you are using for Web synchronization, right-click the virtual directory that you created for Web synchronization, and then click **Properties**.</span></span>  
  
    3.  <span data-ttu-id="1d369-318">На вкладке **виртуальный каталог** диалогового окна \*\* \<VirtualDirectoryName> Свойства\*\* в раскрывающемся списке **пул приложений** выберите пул приложений, созданный на шаге 5.</span><span class="sxs-lookup"><span data-stu-id="1d369-318">On the **Virtual Directory** tab of the **\<VirtualDirectoryName> Properties** dialog box, from the **Application pool** drop-down list, select the application pool that was created in step 5.</span></span>  
  
    4.  <span data-ttu-id="1d369-319">Нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="1d369-319">Click **OK**.</span></span>  
  
## <a name="testing-the-connection-to-replisapidll"></a><span data-ttu-id="1d369-320">Проверка подключения к replisapi.dll</span><span class="sxs-lookup"><span data-stu-id="1d369-320">Testing the Connection to replisapi.dll</span></span>  
 <span data-ttu-id="1d369-321">Запустите веб-синхронизацию в диагностическом режиме, чтобы проверить соединение с сервером IIS и удостовериться, что SSL-сертификаты установлены правильно.</span><span class="sxs-lookup"><span data-stu-id="1d369-321">Run Web synchronization in diagnostic mode to test the connection to the computer that is running IIS and to make sure that the Secure Sockets Layer (SSL) certificate is properly installed.</span></span> <span data-ttu-id="1d369-322">Чтобы запустить веб-синхронизацию в режиме диагностики, необходимо быть администратором сервера IIS.</span><span class="sxs-lookup"><span data-stu-id="1d369-322">To run Web synchronization in diagnostic mode, you must be an administrator on the computer running IIS.</span></span>  
  
#### <a name="to-test-the-connection-to-replisapidll"></a><span data-ttu-id="1d369-323">Проверка подключения к replisapi.dll</span><span class="sxs-lookup"><span data-stu-id="1d369-323">To test the connection to replisapi.dll</span></span>  
  
1.  <span data-ttu-id="1d369-324">Убедитесь, что параметры локальной сети на подписчике установлены правильно:</span><span class="sxs-lookup"><span data-stu-id="1d369-324">Make sure that local area network (LAN) settings at the Subscriber are correct:</span></span>  
  
    1.  <span data-ttu-id="1d369-325">В [!INCLUDE[msCoName](../../includes/msconame-md.md)] Internet Explorer в меню **Сервис** щелкните **Свойства обозревателя**.</span><span class="sxs-lookup"><span data-stu-id="1d369-325">In [!INCLUDE[msCoName](../../includes/msconame-md.md)] Internet Explorer, on the **Tools** menu, click **Internet Options**.</span></span>  
  
    2.  <span data-ttu-id="1d369-326">На вкладке **Подключения** щелкните **Настройки локальной сети**.</span><span class="sxs-lookup"><span data-stu-id="1d369-326">On the **Connections** tab, click **LAN Settings**.</span></span>  
  
    3.  <span data-ttu-id="1d369-327">Если в локальной сети не используется прокси-сервер, снимите флажки **Автоматическое определение параметров** и **Использовать прокси-сервер для подключений LAN**.</span><span class="sxs-lookup"><span data-stu-id="1d369-327">If a proxy server is not used on the LAN, clear **Automatically Detect Settings** and **Use a proxy server for your LAN**.</span></span>  
  
    4.  <span data-ttu-id="1d369-328">Если прокси-сервер используется, установите флажки **Использовать прокси-сервер для подключений LAN** и **Не использовать прокси-сервер для локальных адресов**.</span><span class="sxs-lookup"><span data-stu-id="1d369-328">If a proxy server is used, select **Use a proxy server for your LAN** and **Bypass proxy server for local addresses**.</span></span>  
  
    5.  <span data-ttu-id="1d369-329">Нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="1d369-329">Click **OK**.</span></span>  
  
2.  <span data-ttu-id="1d369-330">В обозревателе Internet Explorer на подписчике подключитесь к серверу в диагностическом режиме, добавив параметр `?diag` к адресу replisapi.dll.</span><span class="sxs-lookup"><span data-stu-id="1d369-330">At the Subscriber, in Internet Explorer, connect to the server in diagnostic mode by appending `?diag` to the address for the replisapi.dll.</span></span> <span data-ttu-id="1d369-331">Например: `https://server.domain.com/directory/replisapi.dll?diag`.</span><span class="sxs-lookup"><span data-stu-id="1d369-331">For example: `https://server.domain.com/directory/replisapi.dll?diag`.</span></span>  
  
3.  <span data-ttu-id="1d369-332">Если сертификат, заданный для сервера IIS, не распознается операционной системой  Windows, то выводится диалоговое окно **Предупреждение безопасности** .</span><span class="sxs-lookup"><span data-stu-id="1d369-332">If the certificate that you specified for IIS is not recognized by the Windows operating system, the **Security Alert** dialog box appears.</span></span> <span data-ttu-id="1d369-333">Это предупреждение может возникать из-за того, что это проверочный сертификат или сертификат, выданный центром сертификации, который не распознается Windows.</span><span class="sxs-lookup"><span data-stu-id="1d369-333">This alert might occur because the certificate is a test certificate or the certificate was issued by a certification authority (CA) that Windows does not recognize.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="1d369-334">Если это диалоговое окно не выводится, обязательно добавьте этот сертификат для сервера, с которым устанавливается соединение, в качестве доверенного в хранилище сертификатов на подписчике.</span><span class="sxs-lookup"><span data-stu-id="1d369-334">If this dialog box does not appear, make sure that the certificate for the server that you are accessing has been added to the certificate store at the Subscriber as a trusted certificate.</span></span> <span data-ttu-id="1d369-335">Дополнительные сведения об экспорте сертификатов см. в документации по службам IIS.</span><span class="sxs-lookup"><span data-stu-id="1d369-335">For more information about exporting certificates, see the IIS documentation.</span></span>  
  
    1.  <span data-ttu-id="1d369-336">В диалоговом окне **Предупреждение системы безопасности** щелкните **Просмотреть сертификат**.</span><span class="sxs-lookup"><span data-stu-id="1d369-336">In the **Security Alert** dialog box, click **View Certificate**.</span></span>  
  
    2.  <span data-ttu-id="1d369-337">В диалоговом окне **Сертификат** на вкладке **Общие** щелкните **Установить сертификат**.</span><span class="sxs-lookup"><span data-stu-id="1d369-337">In the **Certificate** dialog box, on the **General** tab, click **Install Certificate**.</span></span>  
  
    3.  <span data-ttu-id="1d369-338">Выполните указания мастера импорта сертификатов, приняв значения по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="1d369-338">Complete the Certificate Import Wizard, accepting the defaults.</span></span>  
  
    4.  <span data-ttu-id="1d369-339">В диалоговом окне **Предупреждение безопасности** нажмите кнопку **Да**.</span><span class="sxs-lookup"><span data-stu-id="1d369-339">In the **Security Warning** dialog box, click **Yes**.</span></span>  
  
    5.  <span data-ttu-id="1d369-340">В окне подтверждения мастера импорта сертификатов нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="1d369-340">In the Certificate Import Wizard confirmation dialog box, click **OK**.</span></span>  
  
    6.  <span data-ttu-id="1d369-341">Закройте диалоговое окно **Сертификат** .</span><span class="sxs-lookup"><span data-stu-id="1d369-341">Close the **Certificate** dialog box.</span></span>  
  
    7.  <span data-ttu-id="1d369-342">В диалоговом окне **Предупреждение безопасности** нажмите кнопку **Да**.</span><span class="sxs-lookup"><span data-stu-id="1d369-342">In the **Security Alert** dialog box, click **Yes**.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="1d369-343">Сертификаты установлены.</span><span class="sxs-lookup"><span data-stu-id="1d369-343">Certificates are installed for users.</span></span> <span data-ttu-id="1d369-344">Эту операцию необходимо выполнить для каждого пользователя, который будет выполнять синхронизацию.</span><span class="sxs-lookup"><span data-stu-id="1d369-344">This process must be performed for each user that will synchronize with IIS.</span></span>  
  
4.  <span data-ttu-id="1d369-345">В диалоговом окне **Соединение с \<ServerName>** укажите имя входа и пароль, которые агент слияния будет использовать для подключения к серверу IIS.</span><span class="sxs-lookup"><span data-stu-id="1d369-345">In the **Connect to \<ServerName>** dialog box, specify the login and password that the Merge Agent will use to connect to IIS.</span></span> <span data-ttu-id="1d369-346">Эти учетные данные указываются также в мастере создания подписки.</span><span class="sxs-lookup"><span data-stu-id="1d369-346">These credentials will also be specified in the New Subscription Wizard.</span></span>  
  
5.  <span data-ttu-id="1d369-347">В окне обозревателя Internet Explorer **Диагностические сведения SQL Websync**проверьте, чтобы значение в каждом столбце **Состояние** на этой странице было равно **SUCCESS**.</span><span class="sxs-lookup"><span data-stu-id="1d369-347">In the Internet Explorer window called **SQL Websync diagnostic information**, verify that the value in each **Status** column on the page is **SUCCESS**.</span></span>  
  
6.  <span data-ttu-id="1d369-348">Убедитесь в том, что сертификат правильно установлен на подписчике:</span><span class="sxs-lookup"><span data-stu-id="1d369-348">Make sure that the certificate is installed correctly on the Subscriber:</span></span>  
  
    1.  <span data-ttu-id="1d369-349">Закройте, а затем повторно откройте окно Internet Explorer.</span><span class="sxs-lookup"><span data-stu-id="1d369-349">Close and then reopen Internet Explorer.</span></span>  
  
    2.  <span data-ttu-id="1d369-350">Подключитесь к серверу в диагностическом режиме.</span><span class="sxs-lookup"><span data-stu-id="1d369-350">Connect to the server in diagnostic mode.</span></span> <span data-ttu-id="1d369-351">Если сертификат установлен правильно, диалоговое окно **Предупреждение безопасности** не появится.</span><span class="sxs-lookup"><span data-stu-id="1d369-351">If the certificate is installed properly, the **Security Alert** dialog box will not appear.</span></span> <span data-ttu-id="1d369-352">Если это окно появилось, то агент слияния не сможет подключиться к серверу IIS.</span><span class="sxs-lookup"><span data-stu-id="1d369-352">If the dialog box appears, the Merge Agent will fail when it tries to connect to the computer that is running IIS.</span></span> <span data-ttu-id="1d369-353">Необходимо убедиться, что этот сертификат добавлен в качестве доверенного в хранилище сертификатов у подписчика.</span><span class="sxs-lookup"><span data-stu-id="1d369-353">You must make sure that the certificate for the server that you are accessing has been added to the certificate store at the Subscriber as a trusted certificate.</span></span> <span data-ttu-id="1d369-354">Дополнительные сведения об экспорте сертификатов см. в документации по службам IIS.</span><span class="sxs-lookup"><span data-stu-id="1d369-354">For more information about exporting certificates, see the IIS documentation.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="1d369-355">См. также:</span><span class="sxs-lookup"><span data-stu-id="1d369-355">See Also</span></span>  
 [<span data-ttu-id="1d369-356">Настройка веб-синхронизации</span><span class="sxs-lookup"><span data-stu-id="1d369-356">Configure Web Synchronization</span></span>](configure-web-synchronization.md)  
  
  
