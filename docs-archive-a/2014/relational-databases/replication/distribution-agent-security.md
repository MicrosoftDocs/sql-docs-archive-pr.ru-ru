---
title: Защита агента распространителя | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
f1_keywords:
- sql12.rep.security.DA.f1
helpviewer_keywords:
- Distribution Agent Security dialog box
ms.assetid: de40cc21-2e58-4464-9be7-b5b90c925e9b
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: e4342d44a221d9b816a95a283917f005eb018827
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87655637"
---
# <a name="distribution-agent-security"></a><span data-ttu-id="b2f1b-102">Безопасность агента распространителя</span><span class="sxs-lookup"><span data-stu-id="b2f1b-102">Distribution Agent Security</span></span>
  <span data-ttu-id="b2f1b-103">В диалоговом окне **Безопасность агента распространителя** можно указать учетную запись Windows, с которой будет работать агент распространителя.</span><span class="sxs-lookup"><span data-stu-id="b2f1b-103">The **Distribution Agent Security** dialog box allows you to specify the Windows account under which the Distribution Agent runs.</span></span> <span data-ttu-id="b2f1b-104">Агент распространителя работает на распространителе для принудительных подписок и на подписчике для подписок по запросу.</span><span class="sxs-lookup"><span data-stu-id="b2f1b-104">The Distribution Agent runs at the Distributor for push subscriptions and at the Subscriber for pull subscriptions.</span></span> <span data-ttu-id="b2f1b-105">Учетная запись [!INCLUDE[msCoName](../../includes/msconame-md.md)] Windows также называется *учетной записью процесса*, так как с этой учетной записью работает процесс агента.</span><span class="sxs-lookup"><span data-stu-id="b2f1b-105">The [!INCLUDE[msCoName](../../includes/msconame-md.md)] Windows account is also referred to as the *process account*, because the agent process runs under this account.</span></span> <span data-ttu-id="b2f1b-106">Дополнительные параметры в этом диалоговом окне зависят от метода доступа к нему.</span><span class="sxs-lookup"><span data-stu-id="b2f1b-106">Additional options available in the dialog box depend on how you access it:</span></span>  
  
-   <span data-ttu-id="b2f1b-107">Если диалоговое окно открыто из мастера создания подписки, можно указать контекст, в котором агент распространителя устанавливает соединения с подписчиком (для принудительных подписок) или с распространителем (для подписок по запросу).</span><span class="sxs-lookup"><span data-stu-id="b2f1b-107">If the dialog box is accessed from the New Subscription Wizard, it also allows you to specify the context under which the Distribution Agent makes connections to the Subscriber (for push subscriptions) or the Distributor (for pull subscriptions).</span></span> <span data-ttu-id="b2f1b-108">Соединение может быть установлено путем олицетворения учетной записи Windows либо в контексте указанной учетной записи [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="b2f1b-108">The connection can be made by impersonating the Windows account or under the context of a [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] account you specify.</span></span>  
  
-   <span data-ttu-id="b2f1b-109">Если диалоговое окно открыто из диалогового окна **Свойства подписки** , то, чтобы определить контекст, в котором агент распространителя будет устанавливать соединение, нажмите кнопку свойств ( **...** ) в строке **Соединение с подписчиком** или **Соединение с распространителем** в этом диалоговом окне.</span><span class="sxs-lookup"><span data-stu-id="b2f1b-109">If the dialog box is accessed from the **Subscription Properties** dialog box, specify the context under which the Distribution Agent makes connections by clicking the properties button (**...**) in the **Subscriber Connection** or **Distributor Connection** row of that dialog box.</span></span> <span data-ttu-id="b2f1b-110">Дополнительные сведения о доступе к диалоговому окну **Свойства подписки** см. в статьях [Просмотр и изменение свойств принудительной подписки](view-and-modify-push-subscription-properties.md) и [Просмотр и изменение свойств подписки по запросу](view-and-modify-pull-subscription-properties.md).</span><span class="sxs-lookup"><span data-stu-id="b2f1b-110">For more information about accessing the **Subscription Properties** dialog box, see [View and Modify Push Subscription Properties](view-and-modify-push-subscription-properties.md) and how to: [View and Modify Pull Subscription Properties](view-and-modify-pull-subscription-properties.md).</span></span>  
  
 <span data-ttu-id="b2f1b-111">Все учетные записи должны быть допустимыми, а для каждой учетной записи должен быть указан правильный пароль.</span><span class="sxs-lookup"><span data-stu-id="b2f1b-111">All accounts must be valid, with the correct password specified for each account.</span></span> <span data-ttu-id="b2f1b-112">Учетные записи и пароли могут быть проверены только после запуска агента.</span><span class="sxs-lookup"><span data-stu-id="b2f1b-112">Accounts and passwords are not validated until an agent runs.</span></span>  
  
## <a name="options"></a><span data-ttu-id="b2f1b-113">Параметры</span><span class="sxs-lookup"><span data-stu-id="b2f1b-113">Options</span></span>  
 <span data-ttu-id="b2f1b-114">**Process Account**</span><span class="sxs-lookup"><span data-stu-id="b2f1b-114">**Process Account**</span></span>  
 <span data-ttu-id="b2f1b-115">Введите учетную запись Windows, с которой будет запускаться агент распространителя.</span><span class="sxs-lookup"><span data-stu-id="b2f1b-115">Enter a Windows account under which the Distribution Agent runs:</span></span>  
  
-   <span data-ttu-id="b2f1b-116">Для принудительных подписок учетная запись должна удовлетворять следующим условиям:</span><span class="sxs-lookup"><span data-stu-id="b2f1b-116">For push subscriptions, the account must:</span></span>  
  
    -   <span data-ttu-id="b2f1b-117">Она должна быть как минимум членом предопределенной роли базы данных **db_owner** в базе данных распространителя.</span><span class="sxs-lookup"><span data-stu-id="b2f1b-117">At minimum be a member of the **db_owner** fixed database role in the distribution database.</span></span>  
  
    -   <span data-ttu-id="b2f1b-118">Она должна входить в список доступа публикации (PAL).</span><span class="sxs-lookup"><span data-stu-id="b2f1b-118">Be a member of the publication access list (PAL).</span></span>  
  
    -   <span data-ttu-id="b2f1b-119">Она должна иметь разрешение на чтение хранилища моментальных снимков.</span><span class="sxs-lookup"><span data-stu-id="b2f1b-119">Have read permissions on the snapshot share.</span></span>  
  
    -   <span data-ttu-id="b2f1b-120">Она должна иметь разрешение на чтение каталога, в который был установлен поставщик OLE DB для подписчика, если подписка предназначена для подписчика, не являющегося[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="b2f1b-120">Have read permissions on the install directory of the OLE DB provider for the Subscriber if the subscription is for a non-[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Subscriber.</span></span>  
  
-   <span data-ttu-id="b2f1b-121">Для принудительных подписок эта учетная запись должна как минимум быть членом предопределенной роли базы данных **db_owner** в базе данных подписки.</span><span class="sxs-lookup"><span data-stu-id="b2f1b-121">For pull subscriptions, the account must at minimum be a member of the **db_owner** fixed database role in the subscription database.</span></span>  
  
 <span data-ttu-id="b2f1b-122">Если при установке соединений производится олицетворение учетной записи процесса, требуются дополнительные разрешения.</span><span class="sxs-lookup"><span data-stu-id="b2f1b-122">Additional permissions are required if the process account is impersonated when connections are made.</span></span> <span data-ttu-id="b2f1b-123">См. далее разделы **Соединение с распространителем** и **Соединение с подписчиком** .</span><span class="sxs-lookup"><span data-stu-id="b2f1b-123">See the **Connect to the Distributor** and **Connect to the Subscriber** sections below.</span></span>  
  
 <span data-ttu-id="b2f1b-124">Невозможно указать**Учетную запись процесса** для подписок по запросу на [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssExpress](../../includes/ssexpress-md.md)], так как агент распространителя не работает на экземплярах выпуска [!INCLUDE[ssExpress](../../includes/ssexpress-md.md)].</span><span class="sxs-lookup"><span data-stu-id="b2f1b-124">**Process Account** cannot be specified for pull subscriptions to [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssExpress](../../includes/ssexpress-md.md)], because the Distribution Agent does not run on instances of [!INCLUDE[ssExpress](../../includes/ssexpress-md.md)].</span></span>  
  
 <span data-ttu-id="b2f1b-125">**Пароль** и **Подтверждение пароля**</span><span class="sxs-lookup"><span data-stu-id="b2f1b-125">**Password** and **Confirm Password**</span></span>  
 <span data-ttu-id="b2f1b-126">Введите пароль для учетной записи Windows.</span><span class="sxs-lookup"><span data-stu-id="b2f1b-126">Enter the password for the Windows account.</span></span>  
  
 <span data-ttu-id="b2f1b-127">**Соединение с распространителем**</span><span class="sxs-lookup"><span data-stu-id="b2f1b-127">**Connect to the Distributor**</span></span>  
 <span data-ttu-id="b2f1b-128">Для принудительных подписок соединение с распространителем всегда устанавливается путем олицетворения учетной записи, указанной в текстовом поле **Учетная запись процесса** .</span><span class="sxs-lookup"><span data-stu-id="b2f1b-128">For push subscriptions, connections to the Distributor are always made by impersonating the account specified in the **Process account** text box.</span></span>  
  
 <span data-ttu-id="b2f1b-129">Для подписок по запросу необходимо выбрать способ установки соединения между агентом распространителя и распространителем: путем олицетворения учетной записи, указанной в текстовом поле **Учетная запись процесса** , либо при помощи учетной записи [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="b2f1b-129">For pull subscriptions, select whether the Distribution Agent should make connections to the Distributor by impersonating the account specified in the **Process account** text box or by using a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] account.</span></span> <span data-ttu-id="b2f1b-130">Если выбрано использование учетной записи [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , введите имя входа [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] и пароль.</span><span class="sxs-lookup"><span data-stu-id="b2f1b-130">If you select to use a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] account, enter a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] login and password.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="b2f1b-131">Рекомендуется использовать олицетворение учетной записи Windows вместо учетной записи [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="b2f1b-131">It is recommended that you select to impersonate the Windows account rather than using a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] account.</span></span>  
  
 <span data-ttu-id="b2f1b-132">Учетная запись Windows или учетная запись [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , которые используются для соединения, должны удовлетворять следующим условиям.</span><span class="sxs-lookup"><span data-stu-id="b2f1b-132">The Windows account or [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] account used for the connection must:</span></span>  
  
-   <span data-ttu-id="b2f1b-133">Она должна входить в список доступа к публикации.</span><span class="sxs-lookup"><span data-stu-id="b2f1b-133">Be a member of the PAL.</span></span>  
  
-   <span data-ttu-id="b2f1b-134">Она должна иметь разрешение на чтение хранилища моментальных снимков.</span><span class="sxs-lookup"><span data-stu-id="b2f1b-134">Have read permissions on the snapshot share.</span></span>  
  
 <span data-ttu-id="b2f1b-135">**Соединение с подписчиком**</span><span class="sxs-lookup"><span data-stu-id="b2f1b-135">**Connect to the Subscriber**</span></span>  
 <span data-ttu-id="b2f1b-136">Для подписок по запросу соединения с подписчиком всегда устанавливаются с помощью олицетворения учетной записи, указанной в текстовом поле **Учетная запись процесса** .</span><span class="sxs-lookup"><span data-stu-id="b2f1b-136">For pull subscriptions, connections to the Subscriber are always made by impersonating the account specified in the **Process account** text box.</span></span>  
  
 <span data-ttu-id="b2f1b-137">Для подписок по запросу параметры для подписчиков [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] и для подписчиков, не являющихся[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , отличаются.</span><span class="sxs-lookup"><span data-stu-id="b2f1b-137">For push subscriptions, the options are different for [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Subscribers and non-[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Subscribers:</span></span>  
  
-   <span data-ttu-id="b2f1b-138">Для подписчиков [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] необходимо выбрать способ соединения агента распространения и подписчика путем олицетворения учетной записи, указанной в текстовом поле **Учетная запись процесса** , либо при помощи учетной записи [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="b2f1b-138">For [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Subscribers: select whether the Distribution Agent should make connections to the Subscriber by impersonating the account specified in the **Process account** text box or by using a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] account.</span></span> <span data-ttu-id="b2f1b-139">Если выбрано использование учетной записи [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , введите имя входа [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] и пароль.</span><span class="sxs-lookup"><span data-stu-id="b2f1b-139">If you select to use a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] account, enter a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] login and password.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="b2f1b-140">Рекомендуется использовать олицетворение учетной записи Windows вместо учетной записи [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="b2f1b-140">It is recommended that you select to impersonate the Windows account rather than using a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] account.</span></span>  
  
     <span data-ttu-id="b2f1b-141">Учетная запись Windows или учетная запись [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , которые используются для соединения с подписчиком, должны по меньшей мере быть членами предопределенной роли базы данных **db_owner** в базе данных подписки.</span><span class="sxs-lookup"><span data-stu-id="b2f1b-141">The Windows account or [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] account used for the connection to the Subscriber must at minimum be a member of the **db_owner** fixed database role in the subscription database.</span></span>  
  
-   <span data-ttu-id="b2f1b-142">Для подписчиков, не являющихся[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , на подписчике указывается имя входа в базу данных, используемое для соединения агента распространителя с подписчиком.</span><span class="sxs-lookup"><span data-stu-id="b2f1b-142">For non-[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Subscribers, specify the database login at the Subscriber that should be used when the Distribution Agent connects to the Subscriber.</span></span> <span data-ttu-id="b2f1b-143">Имя входа должно иметь необходимые разрешения для создания объектов в базе данных подписки.</span><span class="sxs-lookup"><span data-stu-id="b2f1b-143">The login should have sufficient permissions to create objects in the subscription database.</span></span> <span data-ttu-id="b2f1b-144">Дополнительные сведения о настройке подписчиков, отличных от подписчиков [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], см. в [этой статье](create-a-subscription-for-a-non-sql-server-subscriber.md).</span><span class="sxs-lookup"><span data-stu-id="b2f1b-144">For more information about configuring non-[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Subscribers, see [Create a Subscription for a Non-SQL Server Subscriber](create-a-subscription-for-a-non-sql-server-subscriber.md).</span></span>  
  
 <span data-ttu-id="b2f1b-145">**Дополнительные параметры соединения**</span><span class="sxs-lookup"><span data-stu-id="b2f1b-145">**Additional connection options**</span></span>  
 <span data-ttu-id="b2f1b-146">Только для подписчиков, не являющихся[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="b2f1b-146">Non-[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Subscribers only.</span></span> <span data-ttu-id="b2f1b-147">Укажите любые параметры соединения для подписчика в виде строки соединения (для Oracle дополнительные параметры не нужны).</span><span class="sxs-lookup"><span data-stu-id="b2f1b-147">Specify any connection options for the Subscriber in the form of a connection string (Oracle does not require additional options).</span></span> <span data-ttu-id="b2f1b-148">Параметры разделяются точками с запятой.</span><span class="sxs-lookup"><span data-stu-id="b2f1b-148">Each option should be separated by a semi-colon.</span></span> <span data-ttu-id="b2f1b-149">Ниже приведен пример строки соединения IBM DB2 (переносы строк использованы для удобства чтения):</span><span class="sxs-lookup"><span data-stu-id="b2f1b-149">The following is an example of an IBM DB2 connection string (line breaks are for readability):</span></span>  
  
```  
Provider=DB2OLEDB;Initial Catalog=MY_SUBSCRIBER_DB;Network Transport Library=TCP;Host CCSID=1252;  
PC Code Page=1252;Network Address=MY_SUBSCRIBER;Network Port=50000;Package Collection=MY_PKGCOL;  
Default Schema=MY_SCHEMA;Process Binary as Character=False;Units of Work=RUW;DBMS Platform=DB2/NT;  
Persist Security Info=False;Connection Pooling=True;  
```  
  
 <span data-ttu-id="b2f1b-150">Большая часть параметров в строке зависят от настраиваемого сервера DB2, но параметр **Обрабатывать двоичное значение как символ** всегда должен иметь значение **False**.</span><span class="sxs-lookup"><span data-stu-id="b2f1b-150">Most of the options in the string are specific to the DB2 server you are configuring, but the **Process Binary as Character** option should always be set to **False**.</span></span> <span data-ttu-id="b2f1b-151">Параметр **Исходный каталог** должен иметь значение для идентификации базы данных подписки.</span><span class="sxs-lookup"><span data-stu-id="b2f1b-151">A value is required for the **Initial Catalog** option to identify the subscription database.</span></span> <span data-ttu-id="b2f1b-152">Дополнительные сведения см. в статье [IBM DB2 Subscribers](non-sql/ibm-db2-subscribers.md).</span><span class="sxs-lookup"><span data-stu-id="b2f1b-152">For more information, see [IBM DB2 Subscribers](non-sql/ibm-db2-subscribers.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="b2f1b-153">См. также:</span><span class="sxs-lookup"><span data-stu-id="b2f1b-153">See Also</span></span>  
 <span data-ttu-id="b2f1b-154">[Управление именами для входа и паролями при репликации](security/identity-and-access-control-replication.md#manage-logins-and-passwords-in-replication) </span><span class="sxs-lookup"><span data-stu-id="b2f1b-154">[Manage Logins and Passwords in Replication](security/identity-and-access-control-replication.md#manage-logins-and-passwords-in-replication) </span></span>  
 <span data-ttu-id="b2f1b-155">[Replication Agent Security Model](security/replication-agent-security-model.md)  (Модель безопасности агента репликации)</span><span class="sxs-lookup"><span data-stu-id="b2f1b-155">[Replication Agent Security Model](security/replication-agent-security-model.md) </span></span>  
 <span data-ttu-id="b2f1b-156">[Обзор агентов репликации](agents/replication-agents-overview.md) </span><span class="sxs-lookup"><span data-stu-id="b2f1b-156">[Replication Agents Overview](agents/replication-agents-overview.md) </span></span>  
 <span data-ttu-id="b2f1b-157">[Replication Security Best Practices](security/replication-security-best-practices.md) </span><span class="sxs-lookup"><span data-stu-id="b2f1b-157">[Replication Security Best Practices](security/replication-security-best-practices.md) </span></span>  
 [<span data-ttu-id="b2f1b-158">Подписка на публикации</span><span class="sxs-lookup"><span data-stu-id="b2f1b-158">Subscribe to Publications</span></span>](subscribe-to-publications.md)  
  
  
