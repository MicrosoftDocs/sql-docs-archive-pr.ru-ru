---
title: Проверка реплицированных данных | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- Subscribers [SQL Server replication], data validation
- replication [SQL Server], validating data
- transactional replication, validating data
- validating data
- merge replication data validation [SQL Server replication], SQL Server Management Studio
ms.assetid: 215b4c9a-0ce9-4c00-ac0b-43b54151dfa3
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 4d09750c0cb81d64f5921ae2064b2e75edb6ca96
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87654145"
---
# <a name="validate-replicated-data"></a><span data-ttu-id="bdaa6-102">Проверка реплицированных данных</span><span class="sxs-lookup"><span data-stu-id="bdaa6-102">Validate Replicated Data</span></span>
  <span data-ttu-id="bdaa6-103">В данном разделе описывается процесс проверки данных на подписчике в [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] с помощью среды [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], [!INCLUDE[tsql](../../includes/tsql-md.md)]или объектов RMO.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-103">This topic describes how to validate data at the Subscriber in [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] by using [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], [!INCLUDE[tsql](../../includes/tsql-md.md)], or Replication Management Objects (RMO).</span></span>  

  <span data-ttu-id="bdaa6-104">Репликация транзакций, а также репликация слиянием позволяет проверять соответствие данных подписчика данным издателя.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-104">Transactional and merge replication allow you to validate that data at the Subscriber matches data at the Publisher.</span></span> <span data-ttu-id="bdaa6-105">Проверку можно выполнять как для определенных подписок, так и для всех подписок в публикации.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-105">Validation can be performed for specific subscriptions or for all subscriptions to a publication.</span></span> <span data-ttu-id="bdaa6-106">Задайте один из следующих типов проверки и агент распространителя или агент слияния проверят данные при следующем запуске.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-106">Specify one of the following validation types and the Distribution Agent or Merge Agent will validate data the next time it runs:</span></span>  
  
-   <span data-ttu-id="bdaa6-107">**Только количество строк**.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-107">**Row count only**.</span></span> <span data-ttu-id="bdaa6-108">При проверке этого типа проверяется совпадение числа строк таблицы на подписчике с числом строк таблицы на издателе, но не проверяется содержимое строк на совпадение.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-108">This validates whether the table at the Subscriber has the same number of rows as the table at the Publisher, but does not validate that the content of the rows matches.</span></span> <span data-ttu-id="bdaa6-109">Проверка количества строк обеспечивает упрощенный подход к проверке, который может уведомить о проблемах с данными.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-109">Row count validation provides a lightweight approach to validation that can make you aware of issues with your data.</span></span>    
-   <span data-ttu-id="bdaa6-110">**Подсчет количества строк и двоичной контрольной суммы**.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-110">**Row count and binary checksum**.</span></span> <span data-ttu-id="bdaa6-111">Кроме подсчета количества строк на подписчике и на издателе, вычисляется контрольная сумма всех данных с помощью алгоритма подсчета контрольной суммы.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-111">In addition to taking a count of rows at the Publisher and Subscriber, a checksum of all the data is calculated using the checksum algorithm.</span></span> <span data-ttu-id="bdaa6-112">Если количество строк не совпадает, то контрольная сумма не проверяется.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-112">If the row count fails, the checksum is not performed.</span></span>  
  
 <span data-ttu-id="bdaa6-113">Кроме проверки совпадения данных на подписчике и издателе, репликация слиянием предоставляет возможность удостовериться, правильно ли данные секционированы для каждого подписчика.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-113">In addition to validating that data at the Subscriber and Publisher match, merge replication provides the ability to validate that data is partitioned correctly for each Subscriber.</span></span> <span data-ttu-id="bdaa6-114">Дополнительные сведения см. в статье [Проверка сведений о секции для подписчика на публикацию слиянием](validate-partition-information-for-a-merge-subscriber.md).</span><span class="sxs-lookup"><span data-stu-id="bdaa6-114">For more information, see [Validate Partition Information for a Merge Subscriber](validate-partition-information-for-a-merge-subscriber.md).</span></span>  

## <a name="how-data-validation-works"></a><span data-ttu-id="bdaa6-115">Как работает проверка данных</span><span class="sxs-lookup"><span data-stu-id="bdaa6-115">How Data Validation Works</span></span>  
 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="bdaa6-116">проверяет данные путем подсчета числа строк или контрольной суммы на издателе и последующего сравнения этих значений с соответствующими значениями числа строк и контрольной суммы, вычисленными на подписчике.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-116">validates data by calculating a row count or a checksum at the Publisher and then comparing those values to the row count or checksum calculated at the Subscriber.</span></span> <span data-ttu-id="bdaa6-117">Одно значение вычисляется для всей таблицы публикации, одно — для всей таблицы подписки, но данные в столбцах типа `text`, `ntext` и `image` в вычислении не участвуют.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-117">One value is calculated for the entire publication table and one value is calculated for the entire subscription table, but data in `text`, `ntext`, or `image` columns is not included in the calculations.</span></span>  
  
 <span data-ttu-id="bdaa6-118">При выполнении вычислений временно устанавливаются совместные блокировки таблиц, для которых производится подсчет числа строк или контрольных сумм, однако вычисления вскоре завершаются и общие блокировки снимаются, обычно в течение нескольких секунд.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-118">While the calculations are performed, shared locks are placed temporarily on tables for which row counts or checksums are being run, but the calculations are completed quickly and the shared locks removed, usually in a matter of seconds.</span></span>  
  
 <span data-ttu-id="bdaa6-119">При использовании двоичных контрольных сумм выполняется последовательная проверка столбцов избыточным 32-разрядным кодом (CRC) вместо проверки циклическим избыточным кодом (CRC) физической строки на странице данных.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-119">When binary checksums are used, 32-bit redundancy check (CRC) occurs on a column-by-column basis rather than a CRC on the physical row on the data page.</span></span> <span data-ttu-id="bdaa6-120">Это позволяет столбцам таблицы располагаться физически в любом порядке на странице данных, и при этом CRC-код для строки будет оставаться прежним.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-120">This allows the columns with the table to be in any order physically on the data page, but still compute to the same CRC for the row.</span></span> <span data-ttu-id="bdaa6-121">Проверка по двоичной контрольной сумме может использоваться при наличии у публикации фильтров по строкам или столбцам.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-121">Binary checksum validation can be used when there are row or column filters on the publication.</span></span>  
  
 <span data-ttu-id="bdaa6-122">Проверка данных состоит из трех этапов:</span><span class="sxs-lookup"><span data-stu-id="bdaa6-122">Validating data is a three-part process:</span></span>  
  
1.  <span data-ttu-id="bdaa6-123">Одна или все подписки на публикацию *помечаются* для проверки.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-123">A single subscription or all subscriptions to a publication are *marked* for validation.</span></span> <span data-ttu-id="bdaa6-124">Пометьте подписки для проверки в диалоговых окнах **Проверить подписку**, **Проверить подписки**и **Проверить все подписки** , доступные из папок **Локальные публикации** и **Локальные подписки** в среде [!INCLUDE[msCoName](../../includes/msconame-md.md)][!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span><span class="sxs-lookup"><span data-stu-id="bdaa6-124">Mark subscriptions for validation in the **Validate Subscription**, **Validate Subscriptions**, and **Validate All Subscriptions** dialog boxes, which are available from the **Local Publications** folder and the **Local Subscriptions** folder in [!INCLUDE[msCoName](../../includes/msconame-md.md)][!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span></span> <span data-ttu-id="bdaa6-125">Все подписки можно также пометить на вкладке **Все подписки** , вкладке **Список наблюдения за подписками** и в узле публикаций монитора репликации.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-125">You can also mark subscriptions from the **All Subscriptions** tab, the **Subscription Watch List** tab, and the publications node in Replication Monitor.</span></span> <span data-ttu-id="bdaa6-126">Сведения о запуске монитора репликации см. в [этой статье](monitor/start-the-replication-monitor.md).</span><span class="sxs-lookup"><span data-stu-id="bdaa6-126">For information about starting Replication Monitor, see [Start the Replication Monitor](monitor/start-the-replication-monitor.md).</span></span>  
  
2.  <span data-ttu-id="bdaa6-127">Подписка проверяется при следующей синхронизации, выполняемой агентом распространителя (для репликации транзакций) или агентом слияния (для репликации слиянием).</span><span class="sxs-lookup"><span data-stu-id="bdaa6-127">A subscription is validated the next time it is synchronized by the Distribution Agent (for transactional replication) or the Merge Agent (for merge replication).</span></span> <span data-ttu-id="bdaa6-128">Агент распространителя, как правило, работает постоянно, то есть проверка выполняется немедленно. Агент слияния запускается по запросу, в этом случае проверка выполняется после запуска агента.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-128">The Distribution Agent typically runs continuously, in which case validation occurs immediately; the Merge Agent typically runs on demand, in which case validation occurs after you run the agent.</span></span>  
  
3.  <span data-ttu-id="bdaa6-129">Просмотрите результаты проверки.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-129">View the validation results:</span></span>  
  
    -  <span data-ttu-id="bdaa6-130">В окнах сведений монитора репликации: на вкладке **Журнал операций от распространителя к подписчику** для репликации транзакций и на вкладке **Журнал синхронизации** для репликации слиянием.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-130">In the detail windows in Replication Monitor: on the **Distributor to Subscriber History** tab for transactional replication and the **Synchronization History** tab for merge replication.</span></span>    
    -  <span data-ttu-id="bdaa6-131">В диалоговом окне **Просмотр состояния синхронизации** в [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)].</span><span class="sxs-lookup"><span data-stu-id="bdaa6-131">In the **View Synchronization Status** dialog box in [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)].</span></span>  
  


  
## <a name="considerations-and-restrictions"></a><span data-ttu-id="bdaa6-132">Рекомендации и ограничения</span><span class="sxs-lookup"><span data-stu-id="bdaa6-132">Considerations and restrictions</span></span>  
  
-   <span data-ttu-id="bdaa6-133">Процедуры монитора репликации используются только для принудительных подписок, так как в мониторе репликации нельзя синхронизировать подписки по запросу.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-133">The procedures for Replication Monitor are for push subscriptions only because pull subscriptions cannot be synchronized in Replication Monitor.</span></span> <span data-ttu-id="bdaa6-134">Однако в мониторе репликации можно пометить подписку для проверки и просмотреть результаты проверки для подписок по запросу.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-134">However, you can mark a subscription for validation and view validation results for pull subscriptions in Replication Monitor.</span></span>    
-   <span data-ttu-id="bdaa6-135">Результаты показывают, как завершилась проверка — успешно или неудачно, но в случае ошибки строки, не прошедшие проверку, не указываются.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-135">The validation results indicate whether validation succeeded or failed, but do not specify which rows failed validation if a failure occurred.</span></span> <span data-ttu-id="bdaa6-136">Для сравнения данных издателя и подписчика используется [tablediff Utility](../../tools/tablediff-utility.md).</span><span class="sxs-lookup"><span data-stu-id="bdaa6-136">To compare data at the Publisher and Subscriber, use the [tablediff Utility](../../tools/tablediff-utility.md).</span></span> <span data-ttu-id="bdaa6-137">Дополнительные сведения об использовании этой программы с реплицированными данными см. в статье [Compare Replicated Tables for Differences (Replication Programming)](administration/compare-replicated-tables-for-differences-replication-programming.md) (Сравнение реплицируемых таблиц на предмет различий (программирование репликации)).</span><span class="sxs-lookup"><span data-stu-id="bdaa6-137">For more information about using this utility with replicated data, see [Compare Replicated Tables for Differences &#40;Replication Programming&#41;](administration/compare-replicated-tables-for-differences-replication-programming.md).</span></span>  
 
<span data-ttu-id="bdaa6-138">При проверке данных учитывайте следующие соображения.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-138">Take the following issues into consideration when validating data:</span></span>  
  
-   <span data-ttu-id="bdaa6-139">Перед проверкой данных следует остановить все действия по обновлению на подписчиках (при выполнении проверки нет необходимости останавливать действия на издателе).</span><span class="sxs-lookup"><span data-stu-id="bdaa6-139">You must stop all update activity at Subscribers before validating data (it is not necessary to stop activity at the Publisher when validation is occurring).</span></span>    
-   <span data-ttu-id="bdaa6-140">Ввиду того что простые и двоичные контрольные суммы могут требовать больших вычислительных мощностей при проверке большого количества данных, следует назначать проверку на время, когда активность используемых в репликации серверов минимальна.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-140">Because checksums and binary checksums can require large amounts of processor resources when validating a large data set, you should schedule validation to occur when there is the least activity on the servers used in replication.</span></span>    
-   <span data-ttu-id="bdaa6-141">Репликация проверяет только таблицы; она не проверяет, совпадают ли в схеме на издателе и подписчике только статьи (например, хранимые процедуры).</span><span class="sxs-lookup"><span data-stu-id="bdaa6-141">Replication validates tables only; it does not validate whether schema only articles (such as stored procedures) are the same at the Publisher and Subscriber.</span></span>    
-   <span data-ttu-id="bdaa6-142">Двоичная контрольная сумма может использоваться с любой опубликованной таблицей.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-142">Binary checksum can be used with any published table.</span></span> <span data-ttu-id="bdaa6-143">С помощью контрольной суммы нельзя проверить таблицы с фильтрацией по столбцам, или логические структуры таблиц, отличающиеся смещением столбцов (из-за инструкций ALTER TABLE, удаляющих или добавляющих столбцы).</span><span class="sxs-lookup"><span data-stu-id="bdaa6-143">Checksum cannot validate tables with column filters, or logical table structures where column offsets differ (due to ALTER TABLE statements that drop or add columns).</span></span>    
-   <span data-ttu-id="bdaa6-144">При проверке репликации используются `checksum` функции и **BINARY_CHECKSUM** .</span><span class="sxs-lookup"><span data-stu-id="bdaa6-144">Replication validation uses the `checksum` and **binary_checksum** functions.</span></span> <span data-ttu-id="bdaa6-145">Сведения об их поведении см. в статьях [CHECKSUM (Transact-SQL)](/sql/t-sql/functions/checksum-transact-sql) и [BINARY_CHECKSUM (Transact-SQL)](/sql/t-sql/functions/binary-checksum-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="bdaa6-145">For  information about their behavior, see  [CHECKSUM &#40;Transact-SQL&#41;](/sql/t-sql/functions/checksum-transact-sql) and [BINARY_CHECKSUM  &#40;Transact-SQL&#41;](/sql/t-sql/functions/binary-checksum-transact-sql).</span></span>  
  
-   <span data-ttu-id="bdaa6-146">Проверка с использованием двоичной контрольной суммы может неверно сообщить об отказе, если типы данных на подписчике и издателе отличаются.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-146">Validation by using binary checksum or checksum can incorrectly report a failure if data types are different at the Subscriber than they are at the Publisher.</span></span> <span data-ttu-id="bdaa6-147">К этому может привести выполнение одного из следующих действий.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-147">This can occur if you do any one of the following:</span></span>    
    -   <span data-ttu-id="bdaa6-148">Явная установка параметров схемы для соответствия типам данных в ранних версиях [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="bdaa6-148">Explicitly set schema options to map data types for earlier versions of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>    
    -   <span data-ttu-id="bdaa6-149">Установка уровня совместимости публикации для публикации слиянием в соответствии с более ранней версией [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], в то время как опубликованные таблицы содержат один или несколько типов данных, которые должны соответствовать текущей версии.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-149">Set the publication compatibility level for a merge publication to an earlier version of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], and published tables contain one or more data types that must be mapped for this version.</span></span>    
    -   <span data-ttu-id="bdaa6-150">Инициализация подписки вручную при использовании разных типов данных на подписчике.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-150">Manually initialize a subscription and are using different data types at the Subscriber.</span></span>    
-   <span data-ttu-id="bdaa6-151">Проверки двоичной контрольной суммы и простой контрольной суммы не поддерживаются трансформируемыми подписками для репликации транзакций.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-151">Binary checksum and checksum validations are not supported for transformable subscriptions for transactional replication.</span></span>   
-   <span data-ttu-id="bdaa6-152">Также не поддерживается проверка данных, реплицированных на подписчики, отличные от[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="bdaa6-152">Validation is not supported for data replicated to non-[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Subscribers.</span></span>  

## <a name="data-validation-results"></a><span data-ttu-id="bdaa6-153">Результаты проверки данных</span><span class="sxs-lookup"><span data-stu-id="bdaa6-153">Data Validation Results</span></span>  
 <span data-ttu-id="bdaa6-154">Когда проверка заканчивается, агент распространителя или агент слияния заносит в журнал сообщения касательно успеха или неудачи (репликация не сообщает, на каких строках возникла ошибка).</span><span class="sxs-lookup"><span data-stu-id="bdaa6-154">When validation is complete, the Distribution Agent or Merge Agent logs messages regarding success or failure (replication does not report which rows failed).</span></span> <span data-ttu-id="bdaa6-155">Эти сообщения можно просмотреть в среде [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], мониторе репликации и в системных таблицах репликации.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-155">These messages can be viewed in [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], Replication Monitor, and replication system tables.</span></span> <span data-ttu-id="bdaa6-156">В перечисленных выше разделах руководства описывается, как запустить проверку и просмотреть ее результаты.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-156">The how-to topic listed above demonstrates how to run validation and view the results.</span></span>  
  
 <span data-ttu-id="bdaa6-157">Чтобы обработать ошибки проверки, рассмотрите следующее.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-157">To handle validation failures, consider the following:</span></span>  
  
-   <span data-ttu-id="bdaa6-158">Настройте предупреждение репликации под названием **Репликация: ошибка проверки данных подписчиком** , чтобы получать уведомление об ошибке.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-158">Configure the replication alert named **Replication: Subscriber has failed data validation** so that you are notified of the failure.</span></span> <span data-ttu-id="bdaa6-159">Дополнительные сведения см. в разделе [Настройка стандартных предупреждений репликации &#40;SQL Server Management Studio& # 41 (Администрирование/Настройка-предопределенные-Replication-Alerts-SQL-Server-Management-Studio. md).</span><span class="sxs-lookup"><span data-stu-id="bdaa6-159">For more information, see [Configure Predefined Replication Alerts &#40;SQL Server Management Studio&#41(administration/configure-predefined-replication-alerts-sql-server-management-studio.md).</span></span>  
  
-   <span data-ttu-id="bdaa6-160">Является ли неудачная проверка данных проблемой для приложения?</span><span class="sxs-lookup"><span data-stu-id="bdaa6-160">Is the fact that validation failed an issue for your application?</span></span> <span data-ttu-id="bdaa6-161">Если неудачная проверка данных представляет собой проблему, обновите данные вручную, чтобы они были синхронизированы, или повторно инициализируйте подписку.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-161">If the validation failure is an issue, manually update the data so that it is synchronized, or reinitialize the subscription:</span></span>  
  
    -   <span data-ttu-id="bdaa6-162">Данные можно обновить с помощью [программы tablediff](../../tools/tablediff-utility.md).</span><span class="sxs-lookup"><span data-stu-id="bdaa6-162">Data can be updated using the [tablediff utility](../../tools/tablediff-utility.md).</span></span> <span data-ttu-id="bdaa6-163">Дополнительные сведения об использовании этой программы см. в статье [Сравнение реплицируемых таблиц на предмет различий (программирование репликации)](administration/compare-replicated-tables-for-differences-replication-programming.md).</span><span class="sxs-lookup"><span data-stu-id="bdaa6-163">For more information about using this utility, see [Compare Replicated Tables for Differences &#40;Replication Programming&#41;](administration/compare-replicated-tables-for-differences-replication-programming.md).</span></span>  
  
    -   <span data-ttu-id="bdaa6-164">Дополнительные сведения о повторной инициализации см. в статье [Повторная инициализация подписок](reinitialize-subscriptions.md).</span><span class="sxs-lookup"><span data-stu-id="bdaa6-164">For more information about reinitializaton, see [Reinitialize Subscriptions](reinitialize-subscriptions.md).</span></span>   
 
  
## <a name="articles-in-transactional-replication"></a><span data-ttu-id="bdaa6-165">Статьи при репликации транзакций</span><span class="sxs-lookup"><span data-stu-id="bdaa6-165">Articles in Transactional Replication</span></span> 

### <a name="using-sql-server-management-studio"></a><span data-ttu-id="bdaa6-166">Использование среды SQL Server Management Studio</span><span class="sxs-lookup"><span data-stu-id="bdaa6-166">Using SQL Server Management Studio</span></span>  
  
  
1.  <span data-ttu-id="bdaa6-167">Подключитесь к издателю в среде [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], а затем раскройте узел сервера.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-167">Connect to the Publisher in [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], and then expand the server node.</span></span>    
2.  <span data-ttu-id="bdaa6-168">Раскройте папку **Репликация** , а затем папку **Локальные публикации** .</span><span class="sxs-lookup"><span data-stu-id="bdaa6-168">Expand the **Replication** folder, and then expand the **Local Publications** folder.</span></span>    
3.  <span data-ttu-id="bdaa6-169">Щелкните правой кнопкой мыши публикацию, для которой хотите проверить подписки, затем выберите **Проверить подписки**.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-169">Right-click the publication for which you want to validate subscriptions, and then click **Validate Subscriptions**.</span></span>    
4.  <span data-ttu-id="bdaa6-170">В диалоговом окне **Проверка подписок** выберите подписки, которые надо проверить:</span><span class="sxs-lookup"><span data-stu-id="bdaa6-170">In the **Validate Subscriptions** dialog box, select which subscriptions to validate:</span></span>    
    -   <span data-ttu-id="bdaa6-171">Выберите **Проверить все подписки SQL Server**.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-171">Select **Validate all SQL Server subscriptions**.</span></span>    
    -   <span data-ttu-id="bdaa6-172">Выберите **Проверить следующие подписки**и укажите одну или несколько подписок.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-172">Select **Validate the following subscriptions**, and then select one or more subscriptions.</span></span>    
5.  <span data-ttu-id="bdaa6-173">Чтобы задать тип проверки (подсчет строк или подсчет строк с контрольной суммой), щелкните **Параметры проверки**и укажите параметры в диалоговом окне **Параметры проверки подписки** .</span><span class="sxs-lookup"><span data-stu-id="bdaa6-173">To specify the type of validation to perform (row count, or row count and checksum) click **Validation Options**, and then specify options in the **Subscription Validation Options** dialog box.</span></span>    
6.  [!INCLUDE[clickOK](../../includes/clickok-md.md)]  
  
7.  <span data-ttu-id="bdaa6-174">Просмотрите результаты проверки в мониторе репликации или в диалоговом окне **Просмотр состояния синхронизации** .</span><span class="sxs-lookup"><span data-stu-id="bdaa6-174">View validation results in Replication Monitor or the **View Synchronization Status** dialog box.</span></span> <span data-ttu-id="bdaa6-175">Для каждой подписки:</span><span class="sxs-lookup"><span data-stu-id="bdaa6-175">For each subscription:</span></span>    
    1.  <span data-ttu-id="bdaa6-176">Раскройте публикацию и щелкните правой кнопкой мыши подписку, затем выберите **Просмотр состояния синхронизации**.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-176">Expand the publication, right-click the subscription, and then click **View Synchronization Status**.</span></span>    
    2.  <span data-ttu-id="bdaa6-177">2\. Если агент не запущен, нажмите кнопку **Пуск** в диалоговом окне **Просмотр состояния синхронизации** .</span><span class="sxs-lookup"><span data-stu-id="bdaa6-177">If the agent is not running click **Start** in the **View Synchronization Status** dialog box.</span></span> <span data-ttu-id="bdaa6-178">В диалоговом окне появятся информационные сообщения о проверке.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-178">The dialog box will display informational messages regarding validation.</span></span>  
  
     <span data-ttu-id="bdaa6-179">Если нет никаких сообщений, касающихся проверки, значит, агент уже зарегистрировал сообщение ранее.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-179">If you do not see any messages regarding validation, the agent has already logged a subsequent message.</span></span> <span data-ttu-id="bdaa6-180">В этом случае просмотрите результаты проверки в мониторе репликации.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-180">In this case, view the validation results in Replication Monitor.</span></span> <span data-ttu-id="bdaa6-181">Дополнительные сведения см. в описании процедур монитора репликации данного раздела.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-181">For more information, see the Replication Monitor how to procedures in this topic.</span></span>  

### <a name="using-transact-sql-t-sql"></a><span data-ttu-id="bdaa6-182">Использование Transact-SQL (T-SQL)</span><span class="sxs-lookup"><span data-stu-id="bdaa6-182">Using Transact-SQL (T-SQL)</span></span>

#### <a name="all-articles"></a><span data-ttu-id="bdaa6-183">Все статьи</span><span class="sxs-lookup"><span data-stu-id="bdaa6-183">All articles</span></span>
  
1.  <span data-ttu-id="bdaa6-184">На издателе в базе данных публикации выполните хранимую процедуру [sp_publication_validation (Transact-SQL)](/sql/relational-databases/system-stored-procedures/sp-publication-validation-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="bdaa6-184">At the Publisher on the publication database, execute [sp_publication_validation &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-publication-validation-transact-sql).</span></span> <span data-ttu-id="bdaa6-185">Укажите \*\* \@ публикацию\*\* и одно из следующих значений для \*\* \@ rowcount_only\*\*.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-185">Specify **\@publication** and one of the following values for **\@rowcount_only**:</span></span>    
    -   <span data-ttu-id="bdaa6-186">**1** — проверка только количества строк (по умолчанию);</span><span class="sxs-lookup"><span data-stu-id="bdaa6-186">**1** - rowcount check only (the default)</span></span>    
    -   <span data-ttu-id="bdaa6-187">**2** — проверка количества строк и двоичной контрольной суммы.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-187">**2** - rowcount and binary checksum.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="bdaa6-188">Если выполняется процедура [sp_publication_validation (Transact-SQL)](/sql/relational-databases/system-stored-procedures/sp-publication-validation-transact-sql), то процедура [sp_article_validation (Transact-SQL)](/sql/relational-databases/system-stored-procedures/sp-article-validation-transact-sql) выполняется для каждой статьи в публикации.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-188">When you execute [sp_publication_validation &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-publication-validation-transact-sql), [sp_article_validation &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-article-validation-transact-sql) is executed for each article in the publication.</span></span> <span data-ttu-id="bdaa6-189">Для успешного выполнения [sp_publication_validation (Transact-SQL)](/sql/relational-databases/system-stored-procedures/sp-publication-validation-transact-sql) необходимо иметь разрешения SELECT для всех столбцов в опубликованных базовых таблицах.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-189">To successfully execute [sp_publication_validation &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-publication-validation-transact-sql), you must have SELECT permissions on all columns in the published base tables.</span></span>  
  
2.  <span data-ttu-id="bdaa6-190">Если агент распространителя для каждой подписки еще не запущен, запустите его (необязательно).</span><span class="sxs-lookup"><span data-stu-id="bdaa6-190">(Optional) Start the Distribution Agent for each subscription if it is not already running.</span></span> <span data-ttu-id="bdaa6-191">Дополнительные сведения см. в разделах [Synchronize a Pull Subscription](synchronize-a-pull-subscription.md) и [Synchronize a Push Subscription](synchronize-a-push-subscription.md).</span><span class="sxs-lookup"><span data-stu-id="bdaa6-191">For more information, see [Synchronize a Pull Subscription](synchronize-a-pull-subscription.md) and [Synchronize a Push Subscription](synchronize-a-push-subscription.md).</span></span>    
3.  <span data-ttu-id="bdaa6-192">Просмотрите результаты проверки в выходном файле агента.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-192">Check the agent output for the result of the validation.</span></span> <span data-ttu-id="bdaa6-193">Дополнительные сведения см. в статье [Проверка реплицированных данных](validate-data-at-the-subscriber.md).</span><span class="sxs-lookup"><span data-stu-id="bdaa6-193">For more information, see [Validate Replicated Data](validate-data-at-the-subscriber.md).</span></span>  
  
#### <a name="single-article"></a><span data-ttu-id="bdaa6-194">Одна статья</span><span class="sxs-lookup"><span data-stu-id="bdaa6-194">Single article</span></span> 
  
1.  <span data-ttu-id="bdaa6-195">На издателе в базе данных публикации выполните процедуру [sp_article_validation (Transact-SQL)](/sql/relational-databases/system-stored-procedures/sp-article-validation-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="bdaa6-195">At the Publisher on the publication database, execute [sp_article_validation &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-article-validation-transact-sql).</span></span> <span data-ttu-id="bdaa6-196">Укажите \*\* \@ публикацию**, имя статьи для \*\* \@ статьи**и одно из следующих значений для \*\* \@ rowcount_only\*\*.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-196">Specify **\@publication**, the name of the article for **\@article**, and one of the following values for **\@rowcount_only**:</span></span>    
    -   <span data-ttu-id="bdaa6-197">**1** — проверка только количества строк (по умолчанию)</span><span class="sxs-lookup"><span data-stu-id="bdaa6-197">**1** - Rowcount check only (the default)</span></span>    
    -   <span data-ttu-id="bdaa6-198">**2** — количество строк и двоичная контрольная сумма.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-198">**2** - Rowcount and binary checksum.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="bdaa6-199">Для успешного выполнения процедуры [sp_article_validation (Transact-SQL)](/sql/relational-databases/system-stored-procedures/sp-article-validation-transact-sql) необходимо иметь разрешения SELECT для всех столбцов в опубликованных базовых таблицах.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-199">To successfully execute [sp_article_validation &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-article-validation-transact-sql), you must have SELECT permissions on all columns in the published base table.</span></span>  
  
2.  <span data-ttu-id="bdaa6-200">Если агент распространителя для каждой подписки еще не запущен, запустите его (необязательно).</span><span class="sxs-lookup"><span data-stu-id="bdaa6-200">(Optional) Start the Distribution Agent for each subscription if it is not already running.</span></span> <span data-ttu-id="bdaa6-201">Дополнительные сведения см. в разделах [Synchronize a Pull Subscription](synchronize-a-pull-subscription.md) и [Synchronize a Push Subscription](synchronize-a-push-subscription.md).</span><span class="sxs-lookup"><span data-stu-id="bdaa6-201">For more information, see [Synchronize a Pull Subscription](synchronize-a-pull-subscription.md) and [Synchronize a Push Subscription](synchronize-a-push-subscription.md).</span></span>    
3.  <span data-ttu-id="bdaa6-202">Просмотрите результаты проверки в выходном файле агента.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-202">Check the agent output for the result of the validation.</span></span> <span data-ttu-id="bdaa6-203">Дополнительные сведения см. в статье [Проверка реплицированных данных](validate-data-at-the-subscriber.md).</span><span class="sxs-lookup"><span data-stu-id="bdaa6-203">For more information, see [Validate Replicated Data](validate-data-at-the-subscriber.md).</span></span>  
  
#### <a name="single-subscriber"></a><span data-ttu-id="bdaa6-204">Один подписчик</span><span class="sxs-lookup"><span data-stu-id="bdaa6-204">Single subscriber</span></span>
  
1.  <span data-ttu-id="bdaa6-205">На издателе в базе данных публикации откройте явную транзакцию с помощью [BEGIN TRANSACTION (Transact-SQL)](/sql/t-sql/language-elements/begin-transaction-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="bdaa6-205">At the Publisher on the publication database, open an explicit transaction using [BEGIN TRANSACTION &#40;Transact-SQL&#41;](/sql/t-sql/language-elements/begin-transaction-transact-sql).</span></span>    
2.  <span data-ttu-id="bdaa6-206">На издателе в базе данных публикации выполните процедуру [sp_marksubscriptionvalidation (Transact-SQL)](/sql/relational-databases/system-stored-procedures/sp-marksubscriptionvalidation-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="bdaa6-206">At the Publisher on the publication database, execute [sp_marksubscriptionvalidation &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-marksubscriptionvalidation-transact-sql).</span></span> <span data-ttu-id="bdaa6-207">Укажите публикацию для \*\* \@ публикации**, имя подписчика для \*\* \@ подписчика**и имя базы данных подписки для \*\* \@ destination_db\*\*.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-207">Specify the publication for **\@publication**, the name of the Subscriber for **\@subscriber**, and the name of the subscription database for **\@destination_db**.</span></span>    
3.  <span data-ttu-id="bdaa6-208">Повторите шаг 2 для каждой проверяемой подписки (необязательно).</span><span class="sxs-lookup"><span data-stu-id="bdaa6-208">(Optional) Repeat step 2 for each subscription being validated.</span></span>    
4.  <span data-ttu-id="bdaa6-209">На издателе в базе данных публикации выполните процедуру [sp_article_validation (Transact-SQL)](/sql/relational-databases/system-stored-procedures/sp-article-validation-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="bdaa6-209">At the Publisher on the publication database, execute [sp_article_validation &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-article-validation-transact-sql).</span></span> <span data-ttu-id="bdaa6-210">Укажите \*\* \@ публикацию**, имя статьи для \*\* \@ статьи**и одно из следующих значений для \*\* \@ rowcount_only\*\*.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-210">Specify **\@publication**, the name of the article for **\@article**, and one of the following values for **\@rowcount_only**:</span></span>    
    -   <span data-ttu-id="bdaa6-211">**1** — проверка только количества строк (по умолчанию)</span><span class="sxs-lookup"><span data-stu-id="bdaa6-211">**1** - Rowcount check only (the default)</span></span>    
    -   <span data-ttu-id="bdaa6-212">**2** — количество строк и двоичная контрольная сумма.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-212">**2** - Rowcount and binary checksum.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="bdaa6-213">Для успешного выполнения процедуры [sp_article_validation (Transact-SQL)](/sql/relational-databases/system-stored-procedures/sp-article-validation-transact-sql) необходимо иметь разрешения SELECT для всех столбцов в опубликованных базовых таблицах.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-213">To successfully execute [sp_article_validation &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-article-validation-transact-sql), you must have SELECT permissions on all columns in the published base table.</span></span>  
  
5.  <span data-ttu-id="bdaa6-214">На издателе в базе данных публикации зафиксируйте транзакцию с помощью [COMMIT TRANSACTION (Transact-SQL)](/sql/t-sql/language-elements/commit-transaction-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="bdaa6-214">At the Publisher on the publication database, commit the transaction using [COMMIT TRANSACTION &#40;Transact-SQL&#41;](/sql/t-sql/language-elements/commit-transaction-transact-sql).</span></span>    
6.  <span data-ttu-id="bdaa6-215">Повторите шаги 1 – 5 для каждой проверяемой статьи (необязательно).</span><span class="sxs-lookup"><span data-stu-id="bdaa6-215">(Optional) Repeat steps 1 through 5 for each article being validated.</span></span>    
7.  <span data-ttu-id="bdaa6-216">Запустите агент распространителя, если он еще не работает (необязательно).</span><span class="sxs-lookup"><span data-stu-id="bdaa6-216">(Optional) Start the Distribution Agent if it is not already running.</span></span> <span data-ttu-id="bdaa6-217">Дополнительные сведения см. в разделах [Synchronize a Pull Subscription](synchronize-a-pull-subscription.md) и [Synchronize a Push Subscription](synchronize-a-push-subscription.md).</span><span class="sxs-lookup"><span data-stu-id="bdaa6-217">For more information, see [Synchronize a Pull Subscription](synchronize-a-pull-subscription.md) and [Synchronize a Push Subscription](synchronize-a-push-subscription.md).</span></span>    
8.  <span data-ttu-id="bdaa6-218">Просмотрите результаты проверки в выходном файле агента.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-218">Check the agent output for the result of the validation.</span></span> <span data-ttu-id="bdaa6-219">Дополнительные сведения см. в разделе [Validate Data at the Subscriber](validate-data-at-the-subscriber.md).</span><span class="sxs-lookup"><span data-stu-id="bdaa6-219">For more information, see [Validate Data at the Subscriber](validate-data-at-the-subscriber.md).</span></span>  

##  <a name="all-push-subscriptions-to-a-transactional-publication"></a><span data-ttu-id="bdaa6-220">Все принудительные подписки на публикацию транзакций</span><span class="sxs-lookup"><span data-stu-id="bdaa6-220">All push subscriptions to a Transactional Publication</span></span> 

### <a name="using-replication-monitor"></a><span data-ttu-id="bdaa6-221">Использование монитора репликации</span><span class="sxs-lookup"><span data-stu-id="bdaa6-221">Using Replication Monitor</span></span>
  
1.  <span data-ttu-id="bdaa6-222">В мониторе репликации раскройте группу издателей на левой панели, а затем раскройте нужного издателя.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-222">In Replication Monitor, expand a Publisher group in the left pane, and then expand a Publisher.</span></span>    
2.  <span data-ttu-id="bdaa6-223">Щелкните правой кнопкой мыши публикацию, для которой хотите проверить подписки, затем выберите **Проверить подписки**.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-223">Right-click the publication for which you want to validate subscriptions, and then click **Validate Subscriptions**.</span></span>    
3.  <span data-ttu-id="bdaa6-224">В диалоговом окне **Проверка подписок** выберите подписки, которые надо проверить:</span><span class="sxs-lookup"><span data-stu-id="bdaa6-224">In the **Validate Subscriptions** dialog box, select which subscriptions to validate:</span></span>    
    -   <span data-ttu-id="bdaa6-225">Выберите **Проверить все подписки SQL Server**.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-225">Select **Validate all SQL Server subscriptions**.</span></span>    
    -   <span data-ttu-id="bdaa6-226">Выберите **Проверить следующие подписки**и укажите одну или несколько подписок.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-226">Select **Validate the following subscriptions**, and then select one or more subscriptions.</span></span>   
4.  <span data-ttu-id="bdaa6-227">Чтобы задать тип проверки (подсчет строк или подсчет строк с контрольной суммой), щелкните **Параметры проверки**и укажите параметры в диалоговом окне **Параметры проверки подписки** .</span><span class="sxs-lookup"><span data-stu-id="bdaa6-227">To specify the type of validation to perform (row count, or row count and checksum) click **Validation Options**, and then specify options in the **Subscription Validation Options** dialog box.</span></span>    
5.  [!INCLUDE[clickOK](../../includes/clickok-md.md)]    
6.  <span data-ttu-id="bdaa6-228">Перейдите на вкладку **Все подписки** .</span><span class="sxs-lookup"><span data-stu-id="bdaa6-228">Click the **All Subscriptions** tab.</span></span>    
7.  <span data-ttu-id="bdaa6-229">Просмотрите результаты проверки.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-229">View validation results.</span></span> <span data-ttu-id="bdaa6-230">Для каждой принудительной подписки:</span><span class="sxs-lookup"><span data-stu-id="bdaa6-230">For each push subscription:</span></span>   
    1.  <span data-ttu-id="bdaa6-231">1. Если агент не запущен, щелкните правой кнопкой мыши подписку и выберите **Запустить синхронизацию**.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-231">If the agent is not running, right-click the subscription, and then click **Start Synchronizing**.</span></span>   
    2.  <span data-ttu-id="bdaa6-232">Щелкните правой кнопкой мыши подписку, затем выберите **Просмотреть подробности**.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-232">Right-click the subscription, and then click **View Details**.</span></span>    
    3.  <span data-ttu-id="bdaa6-233">3.Просмотрите сведения на вкладке **Журнал операций от распространителя к подписчику** в текстовом поле **Действия в выбранном сеансе** .</span><span class="sxs-lookup"><span data-stu-id="bdaa6-233">View information on the **Distributor to Subscriber History** tab in the **Actions in the selected session** text area.</span></span>  
  

## <a name="for-a-single-subscription-to-a-merge-publication"></a><span data-ttu-id="bdaa6-234">Для одной подписки на публикацию слиянием</span><span class="sxs-lookup"><span data-stu-id="bdaa6-234">For a single subscription to a Merge Publication</span></span>
  
### <a name="using-sql-server-management-studio"></a><span data-ttu-id="bdaa6-235">Использование среды SQL Server Management Studio</span><span class="sxs-lookup"><span data-stu-id="bdaa6-235">Using SQL Server Management Studio</span></span>
  
1.  <span data-ttu-id="bdaa6-236">Подключитесь к издателю в среде [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], а затем раскройте узел сервера.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-236">Connect to the Publisher in [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], and then expand the server node.</span></span>    
2.  <span data-ttu-id="bdaa6-237">Раскройте папку **Репликация** , а затем папку **Локальные публикации** .</span><span class="sxs-lookup"><span data-stu-id="bdaa6-237">Expand the **Replication** folder, and then expand the **Local Publications** folder.</span></span>    
3.  <span data-ttu-id="bdaa6-238">Раскройте публикацию, для которой требуется проверить подписки, щелкните правой кнопкой мыши подписку и затем выберите **Проверить подписку**.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-238">Expand the publication for which you want to validate subscriptions, right-click the subscription, and then click **Validate Subscription**.</span></span>    
4.  <span data-ttu-id="bdaa6-239">В диалоговом окне **Проверка подписки** выберите **Проверить эту подписку**.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-239">In the **Validate Subscription** dialog box, select **Validate this subscription**.</span></span>    
5.  <span data-ttu-id="bdaa6-240">Чтобы задать тип проверки (подсчет строк или подсчет строк с контрольной суммой), щелкните **Параметры**и укажите параметры в диалоговом окне **Параметры проверки подписки** .</span><span class="sxs-lookup"><span data-stu-id="bdaa6-240">To specify the type of validation to perform (row count, or row count and checksum) click **Options**, and then specify options in the **Subscription Validation Options** dialog box.</span></span>    
6.  [!INCLUDE[clickOK](../../includes/clickok-md.md)]    
7.  <span data-ttu-id="bdaa6-241">Просмотрите результаты проверки в мониторе репликации или в диалоговом окне **Просмотр состояния синхронизации** .</span><span class="sxs-lookup"><span data-stu-id="bdaa6-241">View validation results in Replication Monitor or the **View Synchronization Status** dialog box:</span></span>  
    1.  <span data-ttu-id="bdaa6-242">Раскройте публикацию и щелкните правой кнопкой мыши подписку, затем выберите **Просмотр состояния синхронизации**.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-242">Expand the publication, right-click the subscription, and then click **View Synchronization Status**.</span></span>   
    2.  <span data-ttu-id="bdaa6-243">Если агент не запущен, нажмите кнопку **запустить** в диалоговом окне **Просмотр состояния синхронизации** .</span><span class="sxs-lookup"><span data-stu-id="bdaa6-243">If the agent is not running, click **Start** in the **View Synchronization Status** dialog box.</span></span> <span data-ttu-id="bdaa6-244">В диалоговом окне появятся информационные сообщения о проверке.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-244">The dialog box will display informational messages regarding validation.</span></span>  
  
     <span data-ttu-id="bdaa6-245">Если нет никаких сообщений, касающихся проверки, значит, агент уже зарегистрировал сообщение ранее.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-245">If you do not see any messages regarding validation, the agent has already logged a subsequent message.</span></span> <span data-ttu-id="bdaa6-246">В этом случае просмотрите результаты проверки в мониторе репликации.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-246">In this case, view the validation results in Replication Monitor.</span></span> <span data-ttu-id="bdaa6-247">Дополнительные сведения см. в описании процедур монитора репликации данного раздела.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-247">For more information, see the Replication Monitor how to procedures in this topic.</span></span>  

### <a name="using-transact-sql-t-sql"></a><span data-ttu-id="bdaa6-248">Использование Transact-SQL (T-SQL)</span><span class="sxs-lookup"><span data-stu-id="bdaa6-248">Using Transact-SQL (T-SQL)</span></span>

1.  <span data-ttu-id="bdaa6-249">На издателе в базе данных публикации выполните процедуру [sp_validatemergesubscription (Transact-SQL)](/sql/relational-databases/system-stored-procedures/sp-validatemergesubscription-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="bdaa6-249">At the Publisher on the publication database, execute [sp_validatemergesubscription &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-validatemergesubscription-transact-sql).</span></span> <span data-ttu-id="bdaa6-250">Укажите \*\* \@ публикацию**, имя подписчика для \*\* \@ подписчика**, имя базы данных подписки для \*\* \@ subscriber_db**и одно из следующих значений для \*\* \@ уровня**:</span><span class="sxs-lookup"><span data-stu-id="bdaa6-250">Specify **\@publication**, the name of the Subscriber for **\@subscriber**, the name of the subscription database for **\@subscriber_db**, and one of the following values for **\@level**:</span></span>   
    -   <span data-ttu-id="bdaa6-251">**1** — проверка только количества строк.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-251">**1** - Rowcount-only validation.</span></span>    
    -   <span data-ttu-id="bdaa6-252">**3** — проверка двоичной контрольной суммы.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-252">**3** - Rowcount binary checksum validation.</span></span>  
  
     <span data-ttu-id="bdaa6-253">Выбранная подписка будет помечена для проверки.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-253">This marks the selected subscription for validation.</span></span>  
  
2.  <span data-ttu-id="bdaa6-254">Запустите агент слияния для каждой подписки.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-254">Start the merge agent for each subscription.</span></span> <span data-ttu-id="bdaa6-255">Дополнительные сведения см. в разделах [Synchronize a Pull Subscription](synchronize-a-pull-subscription.md) и [Synchronize a Push Subscription](synchronize-a-push-subscription.md).</span><span class="sxs-lookup"><span data-stu-id="bdaa6-255">For more information, see [Synchronize a Pull Subscription](synchronize-a-pull-subscription.md) and [Synchronize a Push Subscription](synchronize-a-push-subscription.md).</span></span>    
3.  <span data-ttu-id="bdaa6-256">Просмотрите результаты проверки в выходном файле агента.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-256">Check the agent output for the result of the validation.</span></span>    
4.  <span data-ttu-id="bdaa6-257">Повторите шаги 1 – 3 для каждой проверяемой подписки.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-257">Repeat steps 1 through 3 for each subscription being validated.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="bdaa6-258">Подписка на публикацию слиянием может быть проверена и в конце синхронизации с помощью параметра **-Validate** , когда работает [Replication Merge Agent](agents/replication-merge-agent.md).</span><span class="sxs-lookup"><span data-stu-id="bdaa6-258">A subscription to a merge publication can also be validated at the end of a synchronization by specifying the **-Validate** parameter when running the [Replication Merge Agent](agents/replication-merge-agent.md).</span></span>  

  
## <a name="for-all-subscriptions-to-a-merge-publication"></a><span data-ttu-id="bdaa6-259">Для всех подписок на публикацию слиянием</span><span class="sxs-lookup"><span data-stu-id="bdaa6-259">For all subscriptions to a Merge Publication</span></span>

### <a name="using-sql-server-management-studio"></a><span data-ttu-id="bdaa6-260">Использование среды SQL Server Management Studio</span><span class="sxs-lookup"><span data-stu-id="bdaa6-260">Using SQL Server Management Studio</span></span> 
  
1.  <span data-ttu-id="bdaa6-261">Подключитесь к издателю в среде [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], а затем раскройте узел сервера.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-261">Connect to the Publisher in [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], and then expand the server node.</span></span>    
2.  <span data-ttu-id="bdaa6-262">Раскройте папку **Репликация** , а затем папку **Локальные публикации** .</span><span class="sxs-lookup"><span data-stu-id="bdaa6-262">Expand the **Replication** folder, and then expand the **Local Publications** folder.</span></span>    
3.  <span data-ttu-id="bdaa6-263">Щелкните правой кнопкой мыши публикацию, для которой хотите проверить подписки, затем нажмите кнопку **Проверить все подписки**.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-263">Right-click the publication for which you want to validate subscriptions, and then click **Validate All Subscriptions**.</span></span>    
4.  <span data-ttu-id="bdaa6-264">В диалоговом окне **Проверка всех подписок** задайте тип проверки (подсчет строк или подсчет строк с контрольной суммой).</span><span class="sxs-lookup"><span data-stu-id="bdaa6-264">In the **Validate All Subscriptions** dialog box, specify the type of validation to perform (row count, or row count and checksum).</span></span>    
5.  [!INCLUDE[clickOK](../../includes/clickok-md.md)]    
6.  <span data-ttu-id="bdaa6-265">Просмотрите результаты проверки в мониторе репликации или в диалоговом окне **Просмотр состояния синхронизации** .</span><span class="sxs-lookup"><span data-stu-id="bdaa6-265">View validation results in Replication Monitor or the **View Synchronization Status** dialog box.</span></span> <span data-ttu-id="bdaa6-266">Для каждой подписки:</span><span class="sxs-lookup"><span data-stu-id="bdaa6-266">For each subscription:</span></span>    
    1.  <span data-ttu-id="bdaa6-267">Раскройте публикацию и щелкните правой кнопкой мыши подписку, затем выберите **Просмотр состояния синхронизации**.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-267">Expand the publication, right-click the subscription, and then click **View Synchronization Status**.</span></span>   
    2.  <span data-ttu-id="bdaa6-268">Если агент не запущен, нажмите кнопку **запустить** в диалоговом окне **Просмотр состояния синхронизации** .</span><span class="sxs-lookup"><span data-stu-id="bdaa6-268">If the agent is not running, click **Start** in the **View Synchronization Status** dialog box.</span></span> <span data-ttu-id="bdaa6-269">В диалоговом окне появятся информационные сообщения о проверке.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-269">The dialog box will display informational messages regarding validation.</span></span>  
  
     <span data-ttu-id="bdaa6-270">Если нет никаких сообщений, касающихся проверки, значит, агент уже зарегистрировал сообщение ранее.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-270">If you do not see any messages regarding validation, the agent has already logged a subsequent message.</span></span> <span data-ttu-id="bdaa6-271">В этом случае просмотрите результаты проверки в мониторе репликации.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-271">In this case, view the validation results in Replication Monitor.</span></span> <span data-ttu-id="bdaa6-272">Дополнительные сведения см. в описании процедур монитора репликации данного раздела.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-272">For more information, see the Replication Monitor how to procedures in this topic.</span></span>  

### <a name="using-transact-sql-t-sql"></a><span data-ttu-id="bdaa6-273">Использование Transact-SQL (T-SQL)</span><span class="sxs-lookup"><span data-stu-id="bdaa6-273">Using Transact-SQL (T-SQL)</span></span>

1.  <span data-ttu-id="bdaa6-274">На издателе в базе данных публикации выполните процедуру [sp_validatemergepublication (Transact-SQL)](/sql/relational-databases/system-stored-procedures/sp-validatemergepublication-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="bdaa6-274">At the Publisher on the publication database, execute [sp_validatemergepublication &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-validatemergepublication-transact-sql).</span></span> <span data-ttu-id="bdaa6-275">Укажите \*\* \@ публикацию\*\* и одно из следующих значений для \*\* \@ уровня\*\*:</span><span class="sxs-lookup"><span data-stu-id="bdaa6-275">Specify **\@publication** and one of the following values for **\@level**:</span></span>    
    -   <span data-ttu-id="bdaa6-276">**1** — проверка только количества строк.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-276">**1** - Rowcount-only validation.</span></span>    
    -   <span data-ttu-id="bdaa6-277">**3** — проверка двоичной контрольной суммы.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-277">**3** - Rowcount binary checksum validation.</span></span>  
  
     <span data-ttu-id="bdaa6-278">Таким образом будут отмечены для проверки все публикации.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-278">This marks all subscriptions for validation.</span></span>  
  
2.  <span data-ttu-id="bdaa6-279">Запустите агент слияния для каждой подписки.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-279">Start the merge agent for each subscription.</span></span> <span data-ttu-id="bdaa6-280">Дополнительные сведения см. в разделах [Synchronize a Pull Subscription](synchronize-a-pull-subscription.md) и [Synchronize a Push Subscription](synchronize-a-push-subscription.md).</span><span class="sxs-lookup"><span data-stu-id="bdaa6-280">For more information, see [Synchronize a Pull Subscription](synchronize-a-pull-subscription.md) and [Synchronize a Push Subscription](synchronize-a-push-subscription.md).</span></span>    
3.  <span data-ttu-id="bdaa6-281">Просмотрите результаты проверки в выходном файле агента.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-281">Check the agent output for the result of the validation.</span></span> <span data-ttu-id="bdaa6-282">Дополнительные сведения см. в разделе [Validate Data at the Subscriber](validate-data-at-the-subscriber.md).</span><span class="sxs-lookup"><span data-stu-id="bdaa6-282">For more information, see [Validate Data at the Subscriber](validate-data-at-the-subscriber.md).</span></span>  


## <a name="for-a-single-push-subscription-to-a-merge-publication"></a><span data-ttu-id="bdaa6-283">Для одной принудительной подписки на публикацию слиянием</span><span class="sxs-lookup"><span data-stu-id="bdaa6-283">For a single push subscription to a Merge Publication</span></span> 

### <a name="using-replication-monitor"></a><span data-ttu-id="bdaa6-284">Использование монитора репликации</span><span class="sxs-lookup"><span data-stu-id="bdaa6-284">Using Replication Monitor</span></span>
  
1.  <span data-ttu-id="bdaa6-285">В мониторе репликации раскройте группу издателей на левой панели, раскройте нужного издателя, а затем выберите публикацию.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-285">In Replication Monitor, expand a Publisher group in the left pane, expand a Publisher, and then click a publication.</span></span>    
2.  <span data-ttu-id="bdaa6-286">Перейдите на вкладку **Все подписки** .</span><span class="sxs-lookup"><span data-stu-id="bdaa6-286">Click the **All Subscriptions** tab.</span></span>    
3.  <span data-ttu-id="bdaa6-287">Щелкните правой кнопкой мыши подписку, для которой требуется выполнить проверку, а затем щелкните **Проверить подписку**.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-287">Right-click the subscription you want to validate, and then click **Validate Subscription**.</span></span>    
4.  <span data-ttu-id="bdaa6-288">В диалоговом окне **Проверка подписки** выберите **Проверить эту подписку**.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-288">In the **Validate Subscription** dialog box, select **Validate this subscription**.</span></span>    
5.  <span data-ttu-id="bdaa6-289">Чтобы задать тип проверки (подсчет строк или подсчет строк с контрольной суммой), щелкните **Параметры**и укажите параметры в диалоговом окне **Параметры проверки подписки** .</span><span class="sxs-lookup"><span data-stu-id="bdaa6-289">To specify the type of validation to perform (row count, or row count and checksum) click **Options**, and then specify options in the **Subscription Validation Options** dialog box.</span></span>    
6.  [!INCLUDE[clickOK](../../includes/clickok-md.md)]    
7.  <span data-ttu-id="bdaa6-290">Перейдите на вкладку **Все подписки** .</span><span class="sxs-lookup"><span data-stu-id="bdaa6-290">Click the **All Subscriptions** tab.</span></span>    
8.  <span data-ttu-id="bdaa6-291">Просмотрите результаты проверки:</span><span class="sxs-lookup"><span data-stu-id="bdaa6-291">View validation results:</span></span>    
    1.  <span data-ttu-id="bdaa6-292">1. Если агент не запущен, щелкните правой кнопкой мыши подписку и выберите **Запустить синхронизацию**.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-292">If the agent is not running, right-click the subscription, and then click **Start Synchronizing**.</span></span>    
    2.  <span data-ttu-id="bdaa6-293">Щелкните правой кнопкой мыши подписку, затем выберите **Просмотреть подробности**.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-293">Right-click the subscription, and then click **View Details**.</span></span>    
    3.  <span data-ttu-id="bdaa6-294">Просмотрите сведения на вкладке **Журнал синхронизации** в текстовом поле **Последнее сообщение выбранного сеанса** .</span><span class="sxs-lookup"><span data-stu-id="bdaa6-294">View information on the **Synchronization History** tab in the **Last message of the selected session** text area.</span></span>  
  
## <a name="for-all-push-subscriptions-to-a-merge-publication"></a><span data-ttu-id="bdaa6-295">Для всех принудительных подписок на публикацию слиянием</span><span class="sxs-lookup"><span data-stu-id="bdaa6-295">For all push subscriptions to a Merge Publication</span></span> 

### <a name="using-replication-monitor"></a><span data-ttu-id="bdaa6-296">Использование монитора репликации</span><span class="sxs-lookup"><span data-stu-id="bdaa6-296">Using Replication Monitor</span></span>
  
1.  <span data-ttu-id="bdaa6-297">В мониторе репликации раскройте группу издателей на левой панели, а затем раскройте нужного издателя.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-297">In Replication Monitor, expand a Publisher group in the left pane, and then expand a Publisher.</span></span>    
2.  <span data-ttu-id="bdaa6-298">Щелкните правой кнопкой мыши публикацию, для которой хотите проверить подписки, затем нажмите кнопку **Проверить все подписки**.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-298">Right-click the publication for which you want to validate subscriptions, and then click **Validate All Subscriptions**.</span></span>    
3.  <span data-ttu-id="bdaa6-299">В диалоговом окне **Проверка всех подписок** задайте тип проверки (подсчет строк или подсчет строк с контрольной суммой).</span><span class="sxs-lookup"><span data-stu-id="bdaa6-299">In the **Validate All Subscriptions** dialog box, specify the type of validation to perform (row count, or row count and checksum).</span></span>    
4.  [!INCLUDE[clickOK](../../includes/clickok-md.md)]    
5.  <span data-ttu-id="bdaa6-300">Перейдите на вкладку **Все подписки** .</span><span class="sxs-lookup"><span data-stu-id="bdaa6-300">Click the **All Subscriptions** tab.</span></span>    
6.  <span data-ttu-id="bdaa6-301">Просмотрите результаты проверки.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-301">View validation results.</span></span> <span data-ttu-id="bdaa6-302">Для каждой принудительной подписки:</span><span class="sxs-lookup"><span data-stu-id="bdaa6-302">For each push subscription:</span></span>    
    1.  <span data-ttu-id="bdaa6-303">1. Если агент не запущен, щелкните правой кнопкой мыши подписку и выберите **Запустить синхронизацию**.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-303">If the agent is not running, right-click the subscription, and then click **Start Synchronizing**.</span></span>    
    2.  <span data-ttu-id="bdaa6-304">Щелкните правой кнопкой мыши подписку, затем выберите **Просмотреть подробности**.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-304">Right-click the subscription, and then click **View Details**.</span></span>    
    3.  <span data-ttu-id="bdaa6-305">Просмотрите сведения на вкладке **Журнал синхронизации** в текстовом поле **Последнее сообщение выбранного сеанса** .</span><span class="sxs-lookup"><span data-stu-id="bdaa6-305">View information on the **Synchronization History** tab in the **Last message of the selected session** text area.</span></span>  
  
  
## <a name="validate-data-using-merge-agent-parameters"></a><span data-ttu-id="bdaa6-306">Проверка данных с помощью агент слияния параметров</span><span class="sxs-lookup"><span data-stu-id="bdaa6-306">Validate data using Merge Agent Parameters</span></span>
  
1.  <span data-ttu-id="bdaa6-307">Запустите агент слияния на подписчике (подписка по запросу) или на распространителе (принудительная подписка) из командной строки одним из следующих способов.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-307">Start the Merge Agent at the Subscriber (pull subscription) or at the Distributor (push subscription) from the command prompt in one of the following ways.</span></span>    
    -   <span data-ttu-id="bdaa6-308">Задайте значение **1** (количество строк) или **3** (количество строк и двоичная контрольная сумма) в параметре **-Validate** .</span><span class="sxs-lookup"><span data-stu-id="bdaa6-308">Specifying a value of **1** (rowcount) or **3** (rowcount and binary checksum) for the **-Validate** parameter.</span></span>   
    -   <span data-ttu-id="bdaa6-309">Задайте **rowcount validation** (проверка количества строк) или **rowcount and checksum validation** (количество строк и контрольная сумма) в параметре **-ProfileName** .</span><span class="sxs-lookup"><span data-stu-id="bdaa6-309">Specifying **rowcount validation** or **rowcount and checksum validation** for the **-ProfileName** parameter.</span></span>  
  
     <span data-ttu-id="bdaa6-310">Дополнительные сведения см. в разделе [Synchronize a Pull Subscription](synchronize-a-pull-subscription.md) или [Synchronize a Push Subscription](synchronize-a-push-subscription.md).</span><span class="sxs-lookup"><span data-stu-id="bdaa6-310">For more information, see [Synchronize a Pull Subscription](synchronize-a-pull-subscription.md) or [Synchronize a Push Subscription](synchronize-a-push-subscription.md).</span></span>  
  
## <a name="using-replication-management-objects-rmo"></a><span data-ttu-id="bdaa6-311">При помощи объектов RMO</span><span class="sxs-lookup"><span data-stu-id="bdaa6-311">Using Replication Management Objects (RMO)</span></span>  
 <span data-ttu-id="bdaa6-312">Репликация позволяет использовать объекты RMO для программной проверки того, что данные на подписчике совпадают с данными на издателе.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-312">Replication enables you to use Replication Management Objects (RMO) to programmatically validate that data at the Subscriber matches data at the Publisher.</span></span> <span data-ttu-id="bdaa6-313">Выбор объектов зависит от типа топологии репликации.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-313">The objects you use depend on the type of replication topology.</span></span> <span data-ttu-id="bdaa6-314">Для репликации транзакций необходима проверка всех подписок на публикацию.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-314">Transactional replication requires validation of all subscriptions to a publication.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="bdaa6-315">См. приведенный ниже [Пример (объекты RMO)](#RMOExample).</span><span class="sxs-lookup"><span data-stu-id="bdaa6-315">For an example, see [Example (RMO)](#RMOExample), later in this section.</span></span>  
  
#### <a name="to-validate-data-for-all-articles-in-a-transactional-publication"></a><span data-ttu-id="bdaa6-316">Проверка данных для всех статей в публикации транзакций</span><span class="sxs-lookup"><span data-stu-id="bdaa6-316">To validate data for all articles in a transactional publication</span></span>  
  
1.  <span data-ttu-id="bdaa6-317">Создайте соединение с издателем с помощью класса <xref:Microsoft.SqlServer.Management.Common.ServerConnection> .</span><span class="sxs-lookup"><span data-stu-id="bdaa6-317">Create a connection to the Publisher by using the <xref:Microsoft.SqlServer.Management.Common.ServerConnection> class.</span></span>    
2.  <span data-ttu-id="bdaa6-318">Создайте экземпляр класса <xref:Microsoft.SqlServer.Replication.TransPublication>.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-318">Create an instance of the <xref:Microsoft.SqlServer.Replication.TransPublication> class.</span></span> <span data-ttu-id="bdaa6-319">Установите для публикации свойства <xref:Microsoft.SqlServer.Replication.Publication.Name%2A> и <xref:Microsoft.SqlServer.Replication.Publication.DatabaseName%2A> .</span><span class="sxs-lookup"><span data-stu-id="bdaa6-319">Set the <xref:Microsoft.SqlServer.Replication.Publication.Name%2A> and <xref:Microsoft.SqlServer.Replication.Publication.DatabaseName%2A> properties for the publication.</span></span> <span data-ttu-id="bdaa6-320">В свойстве <xref:Microsoft.SqlServer.Replication.ReplicationObject.ConnectionContext%2A> укажите созданное на шаге 1 соединение.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-320">Set the <xref:Microsoft.SqlServer.Replication.ReplicationObject.ConnectionContext%2A> property to the connection created in step 1.</span></span>   
3.  <span data-ttu-id="bdaa6-321">Чтобы получить оставшиеся свойства объекта, вызовите метод <xref:Microsoft.SqlServer.Replication.ReplicationObject.LoadProperties%2A> .</span><span class="sxs-lookup"><span data-stu-id="bdaa6-321">Call the <xref:Microsoft.SqlServer.Replication.ReplicationObject.LoadProperties%2A> method to get the remaining properties of the object.</span></span> <span data-ttu-id="bdaa6-322">Если этот метод возвращает `false`, то либо на шаге 2 были неверно определены свойства публикации, либо публикация не существует.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-322">If this method returns `false`, either the publication properties in step 2 were defined incorrectly or the publication does not exist.</span></span>    
4.  <span data-ttu-id="bdaa6-323">Вызовите метод <xref:Microsoft.SqlServer.Replication.TransPublication.ValidatePublication%2A> .</span><span class="sxs-lookup"><span data-stu-id="bdaa6-323">Call the <xref:Microsoft.SqlServer.Replication.TransPublication.ValidatePublication%2A> method.</span></span> <span data-ttu-id="bdaa6-324">Передайте следующие параметры:</span><span class="sxs-lookup"><span data-stu-id="bdaa6-324">Pass the following:</span></span>    
    -   <xref:Microsoft.SqlServer.Replication.ValidationOption>    
    -   <xref:Microsoft.SqlServer.Replication.ValidationMethod>    
    -   <span data-ttu-id="bdaa6-325">Логическое значение, указывающее, нужно ли прекращать выполнение агента распространителя после окончания проверки.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-325">A Boolean that indicates whether to stop the Distribution Agent after validation is completed.</span></span>  
  
     <span data-ttu-id="bdaa6-326">Будут отмечены статьи для проверки.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-326">This marks the articles for validation.</span></span>  
  
5.  <span data-ttu-id="bdaa6-327">Если агент распространителя еще не работает, запустите его для синхронизации каждой подписки.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-327">If not already running, start the Distribution Agent to synchronize each subscription.</span></span> <span data-ttu-id="bdaa6-328">Дополнительные сведения см. в разделе [Synchronize a Push Subscription](synchronize-a-push-subscription.md) или [Synchronize a Pull Subscription](synchronize-a-pull-subscription.md).</span><span class="sxs-lookup"><span data-stu-id="bdaa6-328">For more information, see [Synchronize a Push Subscription](synchronize-a-push-subscription.md) or [Synchronize a Pull Subscription](synchronize-a-pull-subscription.md).</span></span> <span data-ttu-id="bdaa6-329">Результат операции проверки записывается в журнал агента.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-329">The result of the validation operation is written to the agent history.</span></span> <span data-ttu-id="bdaa6-330">Дополнительные сведения см. в разделе [Monitoring Replication](monitoring-replication.md).</span><span class="sxs-lookup"><span data-stu-id="bdaa6-330">For more information, see [Monitoring Replication](monitoring-replication.md).</span></span>  
  
#### <a name="to-validate-data-in-all-subscriptions-to-a-merge-publication"></a><span data-ttu-id="bdaa6-331">Проверка данных всех подписок на публикацию слиянием</span><span class="sxs-lookup"><span data-stu-id="bdaa6-331">To validate data in all subscriptions to a merge publication</span></span>  
  
1.  <span data-ttu-id="bdaa6-332">Создайте соединение с издателем с помощью класса <xref:Microsoft.SqlServer.Management.Common.ServerConnection> .</span><span class="sxs-lookup"><span data-stu-id="bdaa6-332">Create a connection to the Publisher by using the <xref:Microsoft.SqlServer.Management.Common.ServerConnection> class.</span></span>   
2.  <span data-ttu-id="bdaa6-333">Создайте экземпляр класса <xref:Microsoft.SqlServer.Replication.MergePublication>.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-333">Create an instance of the <xref:Microsoft.SqlServer.Replication.MergePublication> class.</span></span> <span data-ttu-id="bdaa6-334">Установите для публикации свойства <xref:Microsoft.SqlServer.Replication.Publication.Name%2A> и <xref:Microsoft.SqlServer.Replication.Publication.DatabaseName%2A> .</span><span class="sxs-lookup"><span data-stu-id="bdaa6-334">Set the <xref:Microsoft.SqlServer.Replication.Publication.Name%2A> and <xref:Microsoft.SqlServer.Replication.Publication.DatabaseName%2A> properties for the publication.</span></span> <span data-ttu-id="bdaa6-335">В свойстве <xref:Microsoft.SqlServer.Replication.ReplicationObject.ConnectionContext%2A> укажите созданное на шаге 1 соединение.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-335">Set the <xref:Microsoft.SqlServer.Replication.ReplicationObject.ConnectionContext%2A> property to the connection created in step 1.</span></span>   
3.  <span data-ttu-id="bdaa6-336">Чтобы получить оставшиеся свойства объекта, вызовите метод <xref:Microsoft.SqlServer.Replication.ReplicationObject.LoadProperties%2A> .</span><span class="sxs-lookup"><span data-stu-id="bdaa6-336">Call the <xref:Microsoft.SqlServer.Replication.ReplicationObject.LoadProperties%2A> method to get the remaining properties of the object.</span></span> <span data-ttu-id="bdaa6-337">Если этот метод возвращает `false`, то либо на шаге 2 были неверно определены свойства публикации, либо публикация не существует.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-337">If this method returns `false`, either the publication properties in step 2 were defined incorrectly or the publication does not exist.</span></span>    
4.  <span data-ttu-id="bdaa6-338">Вызовите метод <xref:Microsoft.SqlServer.Replication.MergePublication.ValidatePublication%2A> .</span><span class="sxs-lookup"><span data-stu-id="bdaa6-338">Call the <xref:Microsoft.SqlServer.Replication.MergePublication.ValidatePublication%2A> method.</span></span> <span data-ttu-id="bdaa6-339">Передайте нужный параметр <xref:Microsoft.SqlServer.Replication.ValidationOption>.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-339">Pass the desired <xref:Microsoft.SqlServer.Replication.ValidationOption>.</span></span>    
5.  <span data-ttu-id="bdaa6-340">Выполните агент слияния для каждой подписки, чтобы начать проверку, или подождите следующего планового запуска агента.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-340">Run the Merge Agent for each subscription to start validation, or wait for the next scheduled agent run.</span></span> <span data-ttu-id="bdaa6-341">Дополнительные сведения см. в разделах [Synchronize a Pull Subscription](synchronize-a-pull-subscription.md) и [Synchronize a Push Subscription](synchronize-a-push-subscription.md).</span><span class="sxs-lookup"><span data-stu-id="bdaa6-341">For more information, see [Synchronize a Pull Subscription](synchronize-a-pull-subscription.md) and [Synchronize a Push Subscription](synchronize-a-push-subscription.md).</span></span> <span data-ttu-id="bdaa6-342">Результат проверки записывается в журнал агента, который можно просмотреть с помощью монитора репликации.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-342">The result of the validation operation is written to the agent history, which you view by using Replication Monitor.</span></span> <span data-ttu-id="bdaa6-343">Дополнительные сведения см. в разделе [Monitoring Replication](monitoring-replication.md).</span><span class="sxs-lookup"><span data-stu-id="bdaa6-343">For more information, see [Monitoring Replication](monitoring-replication.md).</span></span>  
  
#### <a name="to-validate-data-in-a-single-subscription-to-a-merge-publication"></a><span data-ttu-id="bdaa6-344">Проверка данных в одной подписке на публикацию слиянием</span><span class="sxs-lookup"><span data-stu-id="bdaa6-344">To validate data in a single subscription to a merge publication</span></span>  
  
1.  <span data-ttu-id="bdaa6-345">Создайте соединение с издателем с помощью класса <xref:Microsoft.SqlServer.Management.Common.ServerConnection> .</span><span class="sxs-lookup"><span data-stu-id="bdaa6-345">Create a connection to the Publisher by using the <xref:Microsoft.SqlServer.Management.Common.ServerConnection> class.</span></span>    
2.  <span data-ttu-id="bdaa6-346">Создайте экземпляр класса <xref:Microsoft.SqlServer.Replication.MergePublication>.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-346">Create an instance of the <xref:Microsoft.SqlServer.Replication.MergePublication> class.</span></span> <span data-ttu-id="bdaa6-347">Установите для публикации свойства <xref:Microsoft.SqlServer.Replication.Publication.Name%2A> и <xref:Microsoft.SqlServer.Replication.Publication.DatabaseName%2A> .</span><span class="sxs-lookup"><span data-stu-id="bdaa6-347">Set the <xref:Microsoft.SqlServer.Replication.Publication.Name%2A> and <xref:Microsoft.SqlServer.Replication.Publication.DatabaseName%2A> properties for the publication.</span></span> <span data-ttu-id="bdaa6-348">В свойстве <xref:Microsoft.SqlServer.Replication.ReplicationObject.ConnectionContext%2A> укажите созданное на шаге 1 соединение.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-348">Set the <xref:Microsoft.SqlServer.Replication.ReplicationObject.ConnectionContext%2A> property to the connection created in step 1.</span></span>    
3.  <span data-ttu-id="bdaa6-349">Чтобы получить оставшиеся свойства объекта, вызовите метод <xref:Microsoft.SqlServer.Replication.ReplicationObject.LoadProperties%2A> .</span><span class="sxs-lookup"><span data-stu-id="bdaa6-349">Call the <xref:Microsoft.SqlServer.Replication.ReplicationObject.LoadProperties%2A> method to get the remaining properties of the object.</span></span> <span data-ttu-id="bdaa6-350">Если этот метод возвращает `false`, то либо на шаге 2 были неверно определены свойства публикации, либо публикация не существует.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-350">If this method returns `false`, either the publication properties in step 2 were defined incorrectly or the publication does not exist.</span></span>    
4.  <span data-ttu-id="bdaa6-351">Вызовите метод <xref:Microsoft.SqlServer.Replication.MergePublication.ValidateSubscription%2A> .</span><span class="sxs-lookup"><span data-stu-id="bdaa6-351">Call the <xref:Microsoft.SqlServer.Replication.MergePublication.ValidateSubscription%2A> method.</span></span> <span data-ttu-id="bdaa6-352">Передайте имя подписчика, проверяемую базу данных подписки и нужный параметр <xref:Microsoft.SqlServer.Replication.ValidationOption>.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-352">Pass the name of the Subscriber and subscription database being validated and the desired <xref:Microsoft.SqlServer.Replication.ValidationOption>.</span></span>    
5.  <span data-ttu-id="bdaa6-353">Выполните агент слияния для каждой подписки, чтобы начать проверку, или подождите следующего планового запуска агента.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-353">Run the Merge Agent for the subscription to start validation, or wait for the next scheduled agent run.</span></span> <span data-ttu-id="bdaa6-354">Дополнительные сведения см. в разделах [Synchronize a Pull Subscription](synchronize-a-pull-subscription.md) и [Synchronize a Push Subscription](synchronize-a-push-subscription.md).</span><span class="sxs-lookup"><span data-stu-id="bdaa6-354">For more information, see [Synchronize a Pull Subscription](synchronize-a-pull-subscription.md) and [Synchronize a Push Subscription](synchronize-a-push-subscription.md).</span></span> <span data-ttu-id="bdaa6-355">Результат проверки записывается в журнал агента, который можно просмотреть с помощью монитора репликации.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-355">The result of the validation operation is written to the agent history, which you view by using Replication Monitor.</span></span> <span data-ttu-id="bdaa6-356">Дополнительные сведения см. в разделе [Monitoring Replication](monitoring-replication.md).</span><span class="sxs-lookup"><span data-stu-id="bdaa6-356">For more information, see [Monitoring Replication](monitoring-replication.md).</span></span>  
  
###  <a name="example-rmo"></a><a name="RMOExample"></a> <span data-ttu-id="bdaa6-357">Пример (объекты RMO)</span><span class="sxs-lookup"><span data-stu-id="bdaa6-357">Example (RMO)</span></span>  
 <span data-ttu-id="bdaa6-358">В этом примере помечаются все подписки на публикацию транзакций для проверки количества строк.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-358">This example marks all subscriptions to a transactional publication for rowcount validation.</span></span>  
  
 [!code-csharp[HowTo#rmo_ValidateTranPub](../../snippets/csharp/SQL15/replication/howto/cs/rmotestevelope.cs#rmo_validatetranpub)]  
  
 [!code-vb[HowTo#rmo_vb_ValidateTranPub](../../snippets/visualbasic/SQL15/replication/howto/vb/rmotestenv.vb#rmo_vb_validatetranpub)]  
  
 <span data-ttu-id="bdaa6-359">В этом примере помечается определенная подписка на публикацию слиянием для проверки количества строк.</span><span class="sxs-lookup"><span data-stu-id="bdaa6-359">This example marks a specific subscription to a merge publication for rowcount validation.</span></span>  
  
 [!code-csharp[HowTo#rmo_ValidateMergeSub](../../snippets/csharp/SQL15/replication/howto/cs/rmotestevelope.cs#rmo_validatemergesub)]  
  
 [!code-vb[HowTo#rmo_vb_ValidateMergeSub](../../snippets/visualbasic/SQL15/replication/howto/vb/rmotestenv.vb#rmo_vb_validatemergesub)]  
  
  
