---
title: Регулятор ресурсов | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: performance
ms.topic: conceptual
helpviewer_keywords:
- Resource Governor, overview
- Resource Governor
ms.assetid: 2bc89b66-e801-45ba-b30d-8ed197052212
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 7660446a176b9535883a001318c8f8fc981f99c1
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87731450"
---
# <a name="resource-governor"></a><span data-ttu-id="a6574-102">Resource Governor</span><span class="sxs-lookup"><span data-stu-id="a6574-102">Resource Governor</span></span>
  <span data-ttu-id="a6574-103">Регулятор ресурсов [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] — это компонент, предназначенный для управления рабочей нагрузкой [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] и использованием системных ресурсов.</span><span class="sxs-lookup"><span data-stu-id="a6574-103">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Resource Governor is a feature than you can use to manage [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] workload and system resource consumption.</span></span> <span data-ttu-id="a6574-104">Resource Governor позволяет задать ограничения на объем ресурсов ЦП, памяти и количество физических операций ввода-вывода, которые могут использоваться для входящих запросов приложений.</span><span class="sxs-lookup"><span data-stu-id="a6574-104">Resource Governor enables you to specify limits on the amount of CPU, physical IO, and memory that incoming application requests can use.</span></span>  
  
## <a name="benefits-of-resource-governor"></a><span data-ttu-id="a6574-105">Преимущества регулятора ресурсов</span><span class="sxs-lookup"><span data-stu-id="a6574-105">Benefits of Resource Governor</span></span>  
 <span data-ttu-id="a6574-106">Регулятор ресурсов позволяет управлять рабочими нагрузками и ресурсами [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] путем задания лимитов на потребление ресурсов входящими запросами.</span><span class="sxs-lookup"><span data-stu-id="a6574-106">Resource Governor enables you to manage [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] workloads and resources by specifying limits on resource consumption by incoming requests.</span></span> <span data-ttu-id="a6574-107">В контексте регулятора ресурсов рабочая нагрузка представляет собой набор запросов приблизительно одинакового размера, которые могут и должны обрабатываться как единая сущность.</span><span class="sxs-lookup"><span data-stu-id="a6574-107">In the Resource Governor context, workload is a set of similarly sized queries or requests that can, and should be, treated as a single entity.</span></span> <span data-ttu-id="a6574-108">Это не жесткое требование, но чем однообразнее выглядит шаблон использования ресурсов рабочей нагрузки, тем больше преимуществ можно извлечь из регулятора ресурсов.</span><span class="sxs-lookup"><span data-stu-id="a6574-108">This is not a requirement, but the more uniform the resource usage pattern of a workload is, the more benefit you are likely to derive from Resource Governor.</span></span> <span data-ttu-id="a6574-109">Ограничения на ресурсы можно перенастроить в режиме реального времени, при этом воздействие на выполняемую рабочую нагрузку остается минимальным.</span><span class="sxs-lookup"><span data-stu-id="a6574-109">Resource limits can be reconfigured in real time with minimal impact on workloads that are executing.</span></span>  
  
 <span data-ttu-id="a6574-110">В среде, имеющей несколько различных рабочих нагрузок на одном и том же сервере, регулятор ресурсов позволяет различать эти рабочие нагрузки и распределять общие ресурсы по мере запросов в зависимости от установленных ограничений.</span><span class="sxs-lookup"><span data-stu-id="a6574-110">In an environment where multiple distinct workloads are present on the same server, Resource Governor enables you to differentiate these workloads and allocate shared resources as they are requested, based on the limits that you specify.</span></span> <span data-ttu-id="a6574-111">Эти ресурсы — ЦП, память и физические операции ввода-вывода.</span><span class="sxs-lookup"><span data-stu-id="a6574-111">These resources are CPU, physical IO, and memory.</span></span>  
  
 <span data-ttu-id="a6574-112">С помощью регулятора ресурсов можно выполнить следующее.</span><span class="sxs-lookup"><span data-stu-id="a6574-112">By using Resource Governor, you can:</span></span>  
  
-   <span data-ttu-id="a6574-113">Обеспечить облуживание многих клиентов и изоляцию ресурсов на одиночных экземплярах SQL Server, обслуживающих несколько клиентских рабочих нагрузок.</span><span class="sxs-lookup"><span data-stu-id="a6574-113">Provide multitenancy and resource isolation on single instances of SQL Server that serve multiple client workloads.</span></span> <span data-ttu-id="a6574-114">То есть можно разделить доступные ресурсы сервера среди рабочих нагрузок, минимизировав проблемы, которые могут возникнуть при конкуренции рабочих нагрузок за ресурсы.</span><span class="sxs-lookup"><span data-stu-id="a6574-114">That is, you can divide the available resources on a server among the workloads and minimize the problems that can occur when workloads compete for resources.</span></span>  
  
-   <span data-ttu-id="a6574-115">Предоставить прогнозируемую производительность и поддержку соглашений об уровне обслуживания для клиентов рабочих нагрузок в среде с несколькими рабочими нагрузками и несколькими пользователями.</span><span class="sxs-lookup"><span data-stu-id="a6574-115">Provide predictable performance and support SLAs for workload tenants in a multi-workload and multi-user environment.</span></span>  
  
-   <span data-ttu-id="a6574-116">Изолировать и ограничивать неконтролируемые запросы и регулировать ресурсы ввода-вывода для таких операций, как DBCC CHECKDB, способных занять всю производительность подсистемы ввода-вывода и негативно повлиять на другие рабочие нагрузки.</span><span class="sxs-lookup"><span data-stu-id="a6574-116">Isolate and limit runaway queries or throttle IO resources for operations such as DBCC CHECKDB that can saturate the IO subsystem and negatively impact other workloads.</span></span>  
  
-   <span data-ttu-id="a6574-117">Добавить детализированное отслеживание ресурсов для возврата платежей за использование ресурсов и предоставлять прогнозируемое выставление счетов потребителям ресурсов сервера.</span><span class="sxs-lookup"><span data-stu-id="a6574-117">Add fine-grained resource tracking for resource usage chargebacks and provide predictable billing to the consumers of the server resources.</span></span>  
  
## <a name="resource-governor-constraints"></a><span data-ttu-id="a6574-118">Ограничения регулятора ресурсов</span><span class="sxs-lookup"><span data-stu-id="a6574-118">Resource Governor Constraints</span></span>  
 <span data-ttu-id="a6574-119">В данном выпуске регулятора ресурсов имеются следующие ограничения.</span><span class="sxs-lookup"><span data-stu-id="a6574-119">This release of Resource Governor has the following constraints:</span></span>  
  
-   <span data-ttu-id="a6574-120">Управление ресурсами ограничено компонентом [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="a6574-120">Resource management is limited to the [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)].</span></span> <span data-ttu-id="a6574-121">Использование регулятора ресурсов для служб [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)], [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)]и [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)]невозможно.</span><span class="sxs-lookup"><span data-stu-id="a6574-121">Resource Governor can not be used for [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)], [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)], and [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)].</span></span>  
  
-   <span data-ttu-id="a6574-122">Наблюдение за рабочей нагрузкой и управление рабочими нагрузками между экземплярами SQL Server не предусмотрены.</span><span class="sxs-lookup"><span data-stu-id="a6574-122">There is no workload monitoring or workload management between SQL Server instances.</span></span>  
  
-   <span data-ttu-id="a6574-123">Управление рабочими нагрузками OLTP с помощью регулятора ресурсов возможно, но данные типы запросов, как правило, непродолжительные, не всегда находятся в ЦП настолько долго, чтобы к ним можно было применить средства управления пропускной способностью.</span><span class="sxs-lookup"><span data-stu-id="a6574-123">Resource Governor can manage OLTP workloads but these types of queries, which are typically very short in duration, are not always on the CPU long enough to apply bandwidth controls.</span></span> <span data-ttu-id="a6574-124">Это может привести к искажению возвращаемых статистических данных по загрузке ЦП.</span><span class="sxs-lookup"><span data-stu-id="a6574-124">This may skew in the statistics returned for CPU usage %.</span></span>  
  
-   <span data-ttu-id="a6574-125">Возможность администрирования физического ввода-вывода относится только к операциям пользователя, но не к задачам системы.</span><span class="sxs-lookup"><span data-stu-id="a6574-125">The ability to govern physical IO only applies to user operations and not system tasks.</span></span> <span data-ttu-id="a6574-126">К системным задачам относятся операции записи в журнал транзакций и операции отложенного ввода-вывода модуля отложенной записи.</span><span class="sxs-lookup"><span data-stu-id="a6574-126">System tasks include write operations to the transaction log and Lazy Writer IO operations.</span></span> <span data-ttu-id="a6574-127">Регулятор ресурсов работает главным образом с пользовательскими операциями чтения, так как большинство операций записи обычно выполняются системными задачами.</span><span class="sxs-lookup"><span data-stu-id="a6574-127">The Resource Govenor applies primarily to user read operations because most write operations are typically performed by system tasks.</span></span>  
  
-   <span data-ttu-id="a6574-128">Нельзя задать пороговые значения ввода-вывода на внутреннем пуле ресурсов.</span><span class="sxs-lookup"><span data-stu-id="a6574-128">You cannot set IO thresholds on the internal resource pool.</span></span>  
  
## <a name="resource-concepts"></a><span data-ttu-id="a6574-129">Основные понятия ресурсов</span><span class="sxs-lookup"><span data-stu-id="a6574-129">Resource Concepts</span></span>  
 <span data-ttu-id="a6574-130">Приведенные ниже три понятия лежат в основе понимания работы регулятора ресурсов.</span><span class="sxs-lookup"><span data-stu-id="a6574-130">The following three concepts are fundamental to understanding and using Resource Governor:</span></span>  
  
-   <span data-ttu-id="a6574-131">**Пулы ресурсов.**</span><span class="sxs-lookup"><span data-stu-id="a6574-131">**Resource pools.**</span></span> <span data-ttu-id="a6574-132">Пул ресурсов представляет физические ресурсы сервера.</span><span class="sxs-lookup"><span data-stu-id="a6574-132">A resource pool, represents the physical resources of the server.</span></span> <span data-ttu-id="a6574-133">Пул можно считать виртуальным экземпляром [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] внутри экземпляра [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="a6574-133">You can think of a pool as a virtual [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance inside of a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance.</span></span> <span data-ttu-id="a6574-134">При установке [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] создается два пула ресурсов (внутренний и по умолчанию).</span><span class="sxs-lookup"><span data-stu-id="a6574-134">Two resource pools (internal and default) are created when [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] is installed.</span></span> <span data-ttu-id="a6574-135">Кроме того, регулятор ресурсов поддерживает определяемые пользователями пулы ресурсов.</span><span class="sxs-lookup"><span data-stu-id="a6574-135">Resource Governor also supports user-defined resource pools.</span></span> <span data-ttu-id="a6574-136">Дополнительные сведения см. в разделе [Resource Governor Resource Pool](resource-governor-resource-pool.md).</span><span class="sxs-lookup"><span data-stu-id="a6574-136">For more information, see [Resource Governor Resource Pool](resource-governor-resource-pool.md).</span></span>  
  
-   <span data-ttu-id="a6574-137">**Группы рабочей нагрузки.**</span><span class="sxs-lookup"><span data-stu-id="a6574-137">**Workload groups.**</span></span> <span data-ttu-id="a6574-138">Группа рабочей нагрузки выступает в качестве контейнера для запросов сеансов, имеющих подобные критерии классификации.</span><span class="sxs-lookup"><span data-stu-id="a6574-138">A workload group serves as a container for session requests that have similar classification criteria.</span></span> <span data-ttu-id="a6574-139">Рабочая нагрузка обеспечивает статистический мониторинг сеансов и определяет политики для сеансов.</span><span class="sxs-lookup"><span data-stu-id="a6574-139">A workload allows for aggregate monitoring of the sessions, and defines policies for the sessions.</span></span> <span data-ttu-id="a6574-140">Каждая группа рабочей нагрузки существует в пуле ресурсов.</span><span class="sxs-lookup"><span data-stu-id="a6574-140">Each workload group is in a resource pool.</span></span> <span data-ttu-id="a6574-141">При установке [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] создается две группы рабочей нагрузки (внутренняя и по умолчанию), которые сопоставляются с соответствующими пулами ресурсов.</span><span class="sxs-lookup"><span data-stu-id="a6574-141">Two workload groups (internal and default) are created and mapped to their corresponding resource pools when [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] is installed.</span></span> <span data-ttu-id="a6574-142">Кроме того, регулятор ресурсов поддерживает определяемые пользователями группы рабочей нагрузки.</span><span class="sxs-lookup"><span data-stu-id="a6574-142">Resource Governor also supports user-defined workload groups.</span></span> <span data-ttu-id="a6574-143">Дополнительные сведения см. в разделе [Resource Governor Workload Group](resource-governor-workload-group.md).</span><span class="sxs-lookup"><span data-stu-id="a6574-143">For more information see, [Resource Governor Workload Group](resource-governor-workload-group.md).</span></span>  
  
-   <span data-ttu-id="a6574-144">**Классификация.**</span><span class="sxs-lookup"><span data-stu-id="a6574-144">**Classification.**</span></span> <span data-ttu-id="a6574-145">Процесс классификации назначает входящие сеансы группе рабочей нагрузки с учетом характеристик сеанса.</span><span class="sxs-lookup"><span data-stu-id="a6574-145">The Classification process assigns incoming sessions to a workload group based on the characteristics of the session.</span></span> <span data-ttu-id="a6574-146">Логику классификации можно адаптировать путем написания определяемой пользователем функции, называемой функцией-классификатором.</span><span class="sxs-lookup"><span data-stu-id="a6574-146">You can tailor the classification logic by writing a user-defined function, called a classifier function.</span></span> <span data-ttu-id="a6574-147">Кроме того, регулятор ресурсов поддерживает определяемую пользователем функцию-классификатор для реализации правил классификации.</span><span class="sxs-lookup"><span data-stu-id="a6574-147">Resource Governor also supports a classifier user-defined function for implementing classification rules.</span></span> <span data-ttu-id="a6574-148">Дополнительные сведения см. в разделе [Resource Governor Classifier Function](resource-governor-classifier-function.md).</span><span class="sxs-lookup"><span data-stu-id="a6574-148">For more information, see [Resource Governor Classifier Function](resource-governor-classifier-function.md).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="a6574-149">Регулятор ресурсов никак не управляет выделенным административным соединением.</span><span class="sxs-lookup"><span data-stu-id="a6574-149">Resource Governor does not impose any controls on a dedicated administrator connection (DAC).</span></span> <span data-ttu-id="a6574-150">Нет необходимости классифицировать запросы выделенного административного соединения, которые выполняются во внутренней группе рабочей нагрузки и пуле ресурсов.</span><span class="sxs-lookup"><span data-stu-id="a6574-150">There is no need to classify DAC queries, which run in the internal workload group and resource pool.</span></span>  
  
 <span data-ttu-id="a6574-151">В контексте регулятора ресурсов можно обрабатывать описанные выше понятия как компоненты.</span><span class="sxs-lookup"><span data-stu-id="a6574-151">In the context of Resource Governor, you can treat the preceding concepts as components.</span></span> <span data-ttu-id="a6574-152">На следующей иллюстрации показаны эти компоненты и отношения между ними в среде компонента Database Engine.</span><span class="sxs-lookup"><span data-stu-id="a6574-152">The following illustration shows these components and their relationship with each other as they exist in the database engine environment.</span></span> <span data-ttu-id="a6574-153">С точки зрения обработки упрощенный поток выглядит следующим образом.</span><span class="sxs-lookup"><span data-stu-id="a6574-153">From a processing perspective, the simplified flow is as follows:</span></span>  
  
-   <span data-ttu-id="a6574-154">Имеется входящее соединение с сеансом (сеанс 1 из *n*).</span><span class="sxs-lookup"><span data-stu-id="a6574-154">There is an incoming connection for a session (Session 1 of *n*).</span></span>  
  
-   <span data-ttu-id="a6574-155">Сеанс классифицирован (классификация).</span><span class="sxs-lookup"><span data-stu-id="a6574-155">The session is classified (Classification).</span></span>  
  
-   <span data-ttu-id="a6574-156">Рабочая нагрузка сеанса направляется в группу рабочей нагрузки, например в группу 4.</span><span class="sxs-lookup"><span data-stu-id="a6574-156">The session workload is routed to a workload group, for example, Group 4.</span></span>  
  
-   <span data-ttu-id="a6574-157">Группа рабочей нагрузки использует пул ресурсов, с которым она связана, например Пул 2.</span><span class="sxs-lookup"><span data-stu-id="a6574-157">The workload group uses the resource pool it is associated with, for example, Pool 2.</span></span>  
  
-   <span data-ttu-id="a6574-158">Пул ресурсов предоставляет или ограничивает доступ к ресурсам, которые требуются приложению, например Приложению 3.</span><span class="sxs-lookup"><span data-stu-id="a6574-158">The resource pool provides and limits the resources required by the application, for example, Application 3.</span></span>  
  
 <span data-ttu-id="a6574-159">![Функциональные компоненты регулятора ресурсов](../../database-engine/media/rg-basic-funct-components.gif "Функциональные компоненты регулятора ресурсов")</span><span class="sxs-lookup"><span data-stu-id="a6574-159">![Resource Governor Functional Components](../../database-engine/media/rg-basic-funct-components.gif "Resource Governor Functional Components")</span></span>  
  
## <a name="resource-governor-tasks"></a><span data-ttu-id="a6574-160">Задачи регулятора ресурсов</span><span class="sxs-lookup"><span data-stu-id="a6574-160">Resource Governor Tasks</span></span>  
  
|<span data-ttu-id="a6574-161">Описание задачи</span><span class="sxs-lookup"><span data-stu-id="a6574-161">Task Description</span></span>|<span data-ttu-id="a6574-162">Раздел</span><span class="sxs-lookup"><span data-stu-id="a6574-162">Topic</span></span>|  
|----------------------|-----------|  
|<span data-ttu-id="a6574-163">Описывает, как включить регулятор ресурсов.</span><span class="sxs-lookup"><span data-stu-id="a6574-163">Describes how to enable Resource Governor.</span></span>|[<span data-ttu-id="a6574-164">Включение регулятора ресурсов</span><span class="sxs-lookup"><span data-stu-id="a6574-164">Enable Resource Governor</span></span>](resource-governor.md)|  
|<span data-ttu-id="a6574-165">Описывает, как отключить регулятор ресурсов.</span><span class="sxs-lookup"><span data-stu-id="a6574-165">Describes how to disable Resource Governor.</span></span>|[<span data-ttu-id="a6574-166">Отключение регулятора ресурсов</span><span class="sxs-lookup"><span data-stu-id="a6574-166">Disable Resource Governor</span></span>](disable-resource-governor.md)|  
|<span data-ttu-id="a6574-167">Описывает, как создать, изменить и удалить пул ресурсов.</span><span class="sxs-lookup"><span data-stu-id="a6574-167">Describes how to create, alter, and drop a resource pool.</span></span>|[<span data-ttu-id="a6574-168">Пул ресурсов регулятора ресурсов</span><span class="sxs-lookup"><span data-stu-id="a6574-168">Resource Governor Resource Pool</span></span>](resource-governor-resource-pool.md)|  
|<span data-ttu-id="a6574-169">Описывает, как создать, изменить, переместить и удалить группу рабочей нагрузки</span><span class="sxs-lookup"><span data-stu-id="a6574-169">Describes how to create, alter, move, and drop a workload group.</span></span>|[<span data-ttu-id="a6574-170">Группа рабочей нагрузки регулятора ресурсов</span><span class="sxs-lookup"><span data-stu-id="a6574-170">Resource Governor Workload Group</span></span>](resource-governor-workload-group.md)|  
|<span data-ttu-id="a6574-171">Описывает, как создать и проверить определяемую пользователем функцию-классификатор.</span><span class="sxs-lookup"><span data-stu-id="a6574-171">Describes how to create and test a classifier user-defined function.</span></span>|[<span data-ttu-id="a6574-172">Функция-классификатор регулятора ресурсов</span><span class="sxs-lookup"><span data-stu-id="a6574-172">Resource Governor Classifier Function</span></span>](resource-governor-classifier-function.md)|  
|<span data-ttu-id="a6574-173">Описывает, как настроить регулятор ресурсов с использованием шаблона.</span><span class="sxs-lookup"><span data-stu-id="a6574-173">Describes how to configure Resource Governor using a template.</span></span>|[<span data-ttu-id="a6574-174">Настройка регулятора ресурсов с помощью шаблона</span><span class="sxs-lookup"><span data-stu-id="a6574-174">Configure Resource Governor Using a Template</span></span>](configure-resource-governor-using-a-template.md)|  
|<span data-ttu-id="a6574-175">Описывает, как просматривать свойства регулятора ресурсов.</span><span class="sxs-lookup"><span data-stu-id="a6574-175">Describes how to view Resource Governor properties.</span></span>|[<span data-ttu-id="a6574-176">Просмотр свойств регулятора ресурсов</span><span class="sxs-lookup"><span data-stu-id="a6574-176">View Resource Governor Properties</span></span>](view-resource-governor-properties.md)|  
  
## <a name="see-also"></a><span data-ttu-id="a6574-177">См. также:</span><span class="sxs-lookup"><span data-stu-id="a6574-177">See Also</span></span>  
 [<span data-ttu-id="a6574-178">Экземпляры компонента Database Engine (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="a6574-178">Database Engine Instances &#40;SQL Server&#41;</span></span>](../../database-engine/configure-windows/database-engine-instances-sql-server.md)  
  
  
