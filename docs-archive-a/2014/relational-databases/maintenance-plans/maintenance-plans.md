---
title: Планы обслуживания | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: supportability
ms.topic: conceptual
f1_keywords:
- SQL12.AG.MAINTPLAN.LEGACY.F1
helpviewer_keywords:
- maintenance plans [SQL Server], about database maintenance plans
- maintenance plans [SQL Server], database compatibility level displayed in designer
- maintenance plans [SQL Server]
ms.assetid: 5982ca65-74fe-44e3-aef9-00a65a0db169
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 2f614e2cfad78cb1efddc49cc897ca57087fec68
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87654267"
---
# <a name="maintenance-plans"></a><span data-ttu-id="eb5a8-102">Планы обслуживания</span><span class="sxs-lookup"><span data-stu-id="eb5a8-102">Maintenance Plans</span></span>
  <span data-ttu-id="eb5a8-103">Планы обслуживания используются для создания рабочего процесса из задач, необходимых для гарантии оптимальной производительности базы данных, ее регулярного резервного копирования и отсутствия в ней несогласованностей.</span><span class="sxs-lookup"><span data-stu-id="eb5a8-103">Maintenance plans create a workflow of the tasks required to make sure that your database is optimized, regularly backed up, and free of inconsistencies.</span></span> <span data-ttu-id="eb5a8-104">Для создания основных планов обслуживания также можно использовать мастер планов обслуживания, однако создание планов вручную более эффективно.</span><span class="sxs-lookup"><span data-stu-id="eb5a8-104">The Maintenance Plan Wizard also creates core maintenance plans, but creating plans manually gives you much more flexibility.</span></span>  
  
## <a name="benefits-of-maintenance-plans"></a><span data-ttu-id="eb5a8-105">Преимущества планов обслуживания</span><span class="sxs-lookup"><span data-stu-id="eb5a8-105">Benefits of Maintenance Plans</span></span>  
 <span data-ttu-id="eb5a8-106">В компоненте [!INCLUDE[ssDECurrent](../../includes/ssdecurrent-md.md)]планы обслуживания создают пакет служб [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] , выполняемый заданием агента [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="eb5a8-106">In [!INCLUDE[ssDECurrent](../../includes/ssdecurrent-md.md)], maintenance plans create an [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] package, which is run by a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent job.</span></span> <span data-ttu-id="eb5a8-107">Планы обслуживания можно запускать вручную или автоматически через заданные интервалы.</span><span class="sxs-lookup"><span data-stu-id="eb5a8-107">Maintenance plans can be run manually or automatically at scheduled intervals.</span></span>  
  
 <span data-ttu-id="eb5a8-108">Планы обслуживания [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] обеспечивают следующие функциональные возможности.</span><span class="sxs-lookup"><span data-stu-id="eb5a8-108">[!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] maintenance plans provide the following features:</span></span>  
  
-   <span data-ttu-id="eb5a8-109">Создание рабочего процесса различных типовых задач обслуживания.</span><span class="sxs-lookup"><span data-stu-id="eb5a8-109">Workflow creation using a variety of typical maintenance tasks.</span></span> <span data-ttu-id="eb5a8-110">Можно создавать и пользовательские скрипты [!INCLUDE[tsql](../../includes/tsql-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="eb5a8-110">You can also create your own custom [!INCLUDE[tsql](../../includes/tsql-md.md)] scripts.</span></span>  
  
-   <span data-ttu-id="eb5a8-111">Концептуальные иерархии.</span><span class="sxs-lookup"><span data-stu-id="eb5a8-111">Conceptual hierarchies.</span></span> <span data-ttu-id="eb5a8-112">Каждый план позволяет создавать и редактировать рабочий процесс.</span><span class="sxs-lookup"><span data-stu-id="eb5a8-112">Each plan lets you create or edit task workflows.</span></span> <span data-ttu-id="eb5a8-113">Задачи в каждом плане можно сгруппировать во вложенные планы, которым можно назначить запуск на разные моменты времени.</span><span class="sxs-lookup"><span data-stu-id="eb5a8-113">Tasks in each plan can be grouped into subplans, which can be scheduled to run at different times.</span></span>  
  
-   <span data-ttu-id="eb5a8-114">Поддержка многосерверных планов может использоваться в среде главного или целевого сервера.</span><span class="sxs-lookup"><span data-stu-id="eb5a8-114">Support for multiserver plans that can be used in master server/target server environments.</span></span>  
  
-   <span data-ttu-id="eb5a8-115">Поддержка ведения журналов планов на удаленных серверах.</span><span class="sxs-lookup"><span data-stu-id="eb5a8-115">Support for logging plan history to remote servers.</span></span>  
  
-   <span data-ttu-id="eb5a8-116">Поддержка проверки подлинности Windows и проверки подлинности [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="eb5a8-116">Support for Windows Authentication and [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Authentication.</span></span> [!INCLUDE[ssNoteWinAuthentication](../../includes/ssnotewinauthentication-md.md)]  
  
## <a name="maintenace-plan-functionality"></a><span data-ttu-id="eb5a8-117">Функции плана обслуживания</span><span class="sxs-lookup"><span data-stu-id="eb5a8-117">Maintenace Plan Functionality</span></span>  
 <span data-ttu-id="eb5a8-118">Планы обслуживания можно создавать для выполнения следующих задач.</span><span class="sxs-lookup"><span data-stu-id="eb5a8-118">Maintenance plans can be created to perform the following tasks:</span></span>  
  
-   <span data-ttu-id="eb5a8-119">Реорганизация данных на страницах данных и индексов путем перестроения индексов с новым коэффициентом заполнения.</span><span class="sxs-lookup"><span data-stu-id="eb5a8-119">Reorganize the data on the data and index pages by rebuilding indexes with a new fill factor.</span></span> <span data-ttu-id="eb5a8-120">Перестроение индексов с новым коэффициентом заполнения обеспечивает одинаковое распределение объема данных и свободного пространства на страницах базы данных.</span><span class="sxs-lookup"><span data-stu-id="eb5a8-120">Rebuilding indexes with a new fill factor makes sure that database pages contain an equally distributed amount of data and free space.</span></span> <span data-ttu-id="eb5a8-121">Кроме того, при этом обеспечивается более быстрое увеличение размера в будущем.</span><span class="sxs-lookup"><span data-stu-id="eb5a8-121">It also enables faster growth in the future.</span></span> <span data-ttu-id="eb5a8-122">Дополнительные сведения см. в статье [Указание коэффициента заполнения для индекса](../indexes/specify-fill-factor-for-an-index.md).</span><span class="sxs-lookup"><span data-stu-id="eb5a8-122">For more information, see [Specify Fill Factor for an Index](../indexes/specify-fill-factor-for-an-index.md).</span></span>  
  
-   <span data-ttu-id="eb5a8-123">Сжатие файлов данных путем удаления пустых страниц базы данных.</span><span class="sxs-lookup"><span data-stu-id="eb5a8-123">Compress data files by removing empty database pages.</span></span>  
  
-   <span data-ttu-id="eb5a8-124">Обновление статистики индекса, обеспечивающее оптимизатору запросов новейшие сведения о распределении значений данных в таблицах.</span><span class="sxs-lookup"><span data-stu-id="eb5a8-124">Update index statistics to make sure the query optimizer has current information about the distribution of data values in the tables.</span></span> <span data-ttu-id="eb5a8-125">Это позволяет оптимизатору запросов делать более качественные суждения по поводу выбора наилучшего способа доступа к данным, так как ему предоставляется больше информации о данных, хранящихся в базе данных.</span><span class="sxs-lookup"><span data-stu-id="eb5a8-125">This enables the query optimizer to make better judgments about the best way to access data, because it has more information about the data stored in the database.</span></span> <span data-ttu-id="eb5a8-126">Хотя статистика индекса обновляется компонентом [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] автоматически и периодически, этот параметр может привести к немедленному обновлению статистики.</span><span class="sxs-lookup"><span data-stu-id="eb5a8-126">Although index statistics are automatically updated by [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] periodically, this option can force the statistics to update immediately.</span></span>  
  
-   <span data-ttu-id="eb5a8-127">Проверка данных и страниц данных внутри базы данных на внутреннюю согласованность, позволяющая определить целостность данных после сбоя системы или программного обеспечения.</span><span class="sxs-lookup"><span data-stu-id="eb5a8-127">Perform internal consistency checks of the data and data pages within the database to make sure that a system or software problem has not damaged data.</span></span>  
  
-   <span data-ttu-id="eb5a8-128">Создание резервных копий файлов базы данных и журналов транзакций.</span><span class="sxs-lookup"><span data-stu-id="eb5a8-128">Back up the database and transaction log files.</span></span> <span data-ttu-id="eb5a8-129">Резервные копии базы данных и журнала могут храниться в течение заданного времени.</span><span class="sxs-lookup"><span data-stu-id="eb5a8-129">Database and log backups can be retained for a specified period.</span></span> <span data-ttu-id="eb5a8-130">Это позволяет создавать историю резервных копий, которые могут быть использованы, если нужно восстановить базу данных на момент, предшествующий моменту создания последней резервной копии базы данных.</span><span class="sxs-lookup"><span data-stu-id="eb5a8-130">This lets you create a history of backups to be used if you have to restore the database to a time earlier than the last database backup.</span></span> <span data-ttu-id="eb5a8-131">Также можно создавать разностные резервные копии.</span><span class="sxs-lookup"><span data-stu-id="eb5a8-131">You can also perform differential backups.</span></span>  
  
-   <span data-ttu-id="eb5a8-132">Выполнение заданий агента [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="eb5a8-132">Run [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent jobs.</span></span> <span data-ttu-id="eb5a8-133">Может использоваться для создания заданий, которые выполняют разнообразные действия, а также планов обслуживания для выполнения этих заданий.</span><span class="sxs-lookup"><span data-stu-id="eb5a8-133">This can be used to create jobs that perform a variety of actions and the maintenance plans to run those jobs.</span></span>  
  
 <span data-ttu-id="eb5a8-134">Результаты, полученные в задачах обслуживания, можно записывать в виде отчета в текстовый файл или в таблицы плана обслуживания (`sysmaintplan_log` и `sysmaintplan_logdetail`) в `msdb`.</span><span class="sxs-lookup"><span data-stu-id="eb5a8-134">The results generated by the maintenance tasks can be written as a report to a text file or to the maintenance plan tables (`sysmaintplan_log` and `sysmaintplan_logdetail`) in `msdb`.</span></span> <span data-ttu-id="eb5a8-135">Для просмотра результатов в средстве просмотра журнала щелкните правой кнопкой мыши пункт **Планы обслуживания** и выберите пункт **Просмотр журнала**.</span><span class="sxs-lookup"><span data-stu-id="eb5a8-135">To view the results in the log file viewer, right-click **Maintenance Plans**, and then click **View History**.</span></span>  
  
## <a name="related-tasks"></a><span data-ttu-id="eb5a8-136">Связанные задачи</span><span class="sxs-lookup"><span data-stu-id="eb5a8-136">Related Tasks</span></span>  
 <span data-ttu-id="eb5a8-137">Используйте следующие разделы для начала работы с планами обслуживания.</span><span class="sxs-lookup"><span data-stu-id="eb5a8-137">Use the following topics to get started with maintenance plans.</span></span>  
  
|||  
|-|-|  
|<span data-ttu-id="eb5a8-138">**Описание**</span><span class="sxs-lookup"><span data-stu-id="eb5a8-138">**Description**</span></span>|<span data-ttu-id="eb5a8-139">**Раздел**</span><span class="sxs-lookup"><span data-stu-id="eb5a8-139">**Topic**</span></span>|  
|<span data-ttu-id="eb5a8-140">Описывает создание плана обслуживания с помощью среды [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] или [!INCLUDE[tsql](../../includes/tsql-md.md)].</span><span class="sxs-lookup"><span data-stu-id="eb5a8-140">Describes how to create a maintenance plan by using [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] or [!INCLUDE[tsql](../../includes/tsql-md.md)].</span></span>|[<span data-ttu-id="eb5a8-141">Создание плана обслуживания</span><span class="sxs-lookup"><span data-stu-id="eb5a8-141">Create a Maintenance Plan</span></span>](create-a-maintenance-plan.md)|  
|<span data-ttu-id="eb5a8-142">Описывает создание плана обслуживания с помощью области конструктора плана обслуживания.</span><span class="sxs-lookup"><span data-stu-id="eb5a8-142">Describes how to create a maintenance plan by using the Maintenance Plan Design Surface.</span></span>|[<span data-ttu-id="eb5a8-143">Создание плана обслуживания (область конструктора планов обслуживания)</span><span class="sxs-lookup"><span data-stu-id="eb5a8-143">Create a Maintenance Plan &#40;Maintenance Plan Design Surface&#41;</span></span>](create-a-maintenance-plan-maintenance-plan-design-surface.md)|  
|<span data-ttu-id="eb5a8-144">Содержит сведения о функциональных возможностях планов обслуживания, доступных в обозревателе объектов.</span><span class="sxs-lookup"><span data-stu-id="eb5a8-144">Documents maintenance plan functionality available in Object Explorer.</span></span>|[<span data-ttu-id="eb5a8-145">Узел "Планы обслуживания" (обозреватель объектов)</span><span class="sxs-lookup"><span data-stu-id="eb5a8-145">Maintenance Plans Node &#40;Object Explorer&#41;</span></span>](../../ssms/object/object-explorer.md)|  
  
  
