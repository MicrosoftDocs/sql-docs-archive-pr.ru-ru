---
title: Преобразования из C в SQL | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: native-client
ms.topic: reference
helpviewer_keywords:
- conversions [ODBC], C to SQL
ms.assetid: 7ac098db-9147-4883-8da9-a58ab24a0d31
author: rothja
ms.author: jroth
ms.openlocfilehash: 2ec8856b9c516ff3693da2ebf1077289d414e589
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87666552"
---
# <a name="conversions-from-c-to-sql"></a><span data-ttu-id="3bc5f-102">Преобразования из C в SQL</span><span class="sxs-lookup"><span data-stu-id="3bc5f-102">Conversions from C to SQL</span></span>
  <span data-ttu-id="3bc5f-103">В этом разделе перечислены проблемы, которые следует учитывать при преобразовании из типов C в [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] типы даты-времени.</span><span class="sxs-lookup"><span data-stu-id="3bc5f-103">This topic lists issues to consider when you convert from C types to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] date/time types.</span></span>  
  
 <span data-ttu-id="3bc5f-104">Преобразования, описанные в следующей таблице, относятся к преобразованиям, совершаемым на клиенте.</span><span class="sxs-lookup"><span data-stu-id="3bc5f-104">The conversions described in the following table apply to conversions made on the client.</span></span> <span data-ttu-id="3bc5f-105">В случае, когда клиент задает для параметра точность долей секунды, отличную от заданной на сервере, преобразование на клиенте, возможно, завершится успешно, но сервер возвратит ошибку при вызове функций `SQLExecute` или `SQLExecuteDirect`.</span><span class="sxs-lookup"><span data-stu-id="3bc5f-105">In cases where the client specifies fractional second precision for a parameter that differs from that defined on the server, the client conversion might succeed but the server will return an error when `SQLExecute` or `SQLExecuteDirect` is called.</span></span> <span data-ttu-id="3bc5f-106">В частности, ODBC рассматривает любое усечение долей секунды как ошибку, в то время как [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] их округляет; например, округление произойдет при переходе от `datetime2(6)` к `datetime2(2)`.</span><span class="sxs-lookup"><span data-stu-id="3bc5f-106">In particular, ODBC treats any truncation of fractional seconds as an error, whereas the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] behavior is to round; for example, rounding occurs when you go from `datetime2(6)` to `datetime2(2)`.</span></span> <span data-ttu-id="3bc5f-107">Значения столбцов даты-времени округляются до 1/300 секунды, а в значениях типа smalldatetime сервер устанавливает для секунд значение, равное нулю.</span><span class="sxs-lookup"><span data-stu-id="3bc5f-107">Datetime column values are rounded to 1/300th of a second and smalldatetime columns have seconds set to zero by the server.</span></span>  
  
|||||||||  
|-|-|-|-|-|-|-|-|  
||<span data-ttu-id="3bc5f-108">SQL_TYPE_DATE</span><span class="sxs-lookup"><span data-stu-id="3bc5f-108">SQL_TYPE_DATE</span></span>|<span data-ttu-id="3bc5f-109">SQL_TYPE_TIME</span><span class="sxs-lookup"><span data-stu-id="3bc5f-109">SQL_TYPE_TIME</span></span>|<span data-ttu-id="3bc5f-110">SQL_SS_TIME2</span><span class="sxs-lookup"><span data-stu-id="3bc5f-110">SQL_SS_TIME2</span></span>|<span data-ttu-id="3bc5f-111">SQL_TYPE_TIMESTAMP</span><span class="sxs-lookup"><span data-stu-id="3bc5f-111">SQL_TYPE_TIMESTAMP</span></span>|<span data-ttu-id="3bc5f-112">SQL_SS_TIMSTAMPOFFSET</span><span class="sxs-lookup"><span data-stu-id="3bc5f-112">SQL_SS_TIMSTAMPOFFSET</span></span>|<span data-ttu-id="3bc5f-113">SQL_CHAR</span><span class="sxs-lookup"><span data-stu-id="3bc5f-113">SQL_CHAR</span></span>|<span data-ttu-id="3bc5f-114">SQL_WCHAR</span><span class="sxs-lookup"><span data-stu-id="3bc5f-114">SQL_WCHAR</span></span>|  
|<span data-ttu-id="3bc5f-115">SQL_C_DATE</span><span class="sxs-lookup"><span data-stu-id="3bc5f-115">SQL_C_DATE</span></span>|<span data-ttu-id="3bc5f-116">1</span><span class="sxs-lookup"><span data-stu-id="3bc5f-116">1</span></span>|-|-|<span data-ttu-id="3bc5f-117">1,6</span><span class="sxs-lookup"><span data-stu-id="3bc5f-117">1,6</span></span>|<span data-ttu-id="3bc5f-118">1,5,6</span><span class="sxs-lookup"><span data-stu-id="3bc5f-118">1,5,6</span></span>|<span data-ttu-id="3bc5f-119">1,13</span><span class="sxs-lookup"><span data-stu-id="3bc5f-119">1,13</span></span>|<span data-ttu-id="3bc5f-120">1,13</span><span class="sxs-lookup"><span data-stu-id="3bc5f-120">1,13</span></span>|  
|<span data-ttu-id="3bc5f-121">SQL_C_TIME</span><span class="sxs-lookup"><span data-stu-id="3bc5f-121">SQL_C_TIME</span></span>|-|<span data-ttu-id="3bc5f-122">1</span><span class="sxs-lookup"><span data-stu-id="3bc5f-122">1</span></span>|<span data-ttu-id="3bc5f-123">1</span><span class="sxs-lookup"><span data-stu-id="3bc5f-123">1</span></span>|<span data-ttu-id="3bc5f-124">1,7</span><span class="sxs-lookup"><span data-stu-id="3bc5f-124">1,7</span></span>|<span data-ttu-id="3bc5f-125">1, 5, 7</span><span class="sxs-lookup"><span data-stu-id="3bc5f-125">1,5,7</span></span>|<span data-ttu-id="3bc5f-126">1,13</span><span class="sxs-lookup"><span data-stu-id="3bc5f-126">1,13</span></span>|<span data-ttu-id="3bc5f-127">1,13</span><span class="sxs-lookup"><span data-stu-id="3bc5f-127">1,13</span></span>|  
|<span data-ttu-id="3bc5f-128">SQL_C_SS_TIME2</span><span class="sxs-lookup"><span data-stu-id="3bc5f-128">SQL_C_SS_TIME2</span></span>|-|<span data-ttu-id="3bc5f-129">1,3</span><span class="sxs-lookup"><span data-stu-id="3bc5f-129">1,3</span></span>|<span data-ttu-id="3bc5f-130">1,10</span><span class="sxs-lookup"><span data-stu-id="3bc5f-130">1,10</span></span>|<span data-ttu-id="3bc5f-131">1,7</span><span class="sxs-lookup"><span data-stu-id="3bc5f-131">1,7</span></span>|<span data-ttu-id="3bc5f-132">1, 5, 7</span><span class="sxs-lookup"><span data-stu-id="3bc5f-132">1,5,7</span></span>|<span data-ttu-id="3bc5f-133">1,13</span><span class="sxs-lookup"><span data-stu-id="3bc5f-133">1,13</span></span>|<span data-ttu-id="3bc5f-134">1,13</span><span class="sxs-lookup"><span data-stu-id="3bc5f-134">1,13</span></span>|  
|<span data-ttu-id="3bc5f-135">SQL_C_BINARY(SQL_SS_TIME2_STRUCT)</span><span class="sxs-lookup"><span data-stu-id="3bc5f-135">SQL_C_BINARY(SQL_SS_TIME2_STRUCT)</span></span>|<span data-ttu-id="3bc5f-136">Недоступно</span><span class="sxs-lookup"><span data-stu-id="3bc5f-136">N/A</span></span>|<span data-ttu-id="3bc5f-137">Недоступно</span><span class="sxs-lookup"><span data-stu-id="3bc5f-137">N/A</span></span>|<span data-ttu-id="3bc5f-138">1,10,11</span><span class="sxs-lookup"><span data-stu-id="3bc5f-138">1,10,11</span></span>|<span data-ttu-id="3bc5f-139">Недоступно</span><span class="sxs-lookup"><span data-stu-id="3bc5f-139">N/A</span></span>|<span data-ttu-id="3bc5f-140">Недоступно</span><span class="sxs-lookup"><span data-stu-id="3bc5f-140">N/A</span></span>|<span data-ttu-id="3bc5f-141">Недоступно</span><span class="sxs-lookup"><span data-stu-id="3bc5f-141">N/A</span></span>|<span data-ttu-id="3bc5f-142">Недоступно</span><span class="sxs-lookup"><span data-stu-id="3bc5f-142">N/A</span></span>|  
|<span data-ttu-id="3bc5f-143">SQL_C_TYPE_TIMESTAMP</span><span class="sxs-lookup"><span data-stu-id="3bc5f-143">SQL_C_TYPE_TIMESTAMP</span></span>|<span data-ttu-id="3bc5f-144">1,2</span><span class="sxs-lookup"><span data-stu-id="3bc5f-144">1,2</span></span>|<span data-ttu-id="3bc5f-145">1,3,4</span><span class="sxs-lookup"><span data-stu-id="3bc5f-145">1,3,4</span></span>|<span data-ttu-id="3bc5f-146">1,4,10</span><span class="sxs-lookup"><span data-stu-id="3bc5f-146">1,4,10</span></span>|<span data-ttu-id="3bc5f-147">1,10</span><span class="sxs-lookup"><span data-stu-id="3bc5f-147">1,10</span></span>|<span data-ttu-id="3bc5f-148">1,5,10</span><span class="sxs-lookup"><span data-stu-id="3bc5f-148">1,5,10</span></span>|<span data-ttu-id="3bc5f-149">1,13</span><span class="sxs-lookup"><span data-stu-id="3bc5f-149">1,13</span></span>|<span data-ttu-id="3bc5f-150">1,13</span><span class="sxs-lookup"><span data-stu-id="3bc5f-150">1,13</span></span>|  
|<span data-ttu-id="3bc5f-151">SQL_C_SS_TIMESTAMPOFFSET</span><span class="sxs-lookup"><span data-stu-id="3bc5f-151">SQL_C_SS_TIMESTAMPOFFSET</span></span>|<span data-ttu-id="3bc5f-152">1,2,8</span><span class="sxs-lookup"><span data-stu-id="3bc5f-152">1,2,8</span></span>|<span data-ttu-id="3bc5f-153">1,3,4,8</span><span class="sxs-lookup"><span data-stu-id="3bc5f-153">1,3,4,8</span></span>|<span data-ttu-id="3bc5f-154">1,4,8,10</span><span class="sxs-lookup"><span data-stu-id="3bc5f-154">1,4,8,10</span></span>|<span data-ttu-id="3bc5f-155">1,8,10</span><span class="sxs-lookup"><span data-stu-id="3bc5f-155">1,8,10</span></span>|<span data-ttu-id="3bc5f-156">1,10</span><span class="sxs-lookup"><span data-stu-id="3bc5f-156">1,10</span></span>|<span data-ttu-id="3bc5f-157">1,13</span><span class="sxs-lookup"><span data-stu-id="3bc5f-157">1,13</span></span>|<span data-ttu-id="3bc5f-158">1,13</span><span class="sxs-lookup"><span data-stu-id="3bc5f-158">1,13</span></span>|  
|<span data-ttu-id="3bc5f-159">SQL_C_BINARY(SQL_SS_TIMESTAMPOFFSET_STRUCT)</span><span class="sxs-lookup"><span data-stu-id="3bc5f-159">SQL_C_BINARY(SQL_SS_TIMESTAMPOFFSET_STRUCT)</span></span>|<span data-ttu-id="3bc5f-160">Недоступно</span><span class="sxs-lookup"><span data-stu-id="3bc5f-160">N/A</span></span>|<span data-ttu-id="3bc5f-161">Недоступно</span><span class="sxs-lookup"><span data-stu-id="3bc5f-161">N/A</span></span>|<span data-ttu-id="3bc5f-162">Недоступно</span><span class="sxs-lookup"><span data-stu-id="3bc5f-162">N/A</span></span>|<span data-ttu-id="3bc5f-163">Недоступно</span><span class="sxs-lookup"><span data-stu-id="3bc5f-163">N/A</span></span>|<span data-ttu-id="3bc5f-164">1,10,11</span><span class="sxs-lookup"><span data-stu-id="3bc5f-164">1,10,11</span></span>|<span data-ttu-id="3bc5f-165">Недоступно</span><span class="sxs-lookup"><span data-stu-id="3bc5f-165">N/A</span></span>|<span data-ttu-id="3bc5f-166">Недоступно</span><span class="sxs-lookup"><span data-stu-id="3bc5f-166">N/A</span></span>|  
|<span data-ttu-id="3bc5f-167">SQL_C_CHAR/SQL_WCHAR (date)</span><span class="sxs-lookup"><span data-stu-id="3bc5f-167">SQL_C_CHAR/SQL_WCHAR (date)</span></span>|<span data-ttu-id="3bc5f-168">9</span><span class="sxs-lookup"><span data-stu-id="3bc5f-168">9</span></span>|<span data-ttu-id="3bc5f-169">9</span><span class="sxs-lookup"><span data-stu-id="3bc5f-169">9</span></span>|<span data-ttu-id="3bc5f-170">9</span><span class="sxs-lookup"><span data-stu-id="3bc5f-170">9</span></span>|<span data-ttu-id="3bc5f-171">9,6</span><span class="sxs-lookup"><span data-stu-id="3bc5f-171">9,6</span></span>|<span data-ttu-id="3bc5f-172">9,5,6</span><span class="sxs-lookup"><span data-stu-id="3bc5f-172">9,5,6</span></span>|<span data-ttu-id="3bc5f-173">Недоступно</span><span class="sxs-lookup"><span data-stu-id="3bc5f-173">N/A</span></span>|<span data-ttu-id="3bc5f-174">Недоступно</span><span class="sxs-lookup"><span data-stu-id="3bc5f-174">N/A</span></span>|  
|<span data-ttu-id="3bc5f-175">SQL_C_CHAR/SQL_WCHAR (time2)</span><span class="sxs-lookup"><span data-stu-id="3bc5f-175">SQL_C_CHAR/SQL_WCHAR (time2)</span></span>|<span data-ttu-id="3bc5f-176">9</span><span class="sxs-lookup"><span data-stu-id="3bc5f-176">9</span></span>|<span data-ttu-id="3bc5f-177">9, 3</span><span class="sxs-lookup"><span data-stu-id="3bc5f-177">9,3</span></span>|<span data-ttu-id="3bc5f-178">9,10</span><span class="sxs-lookup"><span data-stu-id="3bc5f-178">9,10</span></span>|<span data-ttu-id="3bc5f-179">9,7,10</span><span class="sxs-lookup"><span data-stu-id="3bc5f-179">9,7,10</span></span>|<span data-ttu-id="3bc5f-180">9,5,7,10</span><span class="sxs-lookup"><span data-stu-id="3bc5f-180">9,5,7,10</span></span>|<span data-ttu-id="3bc5f-181">Недоступно</span><span class="sxs-lookup"><span data-stu-id="3bc5f-181">N/A</span></span>|<span data-ttu-id="3bc5f-182">Недоступно</span><span class="sxs-lookup"><span data-stu-id="3bc5f-182">N/A</span></span>|  
|<span data-ttu-id="3bc5f-183">SQL_C_CHAR/SQL_WCHAR (datetime)</span><span class="sxs-lookup"><span data-stu-id="3bc5f-183">SQL_C_CHAR/SQL_WCHAR (datetime)</span></span>|<span data-ttu-id="3bc5f-184">9,2</span><span class="sxs-lookup"><span data-stu-id="3bc5f-184">9,2</span></span>|<span data-ttu-id="3bc5f-185">9, 3, 4</span><span class="sxs-lookup"><span data-stu-id="3bc5f-185">9,3,4</span></span>|<span data-ttu-id="3bc5f-186">9,4,10</span><span class="sxs-lookup"><span data-stu-id="3bc5f-186">9,4,10</span></span>|<span data-ttu-id="3bc5f-187">9,10</span><span class="sxs-lookup"><span data-stu-id="3bc5f-187">9,10</span></span>|<span data-ttu-id="3bc5f-188">9,5,10</span><span class="sxs-lookup"><span data-stu-id="3bc5f-188">9,5,10</span></span>|<span data-ttu-id="3bc5f-189">Недоступно</span><span class="sxs-lookup"><span data-stu-id="3bc5f-189">N/A</span></span>|<span data-ttu-id="3bc5f-190">Недоступно</span><span class="sxs-lookup"><span data-stu-id="3bc5f-190">N/A</span></span>|  
|<span data-ttu-id="3bc5f-191">SQL_C_CHAR/SQL_WCHAR (datetimeoffset)</span><span class="sxs-lookup"><span data-stu-id="3bc5f-191">SQL_C_CHAR/SQL_WCHAR (datetimeoffset)</span></span>|<span data-ttu-id="3bc5f-192">9,2,8</span><span class="sxs-lookup"><span data-stu-id="3bc5f-192">9,2,8</span></span>|<span data-ttu-id="3bc5f-193">9, 3, 4, 8</span><span class="sxs-lookup"><span data-stu-id="3bc5f-193">9,3,4,8</span></span>|<span data-ttu-id="3bc5f-194">9,4,8,10</span><span class="sxs-lookup"><span data-stu-id="3bc5f-194">9,4,8,10</span></span>|<span data-ttu-id="3bc5f-195">9,8,10</span><span class="sxs-lookup"><span data-stu-id="3bc5f-195">9,8,10</span></span>|<span data-ttu-id="3bc5f-196">9,10</span><span class="sxs-lookup"><span data-stu-id="3bc5f-196">9,10</span></span>|<span data-ttu-id="3bc5f-197">Недоступно</span><span class="sxs-lookup"><span data-stu-id="3bc5f-197">N/A</span></span>|<span data-ttu-id="3bc5f-198">Недоступно</span><span class="sxs-lookup"><span data-stu-id="3bc5f-198">N/A</span></span>|  
|<span data-ttu-id="3bc5f-199">SQL_C_BINARY(SQL_DATE_STRUCT)</span><span class="sxs-lookup"><span data-stu-id="3bc5f-199">SQL_C_BINARY(SQL_DATE_STRUCT)</span></span>|<span data-ttu-id="3bc5f-200">1,11</span><span class="sxs-lookup"><span data-stu-id="3bc5f-200">1,11</span></span>|<span data-ttu-id="3bc5f-201">Недоступно</span><span class="sxs-lookup"><span data-stu-id="3bc5f-201">N/A</span></span>|<span data-ttu-id="3bc5f-202">Недоступно</span><span class="sxs-lookup"><span data-stu-id="3bc5f-202">N/A</span></span>|<span data-ttu-id="3bc5f-203">Недоступно</span><span class="sxs-lookup"><span data-stu-id="3bc5f-203">N/A</span></span>|<span data-ttu-id="3bc5f-204">Недоступно</span><span class="sxs-lookup"><span data-stu-id="3bc5f-204">N/A</span></span>|<span data-ttu-id="3bc5f-205">Недоступно</span><span class="sxs-lookup"><span data-stu-id="3bc5f-205">N/A</span></span>|<span data-ttu-id="3bc5f-206">Недоступно</span><span class="sxs-lookup"><span data-stu-id="3bc5f-206">N/A</span></span>|  
|<span data-ttu-id="3bc5f-207">SQL_C_BINARY(SQL_TIME_STRUCT)</span><span class="sxs-lookup"><span data-stu-id="3bc5f-207">SQL_C_BINARY(SQL_TIME_STRUCT)</span></span>|<span data-ttu-id="3bc5f-208">Недоступно</span><span class="sxs-lookup"><span data-stu-id="3bc5f-208">N/A</span></span>|<span data-ttu-id="3bc5f-209">Недоступно</span><span class="sxs-lookup"><span data-stu-id="3bc5f-209">N/A</span></span>|<span data-ttu-id="3bc5f-210">Недоступно</span><span class="sxs-lookup"><span data-stu-id="3bc5f-210">N/A</span></span>|<span data-ttu-id="3bc5f-211">Недоступно</span><span class="sxs-lookup"><span data-stu-id="3bc5f-211">N/A</span></span>|<span data-ttu-id="3bc5f-212">Недоступно</span><span class="sxs-lookup"><span data-stu-id="3bc5f-212">N/A</span></span>|<span data-ttu-id="3bc5f-213">Недоступно</span><span class="sxs-lookup"><span data-stu-id="3bc5f-213">N/A</span></span>|<span data-ttu-id="3bc5f-214">Недоступно</span><span class="sxs-lookup"><span data-stu-id="3bc5f-214">N/A</span></span>|  
|<span data-ttu-id="3bc5f-215">SQL_C_BINARY(SQL_TIMESTAMP_STRUCT)</span><span class="sxs-lookup"><span data-stu-id="3bc5f-215">SQL_C_BINARY(SQL_TIMESTAMP_STRUCT)</span></span>|<span data-ttu-id="3bc5f-216">Недоступно</span><span class="sxs-lookup"><span data-stu-id="3bc5f-216">N/A</span></span>|<span data-ttu-id="3bc5f-217">Недоступно</span><span class="sxs-lookup"><span data-stu-id="3bc5f-217">N/A</span></span>|<span data-ttu-id="3bc5f-218">Недоступно</span><span class="sxs-lookup"><span data-stu-id="3bc5f-218">N/A</span></span>|<span data-ttu-id="3bc5f-219">Недоступно</span><span class="sxs-lookup"><span data-stu-id="3bc5f-219">N/A</span></span>|<span data-ttu-id="3bc5f-220">Недоступно</span><span class="sxs-lookup"><span data-stu-id="3bc5f-220">N/A</span></span>|<span data-ttu-id="3bc5f-221">Недоступно</span><span class="sxs-lookup"><span data-stu-id="3bc5f-221">N/A</span></span>|<span data-ttu-id="3bc5f-222">Недоступно</span><span class="sxs-lookup"><span data-stu-id="3bc5f-222">N/A</span></span>|  
  
## <a name="key-to-symbols"></a><span data-ttu-id="3bc5f-223">Расшифровка символов</span><span class="sxs-lookup"><span data-stu-id="3bc5f-223">Key to Symbols</span></span>  
  
|<span data-ttu-id="3bc5f-224">Символ</span><span class="sxs-lookup"><span data-stu-id="3bc5f-224">Symbol</span></span>|<span data-ttu-id="3bc5f-225">Значение</span><span class="sxs-lookup"><span data-stu-id="3bc5f-225">Meaning</span></span>|  
|------------|-------------|  
|-|<span data-ttu-id="3bc5f-226">Преобразование не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="3bc5f-226">No conversion is supported.</span></span> <span data-ttu-id="3bc5f-227">Создается запись диагностики с кодом SQLSTATE 07006 и сообщением «Нарушение атрибута ограниченного типа данных».</span><span class="sxs-lookup"><span data-stu-id="3bc5f-227">A diagnostic record is generated with SQLSTATE 07006 and the message "Restricted data type attribute violation".</span></span>|  
|<span data-ttu-id="3bc5f-228">1</span><span class="sxs-lookup"><span data-stu-id="3bc5f-228">1</span></span>|<span data-ttu-id="3bc5f-229">Если переданы недопустимые данные, то создается запись диагностики с кодом SQLSTATE 22007 и сообщением «Недопустимый формат даты и времени».</span><span class="sxs-lookup"><span data-stu-id="3bc5f-229">If the data supplied is not valid, a diagnostic record is generated with SQLSTATE 22007 and the message "Invalid datetime format".</span></span>|  
|<span data-ttu-id="3bc5f-230">2</span><span class="sxs-lookup"><span data-stu-id="3bc5f-230">2</span></span>|<span data-ttu-id="3bc5f-231">Поля времени должны содержать нули, иначе создается запись диагностики с кодом SQLSTATE 22008 и сообщением «Частичное усечение».</span><span class="sxs-lookup"><span data-stu-id="3bc5f-231">Time fields must be zero or a diagnostic record is generated with SQLSTATE 22008 and the message "Fractional truncation".</span></span>|  
|<span data-ttu-id="3bc5f-232">3</span><span class="sxs-lookup"><span data-stu-id="3bc5f-232">3</span></span>|<span data-ttu-id="3bc5f-233">Дробная часть секунд должна быть равна нулю, в противном случае создается запись диагностики с кодом SQLSTATE 22008 и сообщением «Частичное усечение».</span><span class="sxs-lookup"><span data-stu-id="3bc5f-233">Fractional seconds must be zero or a diagnostic record is generated with SQLSTATE 22008 and the message "Fractional truncation".</span></span>|  
|<span data-ttu-id="3bc5f-234">4</span><span class="sxs-lookup"><span data-stu-id="3bc5f-234">4</span></span>|<span data-ttu-id="3bc5f-235">Компонент даты не учитывается.</span><span class="sxs-lookup"><span data-stu-id="3bc5f-235">The date component is ignored.</span></span>|  
|<span data-ttu-id="3bc5f-236">5</span><span class="sxs-lookup"><span data-stu-id="3bc5f-236">5</span></span>|<span data-ttu-id="3bc5f-237">Часовой пояс устанавливается в соответствии с часовым поясом клиента.</span><span class="sxs-lookup"><span data-stu-id="3bc5f-237">The timezone is set to the client's timezone setting.</span></span>|  
|<span data-ttu-id="3bc5f-238">6</span><span class="sxs-lookup"><span data-stu-id="3bc5f-238">6</span></span>|<span data-ttu-id="3bc5f-239">Время установлено в нуль.</span><span class="sxs-lookup"><span data-stu-id="3bc5f-239">The time is set to zero.</span></span>|  
|<span data-ttu-id="3bc5f-240">7</span><span class="sxs-lookup"><span data-stu-id="3bc5f-240">7</span></span>|<span data-ttu-id="3bc5f-241">Дата устанавливается в текущую дату.</span><span class="sxs-lookup"><span data-stu-id="3bc5f-241">The date is set to the current date.</span></span>|  
|<span data-ttu-id="3bc5f-242">8</span><span class="sxs-lookup"><span data-stu-id="3bc5f-242">8</span></span>|<span data-ttu-id="3bc5f-243">Время преобразуется из часового пояса клиента в UTC.</span><span class="sxs-lookup"><span data-stu-id="3bc5f-243">The time is converted from the client's timezone to UTC.</span></span> <span data-ttu-id="3bc5f-244">Если во время этого преобразования возникла ошибка, создается запись диагностики с кодом SQLSTATE 22008 и сообщением «Переполнение поля datetime».</span><span class="sxs-lookup"><span data-stu-id="3bc5f-244">If an error occurs during this conversion, a diagnostic record is generated with SQLSTATE 22008 and the message "Datetime field overflow".</span></span>|  
|<span data-ttu-id="3bc5f-245">9</span><span class="sxs-lookup"><span data-stu-id="3bc5f-245">9</span></span>|<span data-ttu-id="3bc5f-246">Строка проходит синтаксический анализ и преобразуется в значение типа date, datetime, datetimeoffset или времени, в зависимости от первого встреченного знака препинания и наличия остальных компонентов.</span><span class="sxs-lookup"><span data-stu-id="3bc5f-246">The string is parsed and converted to a date, datetime, datetimeoffset, or time value, depending on the first punctuation character encountered and the presence of remaining components.</span></span> <span data-ttu-id="3bc5f-247">Затем строка преобразуется в целевой тип согласно правилам, описанным в приведенной выше таблице для типа исходных данных, который выясняется в процессе анализа.</span><span class="sxs-lookup"><span data-stu-id="3bc5f-247">The string is then converted to the target type, following the rules in the preceding table for the source type discovered by this process.</span></span> <span data-ttu-id="3bc5f-248">Если во время синтаксического анализа обнаружена ошибка, то создается диагностическая запись с кодом SQLSTATE 22018 и сообщением «Недопустимое значение символа для спецификации преобразования».</span><span class="sxs-lookup"><span data-stu-id="3bc5f-248">If an error is detected while parsing the data, a diagnostic record is generated with SQLSTATE 22018 and the message "Invalid character value for cast specification".</span></span> <span data-ttu-id="3bc5f-249">Для параметров типа datetime и smalldatetime, если значение года выходит за пределы допустимого диапазона, создается диагностическая запись с кодом SQLSTATE 22007 и сообщением «Недопустимый формат даты и времени».</span><span class="sxs-lookup"><span data-stu-id="3bc5f-249">For datetime and smalldatetime parameters, if the year is outside the range supported by these types, a diagnostic record is generated with SQLSTATE 22007 and the message "Invalid datetime format".</span></span><br /><br /> <span data-ttu-id="3bc5f-250">Значение datetimeoffset после преобразования во времени в формате UTC должно находиться в пределах диапазона, даже если преобразование во времени в формате UTC не требуется.</span><span class="sxs-lookup"><span data-stu-id="3bc5f-250">For datetimeoffset, the value must be within range after conversion to UTC, even if no conversion to UTC is requested.</span></span> <span data-ttu-id="3bc5f-251">Причина этого заключается в том, что поток табличных данных и сервер всегда нормализуют время в значениях datetimeoffset для времени в формате UTC, поэтому клиент должен проверять, что значение времени после преобразования во времени в формате UTC находится в пределах поддерживаемого диапазона.</span><span class="sxs-lookup"><span data-stu-id="3bc5f-251">This is because TDS and the server always normalize the time in datetimeoffset values for UTC, so the client must verify that time components are within the range supported after conversion to UTC.</span></span> <span data-ttu-id="3bc5f-252">Если переданы недопустимые для поддерживаемого диапазона времени в формате UTC данные, то создается диагностическая запись с кодом SQLSTATE 22007 и сообщением «Недопустимый формат даты и времени».</span><span class="sxs-lookup"><span data-stu-id="3bc5f-252">If the value is not within the supported UTC range, a diagnostic record is generated with SQLSTATE 22007 and the message "Invalid datetime format".</span></span>|  
|<span data-ttu-id="3bc5f-253">10</span><span class="sxs-lookup"><span data-stu-id="3bc5f-253">10</span></span>|<span data-ttu-id="3bc5f-254">Если произошло усечение с потерей данных, то создается запись диагностики с кодом SQLSTATE 22008 и сообщением «Недопустимый формат времени».</span><span class="sxs-lookup"><span data-stu-id="3bc5f-254">If truncation with data loss occurs, a diagnostic record is generated with SQLSTATE 22008 and the message "Invalid time format".</span></span> <span data-ttu-id="3bc5f-255">Эта ошибка также возникает в том случае, если значение выходит за пределы диапазона, который может быть представлен диапазоном времени в формате UTC, используемым сервером.</span><span class="sxs-lookup"><span data-stu-id="3bc5f-255">This error also occurs if the value falls outside the range that can be represented by the UTC range used by the server.</span></span>|  
|<span data-ttu-id="3bc5f-256">11</span><span class="sxs-lookup"><span data-stu-id="3bc5f-256">11</span></span>|<span data-ttu-id="3bc5f-257">Если байтовая длина данных не равна размеру структуры, нужной для данного типа SQL, то создается диагностическая запись с кодом SQLSTATE 22003 и сообщением «Значение числового параметра за пределами диапазона».</span><span class="sxs-lookup"><span data-stu-id="3bc5f-257">If the byte length of the data does not equal the size of the struct required by the SQL type, a diagnostic record is generated with SQLSTATE 22003 and the message "Numeric value out of range".</span></span>|  
|<span data-ttu-id="3bc5f-258">12</span><span class="sxs-lookup"><span data-stu-id="3bc5f-258">12</span></span>|<span data-ttu-id="3bc5f-259">Если байтовая длина данных равна 4 или 8, данные посылаются на сервер в необработанном формате потока табличных данных smalldatetime или datetime.</span><span class="sxs-lookup"><span data-stu-id="3bc5f-259">If the byte length of the data is 4 or 8, the data is sent to the server in raw TDS smalldatetime or datetime format.</span></span> <span data-ttu-id="3bc5f-260">Если байтовая длина данных в точности равна размеру структуры SQL_TIMESTAMP_STRUCT, данные преобразуются в формат потока табличных данных для типа datetime2.</span><span class="sxs-lookup"><span data-stu-id="3bc5f-260">If the byte length of the data exactly matches the size of SQL_TIMESTAMP_STRUCT, the data is converted to the TDS format for datetime2.</span></span>|  
|<span data-ttu-id="3bc5f-261">13</span><span class="sxs-lookup"><span data-stu-id="3bc5f-261">13</span></span>|<span data-ttu-id="3bc5f-262">Если происходит усечение с потерей данных, то создается диагностическая запись с кодом SQLSTATE 22001 и сообщением «Строковые данные, усечение справа».</span><span class="sxs-lookup"><span data-stu-id="3bc5f-262">If truncation with data loss occurs, a diagnostic record is generated with SQLSTATE 22001 and the message "String data, right truncated".</span></span><br /><br /> <span data-ttu-id="3bc5f-263">Количество долей секунды (шкала) определяется исходя из размера целевого столбца в соответствии со следующими параметрами:</span><span class="sxs-lookup"><span data-stu-id="3bc5f-263">The number of fractional seconds digits (the scale) is determined from the destination column's size according to the following:</span></span><br /><br /> <span data-ttu-id="3bc5f-264">**Тип:** SQL_C_TYPE_TIMESTAMP</span><span class="sxs-lookup"><span data-stu-id="3bc5f-264">**Type:** SQL_C_TYPE_TIMESTAMP</span></span><br /><br /> <span data-ttu-id="3bc5f-265">Подразумеваемый масштаб</span><span class="sxs-lookup"><span data-stu-id="3bc5f-265">Implied Scale</span></span><br /><br /> <span data-ttu-id="3bc5f-266">0</span><span class="sxs-lookup"><span data-stu-id="3bc5f-266">0</span></span><br /><br /> <span data-ttu-id="3bc5f-267">19</span><span class="sxs-lookup"><span data-stu-id="3bc5f-267">19</span></span><br /><br /> <span data-ttu-id="3bc5f-268">Подразумеваемый масштаб</span><span class="sxs-lookup"><span data-stu-id="3bc5f-268">Implied Scale</span></span><br /><br /> <span data-ttu-id="3bc5f-269">1.. 9</span><span class="sxs-lookup"><span data-stu-id="3bc5f-269">1..9</span></span><br /><br /> <span data-ttu-id="3bc5f-270">21..29</span><span class="sxs-lookup"><span data-stu-id="3bc5f-270">21..29</span></span><br /><br /> <span data-ttu-id="3bc5f-271">Однако для типа SQL_C_TYPE_TIMESTAMP, если доли секунды можно представить в трех разрядах без потери данных, и размер столбца больше или равен 23, для дробной доли секунды создаются ровно три разряда.</span><span class="sxs-lookup"><span data-stu-id="3bc5f-271">However, for SQL_C_TYPE_TIMESTAMP, if the fractional seconds can be represented with three digits without data loss and the column size is 23 or larger, then exactly three fractional seconds' digits are generated.</span></span> <span data-ttu-id="3bc5f-272">Это поведение обеспечивает обратную совместимость с приложениями, разработанными в расчете на более старые драйверы ODBC.</span><span class="sxs-lookup"><span data-stu-id="3bc5f-272">This behavior ensures backwards compatibility for applications developed using older ODBC drivers.</span></span><br /><br /> <span data-ttu-id="3bc5f-273">Для размеров столбцов, превышающих диапазон таблицы, подразумевается масштаб 9.</span><span class="sxs-lookup"><span data-stu-id="3bc5f-273">For column sizes larger than the range in the table, a scale of 9 is implied.</span></span> <span data-ttu-id="3bc5f-274">Это преобразование должно учитывать доли секунд с точностью до девяти значащих цифр — максимум, поддерживаемый ODBC.</span><span class="sxs-lookup"><span data-stu-id="3bc5f-274">This conversion should allow for up to nine fractional seconds digits, the maximum allowed by ODBC.</span></span><br /><br /> <span data-ttu-id="3bc5f-275">Если для столбца установлен размер, равный нулю, в ODBC это означает неограниченный размер для символьных типов переменной длины (9 разрядов там, где не работает правило трех разрядов для типа SQL_C_TYPE_TIMESTAMP).</span><span class="sxs-lookup"><span data-stu-id="3bc5f-275">A column size of zero implies unlimited size for variable length character types in ODBC (9 digits, unless the 3-digit rule for SQL_C_TYPE_TIMESTAMP applies).</span></span> <span data-ttu-id="3bc5f-276">Задать размер столбца, равный нулю, для символьных типов фиксированной длины будет ошибкой.</span><span class="sxs-lookup"><span data-stu-id="3bc5f-276">Specifying a column size of zero with a fixed length character type is an error.</span></span>|  
|<span data-ttu-id="3bc5f-277">Недоступно</span><span class="sxs-lookup"><span data-stu-id="3bc5f-277">N/A</span></span>|<span data-ttu-id="3bc5f-278">Существующий способ работы [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] и более ранних версий сохранен.</span><span class="sxs-lookup"><span data-stu-id="3bc5f-278">Existing [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] and earlier behavior is maintained.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="3bc5f-279">См. также:</span><span class="sxs-lookup"><span data-stu-id="3bc5f-279">See Also</span></span>  
 [<span data-ttu-id="3bc5f-280">Улучшения даты и времени &#40;ODBC&#41;</span><span class="sxs-lookup"><span data-stu-id="3bc5f-280">Date and Time Improvements &#40;ODBC&#41;</span></span>](date-and-time-improvements-odbc.md)  
  
  
