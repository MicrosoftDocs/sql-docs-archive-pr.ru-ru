---
title: SQL Server управляемого резервного копирования в Azure | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: backup-restore
ms.topic: conceptual
ms.assetid: afa01165-39e0-4efe-ac0e-664edb8599fd
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 8fbe94eace1244b4e5f37b60848d47b69ecc8144
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87667249"
---
# <a name="sql-server-managed--backup-to-azure"></a><span data-ttu-id="7ae5c-102">SQL Server управляемого резервного копирования в Azure</span><span class="sxs-lookup"><span data-stu-id="7ae5c-102">SQL Server Managed  Backup to Azure</span></span>
  [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)]<span data-ttu-id="7ae5c-103">управляет SQL Server резервным копированием в службу хранилища BLOB-объектов Azure и автоматизирует их.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-103">manages and automates SQL Server backups to the Azure Blob storage service.</span></span> <span data-ttu-id="7ae5c-104">Стратегия резервного копирования, используемая [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)], основана на сроке хранения и рабочей нагрузке в базе данных.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-104">The backup strategy used by [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] is based on the retention period and the transaction workload on the database.</span></span> [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] <span data-ttu-id="7ae5c-105">поддерживает восстановление на момент времени для указанного периода хранения.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-105">supports point in time restore for the retention time period specified.</span></span>   
<span data-ttu-id="7ae5c-106">Службы [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] могут быть включены на уровне базы данных или на уровне экземпляра для управления всеми базами данных в экземпляре SQL Server.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-106">[!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] can be enabled at the database level or at the instance level to manage all the databases on the instance of SQL Server.</span></span> <span data-ttu-id="7ae5c-107">SQL Server может выполняться локально или в размещенных средах, таких как виртуальная машина Azure.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-107">The SQL Server can be running on-premises or in hosted environments like the Azure virtual machine.</span></span> [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)]<span data-ttu-id="7ae5c-108">рекомендуется использовать для SQL Server, выполняющихся на виртуальных машинах Azure.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-108">is recommended for SQL Server running on Azure Virtual Machines.</span></span>  
  
## <a name="benefits-of-automating-sql-server-backup-using-ss_smartbackup"></a><span data-ttu-id="7ae5c-109">Преимущества автоматизации резервного копирования SQL Server с помощью [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)]</span><span class="sxs-lookup"><span data-stu-id="7ae5c-109">Benefits of Automating SQL Server Backup Using [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)]</span></span>  
  
-   <span data-ttu-id="7ae5c-110">В настоящий момент автоматизация резервного копирования множества баз данных требует разработки стратегии резервного копирования, написания специального кода и планирования резервного копирования.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-110">Currently automating backups for multiple databases requires developing a backup strategy, writing custom code, and scheduling backups.</span></span> <span data-ttu-id="7ae5c-111">С помощью [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] можно предоставить только необходимые параметры срока хранения и места расположения.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-111">Using [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)], you only are required provide the retention period settings and the storage location.</span></span> [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)]<span data-ttu-id="7ae5c-112">планирует, выполняет и поддерживает резервные копии.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-112">schedules, performs and maintains the backups.</span></span>  
  
     [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] <span data-ttu-id="7ae5c-113">можно настроить на уровне базы данных или с параметрами по умолчанию для экземпляра SQL Server.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-113">can be configured at the database level or at configured with default settings for an instance of SQL Server.</span></span> <span data-ttu-id="7ae5c-114">Автоматизация резервного копирования с помощью [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] имеет следующие преимущества.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-114">Automating backup using [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] has the following benefits:</span></span>  
  
    -   <span data-ttu-id="7ae5c-115">Установив настройки по умолчанию на уровне экземпляра, вы можете применить их к любой базе данных, созданной впоследствии, тем самым обеспечив своевременное резервное копирование и предотвратив потерю данных.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-115">By setting the defaults at the instance level, you can apply these settings to any database created thereafter, thus removing the risk of new databases not being backed up and data loss.</span></span>  
  
    -   <span data-ttu-id="7ae5c-116">Включив [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] и настроив срок хранения на уровне базы данных, вы можете переопределить настройки по умолчанию, заданные на уровне экземпляра.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-116">The option of enabling [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] and setting the retention period at the database level, allows you to override the default settings set at the instance level.</span></span> <span data-ttu-id="7ae5c-117">Так вы получаете более гранулярный контроль над возможностями восстановления определенной базы данных.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-117">This allows you to have more granular control on the recoverability for a specific database.</span></span>  
  
-   <span data-ttu-id="7ae5c-118">При использовании [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] вам не нужно указывать тип или частоту резервного копирования базы данных.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-118">With [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)], you do not have to specify the type or frequency of the backups for a database.</span></span>  <span data-ttu-id="7ae5c-119">Вы указываете срок хранения и [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] определяет тип и частоту резервного копирования для базы данных, которая хранит резервные копии в службе хранилища BLOB-объектов Azure.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-119">You specify the retention period, and [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] determines the type and frequency of backups for a database stores the backups on Azure Blob storage service.</span></span> <span data-ttu-id="7ae5c-120">Дополнительные сведения о наборе критериев, [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] используемых для создания стратегии резервного копирования, см. в разделе [компоненты и основные понятия](#Concepts) этой статьи.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-120">For more details on the set of criteria that [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] uses to create the backup strategy,, see the [Components and Concepts](#Concepts) section in this topic.</span></span>  
  
-   <span data-ttu-id="7ae5c-121">Если конфигурация предусматривает использование шифрования, имеется дополнительная защита резервных данных.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-121">When configured to use encryption, you have additional security for the backup data.</span></span> <span data-ttu-id="7ae5c-122">Дополнительные сведения см. в разделе [Шифрование резервных копий](backup-encryption.md) .</span><span class="sxs-lookup"><span data-stu-id="7ae5c-122">For more information, see [Backup Encryption](backup-encryption.md)</span></span>  
  
 <span data-ttu-id="7ae5c-123">Дополнительные сведения о преимуществах использования хранилища BLOB-объектов Azure для [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] резервного копирования см. в статье [SQL Server резервное копирование и восстановление с помощью службы хранилища BLOB-объектов Azure](sql-server-backup-and-restore-with-microsoft-azure-blob-storage-service.md) .</span><span class="sxs-lookup"><span data-stu-id="7ae5c-123">For more details on the benefits of using Azure Blob storage for [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] backups, see [SQL Server Backup and Restore with Azure Blob Storage Service](sql-server-backup-and-restore-with-microsoft-azure-blob-storage-service.md)</span></span>  
  
## <a name="terms-and-definitions"></a><span data-ttu-id="7ae5c-124">Термины и определения</span><span class="sxs-lookup"><span data-stu-id="7ae5c-124">Terms and Definitions</span></span>  
 [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)]  
 <span data-ttu-id="7ae5c-125">Функция SQL Server, которая автоматизирует резервное копирование и обслуживает резервные копии на основе срока хранения.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-125">A SQL Server feature that automates database backup and maintains the backups based on the retention period.</span></span>  
  
 <span data-ttu-id="7ae5c-126">Период удержания</span><span class="sxs-lookup"><span data-stu-id="7ae5c-126">Retention Period</span></span>  
 <span data-ttu-id="7ae5c-127">По сроку хранения [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] определяет, какие файлы резервных копий следует оставить в хранилище для восстановления базы данных на момент времени в течение заданного периода.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-127">The retention period is used by [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] to determine what backup files should be retained in the storage in order to recover a database to a point in time within the time frame specified.</span></span>  <span data-ttu-id="7ae5c-128">Поддерживаемые значения находятся в диапазоне от 1 до 30 дней.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-128">The supported values are in the range of 1-30 days.</span></span>  
  
 <span data-ttu-id="7ae5c-129">Цепочка журналов</span><span class="sxs-lookup"><span data-stu-id="7ae5c-129">Log Chain</span></span>  
 <span data-ttu-id="7ae5c-130">Непрерывная последовательность резервных копий журналов называется цепочкой журналов.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-130">A continuous sequence of log backups is called a log chain.</span></span> <span data-ttu-id="7ae5c-131">Цепочка журналов начинается с полной резервной копии базы данных.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-131">A log chain starts with a full backup of the database.</span></span>  
  
##  <a name="requirements-concepts-and-components"></a><a name="Concepts"></a><span data-ttu-id="7ae5c-132">Требования, понятия и компоненты</span><span class="sxs-lookup"><span data-stu-id="7ae5c-132">Requirements, Concepts, and Components</span></span>  
  
  
###  <a name="permissions"></a><a name="Security"></a> <span data-ttu-id="7ae5c-133">Permissions</span><span class="sxs-lookup"><span data-stu-id="7ae5c-133">Permissions</span></span>  
 <span data-ttu-id="7ae5c-134">Transact-SQL — это основной интерфейс, используемый для настройки и отслеживания [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)].</span><span class="sxs-lookup"><span data-stu-id="7ae5c-134">Transact-SQL is the main interface used to configure and monitor [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)].</span></span> <span data-ttu-id="7ae5c-135">Как правило, для запуска хранимых процедур конфигурации **db_backupoperator** роль базы данных с разрешениями **ALTER ANY CREDENTIAL** , а для `EXECUTE` **sp_delete_backuphistory** хранимой процедуры требуется разрешение.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-135">In general, to run the configuration stored procedures, **db_backupoperator** database role with **ALTER ANY CREDENTIAL** permissions, and `EXECUTE` permissions on **sp_delete_backuphistory** stored procedure is required.</span></span>  <span data-ttu-id="7ae5c-136">Для хранимых процедур и функций, используемых для просмотра информации, обычно требуются разрешения `Execute` для хранимой процедуры и `Select` для функции соответственно.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-136">Stored procedures and functions used to review information typically require `Execute` permissions on the stored procedure and `Select` on the function respectively.</span></span>  
  
###  <a name="prerequisites"></a><a name="Prereqs"></a> <span data-ttu-id="7ae5c-137">Предварительные требования</span><span class="sxs-lookup"><span data-stu-id="7ae5c-137">Prerequisites</span></span>  
 <span data-ttu-id="7ae5c-138">**Предварительные условия.**</span><span class="sxs-lookup"><span data-stu-id="7ae5c-138">**Prerequisites:**</span></span>  
  
 <span data-ttu-id="7ae5c-139">**Служба хранилища Azure** используется [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] для хранения файлов резервных копий.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-139">**Azure Storage service** is used by [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] to store the backup files.</span></span>    <span data-ttu-id="7ae5c-140">Основные понятия, структура и требования для создания учетной записи хранения Azure подробно описаны в разделе [Общие сведения о ключевых компонентах и концепциях](sql-server-backup-to-url.md#intorkeyconcepts) раздела **SQL Server Backup to URL** .</span><span class="sxs-lookup"><span data-stu-id="7ae5c-140">The concepts, structure, and requirements for creating an Azure storage account is explained in detail in the [Introduction to Key Components and Concepts](sql-server-backup-to-url.md#intorkeyconcepts) section of the **SQL Server Backup to URL** topic.</span></span>  
  
 <span data-ttu-id="7ae5c-141">**Учетные данные SQL** используются для хранения сведений, необходимых для проверки подлинности в учетной записи хранения Azure.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-141">**SQL Credential** is used to store the information required to authenticate to the Azure storage account.</span></span> <span data-ttu-id="7ae5c-142">В объекте учетных данных SQL хранится имя учетной записи и данные ключа доступа.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-142">The SQL Credential object stores the account name and the access key information.</span></span> <span data-ttu-id="7ae5c-143">Дополнительные сведения см. в разделе [Введение в ключевые компоненты и основные понятия](sql-server-backup-and-restore-with-microsoft-azure-blob-storage-service.md) статьи **SQL Server Backup to URL** .</span><span class="sxs-lookup"><span data-stu-id="7ae5c-143">For more information, see the [Introduction to Key Components and Concepts](sql-server-backup-and-restore-with-microsoft-azure-blob-storage-service.md) section in the **SQL Server Backup to URL** topic.</span></span> <span data-ttu-id="7ae5c-144">Пошаговое руководство по созданию учетных данных SQL для хранения данных проверки подлинности службы хранилища Azure см. в разделе [занятие 2. Создание учетных данных SQL Server](../../tutorials/lesson-2-create-a-sql-server-credential.md).</span><span class="sxs-lookup"><span data-stu-id="7ae5c-144">For a walkthrough on how to create a SQL Credential to store Azure Storage authentication information, see [Lesson 2: Create a SQL Server Credential](../../tutorials/lesson-2-create-a-sql-server-credential.md).</span></span>  
  
###  <a name="concepts-and-key-components"></a><a name="Concepts_Components"></a><span data-ttu-id="7ae5c-145">Основные понятия и ключевые компоненты</span><span class="sxs-lookup"><span data-stu-id="7ae5c-145">Concepts and Key Components</span></span>  
 <span data-ttu-id="7ae5c-146">[!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] — это функция, управляющая операциями резервного копирования.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-146">The [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] is a feature that manages the backup operations.</span></span> <span data-ttu-id="7ae5c-147">Он хранит метаданные в базе данных **msdb** и использует системные задания для записи полных резервных копий базы данных и журнала транзакций.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-147">It stores the metadata in the **msdb** database and uses system jobs to write full database and transaction log backups.</span></span>  
  
#### <a name="components"></a><span data-ttu-id="7ae5c-148">Components</span><span class="sxs-lookup"><span data-stu-id="7ae5c-148">Components</span></span>  
 <span data-ttu-id="7ae5c-149">Transact-SQL — это основной интерфейс для взаимодействия с [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)].</span><span class="sxs-lookup"><span data-stu-id="7ae5c-149">Transact-SQL is the main interface to interact with [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)].</span></span> <span data-ttu-id="7ae5c-150">Системные хранимые процедуры используются для активации, настройки и отслеживания [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)].</span><span class="sxs-lookup"><span data-stu-id="7ae5c-150">System stored procedures are used for enabling, configuring, and monitoring [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)].</span></span> <span data-ttu-id="7ae5c-151">Системные функции используются для получения существующих параметров конфигурации, значений параметров и данных файлов резервных копий.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-151">System functions are used to retrieve existing configuration settings, parameter values, and backup file information.</span></span> <span data-ttu-id="7ae5c-152">Расширенные события используются для отображения ошибок и предупреждений.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-152">Extended events are used to surface errors and warnings.</span></span> <span data-ttu-id="7ae5c-153">Механизмы предупреждений включаются с помощью заданий агента SQL Server и управления на основе политик SQL Server.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-153">Alert mechanisms are enabled through SQL Agent jobs and SQL Server Policy Based Management.</span></span> <span data-ttu-id="7ae5c-154">Далее представлен список объектов и описание их функций по отношению к [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)].</span><span class="sxs-lookup"><span data-stu-id="7ae5c-154">The following is a list of the objects and a description of its functionality in relation to [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)].</span></span>  
  
 <span data-ttu-id="7ae5c-155">Можно также настроить [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)]с помощью командлетов PowerShell.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-155">PowerShell cmdlets are also available to configure [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)].</span></span> <span data-ttu-id="7ae5c-156">SQL Server Management Studio поддерживает восстановление резервных копий, созданных [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] , с помощью задачи **Восстановление базы данных** .</span><span class="sxs-lookup"><span data-stu-id="7ae5c-156">SQL Server Management Studio supports restoring backups created by [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] by using the **Restore Database** task</span></span>  
  
|||  
|-|-|  
|<span data-ttu-id="7ae5c-157">Системный объект</span><span class="sxs-lookup"><span data-stu-id="7ae5c-157">System Object</span></span>|<span data-ttu-id="7ae5c-158">Описание</span><span class="sxs-lookup"><span data-stu-id="7ae5c-158">Description</span></span>|  
|<span data-ttu-id="7ae5c-159">**MSDB**</span><span class="sxs-lookup"><span data-stu-id="7ae5c-159">**MSDB**</span></span>|<span data-ttu-id="7ae5c-160">Хранит метаданные, журнал резервного копирования для всех резервных копий, созданных [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)].</span><span class="sxs-lookup"><span data-stu-id="7ae5c-160">Stores the metadata, backup history for all the backups created by [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)].</span></span>|  
|<span data-ttu-id="7ae5c-161">[smart_admin. set_db_backup &#40;&#41;Transact-SQL](https://msdn.microsoft.com/library/dn451013(v=sql.120).aspx)</span><span class="sxs-lookup"><span data-stu-id="7ae5c-161">[smart_admin.set_db_backup &#40;Transact-SQL&#41;](https://msdn.microsoft.com/library/dn451013(v=sql.120).aspx)</span></span>|<span data-ttu-id="7ae5c-162">Системные хранимые процедуры для включения и настройки [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] для базы данных.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-162">System stored procedure for enabling and configuring [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] for a database.</span></span>|  
|<span data-ttu-id="7ae5c-163">[smart_admin. set_instance_backup &#40;&#41;Transact-SQL](https://msdn.microsoft.com/library/dn451009(v=sql.120).aspx)</span><span class="sxs-lookup"><span data-stu-id="7ae5c-163">[smart_admin.set_instance_backup &#40;Transact-SQL&#41;](https://msdn.microsoft.com/library/dn451009(v=sql.120).aspx)</span></span>|<span data-ttu-id="7ae5c-164">Системная хранимая процедура для включения и настройки параметров по умолчанию [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] для экземпляра SQL Server.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-164">System stored procedure for enabling and configuring default settings [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] for the SQL Server instance.</span></span>|  
|[<span data-ttu-id="7ae5c-165">smart_admin. sp_ backup_master_switch &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="7ae5c-165">smart_admin.sp_ backup_master_switch &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/managed-backup-sp-backup-master-switch-transact-sql)|<span data-ttu-id="7ae5c-166">Системные хранимые процедуры для приостановки и возобновления [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)].</span><span class="sxs-lookup"><span data-stu-id="7ae5c-166">System stored procedure to pause and resume [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)].</span></span>|  
|[<span data-ttu-id="7ae5c-167">smart_admin. sp_set_parameter &#40;&#41;Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="7ae5c-167">smart_admin.sp_set_parameter &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/managed-backup-sp-set-parameter-transact-sql)|<span data-ttu-id="7ae5c-168">Системные хранимые процедуры для включения и настройки мониторинга [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)].</span><span class="sxs-lookup"><span data-stu-id="7ae5c-168">System stored procedure to enable and configure monitoring for [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)].</span></span> <span data-ttu-id="7ae5c-169">Примеры: включение расширенных событий, настроек почты для уведомлений.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-169">Examples: enabling extended events, mail settings for notifications.</span></span>|  
|[<span data-ttu-id="7ae5c-170">smart_admin. sp_backup_on_demand &#40;&#41;Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="7ae5c-170">smart_admin.sp_backup_on_demand &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/managed-backup-sp-backup-on-demand-transact-sql)|<span data-ttu-id="7ae5c-171">Системная хранимая процедура, используемая для выполнения Специального резервного копирования базы данных, которая может использоваться [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] без нарушения цепочки журналов.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-171">System stored procedure that is used to perform an ad-hoc backup for a database that is enabled to use [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] without breaking the log chain.</span></span>|  
|[<span data-ttu-id="7ae5c-172">smart_admin. fn_backup_db_config &#40;&#41;Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="7ae5c-172">smart_admin.fn_backup_db_config &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-functions/managed-backup-fn-backup-db-config-transact-sql)|<span data-ttu-id="7ae5c-173">Системная функция, возвращающая текущее [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] состояние и значения конфигурации для базы данных или для всех баз данных в экземпляре.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-173">System function that returns the current [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] status and configuration values for a database, or for all the databases on the instance.</span></span>|  
|[<span data-ttu-id="7ae5c-174">smart_admin. fn_is_master_switch_on &#40;&#41;Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="7ae5c-174">smart_admin.fn_is_master_switch_on &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-functions/managed-backup-fn-is-master-switch-on-transact-sql)|<span data-ttu-id="7ae5c-175">Системная функция, которая возвращает состояние основного переключателя.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-175">System function that returns the status of the master switch.</span></span>|  
|[<span data-ttu-id="7ae5c-176">smart_admin. sp_get_backup_diagnostics &#40;&#41;Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="7ae5c-176">smart_admin.sp_get_backup_diagnostics &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/managed-backup-sp-get-backup-diagnostics-transact-sql)|<span data-ttu-id="7ae5c-177">Системная хранимая процедура, используемая для получения событий, зарегистрированных расширенными событиями.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-177">System stored procedure used to return the events logged by Extended Events.</span></span>|  
|[<span data-ttu-id="7ae5c-178">smart_admin. fn_get_parameter &#40;&#41;Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="7ae5c-178">smart_admin.fn_get_parameter &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-functions/managed-backup-fn-get-parameter-transact-sql)|<span data-ttu-id="7ae5c-179">Системная функция, возвращающая текущие значения системных параметров резервного копирования, таких как настройки мониторинга и почтовые настройки для оповещений.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-179">System function that returns the current values for backup system settings such as monitoring and mail settings for alerts.</span></span>|  
|[<span data-ttu-id="7ae5c-180">smart_admin. fn_available_backups &#40;&#41;Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="7ae5c-180">smart_admin.fn_available_backups &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-functions/managed-backup-fn-available-backups-transact-sql)|<span data-ttu-id="7ae5c-181">Хранимая процедура, используемая для получения доступных резервных копий заданной базы данных или всех баз данных в экземпляре.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-181">Stored Procedure used to retrieve available backups for a specified database or for all the databases in an instance.</span></span>|  
|[<span data-ttu-id="7ae5c-182">smart_admin. fn_get_current_xevent_settings &#40;&#41;Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="7ae5c-182">smart_admin.fn_get_current_xevent_settings &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-functions/managed-backup-fn-get-current-xevent-settings-transact-sql)|<span data-ttu-id="7ae5c-183">Системная функция, которая возвращает текущие настройки расширенных событий.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-183">System function that returns the current extended event settings.</span></span>|  
|[<span data-ttu-id="7ae5c-184">smart_admin. fn_get_health_status &#40;&#41;Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="7ae5c-184">smart_admin.fn_get_health_status &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-functions/managed-backup-fn-get-health-status-transact-sql)|<span data-ttu-id="7ae5c-185">Системная функция, которая возвращает объединенное число ошибок, зарегистрированных расширенными событиями для указанного периода.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-185">System function that returns the aggregated counts of errors logged by Extended Events for a specified period.</span></span>|  
|[<span data-ttu-id="7ae5c-186">Мониторинг управляемого резервного копирования SQL Server в Azure</span><span class="sxs-lookup"><span data-stu-id="7ae5c-186">Monitor SQL Server Managed Backup to Azure</span></span>](sql-server-managed-backup-to-microsoft-azure.md)|<span data-ttu-id="7ae5c-187">Расширенные события для наблюдения, уведомления по электронной почте об ошибках и предупреждениях, управления на основе политик SQL Server для [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)].</span><span class="sxs-lookup"><span data-stu-id="7ae5c-187">Extended Events for monitoring, email notification of errors and warnings, SQL Server Policy Based Management for [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] .</span></span>|  
  
#### <a name="backup-strategy"></a><span data-ttu-id="7ae5c-188">Стратегия резервного копирования</span><span class="sxs-lookup"><span data-stu-id="7ae5c-188">Backup Strategy</span></span>  
 <span data-ttu-id="7ae5c-189">**Стратегия резервного копирования, используемая [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] :**</span><span class="sxs-lookup"><span data-stu-id="7ae5c-189">**Backup Strategy used by [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)]:**</span></span>  
  
 <span data-ttu-id="7ae5c-190">Тип запланированных резервных копий и частоты резервного копирования определяется на основе рабочей нагрузки в базе данных.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-190">The type of backups scheduled and the backup frequency is determined based on the workload of the database.</span></span> <span data-ttu-id="7ae5c-191">Настройки срока хранения определяют длительность хранения файлов резервных копий в хранилище и для восстановления базы данных на момент времени в течение срока хранения.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-191">The retention period settings are used to determine the length of time a backup file should be retained in the storage and the ability to recover the database to a point-in-time within the retention period.</span></span>  
  
 <span data-ttu-id="7ae5c-192">**Соглашения для контейнера резервной копии и именования файлов:**</span><span class="sxs-lookup"><span data-stu-id="7ae5c-192">**Backup Container and File Naming Conventions:**</span></span>  
  
 [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)]<span data-ttu-id="7ae5c-193">называет контейнер службы хранилища Azure, используя имя экземпляра SQL Server для всех баз данных, Кроме баз данных доступности.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-193">names the Azure storage container using the SQL Server Instance Name for all databases except availability databases.</span></span>  <span data-ttu-id="7ae5c-194">Для баз данных доступности идентификатор GUID группы доступности используется для именования контейнера службы хранилища Azure.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-194">For availability databases, the Availability Group GUID is used to name the Azure storage container.</span></span>  
  
 <span data-ttu-id="7ae5c-195">Имя файла резервной копии для баз данных, не связанных с доступностью, называется следующим соглашением: оно создается с использованием первых 40 символов имени базы данных, GUID базы данных без символа "-" и метки времени.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-195">The backup file for non availability databases are named using the following convention: The name is created using the first 40 characters of the database name, the database GUID without the '-', and the timestamp.</span></span> <span data-ttu-id="7ae5c-196">Между сегментами в качестве разделителей вставляется подчеркивание.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-196">The underscore character is inserted between segments as separators.</span></span> <span data-ttu-id="7ae5c-197">Для полной резервной копии используется расширение **BAK** , а для резервной копии журналов — **LOG** .</span><span class="sxs-lookup"><span data-stu-id="7ae5c-197">The **.bak** file extension is used for full backup and **.log** for log backups.</span></span> <span data-ttu-id="7ae5c-198">Для баз данных группы доступности в дополнении к схеме именования, описанной выше, после 40 символов имени базы данных добавляется GUID группы доступности.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-198">For Avaialbility Group databases, in addition to the file naming convention described above, the Availability Group database GUID is added after the 40 characters of the database name.</span></span> <span data-ttu-id="7ae5c-199">Значение GUID базы данных группы доступности — это значение для group_database_id в sys.databases.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-199">The Availability Group database GUID value is the value for group_database_id in sys.databases.</span></span>  
  
 <span data-ttu-id="7ae5c-200">**Полное резервное копирование базы данных:** [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] агент планирует полную резервную копию базы данных, если выполняется одно из следующих условий.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-200">**Full Database Backup:** [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] agent schedules a full database backup if any of the following is true.</span></span>  
  
-   <span data-ttu-id="7ae5c-201">Функция [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] включается для базы данных впервые, или функция [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] активируется с параметрами по умолчанию на уровне экземпляра.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-201">A database is [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] enabled for the first time, or when [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] is enabled with default settings at the instance level.</span></span>  
  
-   <span data-ttu-id="7ae5c-202">Увеличение журнала после создания полной резервной копии не меньше 1 ГБ.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-202">The log growth since last full database backup is equal to or larger than 1 GB.</span></span>  
  
-   <span data-ttu-id="7ae5c-203">Максимальный интервал времени (1 неделя) прошел с момента последнего полного резервного копирования.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-203">The maximum time interval of one week has passed since the last full database backup.</span></span>  
  
-   <span data-ttu-id="7ae5c-204">Цепочка журналов прервана.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-204">The log chain is broken.</span></span> [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] <span data-ttu-id="7ae5c-205">периодически проверяет, сохранилась ли цепочка журналов, сравнивая первый и последний номера LSN файлов резервной копии.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-205">periodically checks to see whether the log chain is intact by comparing the first and last LSNs of the backup files.</span></span> <span data-ttu-id="7ae5c-206">Если по какой-то причине цепочка журналов прервана, [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] планирует полное резервное копирование базы данных.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-206">If there is break in the log chain for any reason, [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] schedules a full database backup.</span></span> <span data-ttu-id="7ae5c-207">Самая распространенная причина разрыва цепочки журналов — выполнение команды резервного копирования с помощью Transact-SQL или задачи резервного копирования в SQL Server Management Studio.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-207">The most common reason for log chain breaks is probably a backup command issued using Transact-SQL or through the Backup task in SQL Server Management Studio.</span></span>  <span data-ttu-id="7ae5c-208">К другим возможным причинам относится случайное удаление фалов журнала резервного копирования или случайная перезапись резервных копий.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-208">Other common scenarios include accidental deletion of the backup log files, or accidental overwrites of backups.</span></span>  
  
 <span data-ttu-id="7ae5c-209">**Резервная копия журнала транзакций:** [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] планирует резервное копирование журнала, если выполняется одно из следующих условий.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-209">**Transaction Log Backup:** [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] schedules a log backup if any of the following is true:</span></span>  
  
-   <span data-ttu-id="7ae5c-210">Не удается обнаружить историю резервного копирования журналов.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-210">There is no log backup history that can be found.</span></span> <span data-ttu-id="7ae5c-211">Это условие обычно выполняется, если [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] включается впервые.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-211">This is usually true when [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] is enabled for the first time.</span></span>  
  
-   <span data-ttu-id="7ae5c-212">Используемый объем журнала транзакций равен 5 МБ или больше.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-212">The transaction log space used is 5 MB or larger.</span></span>  
  
-   <span data-ttu-id="7ae5c-213">Достигнут максимальный интервал времени (2 часа) с момента создания последней резервной копии журналов.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-213">The maximum time interval of 2 hours since the last log backup is reached.</span></span>  
  
-   <span data-ttu-id="7ae5c-214">Каждый раз, когда резервная копия журнала транзакций отстает от полной резервной копии базы данных,</span><span class="sxs-lookup"><span data-stu-id="7ae5c-214">Any time the transaction log backup is lagging behind a full database backup.</span></span> <span data-ttu-id="7ae5c-215">целью является сохранение цепочки журналов до полной резервной копии.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-215">The goal is to keep the log chain ahead of full backup.</span></span>  
  
#### <a name="retention-period-settings"></a><span data-ttu-id="7ae5c-216">Параметры срока хранения</span><span class="sxs-lookup"><span data-stu-id="7ae5c-216">Retention Period Settings</span></span>  
 <span data-ttu-id="7ae5c-217">При включении резервного копирования необходимо задать срок хранения в днях: минимальное значение — 1 день, максимальное — 30 дней.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-217">When enabling backup you must set the retention period in days: The minimum is 1 day, and maximum is 30 days.</span></span>  
  
 [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] <span data-ttu-id="7ae5c-218">оценивает возможность восстановления базы данных на момент времени в течение заданного периода, чтобы определить, какие файлы резервной копии необходимо сохранить, а какие — удалить.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-218">based on the retention period settings, assesses the ability to recover to a point in time in the specified time, to determine what backup files to keep and identifying the backup files to delete.</span></span> <span data-ttu-id="7ae5c-219">Параметр backup_finish_date резервной копии используется для определения и сопоставления времени, заданного настройками срока хранения.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-219">The backup_finish_date of the backup is used to determine and match the time specified by the retention period settings.</span></span>  
  
#### <a name="important-considerations"></a><span data-ttu-id="7ae5c-220">Важные соображения</span><span class="sxs-lookup"><span data-stu-id="7ae5c-220">Important Considerations</span></span>  
 <span data-ttu-id="7ae5c-221">Существуют определенные рекомендации, влияние которых на операции [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] необходимо понять.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-221">There are some considerations that are important to understand their impact on [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] operations.</span></span> <span data-ttu-id="7ae5c-222">Они перечислены ниже.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-222">They are listed below:</span></span>  
  
-   <span data-ttu-id="7ae5c-223">Если для базы данных выполняется текущее задание полного резервного копирования базы данных, [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] ожидает завершения текущего задания до перехода к следующему заданию полного резервного копирования этой же базы данных.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-223">For a database, if there is an existing full database backup job running, then [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] waits for the current job to be completed before doing another full database backup for the same database.</span></span> <span data-ttu-id="7ae5c-224">Аналогичным образом в заданный момент времени может выполняться только одно задание резервного копирования журнала транзакций.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-224">Similarly, only one transaction log backup can be running at a given time.</span></span> <span data-ttu-id="7ae5c-225">Однако операции полного резервного копирования базы данных и резервного копирования журнала транзакций могут выполняться одновременно.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-225">However, a full database backup and a transaction log backup can run concurrently.</span></span> <span data-ttu-id="7ae5c-226">Ошибки записываются в журнал как расширенные события.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-226">Failures are logged as Extended Events.</span></span>  
  
-   <span data-ttu-id="7ae5c-227">Если запланировано больше 10 параллельных операций полного резервного копирования базы данных, через канал отладки расширенных событий передается предупреждение.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-227">If more than 10 concurrent full database backups are scheduled, a warning is issued through the debug channel of Extended Events.</span></span> [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] <span data-ttu-id="7ae5c-228">хранит очередь приоритетов для оставшихся баз данных, для которых нужно создать резервные копии, пока все операции резервного копирования не будут запланированы и завершены.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-228">then maintains a priority queue for the remaining databases that require a backup until the all backups are scheduled and completed.</span></span>  
  
###  <a name="support-limitations"></a><span data-ttu-id="7ae5c-229">Ограничения поддержки в <a name="support_limits"></a></span><span class="sxs-lookup"><span data-stu-id="7ae5c-229"><a name="support_limits"></a> Support Limitations</span></span>  
 <span data-ttu-id="7ae5c-230">Далее представлены некоторые ограничения, характерные для [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]:</span><span class="sxs-lookup"><span data-stu-id="7ae5c-230">The following are some limitations specific to [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]:</span></span>  
  
-   [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)]<span data-ttu-id="7ae5c-231">агент поддерживает резервное копирование только баз данных: полные резервные копии и журналы.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-231">agent supports database backups only: Full and Log Backups.</span></span>  <span data-ttu-id="7ae5c-232">Автоматическое резервное копирование файлов не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-232">File backup automation is not supported.</span></span>  
  
-   <span data-ttu-id="7ae5c-233">Операции [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] в текущий момент поддерживаются с помощью Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-233">[!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] operations are currently supported using Transact-SQL.</span></span> <span data-ttu-id="7ae5c-234">Мониторинг и устранение неполадок доступны с использованием расширенных событий.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-234">Monitoring and troubleshooting can be done by using Extended Events.</span></span> <span data-ttu-id="7ae5c-235">Поддержка PowerShell и SMO позволяет только настраивать параметры хранения и срока хранения по умолчанию для экземпляра SQL Server, а также контролировать состояние резервной копии и общую работоспособность на основе политик управления SQL Server.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-235">PowerShell and SMO support is limited to configuring storage and retention period default settings for an instance of SQL Server, and monitoring the backup status and overall health based on SQL Server Policy Based Management policies.</span></span>  
  
-   <span data-ttu-id="7ae5c-236">Системные базы данных не поддерживаются.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-236">System Databases are not supported.</span></span>  
  
-   <span data-ttu-id="7ae5c-237">Служба хранилища BLOB-объектов Azure — это единственный поддерживаемый вариант хранилища резервных копий.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-237">Azure Blob Storage service is the only supported backup storage option.</span></span> <span data-ttu-id="7ae5c-238">Резервные копии на диски или ленточные накопители не поддерживаются.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-238">Backups to disk or tape are not supported.</span></span>  
  
-   <span data-ttu-id="7ae5c-239">В настоящее время максимальный размер файла, допустимый для страничного BLOB-объекта в службе хранилища Azure, составляет 1 ТБ.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-239">Currently, the maximum file size allowed for a Page Blob in Azure Storage is 1 TB.</span></span> <span data-ttu-id="7ae5c-240">Файлы резервных копий, превышающие размер в 1 ТБ, вызовут ошибку.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-240">Backup files larger than 1 TB will fail.</span></span> <span data-ttu-id="7ae5c-241">Во избежание этой ситуации рекомендуется для больших баз данных использовать сжатие и проверять размер файла резервной копии до настройки [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)].</span><span class="sxs-lookup"><span data-stu-id="7ae5c-241">In order to avoid this situation, we recommend that for large databases, use compression and test the backup file size prior to setting up [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)].</span></span> <span data-ttu-id="7ae5c-242">Вы можете либо проверить резервное копирование на локальный диск, либо вручную создать резервную копию в службе хранилища Azure с помощью `BACKUP TO URL` инструкции Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-242">You can either test by backing up to a local disk or manually backing up to Azure storage using `BACKUP TO URL` Transact-SQL statement.</span></span> <span data-ttu-id="7ae5c-243">Дополнительные сведения см. в разделе [SQL Server Backup to URL](sql-server-backup-to-url.md).</span><span class="sxs-lookup"><span data-stu-id="7ae5c-243">For more information, see [SQL Server Backup to URL](sql-server-backup-to-url.md).</span></span>  
  
-   <span data-ttu-id="7ae5c-244">Модели восстановления. поддерживаются только базы данных, для которых настроена модель полного или с неполным протоколированием.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-244">Recovery Models: Only databases set to Full or Bulk-logged model are supported.</span></span>  <span data-ttu-id="7ae5c-245">Базы данных с простой моделью восстановления не поддерживаются.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-245">Databases set to simple recovery model are not supported.</span></span>  
  
-   [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] <span data-ttu-id="7ae5c-246">может накладывать определенные ограничения, если она настроена с другими технологиями, поддерживающими резервное копирование, высокий уровень доступности и аварийное восстановление.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-246">may have some limitations when it is configured with other technologies supporting backup, high availability, or disaster recovery.</span></span> <span data-ttu-id="7ae5c-247">Дополнительные сведения см. [в разделе SQL Server управляемое резервное копирование в Azure: взаимодействие и сосуществование](../../database-engine/sql-server-managed-backup-to-windows-azure-interoperability-and-coexistence.md).</span><span class="sxs-lookup"><span data-stu-id="7ae5c-247">For more information, see [SQL Server Managed Backup to Azure: Interoperability and Coexistence](../../database-engine/sql-server-managed-backup-to-windows-azure-interoperability-and-coexistence.md).</span></span>  
  
##  <a name="related-tasks"></a><a name="RelatedTasks"></a> <span data-ttu-id="7ae5c-248">Связанные задачи</span><span class="sxs-lookup"><span data-stu-id="7ae5c-248">Related Tasks</span></span>  
  
|||  
|-|-|  
|<span data-ttu-id="7ae5c-249">**Описания задач**</span><span class="sxs-lookup"><span data-stu-id="7ae5c-249">**Task descriptions**</span></span>|<span data-ttu-id="7ae5c-250">**Раздел**</span><span class="sxs-lookup"><span data-stu-id="7ae5c-250">**Topic**</span></span>|  
|<span data-ttu-id="7ae5c-251">Такие базовые задачи, как настройка [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] для базы данных или настройка параметров по умолчанию на уровне экземпляра, отключение [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] на уровне экземпляра или базы данных, приостановка и перезапуск [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)].</span><span class="sxs-lookup"><span data-stu-id="7ae5c-251">Basic tasks like configuring [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] for a database, or configuring default settings at the instance level, disabling [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] at instance or database level, pausing and restarting [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)].</span></span>|[<span data-ttu-id="7ae5c-252">Управляемое резервное копирование SQL Server в Azure — настройки периода хранения и хранилища</span><span class="sxs-lookup"><span data-stu-id="7ae5c-252">SQL Server Managed Backup to Azure - Retention and Storage Settings</span></span>](../../database-engine/sql-server-managed-backup-to-windows-azure-retention-and-storage-settings.md)|  
|<span data-ttu-id="7ae5c-253">**Учебник.** Пошаговые инструкции по настройке и мониторингу [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="7ae5c-253">**Tutorial:** Step by Step instructions to configuring and monitoring [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)].</span></span>|[<span data-ttu-id="7ae5c-254">Настройка управляемого резервного копирования SQL Server в Azure</span><span class="sxs-lookup"><span data-stu-id="7ae5c-254">Setting up SQL Server Managed Backup to Azure</span></span>](enable-sql-server-managed-backup-to-microsoft-azure.md)|  
|<span data-ttu-id="7ae5c-255">**Учебник.** Пошаговые инструкции по настройке и мониторингу [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] баз данных в группе доступности.</span><span class="sxs-lookup"><span data-stu-id="7ae5c-255">**Tutorial:** Step by Step instructions to configuring and monitoring [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] for databases in Availability Group.</span></span>|[<span data-ttu-id="7ae5c-256">Настройка управляемого резервного копирования SQL Server в Azure для групп доступности</span><span class="sxs-lookup"><span data-stu-id="7ae5c-256">Setting up SQL Server Managed Backup to Azure for Availability Groups</span></span>](../../database-engine/setting-up-sql-server-managed-backup-to-windows-azure-for-availability-groups.md)|  
|<span data-ttu-id="7ae5c-257">Средства, понятия и задачи, связанные с мониторингом [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)].</span><span class="sxs-lookup"><span data-stu-id="7ae5c-257">Tools and Concepts and tasks related to monitoring [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] .</span></span>|[<span data-ttu-id="7ae5c-258">Мониторинг управляемого резервного копирования SQL Server в Azure</span><span class="sxs-lookup"><span data-stu-id="7ae5c-258">Monitor SQL Server Managed Backup to Azure</span></span>](sql-server-managed-backup-to-microsoft-azure.md)|  
|<span data-ttu-id="7ae5c-259">Средства и сведения для устранения неполадок [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)].</span><span class="sxs-lookup"><span data-stu-id="7ae5c-259">Tools and steps to troubleshooting [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)].</span></span>|[<span data-ttu-id="7ae5c-260">Устранение неполадок SQL Server управляемого резервного копирования в Azure</span><span class="sxs-lookup"><span data-stu-id="7ae5c-260">Troubleshooting SQL Server Managed  Backup to Azure</span></span>](../../database-engine/troubleshooting-sql-server-managed-backup-to-windows-azure.md)|  
  
## <a name="see-also"></a><span data-ttu-id="7ae5c-261">См. также:</span><span class="sxs-lookup"><span data-stu-id="7ae5c-261">See Also</span></span>  
 <span data-ttu-id="7ae5c-262">[SQL Server резервного копирования и восстановления с помощью службы хранилища BLOB-объектов Azure](sql-server-backup-and-restore-with-microsoft-azure-blob-storage-service.md) </span><span class="sxs-lookup"><span data-stu-id="7ae5c-262">[SQL Server Backup and Restore with Azure Blob Storage Service](sql-server-backup-and-restore-with-microsoft-azure-blob-storage-service.md) </span></span>  
 <span data-ttu-id="7ae5c-263">[SQL Server резервное копирование на URL-адрес](sql-server-backup-to-url.md) </span><span class="sxs-lookup"><span data-stu-id="7ae5c-263">[SQL Server Backup to URL](sql-server-backup-to-url.md) </span></span>  
 <span data-ttu-id="7ae5c-264">[SQL Server управляемого резервного копирования в Azure: взаимодействие и сосуществование](../../database-engine/sql-server-managed-backup-to-windows-azure-interoperability-and-coexistence.md) </span><span class="sxs-lookup"><span data-stu-id="7ae5c-264">[SQL Server Managed Backup to Azure: Interoperability and Coexistence](../../database-engine/sql-server-managed-backup-to-windows-azure-interoperability-and-coexistence.md) </span></span>  
 [<span data-ttu-id="7ae5c-265">Устранение неполадок SQL Server управляемого резервного копирования в Azure</span><span class="sxs-lookup"><span data-stu-id="7ae5c-265">Troubleshooting SQL Server Managed  Backup to Azure</span></span>](../../database-engine/troubleshooting-sql-server-managed-backup-to-windows-azure.md)  
  
  
