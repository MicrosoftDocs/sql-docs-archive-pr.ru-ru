---
title: 'Резервное копирование и восстановление: взаимодействие и сосуществование (SQL Server) | Документация Майкрософт'
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: backup-restore
ms.topic: conceptual
helpviewer_keywords:
- file restores [SQL Server], related features
- restoring [SQL Server], files
- restoring files [SQL Server], related features
- backups [SQL Server], files or filegroups
- file backups [SQL Server], related features
ms.assetid: 69f212b8-edcd-4c5d-8a8a-679ced33c128
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: cd78e5f1e85510ec7a14548280a616a9b32aec55
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87654367"
---
# <a name="backup-and-restore-interoperability-and-coexistence-sql-server"></a><span data-ttu-id="6bafb-102">Резервное копирование и восстановление. Взаимодействие и сосуществование (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="6bafb-102">Backup and Restore: Interoperability and Coexistence (SQL Server)</span></span>
  <span data-ttu-id="6bafb-103">В этом разделе описываются вопросы резервного копирования и восстановления для нескольких функций [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)].</span><span class="sxs-lookup"><span data-stu-id="6bafb-103">This topic describes backup-and-restore considerations for several features in [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)].</span></span> <span data-ttu-id="6bafb-104">Это восстановление файлов и запуск базы данных, оперативное восстановление и отключенные индексы, зеркальное отображение базы данных, поэтапное восстановление и полнотекстовые индексы.</span><span class="sxs-lookup"><span data-stu-id="6bafb-104">These features include: file restore and database startup, online restore and disabled indexes, database mirroring, and piecemeal restore and full-text indexes.</span></span>  
  
 <span data-ttu-id="6bafb-105">**В этом разделе.**</span><span class="sxs-lookup"><span data-stu-id="6bafb-105">**In this Topic:**</span></span>  
  
-   [<span data-ttu-id="6bafb-106">Восстановление файлов и запуск базы данных</span><span class="sxs-lookup"><span data-stu-id="6bafb-106">File Restore and Database Startup</span></span>](#FileRestoreAndDbStartup)  
  
-   [<span data-ttu-id="6bafb-107">Восстановление в сети и отключенные индексы</span><span class="sxs-lookup"><span data-stu-id="6bafb-107">Online Restore and Disabled Indexes</span></span>](#OnlineRestoreAndDisabledIndexes)  
  
-   [<span data-ttu-id="6bafb-108">Резервное копирование и восстановление базы данных при зеркальном отображении</span><span class="sxs-lookup"><span data-stu-id="6bafb-108">Database Mirroring and Backup and Restore</span></span>](#DbMandBnR)  
  
-   [<span data-ttu-id="6bafb-109">Поэтапное восстановление и полнотекстовые индексы</span><span class="sxs-lookup"><span data-stu-id="6bafb-109">Piecemeal Restore and Full-Text Indexes</span></span>](#PiecemealAndFTIndexes)  
  
-   [<span data-ttu-id="6bafb-110">Резервное копирование, восстановление и сжатие файлов</span><span class="sxs-lookup"><span data-stu-id="6bafb-110">File Backup and Restore and Compression</span></span>](#FileBnRandCompression)  
  
-   [<span data-ttu-id="6bafb-111">Связанные задачи</span><span class="sxs-lookup"><span data-stu-id="6bafb-111">Related Tasks</span></span>](#RelatedTasks)  
  
##  <a name="file-restore-and-database-startup"></a><a name="FileRestoreAndDbStartup"></a> <span data-ttu-id="6bafb-112">Восстановление файлов и запуск базы данных</span><span class="sxs-lookup"><span data-stu-id="6bafb-112">File Restore and Database Startup</span></span>  
 <span data-ttu-id="6bafb-113">Этот раздел относится только к базам данных [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , содержащим несколько файловых групп.</span><span class="sxs-lookup"><span data-stu-id="6bafb-113">This section is relevant only for [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] databases that have multiple filegroups.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="6bafb-114">При запуске баз данных восстанавливаются и переводятся в режим «в сети» только те файловые группы, чьи файлы были в этом режиме при закрытии базы.</span><span class="sxs-lookup"><span data-stu-id="6bafb-114">When a database is started, only filegroups whose files were online when the database was closed are recovered and brought online.</span></span>  
  
 <span data-ttu-id="6bafb-115">Если во время запуска базы данных возникает проблема, восстановление завершается ошибкой, а база данных помечается как подозрительная (SUSPECT).</span><span class="sxs-lookup"><span data-stu-id="6bafb-115">If a problem is encountered during database startup, recovery fails, and the database is marked as SUSPECT.</span></span> <span data-ttu-id="6bafb-116">Если проблема касается только отдельных файлов, администратор базы данных может перевести их в режим «вне сети»и попытаться перезапустить базу данных.</span><span class="sxs-lookup"><span data-stu-id="6bafb-116">If the problem can be isolated to a file or files, the database administrator can take the files offline and try to restart the database.</span></span> <span data-ttu-id="6bafb-117">Для перевода файла в режим «вне сети» можно выполнить следующую инструкцию [ALTER DATABASE](/sql/t-sql/statements/alter-database-transact-sql) :</span><span class="sxs-lookup"><span data-stu-id="6bafb-117">To take a file offline, you can use the following [ALTER DATABASE](/sql/t-sql/statements/alter-database-transact-sql) statement:</span></span>  
  
 <span data-ttu-id="6bafb-118">ALTER DATABASE *database_name* изменить файл (Name **= " *`filename`* "**, offline)</span><span class="sxs-lookup"><span data-stu-id="6bafb-118">ALTER DATABASE *database_name* MODIFY FILE (NAME **='*`filename`*'**, OFFLINE)</span></span>  
  
 <span data-ttu-id="6bafb-119">Если запуск пройдет успешно, то любая файловая группа, содержащая файлы в режиме «вне сети», также будет находиться в режиме «вне сети».</span><span class="sxs-lookup"><span data-stu-id="6bafb-119">If startup succeeds, any filegroup that contains an offline file remains offline.</span></span>  
  
##  <a name="online-restore-and-disabled-indexes"></a><a name="OnlineRestoreAndDisabledIndexes"></a> <span data-ttu-id="6bafb-120">Восстановление в сети и отключенные индексы</span><span class="sxs-lookup"><span data-stu-id="6bafb-120">Online Restore and Disabled Indexes</span></span>  
 <span data-ttu-id="6bafb-121">Этот раздел относится только к базам данных, содержащим несколько файловых групп и (в случае простой модели восстановления) хотя бы одну файловую группу только для чтения.</span><span class="sxs-lookup"><span data-stu-id="6bafb-121">This section is relevant only for databases that have multiple filegroups and, for the simple recovery model, at least one read-only filegroup.</span></span>  
  
 <span data-ttu-id="6bafb-122">В этих случаях, если база данных находится в режиме «в сети», индекс может быть создан, удален, включен или отключен только в том случае, если все файловые группы, содержащие любую часть индекса, находятся в режиме «в сети».</span><span class="sxs-lookup"><span data-stu-id="6bafb-122">In these cases, when a database is online, the index can be created, dropped, enabled or disabled only if all filegroups holding any part of the index are online.</span></span>  
  
 <span data-ttu-id="6bafb-123">Сведения о восстановлении файловых групп вне сети см. в разделе [Восстановление в сети (SQL Server)](online-restore-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="6bafb-123">For information about restoring offline filegroups, see [Online Restore &#40;SQL Server&#41;](online-restore-sql-server.md).</span></span>  
  
##  <a name="database-mirroring-and-backup-and-restore"></a><a name="DbMandBnR"></a> <span data-ttu-id="6bafb-124">Резервное копирование и восстановление базы данных при зеркальном отображении</span><span class="sxs-lookup"><span data-stu-id="6bafb-124">Database Mirroring and Backup and Restore</span></span>  
 <span data-ttu-id="6bafb-125">Этот раздел относится только к тем базам данных, которые используют модель полного восстановления и содержат несколько файловых групп.</span><span class="sxs-lookup"><span data-stu-id="6bafb-125">This section is relevant only for full-model databases that have multiple filegroups.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="6bafb-126">В следующих версиях Microsoft [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]возможность зеркального отображения базы данных будет исключена.</span><span class="sxs-lookup"><span data-stu-id="6bafb-126">The database mirroring feature will be removed in a future version of Microsoft [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="6bafb-127">Избегайте использования этого компонента в новых разработках и запланируйте изменение существующих приложений, в которых он применяется.</span><span class="sxs-lookup"><span data-stu-id="6bafb-127">Avoid using this feature in new development work, and plan to modify applications that currently use this feature.</span></span> <span data-ttu-id="6bafb-128">Используйте вместо этого [!INCLUDE[ssHADR](../../includes/sshadr-md.md)].</span><span class="sxs-lookup"><span data-stu-id="6bafb-128">Use [!INCLUDE[ssHADR](../../includes/sshadr-md.md)] instead.</span></span>  
  
 <span data-ttu-id="6bafb-129">Зеркальное отображение базы данных — это решение, нацеленное на повышение ее доступности.</span><span class="sxs-lookup"><span data-stu-id="6bafb-129">Database mirroring is a solution for increasing database availability.</span></span> <span data-ttu-id="6bafb-130">Зеркальное отображение каждой базы данных осуществляется отдельно и работает только с теми базами данных, которые используют модель полного восстановления.</span><span class="sxs-lookup"><span data-stu-id="6bafb-130">Mirroring is implemented on a per-database basis and works only with databases that use the full recovery model.</span></span> <span data-ttu-id="6bafb-131">Дополнительные сведения см. в разделе [Зеркальное отображение базы данных (SQL Server)](../../database-engine/database-mirroring/database-mirroring-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="6bafb-131">For more information, see [Database Mirroring &#40;SQL Server&#41;](../../database-engine/database-mirroring/database-mirroring-sql-server.md).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="6bafb-132">Для распространения копий подмножества файловых групп в базе данных используется репликация: реплицируются только те объекты в файловых группах, которые необходимо копировать на другие серверы.</span><span class="sxs-lookup"><span data-stu-id="6bafb-132">To distribute copies of a subset of the filegroups in a database, use replication: replicate only those objects in the filegroups you want to copy to other servers.</span></span> <span data-ttu-id="6bafb-133">Дополнительные сведения о репликации см. в разделе [Репликация SQL Server](../../relational-databases/replication/sql-server-replication.md).</span><span class="sxs-lookup"><span data-stu-id="6bafb-133">For more information about replication, see [SQL Server Replication](../../relational-databases/replication/sql-server-replication.md).</span></span>  
  
### <a name="creating-the-mirror-database"></a><span data-ttu-id="6bafb-134">Создание зеркальной базы данных</span><span class="sxs-lookup"><span data-stu-id="6bafb-134">Creating the Mirror Database</span></span>  
 <span data-ttu-id="6bafb-135">Зеркальная база данных создается посредством восстановления с параметром WITH NORECOVERY резервных копий основной базы данных на зеркальном сервере.</span><span class="sxs-lookup"><span data-stu-id="6bafb-135">The mirror database is created by restoring, WITH NORECOVERY, backups of the principal database on the mirror server.</span></span> <span data-ttu-id="6bafb-136">При восстановлении базы данных должно сохраняться ее имя.</span><span class="sxs-lookup"><span data-stu-id="6bafb-136">The restore must keep the same database name.</span></span> <span data-ttu-id="6bafb-137">Дополнительные сведения см. в статье [Prepare a Mirror Database for Mirroring &#40;SQL Server&#41;](../../database-engine/database-mirroring/prepare-a-mirror-database-for-mirroring-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="6bafb-137">For more information, see [Prepare a Mirror Database for Mirroring &#40;SQL Server&#41;](../../database-engine/database-mirroring/prepare-a-mirror-database-for-mirroring-sql-server.md).</span></span>  
  
 <span data-ttu-id="6bafb-138">Зеркальная база данных может быть создана при использовании последовательности поэтапного восстановления, если она поддерживается.</span><span class="sxs-lookup"><span data-stu-id="6bafb-138">You can create the mirror database by using use a piecemeal restore sequence, where supported.</span></span> <span data-ttu-id="6bafb-139">Однако зеркальное отображение не может быть начато до тех пор, пока не будут восстановлены все файловые группы (и, как правило, резервные копии журналов), чтобы привести состояние зеркальной базы данных как можно ближе к основной.</span><span class="sxs-lookup"><span data-stu-id="6bafb-139">However, you cannot start mirroring until you have restored all the filegroups and, typically, restored log backups to get the mirror database close enough in time with the principal database.</span></span> <span data-ttu-id="6bafb-140">Дополнительные сведения см. в разделе [Поэтапное восстановление (SQL Server)](piecemeal-restores-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="6bafb-140">For more information, see [Piecemeal Restores &#40;SQL Server&#41;](piecemeal-restores-sql-server.md).</span></span>  
  
### <a name="restrictions-on-backup-and-restore-during-mirroring"></a><span data-ttu-id="6bafb-141">Ограничения на резервное копирование и восстановление в процессе зеркального отображения</span><span class="sxs-lookup"><span data-stu-id="6bafb-141">Restrictions on Backup and Restore During Mirroring</span></span>  
 <span data-ttu-id="6bafb-142">Во время активного сеанса зеркального отображения базы данных применяются следующие ограничения.</span><span class="sxs-lookup"><span data-stu-id="6bafb-142">While a database mirroring session is active, the following restrictions apply:</span></span>  
  
-   <span data-ttu-id="6bafb-143">Резервное копирование и восстановление зеркальной базы данных недопустимо.</span><span class="sxs-lookup"><span data-stu-id="6bafb-143">Backup and restore of the mirror database are not allowed.</span></span>  
  
-   <span data-ttu-id="6bafb-144">Резервное копирование основной базы данных допустимо, а операция BACKUP LOG WITH NORECOVERY недопустима.</span><span class="sxs-lookup"><span data-stu-id="6bafb-144">Backup of the principal database is allowed, but BACKUP LOG WITH NORECOVERY is not allowed.</span></span>  
  
-   <span data-ttu-id="6bafb-145">Восстановление основной базы данных недопустимо.</span><span class="sxs-lookup"><span data-stu-id="6bafb-145">Restoring the principal database is not allowed.</span></span>  
  
##  <a name="piecemeal-restore-and-full-text-indexes"></a><a name="PiecemealAndFTIndexes"></a> <span data-ttu-id="6bafb-146">Поэтапное восстановление и полнотекстовые индексы</span><span class="sxs-lookup"><span data-stu-id="6bafb-146">Piecemeal Restore and Full-Text Indexes</span></span>  
 <span data-ttu-id="6bafb-147">Сведения в этом разделе относятся только к базам данных, содержащим несколько файловых групп, а в случае простой модели базы данных — только к файловым группам только для чтения.</span><span class="sxs-lookup"><span data-stu-id="6bafb-147">This section is relevant only for databases that contain multiple filegroups and, for the simple-model databases, only for read-only filegroups.</span></span>  
  
 <span data-ttu-id="6bafb-148">Полнотекстовые индексы хранятся в файловых группах базы данных и могут быть затронуты поэтапным восстановлением.</span><span class="sxs-lookup"><span data-stu-id="6bafb-148">Full-text indexes are stored in database filegroups and can be affected by a piecemeal restore.</span></span> <span data-ttu-id="6bafb-149">Если полнотекстовый индекс расположен в той же файловой группе, что и какие-либо связанные с ним табличные данные, поэтапное восстановление работает предсказуемым образом.</span><span class="sxs-lookup"><span data-stu-id="6bafb-149">If the full-text index resides in the same filegroup as any of the associated table data, piecemeal restore works as expected.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="6bafb-150">Чтобы просмотреть идентификатор файловой группы, содержащей полнотекстовый индекс, выберите столбец data_space_id представления [sys.fulltext_indexes](/sql/relational-databases/system-catalog-views/sys-fulltext-indexes-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="6bafb-150">To view the filegroup ID of the filegroup that contains a full-text index, select the data_space_id column of [sys.fulltext_indexes](/sql/relational-databases/system-catalog-views/sys-fulltext-indexes-transact-sql).</span></span>  
  
### <a name="full-text-indexes-and-tables-in-separate-filegroups"></a><span data-ttu-id="6bafb-151">Полнотекстовые индексы и таблицы в разных файловых группах</span><span class="sxs-lookup"><span data-stu-id="6bafb-151">Full-Text Indexes and Tables in Separate Filegroups</span></span>  
 <span data-ttu-id="6bafb-152">Если полнотекстовый индекс расположен в другой файловой группе, отдельно от всех связанных с ним табличных данных, поведение поэтапного восстановления зависит от того, какие файловые группы восстанавливаются и переводятся в режим «в сети» первыми.</span><span class="sxs-lookup"><span data-stu-id="6bafb-152">If a full-text index resides in a separate filegroup from all of the associated table data, the behavior of piecemeal restore depends on which of the filegroups is restored and brought online first:</span></span>  
  
-   <span data-ttu-id="6bafb-153">Если файловая группа, содержащая полнотекстовый индекс, восстанавливается и переводится в режим «в сети» перед файловыми группами, содержащими связанные табличные данные, после перевода индекса в режим «в сети» полнотекстовый поиск работает предсказуемым образом.</span><span class="sxs-lookup"><span data-stu-id="6bafb-153">If the filegroup that contains the full-text index is restored and brought online before the filegroups that contain the associated table data, full-text search works as expected as soon as the full-text index is online.</span></span>  
  
-   <span data-ttu-id="6bafb-154">Напротив, если файловая группа, содержащая табличные данные, восстанавливается и переводится в режим «в сети» раньше файловой группы, содержащей полнотекстовый индекс, это может оказать влияние на работу полнотекстового поиска.</span><span class="sxs-lookup"><span data-stu-id="6bafb-154">If the filegroup that contains the table data is restored and brought online before the filegroup that contains the full-text index, full-text behavior might be affected.</span></span> <span data-ttu-id="6bafb-155">Это происходит из-за сбоя до перевода индекса в режим инструкций [!INCLUDE[tsql](../../includes/tsql-md.md)] «в сети», которые инициируют заполнение, перестраивают или реорганизуют каталог.</span><span class="sxs-lookup"><span data-stu-id="6bafb-155">This is because [!INCLUDE[tsql](../../includes/tsql-md.md)] statements that trigger a population, rebuild the catalog, or reorganize the catalog fail until the index is brought online.</span></span> <span data-ttu-id="6bafb-156">К таким инструкциям относятся CREATE FULLTEXT INDEX, ALTER FULLTEXT INDEX, DROP FULLTEXT INDEX и ALTER FULLTEXT CATALOG.</span><span class="sxs-lookup"><span data-stu-id="6bafb-156">These statements include CREATE FULLTEXT INDEX, ALTER FULLTEXT INDEX, DROP FULLTEXT INDEX, and ALTER FULLTEXT CATALOG.</span></span>  
  
     <span data-ttu-id="6bafb-157">В этом случае важны следующие факторы.</span><span class="sxs-lookup"><span data-stu-id="6bafb-157">In this case, the following factors are significant:</span></span>  
  
    -   <span data-ttu-id="6bafb-158">Если полнотекстовый индекс поддерживает отслеживание изменений, пользовательская DML-инструкция будет завершаться с ошибкой до тех пор, пока файловая группа с индексом не будет переведена в режим «в сети».</span><span class="sxs-lookup"><span data-stu-id="6bafb-158">If the full-text index has change tracking, user DML will fail until the index filegroup is brought online.</span></span> <span data-ttu-id="6bafb-159">Операция удаления будет также завершаться с ошибкой до перевода файловой группы индекса в режим «в сети».</span><span class="sxs-lookup"><span data-stu-id="6bafb-159">Delete operation will also fail until the index filegroup is online.</span></span>  
  
    -   <span data-ttu-id="6bafb-160">Независимо от отслеживания изменений, полнотекстовые запросы будут завершаться ошибкой, поскольку индекс недоступен.</span><span class="sxs-lookup"><span data-stu-id="6bafb-160">Regardless of change tracking, full-text queries fail because the index is not available.</span></span> <span data-ttu-id="6bafb-161">При попытке выполнить полнотекстовый запрос, если файловая группа с полнотекстовым индексом находится в режиме «вне сети», будет возвращена ошибка.</span><span class="sxs-lookup"><span data-stu-id="6bafb-161">If a full-text query is tried when the filegroup that contains the full-text index is offline, an error is returned.</span></span>  
  
    -   <span data-ttu-id="6bafb-162">Функции состояния (например, FULLTEXTCATALOGPROPERTY) выполняются успешно в тех случаях, когда они не пытаются получить доступ к полнотекстовому индексу.</span><span class="sxs-lookup"><span data-stu-id="6bafb-162">Status functions (such as FULLTEXTCATALOGPROPERTY) succeed only when they do not have to access full-text index.</span></span> <span data-ttu-id="6bafb-163">Например, обращение к любым полнотекстовым метаданным в сети будет выполнено успешно, а выполнение функций **uniquekeycount, itemcount** завершится ошибкой.</span><span class="sxs-lookup"><span data-stu-id="6bafb-163">For example, access to any online full-text metadata would succeed, but **uniquekeycount, itemcount** would fail.</span></span>  
  
     <span data-ttu-id="6bafb-164">После того как файловая группа с полнотекстовым индексом восстановлена и переведена в режим «в сети», данные индекса и табличные данные являются согласованными.</span><span class="sxs-lookup"><span data-stu-id="6bafb-164">After the full-text index filegroup is restored and brought online, the index data and table data are consistent.</span></span>  
  
 <span data-ttu-id="6bafb-165">После перевода файловой группы базовой таблицы и файловой группы полнотекстового индекса в режим «в сети» приостановленное полнотекстовое заполнение восстанавливается.</span><span class="sxs-lookup"><span data-stu-id="6bafb-165">As soon as both the base table filegroup and the full-text index filegroup are online, any paused full-text population is resumed.</span></span>  
  
##  <a name="file-backup-and-restore-and-compression"></a><a name="FileBnRandCompression"></a> <span data-ttu-id="6bafb-166">Резервное копирование, восстановление и сжатие файлов</span><span class="sxs-lookup"><span data-stu-id="6bafb-166">File Backup and Restore and Compression</span></span>  
 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="6bafb-167">поддерживает сжатие данных в файловой системе NTFS для файловых групп, доступных только для чтения, и баз данных, доступных только для чтения.</span><span class="sxs-lookup"><span data-stu-id="6bafb-167">supports NTFS file system data compression of read-only filegroups and read-only databases.</span></span>  
  
 <span data-ttu-id="6bafb-168">В файловых группах только для чтения поддерживается восстановление сжатых файлов NTFS.</span><span class="sxs-lookup"><span data-stu-id="6bafb-168">Restoring files in a read-only filegroup is supported on compressed NTFS files.</span></span> <span data-ttu-id="6bafb-169">Такие группы файлов архивируются и восстанавливаются точно так же, как любые другие файловые группы только для чтения, за некоторым исключением.</span><span class="sxs-lookup"><span data-stu-id="6bafb-169">Backup and restore of these filegroups works essentially as it would for any read-only filegroup, with the following exceptions:</span></span>  
  
-   <span data-ttu-id="6bafb-170">Восстановление файла для чтения и записи (включая основные файлы и файлы журналов базы данных для чтения и записи) в том, где используется сжатие, выполнить невозможно.</span><span class="sxs-lookup"><span data-stu-id="6bafb-170">Restoring a read-write file (including the primary or log files of a read-write database) to a compressed volume fails and displays an error.</span></span>  
  
-   <span data-ttu-id="6bafb-171">Разрешается восстанавливать базу данных только для чтения в том со сжатием.</span><span class="sxs-lookup"><span data-stu-id="6bafb-171">Restoring a read-only database to a compressed volume is allowed.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="6bafb-172">Файлы журнала или доступные для чтения и записи базы данных ни в коем случае не следует размещать в файловых системах со сжатием.</span><span class="sxs-lookup"><span data-stu-id="6bafb-172">Log files of read/write databases should never be placed on compressed file systems.</span></span>  
  
##  <a name="related-tasks"></a><a name="RelatedTasks"></a> <span data-ttu-id="6bafb-173">Связанные задачи</span><span class="sxs-lookup"><span data-stu-id="6bafb-173">Related Tasks</span></span>  
  
-   [<span data-ttu-id="6bafb-174">Подготовка зеркальной базы данных к зеркальному отображению (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="6bafb-174">Prepare a Mirror Database for Mirroring &#40;SQL Server&#41;</span></span>](../../database-engine/database-mirroring/prepare-a-mirror-database-for-mirroring-sql-server.md)  
  
-   [<span data-ttu-id="6bafb-175">Создание резервных копий и восстановление полнотекстовых каталогов и индексов</span><span class="sxs-lookup"><span data-stu-id="6bafb-175">Back Up and Restore Full-Text Catalogs and Indexes</span></span>](../search/back-up-and-restore-full-text-catalogs-and-indexes.md)  
  
## <a name="see-also"></a><span data-ttu-id="6bafb-176">См. также:</span><span class="sxs-lookup"><span data-stu-id="6bafb-176">See Also</span></span>  
 <span data-ttu-id="6bafb-177">[Резервное копирование и восстановление баз данных SQL Server](back-up-and-restore-of-sql-server-databases.md) </span><span class="sxs-lookup"><span data-stu-id="6bafb-177">[Back Up and Restore of SQL Server Databases](back-up-and-restore-of-sql-server-databases.md) </span></span>  
 <span data-ttu-id="6bafb-178">[Создание резервной копии и восстановление из копий реплицируемых баз данных](../replication/administration/back-up-and-restore-replicated-databases.md) </span><span class="sxs-lookup"><span data-stu-id="6bafb-178">[Back Up and Restore Replicated Databases](../replication/administration/back-up-and-restore-replicated-databases.md) </span></span>  
 [<span data-ttu-id="6bafb-179">Активные вторичные реплики: резервное копирование в &#40;-получателях группы доступности AlwaysOn&#41;</span><span class="sxs-lookup"><span data-stu-id="6bafb-179">Active Secondaries: Backup on Secondary Replicas &#40;AlwaysOn Availability Groups&#41;</span></span>](../../database-engine/availability-groups/windows/active-secondaries-backup-on-secondary-replicas-always-on-availability-groups.md)  
  
  
