---
title: Зеркальные наборы носителей резервных копий | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: backup-restore
ms.topic: conceptual
helpviewer_keywords:
- recovery [SQL Server], mirrored backups
- mirrored media sets [SQL Server]
- backup mirrors [SQL Server]
- duplicate backup copies
- interchangeable backup copies [SQL Server]
- media sets [SQL Server], mirrored backup media sets
- backup media [SQL Server], mirrored media
ms.assetid: 05a0b8d1-3585-4f77-972f-69d1c0d4aa9b
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: ce3513c67a0087dd00021de75f360b19819b46db
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87668389"
---
# <a name="mirrored-backup-media-sets-sql-server"></a>Зеркальные наборы носителей резервных копий (SQL Server)
    
> [!NOTE]  
>  Зеркальные наборы носителей резервной копии поддерживаются только в выпуске [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]Enterprise.  
  
 Зеркальное отображение набора носителей повышает надежность резервного копирования за счет уменьшения влияния сбоев в работе устройства резервного копирования на сохранность резервной копии. Эти сбои имеют особо серьезное значение, поскольку резервные копии являются последней линией обороны перед потерей данных. По мере роста баз данных в объеме увеличивается вероятность того, что сбой в работе устройства резервного копирования или носителя сделает резервную копию невосстановимой. Зеркальное отображение носителей резервных копий повышает надежность резервных копий за счет избыточности.  
  
> [!NOTE]  
>  Общие сведения о наборах носителей см. в разделе [Наборы носителей, семейства носителей и резервные наборы данных (SQL Server)](media-sets-media-families-and-backup-sets-sql-server.md)Enterprise.  
  
 **В этом разделе.**  
  
-   [Общие сведения о зеркальных наборах носителей](#OverviewofMirroredMediaSets)  
  
-   [Требования к оборудованию для зеркальных резервных копий](#HardwareReqs)  
  
-   [Связанные задачи](#RelatedTasks)  
  
##  <a name="overview-of-mirrored-media-sets"></a><a name="OverviewofMirroredMediaSets"></a> Общие сведения о зеркальных наборах носителей  
 Зеркальное отображение носителей является свойством набора носителей. *Зеркальный набор носителей* состоит из нескольких копий (*зеркал*) набора носителей. Набор носителей состоит из одной или нескольких семейств носителей, каждое из которых соответствует устройству резервного копирования. Например, если предложение TO инструкции BACKUP DATABASE содержит три устройства, то BACKUP распределяет данные между трех семейств носителей, по одной на устройство. Количество семейств носителей и зеркал определяется при создании набора носителей (при помощи инструкции BACKUP DATABASE с параметром WITH FORMAT).  
  
 Зеркальный набор носителей может иметь от двух до четырех зеркал. Каждое зеркало содержит все семейства носителей набора носителей. Для зеркал необходимо одинаковое количество устройств, по одному на семейство носителей. Для каждого зеркала необходимо отдельное устройство резервного копирования для каждого семейства носителей. Например, зеркальный набор носителей, содержащий четыре семейства носителей с тремя зеркалами, должен иметь двенадцать устройств резервного копирования. Все эти устройства должны быть эквивалентными. Например, накопители на магнитной ленте должны быть одинаковой модели и сделанными одним производителем.  
  
 На рисунке ниже показан пример зеркального набора носителей, состоящий из двух семейств носителей с двумя зеркалами. Каждое семейство носителей содержит три тома, резервное копирование которых производится однократно на каждом зеркале.  
  
 ![Зеркальный набор носителей: два семейства с двумя зеркальными копиями](../../database-engine/media/bnr-backup-media-mirror.gif "Зеркальный набор носителей: два семейства с двумя зеркальными копиями")  
  
 Соответствующие тома на зеркалах имеют идентичное содержимое. Это делает их взаимозаменяемыми при восстановлении. Например, на предыдущем рисунке третий том носителя tape2 является взаимозаменяемым с третьим томом носителя tape0.  
  
 Компонент [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] посредством синхронизации записей на устройствах обеспечивает идентичность содержимого на зеркально отображенных носителях. Окончание заполнения любого из зеркал означает, что заполнены все зеркала.  
  
> [!IMPORTANT]  
>  Зеркальный набор данных не может быть неявно разбит (разделен) удалением зеркала. Если какой-либо из накопителей на магнитной ленте или диск в зеркале поврежден или переформатирован, зеркало более непригодно для дополнительных резервных копий. Если хотя бы одно полное зеркало остается нетронутым, данные с набора носителей могут быть считаны. Если в каждом зеркале утрачено данное семейство носителей, набор носителей бесполезен.  
  
 Операции резервного копирования и восстановления предъявляют разные требования на предмет обязательности наличия всех зеркал. При выполнении операции резервного копирования для записи (то есть создания или расширения) зеркального набора носителей требуется наличие всех зеркал. При восстановлении из копии на зеркальном наборе носителей, напротив, можно указать по одному зеркалу для каждого семейства носителей. Восстановление можно осуществлять с меньшего числа устройств, чем число имеющихся семейств носителей, но каждое семейство носителей обрабатывается лишь один раз. Но в случае ошибок наличие других зеркальных носителей позволяет быстро устранить некоторые проблемы восстановления. Поврежденный том носителя можно заменить соответствующим томом с другого зеркала. Так происходит потому, что RESTORE и RESTORE VERIFYONLY поддерживают замену поврежденного носителя соответствующим томом носителя резервной копии с другого зеркала.  
  
##  <a name="hardware-requirements-for-backup-mirrors"></a><a name="HardwareReqs"></a> Требования к оборудованию для зеркальных резервных копий  
 Зеркальное отображение применяется к дискам и накопителям на магнитной ленте (на дисках не поддерживается использование дополнительных лент). Все устройства резервного копирования для отдельной операции резервного копирования или восстановления должны быть одного типа — диск или накопитель на магнитной ленте.  
  
 В рамках этих двух классов следует использовать сходные устройства, имеющие одни и те же свойства. При недостаточной степени сходства устройств выдается сообщение об ошибке (3212). Во избежание возможной несовместимости устройств используйте устройства, являющиеся равноценными, то есть только носители одной модели от одного производителя.  
  
##  <a name="related-tasks"></a><a name="RelatedTasks"></a> Связанные задачи  
 **Создание резервных копий на зеркальных устройствах резервного копирования**  
  
-   [Создание резервной копии на зеркальном наборе носителей (Transact-SQL)](back-up-to-a-mirrored-media-set-transact-sql.md)  
  
## <a name="see-also"></a>См. также:  
 [Возможные ошибки носителей во время резервного копирования и восстановления (SQL Server)](possible-media-errors-during-backup-and-restore-sql-server.md)   
 [RESTORE VERIFYONLY (Transact-SQL)](/sql/t-sql/statements/restore-statements-verifyonly-transact-sql)   
 [Устройства резервного копирования (SQL Server)](backup-devices-sql-server.md)   
 [Наборы носителей, семейства носителей и резервные наборы данных (SQL Server)](media-sets-media-families-and-backup-sets-sql-server.md)  
  
  
