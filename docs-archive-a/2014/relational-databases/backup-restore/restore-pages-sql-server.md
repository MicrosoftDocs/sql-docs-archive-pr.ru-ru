---
title: Восстановление страниц (SQL Server) | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: backup-restore
ms.topic: conceptual
f1_keywords:
- sql12.swb.restorepage.general.f1
helpviewer_keywords:
- restoring pages [SQL Server]
- pages [SQL Server], restoring
- databases [SQL Server], damaged
- page restores [SQL Server]
- pages [SQL Server], damaged
- restoring [SQL Server], pages
ms.assetid: 07e40950-384e-4d84-9ac5-84da6dd27a91
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 6fb008314b9cb156f1cc575bda71b6364eca6e3a
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87730754"
---
# <a name="restore-pages-sql-server"></a><span data-ttu-id="572e7-102">Восстановление страниц (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="572e7-102">Restore Pages (SQL Server)</span></span>
  <span data-ttu-id="572e7-103">В этом разделе описано, как восстанавливать страницы в [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] с помощью среды [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] или [!INCLUDE[tsql](../../includes/tsql-md.md)].</span><span class="sxs-lookup"><span data-stu-id="572e7-103">This topic describes how to restore pages in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] by using [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] or [!INCLUDE[tsql](../../includes/tsql-md.md)].</span></span> <span data-ttu-id="572e7-104">Задачей восстановления страниц является восстановление одной или нескольких поврежденных страниц без восстановления всей базы данных.</span><span class="sxs-lookup"><span data-stu-id="572e7-104">The goal of a page restore is to restore one or more damaged pages without restoring the whole database.</span></span> <span data-ttu-id="572e7-105">Обычно страницы, являющиеся кандидатами на восстановление, в результате ошибок доступа помечаются как «подозрительные».</span><span class="sxs-lookup"><span data-stu-id="572e7-105">Typically, pages that are candidates for restore have been marked as "suspect" because of an error that is encountered when accessing the page.</span></span> <span data-ttu-id="572e7-106">Информация об указанных подозрительных страницах хранится в таблице [suspect_pages](/sql/relational-databases/system-tables/suspect-pages-transact-sql) базы данных **msdb** .</span><span class="sxs-lookup"><span data-stu-id="572e7-106">Suspect pages are identified in the [suspect_pages](/sql/relational-databases/system-tables/suspect-pages-transact-sql) table in the **msdb** database.</span></span>  
  
 <span data-ttu-id="572e7-107">**В этом разделе**</span><span class="sxs-lookup"><span data-stu-id="572e7-107">**In This Topic**</span></span>  
  
-   <span data-ttu-id="572e7-108">**Перед началом работы**</span><span class="sxs-lookup"><span data-stu-id="572e7-108">**Before you begin:**</span></span>  
  
     [<span data-ttu-id="572e7-109">Области использования функции восстановления страниц</span><span class="sxs-lookup"><span data-stu-id="572e7-109">When is a Page Restore Useful?</span></span>](#WhenUseful)  
  
     [<span data-ttu-id="572e7-110">Ограничения</span><span class="sxs-lookup"><span data-stu-id="572e7-110">Limitations and Restrictions</span></span>](#Restrictions)  
  
     [<span data-ttu-id="572e7-111">Рекомендации</span><span class="sxs-lookup"><span data-stu-id="572e7-111">Recommendations</span></span>](#Recommendations)  
  
     [<span data-ttu-id="572e7-112">Безопасность</span><span class="sxs-lookup"><span data-stu-id="572e7-112">Security</span></span>](#Security)  
  
-   <span data-ttu-id="572e7-113">**Восстановление страниц с помощью:**</span><span class="sxs-lookup"><span data-stu-id="572e7-113">**To restore pages, using:**</span></span>  
  
     [<span data-ttu-id="572e7-114">Среда SQL Server Management Studio</span><span class="sxs-lookup"><span data-stu-id="572e7-114">SQL Server Management Studio</span></span>](#SSMSProcedure)  
  
     [<span data-ttu-id="572e7-115">Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="572e7-115">Transact-SQL</span></span>](#TsqlProcedure)  
  
##  <a name="before-you-begin"></a><a name="BeforeYouBegin"></a> <span data-ttu-id="572e7-116">Перед началом</span><span class="sxs-lookup"><span data-stu-id="572e7-116">Before You Begin</span></span>  
  
###  <a name="when-is-a-page-restore-useful"></a><a name="WhenUseful"></a> <span data-ttu-id="572e7-117">Области использования функции восстановления страниц</span><span class="sxs-lookup"><span data-stu-id="572e7-117">When is a Page Restore Useful?</span></span>  
 <span data-ttu-id="572e7-118">Восстановление страницы предназначено для исправления отдельных поврежденных страниц.</span><span class="sxs-lookup"><span data-stu-id="572e7-118">A page restore is intended for repairing isolated damaged pages.</span></span> <span data-ttu-id="572e7-119">Восстановление нескольких отдельных страниц может потребовать меньше времени, чем восстановление файла, и уменьшить объем данных, которые будут недоступны во время операции восстановления вне сети.</span><span class="sxs-lookup"><span data-stu-id="572e7-119">Restoring and recovering a few individual pages might be faster than a file restore, reducing the amount of data that is offline during a restore operation.</span></span> <span data-ttu-id="572e7-120">Но в тех случаях, когда в файле требуется восстановление относительно большого числа страниц, может оказаться более эффективным восстановить весь файл.</span><span class="sxs-lookup"><span data-stu-id="572e7-120">However, if you have to restore more than a few pages in a file, it is generally more efficient to restore the whole file.</span></span> <span data-ttu-id="572e7-121">Большое количество таких страниц на устройстве может быть признаком приближающегося сбоя оборудования. В этом случае попробуйте вместо восстановления страниц восстановить файл целиком, по возможности в другое место, и отремонтировать устройство.</span><span class="sxs-lookup"><span data-stu-id="572e7-121">For example, if lots of pages on a device indicate a pending device failure, consider restoring the file, possibly to another location, and repairing the device.</span></span>  
  
 <span data-ttu-id="572e7-122">Более того, не все страницы с ошибками нужно восстанавливать.</span><span class="sxs-lookup"><span data-stu-id="572e7-122">Furthermore, not all page errors require a restore.</span></span> <span data-ttu-id="572e7-123">Проблема может относиться к кэшированным данным, например во вторичном индексе. Эта проблема разрешается повторным вычислением этих данных.</span><span class="sxs-lookup"><span data-stu-id="572e7-123">A problem can occur in cached data, such as a secondary index, that can be resolved by recalculating the data.</span></span> <span data-ttu-id="572e7-124">Например, если администратор базы данных удалил, а затем перестроил вторичный индекс, то поврежденные данные после исправления не отражаются в таблице [suspect_pages](/sql/relational-databases/system-tables/suspect-pages-transact-sql) .</span><span class="sxs-lookup"><span data-stu-id="572e7-124">For example, if the database administrator drops a secondary index and rebuilds it, the corrupted data, although fixed, is not indicated as such in the [suspect_pages](/sql/relational-databases/system-tables/suspect-pages-transact-sql) table.</span></span>  
  
###  <a name="limitations-and-restrictions"></a><a name="Restrictions"></a> <span data-ttu-id="572e7-125">Ограничения</span><span class="sxs-lookup"><span data-stu-id="572e7-125">Limitations and Restrictions</span></span>  
  
-   <span data-ttu-id="572e7-126">Восстановление страницы применяется к базам данных [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , где используется модель полного восстановления или модель восстановления с неполным протоколированием.</span><span class="sxs-lookup"><span data-stu-id="572e7-126">Page restore applies to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] databases that are using the full or bulk-logged recovery models.</span></span> <span data-ttu-id="572e7-127">Поддержка восстановления страниц осуществляется только для файловых групп, доступных для чтения и записи.</span><span class="sxs-lookup"><span data-stu-id="572e7-127">Page restore is supported only for read/write filegroups.</span></span>  
  
-   <span data-ttu-id="572e7-128">Только страницы базы данных могут быть восстановлены.</span><span class="sxs-lookup"><span data-stu-id="572e7-128">Only database pages can be restored.</span></span> <span data-ttu-id="572e7-129">Восстановление страниц не может быть использовано для восстановления нижеприведенных компонентов:</span><span class="sxs-lookup"><span data-stu-id="572e7-129">Page restore cannot be used to restore the following:</span></span>  
  
    -   <span data-ttu-id="572e7-130">Журнал транзакций</span><span class="sxs-lookup"><span data-stu-id="572e7-130">Transaction log</span></span>  
  
    -   <span data-ttu-id="572e7-131">Страницы размещения: страницы глобальной карты распределения (GAM), страницы общей глобальной карты (SGAM) и страницы свободного места на странице (PFS).</span><span class="sxs-lookup"><span data-stu-id="572e7-131">Allocation pages: Global Allocation Map (GAM) pages, Shared Global Allocation Map (SGAM) pages, and Page Free Space (PFS) pages.</span></span>  
  
    -   <span data-ttu-id="572e7-132">Страница 0 всех файлов данных (загрузочная страница файла)</span><span class="sxs-lookup"><span data-stu-id="572e7-132">Page 0 of all data files (the file boot page)</span></span>  
  
    -   <span data-ttu-id="572e7-133">Страница 1:9 (загрузочная страница базы данных)</span><span class="sxs-lookup"><span data-stu-id="572e7-133">Page 1:9 (the database boot page)</span></span>  
  
    -   <span data-ttu-id="572e7-134">Полнотекстовый каталог</span><span class="sxs-lookup"><span data-stu-id="572e7-134">Full-text catalog</span></span>  
  
-   <span data-ttu-id="572e7-135">Для базы данных, использующей модель восстановления с неполным протоколированием, восстановление страниц требует выполнения следующих дополнительных условий.</span><span class="sxs-lookup"><span data-stu-id="572e7-135">For a database that uses the bulk-logged recovery model, page restore has the following additional conditions:</span></span>  
  
    -   <span data-ttu-id="572e7-136">Создание резервных копий в момент, когда файловая группа или данные страницы находятся в режиме «вне сети», затруднительно для данных с неполным протоколированием, поскольку данные в режиме «вне сети» не записываются в журнал.</span><span class="sxs-lookup"><span data-stu-id="572e7-136">Backing up while filegroup or page data is offline is problematic for bulk-logged data, because the offline data is not recorded in the log.</span></span> <span data-ttu-id="572e7-137">Пребывание любой страницы в режиме «вне сети» может помешать резервному копированию журнала.</span><span class="sxs-lookup"><span data-stu-id="572e7-137">Any offline page can prevent backing up the log.</span></span> <span data-ttu-id="572e7-138">В этом случае следует использовать команду DBCC REPAIR, так как при этом потери данных будут меньше, чем при восстановлении из самой последней резервной копии.</span><span class="sxs-lookup"><span data-stu-id="572e7-138">In this cases, consider using DBCC REPAIR, because this might cause less data loss than restoring to the most recent backup.</span></span>  
  
    -   <span data-ttu-id="572e7-139">Когда при резервном копировании журнала базы данных с неполным протоколированием выявляется поврежденная страница, оно завершается ошибкой, если не указано предложение WITH CONTINUE_AFTER_ERROR.</span><span class="sxs-lookup"><span data-stu-id="572e7-139">If a log backup of a bulk-logged database encounters a bad page, it fails unless WITH CONTINUE_AFTER_ERROR is specified.</span></span>  
  
    -   <span data-ttu-id="572e7-140">Восстановление страниц обычно не работает в модели восстановления с неполным протоколированием.</span><span class="sxs-lookup"><span data-stu-id="572e7-140">Page restore generally does not work with bulk-logged recovery.</span></span>  
  
         <span data-ttu-id="572e7-141">Лучший способ выполнить восстановление страницы — это установить для базы данных модель полного восстановления и выполнить попытку резервного копирования журнала.</span><span class="sxs-lookup"><span data-stu-id="572e7-141">A best practice for performing page restore is to set the database to the full recovery model, and try a log backup.</span></span> <span data-ttu-id="572e7-142">Если восстановление журнала работает, то можно продолжить и выполнить восстановление страницы.</span><span class="sxs-lookup"><span data-stu-id="572e7-142">If the log backup works, you can continue with the page restore.</span></span> <span data-ttu-id="572e7-143">В случае ошибка резервного копирования журнала придется либо потерять все изменения с момента предыдущего резервного копирования журнала, либо попытаться выполнить проверку базы данных (DBCC) с параметром REPAIR_ALLOW_DATA_LOSS.</span><span class="sxs-lookup"><span data-stu-id="572e7-143">If the log backup fails, you either have to lose work since the previous log backup or you have to try running DBCC must be run with the REPAIR_ALLOW_DATA_LOSS option.</span></span>  
  
###  <a name="recommendations"></a><a name="Recommendations"></a> <span data-ttu-id="572e7-144">Рекомендации</span><span class="sxs-lookup"><span data-stu-id="572e7-144">Recommendations</span></span>  
  
-   <span data-ttu-id="572e7-145">Сценарии восстановления страницы</span><span class="sxs-lookup"><span data-stu-id="572e7-145">Page restore scenarios:</span></span>  
  
     <span data-ttu-id="572e7-146">Восстановление страниц в режиме «вне сети»</span><span class="sxs-lookup"><span data-stu-id="572e7-146">Offline page restore</span></span>  
     <span data-ttu-id="572e7-147">Все выпуски [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] поддерживают восстановление страниц, когда база данных находится в автономном режиме.</span><span class="sxs-lookup"><span data-stu-id="572e7-147">All editions of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] support restoring pages when the database is offline.</span></span> <span data-ttu-id="572e7-148">На время проведения восстановление страниц в автономном режиме база данных переключается в соответствующий режим.</span><span class="sxs-lookup"><span data-stu-id="572e7-148">In an offline page restore, the database is offline while damaged pages are restored.</span></span> <span data-ttu-id="572e7-149">В конце последовательности восстановления база данных переходит в режим «в сети».</span><span class="sxs-lookup"><span data-stu-id="572e7-149">At the end of the restore sequence, the database comes online.</span></span>  
  
     <span data-ttu-id="572e7-150">Восстановление страниц в оперативном режиме</span><span class="sxs-lookup"><span data-stu-id="572e7-150">Online page restore</span></span>  
     [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="572e7-151">Выпуск Enterprise поддерживает восстановление страниц в оперативном режиме. Но если база данных работает в режиме "вне сети", то используется функция автономного восстановления.</span><span class="sxs-lookup"><span data-stu-id="572e7-151">Enterprise edition supports online page restores, though they use offline restore if the database is currently offline.</span></span> <span data-ttu-id="572e7-152">В большинстве случаев поврежденная страница может быть восстановлена во время работы базы данных в режиме «в сети», включая файловую группу, в которой должна быть восстановлена страница.</span><span class="sxs-lookup"><span data-stu-id="572e7-152">In most cases, a damaged page can be restored while the database remains online, including the filegroup to which a page is being restored.</span></span> <span data-ttu-id="572e7-153">Если первичная файловая группа находится в режиме «в сети», а одна или несколько дополнительных файловых групп находятся в режиме «вне сети», используются операции оперативного восстановления.</span><span class="sxs-lookup"><span data-stu-id="572e7-153">When the primary filegroup is online, even if one or more of its secondary filegroups are offline, page restores are usually performed online.</span></span> <span data-ttu-id="572e7-154">Иногда для восстановления поврежденной страницы необходимо использовать функции автономного восстановления.</span><span class="sxs-lookup"><span data-stu-id="572e7-154">Occasionally, however, a damaged page can require an offline restore.</span></span> <span data-ttu-id="572e7-155">Например, повреждение некоторых важных страниц может привести к проблемам с запуском базы данных.</span><span class="sxs-lookup"><span data-stu-id="572e7-155">For example, damage to certain critical pages might prevent the database from starting.</span></span>  
  
    > [!WARNING]  
    >  <span data-ttu-id="572e7-156">Если поврежденные страницы содержат критические метаданные баз данных, то во время попытки восстановление страниц в оперативном режиме при выполнении необходимых обновлений метаданных может произойти ошибка.</span><span class="sxs-lookup"><span data-stu-id="572e7-156">If damaged pages are storing critical database metadata, required updates to metadata might fail during an online page restore attempt.</span></span> <span data-ttu-id="572e7-157">В этом случае можно выполнить восстановление страниц в автономном режиме, но сначала необходимо создать [резервную копию заключительного фрагмента журнала](tail-log-backups-sql-server.md) (путем резервного копирования журнала транзакций с параметром RESTORE WITH NORECOVERY).</span><span class="sxs-lookup"><span data-stu-id="572e7-157">In this case, you can perform an offline page restore, but first you must create a [tail log backup](tail-log-backups-sql-server.md) (by backing up the transaction log using RESTORE WITH NORECOVERY).</span></span>  
  
-   <span data-ttu-id="572e7-158">Для восстановления страниц используются усовершенствованные функции отчетов об ошибках на уровне страниц (включая контрольные суммы страниц) и функции отслеживания.</span><span class="sxs-lookup"><span data-stu-id="572e7-158">Page restore takes advantage of the improved page-level error reporting (including page checksums) and tracking.</span></span> <span data-ttu-id="572e7-159">Страницы, определенные как имеющие такие ошибки, как контрольное суммирование или прерванная запись, т. е. *поврежденные страницы*, можно восстановить с помощью операции восстановления страниц.</span><span class="sxs-lookup"><span data-stu-id="572e7-159">Pages that are detected as corrupted by check-summing or a torn write, *damaged pages*, can be restored by a page restore operation.</span></span> <span data-ttu-id="572e7-160">Восстанавливаются только явно определенные страницы.</span><span class="sxs-lookup"><span data-stu-id="572e7-160">Only explicitly specified pages are restored.</span></span> <span data-ttu-id="572e7-161">Каждая указанная страница заменяется копией страницы из указанной резервной копии данных.</span><span class="sxs-lookup"><span data-stu-id="572e7-161">Each specified page is replaced by the copy of that page from the specified data backup.</span></span>  
  
     <span data-ttu-id="572e7-162">При восстановлении последующих резервных копий журналов они применяются только к файлам базы данных, содержащим хотя бы одну восстанавливаемую страницу.</span><span class="sxs-lookup"><span data-stu-id="572e7-162">When you restore the subsequent log backups, they are applied only to database files that contain at least one page that is being recovered.</span></span> <span data-ttu-id="572e7-163">Для перевода файловой группы в состояние, соответствующее текущему файлу журнала, необходимо применить непрерывную последовательность резервных копий журнала к последнему экземпляру, полученному в результате полного или разностного восстановления.</span><span class="sxs-lookup"><span data-stu-id="572e7-163">An unbroken chain of log backups must be applied to the last full or differential restore to bring the filegroup that contains the page forward to the current log file.</span></span> <span data-ttu-id="572e7-164">Как и при восстановлении файлов, набор данных наката продвигается одним проходом повторения журнала.</span><span class="sxs-lookup"><span data-stu-id="572e7-164">As in a file restore, the roll forward set is advanced with a single log redo pass.</span></span> <span data-ttu-id="572e7-165">Для успешного выполнения операции восстановления состояние восстановленных страниц должно соответствовать состоянию базы данных.</span><span class="sxs-lookup"><span data-stu-id="572e7-165">For a page restore to succeed, the restored pages must be recovered to a state consistent with the database.</span></span>  
  
###  <a name="security"></a><a name="Security"></a> <span data-ttu-id="572e7-166">безопасность</span><span class="sxs-lookup"><span data-stu-id="572e7-166">Security</span></span>  
  
####  <a name="permissions"></a><a name="Permissions"></a> <span data-ttu-id="572e7-167">Permissions</span><span class="sxs-lookup"><span data-stu-id="572e7-167">Permissions</span></span>  
 <span data-ttu-id="572e7-168">Если восстанавливаемая база данных не существуют, для выполнения инструкции RESTORE у пользователя должны быть разрешения CREATE DATABASE.</span><span class="sxs-lookup"><span data-stu-id="572e7-168">If the database being restored does not exist, the user must have CREATE DATABASE permissions to be able to execute RESTORE.</span></span> <span data-ttu-id="572e7-169">Если база данных существует, разрешения на выполнение инструкции RESTORE по умолчанию предоставлены членам предопределенных ролей сервера **sysadmin** и **dbcreator** , а также владельцу базы данных (**dbo**) (для параметра FROM DATABASE_SNAPSHOT база данных всегда существует).</span><span class="sxs-lookup"><span data-stu-id="572e7-169">If the database exists, RESTORE permissions default to members of the **sysadmin** and **dbcreator** fixed server roles and the owner (**dbo**) of the database (for the FROM DATABASE_SNAPSHOT option, the database always exists).</span></span>  
  
 <span data-ttu-id="572e7-170">Разрешения на выполнение инструкции RESTORE даются ролям, в которых данные о членстве всегда доступны серверу.</span><span class="sxs-lookup"><span data-stu-id="572e7-170">RESTORE permissions are given to roles in which membership information is always readily available to the server.</span></span> <span data-ttu-id="572e7-171">Так как членство в предопределенной роли базы данных может быть проверено только тогда, когда база данных доступна и не повреждена, что не всегда имеет место при выполнении инструкции RESTORE, члены предопределенной роли базы данных **db_owner** не имеют разрешений RESTORE.</span><span class="sxs-lookup"><span data-stu-id="572e7-171">Because fixed database role membership can be checked only when the database is accessible and undamaged, which is not always the case when RESTORE is executed, members of the **db_owner** fixed database role do not have RESTORE permissions.</span></span>  
  
##  <a name="using-sql-server-management-studio"></a><a name="SSMSProcedure"></a> <span data-ttu-id="572e7-172">Использование среды SQL Server Management Studio</span><span class="sxs-lookup"><span data-stu-id="572e7-172">Using SQL Server Management Studio</span></span>  
 <span data-ttu-id="572e7-173">Начиная с [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], среда [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] поддерживает восстановление страниц.</span><span class="sxs-lookup"><span data-stu-id="572e7-173">Starting in [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] supports page restores.</span></span>  
  
#### <a name="to-restore-pages"></a><span data-ttu-id="572e7-174">Восстановление страниц</span><span class="sxs-lookup"><span data-stu-id="572e7-174">To restore pages</span></span>  
  
1.  <span data-ttu-id="572e7-175">После подключения к соответствующему экземпляру компонента [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)]в обозревателе объектов разверните дерево сервера, щелкнув имя сервера.</span><span class="sxs-lookup"><span data-stu-id="572e7-175">Connect to the appropriate instance of the [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)], in Object Explorer, click the server name to expand the server tree.</span></span>  
  
2.  <span data-ttu-id="572e7-176">Разверните узел **Базы данных**.</span><span class="sxs-lookup"><span data-stu-id="572e7-176">Expand **Databases**.</span></span> <span data-ttu-id="572e7-177">В зависимости от типа восстанавливаемой базы данных выберите пользовательскую базу данных или раскройте узел **Системные базы данных**и выберите системную базу данных.</span><span class="sxs-lookup"><span data-stu-id="572e7-177">Depending on the database, either select a user database or expand **System Databases**, and then select a system database.</span></span>  
  
3.  <span data-ttu-id="572e7-178">Щелкните правой кнопкой мыши базу данных, выберите пункт **Задачи**, затем пункт **Восстановить**и пункт **Страница**. Откроется диалоговое окно **Восстановление страницы** .</span><span class="sxs-lookup"><span data-stu-id="572e7-178">Right-click the database, point to **Tasks**, point to **Restore**, and then click **Page**, which opens the **Restore Page** dialog box.</span></span>  
  
     <span data-ttu-id="572e7-179">**Восстановление**</span><span class="sxs-lookup"><span data-stu-id="572e7-179">**Restore**</span></span>  
     <span data-ttu-id="572e7-180">В этом разделе выполняется та же функция, что и в пункте **Восстановить в** из раздела [Восстановление базы данных (страница "Общие")](../../integration-services/general-page-of-integration-services-designers-options.md).</span><span class="sxs-lookup"><span data-stu-id="572e7-180">This section performs the same function as that of **Restore to** on the [Restore Database (General Page)](../../integration-services/general-page-of-integration-services-designers-options.md).</span></span>  
  
     <span data-ttu-id="572e7-181">**База данных**</span><span class="sxs-lookup"><span data-stu-id="572e7-181">**Database**</span></span>  
     <span data-ttu-id="572e7-182">Задает базу данных для восстановления.</span><span class="sxs-lookup"><span data-stu-id="572e7-182">Specifies the database to restore.</span></span> <span data-ttu-id="572e7-183">Можно ввести новую базу данных или выбрать уже существующую из раскрывающегося списка.</span><span class="sxs-lookup"><span data-stu-id="572e7-183">You can enter a new database or select an existing database from the drop-down list.</span></span> <span data-ttu-id="572e7-184">Список включает все базы данных на сервере, за исключением системных баз данных **master** и **tempdb**.</span><span class="sxs-lookup"><span data-stu-id="572e7-184">The list includes all databases on the server, except the system databases **master** and **tempdb**.</span></span>  
  
    > [!WARNING]  
    >  <span data-ttu-id="572e7-185">Для восстановления резервной копии, защищенной паролем, необходимо использовать инструкцию [RESTORE](/sql/t-sql/statements/restore-statements-transact-sql) .</span><span class="sxs-lookup"><span data-stu-id="572e7-185">To restore a password-protected backup, you must use the [RESTORE](/sql/t-sql/statements/restore-statements-transact-sql) statement.</span></span>  
  
     <span data-ttu-id="572e7-186">**Резервная копия заключительного фрагмента журнала**</span><span class="sxs-lookup"><span data-stu-id="572e7-186">**Tail-Log backup**</span></span>  
     <span data-ttu-id="572e7-187">Введите или выберите имя файла в поле **Устройство резервного копирования** , где будет сохранена резервная копия заключительного фрагмента журнала для базы данных.</span><span class="sxs-lookup"><span data-stu-id="572e7-187">Enter or select a file name in **Backup device** where there tail-log backup will be stored for the database.</span></span>  
  
     <span data-ttu-id="572e7-188">**Резервные наборы данных**</span><span class="sxs-lookup"><span data-stu-id="572e7-188">**Backup Sets**</span></span>  
     <span data-ttu-id="572e7-189">В этом разделе рассматриваются резервные наборы данных, участвующие в восстановлении.</span><span class="sxs-lookup"><span data-stu-id="572e7-189">This section displays the backup sets involved in the restoration.</span></span>  
  
    |<span data-ttu-id="572e7-190">Заголовок</span><span class="sxs-lookup"><span data-stu-id="572e7-190">Header</span></span>|<span data-ttu-id="572e7-191">Значения</span><span class="sxs-lookup"><span data-stu-id="572e7-191">Values</span></span>|  
    |------------|------------|  
    |<span data-ttu-id="572e7-192">**имя**;</span><span class="sxs-lookup"><span data-stu-id="572e7-192">**Name**</span></span>|<span data-ttu-id="572e7-193">Имя резервного набора данных.</span><span class="sxs-lookup"><span data-stu-id="572e7-193">The name of the backup set.</span></span>|  
    |<span data-ttu-id="572e7-194">**Компонент**</span><span class="sxs-lookup"><span data-stu-id="572e7-194">**Component**</span></span>|<span data-ttu-id="572e7-195">Компонент, сохраненный в резервной копии: **база данных**, **файл** или **\<blank>** (для журналов транзакций).</span><span class="sxs-lookup"><span data-stu-id="572e7-195">The backed-up component: **Database**, **File**, or **\<blank>** (for transaction logs).</span></span>|  
    |<span data-ttu-id="572e7-196">**Тип**</span><span class="sxs-lookup"><span data-stu-id="572e7-196">**Type**</span></span>|<span data-ttu-id="572e7-197">Тип выполняемого резервного копирования: **Полное**, **Разностное**или **Журнал транзакций**.</span><span class="sxs-lookup"><span data-stu-id="572e7-197">The type of backup performed: **Full**, **Differential**, or **Transaction Log**.</span></span>|  
    |<span data-ttu-id="572e7-198">**Server**</span><span class="sxs-lookup"><span data-stu-id="572e7-198">**Server**</span></span>|<span data-ttu-id="572e7-199">Имя экземпляра компонента [!INCLUDE[ssDE](../../includes/ssde-md.md)] , выполнившего операцию резервного копирования.</span><span class="sxs-lookup"><span data-stu-id="572e7-199">The name of the [!INCLUDE[ssDE](../../includes/ssde-md.md)] instance that performed the backup operation.</span></span>|  
    |<span data-ttu-id="572e7-200">**База данных**</span><span class="sxs-lookup"><span data-stu-id="572e7-200">**Database**</span></span>|<span data-ttu-id="572e7-201">Имя базы данных, участвовавшей в операции резервного копирования.</span><span class="sxs-lookup"><span data-stu-id="572e7-201">The name of the database involved in the backup operation.</span></span>|  
    |<span data-ttu-id="572e7-202">**Положение**</span><span class="sxs-lookup"><span data-stu-id="572e7-202">**Position**</span></span>|<span data-ttu-id="572e7-203">Расположение резервного набора данных в томе.</span><span class="sxs-lookup"><span data-stu-id="572e7-203">The position of the backup set in the volume.</span></span>|  
    |<span data-ttu-id="572e7-204">**Первый номер LSN**</span><span class="sxs-lookup"><span data-stu-id="572e7-204">**First LSN**</span></span>|<span data-ttu-id="572e7-205">Регистрационный номер в журнале первой транзакции в резервном наборе данных.</span><span class="sxs-lookup"><span data-stu-id="572e7-205">The log sequence number (LSN) of the first transaction in the backup set.</span></span> <span data-ttu-id="572e7-206">Пустой для резервных копий файлов.</span><span class="sxs-lookup"><span data-stu-id="572e7-206">Blank for file backups.</span></span>|  
    |<span data-ttu-id="572e7-207">**Последний номер LSN**</span><span class="sxs-lookup"><span data-stu-id="572e7-207">**Last LSN**</span></span>|<span data-ttu-id="572e7-208">Регистрационный номер в журнале последней транзакции в резервном наборе данных.</span><span class="sxs-lookup"><span data-stu-id="572e7-208">The log sequence number (LSN) of the last transaction in the backup set.</span></span> <span data-ttu-id="572e7-209">Пустой для резервных копий файлов.</span><span class="sxs-lookup"><span data-stu-id="572e7-209">Blank for file backups.</span></span>|  
    |<span data-ttu-id="572e7-210">**Номер LSN для контрольной точки**</span><span class="sxs-lookup"><span data-stu-id="572e7-210">**Checkpoint LSN**</span></span>|<span data-ttu-id="572e7-211">Регистрационный номер транзакции в журнале (номер LSN) для последней контрольной точки на время создания резервной копии.</span><span class="sxs-lookup"><span data-stu-id="572e7-211">The log sequence number (LSN) of the most recent checkpoint at the time the backup was created.</span></span>|  
    |<span data-ttu-id="572e7-212">**Полный номер LSN**</span><span class="sxs-lookup"><span data-stu-id="572e7-212">**Full LSN**</span></span>|<span data-ttu-id="572e7-213">Номер LSN в журнале последнего полного резервного копирования базы данных.</span><span class="sxs-lookup"><span data-stu-id="572e7-213">The log sequence number (LSN) of the most recent full database backup.</span></span>|  
    |<span data-ttu-id="572e7-214">**Дата начала**</span><span class="sxs-lookup"><span data-stu-id="572e7-214">**Start Date**</span></span>|<span data-ttu-id="572e7-215">Дата и время начала операции резервного копирования, указанные в региональных настройках клиента.</span><span class="sxs-lookup"><span data-stu-id="572e7-215">The date and time when the backup operation began, presented in the regional setting of the client.</span></span>|  
    |<span data-ttu-id="572e7-216">**Дата завершения**</span><span class="sxs-lookup"><span data-stu-id="572e7-216">**Finish Date**</span></span>|<span data-ttu-id="572e7-217">Дата и время завершения операции резервного копирования, указанные в формате, соответствующем региональным настройкам клиента.</span><span class="sxs-lookup"><span data-stu-id="572e7-217">The date and time when the backup operation finished, presented in the regional setting of the client.</span></span>|  
    |<span data-ttu-id="572e7-218">**Размер**</span><span class="sxs-lookup"><span data-stu-id="572e7-218">**Size**</span></span>|<span data-ttu-id="572e7-219">Размер резервного набора данных в байтах.</span><span class="sxs-lookup"><span data-stu-id="572e7-219">The size of the backup set in bytes.</span></span>|  
    |<span data-ttu-id="572e7-220">**Имя пользователя**</span><span class="sxs-lookup"><span data-stu-id="572e7-220">**User Name**</span></span>|<span data-ttu-id="572e7-221">Имя пользователя, выполнившего операцию резервного копирования.</span><span class="sxs-lookup"><span data-stu-id="572e7-221">The name of the user who performed the backup operation.</span></span>|  
    |<span data-ttu-id="572e7-222">**Истечение срока**</span><span class="sxs-lookup"><span data-stu-id="572e7-222">**Expiration**</span></span>|<span data-ttu-id="572e7-223">Дата и время истечения срока действия резервного набора данных.</span><span class="sxs-lookup"><span data-stu-id="572e7-223">The date and time the backup set expires.</span></span>|  
  
     <span data-ttu-id="572e7-224">Выберите **Проверка** для проверки целостности файлов резервных копий, необходимых для операции восстановления страниц.</span><span class="sxs-lookup"><span data-stu-id="572e7-224">Click **Verify** to check the integrity of the backup files needed to perform the page restore operation.</span></span>  
  
4.  <span data-ttu-id="572e7-225">Чтобы найти поврежденные страницы, выберите нужную базу данных поле **База данных** и нажмите кнопку **Проверить страницы базы данных**.</span><span class="sxs-lookup"><span data-stu-id="572e7-225">To identify corrupted pages, with the correct database selected in the **Database** box, click **Check Database Pages**.</span></span> <span data-ttu-id="572e7-226">Выполнение этой операции занимает длительное время.</span><span class="sxs-lookup"><span data-stu-id="572e7-226">This is a long running operation.</span></span>  
  
    > [!WARNING]  
    >  <span data-ttu-id="572e7-227">Чтобы восстановить конкретные неповрежденные страницы, нажмите кнопку **Добавить** и введите **Идентификатор файла** и **Идентификатор страница** для восстанавливаемых страниц.</span><span class="sxs-lookup"><span data-stu-id="572e7-227">To restore specific pages that are not corrupted, click **Add** and enter the **File ID** and **Page ID** of the pages to be restored.</span></span>  
  
5.  <span data-ttu-id="572e7-228">Для определения восстанавливаемых страниц используется сетка страниц.</span><span class="sxs-lookup"><span data-stu-id="572e7-228">The pages grid is used to identify the pages to be restored.</span></span> <span data-ttu-id="572e7-229">Изначально эта сетка заполняется с использованием системной таблицы [suspect_pages](/sql/relational-databases/system-tables/suspect-pages-transact-sql) .</span><span class="sxs-lookup"><span data-stu-id="572e7-229">Initially, this grid is populated from the [suspect_pages](/sql/relational-databases/system-tables/suspect-pages-transact-sql) system table.</span></span> <span data-ttu-id="572e7-230">Для добавления или удаления страниц из сетки используйте команды **Добавить** или **Удалить**.</span><span class="sxs-lookup"><span data-stu-id="572e7-230">To add or remove pages from the grid, click **Add** or **Remove**.</span></span> <span data-ttu-id="572e7-231">Дополнительные сведения см. в разделе [Управление таблицей suspect_pages (SQL Server)](manage-the-suspect-pages-table-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="572e7-231">For more information, see [Manage the suspect_pages Table &#40;SQL Server&#41;](manage-the-suspect-pages-table-sql-server.md).</span></span>  
  
6.  <span data-ttu-id="572e7-232">В сетке **Резервные наборы данных** перечислены резервные наборы в плане восстановления по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="572e7-232">The **Backup sets** grid lists the backup sets in the default restore plan.</span></span> <span data-ttu-id="572e7-233">При необходимости нажмите кнопку **Проверить** , чтобы убедиться, не выполняя восстановление, что резервные копии могут быть прочитаны, а резервные наборы данных являются полными.</span><span class="sxs-lookup"><span data-stu-id="572e7-233">Optionally, click **Verify** to verify that the backups are readable and that the backup sets are complete, without restoring them.</span></span> <span data-ttu-id="572e7-234">Дополнительные сведения см. в разделе [RESTORE VERIFYONLY (Transact-SQL)](/sql/t-sql/statements/restore-statements-verifyonly-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="572e7-234">For more information, see [RESTORE VERIFYONLY &#40;Transact-SQL&#41;](/sql/t-sql/statements/restore-statements-verifyonly-transact-sql).</span></span>  
  
     <span data-ttu-id="572e7-235">**Страницы**</span><span class="sxs-lookup"><span data-stu-id="572e7-235">**Pages**</span></span>  
  
7.  <span data-ttu-id="572e7-236">Чтобы восстановить страницы, перечисленные в сетке страниц, нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="572e7-236">To restore the pages listed in the pages grid, click **OK**.</span></span>  
  
##  <a name="using-transact-sql"></a><a name="TsqlProcedure"></a> <span data-ttu-id="572e7-237">Использование Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="572e7-237">Using Transact-SQL</span></span>  
 <span data-ttu-id="572e7-238">Чтобы указать страницу в инструкции RESTORE DATABASE, понадобится идентификатор файла, содержащего страницу, и идентификатор страницы.</span><span class="sxs-lookup"><span data-stu-id="572e7-238">To specify a page in a RESTORE DATABASE statement, you need the file ID of the file containing the page and the page ID of the page.</span></span> <span data-ttu-id="572e7-239">Необходимый синтаксис выглядит следующим образом:</span><span class="sxs-lookup"><span data-stu-id="572e7-239">The required syntax is as follows:</span></span>  
  
 `RESTORE DATABASE <database_name>`  
  
 `PAGE = '<file: page> [ ,... n ] ' [ ,... n ]`  
  
 `FROM <backup_device> [ ,... n ]`  
  
 `WITH NORECOVERY`  
  
 <span data-ttu-id="572e7-240">Дополнительные сведения о параметрах PAGE см. в разделе [Аргументы RESTORE (Transact-SQL)](/sql/t-sql/statements/restore-statements-arguments-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="572e7-240">For more information about the parameters of the PAGE option, see [RESTORE Arguments &#40;Transact-SQL&#41;](/sql/t-sql/statements/restore-statements-arguments-transact-sql).</span></span> <span data-ttu-id="572e7-241">Дополнительные сведения о синтаксисе RESTORE DATABASE см. в разделе [RESTORE (Transact-SQL)](/sql/t-sql/statements/restore-statements-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="572e7-241">For more information about the RESTORE DATABASE syntax, see [RESTORE &#40;Transact-SQL&#41;](/sql/t-sql/statements/restore-statements-transact-sql).</span></span>  
  
#### <a name="to-restore-pages"></a><span data-ttu-id="572e7-242">Восстановление страниц</span><span class="sxs-lookup"><span data-stu-id="572e7-242">To restore pages</span></span>  
  
1.  <span data-ttu-id="572e7-243">Получите идентификаторы поврежденных страниц, подлежащих восстановлению.</span><span class="sxs-lookup"><span data-stu-id="572e7-243">Obtain the page IDs of the damaged pages to be restored.</span></span> <span data-ttu-id="572e7-244">Контрольное суммирование или прерванная запись возвращают идентификатор страницы, обеспечивая сведения, необходимые для указания страниц.</span><span class="sxs-lookup"><span data-stu-id="572e7-244">A checksum or torn write error returns page ID, providing the information required for specifying the pages.</span></span> <span data-ttu-id="572e7-245">Чтобы определить идентификатор поврежденной страницы, используйте любой из нижеследующих источников.</span><span class="sxs-lookup"><span data-stu-id="572e7-245">To look up page ID of a damaged page, use any of the following sources.</span></span>  
  
    |<span data-ttu-id="572e7-246">Источник идентификатора страницы</span><span class="sxs-lookup"><span data-stu-id="572e7-246">Source of page ID</span></span>|<span data-ttu-id="572e7-247">Раздел</span><span class="sxs-lookup"><span data-stu-id="572e7-247">Topic</span></span>|  
    |-----------------------|-----------|  
    |<span data-ttu-id="572e7-248">**msdb.suspect_pages**</span><span class="sxs-lookup"><span data-stu-id="572e7-248">**msdb..suspect_pages**</span></span>|[<span data-ttu-id="572e7-249">Управление таблицей suspect_pages (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="572e7-249">Manage the suspect_pages Table &#40;SQL Server&#41;</span></span>](manage-the-suspect-pages-table-sql-server.md)|  
    |<span data-ttu-id="572e7-250">Журнал ошибок</span><span class="sxs-lookup"><span data-stu-id="572e7-250">Error log</span></span>|[<span data-ttu-id="572e7-251">Просмотр журнала ошибок SQL Server (среда SQL Server Management Studio)</span><span class="sxs-lookup"><span data-stu-id="572e7-251">View the SQL Server Error Log &#40;SQL Server Management Studio&#41;</span></span>](../../ssms/sql-server-management-studio-ssms.md)|  
    |<span data-ttu-id="572e7-252">История событий</span><span class="sxs-lookup"><span data-stu-id="572e7-252">Event traces</span></span>|[<span data-ttu-id="572e7-253">Наблюдение и обработка событий</span><span class="sxs-lookup"><span data-stu-id="572e7-253">Monitor and Respond to Events</span></span>](../../ssms/agent/monitor-and-respond-to-events.md)|  
    |<span data-ttu-id="572e7-254">DBCC</span><span class="sxs-lookup"><span data-stu-id="572e7-254">DBCC</span></span>|[<span data-ttu-id="572e7-255">DBCC (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="572e7-255">DBCC &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/database-console-commands/dbcc-transact-sql)|  
    |<span data-ttu-id="572e7-256">Поставщик WMI</span><span class="sxs-lookup"><span data-stu-id="572e7-256">WMI provider</span></span>|[<span data-ttu-id="572e7-257">Основные понятия о поставщике WMI для событий сервера</span><span class="sxs-lookup"><span data-stu-id="572e7-257">WMI Provider for Server Events Concepts</span></span>](../wmi-provider-server-events/wmi-provider-for-server-events-concepts.md)|  
  
2.  <span data-ttu-id="572e7-258">Начните восстановление страниц с полной резервной копии базы данных либо резервной копии файла или файловой группы, содержащей страницу.</span><span class="sxs-lookup"><span data-stu-id="572e7-258">Start a page restore with a full database, file, or filegroup backup that contains the page.</span></span> <span data-ttu-id="572e7-259">В инструкции RESTORE DATABASE используйте предложение PAGE для перечисления идентификаторов всех страниц, подлежащих восстановлению.</span><span class="sxs-lookup"><span data-stu-id="572e7-259">In the RESTORE DATABASE statement, use the PAGE clause to list the page IDs of all of the pages to be restored.</span></span>  
  
3.  <span data-ttu-id="572e7-260">Примените последние разностные резервные копии.</span><span class="sxs-lookup"><span data-stu-id="572e7-260">Apply the most recent differentials .</span></span>  
  
4.  <span data-ttu-id="572e7-261">Примените последующие резервные копии журнала.</span><span class="sxs-lookup"><span data-stu-id="572e7-261">Apply the subsequent log backups.</span></span>  
  
5.  <span data-ttu-id="572e7-262">Создайте новую резервную копию журнала базы данных, включающую в себя итоговый номер LSN восстановленных страниц, то есть момент, когда последняя из восстановленных страниц переведена в режим «вне сети».</span><span class="sxs-lookup"><span data-stu-id="572e7-262">Create a new log backup of the database that includes the final LSN of the restored pages, that is, the point at which the last restored page is taken offline.</span></span> <span data-ttu-id="572e7-263">Итоговый номер LSN, устанавливаемый в качестве части первого восстановления в последовательности, является номером LSN цели повтора.</span><span class="sxs-lookup"><span data-stu-id="572e7-263">The final LSN, which is set as part of the first restore in the sequence, is the redo target LSN.</span></span> <span data-ttu-id="572e7-264">Накат файла «в сети», содержащего страницу, сможет остановиться у номера LSN цели повтора.</span><span class="sxs-lookup"><span data-stu-id="572e7-264">Online roll forward of the file containing the page is able to stop at the redo target LSN.</span></span> <span data-ttu-id="572e7-265">Чтобы выяснить текущий номер LSN цели повтора файла, обратитесь к столбцу **redo_target_lsn** в **sys.master_files**.</span><span class="sxs-lookup"><span data-stu-id="572e7-265">To learn the current redo target LSN of a file, see the **redo_target_lsn** column of **sys.master_files**.</span></span> <span data-ttu-id="572e7-266">Дополнительные сведения см. в разделе [sys.master_files (Transact-SQL)](/sql/relational-databases/system-catalog-views/sys-master-files-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="572e7-266">For more information, see [sys.master_files &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-master-files-transact-sql).</span></span>  
  
6.  <span data-ttu-id="572e7-267">Восстановите новую резервную копию журнала.</span><span class="sxs-lookup"><span data-stu-id="572e7-267">Restore the new log backup.</span></span> <span data-ttu-id="572e7-268">Как только эта новая резервная копия журнала будет применена, восстановление страниц завершается, и страницы готовы к использованию.</span><span class="sxs-lookup"><span data-stu-id="572e7-268">After this new log backup is applied, the page restore is completed and the pages are now usable.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="572e7-269">Эта последовательность аналогична последовательности восстановления файла.</span><span class="sxs-lookup"><span data-stu-id="572e7-269">This sequence is analogous to a file restore sequence.</span></span> <span data-ttu-id="572e7-270">Фактически восстановление страниц и восстановление файлов могут выполняться как части одной и той же последовательности.</span><span class="sxs-lookup"><span data-stu-id="572e7-270">In fact, page restore and file restores can both be performed as part of the same sequence.</span></span>  
  
###  <a name="example-transact-sql"></a><a name="TsqlExample"></a> <span data-ttu-id="572e7-271">Примеры (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="572e7-271">Example (Transact-SQL)</span></span>  
 <span data-ttu-id="572e7-272">В этом примере восстанавливаются четыре поврежденные страницы файла `B` в режиме `NORECOVERY`.</span><span class="sxs-lookup"><span data-stu-id="572e7-272">The following example restores four damaged pages of file `B` with `NORECOVERY`.</span></span> <span data-ttu-id="572e7-273">Далее, после применения двух резервных копий журналов с параметром `NORECOVERY`, следует восстановление резервной копии заключительного фрагмента журнала с параметром `RECOVERY`.</span><span class="sxs-lookup"><span data-stu-id="572e7-273">Next, two log backups are applied with `NORECOVERY`, followed with the tail-log backup, which is restored with `RECOVERY`.</span></span> <span data-ttu-id="572e7-274">В этом примере выполняется восстановление в сети.</span><span class="sxs-lookup"><span data-stu-id="572e7-274">This example performs an online restore.</span></span> <span data-ttu-id="572e7-275">В следующем примере идентификатором файла `B` является `1`, а идентификаторами поврежденных страниц — `57`, `202`, `916`и `1016`.</span><span class="sxs-lookup"><span data-stu-id="572e7-275">In the example, the file ID of file `B` is `1`, and the page IDs of the damaged pages are `57`, `202`, `916`, and `1016`.</span></span>  
  
```sql  
RESTORE DATABASE <database> PAGE='1:57, 1:202, 1:916, 1:1016'  
   FROM <file_backup_of_file_B>   
   WITH NORECOVERY;  
RESTORE LOG <database> FROM <log_backup>   
   WITH NORECOVERY;  
RESTORE LOG <database> FROM <log_backup>   
   WITH NORECOVERY;   
BACKUP LOG <database> TO <new_log_backup>;   
RESTORE LOG <database> FROM <new_log_backup> WITH RECOVERY;  
GO  
```  
  
## <a name="see-also"></a><span data-ttu-id="572e7-276">См. также:</span><span class="sxs-lookup"><span data-stu-id="572e7-276">See Also</span></span>  
 <span data-ttu-id="572e7-277">[RESTORE (Transact-SQL)](/sql/t-sql/statements/restore-statements-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="572e7-277">[RESTORE &#40;Transact-SQL&#41;](/sql/t-sql/statements/restore-statements-transact-sql) </span></span>  
 <span data-ttu-id="572e7-278">[Применение резервных копий журналов транзакций (SQL Server)](transaction-log-backups-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="572e7-278">[Apply Transaction Log Backups &#40;SQL Server&#41;](transaction-log-backups-sql-server.md) </span></span>  
 <span data-ttu-id="572e7-279">[Управление таблицей suspect_pages (SQL Server)](manage-the-suspect-pages-table-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="572e7-279">[Manage the suspect_pages Table &#40;SQL Server&#41;](manage-the-suspect-pages-table-sql-server.md) </span></span>  
 [<span data-ttu-id="572e7-280">Резервное копирование и восстановление баз данных SQL Server</span><span class="sxs-lookup"><span data-stu-id="572e7-280">Back Up and Restore of SQL Server Databases</span></span>](back-up-and-restore-of-sql-server-databases.md)  
  
  
