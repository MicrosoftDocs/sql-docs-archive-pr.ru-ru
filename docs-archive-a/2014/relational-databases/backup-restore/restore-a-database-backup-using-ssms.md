---
title: Восстановление резервной копии базы данных (SQL Server Management Studio) | Документация Майкрософт
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: backup-restore
ms.topic: conceptual
f1_keywords:
- sql12.swb.locatebackupfileazure.f1
- sql12.swb.specifybackup.f1
helpviewer_keywords:
- full backups [SQL Server]
- database restores [SQL Server], full backups
- backing up databases [SQL Server], full backups
- database backups [SQL Server], full backups
- restoring databases [SQL Server], full backups
ms.assetid: 24b3311d-5ce0-4581-9a05-5c7c726c7b21
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 82c3c7191ab686550885ebdc050f5fb1ac818cb9
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87666689"
---
# <a name="restore-a-database-backup-sql-server-management-studio"></a><span data-ttu-id="107ed-102">Восстановление резервной копии базы данных (среда SQL Server Management Studio)</span><span class="sxs-lookup"><span data-stu-id="107ed-102">Restore a Database Backup (SQL Server Management Studio)</span></span>
  <span data-ttu-id="107ed-103">Этот раздел содержит сведения о восстановлении полной резервной копии базы данных.</span><span class="sxs-lookup"><span data-stu-id="107ed-103">This topic explains how to restore a full database backup.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="107ed-104">Перед восстановлением базы данных в среде [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] по модели полного восстановления или модели восстановления с неполным протоколированием необходимо выполнить резервное копирование журнала активных транзакций (известного как заключительный фрагмент журнала).</span><span class="sxs-lookup"><span data-stu-id="107ed-104">Under the full or bulk-logged recovery model, before you can restore a database in [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], you must back up the active transaction log (known as the tail of the log).</span></span> <span data-ttu-id="107ed-105">Дополнительные сведения см. в статье [Создание резервной копии журнала транзакций (SQL Server)](back-up-a-transaction-log-sql-server.md)).</span><span class="sxs-lookup"><span data-stu-id="107ed-105">For more information, see [Back Up a Transaction Log &#40;SQL Server&#41;](back-up-a-transaction-log-sql-server.md).</span></span> <span data-ttu-id="107ed-106">Чтобы восстановить зашифрованную базу данных, необходимо иметь доступ к сертификату или асимметричному ключу, который использовался для шифрования базы данных.</span><span class="sxs-lookup"><span data-stu-id="107ed-106">To restore a database that is encrypted, you must have access to the certificate or asymmetric key that was used to encrypt the database.</span></span> <span data-ttu-id="107ed-107">Без сертификата или асимметричного ключа восстановить базу данных нельзя.</span><span class="sxs-lookup"><span data-stu-id="107ed-107">Without the certificate or asymmetric key, the database cannot be restored.</span></span> <span data-ttu-id="107ed-108">Поэтому сертификат, используемый для шифрования ключа шифрования базы данных, должен храниться в течение всего времени, пока есть необходимость в резервной копии.</span><span class="sxs-lookup"><span data-stu-id="107ed-108">As a result, the certificate that is used to encrypt the database encryption key must be retained as long as the backup is needed.</span></span> <span data-ttu-id="107ed-109">Дополнительные сведения см. в статье [SQL Server Certificates and Asymmetric Keys](../security/sql-server-certificates-and-asymmetric-keys.md).</span><span class="sxs-lookup"><span data-stu-id="107ed-109">For more information, see [SQL Server Certificates and Asymmetric Keys](../security/sql-server-certificates-and-asymmetric-keys.md).</span></span>  
  
 <span data-ttu-id="107ed-110">Обратите внимание, что, если восстановить базы данных [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] или более поздней версии на сервер [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], эти базы данных будут автоматически обновлены.</span><span class="sxs-lookup"><span data-stu-id="107ed-110">Note that if you restore a [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] or higher database to [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], the database is automatically upgraded.</span></span> <span data-ttu-id="107ed-111">Как правило, база данных сразу становится доступной.</span><span class="sxs-lookup"><span data-stu-id="107ed-111">Typically, the database becomes available immediately.</span></span> <span data-ttu-id="107ed-112">Однако если база данных [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] содержит полнотекстовые индексы, то в процессе обновления будет произведен их импорт, сброс или перестроение, в зависимости от установленного значения свойства сервера **Режим обновления полнотекстового каталога** .</span><span class="sxs-lookup"><span data-stu-id="107ed-112">However, if a [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] database has full-text indexes, the upgrade process either imports, resets, or rebuilds them, depending on the setting of the **Full-Text Upgrade Option** server property.</span></span> <span data-ttu-id="107ed-113">Если при обновлении выбран режим **Импортировать** или **Перестроить**, то полнотекстовые индексы во время обновления будут недоступны.</span><span class="sxs-lookup"><span data-stu-id="107ed-113">If the upgrade option is set to **Import** or **Rebuild**, the full-text indexes will be unavailable during the upgrade.</span></span> <span data-ttu-id="107ed-114">В зависимости от объема индексируемых данных процесс импорта может занять несколько часов, а перестроение — в несколько (до десяти) раз больше.</span><span class="sxs-lookup"><span data-stu-id="107ed-114">Depending upon the amount of data being indexed, importing can take several hours, and rebuilding can take up to ten times longer.</span></span> <span data-ttu-id="107ed-115">Обратите внимание, что если при обновлении выбран режим **Импортировать**, а полнотекстовый каталог недоступен, то связанные с ним полнотекстовые индексы будут перестроены.</span><span class="sxs-lookup"><span data-stu-id="107ed-115">Note also that when the upgrade option is set to **Import**, if a full-text catalog is not available, the associated full-text indexes are rebuilt.</span></span> <span data-ttu-id="107ed-116">Сведения о просмотре и изменении параметра **Режим обновления полнотекстового поиска** см. в статье [Наблюдение за полнотекстовым поиском для экземпляра сервера и управление им](../search/manage-and-monitor-full-text-search-for-a-server-instance.md).</span><span class="sxs-lookup"><span data-stu-id="107ed-116">For information about viewing or changing the setting of the **Full-Text Upgrade Option** property, see [Manage and Monitor Full-Text Search for a Server Instance](../search/manage-and-monitor-full-text-search-for-a-server-instance.md).</span></span>  
  
### <a name="to-restore-a-full-database-backup"></a><span data-ttu-id="107ed-117">Восстановление полной резервной копии базы данных</span><span class="sxs-lookup"><span data-stu-id="107ed-117">To restore a full database backup</span></span>  
  
1.  <span data-ttu-id="107ed-118">После подключения к соответствующему экземпляру компонента [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] в обозревателе объектов разверните дерево сервера, щелкнув имя сервера.</span><span class="sxs-lookup"><span data-stu-id="107ed-118">After you connect to the appropriate instance of the [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)], in Object Explorer, click the server name to expand the server tree.</span></span>  
  
2.  <span data-ttu-id="107ed-119">Разверните узел **Базы данных**.</span><span class="sxs-lookup"><span data-stu-id="107ed-119">Expand **Databases**.</span></span> <span data-ttu-id="107ed-120">В зависимости от типа восстанавливаемой базы данных выберите пользовательскую базу данных или раскройте узел **Системные базы данных**и выберите системную базу данных.</span><span class="sxs-lookup"><span data-stu-id="107ed-120">Depending on the database, either select a user database or expand **System Databases**, and then select a system database.</span></span>  
  
3.  <span data-ttu-id="107ed-121">Щелкните правой кнопкой мыши базу данных, наведите указатель на пункт **задачи**, выберите пункт **восстановить**, а затем выберите пункт **база данных**, после чего откроется диалоговое окно **Восстановление базы данных** .</span><span class="sxs-lookup"><span data-stu-id="107ed-121">Right-click the database, point to **Tasks**, point to **Restore**, and then click **Database**, which opens the **Restore Database** dialog box.</span></span>  
  
4.  <span data-ttu-id="107ed-122">Чтобы указать источник и расположение восстанавливаемых резервных наборов данных, используйте страницу **Общие** , раздел **Источник** .</span><span class="sxs-lookup"><span data-stu-id="107ed-122">On the **General** page, use the **Source** section to specify the source and location of the backup sets to restore.</span></span> <span data-ttu-id="107ed-123">Выберите один из следующих вариантов.</span><span class="sxs-lookup"><span data-stu-id="107ed-123">Select one of the following options:</span></span>  
  
    -   <span data-ttu-id="107ed-124">**База данных**</span><span class="sxs-lookup"><span data-stu-id="107ed-124">**Database**</span></span>  
  
         <span data-ttu-id="107ed-125">Выберите из раскрывающегося списка базу данных для восстановления.</span><span class="sxs-lookup"><span data-stu-id="107ed-125">Select the database to restore from the drop-down list.</span></span> <span data-ttu-id="107ed-126">Данный список содержит только базы данных, резервное копирование которых было выполнено в соответствии с журналом резервного копирования **msdb** .</span><span class="sxs-lookup"><span data-stu-id="107ed-126">The list contains only databases that have been backed up according to the **msdb** backup history.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="107ed-127">Если резервная копия была получена с другого сервера, на целевом сервере не будет журнала резервного копирования для указанной базы данных.</span><span class="sxs-lookup"><span data-stu-id="107ed-127">If the backup is taken from a different server, the destination server will not have the backup history information for the specified database.</span></span> <span data-ttu-id="107ed-128">В этом случае щелкните пункт **Устройство** , чтобы вручную указать файл или устройство для восстановления.</span><span class="sxs-lookup"><span data-stu-id="107ed-128">In this case, select **Device** to manually specify the file or device to restore.</span></span>  
  
    -   <span data-ttu-id="107ed-129">**Устройство**</span><span class="sxs-lookup"><span data-stu-id="107ed-129">**Device**</span></span>  
  
         <span data-ttu-id="107ed-130">Нажмите кнопку обзора ( **...** ), после чего откроется диалоговое окно **Выбор устройств резервного копирования** .</span><span class="sxs-lookup"><span data-stu-id="107ed-130">Click the browse (**...**) button to open the **Select backup devices** dialog box.</span></span> <span data-ttu-id="107ed-131">В окне **Тип носителя резервной копии** выберите один из перечисленных типов устройств.</span><span class="sxs-lookup"><span data-stu-id="107ed-131">In the **Backup media type** box, select one of the listed device types.</span></span> <span data-ttu-id="107ed-132">Чтобы выбрать одно или несколько устройств в окне **Носитель резервной копии** , нажмите кнопку **Добавить**.</span><span class="sxs-lookup"><span data-stu-id="107ed-132">To select one or more devices for the **Backup media** box, click **Add**.</span></span>  
  
         <span data-ttu-id="107ed-133">После добавления нужных устройств в списке **Носитель резервной копии** нажмите кнопку **ОК** для возвращения на страницу **Общие** .</span><span class="sxs-lookup"><span data-stu-id="107ed-133">After you add the devices you want to the **Backup media** list box, click **OK** to return to the **General** page.</span></span>  
  
         <span data-ttu-id="107ed-134">В списке **Источник: Устройство: База данных** выберите имя базы данных, из которой нужно восстановить резервные копии.</span><span class="sxs-lookup"><span data-stu-id="107ed-134">In the **Source: Device: Database** list box, select the name of the database which should be restored.</span></span>  
  
        > [!NOTE]  
        >  <span data-ttu-id="107ed-135">Данный список доступен, только если выбран параметр **Устройство** .</span><span class="sxs-lookup"><span data-stu-id="107ed-135">This list is only available when **Device** is selected.</span></span> <span data-ttu-id="107ed-136">Будут выбраны только те базы данных, резервные копии которых доступны на выбранном устройстве.</span><span class="sxs-lookup"><span data-stu-id="107ed-136">Only databases that have backups on the selected device will be available.</span></span>  
  
         <span data-ttu-id="107ed-137">**Носитель резервной копии**</span><span class="sxs-lookup"><span data-stu-id="107ed-137">**Backup media**</span></span>  
         <span data-ttu-id="107ed-138">Выберите носитель для операции восстановления: **файл**, **Лента**, **URL-адрес**или **устройство резервного копирования**.</span><span class="sxs-lookup"><span data-stu-id="107ed-138">Select the medium for the restore operation: **File**, **Tape**, **URL**or **Backup Device**.</span></span> <span data-ttu-id="107ed-139">Параметр **Лента** появляется только в случае, если на компьютере установлен ленточный накопитель, а параметр **Устройство резервного копирования** — только в случае, если имеется хотя бы одно устройство резервного копирования.</span><span class="sxs-lookup"><span data-stu-id="107ed-139">The **Tape** option appears only if a tape drive is mounted on the computer, and the **Backup Device** option appears, only if at least one backup device exists.</span></span>  
  
         <span data-ttu-id="107ed-140">**Расположение резервной копии**</span><span class="sxs-lookup"><span data-stu-id="107ed-140">**Backup location**</span></span>  
         <span data-ttu-id="107ed-141">Просмотрите, добавьте или удалите носители для операции восстановления.</span><span class="sxs-lookup"><span data-stu-id="107ed-141">View, add, or remove media for the restore operation.</span></span> <span data-ttu-id="107ed-142">Список может содержать до 64 файлов, лент или устройств резервного копирования.</span><span class="sxs-lookup"><span data-stu-id="107ed-142">The list can contain up to 64 files, tapes, or backup devices.</span></span>  
  
         <span data-ttu-id="107ed-143">**Добавление**</span><span class="sxs-lookup"><span data-stu-id="107ed-143">**Add**</span></span>  
         <span data-ttu-id="107ed-144">Добавляет расположение устройства резервного копирования в список **Расположение резервной копии** .</span><span class="sxs-lookup"><span data-stu-id="107ed-144">Adds the location of a backup device to the **Backup location** list.</span></span> <span data-ttu-id="107ed-145">В зависимости от типа носителя данных, выбранного в поле **Носитель резервной копии** , при нажатии на кнопку **Добавить** открывается одно из следующих диалоговых окон.</span><span class="sxs-lookup"><span data-stu-id="107ed-145">Depending on the type of media you select in the **Backup media** field, clicking **Add** opens one of the following dialog boxes.</span></span>  
  
        |<span data-ttu-id="107ed-146">Тип носителя данных</span><span class="sxs-lookup"><span data-stu-id="107ed-146">Media type</span></span>|<span data-ttu-id="107ed-147">.</span><span class="sxs-lookup"><span data-stu-id="107ed-147">Dialog box</span></span>|<span data-ttu-id="107ed-148">Описание</span><span class="sxs-lookup"><span data-stu-id="107ed-148">Description</span></span>|  
        |----------------|----------------|-----------------|  
        |<span data-ttu-id="107ed-149">**Файл**</span><span class="sxs-lookup"><span data-stu-id="107ed-149">**File**</span></span>|<span data-ttu-id="107ed-150">**Локальный файл резервной копии**</span><span class="sxs-lookup"><span data-stu-id="107ed-150">**Locate Backup File**</span></span>|<span data-ttu-id="107ed-151">В данном диалоговом окне можно выбрать локальный файл из дерева или указать удаленный файл, используя его полное имя в формате UNC.</span><span class="sxs-lookup"><span data-stu-id="107ed-151">In this dialog box, you can select a local file from the tree or specify a remote file using its fully qualified universal naming convention (UNC) name.</span></span> <span data-ttu-id="107ed-152">Дополнительные сведения см. в разделе [Устройства резервного копирования (SQL Server)](backup-devices-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="107ed-152">For more information, see [Backup Devices &#40;SQL Server&#41;](backup-devices-sql-server.md).</span></span>|  
        |<span data-ttu-id="107ed-153">**Устройство**</span><span class="sxs-lookup"><span data-stu-id="107ed-153">**Device**</span></span>|<span data-ttu-id="107ed-154">**Выбор устройства резервного копирования**</span><span class="sxs-lookup"><span data-stu-id="107ed-154">**Select Backup Device**</span></span>|<span data-ttu-id="107ed-155">В данном диалоговом окне из списка можно выбрать логические устройства резервного копирования, определенные на экземпляре сервера.</span><span class="sxs-lookup"><span data-stu-id="107ed-155">In this dialog box, you can select from a list of the logical backup devices defined on the server instance.</span></span>|  
        |<span data-ttu-id="107ed-156">**Лента**</span><span class="sxs-lookup"><span data-stu-id="107ed-156">**Tape**</span></span>|<span data-ttu-id="107ed-157">**Выбор ленты с резервной копией**</span><span class="sxs-lookup"><span data-stu-id="107ed-157">**Select Backup Tape**</span></span>|<span data-ttu-id="107ed-158">В данном диалоговом окне из списка можно выбрать ленточные накопители, физически подключенные к компьютеру, на котором запущен экземпляр [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="107ed-158">In this dialog box, you can select from a list of the tape drives that are physically connected to the computer running the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>|  
        |<span data-ttu-id="107ed-159">**URL-адрес**</span><span class="sxs-lookup"><span data-stu-id="107ed-159">**URL**</span></span>|<span data-ttu-id="107ed-160">Откроются два диалоговых окна в следующем порядке.</span><span class="sxs-lookup"><span data-stu-id="107ed-160">This launches two dialog boxes in the following order:</span></span><br /><br /> <span data-ttu-id="107ed-161">1) **Подключение к службе хранилища Azure**</span><span class="sxs-lookup"><span data-stu-id="107ed-161">1) **Connect to Azure Storage**</span></span><br /><br /> <span data-ttu-id="107ed-162">2. **Размещение файла резервной копии в Azure**</span><span class="sxs-lookup"><span data-stu-id="107ed-162">2) **Locate Backup File in Azure**</span></span>|<span data-ttu-id="107ed-163">В диалоговом окне **Подключение к службе хранилища Azure** выберите существующие учетные данные SQL, в которых хранятся имя учетной записи хранения Azure и сведения о ключах доступа, либо создайте новые учетные данные SQL, указав имя учетной записи хранения и сведения о ключе доступа к хранилищу.</span><span class="sxs-lookup"><span data-stu-id="107ed-163">In the **Connect to Azure Storage**  dialog box, Select an existing SQL Credential that stores the Azure storage account name and access key information, or create new SQL Credential by specifying the storage account name and storage access key information.</span></span> <span data-ttu-id="107ed-164">Дополнительные сведения см. [в статье подключение к службе хранилища Azure &#40;восстановление&#41;](connect-to-microsoft-azure-storage-restore.md).</span><span class="sxs-lookup"><span data-stu-id="107ed-164">For more information, see [Connect to Azure Storage &#40;Restore&#41;](connect-to-microsoft-azure-storage-restore.md).</span></span><br /><br /> <span data-ttu-id="107ed-165">В диалоговом окне **Локальный файл резервной копии** можно выбрать файл из списка контейнеров, отображаемого в рамке слева.</span><span class="sxs-lookup"><span data-stu-id="107ed-165">In the **Locate Backup File** dialog box, you can select a file from the list of containers displayed on the left frame.</span></span>|  
  
         <span data-ttu-id="107ed-166">Если список полон, то кнопка **Добавить** будет недоступна.</span><span class="sxs-lookup"><span data-stu-id="107ed-166">If the list is full, the **Add** button is unavailable.</span></span>  
  
         <span data-ttu-id="107ed-167">**Удалить**</span><span class="sxs-lookup"><span data-stu-id="107ed-167">**Remove**</span></span>  
         <span data-ttu-id="107ed-168">Удаляет один или несколько выбранных файлов, лент или устройств резервного копирования.</span><span class="sxs-lookup"><span data-stu-id="107ed-168">Removes one or more selected files, tapes, or logical backup devices.</span></span>  
  
         <span data-ttu-id="107ed-169">**Contents**</span><span class="sxs-lookup"><span data-stu-id="107ed-169">**Contents**</span></span>  
         <span data-ttu-id="107ed-170">Отображает содержимое носителя выбранного файла, ленты или устройства резервного копирования.</span><span class="sxs-lookup"><span data-stu-id="107ed-170">Displays the media contents of a selected file, tape, or logical backup device.</span></span>  
  
5.  <span data-ttu-id="107ed-171">В разделе **Назначение** , в поле **База данных** автоматически появится имя базы данных для восстановления.</span><span class="sxs-lookup"><span data-stu-id="107ed-171">In the **Destination** section, the **Database** box is automatically populated with the name of the database to be restored.</span></span> <span data-ttu-id="107ed-172">Для изменения имени базы данных введите новое имя в окно **База данных** .</span><span class="sxs-lookup"><span data-stu-id="107ed-172">To change the name of the database, enter the new name in the **Database** box.</span></span>  
  
6.  <span data-ttu-id="107ed-173">В поле **Восстановить до** оставьте значение по умолчанию **До последней выбранной резервной копии** или щелкните **Временную шкалу** , чтобы перейти в диалоговое окно **Временная шкала резервной копии** и выбрать вручную конкретное пороговое время восстановления.</span><span class="sxs-lookup"><span data-stu-id="107ed-173">In the **Restore to** box, leave the default as **To the last backup taken** or click on **Timeline** to access the **Backup Timeline** dialog box to manually select a point in time to stop the recovery action.</span></span> <span data-ttu-id="107ed-174">Дополнительные сведения о назначении конкретного момента времени см. в разделе [Backup Timeline](backup-timeline.md).</span><span class="sxs-lookup"><span data-stu-id="107ed-174">For more information on designating a specific point in time, see [Backup Timeline](backup-timeline.md).</span></span>  
  
7.  <span data-ttu-id="107ed-175">В сетке **Резервные наборы данных для восстановления** выберите нужные резервные наборы.</span><span class="sxs-lookup"><span data-stu-id="107ed-175">In the **Backup sets to restore** grid, select the backups to restore.</span></span> <span data-ttu-id="107ed-176">В этой сетке отображаются резервные копии, доступные в указанном месте.</span><span class="sxs-lookup"><span data-stu-id="107ed-176">This grid displays the backups available for the specified location.</span></span> <span data-ttu-id="107ed-177">По умолчанию предлагается план восстановления.</span><span class="sxs-lookup"><span data-stu-id="107ed-177">By default, a recovery plan is suggested.</span></span> <span data-ttu-id="107ed-178">Чтобы переопределить предложенный план восстановления, можно изменить выбранные элементы в сетке.</span><span class="sxs-lookup"><span data-stu-id="107ed-178">To override the suggested recovery plan, you can change the selections in the grid.</span></span> <span data-ttu-id="107ed-179">Выбор всех резервных копий, которые зависят от восстановления более ранних копий, отменяется автоматически, как только отменяется выбор более ранних копий.</span><span class="sxs-lookup"><span data-stu-id="107ed-179">Backups that depend on the restoration of an earlier backup are automatically deselected when the earlier backup is deselected.</span></span> <span data-ttu-id="107ed-180">Дополнительные сведения о столбцах сетки **Резервные наборы данных для восстановления** см. в статье [Восстановление базы данных (страница "Общие")](../../integration-services/general-page-of-integration-services-designers-options.md).</span><span class="sxs-lookup"><span data-stu-id="107ed-180">For information about the columns in the **Backup sets to restore** grid, see [Restore Database &#40;General Page&#41;](../../integration-services/general-page-of-integration-services-designers-options.md).</span></span>  
  
8.  <span data-ttu-id="107ed-181">При необходимости нажмите кнопку **Файлы** на панели **Выбор страницы** и перейдите в диалоговое окно **Файлы** .</span><span class="sxs-lookup"><span data-stu-id="107ed-181">Optionally, click **Files** in the **Select a page** pane to access the **Files** dialog box.</span></span> <span data-ttu-id="107ed-182">Отсюда можно восстановить базу данных в новое расположение, определив новое место восстановления для каждого файла в сетке **Восстановить файлы базы данных как** .</span><span class="sxs-lookup"><span data-stu-id="107ed-182">From here, you can restore the database to a new location by specifying a new restore destination for each file in the **Restore the database files as** grid.</span></span> <span data-ttu-id="107ed-183">Дополнительные сведения об этой сетке см. в разделе [Восстановление базы данных (страница "Файлы")](restore-database-files-page.md).</span><span class="sxs-lookup"><span data-stu-id="107ed-183">For more information about this grid, see [Restore Database &#40;Files Page&#41;](restore-database-files-page.md).</span></span>  
  
9. <span data-ttu-id="107ed-184">Чтобы просмотреть или выбрать дополнительные параметры, на странице **Параметры** на панели **Параметры восстановления** вберите любой из следующих параметров, если он подходит к данной ситуации.</span><span class="sxs-lookup"><span data-stu-id="107ed-184">To view or select the advanced options, on the **Options** page, in the **Restore options** panel, you can select any of the following options, if appropriate for your situation:</span></span>  
  
    1.  <span data-ttu-id="107ed-185">Параметры `WITH` (необязательно)</span><span class="sxs-lookup"><span data-stu-id="107ed-185">`WITH` options (not required):</span></span>  
  
        -   <span data-ttu-id="107ed-186">**Перезаписать существующую базу данных (WITH REPLACE)**</span><span class="sxs-lookup"><span data-stu-id="107ed-186">**Overwrite the existing database (WITH REPLACE)**</span></span>  
  
        -   <span data-ttu-id="107ed-187">**Сохранить параметры репликации (WITH KEEP_REPLICATION)**</span><span class="sxs-lookup"><span data-stu-id="107ed-187">**Preserve the replication settings (WITH KEEP_REPLICATION)**</span></span>  
  
        -   <span data-ttu-id="107ed-188">**Ограничить доступ к восстановленной базе данных (WITH RESTRICTED_USER)**</span><span class="sxs-lookup"><span data-stu-id="107ed-188">**Restrict access to the restored database (WITH RESTRICTED_USER)**</span></span>  
  
    2.  <span data-ttu-id="107ed-189">Выберите параметр в поле **Состояние восстановления** .</span><span class="sxs-lookup"><span data-stu-id="107ed-189">Select an option for the **Recovery state** box.</span></span> <span data-ttu-id="107ed-190">В данном окне определяется состояние базы данных после операции восстановления.</span><span class="sxs-lookup"><span data-stu-id="107ed-190">This box determines the state of the database after the restore operation.</span></span>  
  
        -   <span data-ttu-id="107ed-191">По умолчанию установлена схема**RESTORE WITH RECOVERY** , при этом база данных находится в готовом состоянии для использования путем отката незафиксированных транзакций.</span><span class="sxs-lookup"><span data-stu-id="107ed-191">**RESTORE WITH RECOVERY** is the default behavior which leaves the database ready for use by rolling back the uncommitted transactions.</span></span> <span data-ttu-id="107ed-192">Невозможно восстановить дополнительные журналы транзакций.</span><span class="sxs-lookup"><span data-stu-id="107ed-192">Additional transaction logs cannot be restored.</span></span> <span data-ttu-id="107ed-193">Выберите данный параметр, если выполняется восстановление всех необходимых резервных копий.</span><span class="sxs-lookup"><span data-stu-id="107ed-193">Select this option if you are restoring all of the necessary backups now.</span></span>  
  
        -   <span data-ttu-id="107ed-194">Схема**RESTORE WITH NORECOVERY** оставляет базу данных в нерабочем состоянии и не выполняет откат незафиксированных транзакций.</span><span class="sxs-lookup"><span data-stu-id="107ed-194">**RESTORE WITH NORECOVERY** which leaves the database non-operational, and does not roll back the uncommitted transactions.</span></span> <span data-ttu-id="107ed-195">Можно восстановить дополнительные журналы транзакций.</span><span class="sxs-lookup"><span data-stu-id="107ed-195">Additional transaction logs can be restored.</span></span> <span data-ttu-id="107ed-196">База данных не может быть использована, пока не будет восстановлена.</span><span class="sxs-lookup"><span data-stu-id="107ed-196">The database cannot be used until it is recovered.</span></span>  
  
        -   <span data-ttu-id="107ed-197">Схема**RESTORE WITH STANDBY** оставляет базу данных в режиме только для чтения.</span><span class="sxs-lookup"><span data-stu-id="107ed-197">**RESTORE WITH STANDBY** which leaves the database in read-only mode.</span></span> <span data-ttu-id="107ed-198">С помощью данного параметра можно отменить незафиксированные транзакции и сохранить отмененные действия в резервном файле, чтобы результаты восстановления можно было отменить.</span><span class="sxs-lookup"><span data-stu-id="107ed-198">It undoes uncommitted transactions, but saves the undo actions in a standby file so that recovery effects can be reverted.</span></span>  
  
    3.  <span data-ttu-id="107ed-199">Настройка **Создать резервную копию заключительного фрагмента журнала перед восстановлением** будет выбрана, если это необходимо для указанного вами момента времени.</span><span class="sxs-lookup"><span data-stu-id="107ed-199">**Take tail-log backup before restore** will be selected if it is necessary for the point in time that you have selected.</span></span> <span data-ttu-id="107ed-200">Нет необходимости изменять данную настройку, однако вы можете выбрать резервное копирование заключительного фрагмента журнала, даже если выполнение этого не требуется.</span><span class="sxs-lookup"><span data-stu-id="107ed-200">You do not need to modify this setting, but you can choose to backup the tail of the log even if it is not required.</span></span> <span data-ttu-id="107ed-201">имя файла?</span><span class="sxs-lookup"><span data-stu-id="107ed-201">filename here?</span></span> <span data-ttu-id="107ed-202">Если первый резервный набор данных на странице **Общие** находится в Azure, то будет также создана резервная копия заключительного фрагмента журнала в том же контейнере хранилища.</span><span class="sxs-lookup"><span data-stu-id="107ed-202">If the first backup set in the **General** page is in Azure, the tail log will also be backed up to the same storage container.</span></span>  
  
    4.  <span data-ttu-id="107ed-203">Если имеются активные соединения с базой данных, то операция восстановления может завершиться ошибкой.</span><span class="sxs-lookup"><span data-stu-id="107ed-203">Restore operations may fail if there are active connections to the database.</span></span> <span data-ttu-id="107ed-204">Проверьте окно **Закрыть существующие соединения** и убедитесь, что все активные соединения между [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)] и базой данных закрыты.</span><span class="sxs-lookup"><span data-stu-id="107ed-204">Check the **Close existing connections option** to ensure that all active connections between [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)] and the database are closed.</span></span> <span data-ttu-id="107ed-205">Этот параметр переводит базу данных в однопользовательский режим перед началом выполнения процедуры восстановления, а затем возвращает в многопользовательский режим после ее завершения.</span><span class="sxs-lookup"><span data-stu-id="107ed-205">This check box sets the database to single user mode before performing the restore operations, and sets the database to multi-user mode when complete.</span></span>  
  
    5.  <span data-ttu-id="107ed-206">Установите флажок **Выдавать запрос перед восстановлением каждой резервной копии** , если хотите отследить каждую операцию восстановления.</span><span class="sxs-lookup"><span data-stu-id="107ed-206">Select **Prompt before restoring each backup** if you wish to be prompted between each restore operation.</span></span> <span data-ttu-id="107ed-207">Обычно это не требуется, за исключением случаев, если необходимо наблюдать за состоянием операции восстановления базы данных большого объема.</span><span class="sxs-lookup"><span data-stu-id="107ed-207">This is not usually necessary unless the database is large and you wish to monitor the status of the restore operation.</span></span>  
  
     <span data-ttu-id="107ed-208">Дополнительные сведения об этих параметрах восстановления см. в разделе [Восстановление базы данных (страница "Параметры")](restore-database-options-page.md).</span><span class="sxs-lookup"><span data-stu-id="107ed-208">For more information about these restore options, see [Restore Database &#40;Options Page&#41;](restore-database-options-page.md).</span></span>  
  
10. [!INCLUDE[clickOK](../../includes/clickok-md.md)]  
  
## <a name="see-also"></a><span data-ttu-id="107ed-209">См. также:</span><span class="sxs-lookup"><span data-stu-id="107ed-209">See Also</span></span>  
 <span data-ttu-id="107ed-210">[Создание резервной копии журнала транзакций (SQL Server)](back-up-a-transaction-log-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="107ed-210">[Back Up a Transaction Log &#40;SQL Server&#41;](back-up-a-transaction-log-sql-server.md) </span></span>  
 <span data-ttu-id="107ed-211">[Создание полной резервной копии базы данных (SQL Server)](create-a-full-database-backup-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="107ed-211">[Create a Full Database Backup &#40;SQL Server&#41;](create-a-full-database-backup-sql-server.md) </span></span>  
 <span data-ttu-id="107ed-212">[Восстановление базы данных в новое место (SQL Server)](restore-a-database-to-a-new-location-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="107ed-212">[Restore a Database to a New Location &#40;SQL Server&#41;](restore-a-database-to-a-new-location-sql-server.md) </span></span>  
 <span data-ttu-id="107ed-213">[Восстановление резервной копии журнала транзакций (SQL Server)](restore-a-transaction-log-backup-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="107ed-213">[Restore a Transaction Log Backup &#40;SQL Server&#41;](restore-a-transaction-log-backup-sql-server.md) </span></span>  
 <span data-ttu-id="107ed-214">[RESTORE (Transact-SQL)](/sql/t-sql/statements/restore-statements-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="107ed-214">[RESTORE &#40;Transact-SQL&#41;](/sql/t-sql/statements/restore-statements-transact-sql) </span></span>  
 <span data-ttu-id="107ed-215">[Восстановление базы данных (страница "Параметры")](restore-database-options-page.md) </span><span class="sxs-lookup"><span data-stu-id="107ed-215">[Restore Database &#40;Options Page&#41;](restore-database-options-page.md) </span></span>  
 [<span data-ttu-id="107ed-216">Восстановление базы данных (страница "Общие")</span><span class="sxs-lookup"><span data-stu-id="107ed-216">Restore Database &#40;General Page&#41;</span></span>](../../integration-services/general-page-of-integration-services-designers-options.md)  
  
  
