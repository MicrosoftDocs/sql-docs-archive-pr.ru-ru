---
title: bcp_setcolfmt | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: native-client
ms.topic: reference
api_name:
- bcp_setcolfmt
api_location:
- sqlncli11.dll
topic_type:
- apiref
helpviewer_keywords:
- bcp_setcolfmt function
ms.assetid: afb47987-39e7-4079-ad66-e0abf4d4c72b
author: rothja
ms.author: jroth
ms.openlocfilehash: bb3b1da62ab4e98ed4497dd11fcc20163025058b
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87665318"
---
# <a name="bcp_setcolfmt"></a><span data-ttu-id="068e1-102">bcp_setcolfmt</span><span class="sxs-lookup"><span data-stu-id="068e1-102">bcp_setcolfmt</span></span>
  <span data-ttu-id="068e1-103">Функция **bcp_setcolfmt** заменяет функцию [bcp_colfmt](bcp-colfmt.md).</span><span class="sxs-lookup"><span data-stu-id="068e1-103">The **bcp_setcolfmt** function supersedes the [bcp_colfmt](bcp-colfmt.md).</span></span> <span data-ttu-id="068e1-104">При указании параметров сортировки столбца необходимо использовать функцию **bcp_setcolfmt** .</span><span class="sxs-lookup"><span data-stu-id="068e1-104">In specifying the column collation, the **bcp_setcolfmt** function must be used.</span></span> <span data-ttu-id="068e1-105">С помощью[bcp_setbulkmode](bcp-setbulkmode.md) можно задать формат нескольких столбцов.</span><span class="sxs-lookup"><span data-stu-id="068e1-105">[bcp_setbulkmode](bcp-setbulkmode.md) can be used to specify more than one column format.</span></span>  
  
 <span data-ttu-id="068e1-106">Эта функция предоставляет гибкий подход к указанию формата столбцов в операции массового копирования.</span><span class="sxs-lookup"><span data-stu-id="068e1-106">This function provides a flexible approach to specifying the column format in a bulk copy operation.</span></span> <span data-ttu-id="068e1-107">Она используется для установки атрибутов формата отдельного столбца.</span><span class="sxs-lookup"><span data-stu-id="068e1-107">It is used to set individual column format attributes.</span></span> <span data-ttu-id="068e1-108">Каждый вызов функции **bcp_setcolfmt** устанавливает один атрибут формата столбца.</span><span class="sxs-lookup"><span data-stu-id="068e1-108">Each call to **bcp_setcolfmt** sets one column format attribute.</span></span>  
  
 <span data-ttu-id="068e1-109">Функция **bcp_setcolfmt** указывает формат источника или целевой формат данных в пользовательском файле.</span><span class="sxs-lookup"><span data-stu-id="068e1-109">The **bcp_setcolfmt** function specifies the source or target format of the data in a user file.</span></span> <span data-ttu-id="068e1-110">При использовании с форматом источника функция **bcp_setcolfmt** указывает формат существующего файла данных, используемого как источник данных при массовом копировании в таблицу [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="068e1-110">When used as a source format, **bcp_setcolfmt** specifies the format of an existing data file used as a data source of data in a bulk copy to a table in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="068e1-111">При использовании с целевым форматом создается файл данных с использованием форматов столбцов, указанных при помощи функции **bcp_setcolfmt**.</span><span class="sxs-lookup"><span data-stu-id="068e1-111">When used as a target format, the data file is created using the column formats specified with **bcp_setcolfmt**.</span></span>  
  
## <a name="syntax"></a><span data-ttu-id="068e1-112">Синтаксис</span><span class="sxs-lookup"><span data-stu-id="068e1-112">Syntax</span></span>  
  
```  
  
RETCODE bcp_setcolfmt (  
HDBC   
hdbc  
,  
INT   
field  
,  
INT   
property  
,  
void*   
pValue  
,  
INT   
cbValue  
);  
  
```  
  
## <a name="arguments"></a><span data-ttu-id="068e1-113">Аргументы</span><span class="sxs-lookup"><span data-stu-id="068e1-113">Arguments</span></span>  
 <span data-ttu-id="068e1-114">*hdbc*</span><span class="sxs-lookup"><span data-stu-id="068e1-114">*hdbc*</span></span>  
 <span data-ttu-id="068e1-115">Дескриптор соединения ODBC с поддержкой массового копирования.</span><span class="sxs-lookup"><span data-stu-id="068e1-115">Is the bulk copy-enabled ODBC connection handle.</span></span>  
  
 <span data-ttu-id="068e1-116">*полями*</span><span class="sxs-lookup"><span data-stu-id="068e1-116">*field*</span></span>  
 <span data-ttu-id="068e1-117">Это порядковый номер столбца, для которого устанавливается значение свойства.</span><span class="sxs-lookup"><span data-stu-id="068e1-117">Is the ordinal column number for which the property is being set.</span></span>  
  
 <span data-ttu-id="068e1-118">*property*</span><span class="sxs-lookup"><span data-stu-id="068e1-118">*property*</span></span>  
 <span data-ttu-id="068e1-119">Одна из констант свойства.</span><span class="sxs-lookup"><span data-stu-id="068e1-119">Is one of the property constants.</span></span> <span data-ttu-id="068e1-120">В данной таблице определены константы свойства.</span><span class="sxs-lookup"><span data-stu-id="068e1-120">Property constants are defined in this table.</span></span>  
  
|<span data-ttu-id="068e1-121">Свойство</span><span class="sxs-lookup"><span data-stu-id="068e1-121">Property</span></span>|<span data-ttu-id="068e1-122">Значение</span><span class="sxs-lookup"><span data-stu-id="068e1-122">Value</span></span>|<span data-ttu-id="068e1-123">Описание</span><span class="sxs-lookup"><span data-stu-id="068e1-123">Description</span></span>|  
|--------------|-----------|-----------------|  
|<span data-ttu-id="068e1-124">BCP_FMT_TYPE</span><span class="sxs-lookup"><span data-stu-id="068e1-124">BCP_FMT_TYPE</span></span>|<span data-ttu-id="068e1-125">BYTE</span><span class="sxs-lookup"><span data-stu-id="068e1-125">BYTE</span></span>|<span data-ttu-id="068e1-126">Тип данных этого столбца в файле пользователя.</span><span class="sxs-lookup"><span data-stu-id="068e1-126">Is the data type of this column in the user file.</span></span> <span data-ttu-id="068e1-127">При отличии от типа данных соответствующего столбца в таблице базы данных массовое копирование преобразует данные, если это возможно.</span><span class="sxs-lookup"><span data-stu-id="068e1-127">If different from the data type of the corresponding column in the database table, bulk copy converts the data if possible.</span></span><br /><br /> <span data-ttu-id="068e1-128">Параметр BCP_FMT_TYPE перечисляется в токенах типов данных SQL Server в файле sqlncli.h, а не в перечислении типов данных ODBC C.</span><span class="sxs-lookup"><span data-stu-id="068e1-128">The BCP_FMT_TYPE parameter is enumerated by the SQL Server data type tokens in sqlncli.h, rather than the ODBC C data type enumerators.</span></span> <span data-ttu-id="068e1-129">Например, можно указать символьную строку типа SQL_C_CHAR ODBC при помощи типа SQLCHARACTER в [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="068e1-129">For example, you can specify a character string, ODBC type SQL_C_CHAR, using the SQLCHARACTER type specific to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span><br /><br /> <span data-ttu-id="068e1-130">Чтобы задать представление данных по умолчанию для типа данных [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , установите этот параметр в значение 0.</span><span class="sxs-lookup"><span data-stu-id="068e1-130">To specify the default data representation for the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] data type, set this parameter to 0.</span></span><br /><br /> <span data-ttu-id="068e1-131">Для массового копирования из SQL Server в файл при BCP_FMT_TYPE, равном SQLDECIMAL или SQLNUMERIC:</span><span class="sxs-lookup"><span data-stu-id="068e1-131">For a bulk copy out of SQL Server into a file, when BCP_FMT_TYPE is SQLDECIMAL or SQLNUMERIC:</span></span><br /><br /> <span data-ttu-id="068e1-132">— Если исходный столбец не является **десятичным** или **числовым**, используются точность и масштаб по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="068e1-132">-   If the source column is not **decimal** or **numeric**, the default precision and scale are used.</span></span><br /><span data-ttu-id="068e1-133">— Если исходный столбец имеет тип **Decimal** или **numeric**, то используются точность и масштаб исходного столбца.</span><span class="sxs-lookup"><span data-stu-id="068e1-133">-   If the source column is **decimal** or **numeric**, the precision and scale of the source column are used.</span></span>|  
|<span data-ttu-id="068e1-134">BCP_FMT_INDICATOR_LEN</span><span class="sxs-lookup"><span data-stu-id="068e1-134">BCP_FMT_INDICATOR_LEN</span></span>|<span data-ttu-id="068e1-135">INT</span><span class="sxs-lookup"><span data-stu-id="068e1-135">INT</span></span>|<span data-ttu-id="068e1-136">Задает длину признака (префикса) в байтах.</span><span class="sxs-lookup"><span data-stu-id="068e1-136">Is the length in bytes of the indicator (prefix).</span></span><br /><br /> <span data-ttu-id="068e1-137">Задает длину в байтах для признака длины или признака NULL в данных столбца.</span><span class="sxs-lookup"><span data-stu-id="068e1-137">It is the length, in bytes, of a length/null indicator within the column data.</span></span> <span data-ttu-id="068e1-138">Допустимыми значениями длины признака являются 0 (если признак не используется), 1, 2 и 4.</span><span class="sxs-lookup"><span data-stu-id="068e1-138">Valid indicator length values are 0 (when using no indicator), 1, 2, or 4.</span></span><br /><br /> <span data-ttu-id="068e1-139">Чтобы задать для признака массового копирования использование по умолчанию, установите этот параметр в значение SQL_VARLEN_DATA.</span><span class="sxs-lookup"><span data-stu-id="068e1-139">To specify default bulk copy indicator usage, set this parameter to SQL_VARLEN_DATA.</span></span><br /><br /> <span data-ttu-id="068e1-140">Признаки располагаются в памяти непосредственно перед данными, а в файле данных — непосредственно перед данными, к которым они применяются.</span><span class="sxs-lookup"><span data-stu-id="068e1-140">Indicators appear in memory directly before any data, and in the data file directly before the data to which they apply.</span></span><br /><br /> <span data-ttu-id="068e1-141">Если для столбца файла данных используется несколько способов задания длины (например, признак и максимальная длина столбца или признак и последовательность-признак конца), то для массового копирования выбирается способ, применение которого вызовет копирование данных наименьшего объема.</span><span class="sxs-lookup"><span data-stu-id="068e1-141">If more than one means of specifying a data file column length is used (such as an indicator and a maximum column length, or an indicator and a terminator sequence), bulk copy chooses the one that results in the least amount of data being copied.</span></span><br /><br /> <span data-ttu-id="068e1-142">Если пользователь не изменяет формат данных, то создаваемые при массовом копировании файлы данных содержат признаки, которые определяют, когда столбец может принимать значение NULL или его данные имеют переменную длину.</span><span class="sxs-lookup"><span data-stu-id="068e1-142">Data files generated by bulk copy when no user intervention adjusts the format of the data contain indicators when the column data can vary in length or the column can accept NULL as a value.</span></span>|  
|<span data-ttu-id="068e1-143">BCP_FMT_DATA_LEN</span><span class="sxs-lookup"><span data-stu-id="068e1-143">BCP_FMT_DATA_LEN</span></span>|<span data-ttu-id="068e1-144">DBINT</span><span class="sxs-lookup"><span data-stu-id="068e1-144">DBINT</span></span>|<span data-ttu-id="068e1-145">Задает длину данных (длину столбца) в байтах.</span><span class="sxs-lookup"><span data-stu-id="068e1-145">Is the length in bytes of the data (column length)</span></span><br /><br /> <span data-ttu-id="068e1-146">Задает максимальную длину в байтах данных столбца в файле пользователя, не включая длину индикатора длины и признака конца.</span><span class="sxs-lookup"><span data-stu-id="068e1-146">It is the maximum length, in bytes, of this column's data in the user file, not including the length of any length indicator or terminator.</span></span><br /><br /> <span data-ttu-id="068e1-147">Установка для BCP_FMT_DATA_LEN значения SQL_NULL_DATA показывает, что для всех значений в столбце файла данных установлены или должны быть установлены значения NULL.</span><span class="sxs-lookup"><span data-stu-id="068e1-147">Setting BCP_FMT_DATA_LEN to SQL_NULL_DATA indicates that all values in the data file column are, or should be set to, NULL.</span></span><br /><br /> <span data-ttu-id="068e1-148">Установка для BCP_FMT_DATA_LEN значения SQL_VARLEN_DATA показывает, что система должна определить длину данных для каждого столбца.</span><span class="sxs-lookup"><span data-stu-id="068e1-148">Setting BCP_FMT_DATA_LEN to SQL_VARLEN_DATA indicates that the system should determine the length of data in each column.</span></span> <span data-ttu-id="068e1-149">Для некоторых столбцов это может означать, что создаваемые признаки длины и допустимости значений NULL предваряют данные при копировании из [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], или ожидается их наличие в данных, копируемых в [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="068e1-149">For some columns, this could mean that a length/null indicator is generated to precede data on a copy from [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], or that the indicator is expected in data copied to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span><br /><br /> <span data-ttu-id="068e1-150">Для символьного и двоичного типов данных [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] значение BCP_FMT_DATA_LEN может быть равным SQL_VARLEN_DATA, SQL_NULL_DATA, 0 или любому положительному числу.</span><span class="sxs-lookup"><span data-stu-id="068e1-150">For [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] character and binary data types, BCP_FMT_DATA_LEN can be SQL_VARLEN_DATA, SQL_NULL_DATA, 0, or some positive value.</span></span> <span data-ttu-id="068e1-151">Если значение BCP_FMT_DATA_LEN равно SQL_VARLEN_DATA, система использует либо признак длины при его наличии, либо признак конца для определения длины данных.</span><span class="sxs-lookup"><span data-stu-id="068e1-151">If BCP_FMT_DATA_LEN is SQL_VARLEN_DATA, the system uses either the length indicator, if present, or a terminator sequence to determine the length of the data.</span></span> <span data-ttu-id="068e1-152">Если задан и признак длины, и последовательность признака конца, то при массовом копировании используется значение, применение которого вызывает копирование данных наименьшего объема.</span><span class="sxs-lookup"><span data-stu-id="068e1-152">If both a length indicator and a terminator sequence are supplied, bulk copy uses the one that results in the least amount of data being copied.</span></span> <span data-ttu-id="068e1-153">Если значение BCP_FMT_DATA_LEN равно SQL_VARLEN_DATA, то тип данных представляет собой символьный или двоичный тип [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , а если при этом ни признак длины, ни признака конца не указаны, то система возвращает сообщение об ошибке.</span><span class="sxs-lookup"><span data-stu-id="068e1-153">If BCP_FMT_DATA_LEN is SQL_VARLEN_DATA, the data type is an [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] character or binary type, and neither a length indicator nor a terminator sequence is specified, the system returns an error message.</span></span><br /><br /> <span data-ttu-id="068e1-154">Если значение BCP_FMT_DATA_LEN равно 0 или положительному числу, система использует значение BCP_FMT_DATA_LEN в качестве максимальной длины данных.</span><span class="sxs-lookup"><span data-stu-id="068e1-154">If BCP_FMT_DATA_LEN is 0 or a positive value, the system uses BCP_FMT_DATA_LEN as the maximum data length.</span></span> <span data-ttu-id="068e1-155">Однако, если кроме того, что значение BCP_FMT_DATA_LEN является положительным числом, указан признак длины или признак конца, то система определяет длину данных при помощи метода, который вычисляет наименьший размер копируемых данных.</span><span class="sxs-lookup"><span data-stu-id="068e1-155">However, if, in addition to a positive BCP_FMT_DATA_LEN, a length indicator or terminator sequence is provided, the system determines the data length by using the method that results in the least amount of data being copied.</span></span><br /><br /> <span data-ttu-id="068e1-156">Значение BCP_FMT_DATA_LEN показывает количество байтов данных.</span><span class="sxs-lookup"><span data-stu-id="068e1-156">The BCP_FMT_DATA_LEN value represents the count of bytes of data.</span></span> <span data-ttu-id="068e1-157">Если символьные данные представлены широкими символами Юникода, положительное значение параметра BCP_FMT_DATA_LEN обозначает число символов, умноженное на размер в байтах каждого символа.</span><span class="sxs-lookup"><span data-stu-id="068e1-157">If character data is represented by Unicode wide characters, then a positive BCP_FMT_DATA_LEN parameter value represents the number of characters multiplied by the size, in bytes, of each character.</span></span>|  
|<span data-ttu-id="068e1-158">BCP_FMT_TERMINATOR</span><span class="sxs-lookup"><span data-stu-id="068e1-158">BCP_FMT_TERMINATOR</span></span>|<span data-ttu-id="068e1-159">LPCBYTE</span><span class="sxs-lookup"><span data-stu-id="068e1-159">LPCBYTE</span></span>|<span data-ttu-id="068e1-160">Для этого столбца должен использоваться указатель на признак конца (соответственно ANSI или Юникода).</span><span class="sxs-lookup"><span data-stu-id="068e1-160">Pointer to the terminator sequence (either ANSI or Unicode as appropriate) to be used for this column.</span></span> <span data-ttu-id="068e1-161">Этот параметр предназначен главным образом для символьных типов данных, поскольку все другие типы имеют фиксированную длину или, как в случае с двоичными данными, требуют наличия признака длины, в котором записано точное число присутствующих байтов.</span><span class="sxs-lookup"><span data-stu-id="068e1-161">This parameter is useful mainly for character data types because all other types are of fixed length or, in the case of binary data, require an indicator of length to accurately record the number of bytes present.</span></span><br /><br /> <span data-ttu-id="068e1-162">Чтобы исключить обработку признака конца в извлекаемых данных или указать, что данные в файле пользователя не имеют признака конца, установите этот параметр в значение NULL.</span><span class="sxs-lookup"><span data-stu-id="068e1-162">To avoid terminating extracted data, or to indicate that data in a user file is not terminated, set this parameter to NULL.</span></span><br /><br /> <span data-ttu-id="068e1-163">Если для столбца файла пользователя используется несколько способов задания длины (например, признак конца и признак длины или признак конца и максимальная длина столбца), то для массового копирования выбирается способ, применение которого вызывает копирование данных наименьшего объема.</span><span class="sxs-lookup"><span data-stu-id="068e1-163">If more than one means of specifying a user-file column length is used (such as a terminator and a length indicator, or a terminator and a maximum column length), bulk copy chooses the one that results in the least amount of data being copied.</span></span><br /><br /> <span data-ttu-id="068e1-164">При необходимости API-интерфейс массового копирования выполнит преобразование символов из Юникода в многобайтовую кодировку (MBCS).</span><span class="sxs-lookup"><span data-stu-id="068e1-164">The bulk copy API performs Unicode-to-MBCS character conversion as required.</span></span> <span data-ttu-id="068e1-165">Обратите особое внимание, правильно ли задана строка байтов, служащая признаком конца, а также ее длина.</span><span class="sxs-lookup"><span data-stu-id="068e1-165">Care must be taken to ensure that both the terminator byte string and the length of the byte string are set correctly.</span></span>|  
|<span data-ttu-id="068e1-166">BCP_FMT_SERVER_COL</span><span class="sxs-lookup"><span data-stu-id="068e1-166">BCP_FMT_SERVER_COL</span></span>|<span data-ttu-id="068e1-167">INT</span><span class="sxs-lookup"><span data-stu-id="068e1-167">INT</span></span>|<span data-ttu-id="068e1-168">Порядковый номер столбца в базе данных</span><span class="sxs-lookup"><span data-stu-id="068e1-168">Ordinal position of the column in the database</span></span>|  
|<span data-ttu-id="068e1-169">BCP_FMT_COLLATION</span><span class="sxs-lookup"><span data-stu-id="068e1-169">BCP_FMT_COLLATION</span></span>|<span data-ttu-id="068e1-170">LPCSTR</span><span class="sxs-lookup"><span data-stu-id="068e1-170">LPCSTR</span></span>|<span data-ttu-id="068e1-171">Имя параметров сортировки.</span><span class="sxs-lookup"><span data-stu-id="068e1-171">Collation name.</span></span>|  
  
 <span data-ttu-id="068e1-172">*pValue*</span><span class="sxs-lookup"><span data-stu-id="068e1-172">*pValue*</span></span>  
 <span data-ttu-id="068e1-173">Является указателем на значение, связанное со *свойством*.</span><span class="sxs-lookup"><span data-stu-id="068e1-173">Is the pointer to the value to associate to the *property*.</span></span> <span data-ttu-id="068e1-174">Это позволяет установить отдельно каждое свойство формата столбца.</span><span class="sxs-lookup"><span data-stu-id="068e1-174">It allows each column format property to be set individually.</span></span>  
  
 <span data-ttu-id="068e1-175">*cbvalue*</span><span class="sxs-lookup"><span data-stu-id="068e1-175">*cbvalue*</span></span>  
 <span data-ttu-id="068e1-176">Длина буфера свойств, в байтах.</span><span class="sxs-lookup"><span data-stu-id="068e1-176">Is the length of the property buffer in bytes.</span></span>  
  
## <a name="returns"></a><span data-ttu-id="068e1-177">Возвращаемое значение</span><span class="sxs-lookup"><span data-stu-id="068e1-177">Returns</span></span>  
 <span data-ttu-id="068e1-178">SUCCEED или FAIL.</span><span class="sxs-lookup"><span data-stu-id="068e1-178">SUCCEED or FAIL.</span></span>  
  
## <a name="remarks"></a><span data-ttu-id="068e1-179">Remarks</span><span class="sxs-lookup"><span data-stu-id="068e1-179">Remarks</span></span>  
 <span data-ttu-id="068e1-180">Эта функция заменяет функцию **bcp_colfmt** .</span><span class="sxs-lookup"><span data-stu-id="068e1-180">This function supersedes the **bcp_colfmt** function.</span></span> <span data-ttu-id="068e1-181">Вся функциональность **bcp_colfmt** реализована в функции **bcp_setcolfmt** .</span><span class="sxs-lookup"><span data-stu-id="068e1-181">All the functionality of **bcp_colfmt** is provided in **bcp_setcolfmt** function.</span></span> <span data-ttu-id="068e1-182">Дополнительно реализована поддержка параметров сортировки столбца.</span><span class="sxs-lookup"><span data-stu-id="068e1-182">In addition, support for column collation is also provided.</span></span> <span data-ttu-id="068e1-183">Рекомендуется устанавливать следующие атрибуты формата столбца в данной последовательности:</span><span class="sxs-lookup"><span data-stu-id="068e1-183">It is recommended that the following column format attributes be set in the order given below:</span></span>  
  
 <span data-ttu-id="068e1-184">BCP_FMT_SERVER_COL</span><span class="sxs-lookup"><span data-stu-id="068e1-184">BCP_FMT_SERVER_COL</span></span>  
  
 <span data-ttu-id="068e1-185">BCP_FMT_DATA_LEN</span><span class="sxs-lookup"><span data-stu-id="068e1-185">BCP_FMT_DATA_LEN</span></span>  
  
 <span data-ttu-id="068e1-186">BCP_FMT_TYPE</span><span class="sxs-lookup"><span data-stu-id="068e1-186">BCP_FMT_TYPE</span></span>  
  
 <span data-ttu-id="068e1-187">Функция **bcp_setcolfmt** позволяет указать формат пользовательского файла для массового копирования.</span><span class="sxs-lookup"><span data-stu-id="068e1-187">The **bcp_setcolfmt** function allows you to specify the user-file format for bulk copies.</span></span> <span data-ttu-id="068e1-188">Формат для массового копирования состоит из следующих частей:</span><span class="sxs-lookup"><span data-stu-id="068e1-188">For bulk copy, a format contains the following parts:</span></span>  
  
-   <span data-ttu-id="068e1-189">сопоставление столбцов файла пользователя со столбцами базы данных;</span><span class="sxs-lookup"><span data-stu-id="068e1-189">A mapping from user-file columns to database columns.</span></span>  
  
-   <span data-ttu-id="068e1-190">тип данных каждого столбца в файле пользователя;</span><span class="sxs-lookup"><span data-stu-id="068e1-190">The data type of each user-file column.</span></span>  
  
-   <span data-ttu-id="068e1-191">длина дополнительного признака для каждого столбца;</span><span class="sxs-lookup"><span data-stu-id="068e1-191">The length of the optional indicator for each column.</span></span>  
  
-   <span data-ttu-id="068e1-192">максимальная длина данных в каждом столбце файла пользователя;</span><span class="sxs-lookup"><span data-stu-id="068e1-192">The maximum length of data per user-file column.</span></span>  
  
-   <span data-ttu-id="068e1-193">дополнительная последовательность байт, служащая признаком конца для каждого столбца;</span><span class="sxs-lookup"><span data-stu-id="068e1-193">The optional terminating byte sequence for each column.</span></span>  
  
-   <span data-ttu-id="068e1-194">длина дополнительной последовательности байт, служащей признаком конца.</span><span class="sxs-lookup"><span data-stu-id="068e1-194">The length of the optional terminating byte sequence.</span></span>  
  
 <span data-ttu-id="068e1-195">Каждый вызов функции **bcp_setcolfmt** устанавливает формат для одного столбца пользовательского файла.</span><span class="sxs-lookup"><span data-stu-id="068e1-195">Each call to **bcp_setcolfmt** specifies the format for one user-file column.</span></span> <span data-ttu-id="068e1-196">Например, для изменения параметров по умолчанию для трех столбцов в пользовательском файле данных с пятью столбцами необходимо сначала вызвать функцию [bcp_columns](bcp-columns.md)**(5)**, а затем пять раз вызвать функцию **bcp_setcolfmt** , при этом три из этих вызовов должны устанавливать пользовательский формат.</span><span class="sxs-lookup"><span data-stu-id="068e1-196">For example, to change the default settings for three columns in a five-column user data file, first call [bcp_columns](bcp-columns.md)**(5)**, and then call **bcp_setcolfmt** five times, with three of those calls setting your custom format.</span></span> <span data-ttu-id="068e1-197">Для оставшихся двух вызовов необходимо установить для BCP_FMT_TYPE значение 0, а также установить для BCP_FMT_INDICATOR_LENGTH, BCP_FMT_DATA_LEN и *cbValue* значения 0, SQL_VARLEN_DATA и 0 соответственно.</span><span class="sxs-lookup"><span data-stu-id="068e1-197">For the remaining two calls, set BCP_FMT_TYPE to 0, and set BCP_FMT_INDICATOR_LENGTH, BCP_FMT_DATA_LEN, and *cbValue* to 0, SQL_VARLEN_DATA, and 0 respectively.</span></span> <span data-ttu-id="068e1-198">Эта процедура копирует все пять столбцов. Для трех применяется заданный измененный формат, а для двух оставшихся — формат по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="068e1-198">This procedure copies all five columns, three with your customized format and two with the default format.</span></span>  
  
 <span data-ttu-id="068e1-199">Функция **bcp_columns** должна быть вызвана перед вызовом функции **bcp_setcolfmt**.</span><span class="sxs-lookup"><span data-stu-id="068e1-199">The **bcp_columns** function must be called before calling **bcp_setcolfmt**.</span></span>  
  
 <span data-ttu-id="068e1-200">Необходимо вызвать функцию **bcp_setcolfmt** один раз для каждого свойства каждого столбца пользовательского файла.</span><span class="sxs-lookup"><span data-stu-id="068e1-200">You must call **bcp_setcolfmt** once for each property of each column in the user file.</span></span>  
  
 <span data-ttu-id="068e1-201">Нет необходимости копировать все данные из файла пользователя в таблицу SQL Server.</span><span class="sxs-lookup"><span data-stu-id="068e1-201">You do not need to copy all data in a user file to the SQL Server table.</span></span> <span data-ttu-id="068e1-202">Чтобы пропустить столбец, укажите формат данных для этого столбца, задав параметру BCP_FMT_SERVER_COL значение 0.</span><span class="sxs-lookup"><span data-stu-id="068e1-202">To skip a column, specify the format of the data for the column, setting the BCP_FMT_SERVER_COL parameter to 0.</span></span> <span data-ttu-id="068e1-203">Если требуется пропустить столбец, необходимо указать его тип.</span><span class="sxs-lookup"><span data-stu-id="068e1-203">If you want to skip a column, you must specify its type.</span></span>  
  
 <span data-ttu-id="068e1-204">Для сохранения спецификации формата можно воспользоваться функцией [bcp_writefmt](bcp-writefmt.md) .</span><span class="sxs-lookup"><span data-stu-id="068e1-204">The [bcp_writefmt](bcp-writefmt.md) function can be used to persist the format specification.</span></span>  
  
## <a name="bcp_setcolfmt-support-for-enhanced-date-and-time-features"></a><span data-ttu-id="068e1-205">Поддержка функции bcp_setcolfmt для улучшенной даты и функций времени</span><span class="sxs-lookup"><span data-stu-id="068e1-205">bcp_setcolfmt Support for Enhanced Date and Time Features</span></span>  
 <span data-ttu-id="068e1-206">Типы, используемые со свойством BCP_FMT_TYPE для типов даты и времени, задаются в изменениях при выполнении [операции копирования для расширенных типов даты и времени &#40;OLE DB и&#41;ODBC ](../native-client-odbc-date-time/bulk-copy-changes-for-enhanced-date-and-time-types-ole-db-and-odbc.md).</span><span class="sxs-lookup"><span data-stu-id="068e1-206">The types used with the BCP_FMT_TYPE property for date/time types are as specified in [Bulk Copy Changes for Enhanced Date and Time Types &#40;OLE DB and ODBC&#41;](../native-client-odbc-date-time/bulk-copy-changes-for-enhanced-date-and-time-types-ole-db-and-odbc.md).</span></span>  
  
 <span data-ttu-id="068e1-207">Дополнительные сведения см. в разделе [улучшения даты и времени &#40;&#41;ODBC ](../native-client-odbc-date-time/date-and-time-improvements-odbc.md).</span><span class="sxs-lookup"><span data-stu-id="068e1-207">For more information, see [Date and Time Improvements &#40;ODBC&#41;](../native-client-odbc-date-time/date-and-time-improvements-odbc.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="068e1-208">См. также:</span><span class="sxs-lookup"><span data-stu-id="068e1-208">See Also</span></span>  
 [<span data-ttu-id="068e1-209">Bulk Copy Functions</span><span class="sxs-lookup"><span data-stu-id="068e1-209">Bulk Copy Functions</span></span>](sql-server-driver-extensions-bulk-copy-functions.md)  
  
  
