---
title: Определение необходимости переноса таблицы или хранимой процедуры в выполняющуюся в памяти OLTP | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: in-memory-oltp
ms.topic: conceptual
helpviewer_keywords:
- Analyze, Migrate, Report
- AMR
ms.assetid: c1ef96f1-290d-4952-8369-2f49f27afee2
author: rothja
ms.author: jroth
ms.openlocfilehash: 8e517cff394bc0c813e34763469f75147a0a16c5
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87664197"
---
# <a name="determining-if-a-table-or-stored-procedure-should-be-ported-to-in-memory-oltp"></a><span data-ttu-id="6ed02-102">Определение, должна ли таблица или хранимая процедура быть перенесена в In-Memory OLTP</span><span class="sxs-lookup"><span data-stu-id="6ed02-102">Determining if a Table or Stored Procedure Should Be Ported to In-Memory OLTP</span></span>
  <span data-ttu-id="6ed02-103">Сборщик производительности транзакций в [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)] позволяет оценить производительность приложения базы данных, выполняющаяся в памяти.</span><span class="sxs-lookup"><span data-stu-id="6ed02-103">The transaction performance collector in [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)] helps you evaluate if In-Memory OLTP will improve your database application's performance.</span></span> <span data-ttu-id="6ed02-104">В отчете об анализе производительности транзакции также показано, сколько работы необходимо выполнить, чтобы включить In-Memory OLTP в приложении.</span><span class="sxs-lookup"><span data-stu-id="6ed02-104">The transaction performance analysis report also indicates how much work you must do to enable In-Memory OLTP in your application.</span></span> <span data-ttu-id="6ed02-105">После определения дисковой таблицы, которая переносится в In-Memory OLTP, можно для упрощения миграции таблицы использовать [советник по оптимизации для выполнения в памяти](memory-optimization-advisor.md).</span><span class="sxs-lookup"><span data-stu-id="6ed02-105">After you identify a disk-based table to port to In-Memory OLTP, you can use the [Memory Optimization Advisor](memory-optimization-advisor.md), to help you migrate the table.</span></span> <span data-ttu-id="6ed02-106">Аналогичным образом [Native Compilation Advisor](native-compilation-advisor.md) позволяет перенести хранимую процедуру в изначально скомпилированную хранимую процедуру.</span><span class="sxs-lookup"><span data-stu-id="6ed02-106">Similarly, the [Native Compilation Advisor](native-compilation-advisor.md) will help you port a stored procedure to a natively compiled stored procedure.</span></span>  
  
 <span data-ttu-id="6ed02-107">В этом разделе обсуждаются следующие темы:</span><span class="sxs-lookup"><span data-stu-id="6ed02-107">This topic will discuss how to:</span></span>  
  
-   <span data-ttu-id="6ed02-108">Настройка хранилища данных управления.</span><span class="sxs-lookup"><span data-stu-id="6ed02-108">Configure Management Data Warehouse.</span></span>  
  
-   <span data-ttu-id="6ed02-109">Настройка сбора данных.</span><span class="sxs-lookup"><span data-stu-id="6ed02-109">Configure data collection.</span></span>  
  
-   <span data-ttu-id="6ed02-110">Создайте отчеты анализа производительности транзакции, чтобы определить таблицы и хранимые процедуры, оказывающие критическое влияние на производительность.</span><span class="sxs-lookup"><span data-stu-id="6ed02-110">Generate transaction performance analysis reports to identify performance-critical tables and stored procedures.</span></span>  
  
 <span data-ttu-id="6ed02-111">Дополнительные сведения о методологиях миграции см. в разделе [Выполняемая в памяти OLTP — стандартные шаблоны рабочей нагрузки и вопросы миграции](https://msdn.microsoft.com/library/dn673538.aspx).</span><span class="sxs-lookup"><span data-stu-id="6ed02-111">For information about migration methodologies, see [In-Memory OLTP - Common Workload Patterns and Migration Considerations](https://msdn.microsoft.com/library/dn673538.aspx).</span></span>  
  
 <span data-ttu-id="6ed02-112">Сборщик данных о производительности транзакции и отчеты анализа производительности транзакции позволяют выполнить следующие задачи.</span><span class="sxs-lookup"><span data-stu-id="6ed02-112">The transaction performance collector and the transaction performance analysis reports help you accomplish the following tasks:</span></span>  
  
-   <span data-ttu-id="6ed02-113">Анализ рабочей нагрузки позволяет определить, улучшится ли производительность OLTP в памяти.</span><span class="sxs-lookup"><span data-stu-id="6ed02-113">Analyze your workload to determine if In-Memory OLTP will improve performance.</span></span> <span data-ttu-id="6ed02-114">Сборщик данных о производительности транзакции собирает и оценивает характеристики производительности вашей рабочей нагрузки.</span><span class="sxs-lookup"><span data-stu-id="6ed02-114">The transaction performance collector collects and evaluates the performance characteristics of your workload.</span></span> <span data-ttu-id="6ed02-115">.</span><span class="sxs-lookup"><span data-stu-id="6ed02-115">.</span></span> <span data-ttu-id="6ed02-116">Отчет анализа производительности транзакции затем порекомендует таблицы и хранимые процедуры, для которых преобразование в In-Memory OLTP будет наиболее полезным.</span><span class="sxs-lookup"><span data-stu-id="6ed02-116">The transaction performance analysis report then recommends tables and stored procedures that would benefit most from conversion to In-Memory OLTP.</span></span>  
  
-   <span data-ttu-id="6ed02-117">Помощь с планированием и выполнением миграции в OLTP в памяти.</span><span class="sxs-lookup"><span data-stu-id="6ed02-117">Help you plan and execute your migration to In-Memory OLTP.</span></span> <span data-ttu-id="6ed02-118">Миграция из дисковой таблицы в оптимизированную для памяти таблицу может занять много времени.</span><span class="sxs-lookup"><span data-stu-id="6ed02-118">The migration path from a disk based table to a memory-optimized table can be time consuming.</span></span> <span data-ttu-id="6ed02-119">Помощник по оптимизации для памяти позволит определить несовместимые компоненты в таблице, которые необходимо удалить до перемещения таблицы в In-Memory OLTP.</span><span class="sxs-lookup"><span data-stu-id="6ed02-119">The Memory-Optimization Advisor helps you identify the incompatibilities in your table that you must remove before moving the table to In-Memory OLTP.</span></span> <span data-ttu-id="6ed02-120">Помощник также позволяет понять последствия переноса таблицы в оптимизированную для памяти таблицу для приложения.</span><span class="sxs-lookup"><span data-stu-id="6ed02-120">The Memory-Optimization Advisor also helps you understand the impact that the migration of a table to a memory-optimized table will have on your application.</span></span>  
  
     <span data-ttu-id="6ed02-121">Можно проверить, будет ли применение In-Memory OLTP полезно для приложения, если потребуется спланировать миграцию в In-Memory OLTP или перенести некоторые таблицы и хранимые процедуры в In-Memory OLTP.</span><span class="sxs-lookup"><span data-stu-id="6ed02-121">You can see if your application would benefit from In-Memory OLTP, when you want to plan your migration to In-Memory OLTP, and whenever you work to migrate some of your tables and stored procedures to In-Memory OLTP.</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="6ed02-122">Производительность системы базы данных зависит от многих факторов, которые не все могут отслеживаться и измеряться сборщиком данных о производительности транзакции.</span><span class="sxs-lookup"><span data-stu-id="6ed02-122">The performance of a database system is dependent on a variety of factors, not all of which the transaction performance collector can observe and measure.</span></span> <span data-ttu-id="6ed02-123">Поэтому отчет анализа производительности транзакции не гарантирует, что фактическое улучшение производительности будет соответствовать прогнозируемому, если были сделаны какие-либо прогнозы.</span><span class="sxs-lookup"><span data-stu-id="6ed02-123">Therefore, the transaction performance analysis report does not guarantee actual performance gains will match its predictions, if any predictions are made.</span></span>  
  
 <span data-ttu-id="6ed02-124">Сборщик данных о производительности транзакций и возможность создания отчета об анализе производительности транзакций устанавливаются при выборе **средства управления — основные** **средства или инструменты управления — дополнительно** при установке [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="6ed02-124">The transaction performance collector and the ability to generate a transaction performance analysis report are installed when you select **Management Tools-Basic** or **Management Tools-Advanced** when you install [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)].</span></span>  
  
## <a name="best-practices"></a><span data-ttu-id="6ed02-125">Рекомендации</span><span class="sxs-lookup"><span data-stu-id="6ed02-125">Best Practices</span></span>  
 <span data-ttu-id="6ed02-126">Рекомендуемый рабочий процесс проиллюстрирован на следующей блок-схеме.</span><span class="sxs-lookup"><span data-stu-id="6ed02-126">The recommended workflow is illustrated in the following flowchart.</span></span> <span data-ttu-id="6ed02-127">Желтые узлы представляют необязательные процедуры.</span><span class="sxs-lookup"><span data-stu-id="6ed02-127">The yellow nodes represent optional procedures:</span></span>  
  
 <span data-ttu-id="6ed02-128">![Рабочий процесс AMR](../../database-engine/media/amr-1.gif "Рабочий процесс AMR")</span><span class="sxs-lookup"><span data-stu-id="6ed02-128">![AMR workflow](../../database-engine/media/amr-1.gif "AMR workflow")</span></span>  
  
 <span data-ttu-id="6ed02-129">Можно использовать любой способ для получения базового уровня производительности, в том числе журналы счетчиков производительности или монитор активности [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="6ed02-129">You can use any method to establish a performance baseline, including but not limited to using performance counter logs or the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Activity Monitor.</span></span> <span data-ttu-id="6ed02-130">Сведения, которые используются при определении базового уровня производительности и сравнении:</span><span class="sxs-lookup"><span data-stu-id="6ed02-130">The information to use in your performance baseline and your comparisons are:</span></span>  
  
-   <span data-ttu-id="6ed02-131">Потребление ресурсов ЦП [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="6ed02-131">CPU consumption of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span>  
  
-   <span data-ttu-id="6ed02-132">Потребление памяти [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="6ed02-132">Memory consumption of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span>  
  
-   <span data-ttu-id="6ed02-133">Операции ввода-вывода [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="6ed02-133">I/O activity of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span>  
  
-   <span data-ttu-id="6ed02-134">Пропускная способность транзакций экземпляра при обработке транзакций.</span><span class="sxs-lookup"><span data-stu-id="6ed02-134">Transaction throughput of the instance while processing transactions.</span></span>  
  
 <span data-ttu-id="6ed02-135">Сборщик данных о производительности транзакции записывает данные каждые 15 минут.</span><span class="sxs-lookup"><span data-stu-id="6ed02-135">The transaction performance collector captures data every 15 minutes.</span></span> <span data-ttu-id="6ed02-136">Чтобы получить пригодные результаты, запускайте сборщик данных о производительности транзакции как минимум на один час.</span><span class="sxs-lookup"><span data-stu-id="6ed02-136">To obtain usable results, run the transaction performance collector for at least one hour.</span></span> <span data-ttu-id="6ed02-137">Чтобы получить наилучший результат, запустите сборщик данных на такое время, какое необходимо для сбора данных для ваших основных сценариев.</span><span class="sxs-lookup"><span data-stu-id="6ed02-137">To obtain best results, run the transaction performance collector for as much time as needed to capture data for your primary scenarios.</span></span> <span data-ttu-id="6ed02-138">Создавайте отчет анализа производительности транзакции только после завершения сбора данных.</span><span class="sxs-lookup"><span data-stu-id="6ed02-138">Generate a transaction performance analysis report only after you have finished gathering data.</span></span>  
  
 <span data-ttu-id="6ed02-139">Настройте сборщик данных о производительности для выполнения на своем экземпляре [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] в производственной среде и соберите данные на экземпляре [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] в среде разработки (тестовой), чтобы сократить издержки.</span><span class="sxs-lookup"><span data-stu-id="6ed02-139">Configure the transaction performance collector to run on your [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance in production and collect the data on a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance in your development (test) environment to ensure minimum overhead.</span></span> <span data-ttu-id="6ed02-140">Сведения о том, как сохранить данные в базе данных хранилища данных управления на удаленном [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] экземпляре, см. в разделе [Настройка сбора данных на удаленном экземпляре SQL Server](determining-if-a-table-or-stored-procedure-should-be-ported-to-in-memory-oltp.md#xxx).</span><span class="sxs-lookup"><span data-stu-id="6ed02-140">For information on how to save data in a Management Data Warehouse database on a remote [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance, see [Configure Data Collection on a Remote SQL Server Instance](determining-if-a-table-or-stored-procedure-should-be-ported-to-in-memory-oltp.md#xxx).</span></span>  
  
## <a name="performance-impacts"></a><span data-ttu-id="6ed02-141">Влияние на производительность</span><span class="sxs-lookup"><span data-stu-id="6ed02-141">Performance Impacts</span></span>  
 <span data-ttu-id="6ed02-142">Сборщик данных о производительности транзакции состоит из двух наборов элементов сбора данных.</span><span class="sxs-lookup"><span data-stu-id="6ed02-142">The transaction performance collector consists of two data collection sets:</span></span>  
  
-   <span data-ttu-id="6ed02-143">Анализ сведений об использовании таблицы</span><span class="sxs-lookup"><span data-stu-id="6ed02-143">Table Usage Analysis</span></span>  
  
-   <span data-ttu-id="6ed02-144">Анализ хранимой процедуры</span><span class="sxs-lookup"><span data-stu-id="6ed02-144">Stored Procedure Analysis</span></span>  
  
 <span data-ttu-id="6ed02-145">Наборы элементов сбора собирают данные из трех динамических административных представлений (DMV) через каждые 15 минут и передают данные в базу данных, настроенную на использование в качестве хранилища данных управления.</span><span class="sxs-lookup"><span data-stu-id="6ed02-145">The collection sets collect data from three dynamic management views (DMV) every fifteen minutes, and upload the data to the database configured to act as the Management Data Warehouse.</span></span> <span data-ttu-id="6ed02-146">Передача собранных данных почти не оказывает влияния на производительность.</span><span class="sxs-lookup"><span data-stu-id="6ed02-146">Uploading the collected data incurs minimal performance impact.</span></span>  
  
## <a name="use-the-transaction-performance-collector"></a><span data-ttu-id="6ed02-147">Использование сборщика данных о производительности транзакции</span><span class="sxs-lookup"><span data-stu-id="6ed02-147">Use the Transaction Performance Collector</span></span>  
 <span data-ttu-id="6ed02-148">Для выполнения следующих шагов требуется [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)] в [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)].</span><span class="sxs-lookup"><span data-stu-id="6ed02-148">The following steps require [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)] in [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)].</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="6ed02-149">Не изменяйте схему (не добавляйте и не удаляйте базы данных, не создавайте и не удаляйте таблицы) во время профилирования.</span><span class="sxs-lookup"><span data-stu-id="6ed02-149">Do not change the schema (for example, add or remove databases or create or drop tables) during profiling.</span></span> <span data-ttu-id="6ed02-150">Если схема базы данных изменится во время сбора данных, то база данных может неточно отразиться в отчете.</span><span class="sxs-lookup"><span data-stu-id="6ed02-150">If you change the schema of a database while collecting data, the database may not be accurately included in the report.</span></span>  
  
### <a name="configure-management-data-warehouse"></a><span data-ttu-id="6ed02-151">Настройка хранилища данных управления</span><span class="sxs-lookup"><span data-stu-id="6ed02-151">Configure Management Data Warehouse</span></span>  
 <span data-ttu-id="6ed02-152">Хранилище данных управления должно быть настроено для использования сборщика данных о производительности транзакции.</span><span class="sxs-lookup"><span data-stu-id="6ed02-152">Management Data Warehouse must be configured to use the transaction performance collector.</span></span>  
  
 <span data-ttu-id="6ed02-153">Версия экземпляра [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], для которого будет выполнен сбор данных (профиль), должна совпадать с версией [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], в которой настроено хранилище данных управления, или быть старее.</span><span class="sxs-lookup"><span data-stu-id="6ed02-153">The version of the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance that you will collect data on (profile) should be the same version or older than the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] where Management Data Warehouse is configured.</span></span>  
  
1.  <span data-ttu-id="6ed02-154">В обозревателе объектов разверните узел **Управление**.</span><span class="sxs-lookup"><span data-stu-id="6ed02-154">In Object Explorer, expand **Management**.</span></span>  
  
2.  <span data-ttu-id="6ed02-155">Щелкните правой кнопкой мыши **сбор данных** и выберите **задачи** , а затем **Настройте хранилище данных управления**.</span><span class="sxs-lookup"><span data-stu-id="6ed02-155">Right click **Data Collection** and select **Tasks** and then **Configure Management Data Warehouse**.</span></span> <span data-ttu-id="6ed02-156">Запустится **Мастер настройки хранилища данных управления** .</span><span class="sxs-lookup"><span data-stu-id="6ed02-156">The **Configure Management Data Warehouse Wizard** begins.</span></span>  
  
3.  <span data-ttu-id="6ed02-157">Нажмите кнопку **Далее** , чтобы выбрать базу данных, которая будет использоваться в качестве хранилища управляющих данных.</span><span class="sxs-lookup"><span data-stu-id="6ed02-157">Click **Next** to select the database that will act as the Management Data Warehouse.</span></span>  
  
4.  <span data-ttu-id="6ed02-158">Нажмите кнопку **создать** , чтобы создать новую базу данных для хранения данных профиля.</span><span class="sxs-lookup"><span data-stu-id="6ed02-158">Click **New** to create a new database to hold the profile data.</span></span> <span data-ttu-id="6ed02-159">После завершения создания базы данных нажмите кнопку **Далее** в мастере.</span><span class="sxs-lookup"><span data-stu-id="6ed02-159">After you finish creating the database, click **Next** in the wizard.</span></span>  
  
5.  <span data-ttu-id="6ed02-160">На следующем шаге мастера вы можете добавить пользователей и имена входа.</span><span class="sxs-lookup"><span data-stu-id="6ed02-160">The next step in the wizard lets you add users and logins.</span></span> <span data-ttu-id="6ed02-161">Можно сопоставить имена входа с членствами роли для экземпляра MDW.</span><span class="sxs-lookup"><span data-stu-id="6ed02-161">You may map logins to role memberships for the MDW instance.</span></span> <span data-ttu-id="6ed02-162">Этого не требуется для сбора данных из локального экземпляра.</span><span class="sxs-lookup"><span data-stu-id="6ed02-162">This is not required to collect data from the local instance.</span></span> <span data-ttu-id="6ed02-163">Если вы не собираете данные из локального экземпляра, можно предоставить членство в роли базы данных `mdw_admin` учетной записи, которая будет выполнять профилируемые транзакции.</span><span class="sxs-lookup"><span data-stu-id="6ed02-163">If you are not collecting data from the local instance, you can grant database role membership `mdw_admin` to the account that will run transactions that will be profiled.</span></span> <span data-ttu-id="6ed02-164">По завершении нажмите кнопку **Далее**.</span><span class="sxs-lookup"><span data-stu-id="6ed02-164">When done, click **Next**.</span></span>  
  
6.  <span data-ttu-id="6ed02-165">Убедитесь, что запущен агент [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="6ed02-165">Make sure that [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent is running.</span></span>  
  
7.  <span data-ttu-id="6ed02-166">На следующем экране нажмите кнопку **Готово** , чтобы выйти из мастера.</span><span class="sxs-lookup"><span data-stu-id="6ed02-166">On the next screen, click **Finish** to exit the wizard.</span></span>  
  
### <a name="configure-data-collection-on-a-local-ssnoversion-instance"></a><span data-ttu-id="6ed02-167">Настройка сбора данных на локальном экземпляре [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]</span><span class="sxs-lookup"><span data-stu-id="6ed02-167">Configure Data Collection on a Local [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Instance</span></span>  
 <span data-ttu-id="6ed02-168">Для сбора данных необходимо запустить агент [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="6ed02-168">Data collection requires [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent to be started.</span></span> <span data-ttu-id="6ed02-169">Необходимо настроить только один сборщик данных на сервере.</span><span class="sxs-lookup"><span data-stu-id="6ed02-169">You only need to configure one data collector on a server.</span></span>  
  
 <span data-ttu-id="6ed02-170">Сборщик данных можно настроить на SQL Server 2012 или более поздней версии [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="6ed02-170">A data collector can be configured on a SQL Server 2012 or later version of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span>  
  
 <span data-ttu-id="6ed02-171">Настройка сбора данных для передачи в базу данных хранилища данных управления на том же экземпляре.</span><span class="sxs-lookup"><span data-stu-id="6ed02-171">To configure data collection to upload to a Management Data Warehouse database on the same instance,</span></span>  
  
1.  <span data-ttu-id="6ed02-172">В **обозревателе объектов**разверните узел **Управление**.</span><span class="sxs-lookup"><span data-stu-id="6ed02-172">In **Object Explorer**, expand **Management**.</span></span>  
  
2.  <span data-ttu-id="6ed02-173">Щелкните правой кнопкой мыши элемент **сбор данных**, выберите **задачи**, а затем **Настройте сбор данных**.</span><span class="sxs-lookup"><span data-stu-id="6ed02-173">Right click **Data Collection**, select **Tasks**, and then **Configure Data Collection**.</span></span> <span data-ttu-id="6ed02-174">Запустится **Мастер настройки сбора данных** .</span><span class="sxs-lookup"><span data-stu-id="6ed02-174">The **Configure Data Collection Wizard** begins.</span></span>  
  
3.  <span data-ttu-id="6ed02-175">Нажмите кнопку **Далее** , чтобы выбрать базу данных, в которой будут собираются данные профиля.</span><span class="sxs-lookup"><span data-stu-id="6ed02-175">Click **Next** to select the database that will collect the profile data.</span></span>  
  
4.  <span data-ttu-id="6ed02-176">Выберите текущий экземпляр [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] и базу данных хранилища данных управления в этом экземпляре.</span><span class="sxs-lookup"><span data-stu-id="6ed02-176">Select the current [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance and a Management Data Warehouse database on that instance.</span></span>  
  
5.  <span data-ttu-id="6ed02-177">В поле **выберите Наборы сборщиков данных, которые необходимо включить**, выберите наборы элементов **сбора "производительность транзакций**".</span><span class="sxs-lookup"><span data-stu-id="6ed02-177">In the box labeled **Select data collector sets you want to enable**, select **Transaction Performance Collection Sets**.</span></span> <span data-ttu-id="6ed02-178">По завершении нажмите кнопку **Далее**.</span><span class="sxs-lookup"><span data-stu-id="6ed02-178">Click **Next** when done.</span></span>  
  
6.  <span data-ttu-id="6ed02-179">Проверьте выбранные параметры.</span><span class="sxs-lookup"><span data-stu-id="6ed02-179">Verify the selections.</span></span> <span data-ttu-id="6ed02-180">Нажмите кнопку **назад** , чтобы изменить параметры.</span><span class="sxs-lookup"><span data-stu-id="6ed02-180">Click **Back** to modify the settings.</span></span> <span data-ttu-id="6ed02-181">По завершении нажмите кнопку **Готово** .</span><span class="sxs-lookup"><span data-stu-id="6ed02-181">Click **Finish** when done.</span></span>  
  
###  <a name="configure-data-collection-on-a-remote-ssnoversion-instance"></a><a name="xxx"></a><span data-ttu-id="6ed02-182">Настройка сбора данных на удаленном [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] экземпляре</span><span class="sxs-lookup"><span data-stu-id="6ed02-182">Configure Data Collection on a Remote [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Instance</span></span>  
 <span data-ttu-id="6ed02-183">Для сбора данных требуется запущенный агент [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] на экземпляре, который будет собирать данные.</span><span class="sxs-lookup"><span data-stu-id="6ed02-183">Data collection requires [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent to be started on the instance that will collect the data.</span></span>  
  
 <span data-ttu-id="6ed02-184">Сборщик данных можно настроить на SQL Server 2012 или более поздней версии [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="6ed02-184">A data collector can be configured on a SQL Server 2012 or later version of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span>  
  
 <span data-ttu-id="6ed02-185">Вам требуется настроить прокси-агент [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] с правильными учетными данными для сборщика данных, чтобы передавать данные в базу данных хранилища данных управления в экземпляре, отличном от экземпляра, в котором будут профилироваться транзакции.</span><span class="sxs-lookup"><span data-stu-id="6ed02-185">You need a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent proxy established with the correct credential for a data collector to upload data to a Management Data Warehouse database on an instance that is different from where transactions will be profiled.</span></span> <span data-ttu-id="6ed02-186">Чтобы включить прокси-агент [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], необходимо сначала настроить учетные данные с именем входа в домен.</span><span class="sxs-lookup"><span data-stu-id="6ed02-186">To enable a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent proxy, you must first establish a credential with a domain-enabled login.</span></span> <span data-ttu-id="6ed02-187">Имя входа в домен должно быть участником группы `mdw_admin` для базы данных хранилища данных управления.</span><span class="sxs-lookup"><span data-stu-id="6ed02-187">The domain-enabled login must be a member of `mdw_admin` group for the Management Data Warehouse database.</span></span> <span data-ttu-id="6ed02-188">Сведения о создании учетных данных см. в разделе [как создать учетные данные (SQL Server Management Studio)](../security/authentication-access/create-a-credential.md) .</span><span class="sxs-lookup"><span data-stu-id="6ed02-188">See [How to: Create a Credential (SQL Server Management Studio)](../security/authentication-access/create-a-credential.md) for information on how to create a credential.</span></span>  
  
 <span data-ttu-id="6ed02-189">Настройка сбора данных для передачи в базу данных хранилища данных управления на другом экземпляре.</span><span class="sxs-lookup"><span data-stu-id="6ed02-189">To configure data collection to upload to a Management Data Warehouse database on a different instance,</span></span>  
  
1.  <span data-ttu-id="6ed02-190">В экземпляре, содержащем дисковые объекты, которые требуется перенести в выполняющуюся в памяти OLTP, разверните узел **Управление** в обозревателе объектов.</span><span class="sxs-lookup"><span data-stu-id="6ed02-190">On the instance that contains the disk-based objects that you want to migrate to In-Memory OLTP, expand the **Management** node in Object Explorer.</span></span>  
  
2.  <span data-ttu-id="6ed02-191">Щелкните правой кнопкой мыши **сбор данных** и выберите **задачи** , а затем **Настройте сбор данных**.</span><span class="sxs-lookup"><span data-stu-id="6ed02-191">Right click **Data Collection** and select **Tasks** and then **Configure Data Collection**.</span></span> <span data-ttu-id="6ed02-192">Запустится **Мастер настройки сбора данных** .</span><span class="sxs-lookup"><span data-stu-id="6ed02-192">The **Configure Data Collection Wizard** begins.</span></span>  
  
3.  <span data-ttu-id="6ed02-193">Нажмите кнопку **Далее** , чтобы выбрать базу данных, в которой будут собираются данные профиля.</span><span class="sxs-lookup"><span data-stu-id="6ed02-193">Click **Next** to select the database that will collect the profile data.</span></span>  
  
4.  <span data-ttu-id="6ed02-194">Убедитесь, что база данных хранилища данных управления существует в другом экземпляре [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="6ed02-194">Make sure that a Management Data Warehouse database exists on the other [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance.</span></span>  
  
5.  <span data-ttu-id="6ed02-195">Выберите другой экземпляр [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] и базу данных хранилища данных управления в этом экземпляре.</span><span class="sxs-lookup"><span data-stu-id="6ed02-195">Select another [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance and a Management Data Warehouse database on that instance.</span></span>  
  
     <span data-ttu-id="6ed02-196">Версия экземпляра [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], для которого будет выполнен сбор данных (профиль), должна совпадать с версией [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], в которой настроено хранилище данных управления, или быть старее.</span><span class="sxs-lookup"><span data-stu-id="6ed02-196">The version of the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance that you will collect data on (profile) should be the same version or older than the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] where Management Data Warehouse is configured.</span></span>  
  
6.  <span data-ttu-id="6ed02-197">В поле **выберите Наборы сборщиков данных, которые необходимо включить**, выберите наборы элементов **сбора "производительность транзакций**".</span><span class="sxs-lookup"><span data-stu-id="6ed02-197">In the box labeled **Select data collector sets you want to enable**, select **Transaction Performance Collection Sets**.</span></span>  
  
7.  <span data-ttu-id="6ed02-198">Установите флажок **использовать [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] прокси-агент для удаленных отправок**.</span><span class="sxs-lookup"><span data-stu-id="6ed02-198">Select **Use a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent proxy for remote uploads**.</span></span>  
  
8.  <span data-ttu-id="6ed02-199">По завершении нажмите кнопку **Далее**.</span><span class="sxs-lookup"><span data-stu-id="6ed02-199">Click **Next** when done.</span></span>  
  
9. <span data-ttu-id="6ed02-200">Выберите прокси.</span><span class="sxs-lookup"><span data-stu-id="6ed02-200">Select the proxy.</span></span>  
  
     <span data-ttu-id="6ed02-201">Чтобы создать новую запись агента-посредника [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)],</span><span class="sxs-lookup"><span data-stu-id="6ed02-201">If you want to create a new [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent proxy,</span></span>  
  
    1.  <span data-ttu-id="6ed02-202">Нажмите кнопку **создать** , чтобы открыть диалоговое окно **Создание учетной записи-посредника** .</span><span class="sxs-lookup"><span data-stu-id="6ed02-202">Click **New** to display the **New Proxy Account** dialog box.</span></span>  
  
    2.  <span data-ttu-id="6ed02-203">В диалоговом окне **создать учетную запись-посредник** введите имя учетной записи-посредника, выберите учетные данные и при необходимости введите описание.</span><span class="sxs-lookup"><span data-stu-id="6ed02-203">In the **New Proxy Account** dialog box, enter the name of the proxy, select the credential, and optionally enter a description.</span></span> <span data-ttu-id="6ed02-204">Затем щелкните **субъекты**.</span><span class="sxs-lookup"><span data-stu-id="6ed02-204">Then, click **Principals**.</span></span>  
  
    3.  <span data-ttu-id="6ed02-205">Нажмите кнопку **Добавить** и выберите роль **msdb** .</span><span class="sxs-lookup"><span data-stu-id="6ed02-205">Click **Add** and select **Msdb** role.</span></span>  
  
    4.  <span data-ttu-id="6ed02-206">Выберите `dc_proxy` и нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="6ed02-206">Select `dc_proxy` and click **OK**.</span></span> <span data-ttu-id="6ed02-207">Затем повторно нажмите **OK**.</span><span class="sxs-lookup"><span data-stu-id="6ed02-207">Then click **OK** again.</span></span>  
  
     <span data-ttu-id="6ed02-208">После выбора правильного прокси-сервера нажмите кнопку **Далее**.</span><span class="sxs-lookup"><span data-stu-id="6ed02-208">After the correct proxy is selected, click **Next**.</span></span>  
  
10. <span data-ttu-id="6ed02-209">Чтобы настроить системные наборы сбора, проверьте **системные наборы сбора** и нажмите кнопку **Далее**.</span><span class="sxs-lookup"><span data-stu-id="6ed02-209">To configure System Collection Sets, check **System Collection Sets** and click **Next**.</span></span>  
  
11. <span data-ttu-id="6ed02-210">Проверьте выбранные параметры.</span><span class="sxs-lookup"><span data-stu-id="6ed02-210">Verify the selections.</span></span> <span data-ttu-id="6ed02-211">Нажмите кнопку **назад** , чтобы изменить параметры.</span><span class="sxs-lookup"><span data-stu-id="6ed02-211">Click **Back** to modify the settings.</span></span> <span data-ttu-id="6ed02-212">По **Finish** завершении кликкк.</span><span class="sxs-lookup"><span data-stu-id="6ed02-212">Clicck **Finish** when done.</span></span>  
  
 <span data-ttu-id="6ed02-213">Теперь наборы сбора данных настроены и запущены на вашем экземпляре.</span><span class="sxs-lookup"><span data-stu-id="6ed02-213">Data collection sets should now be configured and running on your instance.</span></span>  
  
### <a name="generate-reports"></a><span data-ttu-id="6ed02-214">Формирование отчета</span><span class="sxs-lookup"><span data-stu-id="6ed02-214">Generate Reports</span></span>  
 <span data-ttu-id="6ed02-215">Вы можете создать отчеты об анализе производительности транзакций, щелкнув правой кнопкой мыши базу данных хранилища данных управления и выбрав пункт **отчеты**, затем **хранилище данных управления**, а затем — **Обзор анализа производительности транзакций**.</span><span class="sxs-lookup"><span data-stu-id="6ed02-215">You can generate transaction performance analysis reports by right clicking the database of the Management Data Warehouse and selecting **Reports**, then **Management Data Warehouse**, and then **Transaction Performance Analysis Overview**.</span></span>  
  
 <span data-ttu-id="6ed02-216">Отчет собирает сведения обо всех пользовательских базах данных на сервере рабочей нагрузки.</span><span class="sxs-lookup"><span data-stu-id="6ed02-216">The report collects information about all user databases on the workload server.</span></span> <span data-ttu-id="6ed02-217">Если база данных хранилища данных управления (MDW) находится на локальном компьютере, в отчете будут показаны базы данных MDW.</span><span class="sxs-lookup"><span data-stu-id="6ed02-217">If your Management Data Warehouse (MDW) database is on the local computer, you will see the MDW database(s) in the report.</span></span>  
  
 <span data-ttu-id="6ed02-218">Хранимая процедура с высоким коэффициентом расхода времени ЦП — кандидат для миграции.</span><span class="sxs-lookup"><span data-stu-id="6ed02-218">A stored procedure with high ratio of CPU time to elapsed time is a candidate for migration.</span></span> <span data-ttu-id="6ed02-219">В отчете отображаются все ссылки на таблицу, поскольку скомпилированные хранимые процедуры могут ссылаться только на таблицы, оптимизированные для памяти, что может увеличить расходы времени при миграции.</span><span class="sxs-lookup"><span data-stu-id="6ed02-219">The report shows all table references, because natively compiled stored procedures can only reference memory-optimized tables, which can add to the migration cost.</span></span>  
  
 <span data-ttu-id="6ed02-220">Подробный отчет для таблицы состоит из трех разделов.</span><span class="sxs-lookup"><span data-stu-id="6ed02-220">The details report for a table consists of three sections:</span></span>  
  
-   <span data-ttu-id="6ed02-221">Раздел статистики сканирования</span><span class="sxs-lookup"><span data-stu-id="6ed02-221">Scan Statistics Section</span></span>  
  
     <span data-ttu-id="6ed02-222">Этот раздел содержит одну таблицу с собранными статистическими данными о сканированиях таблицы базы данных.</span><span class="sxs-lookup"><span data-stu-id="6ed02-222">This section includes a single table that shows the statistics that were collected about scans on the database table.</span></span> <span data-ttu-id="6ed02-223">Это следующие столбцы:</span><span class="sxs-lookup"><span data-stu-id="6ed02-223">The columns are:</span></span>  
  
    -   <span data-ttu-id="6ed02-224">Процент от общего количества обращений.</span><span class="sxs-lookup"><span data-stu-id="6ed02-224">Percent of total accesses.</span></span> <span data-ttu-id="6ed02-225">Процент операций сканирования и поиска в этой таблице от активности всей базы данных.</span><span class="sxs-lookup"><span data-stu-id="6ed02-225">The percentage of scans and seeks on this table with respect to the activity of the entire database.</span></span> <span data-ttu-id="6ed02-226">Чем выше это значение, тем интенсивнее эта таблица использовалась по сравнению с другими таблицами в базе данных.</span><span class="sxs-lookup"><span data-stu-id="6ed02-226">The higher this percentage, the more heavily used the table is compared to other tables in the database.</span></span>  
  
    -   <span data-ttu-id="6ed02-227">Статистика поиска или статистика сканирования диапазона.</span><span class="sxs-lookup"><span data-stu-id="6ed02-227">Lookup Statistics/Range Scan Statistics.</span></span> <span data-ttu-id="6ed02-228">В этом столбце указывается число уточняющих запросов и сканирований диапазона (индекса и таблиц), выполненных для таблицы во время профилирования.</span><span class="sxs-lookup"><span data-stu-id="6ed02-228">This column records the number of point lookups and range scans (index scans and table scans) conducted on the table during profiling.</span></span> <span data-ttu-id="6ed02-229">Среднее значение для одной транзакции является приблизительным.</span><span class="sxs-lookup"><span data-stu-id="6ed02-229">Average per transaction is an estimate.</span></span>  
  
    -   <span data-ttu-id="6ed02-230">Приращение взаимодействия и собственное приращение.</span><span class="sxs-lookup"><span data-stu-id="6ed02-230">Interop Gain and Native Gain.</span></span> <span data-ttu-id="6ed02-231">В этих столбцах указывается приблизительная сумма прироста производительности уточняющего запроса или сканирования диапазона, которой удалось бы добиться, если бы таблица была преобразована в оптимизированную для памяти таблицу.</span><span class="sxs-lookup"><span data-stu-id="6ed02-231">These columns estimate the amount of performance benefit a point lookup or range scan would have if the table is converted to a memory-optimized table.</span></span>  
  
-   <span data-ttu-id="6ed02-232">Раздел статистики блокировки</span><span class="sxs-lookup"><span data-stu-id="6ed02-232">Contention Statistics Section</span></span>  
  
     <span data-ttu-id="6ed02-233">В этом разделе представлена таблица, в которой отображаются блокировки для таблицы базы данных.</span><span class="sxs-lookup"><span data-stu-id="6ed02-233">This section includes a table that shows contention on the database table.</span></span> <span data-ttu-id="6ed02-234">Дополнительные сведения о кратковременных блокировках и блокировках базы данных см. в разделе [архитектура блокировки](https://msdn.microsoft.com/library/aa224738\(v=sql.80\).aspx).</span><span class="sxs-lookup"><span data-stu-id="6ed02-234">For more information regarding database latches and locks, please see [Locking Architecture](https://msdn.microsoft.com/library/aa224738\(v=sql.80\).aspx).</span></span> <span data-ttu-id="6ed02-235">Существуют следующие столбцы.</span><span class="sxs-lookup"><span data-stu-id="6ed02-235">The columns are as follows:</span></span>  
  
    -   <span data-ttu-id="6ed02-236">Процент от общего ожидания.</span><span class="sxs-lookup"><span data-stu-id="6ed02-236">Percent of total waits.</span></span> <span data-ttu-id="6ed02-237">Процент ожидания блокировок и кратковременных блокировок в этой таблице по сравнению с активностью базы данных.</span><span class="sxs-lookup"><span data-stu-id="6ed02-237">The percentage of latch and lock waits on this database table compared to activity of the database.</span></span> <span data-ttu-id="6ed02-238">Чем выше это значение, тем интенсивнее эта таблица использовалась по сравнению с другими таблицами в базе данных.</span><span class="sxs-lookup"><span data-stu-id="6ed02-238">The higher this percentage, the more heavily used the table is compared to other tables in the database.</span></span>  
  
    -   <span data-ttu-id="6ed02-239">Статистика кратковременных блокировок.</span><span class="sxs-lookup"><span data-stu-id="6ed02-239">Latch Statistics.</span></span> <span data-ttu-id="6ed02-240">В этих столбцах указывается число ожиданий кратковременных блокировок для запросов к этой таблице.</span><span class="sxs-lookup"><span data-stu-id="6ed02-240">These columns record the number of latch waits for queries involving for this table.</span></span> <span data-ttu-id="6ed02-241">Сведения об кратковременных блокировках см. в разделе [кратковременная блокировка](https://msdn.microsoft.com/library/aa224727\(v=SQL.80\).aspx).</span><span class="sxs-lookup"><span data-stu-id="6ed02-241">For information on latches, see [Latching](https://msdn.microsoft.com/library/aa224727\(v=SQL.80\).aspx).</span></span> <span data-ttu-id="6ed02-242">Чем больше это значение, тем больше конфликтов кратковременных блокировок в таблице.</span><span class="sxs-lookup"><span data-stu-id="6ed02-242">The higher this number, the more latch contention on the table.</span></span>  
  
    -   <span data-ttu-id="6ed02-243">Статистика блокировок.</span><span class="sxs-lookup"><span data-stu-id="6ed02-243">Lock Statistics.</span></span> <span data-ttu-id="6ed02-244">В этой группе столбцов указывается число получений и ожиданий блокировок для запросов к этой таблице.</span><span class="sxs-lookup"><span data-stu-id="6ed02-244">This group of columns record the number of page lock acquisitions and waits for queries for this table.</span></span> <span data-ttu-id="6ed02-245">Дополнительные сведения о блокировках см. [в разделе Основные сведения о блокировке в SQL Server](https://msdn.microsoft.com/library/aa213039\(v=SQL.80\).aspx).</span><span class="sxs-lookup"><span data-stu-id="6ed02-245">For more information on locks, see [Understanding Locking in SQL Server](https://msdn.microsoft.com/library/aa213039\(v=SQL.80\).aspx).</span></span> <span data-ttu-id="6ed02-246">Чем больше ожиданий, тем больше конфликтов блокировок в таблице.</span><span class="sxs-lookup"><span data-stu-id="6ed02-246">The more waits, the more lock contention on the table.</span></span>  
  
-   <span data-ttu-id="6ed02-247">Раздел трудностей с миграцией</span><span class="sxs-lookup"><span data-stu-id="6ed02-247">Migration Difficulties Section</span></span>  
  
     <span data-ttu-id="6ed02-248">Этот раздел содержит таблицу со сведениями о трудностях, связанных с преобразованием этой таблицы базы данных в оптимизированную для памяти таблицу.</span><span class="sxs-lookup"><span data-stu-id="6ed02-248">This section includes a table that shows the difficulty of converting this database table to a memory-optimized table.</span></span> <span data-ttu-id="6ed02-249">Чем выше оценка трудности, тем сложнее преобразовать таблицу.</span><span class="sxs-lookup"><span data-stu-id="6ed02-249">A higher difficulty rating indicates more difficultly to convert the table.</span></span> <span data-ttu-id="6ed02-250">Чтобы просмотреть сведения для преобразования этой таблицы базы данных, используйте [Помощник по оптимизации памяти](memory-optimization-advisor.md).</span><span class="sxs-lookup"><span data-stu-id="6ed02-250">To see details to convert this database table, please use the [Memory Optimization Advisor](memory-optimization-advisor.md).</span></span>  
  
 <span data-ttu-id="6ed02-251">Статистика сканирования и состязаний для отчета о таблицах собирается и объединена из [sys. dm_db_index_operational_stats &#40;&#41;Transact-SQL ](/sql/relational-databases/system-dynamic-management-views/sys-dm-db-index-operational-stats-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="6ed02-251">Scan and contention statistics on the table details report is gathered and aggregated from [sys.dm_db_index_operational_stats &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-db-index-operational-stats-transact-sql).</span></span>  
  
 <span data-ttu-id="6ed02-252">Подробный отчет для хранимой процедуры состоит из двух разделов.</span><span class="sxs-lookup"><span data-stu-id="6ed02-252">The details report for a stored procedure consists of two sections:</span></span>  
  
-   <span data-ttu-id="6ed02-253">Раздел статистики выполнения</span><span class="sxs-lookup"><span data-stu-id="6ed02-253">Execution Statistics Section</span></span>  
  
     <span data-ttu-id="6ed02-254">Этот раздел содержит таблицу с собранными статистическими данными о выполнении хранимой процедуры.</span><span class="sxs-lookup"><span data-stu-id="6ed02-254">This section includes a table that shows the statistics that were collected about the stored procedure's executions.</span></span> <span data-ttu-id="6ed02-255">Существуют следующие столбцы.</span><span class="sxs-lookup"><span data-stu-id="6ed02-255">The columns are as follows:</span></span>  
  
    -   <span data-ttu-id="6ed02-256">Время кэширования.</span><span class="sxs-lookup"><span data-stu-id="6ed02-256">Cached Time.</span></span> <span data-ttu-id="6ed02-257">Время, в течение которого план выполнения был кэширован.</span><span class="sxs-lookup"><span data-stu-id="6ed02-257">The time this execution plan is cached.</span></span> <span data-ttu-id="6ed02-258">Если хранимая процедура выходит из кэша плана и заново в него входит, время будет указано для каждого кэша.</span><span class="sxs-lookup"><span data-stu-id="6ed02-258">If the stored procedure drops out of the plan cache and re-enters, there will be times for each cache.</span></span>  
  
    -   <span data-ttu-id="6ed02-259">Всего времени ЦП.</span><span class="sxs-lookup"><span data-stu-id="6ed02-259">Total CPU Time.</span></span> <span data-ttu-id="6ed02-260">Общее время ЦП, затраченное хранимой процедурой во время профилирования.</span><span class="sxs-lookup"><span data-stu-id="6ed02-260">The total CPU time that the stored procedure consumed during profiling.</span></span> <span data-ttu-id="6ed02-261">Чем больше это значение, тем больше ресурсов ЦП использовала хранимая процедура.</span><span class="sxs-lookup"><span data-stu-id="6ed02-261">The higher this number, the more CPU the stored procedure used.</span></span>  
  
    -   <span data-ttu-id="6ed02-262">Общее время выполнения.</span><span class="sxs-lookup"><span data-stu-id="6ed02-262">Total Execution Time.</span></span> <span data-ttu-id="6ed02-263">Общее время выполнения, затраченное на хранимую процедуру во время профилирования.</span><span class="sxs-lookup"><span data-stu-id="6ed02-263">The total amount of execution time the stored procedure used during profiling.</span></span> <span data-ttu-id="6ed02-264">Чем больше разница между этим значением и временем ЦП, тем менее эффективно хранимая процедура использует ЦП.</span><span class="sxs-lookup"><span data-stu-id="6ed02-264">The higher the difference between this number and the CPU time is, the less efficiently the stored procedure is using the CPU.</span></span>  
  
    -   <span data-ttu-id="6ed02-265">Всего промахов кэша.</span><span class="sxs-lookup"><span data-stu-id="6ed02-265">Total Cache Missed.</span></span> <span data-ttu-id="6ed02-266">Число промахов кэша (операций чтения из физического хранилища), вызванное выполнением хранимой процедуры во время профилирования.</span><span class="sxs-lookup"><span data-stu-id="6ed02-266">The number of cache misses (reads from physical storage) that is caused by the stored procedure's executions during profiling.</span></span>  
  
    -   <span data-ttu-id="6ed02-267">Число выполнений.</span><span class="sxs-lookup"><span data-stu-id="6ed02-267">Execution Count.</span></span> <span data-ttu-id="6ed02-268">Количество выполнений этой хранимой процедуры во время профилирования.</span><span class="sxs-lookup"><span data-stu-id="6ed02-268">The number of times this stored procedure executed during profiling.</span></span>  
  
-   <span data-ttu-id="6ed02-269">Раздел ссылок на таблицы</span><span class="sxs-lookup"><span data-stu-id="6ed02-269">Table References Section</span></span>  
  
     <span data-ttu-id="6ed02-270">Этот раздел содержит таблицу, в которой показаны таблицы, на которые ссылается эта хранимая процедура.</span><span class="sxs-lookup"><span data-stu-id="6ed02-270">This section includes a table that shows the tables to which this stored procedure refers.</span></span> <span data-ttu-id="6ed02-271">Перед преобразованием хранимой процедуры в скомпилированную в собственном коде хранимую процедуру все эти таблицы должны быть преобразованы в оптимизированные для памяти таблицы, при этом они должны находиться на одном сервере и в одной базе данных.</span><span class="sxs-lookup"><span data-stu-id="6ed02-271">Before converting the stored procedure into a natively compiled stored procedure, all of these tables must be converted to memory-optimized tables, and they must stay on the same server and database.</span></span>  
  
 <span data-ttu-id="6ed02-272">Статистика выполнения для подробного отчета о хранимых процедурах собираются и объединяется из [sys. dm_exec_procedure_stats &#40;&#41;Transact-SQL ](/sql/relational-databases/system-dynamic-management-views/sys-dm-exec-procedure-stats-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="6ed02-272">Execution Statistics on the stored procedure details report is gathered and aggregated from [sys.dm_exec_procedure_stats &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-exec-procedure-stats-transact-sql).</span></span> <span data-ttu-id="6ed02-273">Ссылки получаются из [каталога sys. sql_expression_dependencies &#40;&#41;Transact-SQL ](/sql/relational-databases/system-catalog-views/sys-sql-expression-dependencies-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="6ed02-273">The references are obtained from [sys.sql_expression_dependencies &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-sql-expression-dependencies-transact-sql).</span></span>  
  
 <span data-ttu-id="6ed02-274">Чтобы просмотреть сведения о преобразовании хранимой процедуры в скомпилированную в собственном код хранимую процедуру, используйте [Помощник по компиляции в машинный](native-compilation-advisor.md)код.</span><span class="sxs-lookup"><span data-stu-id="6ed02-274">To see details about how to convert a stored procedure to a natively compiled stored procedure, please use the [Native Compilation Advisor](native-compilation-advisor.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="6ed02-275">См. также:</span><span class="sxs-lookup"><span data-stu-id="6ed02-275">See Also</span></span>  
 [<span data-ttu-id="6ed02-276">Миграция в In-Memory OLTP</span><span class="sxs-lookup"><span data-stu-id="6ed02-276">Migrating to In-Memory OLTP</span></span>](migrating-to-in-memory-oltp.md)  
  
  
