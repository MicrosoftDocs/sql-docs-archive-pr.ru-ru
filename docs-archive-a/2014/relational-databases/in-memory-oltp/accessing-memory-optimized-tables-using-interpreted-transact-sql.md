---
title: Доступ к таблицам, оптимизированным для памяти, с помощью интерпретируемых инструкций Transact-SQL | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: in-memory-oltp
ms.topic: conceptual
ms.assetid: 92a44d4d-0e53-4fb0-b890-de264c65c95a
author: rothja
ms.author: jroth
ms.openlocfilehash: af4b3ca7731e7ca13e697f43e76ac3cc3cacb4f1
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87667082"
---
# <a name="accessing-memory-optimized-tables-using-interpreted-transact-sql"></a>Доступ к таблицам, оптимизированным для памяти, с помощью интерпретируемых инструкций Transact-SQL
  Лишь за некоторыми исключениями, можно получить доступ к оптимизированным для памяти таблицам с помощью любого запроса [!INCLUDE[tsql](../../includes/tsql-md.md)] или операции DML (SELECT, INSERT, UPDATE или DELETE), нерегламентированных пакетов и модулей SQL, таких как хранимые процедуры, функции, возвращающие табличное значение, триггеры и представления.  
  
 Интерпретируемый [!INCLUDE[tsql](../../includes/tsql-md.md)] — это пакеты или хранимые процедуры [!INCLUDE[tsql](../../includes/tsql-md.md)] , отличные от скомпилированных в собственном коде хранимых процедур. Доступ интерпретированного [!INCLUDE[tsql](../../includes/tsql-md.md)] к оптимизированным для памяти таблицам называется доступом взаимодействия.  
  
 Доступ к оптимизированным для памяти таблицам можно также осуществлять с помощью скомпилированной в собственном коде хранимой процедуры. Скомпилированные в собственном коде хранимые процедуры рекомендуется использовать для важных с точки зрения производительности операций OLTP.  
  
 Интерпретируемый доступ [!INCLUDE[tsql](../../includes/tsql-md.md)] рекомендуется в следующих случаях.  
  
-   Нерегламентированные запросы и административные задачи.  
  
-   Запросы для отчетов, которые обычно используют конструкции, недоступные в скомпилированных в собственном коде хранимых процедурах (например, оконные функции).  
  
-   Для переноса критически важных для производительности частей приложения в оптимизированные для памяти таблицы с минимальными изменениями кода приложения или без изменений. Потенциально перенесенные таблицы могут обеспечить улучшение производительности. Дополнительного роста производительности можно добиться путем переноса хранимых процедур в скомпилированные в собственном коде хранимые процедуры.  
  
-   Когда инструкция [!INCLUDE[tsql](../../includes/tsql-md.md)] недоступна для скомпилированных в собственном коде хранимых процедур.  
  
 Следующие конструкции [!INCLUDE[tsql](../../includes/tsql-md.md)] не поддерживаются в хранимых процедурах интерпретированного [!INCLUDE[tsql](../../includes/tsql-md.md)], которые обращаются к данным из оптимизированных для памяти таблиц.  
  
|Область|Не поддерживается|  
|----------|-----------------|  
|Доступ к таблицам|TRUNCATE TABLE<br /><br /> MERGE (оптимизированная для памяти таблица в качестве назначения)<br /><br /> Динамический курсор и курсор ключевого набора (они автоматически понижаются в статический).<br /><br /> Доступ из модулей CLR с использованием контекстного соединения.<br /><br /> Ссылка на оптимизированную для памяти таблицу из индексированного представления|  
|Между базами данных|Межбазовые запросы<br /><br /> Межбазовые транзакции<br /><br /> Связанные серверы|  
  
## <a name="table-hints"></a>Табличные указания  
 Дополнительные сведения о табличных указаниях см. в разделе. [Табличные указания (Transact-SQL)](/sql/t-sql/queries/hints-transact-sql-table). Изоляция SNAPSHOT была добавлена для поддержки [!INCLUDE[hek_2](../../includes/hek-2-md.md)].  
  
 При доступе к оптимизированной для памяти таблице с использованием интерпретируемого кода [!INCLUDE[tsql](../../includes/tsql-md.md)]не поддерживаются следующие табличные указания.  
  
|||||  
|-|-|-|-|  
|HOLDLOCK|IGNORE_CONSTRAINTS|IGNORE_TRIGGERS|NOWAIT|  
|PAGLOCK|READCOMMITTED|READCOMMITTEDLOCK|READPAST|  
|READUNCOMMITTED|ROWLOCK|SPATIAL_WINDOW_MAX_CELLS = *целое число*|TABLOCK|  
|TABLOCKXX|UPDLOCK|XLOCK||  
  
 При обращении к таблице, оптимизированной для памяти, из явной или неявной транзакции с использованием интерпретируемых [!INCLUDE[tsql](../../includes/tsql-md.md)] необходимо включить табличное указание уровня изоляции, например SNAPSHOT, REPEATABLEREAD или SERIALIZABLE либо использовать параметр MEMORY_OPTIMIZED_ELEVATE_TO_SNAPSHOT. Дополнительные сведения см. в разделе [рекомендации по уровню изоляции транзакций с таблицами, оптимизированными для памяти](memory-optimized-tables.md) , и [Параметры ALTER DATABASE SET &#40;языке Transact-SQL&#41;](/sql/t-sql/statements/alter-database-transact-sql-set-options).  
  
> [!NOTE]  
>  Табличное указание уровня изоляции не требуется для обращения к таблицам, оптимизированным для памяти, с помощью запросов с автоматической фиксацией.  
  
## <a name="see-also"></a>См. также:  
 [Поддержка Transact-SQL для In-Memory OLTP](transact-sql-support-for-in-memory-oltp.md)   
 [Миграция в In-Memory OLTP](migrating-to-in-memory-oltp.md)  
  
  
