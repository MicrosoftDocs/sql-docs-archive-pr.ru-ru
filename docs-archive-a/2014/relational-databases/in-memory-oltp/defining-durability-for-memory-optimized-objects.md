---
title: Определение устойчивости для оптимизированных для памяти объектов | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: in-memory-oltp
ms.topic: conceptual
ms.assetid: 0fe85fbf-8e8d-4983-96fd-d04b3c7d6d65
author: CarlRabeler
ms.author: carlrab
ms.openlocfilehash: 325f50a74ea75270dd62fc3564200c59255dc6cb
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87657091"
---
# <a name="defining-durability-for-memory-optimized-objects"></a>Определение устойчивости для оптимизированных для памяти объектов
  OLTP в памяти гарантирует полную атомарность, согласованность, изолированность и устойчивость (ACID). Устойчивость в контексте [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] и оптимизированных для памяти таблиц предоставляет следующие гарантии.  
  
 Надежность транзакций  
 После фиксации полностью устойчивой транзакции, которая внесла изменения (DDL или DML) в оптимизированную для памяти таблицу, изменения в устойчивой таблице, оптимизированной для памяти, становятся постоянными.  
  
 При фиксации отложенной устойчивой транзакции в оптимизированной для памяти таблице в памяти транзакция становится устойчивой только после того, как журнал транзакций в памяти записывается на диск.  
  
 Устойчивость при перезапуске  
 При перезапуске [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] после сбоя или запланированного завершения работы для устойчивых, оптимизированных для памяти таблиц повторно создаются экземпляры, чтобы вернуть их в состояние перед завершением работы или сбоем.  
  
 Устойчивость при сбое носителя  
 Если поврежденный или недоступный диск содержит одну или несколько копий устойчивых, оптимизированных для памяти объектов, то компонент резервного копирования и восстановления [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] восстанавливает оптимизированные для памяти таблицы на новом носителе.  
  
 Существует два параметра устойчивости для оптимизированных для памяти таблиц:  
  
 SCHEMA_ONLY (недолговечная таблица)  
 Этот параметр обеспечивает устойчивость схемы таблицы, в том числе индексов. При перезапуске [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] недолговечная таблица создается заново, но запускается без данных. (В отличие от таблицы в базе данных tempdb, где и таблица, и ее данные теряются после перезапуска.) Типичный сценарий для создания недолговечной таблицы — хранение временных данных, например промежуточной таблицы для процесса ETL. Устойчивость SCHEMA_ONLY предотвращает ведение журнала транзакций и создание контрольной точки, что может существенно уменьшить объем операций ввода-вывода.  
  
 SCHEMA_AND_DATA (долговечная таблица)  
 Этот параметр обеспечивает устойчивость как схем, так и данных. Уровень устойчивости данных зависит от того, выбрана ли фиксация транзакции как полностью устойчивая или отложенно устойчивая. Полностью устойчивые транзакции дают гарантию устойчивости данных и схемы аналогично таблице на диске. Отложенная устойчивость улучшает производительность, но может привести к потере данных в случае сбоя или отработки отказа сервера. (Дополнительные сведения об отложенной устойчивости см. в разделе [Управление устойчивостью транзакций](../logs/control-transaction-durability.md).)  
  
 Схема оптимизированной для памяти таблицы сохраняется, как и для таблиц на диске, в первичной файловой группе базы данных.  
  
 Данные в устойчивой, оптимизированной для памяти таблице сохраняются на диск в парах из файла данных и разностного файла.  
  
 Индексы, определенные в оптимизированных для памяти таблицах, сохраняются только в метаданных, но не в хранилище. Структуры индексов создаются при загрузке оптимизированных для памяти таблиц.  
  
 Строки удаляются явным образом с помощью инструкции DELETE или неявно с помощью инструкции UPDATE. Операция UPDATE выполняется как удаление с последующей вставкой. При удалении строки в файл данных не вносятся никакие изменения, а новая строка, определяющая удаленную строку, добавляется в соответствующий разностный файл.  
  
 Во время операций восстановления подсистема OLTP в памяти считывает файлы данных и разностные файлы для загрузки в физическую память. Время загрузки определяется следующими факторами:  
  
-   объем данных для загрузки;  
  
-   пропускная способность операций последовательного ввода-вывода;  
  
-   степень параллелизма, определенная числом контейнеров файла и процессорных ядер.  
  
-   Количество записей журнала в активной части журнала, которые нужно перезаписать.  
  
## <a name="see-also"></a>См. также:  
 [Создание и управление хранилищем для оптимизированных для памяти объектов](creating-and-managing-storage-for-memory-optimized-objects.md)  
  
  
