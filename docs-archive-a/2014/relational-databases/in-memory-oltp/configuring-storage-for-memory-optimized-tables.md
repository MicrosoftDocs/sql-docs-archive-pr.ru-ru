---
title: Настройка хранилища для таблиц, оптимизированных для памяти | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: in-memory-oltp
ms.topic: conceptual
ms.assetid: 6e005de0-3a77-4b91-b497-14cc0f9f6605
author: CarlRabeler
ms.author: carlrab
ms.openlocfilehash: 4e6e5f5a931669e2fc07cb957e60fd9c77b9b735
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87749907"
---
# <a name="configuring-storage-for-memory-optimized-tables"></a><span data-ttu-id="af1ac-102">Настройка хранилища оптимизированных для памяти таблиц</span><span class="sxs-lookup"><span data-stu-id="af1ac-102">Configuring Storage for Memory-Optimized Tables</span></span>
  <span data-ttu-id="af1ac-103">Необходимо настроить емкость подсистемы хранения и количество операций ввода-вывода в секунду (IOPS).</span><span class="sxs-lookup"><span data-stu-id="af1ac-103">You need to configure storage capacity and input/output operations per second (IOPS).</span></span>  
  
## <a name="storage-capacity"></a><span data-ttu-id="af1ac-104">Емкость хранилища</span><span class="sxs-lookup"><span data-stu-id="af1ac-104">Storage Capacity</span></span>  
 <span data-ttu-id="af1ac-105">Чтобы оценить объем памяти, который потребуется для размещения надежных, оптимизированных для памяти таблиц баз данных, используйте сведения из раздела [Оценка требований к объему памяти для таблиц, оптимизированных для памяти](memory-optimized-tables.md) .</span><span class="sxs-lookup"><span data-stu-id="af1ac-105">Use the information in [Estimate Memory Requirements for Memory-Optimized Tables](memory-optimized-tables.md) to estimate the in-memory size of the database's durable memory-optimized tables.</span></span> <span data-ttu-id="af1ac-106">Поскольку индексы не сохраняются в оптимизированных для памяти таблицах, не учитывайте размер индексов.</span><span class="sxs-lookup"><span data-stu-id="af1ac-106">Because indexes are not persisted for memory-optimized tables, do not include the size of indexes.</span></span> <span data-ttu-id="af1ac-107">После определения размера необходимо выделить место на диске, которое будет в четыре раза больше размера надежных, оптимизированных для памяти таблиц.</span><span class="sxs-lookup"><span data-stu-id="af1ac-107">Once you determine the size, you need to provide disk space that is four times the size of durable, in-memory tables.</span></span>  
  
## <a name="storage-performance"></a><span data-ttu-id="af1ac-108">Производительность хранилища</span><span class="sxs-lookup"><span data-stu-id="af1ac-108">Storage Performance</span></span>  
 [!INCLUDE[hek_2](../../includes/hek-2-md.md)] <span data-ttu-id="af1ac-109">может значительно повысить количество операций, выполняемых в рамках рабочей нагрузки.</span><span class="sxs-lookup"><span data-stu-id="af1ac-109">can significantly increase your workload throughput.</span></span> <span data-ttu-id="af1ac-110">Поэтому важно убедиться в том, что подсистема ввода-вывода не станет узким местом.</span><span class="sxs-lookup"><span data-stu-id="af1ac-110">Therefore, it is important to ensure that IO is not a bottleneck.</span></span>  
  
-   <span data-ttu-id="af1ac-111">При миграции таблиц, находящихся на диске, в оптимизированные для памяти таблицы убедитесь в том, что журнал транзакций находится на носителе, который способен поддерживать возросшее число операций журнала транзакций.</span><span class="sxs-lookup"><span data-stu-id="af1ac-111">When migrating disk-based tables to memory-optimized tables, make sure that the transaction log is on a storage media that can support increased transaction log activity.</span></span> <span data-ttu-id="af1ac-112">Например, если носитель поддерживает обработку операций журнала транзакций на скорости в 100 МБ/сек, а оптимизированные для памяти таблицы работают в пять раз быстрее, носитель, на котором находится журнал транзакций, также должен позволять увеличить производительность в пять раз, чтобы операции журнала транзакций не стали узким местом в системе.</span><span class="sxs-lookup"><span data-stu-id="af1ac-112">For example, if your storage media supports transaction log operations at 100 MB/sec, and memory-optimized tables result in five times greater performance, the transaction log's storage media must be able to also support five times performance improvement, to prevent the transaction log activity from becoming a performance bottleneck.</span></span>  
  
-   <span data-ttu-id="af1ac-113">Оптимизированные для памяти таблицы сохраняются в файлы, которые находятся в одном или нескольких контейнерах.</span><span class="sxs-lookup"><span data-stu-id="af1ac-113">Memory-optimized tables are persisted in files distributed across one or more containers.</span></span> <span data-ttu-id="af1ac-114">Каждый контейнер обычно следует сопоставить с собственным шпинделем. Он служит для увеличения емкости хранилища и повышения производительности.</span><span class="sxs-lookup"><span data-stu-id="af1ac-114">Each container should typically be mapped to its own spindle and is used both for increased storage capacity and improved performance.</span></span> <span data-ttu-id="af1ac-115">Необходимо убедиться, что последовательные операции ввода-вывода в секунду с носителем хранилища могут поддерживать в три раза больше пропускной способности журнала транзакций.</span><span class="sxs-lookup"><span data-stu-id="af1ac-115">You need to ensure that sequential IOPS of the storage media can support a 3 times increase in transaction log throughput.</span></span>  
  
     <span data-ttu-id="af1ac-116">Например, если оптимизированные для памяти таблицы создают 500 МБ/с в журнале транзакций, хранилище для оптимизированных для памяти таблиц должно поддерживать 1,5 ГБ/с. Необходимость поддерживать в три раза больше пропускной способности журнала транзакций обусловлена наблюдением за тем, что пары файлов данных и разностные файлы сначала записываются с начальными данными, а затем должны быть прочитаны и перезаписаны в ходе операции слияния.</span><span class="sxs-lookup"><span data-stu-id="af1ac-116">For example, if memory-optimized tables generate 500MB/sec of activity in the transaction log, the storage for memory-optimized tables must support 1.5GB/sec. The need to support a 3 times increase in transaction log throughput comes from the observation that the data and delta file pairs are first written with the initial data and then need to be read/re-written as part of a merge operation.</span></span>  
  
     <span data-ttu-id="af1ac-117">Еще одним фактором при оценке пропускной способности для хранилища является время восстановления оптимизированных для памяти таблиц.</span><span class="sxs-lookup"><span data-stu-id="af1ac-117">Another factor in estimating throughput for storage is the recovery time for memory-optimized tables.</span></span> <span data-ttu-id="af1ac-118">Данные из надежных таблиц должны быть считаны в память до того, как база данных станет доступна приложениям.</span><span class="sxs-lookup"><span data-stu-id="af1ac-118">Data from durable tables must be read into memory before a database is made available to applications.</span></span> <span data-ttu-id="af1ac-119">Обычно загрузку данных в оптимизированные для памяти таблицы можно выполнять со скоростью IOPS.</span><span class="sxs-lookup"><span data-stu-id="af1ac-119">Commonly, loading data into memory-optimized tables can be done at the speed of IOPS.</span></span> <span data-ttu-id="af1ac-120">Поэтому, если общий объем хранилища для надежных, оптимизированных для памяти таблиц составляет 60 ГБ и необходимо обеспечить возможность загружать эти данные за одну минуту, для хранения должно быть задано значение IOPS в 1 ГБ/сек.</span><span class="sxs-lookup"><span data-stu-id="af1ac-120">So if the total storage for durable, memory-optimized tables is 60 GB and you want to be able to load this data in 1 minute, the IOPS for the storage must be set at 1 GB/sec.</span></span>  
  
-   <span data-ttu-id="af1ac-121">При наличии четного числа шпинделей необходимо создать в два раза больше контейнеров и сопоставить с каждым шпинделем пару контейнеров.</span><span class="sxs-lookup"><span data-stu-id="af1ac-121">If you have even number of spindles, you should create two times the number of containers, each pair mapped to the same spindle.</span></span> <span data-ttu-id="af1ac-122">Это необходимо для распределения IOPS в хранилище.</span><span class="sxs-lookup"><span data-stu-id="af1ac-122">This is needed to spread the IOPS and the storage.</span></span> <span data-ttu-id="af1ac-123">Дополнительные сведения см. [в разделе оптимизированная для памяти файловая группа](the-memory-optimized-filegroup.md).</span><span class="sxs-lookup"><span data-stu-id="af1ac-123">For more information, see [The Memory Optimized Filegroup](the-memory-optimized-filegroup.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="af1ac-124">См. также:</span><span class="sxs-lookup"><span data-stu-id="af1ac-124">See Also</span></span>  
 [<span data-ttu-id="af1ac-125">Создание и управление хранилищем для оптимизированных для памяти объектов</span><span class="sxs-lookup"><span data-stu-id="af1ac-125">Creating and Managing Storage for Memory-Optimized Objects</span></span>](creating-and-managing-storage-for-memory-optimized-objects.md)  
  
  
