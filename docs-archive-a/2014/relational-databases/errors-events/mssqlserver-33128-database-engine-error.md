---
title: MSSQLSERVER_33128 | Документация Майкрософт
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: supportability
ms.topic: conceptual
helpviewer_keywords:
- 33128 (Database Engine error)
ms.assetid: 12c1096f-d120-439b-85f3-f794859503c9
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 158cc609a18cf3fe7b76708e351b78263cd80a9e
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87658771"
---
# <a name="mssqlserver_33128"></a><span data-ttu-id="27ba3-102">MSSQLSERVER_33128</span><span class="sxs-lookup"><span data-stu-id="27ba3-102">MSSQLSERVER_33128</span></span>
    
## <a name="details"></a><span data-ttu-id="27ba3-103">Сведения</span><span class="sxs-lookup"><span data-stu-id="27ba3-103">Details</span></span>  
  
|||  
|-|-|  
|<span data-ttu-id="27ba3-104">Название продукта</span><span class="sxs-lookup"><span data-stu-id="27ba3-104">Product Name</span></span>|<span data-ttu-id="27ba3-105">SQL Server</span><span class="sxs-lookup"><span data-stu-id="27ba3-105">SQL Server</span></span>|  
|<span data-ttu-id="27ba3-106">Идентификатор события</span><span class="sxs-lookup"><span data-stu-id="27ba3-106">Event ID</span></span>|<span data-ttu-id="27ba3-107">33128</span><span class="sxs-lookup"><span data-stu-id="27ba3-107">33128</span></span>|  
|<span data-ttu-id="27ba3-108">Источник события</span><span class="sxs-lookup"><span data-stu-id="27ba3-108">Event Source</span></span>|<span data-ttu-id="27ba3-109">MSSQLSERVER</span><span class="sxs-lookup"><span data-stu-id="27ba3-109">MSSQLSERVER</span></span>|  
|<span data-ttu-id="27ba3-110">Компонент</span><span class="sxs-lookup"><span data-stu-id="27ba3-110">Component</span></span>|<span data-ttu-id="27ba3-111">SQLEngine</span><span class="sxs-lookup"><span data-stu-id="27ba3-111">SQLEngine</span></span>|  
|<span data-ttu-id="27ba3-112">Символическое имя</span><span class="sxs-lookup"><span data-stu-id="27ba3-112">Symbolic Name</span></span>|<span data-ttu-id="27ba3-113">SEC_DEPRECATED_ALGO</span><span class="sxs-lookup"><span data-stu-id="27ba3-113">SEC_DEPRECATED_ALGO</span></span>|  
|<span data-ttu-id="27ba3-114">Текст сообщения</span><span class="sxs-lookup"><span data-stu-id="27ba3-114">Message Text</span></span>|<span data-ttu-id="27ba3-115">Сбой шифрования.</span><span class="sxs-lookup"><span data-stu-id="27ba3-115">Encryption failed.</span></span> <span data-ttu-id="27ba3-116">Ключ использует устаревший алгоритм "%.\*ls", который больше не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="27ba3-116">Key uses deprecated algorithm '%.\*ls' which is no longer supported.</span></span>|  
  
## <a name="explanation"></a><span data-ttu-id="27ba3-117">Объяснение</span><span class="sxs-lookup"><span data-stu-id="27ba3-117">Explanation</span></span>  
 <span data-ttu-id="27ba3-118">Это сообщение появляется при ссылке на алгоритм шифрования RC4 (или RC4_128).</span><span class="sxs-lookup"><span data-stu-id="27ba3-118">This message occurs when referencing the RC4 (or RC4_128) encryption algorithm.</span></span> <span data-ttu-id="27ba3-119">Алгоритмы RC4 и RC4_128 являются слабыми и устаревшими.</span><span class="sxs-lookup"><span data-stu-id="27ba3-119">RC4 and RC4_128 are weak algorithms and are deprecated.</span></span> <span data-ttu-id="27ba3-120">Используйте вместо этого более сложные алгоритмы, например AES.</span><span class="sxs-lookup"><span data-stu-id="27ba3-120">Use a stronger algorithm such as one of the AES algorithms instead.</span></span>  
  
 <span data-ttu-id="27ba3-121">Если для уровня совместимости базы данных установлено значение 90 или 100, операция проходит успешно, появляется событие устаревания и сообщение появляется только в кольцевом буфере.</span><span class="sxs-lookup"><span data-stu-id="27ba3-121">When the database compatibility level is 90 or 100, the operation succeeds, the deprecation event is raised, and the message appears only in the ring buffer.</span></span>  
  
 <span data-ttu-id="27ba3-122">Если для уровня совместимости базы данных установлено значение 110 или больше, то операции расшифровки проходят успешно, вызывается событие устаревания и сообщение появляется только в кольцевом буфере.</span><span class="sxs-lookup"><span data-stu-id="27ba3-122">When the database compatibility level is 110 or higher, decryption operations succeed, the deprecation event is raised, and the message appears only in the ring buffer.</span></span> <span data-ttu-id="27ba3-123">Операции шифрования приведут к сбою, будет вызвано событие устаревания, сообщение показано пользователю и сообщение появляется в кольцевом буфере.</span><span class="sxs-lookup"><span data-stu-id="27ba3-123">Encryption operations will fail, the deprecation event is raised, and the message is displayed for the user, and the message appears in the ring buffer.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="27ba3-124">Кольцевой буфер является внутренним компонентом, который не полностью документирован и не предназначен для использования клиентами.</span><span class="sxs-lookup"><span data-stu-id="27ba3-124">The ring buffer is an internal component which is not fully documented and is not intended to be used by customers.</span></span> <span data-ttu-id="27ba3-125">Сообщения из кольцевого буфера полезны при связи со службой поддержки клиентов [!INCLUDE[msCoName](../../includes/msconame-md.md)].</span><span class="sxs-lookup"><span data-stu-id="27ba3-125">Messages from the ring buffer are useful when contacting [!INCLUDE[msCoName](../../includes/msconame-md.md)] Customer Support.</span></span> <span data-ttu-id="27ba3-126">Чтобы просмотреть кольцевой буфер, выполните запрос в динамическом административном представлении sys.dm_os_ring_buffers.</span><span class="sxs-lookup"><span data-stu-id="27ba3-126">To view the ring buffer, query the sys.dm_os_ring_buffers dynamic management view.</span></span>  
  
|<span data-ttu-id="27ba3-127">Состояние</span><span class="sxs-lookup"><span data-stu-id="27ba3-127">State</span></span>|<span data-ttu-id="27ba3-128">Описание</span><span class="sxs-lookup"><span data-stu-id="27ba3-128">Description</span></span>|  
|-----------|-----------------|  
|<span data-ttu-id="27ba3-129">1</span><span class="sxs-lookup"><span data-stu-id="27ba3-129">1</span></span>|<span data-ttu-id="27ba3-130">Ключ RC4 используется во встроенной функции encryptbykey().</span><span class="sxs-lookup"><span data-stu-id="27ba3-130">A RC4 key is used in the built-in encryptbykey() function.</span></span> <span data-ttu-id="27ba3-131">Встроенная функция возвращает значение NULL.</span><span class="sxs-lookup"><span data-stu-id="27ba3-131">Built-in function returns NULL.</span></span> <span data-ttu-id="27ba3-132">Это сообщение встречается только в кольцевом буфере.</span><span class="sxs-lookup"><span data-stu-id="27ba3-132">This message only appears in the ring buffer.</span></span>|  
|<span data-ttu-id="27ba3-133">2</span><span class="sxs-lookup"><span data-stu-id="27ba3-133">2</span></span>|<span data-ttu-id="27ba3-134">Ключ RC4 используется во встроенной функции decryptbykey().</span><span class="sxs-lookup"><span data-stu-id="27ba3-134">A RC4 key is used in by the built-in decryptbykey() function.</span></span> <span data-ttu-id="27ba3-135">Это сообщение встречается только в кольцевом буфере.</span><span class="sxs-lookup"><span data-stu-id="27ba3-135">This message only appears in the ring buffer.</span></span>|  
|<span data-ttu-id="27ba3-136">3</span><span class="sxs-lookup"><span data-stu-id="27ba3-136">3</span></span>|<span data-ttu-id="27ba3-137">Устаревший ключ RC4 шифруется симметричным ключом.</span><span class="sxs-lookup"><span data-stu-id="27ba3-137">A deprecated RC4 key is being encrypted by a symmetric key.</span></span> <span data-ttu-id="27ba3-138">Видимый пользователю и в кольцевом буфере.</span><span class="sxs-lookup"><span data-stu-id="27ba3-138">Seen by users and in the ring buffer.</span></span> <span data-ttu-id="27ba3-139">Устаревшие симметричные ключи RC4 не могут быть изменены на уровне совместимости 110.</span><span class="sxs-lookup"><span data-stu-id="27ba3-139">Deprecated RC4 symmetric keys cannot be altered in compatibility level 110.</span></span> <span data-ttu-id="27ba3-140">Попробуйте использовать ключи, отличные от RC4, для криптографических операций.</span><span class="sxs-lookup"><span data-stu-id="27ba3-140">Try to use non-RC4 keys for crypto operations.</span></span> <span data-ttu-id="27ba3-141">Если необходимо, установите уровень обратной совместимости 90 или 100.</span><span class="sxs-lookup"><span data-stu-id="27ba3-141">If necessary, set backward compatibility level to a 90 or 100.</span></span>|  
|<span data-ttu-id="27ba3-142">4</span><span class="sxs-lookup"><span data-stu-id="27ba3-142">4</span></span>|<span data-ttu-id="27ba3-143">Ключ, отличные от RC4, шифруется устаревшим симметричным ключом RC4.</span><span class="sxs-lookup"><span data-stu-id="27ba3-143">A non-RC4 key is being encrypted by a deprecated RC4 symmetric key.</span></span> <span data-ttu-id="27ba3-144">Видимый пользователю и в кольцевом буфере.</span><span class="sxs-lookup"><span data-stu-id="27ba3-144">Seen by users and in the ring buffer.</span></span> <span data-ttu-id="27ba3-145">Измените приложение на использование симметричных ключей, отличных от RC4, или установите уровень обратной совместимости на 90 или 100.</span><span class="sxs-lookup"><span data-stu-id="27ba3-145">Modify the application to use non-RC4 symmetric keys or set backward compatibility level to 90 or 100.</span></span>|  
|<span data-ttu-id="27ba3-146">5</span><span class="sxs-lookup"><span data-stu-id="27ba3-146">5</span></span>|<span data-ttu-id="27ba3-147">Устаревший ключ RC4 расшифровывается симметричным ключом.</span><span class="sxs-lookup"><span data-stu-id="27ba3-147">A deprecated RC4 key is being decrypted by a symmetric key.</span></span> <span data-ttu-id="27ba3-148">Это сообщение встречается только в кольцевом буфере.</span><span class="sxs-lookup"><span data-stu-id="27ba3-148">This message only appears in the ring buffer.</span></span>|  
|<span data-ttu-id="27ba3-149">6</span><span class="sxs-lookup"><span data-stu-id="27ba3-149">6</span></span>|<span data-ttu-id="27ba3-150">Ключ, отличный от RC4, расшифровывается симметричным ключом RC4.</span><span class="sxs-lookup"><span data-stu-id="27ba3-150">A non-RC4 key is being decrypted by an RC4 symmetric key.</span></span> <span data-ttu-id="27ba3-151">Это сообщение встречается только в кольцевом буфере.</span><span class="sxs-lookup"><span data-stu-id="27ba3-151">This message only appears in the ring buffer.</span></span>|  
|<span data-ttu-id="27ba3-152">7</span><span class="sxs-lookup"><span data-stu-id="27ba3-152">7</span></span>|<span data-ttu-id="27ba3-153">Симметричный ключ RC4 шифруется сертификатом.</span><span class="sxs-lookup"><span data-stu-id="27ba3-153">A RC4 symmetric key is being encrypted by the certificate.</span></span> <span data-ttu-id="27ba3-154">Видимый пользователю и в кольцевом буфере.</span><span class="sxs-lookup"><span data-stu-id="27ba3-154">Seen by users and in the ring buffer.</span></span>|  
|<span data-ttu-id="27ba3-155">8</span><span class="sxs-lookup"><span data-stu-id="27ba3-155">8</span></span>|<span data-ttu-id="27ba3-156">Симметричный ключ RC4 расшифровывается сертификатом.</span><span class="sxs-lookup"><span data-stu-id="27ba3-156">A RC4 symmetric key is being decrypted by the certificate.</span></span> <span data-ttu-id="27ba3-157">Это сообщение встречается только в кольцевом буфере.</span><span class="sxs-lookup"><span data-stu-id="27ba3-157">This message only appears in the ring buffer.</span></span>|  
|<span data-ttu-id="27ba3-158">9</span><span class="sxs-lookup"><span data-stu-id="27ba3-158">9</span></span>|<span data-ttu-id="27ba3-159">Симметричный ключ RC4 шифруется расширенным управлением ключами.</span><span class="sxs-lookup"><span data-stu-id="27ba3-159">A RC4 symmetric key is being encrypted by the EKM key.</span></span>|  
|<span data-ttu-id="27ba3-160">10</span><span class="sxs-lookup"><span data-stu-id="27ba3-160">10</span></span>|<span data-ttu-id="27ba3-161">Симметричный ключ RC4 расшифровывается расширенным управлением ключами.</span><span class="sxs-lookup"><span data-stu-id="27ba3-161">A RC4 symmetric key is being decrypted by the EKM key.</span></span> <span data-ttu-id="27ba3-162">Это сообщение встречается только в кольцевом буфере.</span><span class="sxs-lookup"><span data-stu-id="27ba3-162">This message only appears in the ring buffer.</span></span>|  
  
## <a name="user-action"></a><span data-ttu-id="27ba3-163">Действие пользователя</span><span class="sxs-lookup"><span data-stu-id="27ba3-163">User Action</span></span>  
 <span data-ttu-id="27ba3-164">Используйте вместо этого более сложные алгоритмы, например AES.</span><span class="sxs-lookup"><span data-stu-id="27ba3-164">Use a stronger algorithm such as one of the AES algorithms instead.</span></span> <span data-ttu-id="27ba3-165">(Рекомендовано)</span><span class="sxs-lookup"><span data-stu-id="27ba3-165">(Recommended)</span></span>  
  
 <span data-ttu-id="27ba3-166">Используйте ALTER DATABASE SET COMPATIBILITY_LEVEL, чтобы установить уровень совместимости базы данных 100.</span><span class="sxs-lookup"><span data-stu-id="27ba3-166">Use ALTER DATABASE SET COMPATIBILITY_LEVEL to set the database to compatibility level 100.</span></span> <span data-ttu-id="27ba3-167">(Не рекомендуется.)</span><span class="sxs-lookup"><span data-stu-id="27ba3-167">(Not recommended.)</span></span>  
  
  
