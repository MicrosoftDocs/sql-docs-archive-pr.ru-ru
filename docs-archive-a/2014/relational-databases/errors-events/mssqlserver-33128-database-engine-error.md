---
title: MSSQLSERVER_33128 | Документация Майкрософт
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: supportability
ms.topic: conceptual
helpviewer_keywords:
- 33128 (Database Engine error)
ms.assetid: 12c1096f-d120-439b-85f3-f794859503c9
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 158cc609a18cf3fe7b76708e351b78263cd80a9e
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87658771"
---
# <a name="mssqlserver_33128"></a>MSSQLSERVER_33128
    
## <a name="details"></a>Сведения  
  
|||  
|-|-|  
|Название продукта|SQL Server|  
|Идентификатор события|33128|  
|Источник события|MSSQLSERVER|  
|Компонент|SQLEngine|  
|Символическое имя|SEC_DEPRECATED_ALGO|  
|Текст сообщения|Сбой шифрования. Ключ использует устаревший алгоритм "%.*ls", который больше не поддерживается.|  
  
## <a name="explanation"></a>Объяснение  
 Это сообщение появляется при ссылке на алгоритм шифрования RC4 (или RC4_128). Алгоритмы RC4 и RC4_128 являются слабыми и устаревшими. Используйте вместо этого более сложные алгоритмы, например AES.  
  
 Если для уровня совместимости базы данных установлено значение 90 или 100, операция проходит успешно, появляется событие устаревания и сообщение появляется только в кольцевом буфере.  
  
 Если для уровня совместимости базы данных установлено значение 110 или больше, то операции расшифровки проходят успешно, вызывается событие устаревания и сообщение появляется только в кольцевом буфере. Операции шифрования приведут к сбою, будет вызвано событие устаревания, сообщение показано пользователю и сообщение появляется в кольцевом буфере.  
  
> [!NOTE]  
>  Кольцевой буфер является внутренним компонентом, который не полностью документирован и не предназначен для использования клиентами. Сообщения из кольцевого буфера полезны при связи со службой поддержки клиентов [!INCLUDE[msCoName](../../includes/msconame-md.md)]. Чтобы просмотреть кольцевой буфер, выполните запрос в динамическом административном представлении sys.dm_os_ring_buffers.  
  
|Состояние|Описание|  
|-----------|-----------------|  
|1|Ключ RC4 используется во встроенной функции encryptbykey(). Встроенная функция возвращает значение NULL. Это сообщение встречается только в кольцевом буфере.|  
|2|Ключ RC4 используется во встроенной функции decryptbykey(). Это сообщение встречается только в кольцевом буфере.|  
|3|Устаревший ключ RC4 шифруется симметричным ключом. Видимый пользователю и в кольцевом буфере. Устаревшие симметричные ключи RC4 не могут быть изменены на уровне совместимости 110. Попробуйте использовать ключи, отличные от RC4, для криптографических операций. Если необходимо, установите уровень обратной совместимости 90 или 100.|  
|4|Ключ, отличные от RC4, шифруется устаревшим симметричным ключом RC4. Видимый пользователю и в кольцевом буфере. Измените приложение на использование симметричных ключей, отличных от RC4, или установите уровень обратной совместимости на 90 или 100.|  
|5|Устаревший ключ RC4 расшифровывается симметричным ключом. Это сообщение встречается только в кольцевом буфере.|  
|6|Ключ, отличный от RC4, расшифровывается симметричным ключом RC4. Это сообщение встречается только в кольцевом буфере.|  
|7|Симметричный ключ RC4 шифруется сертификатом. Видимый пользователю и в кольцевом буфере.|  
|8|Симметричный ключ RC4 расшифровывается сертификатом. Это сообщение встречается только в кольцевом буфере.|  
|9|Симметричный ключ RC4 шифруется расширенным управлением ключами.|  
|10|Симметричный ключ RC4 расшифровывается расширенным управлением ключами. Это сообщение встречается только в кольцевом буфере.|  
  
## <a name="user-action"></a>Действие пользователя  
 Используйте вместо этого более сложные алгоритмы, например AES. (Рекомендовано)  
  
 Используйте ALTER DATABASE SET COMPATIBILITY_LEVEL, чтобы установить уровень совместимости базы данных 100. (Не рекомендуется.)  
  
  
