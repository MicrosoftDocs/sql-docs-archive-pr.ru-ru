---
title: MSSQLSERVER_18456 | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: supportability
ms.topic: conceptual
helpviewer_keywords:
- 18456 (Database Engine error)
ms.assetid: c417631d-be1f-42e0-8844-9f92c77e11f7
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: f5addb6bfb9d056d9f1796749ae629d4150102a2
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87731670"
---
# <a name="mssqlserver_18456"></a>MSSQLSERVER_18456
    
## <a name="details"></a>Сведения  
  
|||  
|-|-|  
|Название продукта|SQL Server|  
|Идентификатор события|18456|  
|Источник события|MSSQLSERVER|  
|Компонент|SQLEngine|  
|Символическое имя|LOGON_FAILED|  
|Текст сообщения|Ошибка входа пользователя '%.*ls'.%.\*ls|  
  
## <a name="explanation"></a>Объяснение  
 Если попытка соединения отклоняется в результате сбоя проверки подлинности из-за неправильного имени или пароля, клиенту выдается сообщение, подобное следующему:  "Ошибка входа пользователя <имя_пользователя>. (Microsoft SQL Server, ошибка: 18456)".  
  
 Дополнительные сведения, возвращаемые клиенту, включают в себя следующее:  
  
 "Ошибка входа пользователя <имя_пользователя>. (.Net SqlClient Data Provider)"  
  
 -----------------------------\-  
  
 "Имя сервера: <имя_компьютера>"  
  
 "Номер ошибки: 18456"  
  
 "Серьезность: 14"  
  
 "Состояние: 1"  
  
 "Номер строки: 65536"  
  
 Может также возвращаться следующее сообщение:  
  
 "Сообщение 18456, уровень 14, состояние 1, сервер <имя_компьютера>, строка 1"  
  
 "Ошибка входа пользователя <имя_пользователя>".  
  
## <a name="additional-error-information"></a>Дополнительные сведения об ошибке  
 В целях повышения безопасности сообщение об ошибке, возвращаемое клиенту, намеренно скрывает природу ошибки проверки подлинности. Однако в журнале ошибок [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] для соответствующей ошибки указано состояние, которое можно сопоставить с условиями сбоя проверки подлинности. Сравните состояние ошибки со следующим списком, чтобы определить причину ошибки входа.  
  
|Состояние|Описание|  
|-----------|-----------------|  
|1|Сведения об ошибке недоступны. Это состояние обычно означает отсутствие разрешений на получение сведений об ошибке. За дополнительными сведениями обратитесь к администратору [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].|  
|2|Недопустимый идентификатор пользователя.|  
|5|Недопустимый идентификатор пользователя.|  
|6|Предпринята попытка использовать имя входа Windows при использовании проверки подлинности SQL Server.|  
|7|Имя входа отключено, и пароль неверный.|  
|8|Пароль неверный.|  
|9|Недопустимый пароль.|  
|11|Допустимое имя входа, но доступ к серверу не удался. Одна из возможных причин этой ошибки: пользователь Windows имеет доступ к [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] в качестве члена группы локальных администраторов, но Windows не предоставляет учетные данные администратора. Чтобы установить соединение, запустите программу подключения **от имени администратора**, а затем добавьте имя пользователя Windows в [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] в качестве определенного имени входа.||  
|12|Допустимое имя входа, но доступ к серверу не удался.|  
|18|Пароль должен быть изменен.|  
  
 Есть другие коды ошибок, которые означают непредвиденные внутренние ошибки обработки.  
  
 **Еще одна, менее распространенная, возможная причина**  
  
 Причина ошибки **Попытка входа с помощью проверки подлинности SQL завершилась ошибкой. Конфигурация сервера поддерживает только проверку подлинности Windows.** Это сообщение возвращается в следующих ситуациях.  
  
-   Когда на сервере настроена проверка подлинности в смешанном режиме, подключение ODBC использует протокол TCP, а подключение не указывает явно, что оно должно быть доверительным.  
  
-   Когда на сервере настроена проверка подлинности в смешанном режиме, подключение ODBC использует именованные каналы, учетные данные, которые клиент использовал для открытия именованного канала, используются для автоматического олицетворения пользователя, а подключение не указывает явно, что оно должно быть доверительным.  
  
 Чтобы решить эту проблему, включите в строку подключения параметр `TRUSTED_CONNECTION = TRUE`.  
  
## <a name="examples"></a>Примеры  
 В этом примере состояние ошибки проверки подлинности равно 8. Это означает, что пароль неверный.  
  
|Дата|Источник|Сообщение|  
|----------|------------|-------------|  
|2007-12-05 20:12:56.34|Вход в систему|Ошибка: 18456, серьезность: 14, состояние: 8.|  
|2007-12-05 20:12:56.34|Вход в систему|"Ошибка входа пользователя <имя_пользователя>". [КЛИЕНТ: \<ip address>]|  
  
> [!NOTE]  
>  Если [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] устанавливается в режиме аутентификации Windows, а затем переключается на аутентификацию [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] и Windows, то имя входа **sa** будет по умолчанию отключено. Это приводит к ошибке с состоянием 7: "Ошибка входа для пользователя sa". Чтобы включить имя для входа **sa**, выполните инструкции из статьи об [изменении режима проверки подлинности сервера](../../database-engine/configure-windows/change-server-authentication-mode.md).  
  
## <a name="user-action"></a>Действие пользователя  
 При попытке подключения с использованием проверки подлинности [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] убедитесь, что [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] настроен в режиме смешанной проверки подлинности.  
  
 При попытке подключения с использованием проверки подлинности [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] убедитесь, что имя входа [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] существует и введено верно.  
  
 При попытке подключения с использованием проверки подлинности Windows убедитесь, что выполнен правильный вход в нужный домен.  
  
 Если ошибка указывает состояние 1, обратитесь к администратору [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].  
  
 Для подключения с учетными данными администратора запустите приложение **от имени администратора**. После подключения добавьте пользователя Windows в качестве отдельного имени входа.  
  
 Если компонент [!INCLUDE[ssDE](../../includes/ssde-md.md)] поддерживает автономные базы данных, подтвердите, что имя входа не удалено после преобразования в пользователя автономной базы данных.  
  
 Службы, запущенные от имени **NT AUTHORITY\NETWORK SERVICE**, должны использовать для локального соединения с экземпляром [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] аутентификацию по полному доменному имени компьютера. Дополнительные сведения см. в разделе [Как использовать учетную запись сетевой службы для доступа к ресурсам в ASP.NET](https://msdn.microsoft.com/library/ff647402.aspx)  
  
  
