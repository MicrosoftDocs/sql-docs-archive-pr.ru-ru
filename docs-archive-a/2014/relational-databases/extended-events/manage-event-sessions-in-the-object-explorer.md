---
title: Управление сеансами событий в обозревателе объектов | Документация Майкрософт
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: xevents
ms.topic: conceptual
ms.assetid: 16849e38-d3fb-414d-8dcb-797b5ffce6ee
author: rothja
ms.author: jroth
ms.openlocfilehash: 1aa33a97137f63348898e6b1fcb7b19b2d218573
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87655177"
---
# <a name="manage-event-sessions-in-the-object-explorer"></a>Управление сеансами событий в обозревателе объектов
  В этом разделе описываются действия, которые можно выполнять в **обозревателе объектов** и которые отражаются на расширенных событиях.  
  
-   Создание сеанса расширенных событий  
  
-   Запуск или остановка сеанса расширенных событий  
  
-   Экспорт сеанса расширенных событий  
  
-   Импорт шаблона сеанса расширенных событий  
  
-   Изменение сеанса расширенных событий  
  
-   Удаление сеанса расширенных событий  
  
## <a name="create-an-extended-events-session"></a>Создание сеанса расширенных событий  
 Дополнительные сведения о создании сеанса расширенных событий см. в разделе [Create an Extended Events Session](../../database-engine/create-an-extended-events-session.md).  
  
## <a name="starting-or-stopping-an-extended-events-session"></a>Запуск или остановка сеанса расширенных событий  
 Сеанс расширенных событий можно запустить или отключить в **редакторе запросов** с помощью `ALTER EVENT SESSION` инструкции или с помощью узла **Расширенные события** **обозревателя объектов**.  
  
 При остановке сеанса событий сеанс больше не отображается как активный в динамическом административном представлении (DMV) sys.dm_xe_sessions. Однако определение сеанса не меняется, поэтому сеанс можно перезапустить. Чтобы полностью удалить определение сеанса, необходимо удалить сеанс.  
  
 Для запуска или остановки сеанса расширенных событий требуется разрешение ALTER ANY EVENT SESSION.  
  
 После остановки сеанса, использующего целевой объект в памяти (например, кольцевой буфер, сегментацию, пары событий или синхронный счетчик событий), все данные, которые хранятся в буфере сеанса (столбец target_data динамического административного представления sys.dm_xe_session_targets), будут потеряны. Чтобы получить доступ к данным события после остановки сеанса, необходимо сохранить данные перед остановкой сеанса или настроить сеанс на использование файла цели.  
  
### <a name="start-or-stop-an-extended-events-session-using-query-editor"></a>Запуск или остановка сеанса расширенных событий с помощью редактора запросов  
 Для запуска сеанса выполните следующие инструкции, заменив *имя_сеанса* именем сеанса расширенных событий.  
  
```  
ALTER EVENT SESSION [session_name]  
ON SERVER  
STATE = START  
```  
  
 Для остановки сеанса выполните следующие инструкции, заменив *имя_сеанса* именем сеанса расширенных событий.  
  
```  
ALTER EVENT SESSION [session_name]  
ON SERVER  
STATE = STOP  
```  
  
### <a name="start-or-stop-an-extended-events-session-in-object-explorer"></a>Запуск или остановка сеанса расширенных событий в обозревателе объектов  
 Чтобы запустить или остановить сеанс расширенных событий в **обозревателе объектов**, разверните узлы **Управление**, **Расширенные события**, **Сеансы** , затем щелкните правой кнопкой сеанс и выберите пункт **Начать сеанс** или **Остановить сеанс**.  
  
## <a name="export-an-extended-events-session-template"></a>Экспорт шаблона сеанса расширенных событий  
 Можно экспортировать сеанс расширенных событий с помощью **обозревателя объектов**, а затем сохранить его в XML-файле шаблона. Например, можно экспортировать сеанс, а затем применить шаблон к новому сеансу событий с помощью **Мастера новых сеансов** или мастера **Создать сеанс** .  
  
 При экспорте сеанса убедитесь, что файл шаблона сохраняется в расположении с файловой системой NTFS, для которого есть возможность ограничить доступ, предоставляя его только пользователям, имеющим право просмотра конфиденциальных данных.  
  
 Экспорт сеанса расширенных событий с помощью **обозревателя объектов**.  
  
1.  Разверните узлы **Управление**, **Расширенные события**и **Сеансы**  
  
2.  Щелкните правой кнопкой мыши сеанс, который необходимо экспортировать, а затем выберите **Экспортировать сеанс**.  
  
3.  В диалоговом окне **Сохранить как** выберите расположение для сохранения файла, введите имя файла в поле **Имя файла** и нажмите кнопку **Сохранить**.  
  
     Если файл сохраняется в место сохранения шаблона [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] по умолчанию, шаблон отобразится в раскрывающемся списке стандартных шаблонов при использовании **Мастера новых сеансов** или диалогового окна **Создание сеанса** .  
  
## <a name="import-an-extended-events-session-template"></a>Импорт шаблона сеанса расширенных событий  
 С помощью **обозревателя объектов**вы можете импортировать шаблон для сеанса расширенных событий. Например, это может потребоваться при создании сеанса из шаблона, который был экспортирован из другого экземпляра службы [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].  
  
 Чтобы импортировать сеанс расширенных событий, необходимы разрешения `ALTER ANY EVENT SESSION`.  
  
 Прежде чем импортировать файл шаблона, убедитесь, что файл получен из надежного источника. Файл шаблона должен быть сохранен в расположение с файловой системой NTFS, где есть возможность ограничить доступ, предоставляя его только пользователям, имеющим право просмотра конфиденциальных данных.  
  
 Импорт сеанса расширенных событий  
  
1.  В **обозревателе объектов**разверните узел **Управление**, а затем узел **Расширенные события** .  
  
2.  Щелкните правой кнопкой мыши элемент **Сеансы** и выберите **Создать сеанс**.  
  
3.  Укажите имя для этого сеанса.  
  
4.  Разверните раскрывающееся поле **Шаблон** .  
  
5.  Нажмите **\<File From ...>Открыть** и найдите сеанс (XML-файл), который требуется импортировать.  
  
 Сеанс появится в узле **Сеансы** . По умолчанию этот сеанс не запущен.  
  
## <a name="edit-an-extended-events-session"></a>Изменение сеанса расширенных событий  
 Сеанс расширенных событий вы можете изменить в обозревателе объектов.  
  
 Изменение сеанса расширенных событий  
  
1.  В **обозревателе объектов**разверните узлы **Управление**, **Расширенные события**и **Сеансы** .  
  
2.  Щелкните правой кнопкой мыши сеанс и выберите пункт **Свойства**.  
  
3.  В разделе **Выбор страницы** выберите страницу или страницы для изменения.  
  
4.  После завершения пересмотра сеанса событий нажмите кнопку **ОК**.  
  
## <a name="script-an-event-session-definition-using-tsql"></a>Включение определения сеанса событий в скрипт с помощью [!INCLUDE[tsql](../../includes/tsql-md.md)]  
 Как в «Мастере новых сеансов», так и в диалоговом окне «Создание сеанса» имеется параметр «Скрипт», который позволяет создать код [!INCLUDE[tsql](../../includes/tsql-md.md)] , выполняющий определение сеанса расширенных событий.  
  
 Доступ к [!INCLUDE[tsql](../../includes/tsql-md.md)] для существующего сеанса расширенных событий выполняется щелчком правой кнопки мыши имени сеанса с последующим выбором команд **Создать скрипт сеанса как**и **Создать на**.  
  
## <a name="delete-an-extended-events-session"></a>Удаление сеанса расширенных событий  
 Сеанс расширенных событий можно удалить.  
  
-   В редакторе запросов при помощи `DROP EVENT SESSION`.  
  
-   В **обозревателе объектов**.  
  
 При удалении сеанса событий удаляются все сведения о конфигурации, а определение сеанса больше не отображается в представлении каталога sys.server_event_sessions.  
  
> [!NOTE]  
>  system_health и AlwaysOn_health включены в состав [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ; не удаляйте их. Представление system_health по умолчанию включено (дополнительные сведения см. в статье [Использование сеанса system_health](use-the-ssms-xe-profiler.md)). По умолчанию AlwaysOn_health отключен. Эти сеансы собирают данные, которые могут оказаться полезными для диагностики проблем с производительностью.  
  
 Для удаления сеанса расширенных событий требуется разрешение ALTER ANY EVENT SESSION.  
  
 Удаление сеанса расширенных событий с помощью **обозревателя объектов**.  
  
1.  Разверните узлы **Управление**, **Расширенные события**, а затем **Сеансы** .  
  
2.  Щелкните правой кнопкой мыши сеанс и выберите пункт **Удалить**.  
  
3.  В диалоговом окне **Удаление объекта** нажмите кнопку **ОК**.  
  
4.  После завершения пересмотра сеанса событий нажмите кнопку **ОК**.  
  
 Чтобы удалить сеанс расширенных событий в **редакторе запросов**, создайте следующие инструкции, заменив *session_name* именем сеанса расширенных событий, который требуется удалить:  
  
```  
DROP EVENT SESSION [session_name]  
ON SERVER  
```  
  
  
