---
title: Свойства базы данных (страница "Хранилище запросов") | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: configuration
ms.topic: conceptual
f1_keywords:
- sql13.swb.databaseproperties.querystore.f1
ms.assetid: da47d75e-291a-4305-acef-4b0aaf5215da
author: stevestein
ms.author: sstein
ms.openlocfilehash: bab0d9b697e9ad9ec4b27f320d26b9b9edb5944e
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87734125"
---
# <a name="database-properties-query-store-page"></a>Свойства базы данных (страница хранилища запросов)
  Откройте эту страницу из основной базы данных и используйте ее для настройки и изменения свойств хранилища запросов базы данных. Эти параметры можно также настроить с помощью [параметров ALTER DATABASE SET](/sql/t-sql/statements/alter-database-transact-sql-set-options). Дополнительные сведения о хранилище запросов см. в разделе [Monitoring Performance By Using the Query Store](../performance/monitoring-performance-by-using-the-query-store.md).  
  
||  
|-|  
|**Применимо к**: [!INCLUDE[sqldbesa](../../includes/sqldbesa-md.md)].|  
  
## <a name="options"></a>Варианты  
 Включить  
 Включает и отключает хранилище запросов.  
  
 Режим работы  
 Допустимые значения: READ_ONLY и READ_WRITE. В режиме READ_WRITE хранилище запросов собирает и сохраняет план запросов и статистические данные о выполнении. В режиме READ_ONLY можно считывать данные из хранилища запросов, но новые сведения не добавляется. Если выделенное свободное место в хранилище запросов будет исчерпано, хранилище переключится в режим работы READ_ONLY.  
  
 Режим работы (фактический)  
 Получает фактический режим работы хранилища запросов.  
  
 Режим работы (запрошенный)  
 Получает и задает нужный режим работы хранилища запросов.  
  
 Интервал сброса данных (в минутах)  
 Определяет частоту, с которой данные, записанные в хранилище запросов, сохраняются на диск. Для оптимизации производительности данные, собранные хранилищем запросов, асинхронно записываются на диск. Настраивается частота, с которой происходит эта асинхронная передача.  
  
 Интервал сбора статистики  
 Получает и задает значение интервала сборка статистики.  
  
 Максимальный размер (Мбайт)  
 Получает и задает свободное место, выделенное для хранилища запросов.  
  
 Пороговое значение устаревших запросов (в днях)  
 Получает и задает пороговое значение устаревшего запроса. Настройте аргумент STALE_QUERY_THRESHOLD_DAYS, чтобы указать длительность хранения данных в хранилище запросов в днях.  
  
 Очистка данных запроса  
 Удаляет содержимое хранилища запросов.  
  
 Круговые диаграммы  
 На схеме слева показано общее использование файлов базы данных на диске и часть файла, в которой содержатся данные хранилища запросов.  
  
 На схеме справа показана часть квоты хранилища запросов, которая сейчас занята. Обратите внимание, что на левой схеме квота не показана. Квота может превышать текущий размер базы данных.  
  
## <a name="remarks"></a>Remarks  
 Хранилище запросов предоставляет DBA подробные сведения о выборе и производительности плана запросов. Оно упрощает устранение неполадок с производительностью, позволяя быстро находить разницу в производительности, вызванную изменениями в планах запросов. Функция автоматически записывает журнал запросов, планы и статистику выполнения и сохраняет их для просмотра. Она разделяет данные по временным окнам, позволяя просмотреть шаблоны использования и понять, когда изменения плана запросов произошли на сервере. Хранилище запросов можно настроить на странице свойств базы данных хранилища запросов или с помощью параметра [ALTER DATABASE SET](/sql/t-sql/statements/alter-database-transact-sql-set-options) . Сведения в хранилище запросов представлены в диалоговом окне [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)] . Дополнительные сведения о хранилище запросов см. в разделе [Monitoring Performance By Using the Query Store](../performance/monitoring-performance-by-using-the-query-store.md).  
  
## <a name="see-also"></a>См. также:  
 [Query Store Stored Procedures (Transact-SQL)](/sql/relational-databases/system-stored-procedures/query-store-stored-procedures-transact-sql)  (Хранимые процедуры хранилища запросов (Transact-SQL))  
 [Представления каталога хранилища запросов (Transact-SQL)](/sql/relational-databases/system-catalog-views/query-store-catalog-views-transact-sql)  
  
  
