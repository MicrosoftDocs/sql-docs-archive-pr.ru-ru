---
title: Состояния базы данных | Документация Майкрософт
ms.custom: ''
ms.date: 07/15/2016
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: configuration
ms.topic: conceptual
f1_keywords:
- SQL12.SWB.DATABASESTATES.F1
helpviewer_keywords:
- emergency database state [SQL Server]
- verifying database states
- viewing database states
- displaying database states
- database states [SQL Server]
- current database state
- offline database state [SQL Server]
- suspect database state
- recovery pending database state [SQL Server]
- states [SQL Server], databases
- online database state
- states [SQL Server]
- restoring database state [SQL Server]
ms.assetid: b7f1f111-ca73-4a89-b567-a98d64d6ecb3
author: stevestein
ms.author: sstein
ms.openlocfilehash: 0aec4e5fb367f5fe9bf8fca5ed056269930cf2db
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87751104"
---
# <a name="database-states"></a><span data-ttu-id="4d1ce-102">Состояния базы данных</span><span class="sxs-lookup"><span data-stu-id="4d1ce-102">Database States</span></span>
  <span data-ttu-id="4d1ce-103">База данных всегда находится в определенном состоянии.</span><span class="sxs-lookup"><span data-stu-id="4d1ce-103">A database is always in one specific state.</span></span> <span data-ttu-id="4d1ce-104">Например, к этим состояниям относятся состояния ONLINE, OFFLINE или SUSPECT.</span><span class="sxs-lookup"><span data-stu-id="4d1ce-104">For example, these states include ONLINE, OFFLINE, or SUSPECT.</span></span> <span data-ttu-id="4d1ce-105">Чтобы проверить текущее состояние базы данных, выберите столбец **state_desc** в представлении каталога [sys.databases](/sql/relational-databases/system-catalog-views/sys-databases-transact-sql) или свойство **Status** в функции [DATABASEPROPERTYEX](/sql/t-sql/functions/databasepropertyex-transact-sql) .</span><span class="sxs-lookup"><span data-stu-id="4d1ce-105">To verify the current state of a database, select the **state_desc** column in the [sys.databases](/sql/relational-databases/system-catalog-views/sys-databases-transact-sql) catalog view or the **Status** property in the [DATABASEPROPERTYEX](/sql/t-sql/functions/databasepropertyex-transact-sql) function.</span></span>  
  
## <a name="database-state-definitions"></a><span data-ttu-id="4d1ce-106">Определения состояний базы данных</span><span class="sxs-lookup"><span data-stu-id="4d1ce-106">Database State Definitions</span></span>  
 <span data-ttu-id="4d1ce-107">Состояния базы данных определяются в следующей таблице.</span><span class="sxs-lookup"><span data-stu-id="4d1ce-107">The following table defines the database states.</span></span>  
  
|<span data-ttu-id="4d1ce-108">Состояние</span><span class="sxs-lookup"><span data-stu-id="4d1ce-108">State</span></span>|<span data-ttu-id="4d1ce-109">Определение</span><span class="sxs-lookup"><span data-stu-id="4d1ce-109">Definition</span></span>|  
|-----------|----------------|  
|<span data-ttu-id="4d1ce-110">ONLINE</span><span class="sxs-lookup"><span data-stu-id="4d1ce-110">ONLINE</span></span>|<span data-ttu-id="4d1ce-111">База данных доступна.</span><span class="sxs-lookup"><span data-stu-id="4d1ce-111">Database is available for access.</span></span> <span data-ttu-id="4d1ce-112">Первичная файловая группа находится в режиме в сети, хотя возможно не завершена стадия отката восстановления.</span><span class="sxs-lookup"><span data-stu-id="4d1ce-112">The primary filegroup is online, although the undo phase of recovery may not have been completed.</span></span>|  
|<span data-ttu-id="4d1ce-113">OFFLINE</span><span class="sxs-lookup"><span data-stu-id="4d1ce-113">OFFLINE</span></span>|<span data-ttu-id="4d1ce-114">База данных недоступна.</span><span class="sxs-lookup"><span data-stu-id="4d1ce-114">Database is unavailable.</span></span> <span data-ttu-id="4d1ce-115">База данных переходит в режим вне сети с помощью явного указания пользователя и остается в режиме вне сети до тех пор, пока пользователем не будет предпринято дополнительное действие.</span><span class="sxs-lookup"><span data-stu-id="4d1ce-115">A database becomes offline by explicit user action and remains offline until additional user action is taken.</span></span> <span data-ttu-id="4d1ce-116">Например, база данных может быть переведена в режим вне сети, чтобы переместить файл на другой диск.</span><span class="sxs-lookup"><span data-stu-id="4d1ce-116">For example, the database may be taken offline in order to move a file to a new disk.</span></span> <span data-ttu-id="4d1ce-117">После завершения перемещения файла база данных снова переводится в режим в сети.</span><span class="sxs-lookup"><span data-stu-id="4d1ce-117">The database is then brought back online after the move has been completed.</span></span>|  
|<span data-ttu-id="4d1ce-118">RESTORING</span><span class="sxs-lookup"><span data-stu-id="4d1ce-118">RESTORING</span></span>|<span data-ttu-id="4d1ce-119">Восстанавливаются один или несколько файлов, принадлежащих к первичной файловой группе, или один или более файлов, принадлежащих ко вторичным группам, причем база данных остается в режиме в сети.</span><span class="sxs-lookup"><span data-stu-id="4d1ce-119">One or more files of the primary filegroup are being restored, or one or more secondary files are being restored offline.</span></span> <span data-ttu-id="4d1ce-120">База данных недоступна.</span><span class="sxs-lookup"><span data-stu-id="4d1ce-120">The database is unavailable.</span></span>|  
|<span data-ttu-id="4d1ce-121">RECOVERING</span><span class="sxs-lookup"><span data-stu-id="4d1ce-121">RECOVERING</span></span>|<span data-ttu-id="4d1ce-122">База данных в процессе восстановления.</span><span class="sxs-lookup"><span data-stu-id="4d1ce-122">Database is being recovered.</span></span> <span data-ttu-id="4d1ce-123">Процесс восстановления является переходным состоянием; после успешного завершения восстановления база данных автоматически переходит в режим вне сети.</span><span class="sxs-lookup"><span data-stu-id="4d1ce-123">The recovering process is a transient state; the database will automatically become online if the recovery succeeds.</span></span> <span data-ttu-id="4d1ce-124">При неудачном завершении восстановления база данных будет помечена как подозрительная.</span><span class="sxs-lookup"><span data-stu-id="4d1ce-124">If the recovery fails, the database will become suspect.</span></span> <span data-ttu-id="4d1ce-125">База данных недоступна.</span><span class="sxs-lookup"><span data-stu-id="4d1ce-125">The database is unavailable.</span></span>|  
|<span data-ttu-id="4d1ce-126">RECOVERY PENDING</span><span class="sxs-lookup"><span data-stu-id="4d1ce-126">RECOVERY PENDING</span></span>|[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="4d1ce-127">во время восстановления произошла ошибка, связанная с ресурсами.</span><span class="sxs-lookup"><span data-stu-id="4d1ce-127">has encountered a resource-related error during recovery.</span></span> <span data-ttu-id="4d1ce-128">База данных не повреждена, но, возможно, потеряны файлы или ограничения системных ресурсов препятствуют началу процесса восстановления.</span><span class="sxs-lookup"><span data-stu-id="4d1ce-128">The database is not damaged, but files may be missing or system resource limitations may be preventing it from starting.</span></span> <span data-ttu-id="4d1ce-129">База данных недоступна.</span><span class="sxs-lookup"><span data-stu-id="4d1ce-129">The database is unavailable.</span></span> <span data-ttu-id="4d1ce-130">Со стороны пользователя требуется дополнительное действие, чтобы исправить ошибку и разрешить завершение процесса восстановления.</span><span class="sxs-lookup"><span data-stu-id="4d1ce-130">Additional action by the user is required to resolve the error and let the recovery process be completed.</span></span>|  
|<span data-ttu-id="4d1ce-131">SUSPECT</span><span class="sxs-lookup"><span data-stu-id="4d1ce-131">SUSPECT</span></span>|<span data-ttu-id="4d1ce-132">По меньшей мере, первичная файловая группа помечена как подозрительная и, возможно, повреждена.</span><span class="sxs-lookup"><span data-stu-id="4d1ce-132">At least the primary filegroup is suspect and may be damaged.</span></span> <span data-ttu-id="4d1ce-133">База данных не может быть восстановлена во время запуска [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="4d1ce-133">The database cannot be recovered during startup of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="4d1ce-134">База данных недоступна.</span><span class="sxs-lookup"><span data-stu-id="4d1ce-134">The database is unavailable.</span></span> <span data-ttu-id="4d1ce-135">Со стороны пользователя требуется дополнительное действие, чтобы устранить проблему.</span><span class="sxs-lookup"><span data-stu-id="4d1ce-135">Additional action by the user is required to resolve the problem.</span></span>|  
|<span data-ttu-id="4d1ce-136">EMERGENCY</span><span class="sxs-lookup"><span data-stu-id="4d1ce-136">EMERGENCY</span></span>|<span data-ttu-id="4d1ce-137">Пользователь изменил базу данных и установил состояние базы данных в значение EMERGENCY.</span><span class="sxs-lookup"><span data-stu-id="4d1ce-137">User has changed the database and set the status to EMERGENCY.</span></span> <span data-ttu-id="4d1ce-138">База данных находится в однопользовательском режиме и, возможно, в процессе исправления или восстановления.</span><span class="sxs-lookup"><span data-stu-id="4d1ce-138">The database is in single-user mode and may be repaired or restored.</span></span> <span data-ttu-id="4d1ce-139">База данных помечена как READ_ONLY, ведение журнала отключено и доступ возможен только элементам предопределенной роли сервера **sysadmin** .</span><span class="sxs-lookup"><span data-stu-id="4d1ce-139">The database is marked READ_ONLY, logging is disabled, and access is limited to members of the **sysadmin** fixed server role.</span></span> <span data-ttu-id="4d1ce-140">EMERGENCY используется в основном для диагностики.</span><span class="sxs-lookup"><span data-stu-id="4d1ce-140">EMERGENCY is primarily used for troubleshooting purposes.</span></span> <span data-ttu-id="4d1ce-141">Например, база данных, помеченная как подозрительная, может быть переведена в состояние EMERGENCY.</span><span class="sxs-lookup"><span data-stu-id="4d1ce-141">For example, a database marked as suspect can be set to the EMERGENCY state.</span></span> <span data-ttu-id="4d1ce-142">Это предоставляет системному администратору доступ к базе данных только для чтения.</span><span class="sxs-lookup"><span data-stu-id="4d1ce-142">This could permit the system administrator read-only access to the database.</span></span> <span data-ttu-id="4d1ce-143">Только члены предопределенной роли сервера **sysadmin** могут перевести базу данных в состояние EMERGENCY.</span><span class="sxs-lookup"><span data-stu-id="4d1ce-143">Only members of the **sysadmin** fixed server role can set a database to the EMERGENCY state.</span></span>|  
  
## <a name="related-content"></a><span data-ttu-id="4d1ce-144">См. также</span><span class="sxs-lookup"><span data-stu-id="4d1ce-144">Related Content</span></span>  
 [<span data-ttu-id="4d1ce-145">ALTER DATABASE (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="4d1ce-145">ALTER DATABASE &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/alter-database-transact-sql)  
  
 [<span data-ttu-id="4d1ce-146">Состояния зеркального отображения (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="4d1ce-146">Mirroring States &#40;SQL Server&#41;</span></span>](../../database-engine/database-mirroring/mirroring-states-sql-server.md)  
  
 [<span data-ttu-id="4d1ce-147">Состояния файлов</span><span class="sxs-lookup"><span data-stu-id="4d1ce-147">File States</span></span>](file-states.md)  
  
  
