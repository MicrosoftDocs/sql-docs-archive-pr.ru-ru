---
title: Настройки резервного копирования журналов транзакций для доставки журналов | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: ''
ms.topic: conceptual
f1_keywords:
- sql12.swb.databaseproperties.logshipping.settings.tlogback.f1
ms.assetid: 9a6e6c16-7f71-412b-bba6-7bffac001277
author: stevestein
ms.author: sstein
ms.openlocfilehash: b5420f3032cd2477d23028a2e27c1ce89c4e0525
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87751080"
---
# <a name="log-shipping-transaction-log-backup-settings"></a><span data-ttu-id="877e7-102">Настройки резервного копирования журналов транзакций для доставки журналов</span><span class="sxs-lookup"><span data-stu-id="877e7-102">Log Shipping Transaction Log Backup Settings</span></span>
  <span data-ttu-id="877e7-103">Используйте данное диалоговое окно для внесения и изменения настроек создания резервных копий журнала транзакций для конфигурации доставки журналов.</span><span class="sxs-lookup"><span data-stu-id="877e7-103">Use this dialog box to configure and modify the transaction log backup settings for a log shipping configuration.</span></span>  
  
 <span data-ttu-id="877e7-104">Основные сведения о доставке журналов изложены в статье [Сведения о доставке журналов (SQL Server)](../../database-engine/log-shipping/about-log-shipping-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="877e7-104">For an explanation of log shipping concepts, see [About Log Shipping &#40;SQL Server&#41;](../../database-engine/log-shipping/about-log-shipping-sql-server.md).</span></span>  
  
## <a name="options"></a><span data-ttu-id="877e7-105">Параметры</span><span class="sxs-lookup"><span data-stu-id="877e7-105">Options</span></span>  
 <span data-ttu-id="877e7-106">**Сетевой путь к каталогу резервной копии**</span><span class="sxs-lookup"><span data-stu-id="877e7-106">**Network path to the backup folder**</span></span>  
 <span data-ttu-id="877e7-107">В этом поле введите путь к общей сетевой папке резервных копий.</span><span class="sxs-lookup"><span data-stu-id="877e7-107">Type the network share to your backup folder in this box.</span></span> <span data-ttu-id="877e7-108">Необходимо сделать общей локальную папку, в которой хранятся резервные копии журналов транзакций, чтобы задания копирования доставки журналов смогли скопировать эти файлы на сервер-получатель.</span><span class="sxs-lookup"><span data-stu-id="877e7-108">The local folder where your transaction log backups are saved must be shared so that the log shipping copy jobs can copy these files to the secondary server.</span></span> <span data-ttu-id="877e7-109">Необходимо предоставить разрешение на чтение данного сетевого ресурса для учетной записи-посредника, под которой будет запускаться задание копирования на экземпляре сервера-получателя.</span><span class="sxs-lookup"><span data-stu-id="877e7-109">You must grant read permissions on this network share to the proxy account under which the copy job will run at the secondary server instance.</span></span> <span data-ttu-id="877e7-110">По умолчанию это учетная запись службы «SQL Server, агент» экземпляра сервера-получателя, однако администратор может выбрать другую учетную запись-посредник для выполнения этой задачи.</span><span class="sxs-lookup"><span data-stu-id="877e7-110">By default, this is the SQLServerAgent service account of the secondary server instance, but an administrator can choose another proxy account for the job.</span></span>  
  
 <span data-ttu-id="877e7-111">**Если папка резервного копирования находится на сервере-источнике, укажите локальный путь к папке**</span><span class="sxs-lookup"><span data-stu-id="877e7-111">**If the backup folder is located on the primary server, type the local path to the folder**</span></span>  
 <span data-ttu-id="877e7-112">Введите букву локального диска и путь к папке резервного копирования, если она расположена на сервере-источнике.</span><span class="sxs-lookup"><span data-stu-id="877e7-112">Type the local drive letter and path to the backup folder if the backup folder is located on the primary server.</span></span> <span data-ttu-id="877e7-113">Если папка резервного копирования расположена не на сервере-источнике, это поле можно оставить пустым.</span><span class="sxs-lookup"><span data-stu-id="877e7-113">If the backup folder is not located on the primary server, you can leave this blank.</span></span>  
  
 <span data-ttu-id="877e7-114">Если здесь указан локальный путь, команда BACKUP будет использовать его для создания резервных копий журналов транзакций; в противном случае, если локальный путь не указан, команда BACKUP будет использовать сетевой путь, указанный в поле **Сетевой путь к каталогу резервной копии** .</span><span class="sxs-lookup"><span data-stu-id="877e7-114">If you specify a local path here, the BACKUP command will use this path to create the transaction log backups; otherwise, if no local path is specified, the BACKUP command will use the network path specified in the **Network path to the backup folder** box.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="877e7-115">Если учетная запись службы [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] запущена на сервере-источнике под локальной системной учетной записью, необходимо создать папку резервного копирования на сервере-источнике и указать локальный путь к ней.</span><span class="sxs-lookup"><span data-stu-id="877e7-115">If the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] service account is running under the local system account on the primary server, you must create the backup folder on the primary server and specify the local path to that folder here.</span></span> <span data-ttu-id="877e7-116">Учетная запись службы [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] экземпляра сервера-источника должна иметь разрешение на считывание из данной папки и на запись в нее.</span><span class="sxs-lookup"><span data-stu-id="877e7-116">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] service account of the primary server instance must have Read and Write permissions on this folder.</span></span>  
  
 <span data-ttu-id="877e7-117">**Удалить файлы, созданные ранее**</span><span class="sxs-lookup"><span data-stu-id="877e7-117">**Delete files older than**</span></span>  
 <span data-ttu-id="877e7-118">Укажите, в течение какого времени резервные копии журналов транзакций должны храниться в каталоге резервных копий журналов, прежде чем будут удалены.</span><span class="sxs-lookup"><span data-stu-id="877e7-118">Specify the length of time you want transaction log backups to remain in your backup directory before being deleted.</span></span>  
  
 <span data-ttu-id="877e7-119">**Предупредить, если резервное копирование не произошло в течение**</span><span class="sxs-lookup"><span data-stu-id="877e7-119">**Alert if no backup occurs within**</span></span>  
 <span data-ttu-id="877e7-120">Укажите, в течение какого времени ожидать доставки журнала, прежде чем выдать предупреждение о том, что резервное копирование журнала транзакций не выполнялось.</span><span class="sxs-lookup"><span data-stu-id="877e7-120">Specify the amount of time you want log shipping to wait before raising an alert that no transaction log backups have occurred.</span></span>  
  
 <span data-ttu-id="877e7-121">**Имя задания**</span><span class="sxs-lookup"><span data-stu-id="877e7-121">**Job name**</span></span>  
 <span data-ttu-id="877e7-122">Отображает имя задания агента SQL Server, при помощи которого создаются резервные копии журналов транзакций для доставки журналов.</span><span class="sxs-lookup"><span data-stu-id="877e7-122">Displays the name of the SQL Server Agent job that is used to create the transaction log backups for log shipping.</span></span> <span data-ttu-id="877e7-123">При первоначальном создании задания можно изменить его имя, введя в текстовом поле новое.</span><span class="sxs-lookup"><span data-stu-id="877e7-123">When first creating the job, you can modify the name by typing in the box.</span></span>  
  
 <span data-ttu-id="877e7-124">**Расписание**</span><span class="sxs-lookup"><span data-stu-id="877e7-124">**Schedule**</span></span>  
 <span data-ttu-id="877e7-125">Отображает текущее расписание для резервного копирования журналов транзакций базы данных-источника.</span><span class="sxs-lookup"><span data-stu-id="877e7-125">Displays the current schedule for backing up the transaction logs of the primary database.</span></span> <span data-ttu-id="877e7-126">Расписание можно изменить до начала создания задания резервного копирования, нажав кнопку **Расписание...** . Расписание можно изменить после начала создания задания резервного копирования, нажав кнопку **Изменить задание...** .</span><span class="sxs-lookup"><span data-stu-id="877e7-126">Before the backup job has been created, You can modify this schedule by clicking **Schedule...**. After the job has been created, you can modify this schedule by clicking **Edit Job...**.</span></span>  
  
### <a name="backup-job"></a><span data-ttu-id="877e7-127">Задание резервного копирования</span><span class="sxs-lookup"><span data-stu-id="877e7-127">Backup Job</span></span>  
 <span data-ttu-id="877e7-128">**Расписание...**</span><span class="sxs-lookup"><span data-stu-id="877e7-128">**Schedule...**</span></span>  
 <span data-ttu-id="877e7-129">Изменить расписание, которое было создано одновременно с заданием агента SQL Server.</span><span class="sxs-lookup"><span data-stu-id="877e7-129">Modify the schedule that is created when the SQL Server Agent job is created.</span></span>  
  
 <span data-ttu-id="877e7-130">**Изменить задание...**</span><span class="sxs-lookup"><span data-stu-id="877e7-130">**Edit Job...**</span></span>  
 <span data-ttu-id="877e7-131">Изменить параметры задания агента SQL Server, которое выполняет резервное копирование журналов транзакций базы данных-источника.</span><span class="sxs-lookup"><span data-stu-id="877e7-131">Modify the SQL Server Agent job parameters for the job that performs transaction log backups on the primary database.</span></span>  
  
 <span data-ttu-id="877e7-132">**Отключить это задание**</span><span class="sxs-lookup"><span data-stu-id="877e7-132">**Disable this job**</span></span>  
 <span data-ttu-id="877e7-133">Отключить создание резервных копий журналов транзакций в задании агента SQL Server.</span><span class="sxs-lookup"><span data-stu-id="877e7-133">Disable the SQL Server Agent job from creating transaction log backups.</span></span>  
  
### <a name="compression"></a><span data-ttu-id="877e7-134">Сжатие</span><span class="sxs-lookup"><span data-stu-id="877e7-134">Compression</span></span>  
 [!INCLUDE[ssEnterpriseEd10](../../includes/ssenterpriseed10-md.md)] <span data-ttu-id="877e7-135">(и более поздние версии) поддерживает [сжатие резервной копии](../backup-restore/backup-compression-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="877e7-135">(or a later version) supports [backup compression](../backup-restore/backup-compression-sql-server.md).</span></span>  
  
 <span data-ttu-id="877e7-136">**Установка сжатия резервной копии**</span><span class="sxs-lookup"><span data-stu-id="877e7-136">**Set backup compression**</span></span>  
 <span data-ttu-id="877e7-137">В [!INCLUDE[ssEnterpriseEd10](../../includes/ssenterpriseed10-md.md)] (или в одной из последующих версий) выберите одно из следующих значений параметра сжатия резервной копии для резервных копий журналов этой конфигурации доставки журналов.</span><span class="sxs-lookup"><span data-stu-id="877e7-137">In [!INCLUDE[ssEnterpriseEd10](../../includes/ssenterpriseed10-md.md)] (or a later version), select one the following backup compression values for the log backups of this log shipping configuration:</span></span>  
  
|||  
|-|-|  
|<span data-ttu-id="877e7-138">**Использовать параметр сервера по умолчанию**</span><span class="sxs-lookup"><span data-stu-id="877e7-138">**Use the default server setting**</span></span>|<span data-ttu-id="877e7-139">Щелкните для использования настроек уровня сервера, установленных по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="877e7-139">Click to use the server-level default.</span></span><br /><br /> <span data-ttu-id="877e7-140">Значения по умолчанию устанавливаются в параметре конфигурации сервера **backup compression default** .</span><span class="sxs-lookup"><span data-stu-id="877e7-140">This default is set by the **backup compression default** server-configuration option.</span></span> <span data-ttu-id="877e7-141">Сведения о том, как просмотреть текущую настройку этого параметра, см. в разделе [Параметр конфигурации сервера "Просмотр или настройка параметра сжатия резервных копий по умолчанию"](../../database-engine/configure-windows/view-or-configure-the-backup-compression-default-server-configuration-option.md).</span><span class="sxs-lookup"><span data-stu-id="877e7-141">For information about how to view the current setting of this option, see [View or Configure the backup compression default Server Configuration Option](../../database-engine/configure-windows/view-or-configure-the-backup-compression-default-server-configuration-option.md).</span></span>|  
|<span data-ttu-id="877e7-142">**Сжимать резервные копии**</span><span class="sxs-lookup"><span data-stu-id="877e7-142">**Compress backup**</span></span>|<span data-ttu-id="877e7-143">Щелкните для сжатия резервной копии, независимо от уровня сервера по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="877e7-143">Click to compress the backup, regardless of the server-level default.</span></span><br /><br /> <span data-ttu-id="877e7-144">**\*\* Важно. \*\*** По умолчанию сжатие существенно повышает загрузку ЦП, что может помешать выполнению других операций.</span><span class="sxs-lookup"><span data-stu-id="877e7-144">**\*\* Important \*\*** By default, compression significantly increases CPU usage, and the additional CPU consumed by the compression process might adversely impact concurrent operations.</span></span> <span data-ttu-id="877e7-145">Поэтому лучше создавать сжатые резервные копии с низким приоритетом в сеансах, доступ которых к ЦП ограничивается [регулятором ресурсов](../resource-governor/resource-governor.md).</span><span class="sxs-lookup"><span data-stu-id="877e7-145">Therefore, you might want to create low-priority compressed backups in a session whose CPU usage is limited by the [Resource Governor](../resource-governor/resource-governor.md).</span></span> <span data-ttu-id="877e7-146">Дополнительные сведения см. ниже в подразделе [Использование регулятора ресурсов для ограничения загрузки ЦП при сжатии резервной копии (Transact-SQL)](../backup-restore/use-resource-governor-to-limit-cpu-usage-by-backup-compression-transact-sql.md).</span><span class="sxs-lookup"><span data-stu-id="877e7-146">For more information, see [Use Resource Governor to Limit CPU Usage by Backup Compression &#40;Transact-SQL&#41;](../backup-restore/use-resource-governor-to-limit-cpu-usage-by-backup-compression-transact-sql.md).</span></span>|  
|<span data-ttu-id="877e7-147">**Не сжимать резервные копии**</span><span class="sxs-lookup"><span data-stu-id="877e7-147">**Do not compress backup**</span></span>|<span data-ttu-id="877e7-148">Щелкните для создания резервной копии без сжатия, независимо от уровня сервера по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="877e7-148">Click to create an uncompressed backup, regardless of the server-level default.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="877e7-149">См. также:</span><span class="sxs-lookup"><span data-stu-id="877e7-149">See Also</span></span>  
 <span data-ttu-id="877e7-150">[Настройка пользователя для создания заданий агента SQL Server и управления заданиями](../../ssms/agent/configure-a-user-to-create-and-manage-sql-server-agent-jobs.md) </span><span class="sxs-lookup"><span data-stu-id="877e7-150">[Configure a User to Create and Manage SQL Server Agent Jobs](../../ssms/agent/configure-a-user-to-create-and-manage-sql-server-agent-jobs.md) </span></span>  
 [<span data-ttu-id="877e7-151">Сведения о доставке журналов (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="877e7-151">About Log Shipping &#40;SQL Server&#41;</span></span>](../../database-engine/log-shipping/about-log-shipping-sql-server.md)  
  
  
