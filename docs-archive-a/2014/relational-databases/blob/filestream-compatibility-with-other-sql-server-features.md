---
title: Совместимость FILESTREAM с другими компонентами SQL Server | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: filestream
ms.topic: conceptual
helpviewer_keywords:
- FILESTREAM [SQL Server], other SQL Server features and
- FILESTREAM [SQL Server], limitations
ms.assetid: d2c145dc-d49a-4f5b-91e6-89a2b0adb4f3
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 53bb99ea094261fd96f2a821dfaa5203e9796d8c
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87654354"
---
# <a name="filestream-compatibility-with-other-sql-server-features"></a><span data-ttu-id="1c1e6-102">Совместимость FILESTREAM с другими компонентами SQL Server</span><span class="sxs-lookup"><span data-stu-id="1c1e6-102">FILESTREAM Compatibility with Other SQL Server Features</span></span>
  <span data-ttu-id="1c1e6-103">Поскольку данные FILESTREAM находятся в файловой системе, в данном разделе приводятся основные сведения, рекомендации и ограничения по использованию FILESTREAM со следующими компонентами [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]:</span><span class="sxs-lookup"><span data-stu-id="1c1e6-103">Because FILESTREAM data is in the file system, this topic provides some considerations, guidelines, and limitations for using FILESTREAM with the following features in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]:</span></span>  
  
-   [<span data-ttu-id="1c1e6-104">Службы SQL Server Integration Services</span><span class="sxs-lookup"><span data-stu-id="1c1e6-104">SQL Server Integration Services (SSIS)</span></span>](#ssis)  
  
-   [<span data-ttu-id="1c1e6-105">Распределенные запросы и связанные серверы</span><span class="sxs-lookup"><span data-stu-id="1c1e6-105">Distributed Queries and Linked Servers</span></span>](#distqueries)  
  
-   [<span data-ttu-id="1c1e6-106">Шифрование</span><span class="sxs-lookup"><span data-stu-id="1c1e6-106">Encryption</span></span>](#encryption)  
  
-   [<span data-ttu-id="1c1e6-107">Моментальные снимки базы данных</span><span class="sxs-lookup"><span data-stu-id="1c1e6-107">Database Snapshots</span></span>](#DatabaseSnapshot)  
  
-   [<span data-ttu-id="1c1e6-108">Репликация</span><span class="sxs-lookup"><span data-stu-id="1c1e6-108">Replication</span></span>](#Replication)  
  
-   [<span data-ttu-id="1c1e6-109">Доставка журналов</span><span class="sxs-lookup"><span data-stu-id="1c1e6-109">Log Shipping</span></span>](#LogShipping)  
  
-   [<span data-ttu-id="1c1e6-110">Зеркальное отображение базы данных</span><span class="sxs-lookup"><span data-stu-id="1c1e6-110">Database Mirroring</span></span>](#DatabaseMirroring)  
  
-   [<span data-ttu-id="1c1e6-111">Полнотекстовое индексирование</span><span class="sxs-lookup"><span data-stu-id="1c1e6-111">Full-Text Indexing</span></span>](#FullText)  
  
-   [<span data-ttu-id="1c1e6-112">Отказоустойчивая кластеризация</span><span class="sxs-lookup"><span data-stu-id="1c1e6-112">Failover Clustering</span></span>](#FailoverClustering)  
  
-   [<span data-ttu-id="1c1e6-113">SQL Server Express</span><span class="sxs-lookup"><span data-stu-id="1c1e6-113">SQL Server Express</span></span>](#SQLServerExpress)  
  
-   [<span data-ttu-id="1c1e6-114">Автономные базы данных</span><span class="sxs-lookup"><span data-stu-id="1c1e6-114">Contained Databases</span></span>](#contained)  
  
##  <a name="sql-server-integration-services-ssis"></a><a name="ssis"></a> <span data-ttu-id="1c1e6-115">Службы SQL Server Integration Services</span><span class="sxs-lookup"><span data-stu-id="1c1e6-115">SQL Server Integration Services (SSIS)</span></span>  
 <span data-ttu-id="1c1e6-116">Службы SQL Server Integration Services (SSIS) обрабатывают данные FILESTREAM в потоке данных как любые другие данные большого двоичного объекта с использованием типа данных DT_IMAGE SSIS.</span><span class="sxs-lookup"><span data-stu-id="1c1e6-116">SQL Server Integration Services (SSIS) handles FILESTREAM data in the data flow like any other BLOB data by using the DT_IMAGE SSIS data type.</span></span>  
  
 <span data-ttu-id="1c1e6-117">Загрузку файлов из файловой системы в столбец FILESTREAM можно выполнить с помощью преобразования «Импорт столбца».</span><span class="sxs-lookup"><span data-stu-id="1c1e6-117">You can use the Import Column transformation to load files from the file system into a FILESTREAM column.</span></span> <span data-ttu-id="1c1e6-118">Преобразование «Экспорт столбца» также можно использовать, чтобы извлечь файлы из столбца FILESTREAM в другую папку файловой системы.</span><span class="sxs-lookup"><span data-stu-id="1c1e6-118">You can also use the Export Column transformation to extract files from a FILESTREAM column to another location in the file system.</span></span>  
  
##  <a name="distributed-queries-and-linked-servers"></a><a name="distqueries"></a> <span data-ttu-id="1c1e6-119">Распределенные запросы и связанные серверы</span><span class="sxs-lookup"><span data-stu-id="1c1e6-119">Distributed Queries and Linked Servers</span></span>  
 <span data-ttu-id="1c1e6-120">Вы можете работать с данными FILESTREAM с помощью распределенных запросов и связанных серверов, рассматривая их как `varbinary(max)` данные.</span><span class="sxs-lookup"><span data-stu-id="1c1e6-120">You can work with FILESTREAM data through distributed queries and linked servers by treating it as `varbinary(max)` data.</span></span> <span data-ttu-id="1c1e6-121">Не допускается применение функции FILESTREAM **PathName()** в распределенных запросах, в которых используется четырехкомпонентное имя, даже если имя относится к локальному серверу.</span><span class="sxs-lookup"><span data-stu-id="1c1e6-121">You cannot use the FILESTREAM **PathName()** function in distributed queries that use a four-part name, even when the name refers to the local server.</span></span> <span data-ttu-id="1c1e6-122">Однако вы можете применять функцию **PathName()** во внутреннем запросе передаваемого запроса, в котором используется **OPENQUERY()** .</span><span class="sxs-lookup"><span data-stu-id="1c1e6-122">However you can use **PathName()** in the inner query of a pass-through query that uses **OPENQUERY()**.</span></span>  
  
##  <a name="encryption"></a><a name="encryption"></a> <span data-ttu-id="1c1e6-123">Шифрование</span><span class="sxs-lookup"><span data-stu-id="1c1e6-123">Encryption</span></span>  
 <span data-ttu-id="1c1e6-124">Данные FILESTREAM не шифруются, даже если включено прозрачное шифрование данных.</span><span class="sxs-lookup"><span data-stu-id="1c1e6-124">FILESTREAM data is not encrypted even when transparent data encryption is enabled.</span></span>  
  
##  <a name="database-snapshots"></a><a name="DatabaseSnapshot"></a> <span data-ttu-id="1c1e6-125">Моментальные снимки базы данных</span><span class="sxs-lookup"><span data-stu-id="1c1e6-125">Database Snapshots</span></span>  
 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="1c1e6-126">не поддерживает [моментальные снимки базы данных](../databases/database-snapshots-sql-server.md) для файловых групп FILESTREAM.</span><span class="sxs-lookup"><span data-stu-id="1c1e6-126">does not support [database snapshots](../databases/database-snapshots-sql-server.md) for FILESTREAM filegroups.</span></span> <span data-ttu-id="1c1e6-127">Если файловая группа FILESTREAM включена в предложение CREATE DATABASE ON, выполнение этой инструкции завершится сбоем и приведет к возникновению ошибки.</span><span class="sxs-lookup"><span data-stu-id="1c1e6-127">If a FILESTREAM filegroup is included in a CREATE DATABASE ON clause, the statement will fail and an error will be raised.</span></span>  
  
 <span data-ttu-id="1c1e6-128">При использовании FILESTREAM моментальные снимки базы данных можно создавать для стандартных файловых групп (отличных от FILESTREAM).</span><span class="sxs-lookup"><span data-stu-id="1c1e6-128">When you are using FILESTREAM, you can create database snapshots of standard (non-FILESTREAM) filegroups.</span></span> <span data-ttu-id="1c1e6-129">В таких моментальных снимках баз данных файловые группы FILESTREAM отмечаются как вне сети.</span><span class="sxs-lookup"><span data-stu-id="1c1e6-129">The FILESTREAM filegroups are marked as offline for those database snapshots.</span></span>  
  
 <span data-ttu-id="1c1e6-130">В инструкции SELECT, выполняемой в отношении таблицы FILESTREAM в моментальном снимке базы данных, не должно содержаться столбцов FILESTREAM; в противном случае будет возвращено следующее сообщение об ошибке:</span><span class="sxs-lookup"><span data-stu-id="1c1e6-130">A SELECT statement that is executed on a FILESTREAM table in a database snapshot must not include a FILESTREAM column; otherwise, the following error message will be returned:</span></span>  
  
 `Could not continue scan with NOLOCK due to data movement.`  
  
##  <a name="replication"></a><a name="Replication"></a> <span data-ttu-id="1c1e6-131">Replication</span><span class="sxs-lookup"><span data-stu-id="1c1e6-131">Replication</span></span>  
 <span data-ttu-id="1c1e6-132">Столбец `varbinary(max)`, атрибут FILESTREAM которого включен на издателе, может быть реплицирован на подписчик с атрибутом FILESTREAM или без него.</span><span class="sxs-lookup"><span data-stu-id="1c1e6-132">A `varbinary(max)` column that has the FILESTREAM attribute enabled at the Publisher can be replicated to a Subscriber with or without the FILESTREAM attribute.</span></span> <span data-ttu-id="1c1e6-133">Чтобы указать способ репликации этого столбца, используйте **диалоговое окно "Свойства статьи" —\<Article>** , @schema_option параметр хранимых процедур [sp_addarticle](/sql/relational-databases/system-stored-procedures/sp-addarticle-transact-sql) или [sp_addmergearticle](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="1c1e6-133">To specify the way in which the column is replicated, use the **Article Properties - \<Article>** dialog box or the @schema_option parameter of [sp_addarticle](/sql/relational-databases/system-stored-procedures/sp-addarticle-transact-sql) or [sp_addmergearticle](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql).</span></span> <span data-ttu-id="1c1e6-134">Данные, реплицированные в столбец типа `varbinary(max)` без атрибута FILESTREAM, не должны превышать установленный в 2 ГБ предел для данного типа данных; в противном случае формируется ошибка выполнения.</span><span class="sxs-lookup"><span data-stu-id="1c1e6-134">Data that is replicated to a `varbinary(max)` column that does not have the FILESTREAM attribute must not exceed the 2-GB limit for that data type; otherwise, a run-time error is generated.</span></span> <span data-ttu-id="1c1e6-135">Рекомендуется реплицировать атрибут FILESTREAM, если не выполняется репликация данных на [!INCLUDE[ssVersion2005](../../includes/ssversion2000-md.md)] Подписчики, независимо от указанного параметра схемы.</span><span class="sxs-lookup"><span data-stu-id="1c1e6-135">We recommend that you replicate the FILESTREAM attribute, unless you are replicating data to [!INCLUDE[ssVersion2005](../../includes/ssversion2000-md.md)] Subscribers is not supported, regardless of the schema option that is specified.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="1c1e6-136">Репликация больших значений данных с подписчиков [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] в [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] ограничена максимальным значением 256 МБ значений данных.</span><span class="sxs-lookup"><span data-stu-id="1c1e6-136">Replicating large data values from [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] to [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] Subscribers is limited to a maximum of 256 MB data values.</span></span> <span data-ttu-id="1c1e6-137">Дополнительные сведения см. в разделе [Maximum Capacity Specifications](https://go.microsoft.com/fwlink/?LinkId=103810).</span><span class="sxs-lookup"><span data-stu-id="1c1e6-137">For more information, see [Maximum Capacity Specifications](https://go.microsoft.com/fwlink/?LinkId=103810).</span></span>  
  
### <a name="considerations-for-transactional-replication"></a><span data-ttu-id="1c1e6-138">Вопросы использования репликации транзакций</span><span class="sxs-lookup"><span data-stu-id="1c1e6-138">Considerations for Transactional Replication</span></span>  
 <span data-ttu-id="1c1e6-139">При использовании столбцов FILESTREAM в таблицах, опубликованных для репликации транзакций, обратите внимание на следующие положения.</span><span class="sxs-lookup"><span data-stu-id="1c1e6-139">If you use FILESTREAM columns in tables that are published for transactional replication, note the following considerations:</span></span>  
  
-   <span data-ttu-id="1c1e6-140">Если в какой-либо из таблиц содержатся столбцы с атрибутом FILESTREAM, значения *database snapshot* или *database snapshot character* нельзя использовать для свойства @sync_method хранимой процедуры [sp_addpublication](/sql/relational-databases/system-stored-procedures/sp-addpublication-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="1c1e6-140">If any tables include columns that have the FILESTREAM attribute, you cannot use values of *database snapshot* or *database snapshot character* for the @sync_method property of [sp_addpublication](/sql/relational-databases/system-stored-procedures/sp-addpublication-transact-sql).</span></span>  
  
-   <span data-ttu-id="1c1e6-141">Параметр max text repl size задает максимально допустимый объем данных, добавляемых в опубликованный для репликации столбец.</span><span class="sxs-lookup"><span data-stu-id="1c1e6-141">The max text repl size option specifies the maximum amount of data that can be inserted into a column that is published for replication.</span></span> <span data-ttu-id="1c1e6-142">Этот параметр позволяет управлять размером реплицируемых данных FILESTREAM.</span><span class="sxs-lookup"><span data-stu-id="1c1e6-142">This option can be used to control the size of FILESTREAM data that is replicated.</span></span>  
  
-   <span data-ttu-id="1c1e6-143">Если указан параметр схемы для репликации атрибута FILESTREAM, но необходимый для FILESTREAM столбец `uniqueidentifier` был отфильтрован или если для этого столбца не задана репликация ограничения UNIQUE, то репликация атрибута FILESTREAM осуществлена не будет.</span><span class="sxs-lookup"><span data-stu-id="1c1e6-143">If you specify the schema option to replicate the FILESTREAM attribute, but you filter out the `uniqueidentifier` column that FILESTREAM requires or you specify not to replicate the UNIQUE constraint for the column, replication does not replicate the FILESTREAM attribute.</span></span> <span data-ttu-id="1c1e6-144">Столбец будет реплицирован только как столбец типа `varbinary(max)`.</span><span class="sxs-lookup"><span data-stu-id="1c1e6-144">The column is replicated only as a `varbinary(max)` column.</span></span>  
  
### <a name="considerations-for-merge-replication"></a><span data-ttu-id="1c1e6-145">Общие вопросы репликации слиянием</span><span class="sxs-lookup"><span data-stu-id="1c1e6-145">Considerations for Merge Replication</span></span>  
 <span data-ttu-id="1c1e6-146">При использовании столбцов FILESTREAM в таблицах, опубликованных для репликации слиянием, обратите внимание на следующие положения.</span><span class="sxs-lookup"><span data-stu-id="1c1e6-146">If you use FILESTREAM columns in tables that are published for merge replication, note the following considerations:</span></span>  
  
-   <span data-ttu-id="1c1e6-147">Как для репликации слиянием, так и для атрибута FILESTREAM необходим столбец типа данных `uniqueidentifier`, позволяющий идентифицировать каждую строку таблицы.</span><span class="sxs-lookup"><span data-stu-id="1c1e6-147">Both merge replication and FILESTREAM require a column of data type `uniqueidentifier` to identify each row in a table.</span></span> <span data-ttu-id="1c1e6-148">Если в таблице такого столбца нет, репликация слиянием автоматически добавляет его.</span><span class="sxs-lookup"><span data-stu-id="1c1e6-148">Merge replication automatically adds a column if the table does not have one.</span></span> <span data-ttu-id="1c1e6-149">Для репликации слиянием требуется, чтобы было установлено свойство ROWGUIDCOL данного столбца и чтобы значениями по умолчанию для данного столбца являлись NEWID() или NEWSEQUENTIALID().</span><span class="sxs-lookup"><span data-stu-id="1c1e6-149">Merge replication requires that the column have the ROWGUIDCOL property set and a default of NEWID() or NEWSEQUENTIALID().</span></span> <span data-ttu-id="1c1e6-150">В дополнение к этим требованиям для атрибута FILESTREAM необходимо задание ограничения UNIQUE для данного столбца.</span><span class="sxs-lookup"><span data-stu-id="1c1e6-150">In addition to these requirements, FILESTREAM requires that a UNIQUE constraint be defined for the column.</span></span> <span data-ttu-id="1c1e6-151">Эти требования приводят к следующим последствиям.</span><span class="sxs-lookup"><span data-stu-id="1c1e6-151">These requirements have the following consequences:</span></span>  
  
    -   <span data-ttu-id="1c1e6-152">При добавлении столбца FILESTREAM к таблице, уже опубликованной для репликации слиянием, необходимо убедиться, что у столбца `uniqueidentifier` имеется ограничение UNIQUE.</span><span class="sxs-lookup"><span data-stu-id="1c1e6-152">If you add a FILESTREAM column to a table that is already published for merge replication, make sure that the `uniqueidentifier` column has a UNIQUE constraint.</span></span> <span data-ttu-id="1c1e6-153">Если ограничение UNIQUE отсутствует, добавьте именованное ограничение к таблице в базе данных публикации.</span><span class="sxs-lookup"><span data-stu-id="1c1e6-153">If it does not have a UNIQUE constraint, add a named constraint to the table in the publication database.</span></span> <span data-ttu-id="1c1e6-154">По умолчанию репликация слиянием опубликует данное изменение схемы, и оно будет применено к каждой базе данных подписки.</span><span class="sxs-lookup"><span data-stu-id="1c1e6-154">By default, merge replication will publish this schema change, and it will be applied to each subscription database.</span></span>  
  
         <span data-ttu-id="1c1e6-155">Если ограничение UNIQUE добавляется вручную согласно описанию и репликацию слиянием требуется удалить, то сначала необходимо удалить ограничение UNIQUE, иначе удаление репликации завершится неуспешно.</span><span class="sxs-lookup"><span data-stu-id="1c1e6-155">If you add a UNIQUE constraint manually as described and you want to remove merge replication, you must first remove the UNIQUE constraint; otherwise, replication removal will fail.</span></span>  
  
    -   <span data-ttu-id="1c1e6-156">По умолчанию в репликации слиянием используется значение NEWSEQUENTIALID(), поскольку, по сравнению с NEWID(), оно обеспечивает лучшую производительность.</span><span class="sxs-lookup"><span data-stu-id="1c1e6-156">By default, merge replication uses NEWSEQUENTIALID() because it can provide better performance than NEWID().</span></span> <span data-ttu-id="1c1e6-157">При добавлении столбца `uniqueidentifier` к таблице, уже опубликованной для репликации слиянием, в качестве значения по умолчанию следует указать NEWSEQUENTIALID().</span><span class="sxs-lookup"><span data-stu-id="1c1e6-157">If you add a `uniqueidentifier` column to a table that will be published for merge replication, specify NEWSEQUENTIALID() as the default.</span></span>  
  
-   <span data-ttu-id="1c1e6-158">Репликация слиянием включает в себя оптимизацию репликации типов больших объектов.</span><span class="sxs-lookup"><span data-stu-id="1c1e6-158">Merge replication includes an optimization for replicating large object types.</span></span> <span data-ttu-id="1c1e6-159">Оптимизация управляется при помощи параметра @stream_blob_columns хранимой процедуры [sp_addmergearticle](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="1c1e6-159">This optimization is controlled by the @stream_blob_columns parameter of [sp_addmergearticle](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql).</span></span> <span data-ttu-id="1c1e6-160">Если параметр схемы настроен на репликацию атрибута FILESTREAM, параметру @stream_blob_columns присваивается значение `true`.</span><span class="sxs-lookup"><span data-stu-id="1c1e6-160">If you set the schema option to replicate the FILESTREAM attribute, the @stream_blob_columns parameter value is set to `true`.</span></span> <span data-ttu-id="1c1e6-161">Эта оптимизация может быть переопределена с помощью хранимой процедуры [sp_changemergearticle](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="1c1e6-161">This optimization can be overridden by using [sp_changemergearticle](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql).</span></span> <span data-ttu-id="1c1e6-162">Эта хранимая процедура позволяет задать параметру @stream_blob_columns значение `false`.</span><span class="sxs-lookup"><span data-stu-id="1c1e6-162">This stored procedure enables you to set @stream_blob_columns to `false`.</span></span> <span data-ttu-id="1c1e6-163">При добавлении столбца FILESTREAM в таблицу, уже опубликованную для репликации слиянием, значение `true` рекомендуется присвоить параметру при помощи хранимой процедуры sp_changemergearticle.</span><span class="sxs-lookup"><span data-stu-id="1c1e6-163">If you add a FILESTREAM column to a table that is already published for merge replication, we recommend that you set the option to `true` by using sp_changemergearticle.</span></span>  
  
-   <span data-ttu-id="1c1e6-164">Включение параметра схемы для FILESTREAM после создания статьи может привести к сбою репликации, если размер данных столбца FILESTREAM превышает 2 ГБ и если во время репликации возникает конфликт.</span><span class="sxs-lookup"><span data-stu-id="1c1e6-164">Enabling the schema option for FILESTREAM after an article is created can cause replication to fail if the data in a FILESTREAM column exceeds 2 GB and there is a conflict during replication.</span></span> <span data-ttu-id="1c1e6-165">Если возникновение данной ситуации не исключено, рекомендуется удалить и повторно создать статью таблицы с соответствующим параметром схемы FILESTREAM, включенным во время создания.</span><span class="sxs-lookup"><span data-stu-id="1c1e6-165">If you expect this situation to arise, it is recommended that you drop and re-create the table article with the appropriate FILESTREAM schema option enabled at creation time.</span></span>  
  
-   <span data-ttu-id="1c1e6-166">Репликация слиянием позволяет синхронизировать данные FILESTREAM во время HTTPS-соединения при помощи [веб-синхронизации](../replication/merge/merge-replication.md).</span><span class="sxs-lookup"><span data-stu-id="1c1e6-166">Merge replication can synchronize FILESTREAM data over an HTTPS connection by using [Web Synchronization](../replication/merge/merge-replication.md).</span></span> <span data-ttu-id="1c1e6-167">Размер этих данных не должен превышать ограничение в 50 МБ для веб-синхронизации, иначе возникнет ошибка выполнения.</span><span class="sxs-lookup"><span data-stu-id="1c1e6-167">This data cannot exceed the 50 MB limit for Web Synchronization; otherwise, a run-time error is generated.</span></span>  
  
##  <a name="log-shipping"></a><a name="LogShipping"></a> <span data-ttu-id="1c1e6-168">Доставка журналов</span><span class="sxs-lookup"><span data-stu-id="1c1e6-168">Log Shipping</span></span>  
 <span data-ttu-id="1c1e6-169">В[доставке журналов](../../database-engine/log-shipping/about-log-shipping-sql-server.md) предусмотрена поддержка FILESTREAM.</span><span class="sxs-lookup"><span data-stu-id="1c1e6-169">[Log shipping](../../database-engine/log-shipping/about-log-shipping-sql-server.md) supports FILESTREAM.</span></span> <span data-ttu-id="1c1e6-170">Как на сервере-источнике, так и на сервере-получателе должна быть запущена версия [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)]или более поздняя версия и должен быть включен параметр FILESTREAM.</span><span class="sxs-lookup"><span data-stu-id="1c1e6-170">Both the primary and secondary servers must be running [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)], or a later version, and have FILESTREAM enabled.</span></span>  
  
##  <a name="database-mirroring"></a><a name="DatabaseMirroring"></a> <span data-ttu-id="1c1e6-171">Зеркальное отображение базы данных</span><span class="sxs-lookup"><span data-stu-id="1c1e6-171">Database Mirroring</span></span>  
 <span data-ttu-id="1c1e6-172">Зеркальное отображение базы данных не поддерживает FILESTREAM.</span><span class="sxs-lookup"><span data-stu-id="1c1e6-172">Database mirroring does not support FILESTREAM.</span></span> <span data-ttu-id="1c1e6-173">Создание файловой группы FILESTREAM на основном сервере невозможно.</span><span class="sxs-lookup"><span data-stu-id="1c1e6-173">A FILESTREAM filegroup cannot be created on the principal server.</span></span> <span data-ttu-id="1c1e6-174">Настройка зеркального отображения для базы данных, содержащей файловые группы FILESTREAM, невозможна.</span><span class="sxs-lookup"><span data-stu-id="1c1e6-174">Database mirroring cannot be configured for a database that contains FILESTREAM filegroups.</span></span>  
  
##  <a name="full-text-indexing"></a><a name="FullText"></a> <span data-ttu-id="1c1e6-175">Полнотекстовое индексирование</span><span class="sxs-lookup"><span data-stu-id="1c1e6-175">Full-Text Indexing</span></span>  
 <span data-ttu-id="1c1e6-176">[Полнотекстовое индексирование](../indexes/indexes.md) работает со столбцом FILESTREAM так же, как и со `varbinary(max)` столбцом.</span><span class="sxs-lookup"><span data-stu-id="1c1e6-176">[Full-text indexing](../indexes/indexes.md) works with a FILESTREAM column in the same way that it does with a `varbinary(max)` column.</span></span> <span data-ttu-id="1c1e6-177">В таблице FILESTREAM должен присутствовать столбец, в котором содержится расширение имени файла для каждого блока больших двоичных объектов (BLOB) FILESTREAM.</span><span class="sxs-lookup"><span data-stu-id="1c1e6-177">The FILESTREAM table must have a column that contains the file name extension for each FILESTREAM BLOB.</span></span> <span data-ttu-id="1c1e6-178">Дополнительные сведения см. в статьях [Запрос с полнотекстовым поиском](../search/query-with-full-text-search.md), [Настройка и управление фильтрами для поиска](../search/configure-and-manage-filters-for-search.md) и [sys.fulltext_document_types (Transact-SQL)](/sql/relational-databases/system-catalog-views/sys-fulltext-document-types-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="1c1e6-178">For more information, see [Query with Full-Text Search](../search/query-with-full-text-search.md), [Configure and Manage Filters for Search](../search/configure-and-manage-filters-for-search.md), and [sys.fulltext_document_types &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-fulltext-document-types-transact-sql).</span></span>  
  
 <span data-ttu-id="1c1e6-179">Полнотекстовый поиск индексирует содержимое блоков больших двоичных объектов (BLOB) FILESTREAM.</span><span class="sxs-lookup"><span data-stu-id="1c1e6-179">The full-text engine indexes the contents of the FILESTREAM BLOBs.</span></span> <span data-ttu-id="1c1e6-180">Индексирование таких файлов, как изображения, может оказаться нецелесообразным.</span><span class="sxs-lookup"><span data-stu-id="1c1e6-180">Indexing files such as images might not be useful.</span></span> <span data-ttu-id="1c1e6-181">При обновлении блоков больших двоичных объектов (BLOB) FILESTREAM выполняется их повторное индексирование.</span><span class="sxs-lookup"><span data-stu-id="1c1e6-181">When a FILESTREAM BLOB is updated it is reindexed.</span></span>  
  
##  <a name="failover-clustering"></a><a name="FailoverClustering"></a> <span data-ttu-id="1c1e6-182">Отказоустойчивая кластеризация</span><span class="sxs-lookup"><span data-stu-id="1c1e6-182">Failover Clustering</span></span>  
 <span data-ttu-id="1c1e6-183">В целях отказоустойчивой кластеризации файловые группы FILESTREAM могут быть помещены на общий диск.</span><span class="sxs-lookup"><span data-stu-id="1c1e6-183">For failover clustering, FILESTREAM filegroups must be put on a shared disk.</span></span> <span data-ttu-id="1c1e6-184">Параметр FILESTREAM должен быть включен на каждом узле кластера, на котором будет размещен экземпляр FILESTREAM.</span><span class="sxs-lookup"><span data-stu-id="1c1e6-184">FILESTREAM must be enabled on each node in the cluster that will host the FILESTREAM instance.</span></span> <span data-ttu-id="1c1e6-185">Дополнительные сведения см. в статье [Установка FILESTREAM в отказоустойчивом кластере](set-up-filestream-on-a-failover-cluster.md).</span><span class="sxs-lookup"><span data-stu-id="1c1e6-185">For more information, see [Set Up FILESTREAM on a Failover Cluster](set-up-filestream-on-a-failover-cluster.md).</span></span>  
  
##  <a name="sql-server-express"></a><a name="SQLServerExpress"></a> <span data-ttu-id="1c1e6-186">SQL Server Express</span><span class="sxs-lookup"><span data-stu-id="1c1e6-186">SQL Server Express</span></span>  
 [!INCLUDE[ssExpress](../../includes/ssexpress-md.md)] <span data-ttu-id="1c1e6-187">предусмотрена поддержка FILESTREAM.</span><span class="sxs-lookup"><span data-stu-id="1c1e6-187">supports FILESTREAM.</span></span> <span data-ttu-id="1c1e6-188">Ограничение размера базы данных в 10 ГБ не включает контейнер данных FILESTREAM.</span><span class="sxs-lookup"><span data-stu-id="1c1e6-188">The 10-GB database size limit does not include the FILESTREAM data container.</span></span>  
  
##  <a name="contained-databases"></a><a name="contained"></a> <span data-ttu-id="1c1e6-189">Автономные базы данных</span><span class="sxs-lookup"><span data-stu-id="1c1e6-189">Contained Databases</span></span>  
 <span data-ttu-id="1c1e6-190">Для использования функции FILESTREAM требуется выполнение определенной настройки вне базы данных.</span><span class="sxs-lookup"><span data-stu-id="1c1e6-190">The FILESTREAM feature requires some configuration outside of the database.</span></span> <span data-ttu-id="1c1e6-191">Поэтому база данных, использующая FILESTREAM или FileTable, не является полностью автономной.</span><span class="sxs-lookup"><span data-stu-id="1c1e6-191">Therefore a database that uses FILESTREAM or FileTable is not fully contained.</span></span>  
  
 <span data-ttu-id="1c1e6-192">Для автономности базы данных можно установить значение PARTIAL при необходимости использовать некоторые функции автономных баз данных, например такие, как функция автономных пользователей.</span><span class="sxs-lookup"><span data-stu-id="1c1e6-192">You can set database containment to PARTIAL if you want to use certain features of contained databases, such as contained users.</span></span> <span data-ttu-id="1c1e6-193">В этом случае следует иметь в виду, что некоторые параметры базы данных не хранятся в самой базе данных и не перемещаются автоматически при перемещении базы данных.</span><span class="sxs-lookup"><span data-stu-id="1c1e6-193">In this case, however, you must be aware that some of the database settings are not contained in the database and are not automatically moved when the database moves.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="1c1e6-194">См. также:</span><span class="sxs-lookup"><span data-stu-id="1c1e6-194">See Also</span></span>  
 [<span data-ttu-id="1c1e6-195">Данные большого двоичного объекта (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="1c1e6-195">Binary Large Object &#40;Blob&#41; Data &#40;SQL Server&#41;</span></span>](binary-large-object-blob-data-sql-server.md)  
  
  
