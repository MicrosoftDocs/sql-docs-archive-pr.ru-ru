---
title: Создание точки управления служебной программой SQL Server (служебная программа SQL Server) | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: configuration
ms.topic: conceptual
f1_keywords:
- SQL12.SWB.create.ucp.progress.F1
- SQL12.SWB.create.ucp.welcome.F1
- SQL12.SWB.create.ucp.Summary.F1
- SQL12.SWB.create.ucp.validation.F1
- SQL12.SWB.create.ucp.instancename.F1
- SQL12.SWB.create.ucp.agentconfiguration.F1
helpviewer_keywords:
- Create UCP
- UCP
ms.assetid: d5335124-1625-47ce-b4ac-36078967158c
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 833c83868230c2ac05514db666bd4cab629d9588
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87656403"
---
# <a name="create-a-sql-server-utility-control-point-sql-server-utility"></a><span data-ttu-id="89c8f-102">создать точку управления служебной программы SQL Server (служебная программа SQL Server)</span><span class="sxs-lookup"><span data-stu-id="89c8f-102">Create a SQL Server Utility Control Point (SQL Server Utility)</span></span>
  <span data-ttu-id="89c8f-103">На предприятии может работать несколько служебных программ [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , при этом каждая служебная программа [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] может управлять несколькими экземплярами [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] и приложениями уровня данных.</span><span class="sxs-lookup"><span data-stu-id="89c8f-103">An enterprise can have multiple [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Utilities, and each [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Utility can manage many instances of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] and data-tier applications.</span></span> <span data-ttu-id="89c8f-104">У каждой служебной программы [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] имеется одна и только одна точка управления служебной программой (UCP).</span><span class="sxs-lookup"><span data-stu-id="89c8f-104">Every [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Utility has one and only one utility control point (UCP).</span></span> <span data-ttu-id="89c8f-105">Для каждой служебной программы [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] необходимо создать точку управления служебной программой.</span><span class="sxs-lookup"><span data-stu-id="89c8f-105">You must create a new UCP for each [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Utility.</span></span> <span data-ttu-id="89c8f-106">Каждый управляемый экземпляр [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] и каждый компонент приложения уровня данных относится только к одной служебной программе [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] и управляется одной точкой управления служебной программой.</span><span class="sxs-lookup"><span data-stu-id="89c8f-106">Each managed instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] and every data-tier application is a member of one and only one [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Utility, and is managed by a single UCP.</span></span>

 <span data-ttu-id="89c8f-107">Точка управления служебной программой выполняет сбор данных о конфигурации и производительности от управляемых экземпляров [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] каждые 15 минут.</span><span class="sxs-lookup"><span data-stu-id="89c8f-107">The UCP collects configuration and performance information from managed instances of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] every 15 minutes.</span></span> <span data-ttu-id="89c8f-108">Эти сведения хранятся в хранилище данных управления для программы (UMDW) в UCP, имя файла UMDW — sysutility_mdw.</span><span class="sxs-lookup"><span data-stu-id="89c8f-108">This information is stored in the utility management data warehouse (UMDW) on the UCP; the UMDW file name is sysutility_mdw.</span></span> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="89c8f-109">сравниваются с политиками с целью определения того, в каких местах отмечается нехватка ресурсов, а также возможностей консолидации.</span><span class="sxs-lookup"><span data-stu-id="89c8f-109">performance data is compared to policies to help identify resource use bottlenecks and consolidation opportunities.</span></span>

## <a name="before-you-begin"></a><span data-ttu-id="89c8f-110">Перед началом</span><span class="sxs-lookup"><span data-stu-id="89c8f-110">Before You Begin</span></span>
 <span data-ttu-id="89c8f-111">Перед созданием точки управления служебной программой ознакомьтесь со следующими требованиями и рекомендациями.</span><span class="sxs-lookup"><span data-stu-id="89c8f-111">Before you create a UCP, review the following requirements and recommendations.</span></span>

 <span data-ttu-id="89c8f-112">В этом выпуске точка управления служебной программой и все управляемые экземпляры [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] должны удовлетворять следующим требованиям.</span><span class="sxs-lookup"><span data-stu-id="89c8f-112">In this release, the UCP and all managed instances of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] must satisfy the following requirements:</span></span>

-   [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="89c8f-113">должна быть 10.50 или более поздняя.</span><span class="sxs-lookup"><span data-stu-id="89c8f-113">must be version 10.50 or higher.</span></span>

-   <span data-ttu-id="89c8f-114">Экземпляр [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] должен иметь тип компонента [!INCLUDE[ssDE](../../includes/ssde-md.md)].</span><span class="sxs-lookup"><span data-stu-id="89c8f-114">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance type must be [!INCLUDE[ssDE](../../includes/ssde-md.md)].</span></span>

-   <span data-ttu-id="89c8f-115">Служебная программа [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] должна работать в пределах одного домена Windows либо в нескольких доменах с двусторонними отношениями доверия.</span><span class="sxs-lookup"><span data-stu-id="89c8f-115">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Utility must operate within a single Windows domain, or across domains with two-way trust relationships.</span></span>

-   <span data-ttu-id="89c8f-116">Учетные записи службы [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] в точке управления служебной программой и все управляемые экземпляры SQL Server должны предоставлять разрешение на чтение для пользователей в Active Directory.</span><span class="sxs-lookup"><span data-stu-id="89c8f-116">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] service accounts on the UCP and all managed instances of SQL Server must have read permission to Users in Active Directory.</span></span>

 <span data-ttu-id="89c8f-117">В этом выпуске точка управления служебной программой должна удовлетворять следующим требованиям.</span><span class="sxs-lookup"><span data-stu-id="89c8f-117">In this release, the UCP must satisfy the following requirements:</span></span>

-   <span data-ttu-id="89c8f-118">Экземпляр [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] должен иметь поддерживаемый выпуск.</span><span class="sxs-lookup"><span data-stu-id="89c8f-118">The instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] must be a supported edition.</span></span> <span data-ttu-id="89c8f-119">Перечень функций, поддерживаемых в разных выпусках [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], см. в разделе [Features Supported by the Editions of SQL Server 2014](../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md).</span><span class="sxs-lookup"><span data-stu-id="89c8f-119">For a list of features that are supported by the editions of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], see [Features Supported by the Editions of SQL Server 2014](../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md).</span></span>

-   <span data-ttu-id="89c8f-120">Рекомендуется размещать точку управления служебной программой на экземпляре [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], учитывающем регистр.</span><span class="sxs-lookup"><span data-stu-id="89c8f-120">We recommend that the UCP is hosted by a case-sensitive instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>

 <span data-ttu-id="89c8f-121">Учтите приведенные ниже рекомендации по планированию ресурсных затрат для компьютера точки управления служебной программой.</span><span class="sxs-lookup"><span data-stu-id="89c8f-121">Consider the following recommendations for capacity planning on the UCP computer:</span></span>

-   <span data-ttu-id="89c8f-122">Обычно место на диске, используемое базой данных UMDW (sysutility_mdw) в точке управления служебной программой, равно примерно 2 ГБ на один управляемый экземпляр SQL Server в год.</span><span class="sxs-lookup"><span data-stu-id="89c8f-122">In a typical scenario, disk space used by the UMDW database (sysutility_mdw) on the UCP is approximately 2 GB per managed instance of SQL Server per year.</span></span> <span data-ttu-id="89c8f-123">Оценочные значения могут различаться в зависимости от количества баз данных и системных объектов, собираемых управляемым экземпляром.</span><span class="sxs-lookup"><span data-stu-id="89c8f-123">This estimate can vary depending on the number of database and system objects collected by the managed instance.</span></span> <span data-ttu-id="89c8f-124">Темпы увеличения места на диске, занимаемого sysutility_mdw, наиболее высоки в течение первых двух дней.</span><span class="sxs-lookup"><span data-stu-id="89c8f-124">The UMDW (sysutility_mdw) disk space growth rate is highest during the first two days.</span></span>

-   <span data-ttu-id="89c8f-125">Обычно место на диске, используемое базой данных msdb на пункте управления программой, равно примерно 20 МБ на один управляемый экземпляр [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="89c8f-125">In a typical scenario, disk space used by msdb on the UCP is approximately 20 MB per managed instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="89c8f-126">Обратите внимание, что оценочные значения могут различаться в зависимости от политик загрузки ресурсов, а также количества баз данных и системных объектов, собираемых управляемым экземпляром.</span><span class="sxs-lookup"><span data-stu-id="89c8f-126">Note that this estimate can vary depending on the resource utilization policies and the number of database and system objects collected by the managed instance.</span></span> <span data-ttu-id="89c8f-127">Как правило, место на диске используется более интенсивно по мере увеличения числа нарушений политики, а также по мере увеличения времени перемещения для непостоянных ресурсов.</span><span class="sxs-lookup"><span data-stu-id="89c8f-127">In general, disk space usage increases as the number of policy violations increases and the duration of the moving time window for volatile resources increases.</span></span>

-   <span data-ttu-id="89c8f-128">Обратите внимание, что удаление управляемого экземпляра из пункта управления программой не приведет к уменьшению объема места на диске, занимаемого базами данных UCP, до истечения сроков хранения данных в управляемом экземпляре.</span><span class="sxs-lookup"><span data-stu-id="89c8f-128">Note that removing a managed instance from the UCP will not reduce the disk space used by UCP databases until expiration of data retention periods for the managed instance.</span></span>

 <span data-ttu-id="89c8f-129">В этой версии все управляемые экземпляры [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] должны удовлетворять приведенным ниже требованиям.</span><span class="sxs-lookup"><span data-stu-id="89c8f-129">In this release, all managed instances of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] must satisfy the following requirements:</span></span>

-   <span data-ttu-id="89c8f-130">Если точка управления служебной программой находится на экземпляре [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]с учетом регистра, рекомендуется, чтобы на управляемых экземплярах [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] также учитывался регистр.</span><span class="sxs-lookup"><span data-stu-id="89c8f-130">We recommend that if the UCP is hosted by a case-insensitive instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], then managed instances of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] should also be case-insensitive.</span></span>

-   <span data-ttu-id="89c8f-131">Данные FILESTREAM не поддерживаются при наблюдении с помощью [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Utility.</span><span class="sxs-lookup"><span data-stu-id="89c8f-131">FILESTREAM data are not supported for [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Utility monitoring.</span></span>

 <span data-ttu-id="89c8f-132">Дополнительные сведения см. в статье [спецификации максимальной емкости для SQL Server](../../sql-server/maximum-capacity-specifications-for-sql-server.md) и [функций, поддерживаемых выпусками SQL Server 2014](../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md).</span><span class="sxs-lookup"><span data-stu-id="89c8f-132">For more information, see [Maximum Capacity Specifications for SQL Server](../../sql-server/maximum-capacity-specifications-for-sql-server.md) and [Features Supported by the Editions of SQL Server 2014](../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md).</span></span>

### <a name="remove-previous-utility-control-points-before-installing-a-new-one"></a><span data-ttu-id="89c8f-133">Удаление предыдущих точек управления служебной программой перед установкой новой точки</span><span class="sxs-lookup"><span data-stu-id="89c8f-133">Remove Previous Utility Control Points Before Installing a New One</span></span>
 <span data-ttu-id="89c8f-134">Если точка управления служебной программой устанавливается в экземпляре SQL Server, который когда-либо ранее был настроен в качестве точки управления служебной программой, то перед установкой новой точки необходимо удалить все управляемые экземпляры SQL Server и точку управления служебной программой.</span><span class="sxs-lookup"><span data-stu-id="89c8f-134">If you are installing a utility control point (UCP) on an instance of SQL Server that was ever configured as a UCP, you must remove all managed instances of SQL Server and remove the UCP before doing so.</span></span> <span data-ttu-id="89c8f-135">Для этого можно выполнить хранимую процедуру **sp_sysutility_ucp_remove** .</span><span class="sxs-lookup"><span data-stu-id="89c8f-135">You do this by running the **sp_sysutility_ucp_remove** stored procedure.</span></span>

 <span data-ttu-id="89c8f-136">Перед запуском процедуры ознакомьтесь со следующими требованиями.</span><span class="sxs-lookup"><span data-stu-id="89c8f-136">Before you run the procedure, note the following requirements:</span></span>

-   <span data-ttu-id="89c8f-137">Эта процедура должна запускаться на компьютере, являющемся точкой управления служебной программой.</span><span class="sxs-lookup"><span data-stu-id="89c8f-137">This procedure must be run on a computer that is a UCP.</span></span>

-   <span data-ttu-id="89c8f-138">Эта процедура должна выполняться пользователем, имеющим разрешения sysadmin, необходимые для создания точки управления служебной программой.</span><span class="sxs-lookup"><span data-stu-id="89c8f-138">This procedure must be run by a user with sysadmin permissions, the same permissions required to create a UCP.</span></span>

-   <span data-ttu-id="89c8f-139">Из точки управления служебной программой необходимо удалить все управляемые экземпляры SQL Server.</span><span class="sxs-lookup"><span data-stu-id="89c8f-139">All managed instances of SQL Server must be removed from the UCP.</span></span> <span data-ttu-id="89c8f-140">Заметьте, что сама точка управления также является управляемым экземпляром SQL Server.</span><span class="sxs-lookup"><span data-stu-id="89c8f-140">Note that the UCP is a managed instance of SQL Server.</span></span> <span data-ttu-id="89c8f-141">Дополнительные сведения см. в разделе [Как Удаление экземпляра SQL Server с помощью служебной программы SQL Server](https://go.microsoft.com/fwlink/?LinkId=169392).</span><span class="sxs-lookup"><span data-stu-id="89c8f-141">For more information, see [How to: Remove an Instance of SQL Server from the SQL Server Utility](https://go.microsoft.com/fwlink/?LinkId=169392).</span></span>

 <span data-ttu-id="89c8f-142">Эта процедура предназначена для удаления точки управления служебной программой SQL Server из служебной программы SQL Server.</span><span class="sxs-lookup"><span data-stu-id="89c8f-142">Use this procedure to remove a SQL Server UCP from the SQL Server Utility.</span></span> <span data-ttu-id="89c8f-143">После завершения операции в экземпляре SQL Server можно снова создать точку управления служебной программой.</span><span class="sxs-lookup"><span data-stu-id="89c8f-143">After the operation is complete, a UCP can be created on the instance of SQL Server again.</span></span>

 <span data-ttu-id="89c8f-144">Установите соединение с точкой управления служебной программой из среды SQL Server Management Studio, а затем выполните следующий скрипт:</span><span class="sxs-lookup"><span data-stu-id="89c8f-144">Use SQL Server Management Studio to connect to the UCP, then run this script:</span></span>

```sql
EXEC msdb.dbo.sp_sysutility_ucp_remove;
```

> [!NOTE]
>  <span data-ttu-id="89c8f-145">Если экземпляр SQL Server, удаленный из точки управления служебной программой, содержал набор элементов сбора данных, не относящийся к служебной программе, база данных sysutility_mdw не удаляется.</span><span class="sxs-lookup"><span data-stu-id="89c8f-145">If the instance of SQL Server where the UCP was removed has a non-Utility data collection set, the sysutility_mdw database is not dropped by the procedure.</span></span> <span data-ttu-id="89c8f-146">В этом случае перед повторным созданием точки управления служебной программой необходимо вручную удалить базу данных sysutility_mdw.</span><span class="sxs-lookup"><span data-stu-id="89c8f-146">If this is the case, the sysutility_mdw database must be dropped manually before the UCP can be created again.</span></span>

 <span data-ttu-id="89c8f-147">Каждый управляемый экземпляр [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] и каждый компонент приложения уровня данных относится только к одной служебной программе [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] и управляется одной точкой управления служебной программой.</span><span class="sxs-lookup"><span data-stu-id="89c8f-147">Each managed instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] and every data-tier application is a member of one and only one [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Utility, and is managed by a single UCP.</span></span> <span data-ttu-id="89c8f-148">Дополнительные сведения об основных понятиях служебной программы [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] см. в статье [Функции и задачи служебной программы SQL Server](sql-server-utility-features-and-tasks.md).</span><span class="sxs-lookup"><span data-stu-id="89c8f-148">For more information about [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Utility concepts, see [SQL Server Utility Features and Tasks](sql-server-utility-features-and-tasks.md).</span></span>

 <span data-ttu-id="89c8f-149">Точка управления служебной программой представляет собой централизованный логический центр для программы [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="89c8f-149">A UCP is the central reasoning point of the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Utility.</span></span> <span data-ttu-id="89c8f-150">С помощью точки управления служебной программой можно просматривать данные конфигурации и производительности, полученные от управляемых экземпляров [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] и приложений уровня данных [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , а также выполнять общие действия по планированию загрузки.</span><span class="sxs-lookup"><span data-stu-id="89c8f-150">Using the UCP, you can view configuration and performance information collected from managed instances of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] and [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] data-tier applications, and perform general capacity planning activities.</span></span> <span data-ttu-id="89c8f-151">Кроме того, точка управления служебной программой является отправной точкой для регистрации и удаления экземпляров [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] из программы [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="89c8f-151">The UCP is the launch point for enrolling and removing instances of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] from the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Utility.</span></span>

 <span data-ttu-id="89c8f-152">После регистрации экземпляров [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] в служебной программе [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] можно наблюдать за работоспособностью ресурсов в управляемых экземплярах [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] и приложениях уровня данных, что позволяет определить потенциальные возможности консолидации и выделить связанные с ресурсами узкие места.</span><span class="sxs-lookup"><span data-stu-id="89c8f-152">After enrolling instances of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] in the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Utility, you can monitor resource health for managed instances of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] and data-tier applications to identify consolidation opportunities and isolate resource bottlenecks.</span></span> <span data-ttu-id="89c8f-153">Дополнительные сведения см. в разделе [Наблюдение за экземплярами SQL Server в служебной программе SQL Server](monitor-instances-of-sql-server-in-the-sql-server-utility.md).</span><span class="sxs-lookup"><span data-stu-id="89c8f-153">For more information, see [Monitor Instances of SQL Server in the SQL Server Utility](monitor-instances-of-sql-server-in-the-sql-server-utility.md).</span></span>

> [!IMPORTANT]
>  <span data-ttu-id="89c8f-154">Набор элементов сбора служебной программы [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] поддерживается параллельно с наборами элементов сбора, не касающимися служебной программы [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="89c8f-154">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Utility collection set is supported side-by-side with non- [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Utility collection sets.</span></span> <span data-ttu-id="89c8f-155">Таким образом, управляемый экземпляр [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] можно наблюдать по другим наборам элементов сбора, поскольку он является элементом служебной программы [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="89c8f-155">That is, a managed instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] can be monitored by other collection sets while it is a member of a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Utility.</span></span> <span data-ttu-id="89c8f-156">Следует, однако, отметить, что все наборы элементов сбора, находящиеся в управляемом экземпляре, передают свои данные в хранилище данных управления служебной программы [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="89c8f-156">Note, however, that all collection sets on the managed instance will upload their data to the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Utility management data warehouse.</span></span> <span data-ttu-id="89c8f-157">Дополнительные сведения см. в разделах [Замечания по выполнению программы, не относящиеся к прочим наборам элементов сбора на том же экземпляре SQL Server](run-utility-and-non-utility-collection-sets-on-same-sql-instance.md) и [Настройка хранилища данных для точки управления служебной программой (служебная программа SQL Server)](configure-your-utility-control-point-data-warehouse-sql-server-utility.md).</span><span class="sxs-lookup"><span data-stu-id="89c8f-157">For more information, see [Considerations for Running Utility and non-Utility Collection Sets on the Same Instance of SQL Server](run-utility-and-non-utility-collection-sets-on-same-sql-instance.md) and [Configure Your Utility Control Point Data Warehouse &#40;SQL Server Utility&#41;](configure-your-utility-control-point-data-warehouse-sql-server-utility.md).</span></span>

## <a name="wizard-steps"></a><span data-ttu-id="89c8f-158">Шаги мастера</span><span class="sxs-lookup"><span data-stu-id="89c8f-158">Wizard Steps</span></span>
 ![](../../database-engine/media/create-ucp.gif "Create_UCP")

 <span data-ttu-id="89c8f-159">В следующих разделах содержатся сведения о каждой странице потока операций мастера по созданию нового пункта управления программой [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="89c8f-159">The following sections provide information about each page in the wizard work flow to create a new [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] UCP.</span></span> <span data-ttu-id="89c8f-160">Чтобы запустить мастер для создания новой точки управления служебной программой (UCP), откройте область проводника служебной программы из меню "Вид" в SSMS, затем нажмите кнопку ![](../../database-engine/media/create-ucp.gif "Create_UCP") **Создать UCP** в верхней части области проводника служебной программы.</span><span class="sxs-lookup"><span data-stu-id="89c8f-160">To launch the wizard to create a new UCP, open the Utility Explorer pane from the View menu in SSMS, then click on the ![](../../database-engine/media/create-ucp.gif "Create_UCP") **Create UCP** button at the top of the Utility Explorer pane.</span></span>

 <span data-ttu-id="89c8f-161">Щелкните ссылку в следующем списке, чтобы открыть в мастере подробные сведения для страницы.</span><span class="sxs-lookup"><span data-stu-id="89c8f-161">Click on a link in the list below to navigate to details for a page in the Wizard.</span></span>

 <span data-ttu-id="89c8f-162">Дополнительные сведения о скрипте PowerShell этой операции см. в [примере](#PowerShell_create_UCP).</span><span class="sxs-lookup"><span data-stu-id="89c8f-162">For more information about a PowerShell script of this operation, see the [example](#PowerShell_create_UCP).</span></span>

-   [<span data-ttu-id="89c8f-163">Общие сведения о мастере создания UCP</span><span class="sxs-lookup"><span data-stu-id="89c8f-163">Introduction to Create UCP Wizard</span></span>](#Welcome)

-   [<span data-ttu-id="89c8f-164">Укажите экземпляр</span><span class="sxs-lookup"><span data-stu-id="89c8f-164">Specify Instance</span></span>](#Instance_name)

-   [<span data-ttu-id="89c8f-165">Диалоговое окно соединения</span><span class="sxs-lookup"><span data-stu-id="89c8f-165">Connection Dialog</span></span>](#Connection_dialog)

-   [<span data-ttu-id="89c8f-166">Учетная запись набора элементов сбора служебной программы</span><span class="sxs-lookup"><span data-stu-id="89c8f-166">Utility Collection Set Account</span></span>](#Agent_configuration)

-   [<span data-ttu-id="89c8f-167">Правила проверки</span><span class="sxs-lookup"><span data-stu-id="89c8f-167">Validation Rules</span></span>](#Validation_rules)

-   [<span data-ttu-id="89c8f-168">Сводка</span><span class="sxs-lookup"><span data-stu-id="89c8f-168">Summary</span></span>](#Summary)

-   [<span data-ttu-id="89c8f-169">Создание пункта управления программой</span><span class="sxs-lookup"><span data-stu-id="89c8f-169">Creating the Utility Control Point</span></span>](#Creating_UCP)

##  <a name="introduction-to-create-ucp-wizard"></a><a name="Welcome"></a> <span data-ttu-id="89c8f-170">Общие сведения о мастере создания UCP</span><span class="sxs-lookup"><span data-stu-id="89c8f-170">Introduction to Create UCP Wizard</span></span>
 <span data-ttu-id="89c8f-171">Если при открытии обозревателя программ нет ни одного пункта управления программой, необходимо установить соединение с таким пунктом или создать новый пункт.</span><span class="sxs-lookup"><span data-stu-id="89c8f-171">If you open Utility Explorer and there is no connected utility control point, you must connect to one or create a new one.</span></span>

 <span data-ttu-id="89c8f-172">**Connect to existing UCP** (Подключиться к существующей UCP). Если в системе уже есть точка управления служебной программой (UCP), можно установить соединение с ней, нажав кнопку ![](../../database-engine/media/connect-to-utility.gif "Connect_to_Utility")**Соединение со служебной программой** в верхней части области проводника служебной программы.</span><span class="sxs-lookup"><span data-stu-id="89c8f-172">**Connect to existing UCP** - If there is already a utility control point in your deployment, you can connect to it by clicking the ![](../../database-engine/media/connect-to-utility.gif "Connect_to_Utility")**Connect to Utility** button at the top of the Utility Explorer pane.</span></span> <span data-ttu-id="89c8f-173">Чтобы установить соединение с существующей точкой управления служебной программой, необходимо иметь учетные данные администратора или быть членом роли чтения данных служебной программы.</span><span class="sxs-lookup"><span data-stu-id="89c8f-173">To connect to an existing UCP, you must have administrator credentials or be a member of the Utility Reader role.</span></span> <span data-ttu-id="89c8f-174">Обратите внимание, что у каждой служебной программы [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] может быть только одна точка управления служебной программой, а с экземпляра SSMS можно подключиться только к одной точке управления служебной программой.</span><span class="sxs-lookup"><span data-stu-id="89c8f-174">Note that there can only be one UCP per [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Utility and you can only be connected to one UCP from an instance of SSMS.</span></span>

 <span data-ttu-id="89c8f-175">**Create a new UCP** (Создать новую UCP). Чтобы создать новую точку управления служебной программой, нажмите кнопку ![](../../database-engine/media/create-ucp.gif "Create_UCP")**Create UCP** (Создать UCP) вверху панели проводника служебной программы.</span><span class="sxs-lookup"><span data-stu-id="89c8f-175">**Create a new UCP** - To create a new utility control point, click the ![](../../database-engine/media/create-ucp.gif "Create_UCP")**Create UCP** button at the top of the Utility Explorer pane.</span></span> <span data-ttu-id="89c8f-176">Чтобы создать новую точку управления служебной программой, в диалоговом окне соединения необходимо указать имя экземпляра [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] и учетные данные администратора.</span><span class="sxs-lookup"><span data-stu-id="89c8f-176">To create a new UCP, you must specify the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance name and provide administrator credentials in the connection dialog.</span></span> <span data-ttu-id="89c8f-177">Обратите внимание, что на дну служебную программу [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] может приходиться только одна точка управления служебной программой.</span><span class="sxs-lookup"><span data-stu-id="89c8f-177">Note that there can only be one UCP per [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Utility.</span></span>

##  <a name="specify-instance"></a><a name="Instance_name"></a> <span data-ttu-id="89c8f-178">Укажите экземпляр</span><span class="sxs-lookup"><span data-stu-id="89c8f-178">Specify Instance</span></span>
 <span data-ttu-id="89c8f-179">Укажите следующие сведения для создаваемого UCP.</span><span class="sxs-lookup"><span data-stu-id="89c8f-179">Specify the following information about the UCP you are creating:</span></span>

-   <span data-ttu-id="89c8f-180">**Имя экземпляра**. Чтобы выбрать экземпляр [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] из диалогового окна соединения, щелкните **Подключить…** . Введите имя компьютера и имя экземпляра [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] в формате "имя_компьютера\имя_экземпляра".</span><span class="sxs-lookup"><span data-stu-id="89c8f-180">**Instance Name** - To select an instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] from the connection dialog, click **Connect...**. Provide the computer name and the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance name in the format ComputerName\InstanceName.</span></span>

-   <span data-ttu-id="89c8f-181">**Имя программы.** Укажите имя, которое будет использоваться для обозначения служебной программы [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] в сети.</span><span class="sxs-lookup"><span data-stu-id="89c8f-181">**Utility Name** - Specify a name that will be used to identify the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Utility on the network.</span></span>

 <span data-ttu-id="89c8f-182">Чтобы продолжить, нажмите кнопку **Далее**.</span><span class="sxs-lookup"><span data-stu-id="89c8f-182">To continue, click **Next**.</span></span>

##  <a name="connection-dialog"></a><a name="Connection_dialog"></a> <span data-ttu-id="89c8f-183">Диалоговое окно подключения</span><span class="sxs-lookup"><span data-stu-id="89c8f-183">Connection Dialog</span></span>
 <span data-ttu-id="89c8f-184">Проверьте в диалоговом окне «Соединение с сервером» тип сервера, имя компьютера и сведения обо имени экземпляра [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="89c8f-184">On the Connect to Server dialog box, verify the server type, computer name, and [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance name information.</span></span> <span data-ttu-id="89c8f-185">Дополнительные сведения см. в статье [Соединение с сервером (компонент Database Engine)](../../ssms/f1-help/connect-to-server-database-engine.md).</span><span class="sxs-lookup"><span data-stu-id="89c8f-185">For more information, see [Connect to Server &#40;Database Engine&#41;](../../ssms/f1-help/connect-to-server-database-engine.md).</span></span>

> [!NOTE]
>  <span data-ttu-id="89c8f-186">Если соединение является зашифрованных, то будет использоваться это соединение.</span><span class="sxs-lookup"><span data-stu-id="89c8f-186">If the connection is encrypted, the encrypted connection will be used.</span></span> <span data-ttu-id="89c8f-187">Если же соединение не зашифровано, программа [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] установит новое зашифрованное соединение.</span><span class="sxs-lookup"><span data-stu-id="89c8f-187">If the connection is not encrypted, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Utility will reconnect using an encrypted connection.</span></span>

 <span data-ttu-id="89c8f-188">Для продолжения нажмите кнопку **Подключить...** .</span><span class="sxs-lookup"><span data-stu-id="89c8f-188">To continue, click **Connect...**.</span></span>

##  <a name="utility-collection-set-account"></a><a name="Agent_configuration"></a> <span data-ttu-id="89c8f-189">Учетная запись набора элементов сбора служебной программы</span><span class="sxs-lookup"><span data-stu-id="89c8f-189">Utility Collection Set Account</span></span>
 <span data-ttu-id="89c8f-190">Укажите учетную запись домена Windows для выполнения набора элементов сбора служебной программы [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="89c8f-190">Specify a Windows domain account to run the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Utility collection set.</span></span> <span data-ttu-id="89c8f-191">Эта учетная запись используется как учетная запись-посредник агента [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] для набора элементов сбора служебной программы [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="89c8f-191">This account is used as the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent proxy account for the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Utility collection set.</span></span> <span data-ttu-id="89c8f-192">Можно также использовать имеющуюся служебную учетную запись службы агента [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="89c8f-192">Alternatively, you can use the existing [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent service account.</span></span> <span data-ttu-id="89c8f-193">Чтобы требования проверки были удовлетворены, следуйте приведенным ниже рекомендациям по настройке учетной записи.</span><span class="sxs-lookup"><span data-stu-id="89c8f-193">To pass validation requirements, use the following guidelines to specify the account.</span></span>

 <span data-ttu-id="89c8f-194">Если выбран вариант со служебной учетной записью службы агента [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] :</span><span class="sxs-lookup"><span data-stu-id="89c8f-194">If you specify the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent service account option:</span></span>

-   <span data-ttu-id="89c8f-195">Служебная учетная запись службы агента [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] не должна быть встроенной учетной записью домена Windows (например, LocalSystem, NetworkService или LocalService).</span><span class="sxs-lookup"><span data-stu-id="89c8f-195">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent service account must be a Windows domain account that is not a built-in account like LocalSystem, NetworkService, or LocalService.</span></span>

 <span data-ttu-id="89c8f-196">Чтобы продолжить, нажмите кнопку **Далее**.</span><span class="sxs-lookup"><span data-stu-id="89c8f-196">To continue, click **Next**.</span></span>

##  <a name="validation-rules"></a><a name="Validation_rules"></a> <span data-ttu-id="89c8f-197">Правила проверки</span><span class="sxs-lookup"><span data-stu-id="89c8f-197">Validation Rules</span></span>
 <span data-ttu-id="89c8f-198">В этой версии [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]для экземпляра [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , на котором будет создана точка управления служебной программой, должны быть истинны следующие условия.</span><span class="sxs-lookup"><span data-stu-id="89c8f-198">In this release of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], the following conditions must be true on the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] where the UCP will be created:</span></span>

|<span data-ttu-id="89c8f-199">Правило проверки</span><span class="sxs-lookup"><span data-stu-id="89c8f-199">Validation rule</span></span>|<span data-ttu-id="89c8f-200">Действие по исправлению</span><span class="sxs-lookup"><span data-stu-id="89c8f-200">Corrective action</span></span>|
|---------------------|-----------------------|
|<span data-ttu-id="89c8f-201">Пользователь должен обладать правами администратора на экземпляре [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , на котором будет создана точка управления служебной программой.</span><span class="sxs-lookup"><span data-stu-id="89c8f-201">You must have administrator privileges on the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] where the utility control point will be created.</span></span>|<span data-ttu-id="89c8f-202">Войдите в систему под учетной записью с правами администратора для экземпляра [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="89c8f-202">Log on with an account that has administrator privileges on the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>|
|<span data-ttu-id="89c8f-203">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] должен иметь версию 10.50 или более позднюю.</span><span class="sxs-lookup"><span data-stu-id="89c8f-203">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] version must be 10.50 or higher.</span></span>|<span data-ttu-id="89c8f-204">Укажите другой экземпляр [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] для размещения точки управления служебной программой.</span><span class="sxs-lookup"><span data-stu-id="89c8f-204">Specify a different instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] to host the UCP.</span></span>|
|<span data-ttu-id="89c8f-205">Экземпляр [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] должен иметь поддерживаемый выпуск.</span><span class="sxs-lookup"><span data-stu-id="89c8f-205">The instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] must be a supported edition.</span></span> <span data-ttu-id="89c8f-206">Перечень функций, поддерживаемых в разных выпусках [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], см. в разделе [Features Supported by the Editions of SQL Server 2014](../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md).</span><span class="sxs-lookup"><span data-stu-id="89c8f-206">For a list of features that are supported by the editions of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], see [Features Supported by the Editions of SQL Server 2014](../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md).</span></span>|<span data-ttu-id="89c8f-207">Укажите другой экземпляр [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] для размещения точки управления служебной программой.</span><span class="sxs-lookup"><span data-stu-id="89c8f-207">Specify a different instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] to host the UCP.</span></span>|
|<span data-ttu-id="89c8f-208">Экземпляр [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] не может быть экземпляром [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , зарегистрированным в какой-либо другой точке управления служебной программой [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="89c8f-208">The instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] must not be an instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] enrolled with any other [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] UCP.</span></span>|<span data-ttu-id="89c8f-209">Укажите другой экземпляр [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] для размещения точки управления служебной программой, или удалите регистрацию экземпляра [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] в точке управления служебной программой, в котором этот экземпляр в данный момент является управляемым экземпляром [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="89c8f-209">Specify a different instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] to host the UCP, or unenroll the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] from the UCP where it is currently a managed instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>|
|<span data-ttu-id="89c8f-210">На экземпляре [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] не должна быть уже размещена точка управления служебной программой.</span><span class="sxs-lookup"><span data-stu-id="89c8f-210">The instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] cannot already be host to a utility control point.</span></span>|<span data-ttu-id="89c8f-211">Укажите другой экземпляр [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] для размещения точки управления служебной программой.</span><span class="sxs-lookup"><span data-stu-id="89c8f-211">Specify a different instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] to host the UCP.</span></span>|
|<span data-ttu-id="89c8f-212">На указанном экземпляре [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] должна быть включена поддержка TCP/IP.</span><span class="sxs-lookup"><span data-stu-id="89c8f-212">The specified instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] should have TCP/IP enabled.</span></span>|<span data-ttu-id="89c8f-213">Включите поддержку TCP/IP для указанного экземпляра [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="89c8f-213">Enable TCP/IP for the specified instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>|
|<span data-ttu-id="89c8f-214">Экземпляр [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] не может иметь базу данных с именем sysutility_mdw.</span><span class="sxs-lookup"><span data-stu-id="89c8f-214">The instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] cannot have a database named "sysutility_mdw."</span></span>|<span data-ttu-id="89c8f-215">При выполнении операции создания точки управления служебной программой формируется хранилище данных управления программы (UMDW) под именем «sysutility_mdw».</span><span class="sxs-lookup"><span data-stu-id="89c8f-215">The create UCP operation will create a utility management data warehouse (UMDW) named "sysutility_mdw."</span></span> <span data-ttu-id="89c8f-216">Для выполнения этой операции требуется, чтобы имя не существовало на компьютере в момент выполнения правил проверки.</span><span class="sxs-lookup"><span data-stu-id="89c8f-216">The operation requires that the name does not exist on the computer at the time that validation rules are run.</span></span> <span data-ttu-id="89c8f-217">Для продолжения необходимо удалить или переименовать любую базу данных с именем «sysutility_mdw».</span><span class="sxs-lookup"><span data-stu-id="89c8f-217">To continue, you must remove or rename any database named "sysutility_mdw."</span></span> <span data-ttu-id="89c8f-218">Дополнительные сведения об операциях переименования см. в разделе [ALTER DATABASE &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-database-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="89c8f-218">For more information about renaming operations, see [ALTER DATABASE &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-database-transact-sql).</span></span>|
|<span data-ttu-id="89c8f-219">Наборы элементов сбора на указанном экземпляре [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] должны быть остановлены.</span><span class="sxs-lookup"><span data-stu-id="89c8f-219">Collection sets on the specified instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] must be stopped.</span></span>|<span data-ttu-id="89c8f-220">Остановите работу существующих наборов элементов сбора на время создания UCP на указанном экземпляре [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="89c8f-220">Stop pre-existing collection sets while the UCP is created on the specified instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="89c8f-221">Если сборщик данных отключен, включите его, остановите все работающие наборы элементов сбора, а затем снова запустите правила проверки для операции создания точки управления служебной программой.</span><span class="sxs-lookup"><span data-stu-id="89c8f-221">If the data collector is disabled, enable it, stop any running collection sets, then re-run validation rules for the Create UCP operation.</span></span><br /><br /> <span data-ttu-id="89c8f-222">Включение сборщика данных:</span><span class="sxs-lookup"><span data-stu-id="89c8f-222">To enable the data collector:</span></span><br /><br /> <span data-ttu-id="89c8f-223">В обозревателе объектов раскройте узел **Управление** .</span><span class="sxs-lookup"><span data-stu-id="89c8f-223">In Object Explorer, expand the **Management** node.</span></span><br /><br /> <span data-ttu-id="89c8f-224">Щелкните правой кнопкой мыши **Сбор данных**, затем выберите **Включить сбор данных**.</span><span class="sxs-lookup"><span data-stu-id="89c8f-224">Right-click **Data Collection**, and then click **Enable Data Collection**.</span></span><br /><br /> <span data-ttu-id="89c8f-225">Остановка набора элементов сбора:</span><span class="sxs-lookup"><span data-stu-id="89c8f-225">To stop a collection set:</span></span><br /><br /> <span data-ttu-id="89c8f-226">В обозревателе объектов разверните узел **Управление**, затем узел **Сбор данных**и узел &lt;ui&gt;Наборы элементов сбора системных данных&lt;/ui&gt;.</span><span class="sxs-lookup"><span data-stu-id="89c8f-226">In Object Explorer, expand the Management node, expand **Data Collection**, and then expand **System Data Collection Sets**.</span></span><br /><br /> <span data-ttu-id="89c8f-227">Щелкните правой кнопкой мыши набор элементов сбора, который необходимо остановить, и выберите команду **Остановить набор сбора данных**.</span><span class="sxs-lookup"><span data-stu-id="89c8f-227">Right-click the collection set that you want to stop, and then click **Stop Data Collection Set**.</span></span><br /><br /> <span data-ttu-id="89c8f-228">Результат этого действия будет отображен в окне сообщения, а красный круг на значке набора элементов сбора означает его остановку.</span><span class="sxs-lookup"><span data-stu-id="89c8f-228">A message box will display the result of this action, and a red circle on the icon for the collection set indicates that the collection set has stopped.</span></span>|
|<span data-ttu-id="89c8f-229">Служба агента [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] должна быть запущена на указанном экземпляре.</span><span class="sxs-lookup"><span data-stu-id="89c8f-229">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent service on the specified instance must be started.</span></span> <span data-ttu-id="89c8f-230">Если указанный экземпляр [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] является экземпляром отказоустойчивого кластера [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , то необходимо настроить ручной запуск службы агента [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="89c8f-230">If the specified instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] is a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] failover cluster instance, the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent service must be configured to start manually.</span></span> <span data-ttu-id="89c8f-231">В противном случае следует настроить автоматический запуск службы агента [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="89c8f-231">Otherwise, the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent service must be configured to start automatically.</span></span>|<span data-ttu-id="89c8f-232">Запустите службу агента [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="89c8f-232">Start the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent service.</span></span> <span data-ttu-id="89c8f-233">Если указанный экземпляр [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] является экземпляром отказоустойчивого кластера [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , настройте ручной запуск службы агента [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="89c8f-233">If the specified instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] is a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] failover cluster instance, configure the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent service to start manually.</span></span> <span data-ttu-id="89c8f-234">В противном случае настройте автоматический запуск службы агента [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="89c8f-234">Otherwise, configure the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent service to start automatically.</span></span>|
|<span data-ttu-id="89c8f-235">WMI должна быть правильно настроена.</span><span class="sxs-lookup"><span data-stu-id="89c8f-235">WMI must be configured correctly.</span></span>|<span data-ttu-id="89c8f-236">Сведения об устранении неполадок настройки WMI см. в статье [Устранение неполадок служебной программы SQL Server](../../database-engine/troubleshoot-the-sql-server-utility.md).</span><span class="sxs-lookup"><span data-stu-id="89c8f-236">To troubleshoot WMI configuration, see [Troubleshoot the SQL Server Utility](../../database-engine/troubleshoot-the-sql-server-utility.md).</span></span>|
|<span data-ttu-id="89c8f-237">Учетная запись-посредник агента [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] не может быть встроенной учетной записью, например записью "Сетевая служба".</span><span class="sxs-lookup"><span data-stu-id="89c8f-237">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent proxy account cannot be a built-in account, like Network Service.</span></span>|<span data-ttu-id="89c8f-238">Если учетная запись-посредник агента [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] является встроенной, например записью "Сетевая служба", следует выполнить переназначение учетной записи, указав учетную запись домена Windows, то есть запись sysadmin.</span><span class="sxs-lookup"><span data-stu-id="89c8f-238">If the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent proxy account is a built-in account, like Network Service, re-assign the account to a Windows domain account that is sysadmin.</span></span>|
|<span data-ttu-id="89c8f-239">Если установлен параметр учетной записи-посредника, то учетная запись-посредник агента [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] должна быть допустимой учетной записью домена Windows.</span><span class="sxs-lookup"><span data-stu-id="89c8f-239">If you select the proxy account option, the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent proxy account must be a valid Windows domain account.</span></span>|<span data-ttu-id="89c8f-240">Укажите допустимую учетную запись домена Windows.</span><span class="sxs-lookup"><span data-stu-id="89c8f-240">Specify a valid Windows domain account.</span></span> <span data-ttu-id="89c8f-241">Чтобы проверить допустимость учетной записи, войдите на указанный экземпляр [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] с помощью этой учетной записи домена Windows.</span><span class="sxs-lookup"><span data-stu-id="89c8f-241">To ensure that the account is valid, logon to the specified instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] using the Windows domain account.</span></span>|
|<span data-ttu-id="89c8f-242">Если выбирается учетная запись службы, то учетная запись службы агента [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] не может быть встроенной учетной записью, такой как учетная запись "Сетевая служба".</span><span class="sxs-lookup"><span data-stu-id="89c8f-242">If you select the service account option, the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent service account cannot be a built-in account, like Network Service.</span></span>|<span data-ttu-id="89c8f-243">Если учетная запись службы агента [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] является встроенной, например учетной записью "Сетевая служба", следует выполнить переназначение учетной записи, указав учетную запись домена Windows.</span><span class="sxs-lookup"><span data-stu-id="89c8f-243">If the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent service account is a built-in account, like Network Service, re-assign the account to a Windows domain account.</span></span>|
|<span data-ttu-id="89c8f-244">Если выбрана учетная запись службы, то учетная запись службы агента [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] должна быть допустимой учетной записью домена Windows.</span><span class="sxs-lookup"><span data-stu-id="89c8f-244">If you select the service account option, the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent service account must be a valid Windows domain account.</span></span>|<span data-ttu-id="89c8f-245">Укажите допустимую учетную запись домена Windows.</span><span class="sxs-lookup"><span data-stu-id="89c8f-245">Specify a valid Windows domain account.</span></span> <span data-ttu-id="89c8f-246">Чтобы проверить допустимость учетной записи, войдите на указанный экземпляр [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] с помощью этой учетной записи домена Windows.</span><span class="sxs-lookup"><span data-stu-id="89c8f-246">To ensure that the account is valid, logon to the specified instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] using the Windows domain account.</span></span>|

 <span data-ttu-id="89c8f-247">Если результаты проверки содержат невыполненные условия, устраните критические препятствия и нажмите кнопку **Повторная проверка** , чтобы проверить конфигурацию компьютера.</span><span class="sxs-lookup"><span data-stu-id="89c8f-247">If there are failed conditions in the validation results, correct the blocking issues and then click **Rerun Validation** to verify the computer configuration.</span></span>

 <span data-ttu-id="89c8f-248">Чтобы сохранить отчет о проверке, нажмите кнопку **Сохранить отчет** и укажите расположение для файла.</span><span class="sxs-lookup"><span data-stu-id="89c8f-248">To save the validation report, click **Save Report** then specify a location for the file.</span></span>

 <span data-ttu-id="89c8f-249">Чтобы продолжить, нажмите кнопку **Далее**.</span><span class="sxs-lookup"><span data-stu-id="89c8f-249">To continue, click **Next**.</span></span>

##  <a name="summary"></a><a name="Summary"></a> <span data-ttu-id="89c8f-250">Сводка</span><span class="sxs-lookup"><span data-stu-id="89c8f-250">Summary</span></span>
 <span data-ttu-id="89c8f-251">На странице сводных данных отображаются указанные сведения о UCP.</span><span class="sxs-lookup"><span data-stu-id="89c8f-251">The summary page displays the information that you provided about the UCP:</span></span>

-   <span data-ttu-id="89c8f-252">Имя экземпляра [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , на котором размещена точка управления служебной программой.</span><span class="sxs-lookup"><span data-stu-id="89c8f-252">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance name that hosts the UCP.</span></span>

-   <span data-ttu-id="89c8f-253">Имя программы [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="89c8f-253">The name of the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Utility.</span></span>

-   <span data-ttu-id="89c8f-254">Имя учетной записи, которая будет использоваться для выполнения заданий по сбору данных программой [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="89c8f-254">The name of the account that will be used to run jobs for [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Utility data collection.</span></span>

 <span data-ttu-id="89c8f-255">Чтобы изменить параметры конфигурации UCP, нажмите кнопку **Назад**.</span><span class="sxs-lookup"><span data-stu-id="89c8f-255">To change UCP configuration settings, click **Previous**.</span></span> <span data-ttu-id="89c8f-256">Чтобы продолжить, нажмите кнопку **Далее**.</span><span class="sxs-lookup"><span data-stu-id="89c8f-256">To continue, click **Next**.</span></span>

##  <a name="creating-the-utility-control-point"></a><a name="Creating_UCP"></a> <span data-ttu-id="89c8f-257">Создание пункта управления программой</span><span class="sxs-lookup"><span data-stu-id="89c8f-257">Creating the Utility Control Point</span></span>
 <span data-ttu-id="89c8f-258">Во время операции создания UCP мастер отображает шаги и приводит данные о состоянии.</span><span class="sxs-lookup"><span data-stu-id="89c8f-258">During the operation to create the UCP, the wizard will display the steps and provide status:</span></span>

-   <span data-ttu-id="89c8f-259">Подготовка экземпляра [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] к созданию точки управления служебной программой.</span><span class="sxs-lookup"><span data-stu-id="89c8f-259">Preparing the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance for UCP creation.</span></span>

-   <span data-ttu-id="89c8f-260">Создание хранилища данных управления программы (UMDW).</span><span class="sxs-lookup"><span data-stu-id="89c8f-260">Creating the utility management data warehouse (UMDW).</span></span>

-   <span data-ttu-id="89c8f-261">Инициализация [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] UMDW. Имя файла UMDW — sysutility_mdw.</span><span class="sxs-lookup"><span data-stu-id="89c8f-261">Initializing the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] UMDW; the UMDW file name is sysutility_mdw.</span></span>

-   <span data-ttu-id="89c8f-262">Настройка точки управления служебной программой.</span><span class="sxs-lookup"><span data-stu-id="89c8f-262">Configuring the UCP.</span></span>

-   <span data-ttu-id="89c8f-263">Настройка набора элементов сбора служебной программы [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="89c8f-263">Configuring the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Utility collection set.</span></span>

 <span data-ttu-id="89c8f-264">Чтобы сохранить отчет об операции создания UCP, нажмите кнопку **Сохранить отчет** и укажите расположение для файла.</span><span class="sxs-lookup"><span data-stu-id="89c8f-264">To save a report about the create UCP operation, click **Save Report** then specify a location for the file.</span></span>

 <span data-ttu-id="89c8f-265">Чтобы завершить работу мастера, нажмите кнопку **Готово**.</span><span class="sxs-lookup"><span data-stu-id="89c8f-265">To complete the wizard, click **Finish**.</span></span>

 <span data-ttu-id="89c8f-266">По завершении работы мастера создания UCP на панели навигации обозревателя программы в среде SSMS появится узел этого UCP с подузлами для приложений уровня данных, управляемых экземпляров и администрирования программы.</span><span class="sxs-lookup"><span data-stu-id="89c8f-266">After completing the Create UCP Wizard, the Utility Explorer navigation pane in SSMS displays a node for the UCP with nodes under it for Deployed Data-tier Applications, Managed Instances, and Utility Administration.</span></span> <span data-ttu-id="89c8f-267">UCP автоматически становится управляемым экземпляром.</span><span class="sxs-lookup"><span data-stu-id="89c8f-267">The UCP automatically becomes a managed instance.</span></span>

 <span data-ttu-id="89c8f-268">Процесс сбора данных начнется сразу, однако до появления первых сведений на панели и в точках обзора на панели мониторинга содержимого проводника служебной программы может пройти до 30 минут.</span><span class="sxs-lookup"><span data-stu-id="89c8f-268">The data collection process begins immediately, but it can take up to 30 minutes for data to first appear in the dashboard and viewpoints in the Utility Explorer content pane.</span></span> <span data-ttu-id="89c8f-269">Сбор данных выполняется каждые 15 минут.</span><span class="sxs-lookup"><span data-stu-id="89c8f-269">Data collection continues once every 15 minutes.</span></span> <span data-ttu-id="89c8f-270">Исходные данные поступят с самого UCP.</span><span class="sxs-lookup"><span data-stu-id="89c8f-270">Initial data will be from the UCP itself.</span></span> <span data-ttu-id="89c8f-271">Другими словами, точка управления служебной программой является первым управляемым экземпляром [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] в программе [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="89c8f-271">That is, the UCP is the first managed instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] in the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Utility.</span></span>

 <span data-ttu-id="89c8f-272">Чтобы отобразить панель мониторинга, в меню среды SSMS выберите **Вид** , а затем **Содержимое обозревателя программ** .</span><span class="sxs-lookup"><span data-stu-id="89c8f-272">To display the dashboard, click **View** then select **Utility Explorer Content** from the SSMS menu.</span></span> <span data-ttu-id="89c8f-273">Чтобы обновить данные, щелкните правой кнопкой мыши имя программы на панели проводника служебной программы и выберите команду **Обновить**.</span><span class="sxs-lookup"><span data-stu-id="89c8f-273">To refresh data, right-click the utility name in the Utility Explorer pane, then select **Refresh**.</span></span>

 <span data-ttu-id="89c8f-274">Дополнительные сведения о регистрации дополнительных экземпляров [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] в служебной программе [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] см. в разделе [Регистрация экземпляра SQL Server &#40;служебная программа SQL Server&#41;](enroll-an-instance-of-sql-server-sql-server-utility.md).</span><span class="sxs-lookup"><span data-stu-id="89c8f-274">For more information about how to enroll additional instances of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] into the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Utility, see [Enroll an Instance of SQL Server &#40;SQL Server Utility&#41;](enroll-an-instance-of-sql-server-sql-server-utility.md).</span></span> <span data-ttu-id="89c8f-275">Чтобы удалить точку управления служебной программой из служебной программы [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , на панели **Обозреватель программы** выберите **Управляемые экземпляры** , чтобы отобразить список управляемых экземпляров, щелкните правой кнопкой мыши имя экземпляра [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] в представлении списка **Содержимое обозревателя программы** и выберите **Make Instance Unmanaged**(Удалить из списка управляемых экземпляров).</span><span class="sxs-lookup"><span data-stu-id="89c8f-275">To remove the UCP as a managed instance from the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Utility, select **Managed Instances** in the **Utility Explorer** pane to populate the list view of managed instances, right-click on the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance name in the **Utility Explorer Content** list view, then select **Make Instance Unmanaged**.</span></span>

##  <a name="create-a-new-utility-control-point-using-powershell"></a><a name="PowerShell_create_UCP"></a> <span data-ttu-id="89c8f-276">Создание нового пункта управления программой с помощью PowerShell</span><span class="sxs-lookup"><span data-stu-id="89c8f-276">Create a New Utility Control Point Using PowerShell</span></span>
 <span data-ttu-id="89c8f-277">Для создания нового пункта управления программой используйте следующий пример:</span><span class="sxs-lookup"><span data-stu-id="89c8f-277">Use the following example to create a new utility control point:</span></span>

```powershell
$UtilityInstance = new-object -Type Microsoft.SqlServer.Management.Smo.Server "ComputerName\UCP-Name";
$SqlStoreConnection = new-object -Type Microsoft.SqlServer.Management.Sdk.Sfc.SqlStoreConnection $UtilityInstance.ConnectionContext.SqlConnectionObject;
$Utility = [Microsoft.SqlServer.Management.Utility.Utility]::CreateUtility("Utility", $SqlStoreConnection, "ProxyAccount", "ProxyAccountPassword");
```

## <a name="see-also"></a><span data-ttu-id="89c8f-278">См. также:</span><span class="sxs-lookup"><span data-stu-id="89c8f-278">See Also</span></span>
 <span data-ttu-id="89c8f-279">[Служебная программа SQL Server компонентов и задач](sql-server-utility-features-and-tasks.md) [устранение неполадок служебная программа SQL Server](../../database-engine/troubleshoot-the-sql-server-utility.md)</span><span class="sxs-lookup"><span data-stu-id="89c8f-279">[SQL Server Utility Features and Tasks](sql-server-utility-features-and-tasks.md) [Troubleshoot the SQL Server Utility](../../database-engine/troubleshoot-the-sql-server-utility.md)</span></span>
