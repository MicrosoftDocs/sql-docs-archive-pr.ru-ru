---
title: Подготовка к установке отказоустойчивого кластера | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: install
ms.topic: conceptual
helpviewer_keywords:
- clusters [SQL Server], preinstallation checklist
- installing failover clusters
- failover clustering [SQL Server], preinstallation checklist
ms.assetid: a655225d-8c54-4b30-95fd-31f588167899
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 0ec04b567b7970b25aebeffaefc7bafaf1d56691
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87659311"
---
# <a name="before-installing-failover-clustering"></a><span data-ttu-id="3b5e7-102">Подготовка к установке отказоустойчивого кластера</span><span class="sxs-lookup"><span data-stu-id="3b5e7-102">Before Installing Failover Clustering</span></span>
  <span data-ttu-id="3b5e7-103">Перед тем как установить отказоустойчивый кластер [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], необходимо выбрать оборудование и операционную систему, на которых [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] будет работать.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-103">Before you install a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover cluster, you must select the hardware and the operating system on which [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] will run.</span></span> <span data-ttu-id="3b5e7-104">Кроме того, необходимо настроить отказоустойчивую кластеризацию Windows Server (WSFC) и проверить настройки сети, безопасности и другого программного обеспечения, которое будет запускаться на отказоустойчивом кластере.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-104">You must also configure Windows Server Failover Clustering (WSFC), and review network, security, and considerations for other software that will run on your failover cluster.</span></span>  
  
 <span data-ttu-id="3b5e7-105">Если в кластере Windows есть локальный диск и при этом диск с такой же буквой используется на одном или нескольких узлах кластера в качестве общего диска, то установить [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] на этот диск невозможно.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-105">If a Windows cluster has a local disk drive and the same drive letter is also used on one or more cluster nodes as a shared drive, you cannot install [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] on that drive.</span></span>  
  
 <span data-ttu-id="3b5e7-106">Дополнительные сведения об основных понятиях, функциях и задачах отказоустойчивых кластеров [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] приведены в следующих разделах.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-106">You may also want to review the following topics to learn more about [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover clustering concepts, features and tasks.</span></span>  
  
|<span data-ttu-id="3b5e7-107">Описание раздела</span><span class="sxs-lookup"><span data-stu-id="3b5e7-107">Topic Description</span></span>|<span data-ttu-id="3b5e7-108">Раздел</span><span class="sxs-lookup"><span data-stu-id="3b5e7-108">Topic</span></span>|  
|-----------------------|-----------|  
|<span data-ttu-id="3b5e7-109">Содержит описание основных понятий отказоустойчивых кластеров [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , а также ссылки на связанное содержимое и задачи.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-109">Describes [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover clustering concepts, and provides links to associated content and tasks.</span></span>|[<span data-ttu-id="3b5e7-110">Экземпляры отказоустойчивого кластера (режим AlwaysOn) (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="3b5e7-110">AlwaysOn Failover Cluster Instances (SQL Server)</span></span>](../windows/always-on-failover-cluster-instances-sql-server.md)|  
|<span data-ttu-id="3b5e7-111">Содержит описание основных понятий политик отработки отказов [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , а также ссылки на сведения о настройке политики отработки отказов для обеспечения потребностей организации.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-111">Describes [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover policy concepts, and provides links to configuring the failover policy to suit your organizational requirements.</span></span>|[<span data-ttu-id="3b5e7-112">Failover Policy for Failover Cluster Instances</span><span class="sxs-lookup"><span data-stu-id="3b5e7-112">Failover Policy for Failover Cluster Instances</span></span>](../windows/failover-policy-for-failover-cluster-instances.md)|  
|<span data-ttu-id="3b5e7-113">Содержит описание обеспечения работоспособности существующего отказоустойчивого кластера [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="3b5e7-113">Describes how to maintain and your existing [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover cluster.</span></span>|[<span data-ttu-id="3b5e7-114">Администрирование и обслуживание экземпляров отказоустойчивого кластера</span><span class="sxs-lookup"><span data-stu-id="3b5e7-114">Failover Cluster Instance Administration and Maintenance</span></span>](../windows/failover-cluster-instance-administration-and-maintenance.md)|  
|<span data-ttu-id="3b5e7-115">Описание установки служб [!INCLUDE[ssASnoversion](../../../includes/ssasnoversion-md.md)] в отказоустойчивый кластер Windows Server (WSFC).</span><span class="sxs-lookup"><span data-stu-id="3b5e7-115">Explains how to install [!INCLUDE[ssASnoversion](../../../includes/ssasnoversion-md.md)] on a Windows Server Failover Cluster (WSFC).</span></span>|[<span data-ttu-id="3b5e7-116">Кластеризация служб SQL Server Analysis Services</span><span class="sxs-lookup"><span data-stu-id="3b5e7-116">How to Cluster SQL Server Analysis Services</span></span>](https://go.microsoft.com/fwlink/p/?LinkId=396548)|  
  
  
  
##  <a name="best-practices"></a><a name="BestPractices"></a> <span data-ttu-id="3b5e7-117">Рекомендации</span><span class="sxs-lookup"><span data-stu-id="3b5e7-117">Best Practices</span></span>  
  
-   <span data-ttu-id="3b5e7-118">Просмотрите [заметки о выпуске](https://go.microsoft.com/fwlink/?LinkId=296445)[!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)].</span><span class="sxs-lookup"><span data-stu-id="3b5e7-118">Review [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)][Release Notes](https://go.microsoft.com/fwlink/?LinkId=296445)</span></span>  
  
-   <span data-ttu-id="3b5e7-119">Обязательное программное обеспечение для установки.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-119">Install prerequisite software.</span></span> <span data-ttu-id="3b5e7-120">Перед запуском программы установки для установки или обновления [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)]установите следующие компоненты, чтобы сократить время установки.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-120">Before running Setup to install or upgrade to [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)], install the following prerequisites to reduce installation time.</span></span> <span data-ttu-id="3b5e7-121">Можно установить обязательное программное обеспечение на каждом узле отказоустойчивого кластера, а затем один раз перезапустить узлы перед началом работы программы установки.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-121">You can install prerequisite software on each failover cluster node and then restart nodes once before running Setup.</span></span>  
  
    -   <span data-ttu-id="3b5e7-122">Windows PowerShell больше не устанавливается программой установки [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="3b5e7-122">Windows PowerShell is no longer installed by [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Setup.</span></span> <span data-ttu-id="3b5e7-123">Оболочка Windows PowerShell 2.0 является обязательной для установки компонентов [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)][!INCLUDE[ssDE](../../../includes/ssde-md.md)] и [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)].</span><span class="sxs-lookup"><span data-stu-id="3b5e7-123">Windows PowerShell 2.0 is a prerequisite for installing [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)][!INCLUDE[ssDE](../../../includes/ssde-md.md)] components and [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)].</span></span> <span data-ttu-id="3b5e7-124">Если компонент Windows PowerShell 2.0 отсутствует на компьютере, его можно включить, следуя указаниям на странице [Windows Management Framework](https://go.microsoft.com/fwlink/?LinkId=186214).</span><span class="sxs-lookup"><span data-stu-id="3b5e7-124">If Windows PowerShell 2.0 is not present on your computer, you can enable it by following the instructions on the [Windows Management Framework](https://go.microsoft.com/fwlink/?LinkId=186214) page.</span></span>  
  
    -   <span data-ttu-id="3b5e7-125">Платформа .NET Framework 3.5 с пакетом обновления 1 (SP1) больше не устанавливается программой установки [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , но может потребоваться при установке [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] в старых операционных системах Windows.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-125">.NET Framework 3.5 SP1 is no longer installed by [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Setup, but may be required while installing [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] on older Windows operating systems.</span></span> <span data-ttu-id="3b5e7-126">Дополнительные сведения см. в разделе [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] [заметки о выпуске](https://go.microsoft.com/fwlink/?LinkId=296445).</span><span class="sxs-lookup"><span data-stu-id="3b5e7-126">For more information, see [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)][Release Notes](https://go.microsoft.com/fwlink/?LinkId=296445).</span></span>  
  
    -   <span data-ttu-id="3b5e7-127">\*\* [!INCLUDE[msCoName](../../../includes/msconame-md.md)] Пакет обновления.\*\* чтобы избежать перезагрузки компьютера из-за установки .NET Framework 4 во время установки, [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] программе установки требуется [!INCLUDE[msCoName](../../../includes/msconame-md.md)] установить на компьютере обновление.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-127">**[!INCLUDE[msCoName](../../../includes/msconame-md.md)] Update package:** To avoid computer restart due to .NET Framework 4 installation during setup, [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] setup requires a [!INCLUDE[msCoName](../../../includes/msconame-md.md)] update to be installed on the computer.</span></span>  <span data-ttu-id="3b5e7-128">Это обновление включено в установку [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)] в Windows 7 с пакетом обновления 1 (SP1) или [!INCLUDE[firstref_longhorn](../../../includes/firstref-longhorn-md.md)] с пакетом обновления 2 (SP2).</span><span class="sxs-lookup"><span data-stu-id="3b5e7-128">If you are installing [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)] on Windows 7 SP1 or [!INCLUDE[firstref_longhorn](../../../includes/firstref-longhorn-md.md)] SP2 this update is included.</span></span> <span data-ttu-id="3b5e7-129">При установке в более старой операционной системе Windows загрузите его по ссылке: [Центр обновления Майкрософт для .NET Framework 4.0 в Windows Vista и Windows Server 2008](https://go.microsoft.com/fwlink/?LinkId=198093).</span><span class="sxs-lookup"><span data-stu-id="3b5e7-129">If you are installing on an older Windows operating system, download it from [Microsoft Update for .NET Framework 4.0 on Windows Vista and Windows Server 2008](https://go.microsoft.com/fwlink/?LinkId=198093).</span></span>  
  
    -   <span data-ttu-id="3b5e7-130">.NET Framework 4: программа установки устанавливает платформу .NET Framework 4 в кластеризованной операционной системе.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-130">.NET Framework 4: Setup installs .NET Framework 4 on a clustered operating system.</span></span> <span data-ttu-id="3b5e7-131">Чтобы сократить время установки, перед запуском программы установки рекомендуется установить .NET Framework 4.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-131">To reduce installation time, you may consider installing .NET Framework 4 before you run Setup.</span></span>  
  
    -   [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="3b5e7-132">.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-132">Setup support files.</span></span> <span data-ttu-id="3b5e7-133">Эти файлы можно установить, запустив файл SqlSupport.msi, который находится на установочном носителе [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="3b5e7-133">You can install these files by running SqlSupport.msi located on your [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] installation media.</span></span>  
  
-   <span data-ttu-id="3b5e7-134">Убедитесь, что в кластере сервера WSFC не установлены антивирусные программы.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-134">Verify that antivirus software is not installed on your WSFC cluster.</span></span> <span data-ttu-id="3b5e7-135">Дополнительные сведения см. в статье [!INCLUDE[msCoName](../../../includes/msconame-md.md)] Базы знаний Майкрософт, [Antivirus software may cause problems with cluster services](https://go.microsoft.com/fwlink/?LinkId=116986).</span><span class="sxs-lookup"><span data-stu-id="3b5e7-135">For more information, see the [!INCLUDE[msCoName](../../../includes/msconame-md.md)] Knowledge Base article, [Antivirus software may cause problems with cluster services](https://go.microsoft.com/fwlink/?LinkId=116986).</span></span>  
  
-   <span data-ttu-id="3b5e7-136">В имени кластерной группы при установке отказоустойчивого кластера нельзя использовать следующие символы:</span><span class="sxs-lookup"><span data-stu-id="3b5e7-136">When naming a cluster group for your failover cluster installation, you must not use any of the following characters in the cluster group name:</span></span>  
  
    -   <span data-ttu-id="3b5e7-137">Оператор "меньше" (\<)</span><span class="sxs-lookup"><span data-stu-id="3b5e7-137">Less than operator (\<)</span></span>  
  
    -   <span data-ttu-id="3b5e7-138">Оператор "больше" (>)</span><span class="sxs-lookup"><span data-stu-id="3b5e7-138">Greater than operator (>)</span></span>  
  
    -   <span data-ttu-id="3b5e7-139">двойная кавычка (");</span><span class="sxs-lookup"><span data-stu-id="3b5e7-139">Double quote (")</span></span>  
  
    -   <span data-ttu-id="3b5e7-140">одинарная кавычка (');</span><span class="sxs-lookup"><span data-stu-id="3b5e7-140">Single quote (')</span></span>  
  
    -   <span data-ttu-id="3b5e7-141">Амперсанд (&)</span><span class="sxs-lookup"><span data-stu-id="3b5e7-141">Ampersand (&)</span></span>  
  
     <span data-ttu-id="3b5e7-142">Убедитесь также, что имена существующих кластерных групп не содержат недопустимых символов.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-142">Also verify that existing cluster group names do not contain unsupported characters.</span></span>  
  
-   <span data-ttu-id="3b5e7-143">Необходимо, чтобы все узлы кластера имели одинаковую конфигурацию, в т.ч. COM+, буквы разделов диска и пользователей в группе администраторов.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-143">Ensure that all cluster nodes are configured identically, including COM+, disk drive letters, and users in the administrators group.</span></span>  
  
-   <span data-ttu-id="3b5e7-144">Проверьте, чтобы все системные журналы на всех узлах были очищены, и просмотрите их снова.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-144">Verify that you have cleared the system logs in all nodes and viewed the system logs again.</span></span> <span data-ttu-id="3b5e7-145">Прежде чем продолжить, убедитесь в том, что в журналах нет сообщений об ошибках.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-145">Ensure that the logs are free of any error messages before continuing.</span></span>  
  
-   <span data-ttu-id="3b5e7-146">Перед установкой или обновлением отказоустойчивого кластера [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] отключите все приложения и все службы, которые могут использовать компоненты [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] в ходе установки. Дисковые ресурсы необходимо оставить в режиме «в сети».</span><span class="sxs-lookup"><span data-stu-id="3b5e7-146">Before you install or update a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover cluster, disable all applications and services that might use [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] components during installation, but leave the disk resources online.</span></span>  
  
-   [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="3b5e7-147">автоматически задает зависимости между кластерной группой [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] и дисками, которые будут находиться в отказоустойчивом кластере.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-147">Setup automatically sets dependencies between the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] cluster group and the disks that will be in the failover cluster.</span></span> <span data-ttu-id="3b5e7-148">Не задавайте зависимости перед запуском программы установки.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-148">Do not set dependencies for disks before Setup.</span></span>  
  
    -   <span data-ttu-id="3b5e7-149">При установке отказоустойчивого кластера [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] создается объект компьютера (учетные записи Active Directory) для имени сетевого ресурса [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="3b5e7-149">During [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Failover Cluster installation, computer object (Active Directory computer accounts) for the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Network Resource Name is created.</span></span> <span data-ttu-id="3b5e7-150">В кластере [!INCLUDE[firstref_longhorn](../../../includes/firstref-longhorn-md.md)] учетная запись имени кластера (учетная запись компьютера для самого кластера) должна иметь разрешение на создание объектов компьютера.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-150">In a [!INCLUDE[firstref_longhorn](../../../includes/firstref-longhorn-md.md)] cluster, the cluster name account (computer account of the cluster itself) needs to have permissions to create computer objects.</span></span> <span data-ttu-id="3b5e7-151">Дополнительные сведения см. в статье [Настройка учетных записей в Active Directory](https://technet.microsoft.com/library/cc731002\(WS.10\).aspx).</span><span class="sxs-lookup"><span data-stu-id="3b5e7-151">For more information, see [Configuring Accounts in Active Directory](https://technet.microsoft.com/library/cc731002\(WS.10\).aspx).</span></span>  
  
    -   <span data-ttu-id="3b5e7-152">Если в качестве файлового хранилища используется общая папка SMB, учетная запись программы установки [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Setup должна иметь права доступа SeSecurityPrivilege на этом файловом сервере.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-152">If you are using SMB File share as a storage option, the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Setup account must have SeSecurityPrivilege on the file server.</span></span> <span data-ttu-id="3b5e7-153">Для этого с помощью консоли локальной политики безопасности на файловом сервере назначьте учетной записи программы установки [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] права **Управление журналом аудита и безопасности** .</span><span class="sxs-lookup"><span data-stu-id="3b5e7-153">To do this, using the Local Security Policy console on the file server, add the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] setup account to **Manage auditing and security log** rights.</span></span>  
  
 
  
##  <a name="verify-your-hardware-solution"></a><a name="Hardware"></a> <span data-ttu-id="3b5e7-154">Проверка оборудования</span><span class="sxs-lookup"><span data-stu-id="3b5e7-154">Verify Your Hardware Solution</span></span>  
  
-   <span data-ttu-id="3b5e7-155">Если кластерное решение включает в себя географически распределенные узлы кластеров, необходимо проанализировать также дополнительные элементы, такие как задержка сети и поддержка использования общих дисков.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-155">If the cluster solution includes geographically dispersed cluster nodes, additional items like network latency and shared disk support must be verified.</span></span>  
  
    -   <span data-ttu-id="3b5e7-156">Дополнительные сведения о [!INCLUDE[firstref_longhorn](../../../includes/firstref-longhorn-md.md)] и [!INCLUDE[winserver2008r2](../../../includes/winserver2008r2-md.md)]см. в разделах [Проверка аппаратного обеспечения отказоустойчивого кластера](https://go.microsoft.com/fwlink/?LinkId=196817) и [Политика поддержки для отказоустойчивых кластеров Windows](https://go.microsoft.com/fwlink/?LinkId=196818).</span><span class="sxs-lookup"><span data-stu-id="3b5e7-156">For more information about [!INCLUDE[firstref_longhorn](../../../includes/firstref-longhorn-md.md)] and [!INCLUDE[winserver2008r2](../../../includes/winserver2008r2-md.md)], see [Validating Hardware for a failover cluster](https://go.microsoft.com/fwlink/?LinkId=196817) and [Support Policy for Windows Failover Clusters](https://go.microsoft.com/fwlink/?LinkId=196818).</span></span>  
  
-   <span data-ttu-id="3b5e7-157">Убедитесь, что диск, на который будет установлен [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , не является сжатым или зашифрованным диском.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-157">Verify that the disk where [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] will be installed is not compressed or encrypted.</span></span> <span data-ttu-id="3b5e7-158">При попытке установки [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] на сжатый или зашифрованный диск программа установки [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] завершится с ошибкой.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-158">If you attempt to install [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] to a compressed drive or an encrypted drive, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Setup fails.</span></span>  
  
-   <span data-ttu-id="3b5e7-159">Конфигурации SAN поддерживаются также в операционных системах [!INCLUDE[firstref_longhorn](../../../includes/firstref-longhorn-md.md)] и [!INCLUDE[winserver2008r2](../../../includes/winserver2008r2-md.md)] выпусков Advanced Server и Datacenter Edition.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-159">SAN configurations are also supported on [!INCLUDE[firstref_longhorn](../../../includes/firstref-longhorn-md.md)] and [!INCLUDE[winserver2008r2](../../../includes/winserver2008r2-md.md)] Advanced Server and Datacenter Server editions.</span></span> <span data-ttu-id="3b5e7-160">В категории «Кластеры и многокластерные устройства» каталога Windows и перечня совместимого оборудования дан перечень устройств хранения, поддерживающих сети SAN, прошедших испытания и поддерживаемых в качестве элементов хранения сетей SAN с подключением нескольких кластеров WSFC.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-160">The Windows Catalog and Hardware Compatibility List category "Cluster/Multi-cluster Device" lists the set of SAN-capable storage devices that have been tested and are supported as SAN storage units with multiple WSFC clusters attached.</span></span> <span data-ttu-id="3b5e7-161">После нахождения необходимых сертифицированных компонентов запустите проверку кластеров.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-161">Run cluster validation after finding the certified components.</span></span>  
  
-   <span data-ttu-id="3b5e7-162">При установке файлов данных также поддерживается файловый ресурс общего доступа SMB.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-162">SMB File Share is also supported for installing data files.</span></span> <span data-ttu-id="3b5e7-163">Дополнительные сведения см. в разделе [Storage Types for Data Files](../../install/hardware-and-software-requirements-for-installing-sql-server.md#StorageTypes).</span><span class="sxs-lookup"><span data-stu-id="3b5e7-163">For more information, see [Storage Types for Data Files](../../install/hardware-and-software-requirements-for-installing-sql-server.md#StorageTypes).</span></span>  
  
    > [!WARNING]  
    >  <span data-ttu-id="3b5e7-164">Если в качестве общего хранилища файлового сервера SMB используется файловый сервер Windows, то учетная запись программы установки [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] должна иметь права доступа SeSecurityPrivilege на этом файловом сервере.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-164">If you are using Windows File Server as a SMB File Share storage, the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Setup account must have SeSecurityPrivilege on the file server.</span></span> <span data-ttu-id="3b5e7-165">Для этого с помощью консоли локальной политики безопасности на файловом сервере назначьте учетной записи программы установки [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] права **Управление журналом аудита и безопасности** .</span><span class="sxs-lookup"><span data-stu-id="3b5e7-165">To do this, using the Local Security Policy console on the file server, add the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] setup account to **Manage auditing and security log** rights.</span></span>  
    >   
    >  <span data-ttu-id="3b5e7-166">Если в качестве общего хранилища файлового сервера SMB используется не файловый сервер Windows, то свяжитесь с поставщиком ПО хранилища данных и выясните у него эквивалентные настройки на стороне файлового сервера.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-166">If you are using SMB file share storage other than Windows File server, please consult the storage vendor for an equivalent setting on the file server side.</span></span>  
  
-   [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="3b5e7-167">поддерживает точки подключения.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-167">supports mount points.</span></span>  
  
     <span data-ttu-id="3b5e7-168">Подключенные тома или точки подключения позволяют использовать одну букву диска для ссылки на множество дисков или томов.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-168">A mounted volume, or mount point, allows you to use a single drive letter to refer to many disks or volumes.</span></span> <span data-ttu-id="3b5e7-169">Если имеется обычный диск или том, обозначенный буквой D:, можно подключить или «смонтировать» дополнительные диски или тома в качестве каталогов этого диска D: при этом присваивать им собственные буквенные обозначения диска не потребуется.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-169">If you have a drive letter D: that refers to a regular disk or volume, you can connect or "mount" additional disks or volumes as directories under drive letter D: without the additional disks or volumes requiring drive letters of their own.</span></span>  
  
     <span data-ttu-id="3b5e7-170">Ниже приведены дополнительные замечания о точках подключения для отказоустойчивых кластеров [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="3b5e7-170">Additional mount point considerations for [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover clustering:</span></span>  
  
    -   [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="3b5e7-171">требует наличия буквы диска у базового раздела подключенного диска.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-171">Setup requires that the base drive of a mounted drive has an associated drive letter.</span></span> <span data-ttu-id="3b5e7-172">При установке отказоустойчивых кластеров такой базовый раздел должен быть кластеризованным диском.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-172">For failover cluster installations, this base drive must be a clustered drive.</span></span> <span data-ttu-id="3b5e7-173">В этой версии не поддерживаются идентификаторы GUID томов.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-173">Volume GUIDs are not supported in this release.</span></span>  
  
    -   <span data-ttu-id="3b5e7-174">Базовый раздел, которому назначена буква диска, не может совместно использоваться экземплярами отказоустойчивого кластера.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-174">The base drive, the one with the drive letter, cannot be shared among failover cluster instances.</span></span> <span data-ttu-id="3b5e7-175">Это обычное для отказоустойчивых кластеров ограничение не касается, однако, изолированных серверов, на которых размещено несколько экземпляров.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-175">This is a normal restriction for failover clusters, but is not a restriction on stand-alone, multi-instance servers.</span></span>  
  
    -   <span data-ttu-id="3b5e7-176">При установке число кластеров [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] ограничено количеством имеющихся букв дисков.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-176">The clustered installations of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] are limited to the number of available drive letters.</span></span> <span data-ttu-id="3b5e7-177">Если на один раздел диска устанавливается операционная система, а все остальные разделы диска могут использоваться в качестве обычных дисков кластера или дисков кластера, содержащих точки подключения, максимальное число экземпляров [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] на один отказоустойчивый кластер составляет 25.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-177">Assuming that you use only one drive letter for the operating system, and all other drive letters are available as normal cluster drives or cluster drives hosting mount points, you are limited to a maximum of 25 instances of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] per failover cluster.</span></span>  
  
        > [!TIP]  
        >  <span data-ttu-id="3b5e7-178">Ограничение в 25 экземпляров можно обойти за счет использования общей папки SMB.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-178">The 25 instance limit can be overcome by using SMB file share option.</span></span> <span data-ttu-id="3b5e7-179">Если в качестве хранилища используется общая папка SMB, то можно установить до 50 экземпляров кластера отработки отказа [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="3b5e7-179">If you use SMB file share as the storage option, you can install up to 50 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover cluster instances.</span></span>  
  
    -   <span data-ttu-id="3b5e7-180">Форматирование диска после установки дополнительных дисков не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-180">Formatting a drive after mounting additional drives is not supported.</span></span>  
  
-   [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="3b5e7-181">поддерживает локальные диски только для установки файлов tempdb.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-181">failover cluster installation supports Local Disk only for installing the tempdb files.</span></span> <span data-ttu-id="3b5e7-182">Проверьте правильность пути, указанного для файлов tempdb и файлов журнала на всех узлах кластера.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-182">Ensure that the path specified for the tempdb data and log files is valid on all the cluster nodes.</span></span> <span data-ttu-id="3b5e7-183">Если во время отработки отказа каталоги tempdb недоступны на целевом узле отработки отказа, то при переводе ресурсов [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] в режим «в сети» произойдет ошибка.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-183">During failover, if the tempdb directories are not available on the failover target node, the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] resource will fail to come online.</span></span> <span data-ttu-id="3b5e7-184">Дополнительные сведения см. в разделах [Типы хранилищ для файлов данных](../../install/hardware-and-software-requirements-for-installing-sql-server.md#StorageTypes) и [Настройка компонента Database Engine — каталоги данных](../../install/database-engine-configuration-data-directories.md).</span><span class="sxs-lookup"><span data-stu-id="3b5e7-184">For more information, see [Storage Types for Data Files](../../install/hardware-and-software-requirements-for-installing-sql-server.md#StorageTypes) and [Database Engine Configuration - Data Directories](../../install/database-engine-configuration-data-directories.md).</span></span>  
  
-   <span data-ttu-id="3b5e7-185">При развертывании отказоустойчивого кластера [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] на компонентах технологии iSCSI рекомендуется предпринимать соответствующие меры предосторожности.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-185">If you deploy a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover cluster on iSCSI technology components, we recommend that you use appropriate caution.</span></span> <span data-ttu-id="3b5e7-186">Дополнительные сведения см. в статье [Support for SQL Server on iSCSI technology components](https://go.microsoft.com/fwlink/?LinkId=116960).</span><span class="sxs-lookup"><span data-stu-id="3b5e7-186">For more information, see [Support for SQL Server on iSCSI technology components](https://go.microsoft.com/fwlink/?LinkId=116960).</span></span>  
  
-   <span data-ttu-id="3b5e7-187">Дополнительные сведения см. в разделе [SQL Server support policy for Microsoft Clustering](https://go.microsoft.com/fwlink/?LinkId=116958)(на английском языке).</span><span class="sxs-lookup"><span data-stu-id="3b5e7-187">For more information, see [SQL Server support policy for Microsoft Clustering](https://go.microsoft.com/fwlink/?LinkId=116958).</span></span>  
  
-   <span data-ttu-id="3b5e7-188">Дополнительные сведения о настройке кворумного диска см. в статье [Quorum Drive Configuration Information](https://go.microsoft.com/fwlink/?LinkId=196816)(на английском языке).</span><span class="sxs-lookup"><span data-stu-id="3b5e7-188">For more information about proper quorum drive configuration, see [Quorum Drive Configuration Information](https://go.microsoft.com/fwlink/?LinkId=196816).</span></span>  
  
-   <span data-ttu-id="3b5e7-189">Чтобы установить отказоустойчивый кластер [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] при размещении исходных файлов установки [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] в домене, отличном от самого кластера, скопируйте файлы установки на текущий домен, доступный для отказоустойчивого кластера [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="3b5e7-189">To install a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover cluster when the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] source installation files and the cluster exist on different domains, copy the installation files to the current domain available to the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover cluster.</span></span>  
  
  
  
##  <a name="review-security-considerations"></a><a name="Security"></a> <span data-ttu-id="3b5e7-190">Ознакомьтесь с соображениями по безопасности</span><span class="sxs-lookup"><span data-stu-id="3b5e7-190">Review Security Considerations</span></span>  
  
-   <span data-ttu-id="3b5e7-191">Чтобы использовать шифрование, на всех узлах отказоустойчивого кластера [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] необходимо установить сертификат сервера с полным именем DNS кластера WSFC.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-191">To use encryption, install the server certificate with the fully qualified DNS name of the WSFC cluster on all nodes in the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover cluster.</span></span> <span data-ttu-id="3b5e7-192">Например, при наличии кластера из двух узлов с именами Test1.DomainName.com и Test2.DomainName.com, а также экземпляра отказоустойчивого кластера [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] с именем Virtsql необходимо получить сертификат Virtsql.DomainName.com и установить его на узлы test1 и test2.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-192">For example, if you have a two-node cluster, with nodes named "Test1.DomainName.com" and "Test2.DomainName.com" and a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover cluster instance named "Virtsql", you must get a certificate for "Virtsql.DomainName.com" and install the certificate on the test1 and test2 nodes.</span></span> <span data-ttu-id="3b5e7-193">Затем для настройки шифрования в отказоустойчивом кластере установите в диспетчере конфигурации **флажок** Принудительное шифрование протокола [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="3b5e7-193">Then you can select the **Force protocol encryption** check box on the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Configuration Manager to configure your failover cluster for encryption.</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="3b5e7-194"> Не устанавливайте флажок **Принудительное шифрование протокола** до того, как на всех узлах, входящих в экземпляр отказоустойчивого кластера, будут установлены сертификаты.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-194">Do not select the **Force protocol encryption** check box until you have certificates installed on all participating nodes in your failover cluster instance.</span></span>  
  
-   <span data-ttu-id="3b5e7-195">В случае установок [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] в конфигурациях параллельно с предыдущими версиями службы [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] должны использовать только учетные записи, входящие в глобальную группу доменов.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-195">For [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] installations in side-by-side configurations with previous versions, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] services must use accounts found only in the global domains group.</span></span> <span data-ttu-id="3b5e7-196">Кроме того, учетные записи, которые используют службы [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , не должны присутствовать в локальной группе администраторов.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-196">Additionally, accounts used by [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] services must not appear in the local Administrators group.</span></span> <span data-ttu-id="3b5e7-197">При несоблюдении этой рекомендации система безопасности может повести себя непредвиденным образом.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-197">Failure to comply with this guideline will result in unexpected security behavior.</span></span>  
  
-   <span data-ttu-id="3b5e7-198">Чтобы создать отказоустойчивый кластер, необходимо иметь разрешения локального администратора с правом входа в качестве службы и выполнять действия от имени компонента операционной системы на всех экземплярах отказоустойчивого кластера.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-198">To create a failover cluster, you must be a local administrator with permissions to log on as a service, and to act as part of the operating system on all nodes of the failover cluster instance.</span></span>  
  
-   <span data-ttu-id="3b5e7-199">В [!INCLUDE[nextref_longhorn](../../../includes/nextref-longhorn-md.md)]идентификаторы безопасности служб формируются автоматически для использования со службами [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="3b5e7-199">On [!INCLUDE[nextref_longhorn](../../../includes/nextref-longhorn-md.md)], service SIDs are generated automatically for use with [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] services.</span></span> <span data-ttu-id="3b5e7-200">Для экземпляров кластеров отработки отказа [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] , обновленных с предыдущих версий [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], сохраняются имеющиеся конфигурации групп доменов и списков управления доступом.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-200">For [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] failover cluster instances upgraded from previous versions of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], existing domain groups and ACL configurations will be preserved.</span></span>  
  
-   <span data-ttu-id="3b5e7-201">Группы домена должны находиться в том же домене, что и учетные записи компьютера.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-201">Domain groups must be within the same domain as the machine accounts.</span></span> <span data-ttu-id="3b5e7-202">Например, если компьютер, на который устанавливается [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , находится в домене SQLSVR, а его родителем является MYDOMAIN, то необходимо указать группу в домене SQLSVR.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-202">For example, if the machine where [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] will be installed is in the SQLSVR domain which is a child of MYDOMAIN, you must specify a group in the SQLSVR domain.</span></span> <span data-ttu-id="3b5e7-203">Домен SQLSVR может содержать учетные записи пользователей MYDOMAIN.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-203">The SQLSVR domain may contain user accounts from MYDOMAIN.</span></span>  
  
-   [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="3b5e7-204">не устанавливаются в конфигурациях, в которых узлы кластера являются контроллерами домена.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-204">failover clustering cannot be installed where cluster nodes are domain controllers.</span></span>  
  
-   <span data-ttu-id="3b5e7-205">Ознакомьтесь с разделом [Security Considerations for a SQL Server Installation](../../install/security-considerations-for-a-sql-server-installation.md).</span><span class="sxs-lookup"><span data-stu-id="3b5e7-205">Review content in [Security Considerations for a SQL Server Installation](../../install/security-considerations-for-a-sql-server-installation.md).</span></span>  
  
-   <span data-ttu-id="3b5e7-206">О включении проверки подлинности Kerberos для [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], см. в статье базы [!INCLUDE[msCoName](../../../includes/msconame-md.md)] знаний Майкрософт [ Как использовать проверку подлинности Kerberos в SQL Server](https://support.microsoft.com/kb/319723).</span><span class="sxs-lookup"><span data-stu-id="3b5e7-206">To enable Kerberos authentication with [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], see [How to use Kerberos authentication in SQL Server](https://support.microsoft.com/kb/319723) in the [!INCLUDE[msCoName](../../../includes/msconame-md.md)] Knowledge Base.</span></span>  
  
  
  
##  <a name="review-network-port-and-firewall-considerations"></a><a name="Network"></a> <span data-ttu-id="3b5e7-207">Ознакомьтесь с вопросами, связанными с сетями, портами и брандмауэром</span><span class="sxs-lookup"><span data-stu-id="3b5e7-207">Review Network, Port, and Firewall Considerations</span></span>  
  
-   <span data-ttu-id="3b5e7-208">Перед запуском программы установки [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] отключите протокол NetBIOS для всех адаптеров частной сети.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-208">Verify that you have disabled NetBIOS for all private network cards before beginning [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Setup.</span></span>  
  
-   <span data-ttu-id="3b5e7-209">Сетевое имя и IP-адрес [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] не должны использоваться для других целей, например, для совместного использования файлов.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-209">The network name and IP address of your [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] should not be used for any other purpose, such as file sharing.</span></span> <span data-ttu-id="3b5e7-210">Если требуется создать ресурс общей папки, используйте для этого ресурса другое уникальное сетевое имя и IP-адрес.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-210">If you want to create a file share resource, use a different, unique network name and IP address for the resource.</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="3b5e7-211">Корпорация Майкрософт рекомендует не размещать общие папки на дисках с данными, поскольку это негативно влияет на поведение и производительность [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="3b5e7-211">We recommend that you do not use file shares on data drives, because they can affect [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] behavior and performance.</span></span>  
  
-   <span data-ttu-id="3b5e7-212">Хотя [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] поддерживает в кластерах как именованные каналы, так и сокеты TCP/IP, корпорация Майкрософт рекомендует в кластеризованных конфигурациях использовать сокеты TCP/IP.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-212">Even though [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] supports both Named Pipes and TCP/IP Sockets over TCP/IP within a cluster, we recommend that you use TCP/IP Sockets in a clustered configuration.</span></span>  
  
-   <span data-ttu-id="3b5e7-213">Обратите внимание, что ISA Server не поддерживается службой кластеров Windows и, следовательно, не поддерживается в отказоустойчивых кластерах [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="3b5e7-213">Note that ISA server is not supported on Windows Clustering and consequently is also not supported on [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover clusters.</span></span>  
  
-   <span data-ttu-id="3b5e7-214">Служба удаленного реестра должна быть запущена.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-214">The Remote Registry service must be up and running.</span></span>  
  
-   <span data-ttu-id="3b5e7-215">Удаленное администрирование должно быть разрешено.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-215">Remote Administration must be enabled.</span></span>  
  
-   <span data-ttu-id="3b5e7-216">Для порта [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] проверьте конфигурацию сети [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] для протокола TCP/IP для экземпляра, который требуется разблокировать, при помощи диспетчера конфигурации [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="3b5e7-216">For the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] port, use [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Configuration Manager to check the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] network configuration for the TCP/IP protocol for the instance you want to unblock.</span></span> <span data-ttu-id="3b5e7-217">Для обеспечения соединения с [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] по протоколу TCP после установки необходимо включить TCP-порт для IPALL.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-217">You must enable the TCP port for IPALL if you want to connect to [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] using TCP after installation.</span></span> <span data-ttu-id="3b5e7-218">По умолчанию браузер SQL Server ведет прослушивание UDP-соединений по порту 1434.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-218">By default, SQL Browser listens on UDP port 1434.</span></span>  
  
-   <span data-ttu-id="3b5e7-219">К числу операций по установке отказоустойчивого кластера относится правило, которое проверяет порядок привязки к сети.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-219">Failover cluster Setup operations include a rule that checks network binding order.</span></span> <span data-ttu-id="3b5e7-220">Даже в случаях, когда порядок привязки выглядит правильным, в системе могут оказаться отключенные или фантомные конфигурации сетевых адаптеров.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-220">Although binding orders might seem correct, you might have disabled or "ghosted" NIC configurations on the system.</span></span> <span data-ttu-id="3b5e7-221">Фантомные конфигурации сетевых адаптеров могут повлиять на порядок привязки, и в результате правило порядка привязки выдаст предупреждение.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-221">"Ghosted" NIC configurations can affect the binding order and cause the binding order rule to issue a warning.</span></span> <span data-ttu-id="3b5e7-222">Чтобы избежать такой ситуации, выполните следующие действия для обнаружения и удаления отключенных сетевых адаптеров.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-222">To avoid this situation, use the following steps to identify and remove disabled network adapters:</span></span>  
  
    1.  <span data-ttu-id="3b5e7-223">В командной строке введите: set devmgr_Show_Nonpersistent_Devices=1.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-223">At a command prompt, type: set devmgr_Show_Nonpersistent_Devices=1.</span></span>  
  
    2.  <span data-ttu-id="3b5e7-224">Введите и запустите команду: start Devmgmt.msc.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-224">Type and run: start Devmgmt.msc.</span></span>  
  
    3.  <span data-ttu-id="3b5e7-225">Разверните список сетевых адаптеров.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-225">Expand the list of network adapters.</span></span> <span data-ttu-id="3b5e7-226">В список должны входить только физические адаптеры.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-226">Only the physical adapters should be in the list.</span></span> <span data-ttu-id="3b5e7-227">Если присутствует отключенный сетевой адаптер, программа установки сообщит об ошибке в правиле порядка привязки к сети.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-227">If you have a disabled network adapter, Setup will report a failure for the network binding order rule.</span></span> <span data-ttu-id="3b5e7-228">В окне «Сетевые подключения» на панели управления также будет показано, что адаптер отключен.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-228">Control Panel/Network Connections will also show that adapter was disabled.</span></span> <span data-ttu-id="3b5e7-229">Убедитесь, что в окне «Сетевые подключения» на панели управления выводится тот же список включенных физических адаптеров, что и в средстве devmgmt.msc.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-229">Confirm that Network Settings in Control Panel shows the same list of enabled physical adapters that devmgmt.msc shows.</span></span>  
  
    4.  <span data-ttu-id="3b5e7-230">Удалите отключенные сетевые адаптеры перед запуском программы установки [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="3b5e7-230">Remove disabled network adapters before you run [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Setup.</span></span>  
  
    5.  <span data-ttu-id="3b5e7-231">После завершения установки вернитесь к окну «Сетевые подключения» на панели управления и отключите неиспользуемые сетевые адаптеры.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-231">After Setup finishes, return to Network Connections in Control Panel and disable any network adapters that are not currently in use.</span></span>  
  
  
  
##  <a name="verify-your-operating-system"></a><a name="OS_Support"></a><span data-ttu-id="3b5e7-232">Проверка операционной системы</span><span class="sxs-lookup"><span data-stu-id="3b5e7-232">Verify Your Operating System</span></span>  
 <span data-ttu-id="3b5e7-233">Убедитесь в том, что операционная система установлена должным образом и поддерживает отказоустойчивые кластеры.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-233">Make sure that your operating system is installed properly and is designed to support failover clustering.</span></span> <span data-ttu-id="3b5e7-234">В следующей таблице приведен список выпусков [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] и операционных систем, которые их поддерживают.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-234">The following table is a list of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] editions and the operating systems that support them.</span></span>  
  
|[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="3b5e7-235">edition</span><span class="sxs-lookup"><span data-stu-id="3b5e7-235">edition</span></span>|[!INCLUDE[firstref_longhorn](../../../includes/firstref-longhorn-md.md)] <span data-ttu-id="3b5e7-236">Enterprise</span><span class="sxs-lookup"><span data-stu-id="3b5e7-236">Enterprise</span></span>|[!INCLUDE[firstref_longhorn](../../../includes/firstref-longhorn-md.md)] <span data-ttu-id="3b5e7-237">Datacenter Server</span><span class="sxs-lookup"><span data-stu-id="3b5e7-237">Datacenter Server</span></span>|[!INCLUDE[winserver2008r2](../../../includes/winserver2008r2-md.md)] <span data-ttu-id="3b5e7-238">Enterprise</span><span class="sxs-lookup"><span data-stu-id="3b5e7-238">Enterprise</span></span>|[!INCLUDE[winserver2008r2](../../../includes/winserver2008r2-md.md)] <span data-ttu-id="3b5e7-239">Datacenter Server</span><span class="sxs-lookup"><span data-stu-id="3b5e7-239">Datacenter Server</span></span>|  
|---------------------------------------|------------------------------------------------|-------------------------------------------------------|----------------------------------------------|-----------------------------------------------------|  
|[!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)]<span data-ttu-id="3b5e7-240">Enterprise (64-разрядная версия) x64<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="3b5e7-240">Enterprise (64-bit) x64<sup>1</sup></span></span>|<span data-ttu-id="3b5e7-241">Да</span><span class="sxs-lookup"><span data-stu-id="3b5e7-241">Yes</span></span>|<span data-ttu-id="3b5e7-242">Да</span><span class="sxs-lookup"><span data-stu-id="3b5e7-242">Yes</span></span>|<span data-ttu-id="3b5e7-243">Да<sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="3b5e7-243">Yes<sup>2</sup></span></span>|<span data-ttu-id="3b5e7-244">Да<sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="3b5e7-244">Yes<sup>2</sup></span></span>|  
|[!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)] <span data-ttu-id="3b5e7-245">Enterprise (32-разрядная)</span><span class="sxs-lookup"><span data-stu-id="3b5e7-245">Enterprise (32-bit)</span></span>|<span data-ttu-id="3b5e7-246">Да</span><span class="sxs-lookup"><span data-stu-id="3b5e7-246">Yes</span></span>|<span data-ttu-id="3b5e7-247">Да</span><span class="sxs-lookup"><span data-stu-id="3b5e7-247">Yes</span></span>|||  
|[!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)]<span data-ttu-id="3b5e7-248">-разрядная) Developer (64</span><span class="sxs-lookup"><span data-stu-id="3b5e7-248">-bit) Developer (64</span></span>|<span data-ttu-id="3b5e7-249">Да</span><span class="sxs-lookup"><span data-stu-id="3b5e7-249">Yes</span></span>|<span data-ttu-id="3b5e7-250">Да</span><span class="sxs-lookup"><span data-stu-id="3b5e7-250">Yes</span></span>|<span data-ttu-id="3b5e7-251">Да <sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="3b5e7-251">Yes <sup>2</sup></span></span>|<span data-ttu-id="3b5e7-252">Да <sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="3b5e7-252">Yes <sup>2</sup></span></span>|  
|[!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] <span data-ttu-id="3b5e7-253">Developer (32-разрядная)</span><span class="sxs-lookup"><span data-stu-id="3b5e7-253">Developer (32-bit)</span></span>|<span data-ttu-id="3b5e7-254">Да</span><span class="sxs-lookup"><span data-stu-id="3b5e7-254">Yes</span></span>|<span data-ttu-id="3b5e7-255">Да</span><span class="sxs-lookup"><span data-stu-id="3b5e7-255">Yes</span></span>|||  
|[!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] <span data-ttu-id="3b5e7-256">Standard (64-разрядная)</span><span class="sxs-lookup"><span data-stu-id="3b5e7-256">Standard (64-bit)</span></span>|<span data-ttu-id="3b5e7-257">Да</span><span class="sxs-lookup"><span data-stu-id="3b5e7-257">Yes</span></span>|<span data-ttu-id="3b5e7-258">Да</span><span class="sxs-lookup"><span data-stu-id="3b5e7-258">Yes</span></span>|<span data-ttu-id="3b5e7-259">Да</span><span class="sxs-lookup"><span data-stu-id="3b5e7-259">Yes</span></span>|<span data-ttu-id="3b5e7-260">Да</span><span class="sxs-lookup"><span data-stu-id="3b5e7-260">Yes</span></span>|  
|[!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] <span data-ttu-id="3b5e7-261">Standard (32-разрядная)</span><span class="sxs-lookup"><span data-stu-id="3b5e7-261">Standard (32-bit)</span></span>|<span data-ttu-id="3b5e7-262">Да</span><span class="sxs-lookup"><span data-stu-id="3b5e7-262">Yes</span></span>|<span data-ttu-id="3b5e7-263">Да</span><span class="sxs-lookup"><span data-stu-id="3b5e7-263">Yes</span></span>|||  
  
 <span data-ttu-id="3b5e7-264"><sup>1</sup> [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] кластеры не поддерживаются в режиме WOW.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-264"><sup>1</sup> [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] clusters are not supported in WOW mode.</span></span> <span data-ttu-id="3b5e7-265">Это также относится к обновлению с предыдущих версий отказоустойчивых кластеров [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , первоначально установленных в режиме WOW.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-265">That includes upgrades from previous versions of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover clusters that were originally installed in WOW.</span></span> <span data-ttu-id="3b5e7-266">В этих случаях единственная возможность обновления состоит в установке в той же среде новой версии и проведении миграции.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-266">For those the only upgrade option is to install the new version side by side and migrate.</span></span>  
  
 <span data-ttu-id="3b5e7-267"><sup>2</sup> поддерживается для [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] отказоустойчивой кластеризации с несколькими подсетями.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-267"><sup>2</sup> Supported for [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] multi-subnet failover clustering.</span></span>  
  
  
  
##  <a name="additional-considerations-for-multi-subnet-configurations"></a><a name="MultiSubnet"></a> <span data-ttu-id="3b5e7-268">Дополнительные соображения по конфигурациям отказоустойчивого кластера с несколькими подсетями</span><span class="sxs-lookup"><span data-stu-id="3b5e7-268">Additional Considerations for Multi-Subnet Configurations</span></span>  
 <span data-ttu-id="3b5e7-269">В приведенных далее разделах описываются требования, которые необходимо учитывать при установке отказоустойчивого кластера [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] с несколькими подсетями.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-269">The sections below describe the requirements to keep in mind when installing a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] multi-subnet failover cluster.</span></span> <span data-ttu-id="3b5e7-270">При реализации конфигурации с несколькими подсетями кластеризация охватывает несколько подсетей, в связи с чем используются несколько IP-адресов и происходит изменение зависимостей ресурсов IP-адресов.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-270">A multi-subnet configuration involves clustering across multiple subnets, therefore involves using multiple IP addresses and changes to IP address resource dependencies.</span></span>  
  
### <a name="ssnoversion-edition-and-operating-system-considerations"></a>[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="3b5e7-271">и операционным системам</span><span class="sxs-lookup"><span data-stu-id="3b5e7-271">Edition and Operating System Considerations</span></span>  
  
-   <span data-ttu-id="3b5e7-272">Сведения о выпусках [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], которые поддерживают отказоустойчивый кластер [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] с несколькими подсетями, см. в разделе [Функции, поддерживаемые различными выпусками SQL Server 2014](../../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md).</span><span class="sxs-lookup"><span data-stu-id="3b5e7-272">For information about the editions of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] that support a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] multi-subnet failover cluster, see [Features Supported by the Editions of SQL Server 2014](../../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md).</span></span>  
  
-   <span data-ttu-id="3b5e7-273">Чтобы создать кластер отработки отказа [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] с несколькими подсетями, необходимо сначала создать отказоустойчивый кластер [!INCLUDE[winserver2008r2](../../../includes/winserver2008r2-md.md)] на нескольких объектах и в нескольких подсетях.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-273">To create a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] multi-subnet failover cluster, you must first create the [!INCLUDE[winserver2008r2](../../../includes/winserver2008r2-md.md)] multi-site failover cluster on multiple subnets.</span></span>  
  
-   [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="3b5e7-274">использует отказоустойчивый кластер Windows Server для обеспечения допустимости условий зависимости IP-адресов при отработке отказа.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-274">failover cluster depends on the Windows Server failover cluster to make sure that the IP dependency conditions are valid if there is a failover.</span></span>  
  
-   [!INCLUDE[winserver2008r2](../../../includes/winserver2008r2-md.md)] <span data-ttu-id="3b5e7-275">требует, чтобы все серверы кластера находились в одном домене Active Directory.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-275">requires that all the cluster servers must be in the same Active Directory domain.</span></span> <span data-ttu-id="3b5e7-276">Поэтому отказоустойчивый кластер [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] с несколькими подсетями требует, чтобы все узлы отказоустойчивого кластера находились в одном и том же домене Active Directory, даже если они все находятся в разных подсетях.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-276">Therefore, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] multi-subnet failover cluster requires that all the cluster nodes be in the same Active Directory domain even if they are in different subnets.</span></span>  
  
#### <a name="ip-address-and-ip-address-resource-dependencies"></a><span data-ttu-id="3b5e7-277">IP-адреса и зависимости ресурсов IP-адресов</span><span class="sxs-lookup"><span data-stu-id="3b5e7-277">IP Address and IP Address Resource Dependencies</span></span>  
  
1.  <span data-ttu-id="3b5e7-278">В конфигурации с несколькими подсетями для зависимости ресурса "IP-адрес" задается значение OR.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-278">The IP Address resource dependency is set to OR in a multi-subnet configuration.</span></span> <span data-ttu-id="3b5e7-279">Дополнительные сведения см. [в разделе Создание нового SQL Server отказоустойчивого кластера &#40;установки&#41;](create-a-new-sql-server-failover-cluster-setup.md)</span><span class="sxs-lookup"><span data-stu-id="3b5e7-279">For more information, see [Create a New SQL Server Failover Cluster &#40;Setup&#41;](create-a-new-sql-server-failover-cluster-setup.md)</span></span>  
  
2.  <span data-ttu-id="3b5e7-280">Смешанные конфигурации зависимостей IP-адресов со значением AND-OR не поддерживаются.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-280">Mixed AND-OR IP address dependencies are not supported.</span></span> <span data-ttu-id="3b5e7-281">Например, \<IP1> and \<IP2> или \<IP3> не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-281">For example, \<IP1> AND \<IP2> OR \<IP3> is not supported.</span></span>  
  
3.  <span data-ttu-id="3b5e7-282">Также не поддерживается несколько IP-адресов в одной в подсети.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-282">More than one IP address per subnet is not supported.</span></span>  
  
     <span data-ttu-id="3b5e7-283">При использовании нескольких IP-адресов в одной подсети во время запуска [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] клиенты могут сталкиваться со сбоями соединений.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-283">If you decide to use more than one IP address configured for the same subnet, you may experience client connection failures during [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] startup.</span></span>  
  
#### <a name="related-content"></a><span data-ttu-id="3b5e7-284">См. также</span><span class="sxs-lookup"><span data-stu-id="3b5e7-284">Related Content</span></span>  
 <span data-ttu-id="3b5e7-285">Дополнительные сведения об отказоустойчивых кластерах на платформе [!INCLUDE[winserver2008r2](../../../includes/winserver2008r2-md.md)] на нескольких сайтах см. в статьях [Сайт кластеризации отработки отказа на платформе Windows Server 2008 R2](https://technet.microsoft.com/library/ff182338\(v=WS.10\).aspx) и [Проектирование службы, поддерживающей работу в кластере, или приложения в пределах кластера отработки отказа, размещенного на нескольких сайтах](https://go.microsoft.com/fwlink/?LinkId=177873).</span><span class="sxs-lookup"><span data-stu-id="3b5e7-285">For more information about [!INCLUDE[winserver2008r2](../../../includes/winserver2008r2-md.md)] multi-site failover, see [Windows Server 2008 R2 Failover Clustering Site](https://technet.microsoft.com/library/ff182338\(v=WS.10\).aspx) and [Design for a Clustered Service or Application in a Multi-Site Failover Cluster](https://go.microsoft.com/fwlink/?LinkId=177873).</span></span>  
  
##  <a name="configure-windows-server-failover-cluster"></a><a name="WSFC"></a><span data-ttu-id="3b5e7-286">Настройка отказоустойчивого кластера Windows Server</span><span class="sxs-lookup"><span data-stu-id="3b5e7-286">Configure Windows Server Failover Cluster</span></span>  
  
-   [!INCLUDE[msCoName](../../../includes/msconame-md.md)] <span data-ttu-id="3b5e7-287">Служба кластеров (Майкрософт) (WSFC) должна быть настроена как минимум на одном узле серверного кластера.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-287">Cluster Service (WSFC) must be configured on at least one node of your server cluster.</span></span> <span data-ttu-id="3b5e7-288">Кроме того, совместно со службой WSFC должен работать выпуск [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Enterprise, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Business Intelligence или [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Standard.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-288">You must also run [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Enterprise, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Business Intelligence, or [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Standard in conjunction with WSFC.</span></span> [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="3b5e7-289">Enterprise поддерживает кластеры отработки отказа с числом узлов до 16.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-289">Enterprise support failover clusters with up to 16 nodes.</span></span> [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="3b5e7-290">Выпуски Business Intelligence и [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Standard поддерживают отказоустойчивые кластеры, состоящие из двух узлов.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-290">Business Intelligence and [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Standard supports two-node failover clusters.</span></span>  
  
-   <span data-ttu-id="3b5e7-291">Библиотека ресурсов DLL для службы [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] экспортирует две функции, которые используются диспетчером кластеров WSFC для проверки доступности ресурса [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="3b5e7-291">The resource DLL for the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] service exports two functions used by WSFC Cluster Manager to check for availability of the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] resource.</span></span> <span data-ttu-id="3b5e7-292">Дополнительные сведения см. в разделе [политика отработки отказа для экземпляров отказоустойчивого кластера](../windows/failover-policy-for-failover-cluster-instances.md).</span><span class="sxs-lookup"><span data-stu-id="3b5e7-292">For more information, see [Failover Policy for Failover Cluster Instances](../windows/failover-policy-for-failover-cluster-instances.md).</span></span>  
  
-   <span data-ttu-id="3b5e7-293">Служба WSFC должна иметь возможность проверять состояние экземпляра отказоустойчивого кластера с помощью проверки IsAlive.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-293">WSFC must be able to verify that the failover clustered instance is running by using the IsAlive check.</span></span> <span data-ttu-id="3b5e7-294">Для этого необходимо установить доверительное соединение с сервером.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-294">This requires connecting to the server by using a trusted connection.</span></span> <span data-ttu-id="3b5e7-295">По умолчанию учетная запись, с которой работает служба кластеров, не является учетной записью администратора на всех узлах в кластере, кроме того, группа BUILTIN\Администраторы не имеет разрешение для входа на [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="3b5e7-295">By default, the account that runs the cluster service is not configured as an administrator on nodes in the cluster, and the BUILTIN\Administrators group does not have permission to log into [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="3b5e7-296">Эти параметры изменяются только в случае изменения разрешений на узлах кластера.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-296">These settings change only if you change permissions on the cluster nodes.</span></span>  
  
-   <span data-ttu-id="3b5e7-297">Настройте службы DNS или WINS.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-297">Configure Domain Name Service (DNS) or Windows Internet Name Service (WINS).</span></span> <span data-ttu-id="3b5e7-298">В среде, где будет устанавливаться отказоустойчивый кластер [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , должен быть запущен DNS-сервер или WINS-сервер.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-298">A DNS server or WINS server must be running in the environment where your [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover cluster will be installed.</span></span> [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="3b5e7-299">для виртуальной ссылки на IP-интерфейс [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] необходима зарегистрированная служба динамических доменных имен.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-299">Setup requires dynamic domain name service registration of the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] IP interface virtual reference.</span></span> <span data-ttu-id="3b5e7-300">Конфигурация DNS-сервера должна позволять узлам кластера динамически регистрировать привязку оперативного IP-адреса к сетевому имени.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-300">DNS server configuration should allow cluster nodes to dynamically register an online IP address map to Network Name.</span></span> <span data-ttu-id="3b5e7-301">Если динамическая регистрация не может быть завершена, программа установки выдает сообщение об ошибке и выполняет откат установки.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-301">If the dynamic registration cannot be completed, Setup fails and the installation is rolled back.</span></span> <span data-ttu-id="3b5e7-302">Дополнительные сведения см. в [этой статье базы знаний Майкрософт](https://support.microsoft.com/kb/947048).</span><span class="sxs-lookup"><span data-stu-id="3b5e7-302">For more information, see [this knowledgebase article](https://support.microsoft.com/kb/947048)</span></span>  
  
  
  
##  <a name="install-msconame-distributed-transaction-coordinator"></a><a name="MSDTC"></a> <span data-ttu-id="3b5e7-303">Установить координатор распределенных транзакций [!INCLUDE[msCoName](../../../includes/msconame-md.md)]</span><span class="sxs-lookup"><span data-stu-id="3b5e7-303">Install [!INCLUDE[msCoName](../../../includes/msconame-md.md)] Distributed Transaction Coordinator</span></span>  
 <span data-ttu-id="3b5e7-304">Перед установкой [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] в отказоустойчивом кластере определите, есть ли необходимость создания кластерного ресурса координатора распределенных транзакций ( [!INCLUDE[msCoName](../../../includes/msconame-md.md)] ) (MSDTC).</span><span class="sxs-lookup"><span data-stu-id="3b5e7-304">Before installing [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] on a failover cluster, determine whether the [!INCLUDE[msCoName](../../../includes/msconame-md.md)] Distributed Transaction Coordinator (MSDTC) cluster resource must be created.</span></span> <span data-ttu-id="3b5e7-305">Если устанавливается только компонент [!INCLUDE[ssDE](../../../includes/ssde-md.md)], кластерный ресурс MSDTC не требуется.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-305">If you are installing only the [!INCLUDE[ssDE](../../../includes/ssde-md.md)], the MSDTC cluster resource is not required.</span></span> <span data-ttu-id="3b5e7-306">Если устанавливается компонент [!INCLUDE[ssDE](../../../includes/ssde-md.md)] и службы SSIS, компоненты рабочей станции или если планируется использовать распределенные транзакции, необходимо установить MSDTC.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-306">If you are installing the [!INCLUDE[ssDE](../../../includes/ssde-md.md)] and SSIS, Workstation Components, or if you will use distributed transactions, you must install MSDTC.</span></span> <span data-ttu-id="3b5e7-307">Обратите внимание, что MSDTC не требуется для экземпляров только со службами [!INCLUDE[ssASnoversion](../../../includes/ssasnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="3b5e7-307">Note that MSDTC is not required for [!INCLUDE[ssASnoversion](../../../includes/ssasnoversion-md.md)]-only instances.</span></span>  
  
 <span data-ttu-id="3b5e7-308">На платформах [!INCLUDE[firstref_longhorn](../../../includes/firstref-longhorn-md.md)] и [!INCLUDE[winserver2008r2](../../../includes/winserver2008r2-md.md)]в одном кластере отработки отказа можно установить несколько экземпляров MSDTC.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-308">On [!INCLUDE[firstref_longhorn](../../../includes/firstref-longhorn-md.md)] and [!INCLUDE[winserver2008r2](../../../includes/winserver2008r2-md.md)], you can install multiple instances of MSDTC on a single failover cluster.</span></span> <span data-ttu-id="3b5e7-309">Первым установленным экземпляром MSDTC будет экземпляр MSDTC по умолчанию для кластера.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-309">The first instance of MSDTC that is installed will be the cluster default instance of MSDTC.</span></span> [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="3b5e7-310">будет автоматически использовать экземпляр MSDTC, установленный в локальной группе ресурсов кластера [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="3b5e7-310">will take advantage of an instance of MSDTC installed to the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] local cluster resource group by automatically using the instance of MSDTC.</span></span> <span data-ttu-id="3b5e7-311">Однако отдельные приложения можно сопоставить с любым экземпляром MSDTC в кластере.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-311">However, individual applications can be mapped to any instance of MSDTC on the cluster.</span></span>  
  
 <span data-ttu-id="3b5e7-312">Для экземпляра MSDTC, выбираемого [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], применяются следующие правила.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-312">The following rules are applied for an instance of MSDTC to be chosen by [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]:</span></span>  
  
-   <span data-ttu-id="3b5e7-313">Использовать MSDTC, установленный в локальной группе, или</span><span class="sxs-lookup"><span data-stu-id="3b5e7-313">Use MSDTC installed to the local group, else</span></span>  
  
-   <span data-ttu-id="3b5e7-314">Использовать сопоставленный экземпляр MSDTC или</span><span class="sxs-lookup"><span data-stu-id="3b5e7-314">Use the mapped instance of MSDTC, else</span></span>  
  
-   <span data-ttu-id="3b5e7-315">Использовать экземпляр MSDTC по умолчанию для данного кластера или</span><span class="sxs-lookup"><span data-stu-id="3b5e7-315">Use the cluster's default instance of MSDTC, else</span></span>  
  
-   <span data-ttu-id="3b5e7-316">Использовать экземпляр MSDTC, установленный на локальном компьютере</span><span class="sxs-lookup"><span data-stu-id="3b5e7-316">Use the local machine's installed instance of MSDTC</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="3b5e7-317">В случае сбоя экземпляра MSDTC, установленного в локальной группе кластера [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] не будет автоматически пытаться использовать экземпляр MSDTC по умолчанию для кластера или экземпляр MSDTC, установленный на локальном компьютере.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-317">If the MSDTC instance that is installed to the local cluster group of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] fails, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] does not automatically attempt to use the default cluster instance or the local machine instance of MSDTC.</span></span> <span data-ttu-id="3b5e7-318">Чтобы начать использовать другой экземпляр MSDTC, потребуется полностью удалить сбойный экземпляр MSDTC из группы [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="3b5e7-318">You would need to completely remove the failed instance of MSDTC from the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] group to use another instance of MSDTC.</span></span> <span data-ttu-id="3b5e7-319">Точно так же, как при создании сопоставления для [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] и сбоя сопоставленного экземпляра MSDTC, в распределенных транзакциях произойдет сбой.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-319">Likewise, if you create a mapping for [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] and the mapped instance of MSDTC fails, your distributed transactions will also fail.</span></span> <span data-ttu-id="3b5e7-320">Если потребуется, чтобы [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] использовал другой экземпляр MSDTC, необходимо либо добавить другой экземпляр MSDTC в локальную группу кластера [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] или удалить сопоставление.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-320">If you want [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] to use a different instance of MSDTC, you must either add an instance of MSDTC to the local cluster group of the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] or delete the mapping.</span></span>  
  
### <a name="configure-msconame-distributed-transaction-coordinator"></a><span data-ttu-id="3b5e7-321">Настройте координатор распределенных транзакций ( [!INCLUDE[msCoName](../../../includes/msconame-md.md)] )</span><span class="sxs-lookup"><span data-stu-id="3b5e7-321">Configure [!INCLUDE[msCoName](../../../includes/msconame-md.md)] Distributed Transaction Coordinator</span></span>  
 <span data-ttu-id="3b5e7-322">После установки операционной системы и настройки кластера необходимо настроить координатор MSDTC для работы в кластере с помощью администратора кластера.</span><span class="sxs-lookup"><span data-stu-id="3b5e7-322">After you install the operating system and configure your cluster, you must configure MSDTC to work in a cluster by using the Cluster Administrator.</span></span> <span data-ttu-id="3b5e7-323">Если MSDTC не будет настроен для работы в кластере, это не помешает установке [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , но может ограничить функциональные возможности приложений [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="3b5e7-323">Failure to cluster MSDTC will not block [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Setup, but [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] application functionality may be affected if MSDTC is not properly configured.</span></span>  
  
  
  
## <a name="see-also"></a><span data-ttu-id="3b5e7-324">См. также:</span><span class="sxs-lookup"><span data-stu-id="3b5e7-324">See Also</span></span>  
 <span data-ttu-id="3b5e7-325">[Требования к оборудованию и программному обеспечению для установки SQL Server 2014](../../install/hardware-and-software-requirements-for-installing-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="3b5e7-325">[Hardware and Software Requirements for Installing SQL Server 2014](../../install/hardware-and-software-requirements-for-installing-sql-server.md) </span></span>  
 <span data-ttu-id="3b5e7-326">[Проверьте параметры средства проверки конфигурации системы.](../../../database-engine/install-windows/check-parameters-for-the-system-configuration-checker.md) </span><span class="sxs-lookup"><span data-stu-id="3b5e7-326">[Check Parameters for the System Configuration Checker](../../../database-engine/install-windows/check-parameters-for-the-system-configuration-checker.md) </span></span>  
 [<span data-ttu-id="3b5e7-327">Администрирование и обслуживание экземпляров отказоустойчивого кластера</span><span class="sxs-lookup"><span data-stu-id="3b5e7-327">Failover Cluster Instance Administration and Maintenance</span></span>](../windows/failover-cluster-instance-administration-and-maintenance.md)  
  
  
