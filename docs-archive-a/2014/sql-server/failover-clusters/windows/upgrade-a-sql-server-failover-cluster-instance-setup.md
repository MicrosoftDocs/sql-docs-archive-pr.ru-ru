---
title: Обновление экземпляра отказоустойчивого кластера SQL Server (программа установки) | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- upgrading clusters
- clusters [SQL Server], upgrading
- failover clustering [SQL Server], creating clusters
- clusters [SQL Server], creating
- failover clustering [SQL Server], upgrading
ms.assetid: ea8b7d66-e5a1-402f-9928-8f7310e84f5c
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: a45628055ee12f5d771c863dec7a3368cdae5940
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87749647"
---
# <a name="upgrade-a-sql-server-failover-cluster-instance-setup"></a><span data-ttu-id="bcb42-102">Обновление экземпляра отказоустойчивого кластера SQL Server (программа установки)</span><span class="sxs-lookup"><span data-stu-id="bcb42-102">Upgrade a SQL Server Failover Cluster Instance (Setup)</span></span>
  <span data-ttu-id="bcb42-103">Отказоустойчивый кластер [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] можно обновить до отказоустойчивого кластера [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)] с помощью мастера установки [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] или из командной строки.</span><span class="sxs-lookup"><span data-stu-id="bcb42-103">You can upgrade a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover cluster to a [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)] failover cluster by using the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Installation Wizard or a command prompt.</span></span>  
  
 <span data-ttu-id="bcb42-104">При обновлении отказоустойчивого кластера время простоя ограничивается временем отработки отказа и временем, необходимым для обновления запускаемых скриптов.</span><span class="sxs-lookup"><span data-stu-id="bcb42-104">During the failover cluster upgrade, downtime is limited to failover time and the time that is required for upgrade scripts to run.</span></span> <span data-ttu-id="bcb42-105">При соблюдении процесса последовательного обновления отказоустойчивого кластера время простоя сводится к минимуму.</span><span class="sxs-lookup"><span data-stu-id="bcb42-105">If you follow the failover cluster rolling upgrade process, your downtime is minimal.</span></span> <span data-ttu-id="bcb42-106">Если в узлах отказоустойчивого кластера предварительно не установлены все необходимые компоненты, период простоя увеличивается на время, требуемое для установки этих компонентов.</span><span class="sxs-lookup"><span data-stu-id="bcb42-106">Depending on whether you have all the prerequisites on the failover cluster nodes, you might incur additional downtime while you install these prerequisites.</span></span> <span data-ttu-id="bcb42-107">Дополнительные сведения о том, как сократить время простоя при обновлении, см. в разделе рекомендации по [обновлению отказоустойчивого кластера](#BestPractices) на этой странице.</span><span class="sxs-lookup"><span data-stu-id="bcb42-107">For more information about how to minimize the downtime during upgrade, see the [Best Practices Before Upgrading Failover Cluster](#BestPractices) section on this page.</span></span>  
  
 <span data-ttu-id="bcb42-108">Дополнительные сведения об обновлении см. в разделе [поддерживаемые обновления версий и выпусков](../../../database-engine/install-windows/supported-version-and-edition-upgrades.md) и [обновление до SQL Server 2014](../../../database-engine/install-windows/upgrade-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="bcb42-108">For more information about how to upgrade, see [Supported Version and Edition Upgrades](../../../database-engine/install-windows/supported-version-and-edition-upgrades.md) and [Upgrade to SQL Server 2014](../../../database-engine/install-windows/upgrade-sql-server.md).</span></span>  
  
 <span data-ttu-id="bcb42-109">Дополнительные сведения о синтаксисе примеров использования командной строки см. [в разделе Install SQL Server 2014 из командной строки](../../../database-engine/install-windows/install-sql-server-from-the-command-prompt.md).</span><span class="sxs-lookup"><span data-stu-id="bcb42-109">For more information about sample syntax for command prompt usage, see [Install SQL Server 2014 from the Command Prompt](../../../database-engine/install-windows/install-sql-server-from-the-command-prompt.md).</span></span>  
  
## <a name="prerequisites"></a><span data-ttu-id="bcb42-110">Предварительные требования</span><span class="sxs-lookup"><span data-stu-id="bcb42-110">Prerequisites</span></span>  
 <span data-ttu-id="bcb42-111">Перед установкой ознакомьтесь со следующими важными сведениями.</span><span class="sxs-lookup"><span data-stu-id="bcb42-111">Before you begin, review the following important information:</span></span>  
  
-   [<span data-ttu-id="bcb42-112">Подготовка к установке отказоустойчивого кластера</span><span class="sxs-lookup"><span data-stu-id="bcb42-112">Before Installing Failover Clustering</span></span>](../install/before-installing-failover-clustering.md)  
  
-   <span data-ttu-id="bcb42-113">[Используйте советник по переходу для подготовки к обновлениям](../../install/use-upgrade-advisor-to-prepare-for-upgrades.md).</span><span class="sxs-lookup"><span data-stu-id="bcb42-113">[Use Upgrade Advisor to Prepare for Upgrades](../../install/use-upgrade-advisor-to-prepare-for-upgrades.md).</span></span>  
  
-   <span data-ttu-id="bcb42-114">[Обновление [компонент ядра СУБД]](../../../database-engine/install-windows/upgrade-database-engine.md)</span><span class="sxs-lookup"><span data-stu-id="bcb42-114">[Upgrade Database Engine](../../../database-engine/install-windows/upgrade-database-engine.md)</span></span>  
  
-   <span data-ttu-id="bcb42-115">Программа установки устанавливает платформу .NET Framework 4.0 в кластеризованной операционной системе.</span><span class="sxs-lookup"><span data-stu-id="bcb42-115">Setup installs .NET Framework 4.0 on a clustered operating system.</span></span> <span data-ttu-id="bcb42-116">Чтобы минимизировать возможное время простоя, рассмотрите возможность установки .NET Framework 4.0 перед запуском программы установки.</span><span class="sxs-lookup"><span data-stu-id="bcb42-116">To minimize any possible downtime, consider installing .NET Framework 4.0 before you run Setup.</span></span>  
  
-   <span data-ttu-id="bcb42-117">Чтобы обеспечить правильность установки компонента, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] потребует установить обновление.</span><span class="sxs-lookup"><span data-stu-id="bcb42-117">To make sure that the Visual Studio component can be installed correctly, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] requires you to install an update.</span></span> <span data-ttu-id="bcb42-118">Программа установки [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] проверит наличие этого обновления и потребует загрузить и установить его, прежде чем можно будет продолжить установку [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="bcb42-118">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Setup checks for the presence of this update and then requires you to download and install the update before you can continue with the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] installation.</span></span> <span data-ttu-id="bcb42-119">Чтобы избежать прерывания установки [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , вы можете загрузить и установить это обновление перед запуском программы установки [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , как описано ниже (или установить все обновления для .NET 3.5 с пакетом обновления 1 (SP1), доступные в центре обновления Windows).</span><span class="sxs-lookup"><span data-stu-id="bcb42-119">To avoid the interruption during [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Setup, you can download and install the update before running [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Setup as described below (or install all the updates for .NET 3.5 SP1 available on Windows Update):</span></span>  
  
     <span data-ttu-id="bcb42-120">Если установка выполняется [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)] на компьютере с операционной системой Windows Server 2008 с пакетом обновления 2 (SP2), необходимое обновление можно получить [здесь](https://go.microsoft.com/fwlink/?LinkId=198093) .</span><span class="sxs-lookup"><span data-stu-id="bcb42-120">If you install [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)] on a computer with the Windows Server 2008 SP2 operating system, you can get the required update from [here](https://go.microsoft.com/fwlink/?LinkId=198093)</span></span>  
  
     <span data-ttu-id="bcb42-121">Если [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)] устанавливается на компьютере под управлением [!INCLUDE[win7](../../../includes/win7-md.md)] с пакетом обновления 1 (SP1) или [!INCLUDE[winserver2008r2](../../../includes/winserver2008r2-md.md)] с пакетом обновления 1 (SP1), то это обновление уже установлено.</span><span class="sxs-lookup"><span data-stu-id="bcb42-121">If you install [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)] on a computer with the [!INCLUDE[win7](../../../includes/win7-md.md)] SP1 or [!INCLUDE[winserver2008r2](../../../includes/winserver2008r2-md.md)] SP1 operating system, this update in included.</span></span>  
  
-   <span data-ttu-id="bcb42-122">Платформа .NET Framework 3.5 с пакетом обновления 1 (SP1) больше не устанавливается программой установки [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], но может потребоваться при установке [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] в [!INCLUDE[firstref_longhorn](../../../includes/firstref-longhorn-md.md)].</span><span class="sxs-lookup"><span data-stu-id="bcb42-122">.NET Framework 3.5 SP1 is no longer installed by [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Setup, but may be required while installing [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] on [!INCLUDE[firstref_longhorn](../../../includes/firstref-longhorn-md.md)].</span></span> <span data-ttu-id="bcb42-123">Дополнительные сведения см. в разделе [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)] [заметки о выпуске](https://go.microsoft.com/fwlink/?LinkId=296445).</span><span class="sxs-lookup"><span data-stu-id="bcb42-123">For more information, see [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)][Release Notes](https://go.microsoft.com/fwlink/?LinkId=296445).</span></span>  
  
-   <span data-ttu-id="bcb42-124">Для локальных установок программу установки [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] нужно запускать с правами администратора.</span><span class="sxs-lookup"><span data-stu-id="bcb42-124">For local installations, you must run [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Setup as an administrator.</span></span> <span data-ttu-id="bcb42-125">Если [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] устанавливается с удаленного общего ресурса, необходимо использовать учетную запись домена, у которой есть разрешения на чтение на этом удаленном ресурсе.</span><span class="sxs-lookup"><span data-stu-id="bcb42-125">If you install [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] from a remote share, you must use a domain account that has read permissions on the remote share.</span></span>  
  
-   <span data-ttu-id="bcb42-126">Чтобы обновить экземпляр служб [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] до [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)] отказоустойчивого кластера, обновляемый экземпляр должен быть отказоустойчивым кластером.</span><span class="sxs-lookup"><span data-stu-id="bcb42-126">To upgrade an instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] to a [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)] failover cluster, the instance being upgraded must be a failover cluster.</span></span>  
  
     <span data-ttu-id="bcb42-127">Чтобы переместить изолированный экземпляр [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] на отказоустойчивый кластер [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)], установите новый отказоустойчивый кластер [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)], а затем с помощью мастера копирования баз данных выполните миграцию пользовательских баз данных из изолированного экземпляра.</span><span class="sxs-lookup"><span data-stu-id="bcb42-127">To move a stand-alone instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] to a [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)] failover cluster, install a new [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)] failover cluster, and then migrate user databases from the stand-alone instance by using the Copy Database Wizard.</span></span> <span data-ttu-id="bcb42-128">Дополнительные сведения см. в статье [Use the Copy Database Wizard](../../../relational-databases/databases/use-the-copy-database-wizard.md).</span><span class="sxs-lookup"><span data-stu-id="bcb42-128">For more information, see [Use the Copy Database Wizard](../../../relational-databases/databases/use-the-copy-database-wizard.md).</span></span>  
  
## <a name="rolling-upgrades"></a><span data-ttu-id="bcb42-129">Последовательные обновления</span><span class="sxs-lookup"><span data-stu-id="bcb42-129">Rolling Upgrades</span></span>  
 <span data-ttu-id="bcb42-130">Чтобы обновить отказоустойчивый кластер [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] до версии [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)], нужно последовательно запустить программу установки в режиме обновления на каждом узле отказоустойчивого кластера (начиная с пассивных узлов).</span><span class="sxs-lookup"><span data-stu-id="bcb42-130">To upgrade a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover cluster to [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)], you must run setup with upgrade action on each failover cluster node, one at a time, starting with the passive nodes.</span></span> <span data-ttu-id="bcb42-131">В процессе обновления каждого узла связи последнего с возможными владельцами соответствующего отказоустойчивого кластера прерываются.</span><span class="sxs-lookup"><span data-stu-id="bcb42-131">As you upgrade each node, it is left out of the possible owners of the failover cluster.</span></span> <span data-ttu-id="bcb42-132">В случае непредвиденной отработки отказа обновленные узлы не участвуют в этом процессе до тех пор, пока программа установки [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] не передаст группу ресурсов кластера во владение одному из обновленных узлов.</span><span class="sxs-lookup"><span data-stu-id="bcb42-132">If there is an unexpected failover, the upgraded nodes do not participate in the failover until cluster resource group ownership is moved to an upgraded node by [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Setup.</span></span>  
  
 <span data-ttu-id="bcb42-133">По умолчанию программа установки автоматически определяет момент перехода на обновленный узел.</span><span class="sxs-lookup"><span data-stu-id="bcb42-133">By default, Setup automatically determines when to fail over to an upgraded node.</span></span> <span data-ttu-id="bcb42-134">Этот момент определяется в зависимости от общего числа узлов в экземпляре отказоустойчивого кластера и от количества уже обновленных узлов.</span><span class="sxs-lookup"><span data-stu-id="bcb42-134">This depends on the total number of nodes in the failover cluster instance and the number of nodes that have already been upgraded.</span></span> <span data-ttu-id="bcb42-135">Если обновлена половина или большее число узлов, при выполнении обновления следующего узла программа установки осуществляет отработку отказа с переходом на один из обновленных узлов.</span><span class="sxs-lookup"><span data-stu-id="bcb42-135">When half of the nodes or more have already been upgraded, Setup causes a failover to an upgraded node when you perform upgrade on the next node.</span></span> <span data-ttu-id="bcb42-136">После отработки отказа с переходом на обновленный узел кластерная группа перемещается на обновленный узел.</span><span class="sxs-lookup"><span data-stu-id="bcb42-136">Upon failover to an upgraded node, the cluster group is moved to an upgraded node.</span></span> <span data-ttu-id="bcb42-137">Все обновленные узлы помещаются в список возможных владельцев, а все еще не обновленные узлы удаляются из списка возможных владельцев.</span><span class="sxs-lookup"><span data-stu-id="bcb42-137">All the upgraded nodes are put in the possible owners list and all the nodes that are not yet upgraded are removed from the possible owners list.</span></span> <span data-ttu-id="bcb42-138">При обновлении каждого из оставшихся узлов этот узел добавляется к возможным владельцам соответствующего отказоустойчивого кластера.</span><span class="sxs-lookup"><span data-stu-id="bcb42-138">As you upgrade each remaining node, it is added to the possible owners of the failover cluster.</span></span>  
  
 <span data-ttu-id="bcb42-139">В результате этого процесса время простоя ограничивается временем отработки отказа и временем выполнения скрипта обновления базы данных в течение всей операции обновления отказоустойчивого кластера.</span><span class="sxs-lookup"><span data-stu-id="bcb42-139">This process results in downtime limited to one failover time and database upgrade script execution time during the whole failover cluster upgrade.</span></span>  
  
 <span data-ttu-id="bcb42-140">Чтобы управлять отработкой отказа узлов кластера во время обновления, запустите операцию обновления из командной строки с параметром /FAILOVERCLUSTERROLLOWNERSHIP.</span><span class="sxs-lookup"><span data-stu-id="bcb42-140">To control the failover behavior of cluster nodes during the upgrade process, run the upgrade operation at the command prompt and use the /FAILOVERCLUSTERROLLOWNERSHIP parameter.</span></span> <span data-ttu-id="bcb42-141">Дополнительные сведения см. в статье [Установка SQL Server 2014 из командной строки](../../../database-engine/install-windows/install-sql-server-from-the-command-prompt.md).</span><span class="sxs-lookup"><span data-stu-id="bcb42-141">For more information, see [Install SQL Server 2014 from the Command Prompt](../../../database-engine/install-windows/install-sql-server-from-the-command-prompt.md).</span></span>  
  
 <span data-ttu-id="bcb42-142">**Примечание** . При наличии отказоустойчивого кластера с одним узлом [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] программа установки переводит [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] группу ресурсов в режим «вне сети».</span><span class="sxs-lookup"><span data-stu-id="bcb42-142">**Note** If there is a single-node failover cluster, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Setup takes the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] resource group offline.</span></span>  
  
## <a name="considerations-when-upgrading-from-ssversion2005"></a><span data-ttu-id="bcb42-143">При обновлении [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] до новой версии необходимо учитывать следующее.</span><span class="sxs-lookup"><span data-stu-id="bcb42-143">Considerations when Upgrading from [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)]</span></span>  
 <span data-ttu-id="bcb42-144">При указании групп доменов для политики безопасности кластера в [!INCLUDE[nextref_longhorn](../../../includes/nextref-longhorn-md.md)] нельзя указывать идентификатор безопасности службы.</span><span class="sxs-lookup"><span data-stu-id="bcb42-144">If you specified domain groups for the cluster security policy, you cannot specify service SID on [!INCLUDE[nextref_longhorn](../../../includes/nextref-longhorn-md.md)].</span></span> <span data-ttu-id="bcb42-145">Если необходимо использование идентификатора безопасности службы, выполните параллельное обновление.</span><span class="sxs-lookup"><span data-stu-id="bcb42-145">If you want to use the service SID, you need to perform a side by side upgrade.</span></span>  
  
 <span data-ttu-id="bcb42-146">Если для обновления выбран компонент [!INCLUDE[ssDE](../../../includes/ssde-md.md)], в установку будет включен полнотекстовый поиск вне зависимости от того, был ли он установлен в [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)].</span><span class="sxs-lookup"><span data-stu-id="bcb42-146">When you select [!INCLUDE[ssDE](../../../includes/ssde-md.md)] for upgrade, full-text search is included in the setup regardless of whether it was installed in [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)].</span></span>  
  
 <span data-ttu-id="bcb42-147">Если полнотекстовый поиск был включен в [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)], программа установки перестраивает каталог полнотекстового поиска независимо от выбора параметров.</span><span class="sxs-lookup"><span data-stu-id="bcb42-147">If full-text search was enabled in [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)], Setup rebuilds the full-text search catalog regardless of the options available to you.</span></span>  
  
## <a name="upgrading-to-a-sssql14-multi-subnet-failover-cluster"></a><span data-ttu-id="bcb42-148">Обновление отказоустойчивого кластера с несколькими подсетями до [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)]</span><span class="sxs-lookup"><span data-stu-id="bcb42-148">Upgrading to a [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)] Multi-Subnet Failover Cluster</span></span>  
 <span data-ttu-id="bcb42-149">Существует два возможных сценария обновления.</span><span class="sxs-lookup"><span data-stu-id="bcb42-149">There are two possible scenarios for upgrades:</span></span>  
  
1.  [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]<span data-ttu-id="bcb42-150">отказоустойчивый кластер в настоящее время настроен в одной подсети. сначала необходимо обновить существующий кластер до [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)] , запуская программу установки и следуя процедуре обновления.</span><span class="sxs-lookup"><span data-stu-id="bcb42-150">failover cluster is currently configured on a single subnet: You must first upgrade the existing cluster to [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)] by launching Setup and following the upgrade process.</span></span> <span data-ttu-id="bcb42-151">После завершения обновления существующего кластера отработки отказа добавьте узел в другой подсети с помощью функциональности AddNode.</span><span class="sxs-lookup"><span data-stu-id="bcb42-151">After completing the upgrade of the existing failover cluster, add a node that is on a different subnet using the AddNode functionality.</span></span> <span data-ttu-id="bcb42-152">На странице конфигурации сети кластера подтвердите изменение значения зависимости ресурса IP-адреса на OR.</span><span class="sxs-lookup"><span data-stu-id="bcb42-152">Confirm the IP address resource dependency change to OR in the cluster network configuration page.</span></span> <span data-ttu-id="bcb42-153">Отказоустойчивый кластер [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] с несколькими сетями создан.</span><span class="sxs-lookup"><span data-stu-id="bcb42-153">You now have a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] multi-subnet failover cluster.</span></span>  
  
2.  [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]<span data-ttu-id="bcb42-154">в настоящее время отказоустойчивый кластер настроен для нескольких подсетей с помощью технологии Stretch V-LAN: сначала необходимо обновить существующий кластер до [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="bcb42-154">failover cluster is currently configured on multiple subnets using the stretch V-LAN technology: You must first upgrade the existing cluster to [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)].</span></span> <span data-ttu-id="bcb42-155">Поскольку технология распределения виртуальных ЛС служит для настройки одной подсети, конфигурацию сети необходимо изменить для использования нескольких подсетей и изменить значение зависимости ресурса IP-адреса на OR с помощью средства администрирования отказоустойчивых кластеров Windows.</span><span class="sxs-lookup"><span data-stu-id="bcb42-155">Because stretch V-LAN technology configures a single subnet, the network configuration must to be changed to multiple subnets, and change the IP address resource dependency using the Windows Failover Cluster administration tool and change the IP dependency to OR.</span></span>  
  
###  <a name="best-practices-before-upgrading-a-ssnoversion-failover-cluster"></a><a name="BestPractices"></a><span data-ttu-id="bcb42-156">Рекомендации по обновлению [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] отказоустойчивого кластера</span><span class="sxs-lookup"><span data-stu-id="bcb42-156">Best Practices Before Upgrading a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Failover Cluster</span></span>  
 <span data-ttu-id="bcb42-157">Чтобы исключить непредвиденные простои, вызванные перезагрузкой, перед выполнением обновлений на узлах отказоустойчивого кластера заранее установите пакет без перезагрузки для .NET Framework 4.0.</span><span class="sxs-lookup"><span data-stu-id="bcb42-157">To eliminate unexpected downtime caused by a restart, preinstall the no-reboot package for .NET Framework 4.0 on all the failover cluster nodes before you run the upgrade on the cluster nodes.</span></span> <span data-ttu-id="bcb42-158">Для предварительной установки необходимых компонентов рекомендуется выполнить следующие шаги.</span><span class="sxs-lookup"><span data-stu-id="bcb42-158">We recommend the following steps to preinstall the prerequisites:</span></span>  
  
-   <span data-ttu-id="bcb42-159">Установите пакет без перезагрузки для .NET Framework 4.0 и обновите только общие компоненты, начиная с пассивных узлов.</span><span class="sxs-lookup"><span data-stu-id="bcb42-159">Install the no-reboot package for .NET Framework 4.0, and upgrade only the shared components starting with the passive nodes.</span></span> <span data-ttu-id="bcb42-160">При этом будет выполнена установка [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] 4.0, установщика Windows 4.5 и файлов поддержки [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="bcb42-160">This installs [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] 4.0, Windows Installer 4.5, and [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] support files.</span></span>  
  
-   <span data-ttu-id="bcb42-161">При необходимости выполните перезагрузку системы один или несколько раз.</span><span class="sxs-lookup"><span data-stu-id="bcb42-161">Restart one or more times, as required.</span></span>  
  
-   <span data-ttu-id="bcb42-162">Перейдите на обновленный узел.</span><span class="sxs-lookup"><span data-stu-id="bcb42-162">Fail over to an upgraded node.</span></span>  
  
-   <span data-ttu-id="bcb42-163">Обновите общие компоненты на последнем оставшемся узле.</span><span class="sxs-lookup"><span data-stu-id="bcb42-163">Upgrade the shared components on the last remaining node.</span></span>  
  
 <span data-ttu-id="bcb42-164">После обновления всех общих компонентов и установки необходимых компонентов начинайте процесс обновления отказоустойчивого кластера.</span><span class="sxs-lookup"><span data-stu-id="bcb42-164">After all the shared components are upgraded and prerequisites are installed, start the failover cluster upgrade process.</span></span> <span data-ttu-id="bcb42-165">Процесс обновления необходимо выполнить на всех узлах отказоустойчивого кластера, начиная с пассивных узлов и завершая узлом, который является владельцем группы кластерных ресурсов.</span><span class="sxs-lookup"><span data-stu-id="bcb42-165">You have to run upgrade on each failover cluster node, starting with the passive nodes first and making your way toward the node that owns the cluster resource group.</span></span>  
  
-   <span data-ttu-id="bcb42-166">Добавление компонентов в существующий отказоустойчивый кластер невозможно.</span><span class="sxs-lookup"><span data-stu-id="bcb42-166">You cannot add features to an existing failover cluster.</span></span>  
  
-   <span data-ttu-id="bcb42-167">Изменение выпуска отказоустойчивого кластера ограничено определенными сценариями.</span><span class="sxs-lookup"><span data-stu-id="bcb42-167">Changing the edition of the failover cluster is limited to certain scenarios.</span></span> <span data-ttu-id="bcb42-168">Дополнительные сведения см. в статье [Supported Version and Edition Upgrades](../../../database-engine/install-windows/supported-version-and-edition-upgrades.md).</span><span class="sxs-lookup"><span data-stu-id="bcb42-168">For more information, see [Supported Version and Edition Upgrades](../../../database-engine/install-windows/supported-version-and-edition-upgrades.md).</span></span>  
  
##  <a name="to-upgrade-a-ssnoversion-failover-cluster"></a><a name="UpgradeSteps"></a> <span data-ttu-id="bcb42-169">Обновление отказоустойчивого кластера [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]</span><span class="sxs-lookup"><span data-stu-id="bcb42-169">To Upgrade a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Failover Cluster</span></span>  
  
#### <a name="to-upgrade-a-ssnoversion-failover-cluster"></a><span data-ttu-id="bcb42-170">Обновление отказоустойчивого кластера [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]</span><span class="sxs-lookup"><span data-stu-id="bcb42-170">To upgrade a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover cluster</span></span>  
  
1.  <span data-ttu-id="bcb42-171">Вставьте установочный носитель [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , перейдите в корневую папку и дважды щелкните файл Setup.exe.</span><span class="sxs-lookup"><span data-stu-id="bcb42-171">Insert the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] installation media, and from the root folder, double-click Setup.exe.</span></span> <span data-ttu-id="bcb42-172">Чтобы выполнить установку из общего сетевого ресурса, перейдите в его корневой каталог и дважды щелкните файл Setup.exe.</span><span class="sxs-lookup"><span data-stu-id="bcb42-172">To install from a network share, move to the root folder on the share, and then double-click Setup.exe.</span></span> <span data-ttu-id="bcb42-173">Может появиться запрос на установку обязательных компонентов, если они не установлены ранее.</span><span class="sxs-lookup"><span data-stu-id="bcb42-173">You may be asked to install the prerequisites, if they are not previously installed.</span></span>  
  
2.  > [!IMPORTANT]  
    >  <span data-ttu-id="bcb42-174">Дополнительные сведения о шагах 3 и 4 см. в разделе рекомендации по [обновлению отказоустойчивого кластера](#BestPractices) .</span><span class="sxs-lookup"><span data-stu-id="bcb42-174">For more information about steps 3 and 4, see the [Best Practices Before Upgrading Failover Cluster](#BestPractices) section.</span></span>  
  
3.  <span data-ttu-id="bcb42-175">После установки необходимых компонентов мастер установки запустит центр установки [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="bcb42-175">After prerequisites are installed, the Installation Wizard starts the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Installation Center.</span></span> <span data-ttu-id="bcb42-176">Чтобы обновить существующий экземпляр [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , нажмите кнопку **обновить с [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] , [!INCLUDE[ssKatmai](../../../includes/sskatmai-md.md)] [!INCLUDE[ssKilimanjaro](../../../includes/sskilimanjaro-md.md)] или [!INCLUDE[ssSQL11](../../../includes/sssql11-md.md)] .**</span><span class="sxs-lookup"><span data-stu-id="bcb42-176">To upgrade an existing instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], click **Upgrade from [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)], [!INCLUDE[ssKatmai](../../../includes/sskatmai-md.md)], [!INCLUDE[ssKilimanjaro](../../../includes/sskilimanjaro-md.md)], or [!INCLUDE[ssSQL11](../../../includes/sssql11-md.md)].**</span></span>  
  
4.  <span data-ttu-id="bcb42-177">Если требуются файлы поддержки программы установки, программа установки [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] установит их.</span><span class="sxs-lookup"><span data-stu-id="bcb42-177">If Setup support files are required, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Setup installs them.</span></span> <span data-ttu-id="bcb42-178">Если будет предложено перезагрузить компьютер, перезапустите его перед продолжением.</span><span class="sxs-lookup"><span data-stu-id="bcb42-178">If you are instructed to restart your computer, restart before you continue.</span></span>  
  
5.  <span data-ttu-id="bcb42-179">Средство проверки конфигурации системы запускает операцию обнаружения на компьютере.</span><span class="sxs-lookup"><span data-stu-id="bcb42-179">The System Configuration Checker runs a discovery operation on your computer.</span></span> <span data-ttu-id="bcb42-180">Чтобы продолжить, [!INCLUDE[clickOK](../../../includes/clickok-md.md)].</span><span class="sxs-lookup"><span data-stu-id="bcb42-180">To continue, [!INCLUDE[clickOK](../../../includes/clickok-md.md)].</span></span>  
  
6.  <span data-ttu-id="bcb42-181">На странице «Ключ продукта» введите ключ идентификатора продукта (PID) для выпуска новой версии, соответствующий выпуску старой версии продукта.</span><span class="sxs-lookup"><span data-stu-id="bcb42-181">On the Product Key page, enter the PID key for the new version edition that matches the edition of the old product version.</span></span> <span data-ttu-id="bcb42-182">Например, чтобы обновить отказоустойчивый кластер выпуска Enterprise, нужно ввести ключ PID для выпуска [!INCLUDE[ssEnterprise](../../../includes/ssenterprise-md.md)].</span><span class="sxs-lookup"><span data-stu-id="bcb42-182">For example, to upgrade an Enterprise failover cluster, you must supply a PID key for [!INCLUDE[ssEnterprise](../../../includes/ssenterprise-md.md)].</span></span> <span data-ttu-id="bcb42-183">Чтобы продолжить, нажмите кнопку **Далее** .</span><span class="sxs-lookup"><span data-stu-id="bcb42-183">Click **Next** to continue.</span></span> <span data-ttu-id="bcb42-184">Не забудьте, что используемый для обновления отказоустойчивого кластера ключ PID должен быть согласован во всех узлах данного экземпляра отказоустойчивого кластера [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="bcb42-184">Be aware that the PID key that you use for a failover cluster upgrade must be consistent across all failover cluster nodes in the same [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance.</span></span> <span data-ttu-id="bcb42-185">Дополнительные сведения см. в статьях [выпуски и компоненты SQL Server 2014](../../editions-and-components-of-sql-server-2016.md) и [поддерживаемые обновления версий и выпусков](../../../database-engine/install-windows/supported-version-and-edition-upgrades.md).</span><span class="sxs-lookup"><span data-stu-id="bcb42-185">For more information, see [Editions and Components of SQL Server 2014](../../editions-and-components-of-sql-server-2016.md) and [Supported Version and Edition Upgrades](../../../database-engine/install-windows/supported-version-and-edition-upgrades.md).</span></span>  
  
7.  <span data-ttu-id="bcb42-186">На странице «Условия лицензии» прочтите лицензионное соглашение, а затем установите флажок, подтверждая принятие условий соглашения.</span><span class="sxs-lookup"><span data-stu-id="bcb42-186">On the License Terms page, read the license agreement, and then select the check box to accept the license terms and conditions.</span></span> <span data-ttu-id="bcb42-187">Чтобы помочь в улучшении [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], можно также включить параметр наблюдения за использованием компонентов и отправлять отчеты в [!INCLUDE[msCoName](../../../includes/msconame-md.md)].</span><span class="sxs-lookup"><span data-stu-id="bcb42-187">To help improve [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], you can also enable the feature usage option and send reports to [!INCLUDE[msCoName](../../../includes/msconame-md.md)].</span></span> <span data-ttu-id="bcb42-188">**Чтобы продолжить, нажмите кнопку Далее**.</span><span class="sxs-lookup"><span data-stu-id="bcb42-188">**Click Next to continue**.</span></span> <span data-ttu-id="bcb42-189">Чтобы выйти из программы установки, нажмите кнопку **Отмена**.</span><span class="sxs-lookup"><span data-stu-id="bcb42-189">To end Setup, click **Cancel**.</span></span>  
  
8.  <span data-ttu-id="bcb42-190">На странице «Выбор экземпляра» укажите экземпляр [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , который необходимо обновить до [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)].</span><span class="sxs-lookup"><span data-stu-id="bcb42-190">On the Select Instance page, specify the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance to upgrade to [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)].</span></span> <span data-ttu-id="bcb42-191">**Чтобы продолжить, нажмите кнопку Далее**.</span><span class="sxs-lookup"><span data-stu-id="bcb42-191">**Click Next to continue**.</span></span>  
  
9. <span data-ttu-id="bcb42-192">На странице Выбор компонентов компоненты для обновления предварительно выбраны.</span><span class="sxs-lookup"><span data-stu-id="bcb42-192">On the Feature Selection page, the features to upgrade are preselected.</span></span> <span data-ttu-id="bcb42-193">После выбора компонента описание его группы отображается в правой панели окна.</span><span class="sxs-lookup"><span data-stu-id="bcb42-193">A description for each component group appears in the right pane after you select the feature name.</span></span> <span data-ttu-id="bcb42-194">Не забудьте, что во время обновления невозможно ни изменять обновляемые компоненты, ни добавлять их.</span><span class="sxs-lookup"><span data-stu-id="bcb42-194">Be aware that you cannot change the features to be upgraded, and you cannot add features during the upgrade operation.</span></span> <span data-ttu-id="bcb42-195">Сведения о добавлении компонентов к обновленному экземпляру [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)] после завершения операции обновления см. в разделе [Добавление компонентов в экземпляр компонента SQL Server 2014 &#40;&#41;установки ](../../../database-engine/install-windows/add-features-to-an-instance-of-sql-server-setup.md).</span><span class="sxs-lookup"><span data-stu-id="bcb42-195">To add features to an upgraded instance of [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)] after the upgrade operation is complete, see [Add Features to an Instance of SQL Server 2014 &#40;Setup&#41;](../../../database-engine/install-windows/add-features-to-an-instance-of-sql-server-setup.md).</span></span>  
  
     <span data-ttu-id="bcb42-196">Требования для выбранных компонентов показаны на правой панели.</span><span class="sxs-lookup"><span data-stu-id="bcb42-196">The prerequisites for the selected features are displayed on the right-hand pane.</span></span> <span data-ttu-id="bcb42-197">Программа установки SQL Server установит обязательный компонент, который еще не был установлен, в шаге установки, описанном ниже в данной процедуре.</span><span class="sxs-lookup"><span data-stu-id="bcb42-197">SQL Server Setup will install the prerequisite that are not already installed during the installation step described later in this procedure.</span></span>  
  
10. <span data-ttu-id="bcb42-198">На странице «Конфигурация экземпляра» поля автоматически заполняются из старого экземпляра.</span><span class="sxs-lookup"><span data-stu-id="bcb42-198">On the Instance Configuration page, fields are automatically populated from the old instance.</span></span> <span data-ttu-id="bcb42-199">Можно указать новое значение идентификатора экземпляра.</span><span class="sxs-lookup"><span data-stu-id="bcb42-199">You can choose to specify the new InstanceID value.</span></span>  
  
     <span data-ttu-id="bcb42-200">**Идентификатор экземпляра** — по умолчанию в качестве идентификатора экземпляра используется его имя.</span><span class="sxs-lookup"><span data-stu-id="bcb42-200">**Instance ID** - By default, the instance name is used as the Instance ID.</span></span> <span data-ttu-id="bcb42-201">Предназначен для идентификации каталогов установки и разделов реестра для данного экземпляра [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="bcb42-201">This is used to identify installation directories and registry keys for your instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="bcb42-202">Действует как для экземпляров по умолчанию, так и для именованных экземпляров.</span><span class="sxs-lookup"><span data-stu-id="bcb42-202">This is the case for default instances and named instances.</span></span> <span data-ttu-id="bcb42-203">Для экземпляра по умолчанию именем и идентификатором экземпляра является «MSSQLSERVER».</span><span class="sxs-lookup"><span data-stu-id="bcb42-203">For a default instance, the instance name and instance ID would be MSSQLSERVER.</span></span> <span data-ttu-id="bcb42-204">Если необходимо, чтобы идентификатор экземпляра отличался от значения по умолчанию, установите флажок **Идентификатор экземпляра** и введите значение.</span><span class="sxs-lookup"><span data-stu-id="bcb42-204">To use a nondefault instance ID, select the **Instance ID** check box and provide a value.</span></span> <span data-ttu-id="bcb42-205">При переопределении значения по умолчанию необходимо указывать один и тот же идентификатор экземпляра для обновляемого экземпляра на всех узлах отказоустойчивого кластера.</span><span class="sxs-lookup"><span data-stu-id="bcb42-205">If you override the default value, you must specify the same Instance ID for the instance being upgraded on all the failover cluster nodes.</span></span> <span data-ttu-id="bcb42-206">Значение идентификатора экземпляра должно быть идентичным для всех узлов.</span><span class="sxs-lookup"><span data-stu-id="bcb42-206">The Instance ID for the upgraded instance must match across the nodes.</span></span>  
  
     <span data-ttu-id="bcb42-207">**Обнаруженные экземпляры и компоненты** . в сетке отображаются экземпляры [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , наявляющиеся на компьютере, где запущена программа установки.</span><span class="sxs-lookup"><span data-stu-id="bcb42-207">**Detected instances and features** - The grid shows instances of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] that are on the computer where Setup is running.</span></span> <span data-ttu-id="bcb42-208">**Чтобы продолжить, нажмите кнопку Далее**.</span><span class="sxs-lookup"><span data-stu-id="bcb42-208">**Click Next to continue**.</span></span>  
  
11. <span data-ttu-id="bcb42-209">На странице «Требования к свободному месту на диске» показан расчет требуемого пространства на диске для выбранных компонентов, а также приведено сравнение требуемого и имеющегося свободного места на компьютере, на котором работает программа установки.</span><span class="sxs-lookup"><span data-stu-id="bcb42-209">The Disk Space Requirements page calculates the required disk space for the features that you specify, and compares requirements to the available disk space on the computer where Setup is running.</span></span>  
  
12. <span data-ttu-id="bcb42-210">На странице «Обновление полнотекстового поиска» укажите параметры обновления для обновляемых баз данных.</span><span class="sxs-lookup"><span data-stu-id="bcb42-210">On the Full-Text Search Upgrade page, specify the upgrade options for the databases being upgraded.</span></span> <span data-ttu-id="bcb42-211">Дополнительные сведения см. в разделе [Параметры обновления полнотекстового поиска](../../install/full-text-search-upgrade-options.md).</span><span class="sxs-lookup"><span data-stu-id="bcb42-211">For more information, see [Full-Text Search Upgrade Options](../../install/full-text-search-upgrade-options.md).</span></span>  
  
13. <span data-ttu-id="bcb42-212">На странице **Отчеты об ошибках** укажите сведения, которые будут отправлены в [!INCLUDE[msCoName](../../../includes/msconame-md.md)] и помогут улучшить [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="bcb42-212">On the **Error Reporting** page, specify the information that you want to send to [!INCLUDE[msCoName](../../../includes/msconame-md.md)] that will help improve [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="bcb42-213">По умолчанию параметры создания отчетов об ошибках включены.</span><span class="sxs-lookup"><span data-stu-id="bcb42-213">By default, options for error reporting is enabled.</span></span>  
  
14. <span data-ttu-id="bcb42-214">Перед началом операции обновления средство проверки конфигурации выполнится еще раз для оценки конфигурации компьютера с выбранными компонентами [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="bcb42-214">The System Configuration Checker runs one more set of rules to validate your computer configuration with the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] features that you have specified, before the upgrade operation begins.</span></span>  
  
15. <span data-ttu-id="bcb42-215">На странице «Отчет по обновлению кластера» отображается список узлов экземпляра отказоустойчивого кластера и сведения о версии экземпляра для компонентов [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] на каждом узле.</span><span class="sxs-lookup"><span data-stu-id="bcb42-215">The Cluster Upgrade Report page displays the list of nodes in the failover cluster instance and the instance version information for [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] components on each node.</span></span> <span data-ttu-id="bcb42-216">Также отображается состояние скрипта базы данных и состояние скрипта репликации.</span><span class="sxs-lookup"><span data-stu-id="bcb42-216">It displays the database script status and replication script status.</span></span> <span data-ttu-id="bcb42-217">Кроме того, на этой странице выводятся информационные сообщения о том, что произойдет при нажатии кнопки **Далее**.</span><span class="sxs-lookup"><span data-stu-id="bcb42-217">In addition, it also displays informational messages on what will occur when you click **Next**.</span></span> <span data-ttu-id="bcb42-218">В зависимости от количества узлов отказоустойчивого кластера, которые уже были обновлены, и общего числа узлов программа установки отображает поведение при отработке отказа, которое происходит при нажатии кнопки **Далее**.</span><span class="sxs-lookup"><span data-stu-id="bcb42-218">Depending on the number of failover cluster nodes that have already been upgraded and total number of nodes, Setup displays the failover behavior that happens when you click **Next**.</span></span> <span data-ttu-id="bcb42-219">Кроме того, если еще не установлены необходимые компоненты, программа предупреждает о возможных простоях.</span><span class="sxs-lookup"><span data-stu-id="bcb42-219">It also warns about potential unnecessary downtime if you have not installed the prerequisites already.</span></span>  
  
16. <span data-ttu-id="bcb42-220">На странице готовности к обновлению отображается представление параметров установки в виде дерева, заданных в программе установки.</span><span class="sxs-lookup"><span data-stu-id="bcb42-220">The Ready to Upgrade page displays a tree view of installation options that were specified during Setup.</span></span> <span data-ttu-id="bcb42-221">Чтобы продолжить, нажмите кнопку **Обновить**.</span><span class="sxs-lookup"><span data-stu-id="bcb42-221">To continue, click **Upgrade**.</span></span> [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="bcb42-222">Программа установки вначале устанавливает требуемые компоненты для выбранных средств, затем устанавливает сами средства.</span><span class="sxs-lookup"><span data-stu-id="bcb42-222">Setup will first install the required prerequisites for the selected features followed by the feature installation.</span></span>  
  
17. <span data-ttu-id="bcb42-223">В ходе обновления на странице выполнения установки отображается информация о состоянии, так что во время выполнения программы установки можно наблюдать за ходом обновления на текущем узле.</span><span class="sxs-lookup"><span data-stu-id="bcb42-223">During upgrade, the Progress page provides status so that you can monitor the upgrade progress on the current node as Setup continues.</span></span>  
  
18. <span data-ttu-id="bcb42-224">По завершении обновления текущего узла на странице «Отчет по обновлению кластера» отображаются сведения о состоянии обновления для всех узлов отказоустойчивого кластера, компонентов на каждом узле отказоустойчивого кластера, а также информация об их версиях.</span><span class="sxs-lookup"><span data-stu-id="bcb42-224">After the upgrade of the current node, the Cluster Upgrade Report page displays an upgrade status information for all the failover cluster nodes, features on each failover cluster node, and their version information.</span></span> <span data-ttu-id="bcb42-225">Подтвердите отображенную информацию о версии и продолжайте обновление оставшихся узлов.</span><span class="sxs-lookup"><span data-stu-id="bcb42-225">Confirm the version information that is displayed and continue with the upgrade of the remaining nodes.</span></span> <span data-ttu-id="bcb42-226">В случае отработки отказа с переходом на обновленные узлы информация об этом будет также отображена на странице состояния.</span><span class="sxs-lookup"><span data-stu-id="bcb42-226">If the failover to upgraded nodes occurred, this is also apparent on the status page.</span></span> <span data-ttu-id="bcb42-227">Эти данные можно также проверить в оснастке Windows «Администрирование кластера».</span><span class="sxs-lookup"><span data-stu-id="bcb42-227">You can also check in the Windows Cluster administrator tool to confirm.</span></span>  
  
19. <span data-ttu-id="bcb42-228">После обновления на завершающей странице будет приведена ссылка на файл сводного журнала установки и даны другие важные примечания.</span><span class="sxs-lookup"><span data-stu-id="bcb42-228">After upgrade, the Complete page provides a link to the summary log file for the installation and other important notes.</span></span> <span data-ttu-id="bcb42-229">Чтобы завершить процесс установки [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , нажмите кнопку **Готово**.</span><span class="sxs-lookup"><span data-stu-id="bcb42-229">To complete the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] installation process, click **Close**.</span></span>  
  
20. <span data-ttu-id="bcb42-230">Если будет предложено перезагрузить компьютер, выполните перезагрузку.</span><span class="sxs-lookup"><span data-stu-id="bcb42-230">If you are instructed to restart the computer, do so now.</span></span> <span data-ttu-id="bcb42-231">После завершения установки важно прочитать сообщение мастера установки.</span><span class="sxs-lookup"><span data-stu-id="bcb42-231">It is important to read the message from the Installation Wizard when you have finished with Setup.</span></span> <span data-ttu-id="bcb42-232">Дополнительные сведения о файлах журналов установки см. в разделе [Просмотр и чтение файлов журналов программы установки SQL Server](../../../database-engine/install-windows/view-and-read-sql-server-setup-log-files.md).</span><span class="sxs-lookup"><span data-stu-id="bcb42-232">For more information about Setup log files, see [View and Read SQL Server Setup Log Files](../../../database-engine/install-windows/view-and-read-sql-server-setup-log-files.md).</span></span>  
  
21. <span data-ttu-id="bcb42-233">Чтобы завершить процесс обновления, повторите шаги с 1 по 21 на всех других узлах отказоустойчивого кластера [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="bcb42-233">To complete the upgrade process, repeat steps 1 to 21 on all the other nodes on the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover cluster.</span></span>  
  
## <a name="to-upgrade-a-ssnoversion-multi-subnet-failover-cluster"></a><span data-ttu-id="bcb42-234">Обновление отказоустойчивого кластера с несколькими подсетями [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]</span><span class="sxs-lookup"><span data-stu-id="bcb42-234">To upgrade a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Multi-Subnet Failover Cluster</span></span>  
  
#### <a name="to-upgrade-to-a-ssnoversion-multi-subnet-failover-cluster-existing-ssnoversion-cluster-is-a-non-multi-subnet-cluster"></a><span data-ttu-id="bcb42-235">Обновление до отказоустойчивого кластера [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] с несколькими подсетями (Существующий кластер [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] не является кластером с несколькими подсетями).</span><span class="sxs-lookup"><span data-stu-id="bcb42-235">To upgrade to a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] multi-subnet failover Cluster (Existing [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] cluster is a non multi-subnet cluster).</span></span>  
  
1.  <span data-ttu-id="bcb42-236">Выполните шаги с 1 по 24, описанные в разделе [обновление SQL Server отказоустойчивого кластера](#UpgradeSteps) выше, чтобы обновить кластер до [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="bcb42-236">Follow the steps 1 through 24 described in the [To upgrade a SQL Server failover cluster](#UpgradeSteps) section above to upgrade your cluster to [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)].</span></span>  
  
2.  <span data-ttu-id="bcb42-237">С помощью действия установки AddNode добавьте узел из другой подсети и подтвердите значение зависимости OR для ресурса IP-адреса на странице **Конфигурация сети кластера** .</span><span class="sxs-lookup"><span data-stu-id="bcb42-237">Add a node on a different subnet using the AddNode Setup action and confirm the IP address resource dependency to OR on the **Cluster Network Configuration** page.</span></span> <span data-ttu-id="bcb42-238">Дополнительные сведения см. [в разделе Добавление или удаление узлов в отказоустойчивом кластере SQL Server &#40;установки&#41;](../install/add-or-remove-nodes-in-a-sql-server-failover-cluster-setup.md).</span><span class="sxs-lookup"><span data-stu-id="bcb42-238">For more information, see [Add or Remove Nodes in a SQL Server Failover Cluster &#40;Setup&#41;](../install/add-or-remove-nodes-in-a-sql-server-failover-cluster-setup.md).</span></span>  
  
#### <a name="to-upgrade-a-multi-subnet-cluster-currently-using-stretch-v-lan"></a><span data-ttu-id="bcb42-239">Обновление кластера с несколькими подсетями, использующего технологию распределенных виртуальных ЛС.</span><span class="sxs-lookup"><span data-stu-id="bcb42-239">To upgrade a multi-subnet cluster currently using Stretch V-Lan.</span></span>  
  
1.  <span data-ttu-id="bcb42-240">Выполните шаги с 1 по 24, описанные в разделе [обновление SQL Server отказоустойчивого кластера](#UpgradeSteps) выше, чтобы обновить кластер до [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="bcb42-240">Follow the steps 1 through 24 described in the [To upgrade a SQL Server failover cluster](#UpgradeSteps) section above to upgrade your cluster to [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)].</span></span>  
  
2.  <span data-ttu-id="bcb42-241">Измените параметры сети, чтобы переместить удаленный узел в другую подсеть.</span><span class="sxs-lookup"><span data-stu-id="bcb42-241">Change the network settings to move the remote node to a different subnet.</span></span>  
  
3.  <span data-ttu-id="bcb42-242">С помощью средства управления отказоустойчивым кластером Windows добавьте новый IP-адрес для новой подсети и задайте значение OR для зависимости ресурса IP-адреса.</span><span class="sxs-lookup"><span data-stu-id="bcb42-242">Using the Windows Failover Cluster management tool, add a new IP address for the new subnet set the IP address resource dependency to OR.</span></span>  
  
## <a name="next-steps"></a><span data-ttu-id="bcb42-243">Next Steps</span><span class="sxs-lookup"><span data-stu-id="bcb42-243">Next Steps</span></span>  
 <span data-ttu-id="bcb42-244">После обновления до [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)]выполните следующие задачи.</span><span class="sxs-lookup"><span data-stu-id="bcb42-244">After you upgrade to [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)], complete the following tasks:</span></span>  
  
-   <span data-ttu-id="bcb42-245">Зарегистрируйте серверы</span><span class="sxs-lookup"><span data-stu-id="bcb42-245">Register your servers</span></span>  
  
     <span data-ttu-id="bcb42-246">В процессе обновления настройки реестра для предшествующего экземпляра [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] удаляются.</span><span class="sxs-lookup"><span data-stu-id="bcb42-246">Upgrade removes registry settings for the previous [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance.</span></span> <span data-ttu-id="bcb42-247">После обновления необходимо заново зарегистрировать серверы.</span><span class="sxs-lookup"><span data-stu-id="bcb42-247">After you upgrade, you must reregister your servers.</span></span>  
  
-   <span data-ttu-id="bcb42-248">Обновите статистику</span><span class="sxs-lookup"><span data-stu-id="bcb42-248">Update statistics</span></span>  
  
     <span data-ttu-id="bcb42-249">Чтобы помочь оптимизировать производительность запросов, рекомендуется после обновления обновить статистику для всех баз данных.</span><span class="sxs-lookup"><span data-stu-id="bcb42-249">To help optimize query performance, we recommend that you update statistics on all databases following upgrade.</span></span> <span data-ttu-id="bcb42-250">Вызовите хранимую процедуру **sp_updatestats**, чтобы обновить статистику в пользовательских таблицах баз данных [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="bcb42-250">Use the **sp_updatestats** stored procedure to update statistics in user-defined tables in [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] databases.</span></span>  
  
-   <span data-ttu-id="bcb42-251">Настройте новую установку [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]</span><span class="sxs-lookup"><span data-stu-id="bcb42-251">Configure your new [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] installation</span></span>  
  
     <span data-ttu-id="bcb42-252">Чтобы сократить уязвимую для атак контактную зону системы, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] выборочно устанавливает и активирует ключевые службы и функции.</span><span class="sxs-lookup"><span data-stu-id="bcb42-252">To reduce the attackable surface area of a system, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] selectively installs and enables key services and features.</span></span> <span data-ttu-id="bcb42-253">Дополнительные сведения о настройке контактной зоны см. в файле Readme для данной версии.</span><span class="sxs-lookup"><span data-stu-id="bcb42-253">For more information about surface area configuration, see the readme file for this release.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="bcb42-254">См. также:</span><span class="sxs-lookup"><span data-stu-id="bcb42-254">See Also</span></span>  
 <span data-ttu-id="bcb42-255">[Установка SQL Server 2014 из командной строки](../../../database-engine/install-windows/install-sql-server-from-the-command-prompt.md) </span><span class="sxs-lookup"><span data-stu-id="bcb42-255">[Install SQL Server 2014 from the Command Prompt](../../../database-engine/install-windows/install-sql-server-from-the-command-prompt.md) </span></span>  
 [<span data-ttu-id="bcb42-256">Просмотр и чтение файлов журналов программы установки SQL Server</span><span class="sxs-lookup"><span data-stu-id="bcb42-256">View and Read SQL Server Setup Log Files</span></span>](../../../database-engine/install-windows/view-and-read-sql-server-setup-log-files.md)  
  
  
