---
title: Настройка подключения к базе данных сервера отчетов (диспетчер конфигурации служб Reporting Services) | Документы Майкрософт
ms.custom: ''
ms.date: 08/10/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: database-engine
ms.topic: conceptual
helpviewer_keywords:
- connections [Reporting Services], configuring
- connections [Reporting Services]
- report servers [Reporting Services], connections
- report server database
- databases [Reporting Services], connections
- security [Reporting Services], database connections
ms.assetid: 9759a9fb-35e9-4215-969b-a9f1fea18487
author: maggiesMSFT
ms.author: maggies
ms.openlocfilehash: 879bafb45a6603aae8920e599c464af10bf1022e
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87669267"
---
# <a name="configure-a-report-server-database-connection--ssrs-configuration-manager"></a>Настройка подключения к базе данных сервера отчетов (диспетчер конфигурации служб Reporting Services)
  Для функционирования каждого экземпляра сервера отчетов необходимо соединение с базой данных сервера отчетов, в которой хранятся отчеты, модели отчетов, общие источники данных, ресурсы, а также метаданные, управляемые сервером. Исходное соединение может быть создано во время установки сервера отчетов, если производится установка конфигурации по умолчанию. В большинстве случаев после завершения установки настройка соединения осуществляется при помощи программы настройки служб [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] . Такие параметры соединения, как тип учетной записи и учетные данные, можно изменять в любое время. Пошаговые инструкции по созданию базы данных и настройке соединения см. в разделе [Создание базы данных сервера отчетов, работающего в собственном режиме (диспетчер конфигурации служб SSRS)](../../reporting-services/install-windows/ssrs-report-server-create-a-native-mode-report-server-database.md).  
  
 Подключение к базе данных сервера отчетов необходимо настраивать в следующих случаях.  
  
-   Первоначальная настройка сервера отчетов.  
  
-   Настройка сервера отчетов на использование другой базы данных сервера отчетов.  
  
-   Изменение учетной записи пользователя или пароля, используемых для подключения к базе данных. Подключение к базе данных необходимо обновлять только в том случае, если данные об учетных записях хранятся в файле RSReportServer.config. При использовании в соединении учетной записи службы (в ней в качестве типа учетных данных используется встроенная безопасность Windows) пароль не сохраняется, поэтому нет необходимости обновлять сведения о соединении. Дополнительные сведения об изменении учетных записей см. в разделе [Настройка учетной записи службы сервера отчетов (диспетчер конфигурации служб SSRS)](../../reporting-services/install-windows/configure-the-report-server-service-account-ssrs-configuration-manager.md).  
  
-   Настройка сервера отчетов с масштабным развертыванием. Настройка масштабного развертывания требует создания нескольких соединений с базой данных сервера отчетов. Дополнительные сведения о том, как выполнять эту операцию, см. в разделе [Настройка масштабного развертывания сервера отчетов в собственном режиме (диспетчер конфигурации служб SSRS)](../../reporting-services/install-windows/configure-a-native-mode-report-server-scale-out-deployment.md).  
  
## <a name="how-reporting-services-connects-to-the-database-engine"></a>Подключение служб Reporting Services к компоненту Database Engine  
 Доступ сервера отчетов к базе данных сервера отчетов определяется учетными данными и сведениями о соединении, а также ключами шифрования, доступными серверу отчетов. Для хранения и получения конфиденциальных данных необходимо иметь допустимый ключ шифрования. Ключи шифрования создаются автоматически при первичной настройке базы данных. После создания эти ключи необходимо обновить при изменении идентификатора службы сервера отчетов. Дополнительные сведения о работе с ключами шифрования см. в разделе [Настройка ключей шифрования и управление ими (диспетчер конфигурации служб SSRS)](../../reporting-services/install-windows/ssrs-encryption-keys-manage-encryption-keys.md).  
  
 База данных сервера отчетов является внутренним компонентом, доступ к которому имеется только у сервера отчетов. Учетные данные и сведения о соединении, указываемые для базы данных сервера отчетов, используются исключительно сервером отчетов. Пользователям, запрашивающим отчеты, не требуются разрешения для баз данных или имя входа для базы данных сервера отчетов.  
  
 [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)]использует `System.Data.SqlClient` для подключения к компоненту, на котором [!INCLUDE[ssDE](../../includes/ssde-md.md)] размещается база данных сервера отчетов. При работе с локальным экземпляром компонента [!INCLUDE[ssDE](../../includes/ssde-md.md)]сервер отчетов устанавливает соединение при помощи общей памяти. Если для базы данных сервера отчетов используется удаленный сервер баз данных, в зависимости от используемого выпуска может потребоваться включить удаленные соединения. В выпуске Enterprise Edition удаленные соединения по умолчанию разрешены для протокола TCP/IP.  
  
 Чтобы проверить, допускает ли экземпляр удаленные соединения, нажмите кнопку **Пуск**, последовательно выберите пункты **Все программы**, [!INCLUDE[ssCurrentUI](../../includes/sscurrentui-md.md)], **Средства настройки**, а затем запустите **Диспетчер конфигурации SQL Server**и убедитесь в том, что для каждой из служб включен протокол TCP/IP.  
  
 При включении удаленных соединений включаются также клиентские и серверные протоколы. Чтобы проверить включенные протоколы, нажмите кнопку **Пуск**, выберите пункт **Все программы**, затем [!INCLUDE[ssCurrentUI](../../includes/sscurrentui-md.md)], **Средства настройки**, затем пункт **Диспетчер конфигурации SQL Server**, далее пункт **Сетевая конфигурация SQL Server**, а затем выберите пункт **Протоколы для MSSQLSERVER**. Дополнительные сведения см. в разделе [Включение или отключение сетевого протокола сервера](../../database-engine/configure-windows/enable-or-disable-a-server-network-protocol.md) электронной документации по [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .  
  
## <a name="defining-a-report-server-database-connection"></a>Определение подключения к базе данных сервера отчетов  
 Чтобы настроить соединение, можно использовать диспетчер конфигурации служб [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] или программу командной строки **rsconfig** . Для функционирования сервера отчетов требуются следующие сведения о соединении.  
  
-   Имя экземпляра компонента [!INCLUDE[ssDE](../../includes/ssde-md.md)] , на котором содержится база данных сервера отчетов.  
  
-   Имя базы данных сервера отчетов. При создании нового соединения можно создать новую базу данных сервера отчетов либо выбрать одну из существующих. Дополнительные сведения см. в разделе [Создание базы данных сервера отчетов (диспетчер конфигурации служб SSRS)](../../../2014/sql-server/install/create-a-report-server-database-ssrs-configuration-manager.md).  
  
-   Тип учетных данных. Могут быть использованы учетные записи службы, учетная запись домена Windows или имя входа базы данных [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .  
  
-   Имя пользователя и пароль (требуется только для учетной записи домена Windows или имени входа для [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ).  
  
 Заданные учетные данные должны иметь доступ к базе данных сервера отчетов. При использовании программы настройки служб [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] этот шаг выполняется автоматически. Дополнительные сведения о разрешениях, необходимых для доступа к базе данных, см. в разделе «Разрешения базы данных» данного подраздела.  
  
### <a name="storing-database-connection-information"></a>Хранение сведений о подключении к базе данных  
 [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] хранят зашифрованные сведения о соединениях в представленных ниже установках RSreportserver.config. Чтобы создать зашифрованные значения указанных установок, необходимо использовать программу настройки служб [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] или программу rsconfig.  
  
 Не все из этих значений указываются для каждого из типов соединений. Если подключение настроено с использованием значений по умолчанию (то есть с помощью учетных записей служб для подключения), <`LogonUser`>, <`LogonDomain`> и <> `LogonCred` будут пустыми, как показано ниже.  
  
```  
<Dsn></Dsn>  
<ConnectionType></ConnectionType>  
<LogonUser></LogonUser>  
<LogonDomain></LogonDomain>  
<LogonCred></LogonCred>  
```  
  
 Если соединение настраивается на использование определенной учетной записи Windows или имени входа в базу данных, не забудьте обновить эти сохраненные значения при изменении учетной записи или имени входа.  
  
### <a name="choosing-a-credential-type"></a>Выбор типа учетных данных  
 В подключении к базе данных сервера отчетов используются следующие три типа учетных данных.  
  
-   Встроенная безопасность Windows, использующая учетную запись службы сервера отчетов. Поскольку сервер отчетов реализован в виде отдельной службы, доступ к базе данных требуется только для той учетной записи, для которой запущена эта служба.  
  
-   Учетная запись пользователя Windows. Если сервер отчетов и его база данных установлены на том же компьютере, можно пользоваться локальной учетной записью. В противном случае необходимо использовать учетную запись домена.  
  
-   Имя входа для [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .  
  
> [!NOTE]  
>  Запрещается проводить нестандартную проверку подлинности для подключения к базе данных сервера отчетов. Нестандартная проверка подлинности используется только для главного подключения к серверу отчетов. Старайтесь не оказывать воздействия на соединения с базой данных сервера отчетов или с внешними источниками данных, предоставляющими содержимое отчетов.  
  
 Если экземпляр компонента [!INCLUDE[ssDE](../../includes/ssde-md.md)] настроен для использования проверки подлинности Windows и экземпляр находится в том же домене, что и компьютер сервера отчетов (или в доверенном домене для этого домена), то соединение можно настроить для использования учетной записи службы или учетной записи пользователя домена, которые с помощью программы настройки служб [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] обрабатываются как свойство соединения. Если сервер базы данных находится в другом домене или если используется безопасность рабочих групп, соединение нужно настроить на использование имени входа в базу данных [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] . Соединение при этом должно быть обязательно зашифровано.  
  
##### <a name="using-service-accounts-and-integrated-security"></a>Использование учетных записей служб и встроенной безопасности  
 Встроенная безопасность Windows позволяет устанавливать соединение с использованием учетной записи службы сервера отчетов. Этой учетной записи предоставляются права доступа к базе данных сервера отчетов. При установке служб [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] в стандартной конфигурации этот тип учетных данных выбирается программой установки по умолчанию.  
  
 Учетная запись службы представляет собой доверенную учетную запись, обеспечивающую простоту управления подключением к базе данных сервера отчетов. Поскольку для соединения учетная запись службы использует встроенную безопасность Windows, необходимости в сохранении учетных данных нет. Однако при последующем изменении пароля или идентификатора учетной записи службы (например, при переключении типа учетной записи со встроенной на доменную) необходимо внести изменения при помощи программы настройки служб [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] . Эта средство автоматически обновляет измененные сведения учетной записи в разрешениях базы данных. Дополнительные сведения см. в разделе [Настройка учетной записи службы сервера отчетов (диспетчер конфигурации служб SSRS)](../../reporting-services/install-windows/configure-the-report-server-service-account-ssrs-configuration-manager.md).  
  
 При настройке подключения к базе данных с использованием учетной записи службы этой учетной записи должны быть предоставлены сетевые разрешения, если база данных сервера отчетов располагается на удаленном компьютере. Не используйте служебную учетную запись, если база данных сервера отчетов находится на другом домене, защищена брандмауэром, либо в случае применения безопасности рабочих групп, а не безопасности домена. Используйте вместо этого учетную запись пользователя базы данных [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .  
  
##### <a name="using-a-domain-user-account"></a>Использование учетной записи «Пользователь домена»  
 Укажите учетную запись пользователя Windows для соединения сервера отчетов с базой данных сервера отчетов. Если используется локальная учетная запись или учетная запись домена, подключение к базе данных необходимо обновлять всякий раз, когда изменяется пароль для нее. Обновление соединения осуществляйте всегда при помощи программы настройки служб [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] .  
  
##### <a name="using-a-sql-server-login"></a>Использование имени входа SQL Server  
 Чтобы подключиться к базе данных сервера отчетов, можно задать единое имя входа [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] . Если используется проверка подлинности [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , а база данных сервера отчетов находится на удаленном компьютере, то в целях обеспечения безопасности передачи данных между серверами следует использовать IPSec. При использовании имени входа базы данных необходимо обновлять подключение к базе данных каждый раз, когда меняется пароль или учетная запись.  
  
### <a name="database-permissions"></a>Разрешения базы данных  
 Учетные записи, предоставляемые для подключения к базе данных сервера отчетов, выполняют следующие функции:  
  
-   Роли**public** и **RSExecRole** для базы данных **ReportServer** .  
  
-   Роль**RSExecRole** для баз данных **master**, **msdb**и **ReportServerTempDB** .  
  
 Когда соединение создается или изменяется посредством программы настройки служб [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] , указанные разрешения предоставляются автоматически. Если используется программа rsconfig и для соединения была указана другая учетная запись, то для указанной новой учетной записи необходимо обновить имя входа [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] . С помощью программы настройки служб [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] можно создать файлы-скрипты, обновляющие имя входа [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] для сервера отчетов.  
  
### <a name="verifying-the-database-name"></a>Проверка имени базы данных  
 Чтобы выяснить, какая база данных сервера отчетов используется конкретным экземпляром сервера отчетов, используйте программу настройки служб [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] . Чтобы найти имя, необходимо подключиться к экземпляру сервера отчетов и открыть страницу установки базы данных.  
  
## <a name="using-a-different-report-server-database-or-moving-a-report-server-database"></a>Использование другой базы данных сервера отчетов или перемещение базы данных сервера отчетов  
 Чтобы настроить сервер отчетов на использование другой базы данных сервера отчетов, необходимо изменить сведения о подключении. Обычно переключение между базами данных происходит при развертывании рабочего сервера отчетов. Переключение с тестовой базы данных сервера отчета на рабочую базу данных обычно происходит при развертывании рабочего сервера. Также можно перемещать базу данных сервера отчета на другой компьютер. Дополнительные сведения см. в разделе [Обновление и миграция служб Reporting Services](../../reporting-services/install-windows/upgrade-and-migrate-reporting-services.md) электронной документации по [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .  
  
## <a name="configuring-multiple-reports-servers-to-use-the-same-report-server-database"></a>Настройка нескольких серверов отчетов для использования общей базы данных сервера отчетов  
 Можно настроить несколько серверов отчетов на использование общей базы данных сервера отчетов. Такая настройка развертывания называется масштабным развертыванием. При необходимости запуска нескольких серверов отчетов в кластере сервера такая настройка является обязательной. Однако данную конфигурацию можно использовать также для сегментирования приложений службы или для проверки установки и настроек нового экземпляра сервера отчетов и сравнения его с уже существующим экземпляром сервера отчетов. Дополнительные сведения см. в разделе [Настройка масштабного развертывания сервера отчетов в собственном режиме (диспетчер конфигурации служб SSRS)](../../reporting-services/install-windows/configure-a-native-mode-report-server-scale-out-deployment.md).  
  
## <a name="see-also"></a>См. также:  
 [Создание базы данных сервера отчетов &#40;службы SSRS Configuration Manager&#41;](../../../2014/sql-server/install/create-a-report-server-database-ssrs-configuration-manager.md)   
 [Управление сервером отчетов Reporting Services в собственном режиме](../../reporting-services/report-server/manage-a-reporting-services-native-mode-report-server.md)   
 [Настройка учетной записи службы сервера отчетов (диспетчер конфигурации служб SSRS)](../../reporting-services/install-windows/configure-the-report-server-service-account-ssrs-configuration-manager.md)  
  
  
