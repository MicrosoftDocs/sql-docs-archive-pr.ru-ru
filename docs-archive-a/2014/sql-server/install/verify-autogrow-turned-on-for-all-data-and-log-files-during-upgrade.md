---
title: Убедитесь, что автоувеличение включено для всех файлов данных и журналов в процессе обновления | Документация Майкрософт
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: database-engine
ms.topic: conceptual
helpviewer_keywords:
- log files [SQL Server], size
- data files [SQL Server], size
- tempdb [SQL Server], size
- autogrow [SQL Server]
ms.assetid: a5860904-e2be-4224-8a51-df18a10d3fb9
author: mashamsft
ms.author: mathoma
ms.openlocfilehash: 8ca12075598bce210a905cbdfba89f2d879cf09b
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87751644"
---
# <a name="verify-autogrow-is-turned-on-for-all-data-and-log-files-during-the-upgrade-process"></a><span data-ttu-id="9724c-102">Убедитесь, что во время процесса обновления автоувеличение размера включено для всех файлов с данными и файлов журнала</span><span class="sxs-lookup"><span data-stu-id="9724c-102">Verify autogrow is turned on for all data and log files during the upgrade process</span></span>
  <span data-ttu-id="9724c-103">Помощник по обновлению обнаружил файлы данных или журнала, для которых не установлен параметр «Автоувеличение».</span><span class="sxs-lookup"><span data-stu-id="9724c-103">Upgrade Advisor detected data or log files that are not set to autogrow.</span></span> <span data-ttu-id="9724c-104">Для новых и улучшенных функций требуется дополнительное место на диске для пользовательских баз данных и системной базы данных **tempdb** .</span><span class="sxs-lookup"><span data-stu-id="9724c-104">New and enhanced features require additional disk space for user databases and the **tempdb** system database.</span></span> <span data-ttu-id="9724c-105">Чтобы ресурсы могли увеличивать размер при обновлении и последующих производственных операциях, рекомендуется настроить Автоувеличение на ON для всех файлов данных и журналов пользователя, а также файлов данных и журналов **tempdb** перед обновлением.</span><span class="sxs-lookup"><span data-stu-id="9724c-105">To ensure resources can accommodate size increases during upgrade and subsequent production operations, we recommend setting autogrow to ON for all user data and log files and the **tempdb** data and log files before upgrading.</span></span>  
  
 <span data-ttu-id="9724c-106">После окончания обновления и тестирования рабочей нагрузки можно отключить автоувеличение или соответствующим образом откорректировать значение приращения FILEGROWTH для файлов журналов и пользовательских данных.</span><span class="sxs-lookup"><span data-stu-id="9724c-106">After you have upgraded and tested your workloads, you may want to turn autogrow off or adjust the FILEGROWTH increment accordingly for user data and log files.</span></span> <span data-ttu-id="9724c-107">Рекомендуется оставить автоувеличение для системной базы данных **tempdb** .</span><span class="sxs-lookup"><span data-stu-id="9724c-107">We recommend that autogrow remain on for the **tempdb** system database.</span></span> <span data-ttu-id="9724c-108">Дополнительные сведения см. в разделе «Планирование загрузки базы данных tempdb» в электронной документации по [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="9724c-108">For more information, see "Capacity Planning for tempdb" in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Books Online.</span></span>  
  
## <a name="component"></a><span data-ttu-id="9724c-109">Компонент</span><span class="sxs-lookup"><span data-stu-id="9724c-109">Component</span></span>  
 [!INCLUDE[ssDE](../../includes/ssde-md.md)]  
  
## <a name="description"></a><span data-ttu-id="9724c-110">Описание</span><span class="sxs-lookup"><span data-stu-id="9724c-110">Description</span></span>  
 <span data-ttu-id="9724c-111">**Файлы данных**</span><span class="sxs-lookup"><span data-stu-id="9724c-111">**Data files**</span></span>  
  
 <span data-ttu-id="9724c-112">Следующая таблица отображает изменения тех функций [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], которые приводят к росту требований к месту на диске для определяемых пользователем файлов данных.</span><span class="sxs-lookup"><span data-stu-id="9724c-112">The following table lists changes to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] features that result in additional disk space requirements for user-defined data files.</span></span>  
  
|<span data-ttu-id="9724c-113">Признак</span><span class="sxs-lookup"><span data-stu-id="9724c-113">Feature</span></span>|<span data-ttu-id="9724c-114">Изменения, появившиеся в [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]</span><span class="sxs-lookup"><span data-stu-id="9724c-114">Changes Introduced in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]</span></span>|  
|-------------|-----------------------------------------------------|  
|<span data-ttu-id="9724c-115">Полнотекстовый</span><span class="sxs-lookup"><span data-stu-id="9724c-115">Full-text</span></span>|<span data-ttu-id="9724c-116">Вместо полнотекстового каталога в файле данных сохраняется схема идентификаторов документов.</span><span class="sxs-lookup"><span data-stu-id="9724c-116">The document ID (DOCID) map is stored in the data file instead of in the full-text catalog.</span></span>|  
|<span data-ttu-id="9724c-117">Столбцы типа `text`, `ntext` и `image`</span><span class="sxs-lookup"><span data-stu-id="9724c-117">`text`, `ntext`, and `image` columns</span></span>|<span data-ttu-id="9724c-118">Столбцы больших объектов (LOB), определенные как данные типа `text`, `ntext` или `image`, дополнительно требуют 40 байт места на диске на каждый столбец.</span><span class="sxs-lookup"><span data-stu-id="9724c-118">Large object (LOB) columns defined as `text`, `ntext`, or `image` data types require an additional 40 bytes of disk space per column.</span></span> <span data-ttu-id="9724c-119">Это единовременное увеличение необходимого пространства происходит при первом обновлении каждого столбца LOB.</span><span class="sxs-lookup"><span data-stu-id="9724c-119">This one-time space increase occurs during the first update of each LOB column.</span></span>|  
|<span data-ttu-id="9724c-120">метаданные</span><span class="sxs-lookup"><span data-stu-id="9724c-120">metadata</span></span>|<span data-ttu-id="9724c-121">В файловой группе PRIMARY каждой пользовательской базы данных создаются и поддерживаются дополнительные системные метаданные для объектов базы данных и разрешений пользователей.</span><span class="sxs-lookup"><span data-stu-id="9724c-121">Additional system metadata is created and maintained in the PRIMARY filegroup of each user database for database objects and user permissions.</span></span> <span data-ttu-id="9724c-122">Например, в более ранних версиях [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] разрешения, связанные с объектами, предоставляющими или получающими разрешения, хранились в одной строке в виде битовой карты.</span><span class="sxs-lookup"><span data-stu-id="9724c-122">For example, in earlier versions of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], the permissions associated with a grantor or grantee is stored in a single row as a bitmap.</span></span> <span data-ttu-id="9724c-123">Битовая карта расширена до нескольких строк.</span><span class="sxs-lookup"><span data-stu-id="9724c-123">The bitmap is expanded into multiple rows.</span></span><br /><br /> <span data-ttu-id="9724c-124">Для того чтобы в ходе обновления сохранились как старые, так и новые метаданные, необходимо, чтобы было достаточно места на диске.</span><span class="sxs-lookup"><span data-stu-id="9724c-124">During the upgrade process, there must be enough disk space to store both the old and new metadata.</span></span> <span data-ttu-id="9724c-125">Старые метаданные удаляются после завершения обновления.</span><span class="sxs-lookup"><span data-stu-id="9724c-125">The old metadata is deleted after the upgrade is complete.</span></span>|  
  
 <span data-ttu-id="9724c-126">**Файлы журнала транзакций**</span><span class="sxs-lookup"><span data-stu-id="9724c-126">**Transaction log files**</span></span>  
  
 <span data-ttu-id="9724c-127">Следующая таблица отображает изменения тех функций [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], которые приводят к росту требований к месту на диске для определяемых пользователем файлов журнала транзакций.</span><span class="sxs-lookup"><span data-stu-id="9724c-127">The following table lists changes to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] features that result in additional disk space requirements for user-defined transaction log files.</span></span>  
  
|<span data-ttu-id="9724c-128">Признак</span><span class="sxs-lookup"><span data-stu-id="9724c-128">Feature</span></span>|<span data-ttu-id="9724c-129">Изменения, появившиеся в [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]</span><span class="sxs-lookup"><span data-stu-id="9724c-129">Changes Introduced in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]</span></span>|  
|-------------|-----------------------------------------------------|  
|<span data-ttu-id="9724c-130">Восстановление из резервной копии или по журналу транзакций</span><span class="sxs-lookup"><span data-stu-id="9724c-130">Restore and recovery</span></span>|<span data-ttu-id="9724c-131">Во время стадии отката при восстановлении после сбоя [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] дает возможность пользователям производить доступ к базе данных.</span><span class="sxs-lookup"><span data-stu-id="9724c-131">During the undo phase of a crash recovery, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] allows users to access the database.</span></span> <span data-ttu-id="9724c-132">Это возможно потому, что транзакции, не зафиксированные на момент возникновения сбоя, повторно получают все блокировки, которыми они владели перед сбоем.</span><span class="sxs-lookup"><span data-stu-id="9724c-132">This is possible because the transactions that were uncommitted when the crash occurred reacquire any locks they held before the crash.</span></span> <span data-ttu-id="9724c-133">При откате транзакций эти блокировки защищают транзакции от вмешательства пользователей.</span><span class="sxs-lookup"><span data-stu-id="9724c-133">While transactions are being rolled back, their locks protect them from interference by users.</span></span> <span data-ttu-id="9724c-134">Эти дополнительные данные о блокировках должны сохраняться в журнале транзакций.</span><span class="sxs-lookup"><span data-stu-id="9724c-134">This additional locking information must be maintained in the transaction log.</span></span>|  
  
 <span data-ttu-id="9724c-135">**Данные tempdb и файлы журнала**</span><span class="sxs-lookup"><span data-stu-id="9724c-135">**tempdb data and log files**</span></span>  
  
 <span data-ttu-id="9724c-136">В более ранних версиях [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] база данных **tempdb** используется для хранения следующих объектов:</span><span class="sxs-lookup"><span data-stu-id="9724c-136">In earlier versions of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], the **tempdb** database is used to store the following objects:</span></span>  
  
-   <span data-ttu-id="9724c-137">явно создаваемые временные объекты: таблицы, хранимые процедуры, табличные переменные и курсоры;</span><span class="sxs-lookup"><span data-stu-id="9724c-137">Temporary objects explicitly created such as tables, stored procedures, table variables, or cursors.</span></span>  
  
-   <span data-ttu-id="9724c-138">внутренние рабочие таблицы, создаваемые компонентом [!INCLUDE[ssDE](../../includes/ssde-md.md)];</span><span class="sxs-lookup"><span data-stu-id="9724c-138">Internal work tables created by the [!INCLUDE[ssDE](../../includes/ssde-md.md)].</span></span>  
  
-   <span data-ttu-id="9724c-139">результаты временных сортировок при создании или перестроении индексов, если указан параметр SORT_IN_TEMPDB.</span><span class="sxs-lookup"><span data-stu-id="9724c-139">Results from temporary sorts when you create or rebuild indexes, if SORT_IN_TEMPDB is specified.</span></span>  
  
 <span data-ttu-id="9724c-140">Дополнительные объекты также используют базу данных **tempdb** .</span><span class="sxs-lookup"><span data-stu-id="9724c-140">Additional objects also use the **tempdb** database.</span></span> <span data-ttu-id="9724c-141">В следующей таблице перечислены изменения и дополнения к [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] функциям, которые приводят к дополнительным требованиям к месту на диске для файлов данных и журналов **tempdb** .</span><span class="sxs-lookup"><span data-stu-id="9724c-141">The following table lists changes or additions to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] features that result in additional disk space requirements for **tempdb** data and log files.</span></span>  
  
|<span data-ttu-id="9724c-142">Признак</span><span class="sxs-lookup"><span data-stu-id="9724c-142">Feature</span></span>|<span data-ttu-id="9724c-143">Изменения, появившиеся в [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]</span><span class="sxs-lookup"><span data-stu-id="9724c-143">Changes Introduced in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]</span></span>|  
|-------------|-----------------------------------------------------|  
|<span data-ttu-id="9724c-144">Управление версиями строк</span><span class="sxs-lookup"><span data-stu-id="9724c-144">Row versioning</span></span>|<span data-ttu-id="9724c-145">Управление версиями строк — это стандартная структура в [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], используемая для следующих действий.</span><span class="sxs-lookup"><span data-stu-id="9724c-145">Row versioning is a general framework in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] that is used to:</span></span><br /><br /> <span data-ttu-id="9724c-146">Триггеры поддержки: создание таблиц inserted и deleted в триггерах.</span><span class="sxs-lookup"><span data-stu-id="9724c-146">Support triggers: Build the inserted and deleted tables in triggers.</span></span> <span data-ttu-id="9724c-147">Предусмотрено управление версиями для всех строк, изменяемых триггером,</span><span class="sxs-lookup"><span data-stu-id="9724c-147">Any rows modified by the trigger are versioned.</span></span> <span data-ttu-id="9724c-148">в том числе строк, измененных инструкцией, которая инициировала триггер, а также всех изменений данных, выполненных триггером;</span><span class="sxs-lookup"><span data-stu-id="9724c-148">This includes the rows modified by the statement that launched the trigger, as well as any data modifications made by the trigger.</span></span> <span data-ttu-id="9724c-149">Триггеры AFTER используют хранилище версий **базы данных tempdb** для хранения образов строк, измененных триггером.</span><span class="sxs-lookup"><span data-stu-id="9724c-149">AFTER triggers use the version store of **tempdb** to hold the before images of the rows changed by the trigger.</span></span> <span data-ttu-id="9724c-150">При массовой загрузке данных с включенными триггерами копия каждой строки добавляется в хранилище версий.</span><span class="sxs-lookup"><span data-stu-id="9724c-150">When you bulkload data with triggers enabled, a copy of each row is added to the version store.</span></span><br /><br /> <span data-ttu-id="9724c-151">Поддержка режима MARS.</span><span class="sxs-lookup"><span data-stu-id="9724c-151">Support Multiple Active Result Sets (MARS).</span></span> <span data-ttu-id="9724c-152">Если в ходе сеанса MARS выдается инструкция изменения данных (например, INSERT, UPDATE или DELETE) в момент, когда есть активный результирующий набор, выполняется управление версиями строк, которых коснулось изменение.</span><span class="sxs-lookup"><span data-stu-id="9724c-152">If a MARS session issues a data modification statement (such as INSERT, UPDATE, or DELETE) at a time there is an active result set, the rows affected by the modification statement are versioned.</span></span><br /><br /> <span data-ttu-id="9724c-153">поддержки операций с индексами, в которых задан параметр ONLINE;</span><span class="sxs-lookup"><span data-stu-id="9724c-153">Support index operations that specify the ONLINE option.</span></span> <span data-ttu-id="9724c-154">Для действий с индексами в оперативном режиме применяется управление версиями строк, позволяющее изолировать действия с индексами от воздействия изменений, внесенных другими транзакциями.</span><span class="sxs-lookup"><span data-stu-id="9724c-154">Online index operations use row versioning to isolate the index operation from the effects of modifications made by other transactions.</span></span> <span data-ttu-id="9724c-155">Это исключает необходимость запрашивать общую блокировку уже считанных записей.</span><span class="sxs-lookup"><span data-stu-id="9724c-155">This avoids the need for requesting share locks on rows that have been read.</span></span> <span data-ttu-id="9724c-156">Кроме того, одновременное выполнение операций обновления и удаления пользователей во время операций с индексами в сети требует наличия пространства для записей версий в **базе данных tempdb**.</span><span class="sxs-lookup"><span data-stu-id="9724c-156">In addition, concurrent user update and delete operations during online index operations require space for version records in **tempdb**.</span></span><br /><br /> <span data-ttu-id="9724c-157">Поддержка уровней изоляции транзакций на основе управления версиями строк: Новая реализация уровня изоляции READ COMMITTED, использующая управление версиями строк для обеспечения согласованности чтения на уровне инструкций.</span><span class="sxs-lookup"><span data-stu-id="9724c-157">Support row versioning-based transaction isolation levels: A new implementation of read committed isolation level that uses row versioning to provide statement-level read consistency.</span></span> <span data-ttu-id="9724c-158">нового уровня изоляции и моментального снимка для обеспечения совместимости считывания на уровне транзакций.</span><span class="sxs-lookup"><span data-stu-id="9724c-158">A new isolation level, snapshot, to provide transaction-level read consistency.</span></span><br /><br /> <br /><br /> <span data-ttu-id="9724c-159">Версии строк хранятся в хранилище версий **tempdb** достаточно долго для удовлетворения требований транзакций, выполняемых на уровнях изоляции на основе управления версиями строк.</span><span class="sxs-lookup"><span data-stu-id="9724c-159">Row versions are held in the **tempdb** version store long enough to satisfy the requirements of transactions running under row versioning-based isolation levels.</span></span><br /><br /> <span data-ttu-id="9724c-160">Дополнительные сведения об управлении версиями строк и хранилище версий см. в разделе «Основные сведения об уровнях изоляции на основе управления версиями строк» электронной документации по [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="9724c-160">For more information about row versioning and the version store, see the topic "Understanding Row Versioning-based Isolation Levels" in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Books Online.</span></span>|  
|<span data-ttu-id="9724c-161">Кэширование метаданных временных таблиц и временных переменных</span><span class="sxs-lookup"><span data-stu-id="9724c-161">Caching of temp table and temp variable metadata</span></span>|<span data-ttu-id="9724c-162">Для всех метаданных временной таблицы и переменной TEMP, кэшированной в кэше метаданных [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , для **базы данных tempdb**выделяется две дополнительные страницы.</span><span class="sxs-lookup"><span data-stu-id="9724c-162">For every metadata of temp table and temp variable cached in the metadata cache by [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], two extra pages are allocated for **tempdb**.</span></span><br /><br /> <span data-ttu-id="9724c-163">Если хранимая процедура или триггер создает временную таблицу или временную переменную, то временный объект не удаляется, когда процедура или триггер завершает свое выполнение.</span><span class="sxs-lookup"><span data-stu-id="9724c-163">If a stored procedure or trigger creates a temp table or temp variable, the temporary object is not deleted when the procedure or trigger completes execution.</span></span> <span data-ttu-id="9724c-164">Вместо этого временный объект усекается до одной страницы и используется заново в следующий раз, когда выполняется процедура или триггер.</span><span class="sxs-lookup"><span data-stu-id="9724c-164">Instead, the temporary object is truncated to one page and reused the next time the procedure or trigger is executed.</span></span>|  
|<span data-ttu-id="9724c-165">Индексы секционированных таблиц</span><span class="sxs-lookup"><span data-stu-id="9724c-165">Indexes on partitioned tables</span></span>|<span data-ttu-id="9724c-166">При [!INCLUDE[ssDE](../../includes/ssde-md.md)] выполнении сортировки для построения секционированных индексов в **базе данных tempdb** требуется достаточно места для хранения промежуточных операций сортировки каждой секции, если указан параметр SORT_IN_TEMPDB index.</span><span class="sxs-lookup"><span data-stu-id="9724c-166">When the [!INCLUDE[ssDE](../../includes/ssde-md.md)] performs sorting to build partitioned indexes, enough space to hold the intermediate sort runs of each partition is required in **tempdb** if the SORT_IN_TEMPDB index option is specified.</span></span>|  
|[!INCLUDE[ssSB](../../includes/sssb-md.md)]|[!INCLUDE[ssSB](../../includes/sssb-md.md)]<span data-ttu-id="9724c-167">явно использует **базу данных tempdb** при сохранении существующего контекста диалогового окна, который не может оставаться в памяти (примерно 1 КБ на диалог).</span><span class="sxs-lookup"><span data-stu-id="9724c-167">explicitly uses **tempdb** when preserving existing dialog context that cannot stay in memory (approximately 1 KB per dialog).</span></span><br /><br /> [!INCLUDE[ssSB](../../includes/sssb-md.md)]<span data-ttu-id="9724c-168">неявно использует **базу данных tempdb** с помощью кэширования объектов в контексте выполнения запроса.</span><span class="sxs-lookup"><span data-stu-id="9724c-168">implicitly uses **tempdb** through the caching of objects in the context of query execution.</span></span> <span data-ttu-id="9724c-169">Например, рабочие таблицы используются для событий таймера и доставляемых в фоне диалогов.</span><span class="sxs-lookup"><span data-stu-id="9724c-169">For example, work tables used for timer events and background delivered conversations.</span></span><br /><br /> <span data-ttu-id="9724c-170">Компонент DBMail, уведомления о событиях и уведомления о запросах неявно используют компонент [!INCLUDE[ssSB](../../includes/sssb-md.md)].</span><span class="sxs-lookup"><span data-stu-id="9724c-170">The features DBMail, event notifications, and query notifications implicitly use [!INCLUDE[ssSB](../../includes/sssb-md.md)].</span></span>|  
|<span data-ttu-id="9724c-171">Тип данных больших объектов (LOB)</span><span class="sxs-lookup"><span data-stu-id="9724c-171">Large object (LOB) data type</span></span><br /><br /> <span data-ttu-id="9724c-172">Параметры и переменные больших объектов</span><span class="sxs-lookup"><span data-stu-id="9724c-172">LOB variables and parameters</span></span>|<span data-ttu-id="9724c-173">Типы данных `varchar(max)` , `nvarchar(max)` ,,, **varbinary (max)**, `ntext` и `image,` , `xml` являются типами больших объектов.</span><span class="sxs-lookup"><span data-stu-id="9724c-173">The data types `varchar(max)`, `nvarchar(max)`, **varbinary(max)text**, `ntext`, `image,` and `xml` are large object types.</span></span><br /><br /> <span data-ttu-id="9724c-174">Если для базы данных включен уровень изоляции транзакций на основе управления версиями строк и выполняются изменения больших объектов, измененный фрагмент LOB копируется в хранилище версий **базы данных tempdb**.</span><span class="sxs-lookup"><span data-stu-id="9724c-174">When a row versioning-based transaction isolation level is enabled on the database and modifications of large objects are made, the changed fragment of the LOB is copied to the version store in **tempdb**.</span></span><br /><br /> <span data-ttu-id="9724c-175">Параметры, определенные как тип данных больших объектов, хранятся в **tempdb**.</span><span class="sxs-lookup"><span data-stu-id="9724c-175">Parameters defined as a large object data type are stored in **tempdb**.</span></span>|  
|<span data-ttu-id="9724c-176">Обобщенные табличные выражения</span><span class="sxs-lookup"><span data-stu-id="9724c-176">Common table expressions (CTEs)</span></span>|<span data-ttu-id="9724c-177">Временные рабочие таблицы для операций с очередями создаются в **базе данных tempdb** при выполнении запросов обобщенных табличных выражений.</span><span class="sxs-lookup"><span data-stu-id="9724c-177">Temporary work tables for spool operations are created in **tempdb** when common table expression queries are executed.</span></span>|  
  
## <a name="corrective-action"></a><span data-ttu-id="9724c-178">Действие по исправлению</span><span class="sxs-lookup"><span data-stu-id="9724c-178">Corrective Action</span></span>  
 <span data-ttu-id="9724c-179">Чтобы назначить файлу данных или журнала автоувеличение, измените следующие инструкции, указывающие файлы данных и журнала для базы данных.</span><span class="sxs-lookup"><span data-stu-id="9724c-179">To set a data or log file to autogrow, modify the following statements to specify the data and log for your database.</span></span> <span data-ttu-id="9724c-180">Следует настроить увеличение параметра FILEGROWTH до значения, соответствующего среде.</span><span class="sxs-lookup"><span data-stu-id="9724c-180">You should adjust the FILEGROWTH increment to a value that is appropriate for your environment.</span></span>  
  
```  
ALTER DATABASE tempdb  
MODIFY FILE  
    (NAME = tempdev,  
    FILEGROWTH = 20MB);  
GO  
ALTER DATABASE tempdb  
MODIFY FILE  
    (NAME = templog,  
    FILEGROWTH = 10MB);  
```  
  
 <span data-ttu-id="9724c-181">Шаг роста по умолчанию для файлов данных равен 1 МБ.</span><span class="sxs-lookup"><span data-stu-id="9724c-181">The default growth increment for data files is 1 MB.</span></span> <span data-ttu-id="9724c-182">Значение по умолчанию для файла журнала равно 10 %.</span><span class="sxs-lookup"><span data-stu-id="9724c-182">The log file default is10%.</span></span> <span data-ttu-id="9724c-183">При настройке шага роста параметра FILEGROWTH пользуйтесь следующими общими рекомендациями.</span><span class="sxs-lookup"><span data-stu-id="9724c-183">We recommend the following general guidelines when setting the FILEGROWTH increment:</span></span>  
  
|<span data-ttu-id="9724c-184">Размер файла</span><span class="sxs-lookup"><span data-stu-id="9724c-184">File size</span></span>|<span data-ttu-id="9724c-185">Шаг роста FILEGROWTH</span><span class="sxs-lookup"><span data-stu-id="9724c-185">FILEGROWTH increment</span></span>|  
|---------------|--------------------------|  
|<span data-ttu-id="9724c-186">0–50 МБ</span><span class="sxs-lookup"><span data-stu-id="9724c-186">0-50MB</span></span>|<span data-ttu-id="9724c-187">10 МБ</span><span class="sxs-lookup"><span data-stu-id="9724c-187">10MB</span></span>|  
|<span data-ttu-id="9724c-188">100–200 МБ</span><span class="sxs-lookup"><span data-stu-id="9724c-188">100-200MB</span></span>|<span data-ttu-id="9724c-189">20 МБ</span><span class="sxs-lookup"><span data-stu-id="9724c-189">20MB</span></span>|  
|<span data-ttu-id="9724c-190">500 МБ и больше</span><span class="sxs-lookup"><span data-stu-id="9724c-190">500MB or more</span></span>|<span data-ttu-id="9724c-191">10 %</span><span class="sxs-lookup"><span data-stu-id="9724c-191">10%</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="9724c-192">См. также:</span><span class="sxs-lookup"><span data-stu-id="9724c-192">See Also</span></span>  
 <span data-ttu-id="9724c-193">[Проблемы обновления ядро СУБД](../../../2014/sql-server/install/database-engine-upgrade-issues.md) </span><span class="sxs-lookup"><span data-stu-id="9724c-193">[Database Engine Upgrade Issues](../../../2014/sql-server/install/database-engine-upgrade-issues.md) </span></span>  
 [<span data-ttu-id="9724c-194">Советник по переходу SQL Server 2014 &#91;New&#93;</span><span class="sxs-lookup"><span data-stu-id="9724c-194">SQL Server 2014 Upgrade Advisor &#91;new&#93;</span></span>](sql-server-2014-upgrade-advisor.md)  
  
  
