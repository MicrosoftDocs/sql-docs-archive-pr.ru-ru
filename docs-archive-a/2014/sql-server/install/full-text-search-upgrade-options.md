---
title: Параметры обновления полнотекстового поиска | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: database-engine
ms.topic: conceptual
f1_keywords:
- Full-Text Search
- Upgrade options, Full-Text Search
ms.assetid: 16c9376b-5fbb-4495-a429-06a2493849c9
author: rothja
ms.author: jroth
ms.openlocfilehash: ade7a05563598440c3fdc79dd4b3584f7f797d4e
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87730053"
---
# <a name="full-text-search-upgrade-options"></a>Режимы обновления полнотекстового поиска
  Используйте страницу «Режимы обновления полнотекстового поиска» мастера установки [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] для выбора параметра обновления полнотекстового поиска, который будет использоваться в базах данных, которые обновляются в данный момент.  
  
 В службах [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] все полнотекстовые индексы располагались в полнотекстовых каталогах, принадлежащих файловой группе, имели физический путь и обрабатывались как файлы базы данных. Теперь полнотекстовый каталог является логическим понятием — виртуальным объектом, который ссылается на группу полнотекстовых индексов. В связи с этим новые полнотекстовые каталоги не обрабатываются как файлы базы данных с физическим путем. Однако при обновлении любого полнотекстового каталога, содержащего файлы данных, новая файловая группа создается на том же диске. Это обеспечивает соблюдение старого поведения дискового ввода-вывода после обновления. Если существует корневой путь, то любой полнотекстовый индекс размещается в новой файловой группе. Если старый путь полнотекстового каталога недействителен, то обновление будет хранить полнотекстовый индекс в той же файловой группе, в которой хранится базовая таблица, либо в случае с секционированной таблицей — в первичной файловой группе.  
  
## <a name="options"></a>Варианты  
 При обновлении до [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]следует выбрать один из следующих параметров полнотекстового обновления.  
  
 **Импорт**  
 Полнотекстовые индексы импортируются. Обычно импорт производится значительно быстрее перестроения. Например, если используется только один ЦП, то импорт выполняется в 10 раз быстрее, чем перестроение. Однако в полнотекстовых каталогах, импортированных из [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] , новые улучшенные средства разбиения по словам не используются, поэтому со временем рекомендуется произвести перестроение полнотекстовых каталогов.  
  
> [!NOTE]  
>  Перестроение может выполняться в многопоточном режиме; если доступно более 10 процессоров, то перестроение может выполниться быстрее импорта, если будет разрешено использовать все процессоры.  
  
 Если полнотекстовый каталог недоступен, перестраиваются связанные полнотекстовые индексы. Этот параметр доступен только для баз данных [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] .  
  
 Дополнительные сведения о влиянии импорта полнотекстового индекса см. в подразделе «Замечания по выбору режима полнотекстового обновления» далее в этом разделе.  
  
 **Перестроение**  
 Полнотекстовые каталоги перестраиваются с помощью новых и улучшенных средств разбиения по словам. Перестроение индексов может занять длительное время, а после обновления может потребоваться значительный объем ресурсов ЦП и памяти.  
  
 **Сброс**  
 Полнотекстовые каталоги сбрасываются. При обновлении с [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)]файлы полнотекстового каталога удаляются, но метаданные для полнотекстовых каталогов и полнотекстовых индексов сохраняются. После обновления для всех полнотекстовых индексов отключается отслеживание изменений и сканирование не запускается автоматически. После завершения обновления каталог останется пустым, пока не будет вручную запущено полное заполнение.  
  
 Все данные параметры обновления обеспечивают максимальное использование улучшенных полнотекстовых возможностей в обновленных базах данных.  
  
## <a name="considerations-for-choosing-a-full-text-upgrade-option"></a>Замечания по выбору режима полнотекстового обновления  
 При выборе режима обновления необходимо учитывать следующие соображения.  
  
-   Как используются средства разбиения по словам?  
  
     В службу полнотекстового поиска в [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] входят новые средства разбиения по словам и парадигматические модули. Они могут повлиять на результаты полнотекстовых запросов [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] для определенного текстового шаблона или сценария. Следовательно, при выборе подходящего режима обновления важно учитывать то, как будут использоваться средства разбиения по словам.  
  
    -   Если средства разбиения по словам в используемом языке полнотекстового поиска не были изменены или если точность восстановления не играет большой роли, то целесообразно использовать импорт. Если позднее возникнут проблемы при восстановлении, то можно будет выполнить обновление для использования новых средств разбиения по словам, выполнив перестроение полнотекстовых каталогов.  
  
    -   Если точность восстановления имеет значение, а пользователь использует средства разбиения по словам, которые были добавлены после [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)], то целесообразно выполнить перестроение.  
  
-   Были ли полнотекстовые индексы построены в целочисленных столбцах полнотекстовых ключей?  
  
     Перестроение выполняет внутренние оптимизации, которые в некоторых случаях могут увеличить производительность запросов обновленных полнотекстовых индексов. В частности, если в полнотекстовых каталогах пользователя содержатся полнотекстовые индексы, у которых полнотекстовый ключевой столбец базовой таблицы имеет тип данных integer, то при перестроении достигается идеальная производительность полнотекстовых запросов. В данном случае рекомендуется использовать параметр **Перестроение** .  
  
    > [!NOTE]  
    >  Применительно к полнотекстовым индексам в [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]рекомендуется, чтобы столбец, который служит полнотекстовым ключом, имел тип данных integer. Дополнительные сведения см. в разделе [Улучшение производительности полнотекстовых индексов](../../relational-databases/indexes/indexes.md).  
  
-   Насколько важно перевести сервер в режим «в сети»?  
  
     Импорт или перестроение отнимает много ресурсов процессора, что задерживает обновление остальных частей экземпляра сервера и перевод его в режим «в сети». Если важно перевести экземпляр сервера в режим «в сети» как можно скорее, а пользователь способен выполнить после обновления заполнение вручную, то целесообразно будет использовать режим **Сброс** .  
  
## <a name="additional-resources"></a>Дополнительные ресурсы  
  
