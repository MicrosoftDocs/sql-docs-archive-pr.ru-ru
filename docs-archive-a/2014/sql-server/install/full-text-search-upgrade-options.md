---
title: Параметры обновления полнотекстового поиска | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: database-engine
ms.topic: conceptual
f1_keywords:
- Full-Text Search
- Upgrade options, Full-Text Search
ms.assetid: 16c9376b-5fbb-4495-a429-06a2493849c9
author: rothja
ms.author: jroth
ms.openlocfilehash: ade7a05563598440c3fdc79dd4b3584f7f797d4e
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87730053"
---
# <a name="full-text-search-upgrade-options"></a><span data-ttu-id="b1052-102">Режимы обновления полнотекстового поиска</span><span class="sxs-lookup"><span data-stu-id="b1052-102">Full-Text Search Upgrade Options</span></span>
  <span data-ttu-id="b1052-103">Используйте страницу «Режимы обновления полнотекстового поиска» мастера установки [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] для выбора параметра обновления полнотекстового поиска, который будет использоваться в базах данных, которые обновляются в данный момент.</span><span class="sxs-lookup"><span data-stu-id="b1052-103">Use the Full-Text Search Upgrade Options page of the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Installation Wizard to select the full-text search upgrade option to use for the databases that you are upgrading at this time.</span></span>  
  
 <span data-ttu-id="b1052-104">В службах [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] все полнотекстовые индексы располагались в полнотекстовых каталогах, принадлежащих файловой группе, имели физический путь и обрабатывались как файлы базы данных.</span><span class="sxs-lookup"><span data-stu-id="b1052-104">In [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] each full-text index resides in a full-text catalog that belongs to a filegroup, has a physical path, and is treated as a database file.</span></span> <span data-ttu-id="b1052-105">Теперь полнотекстовый каталог является логическим понятием — виртуальным объектом, который ссылается на группу полнотекстовых индексов.</span><span class="sxs-lookup"><span data-stu-id="b1052-105">Now, a full-text catalog is a logical concept-a virtual object-that refers to a group of full-text indexes.</span></span> <span data-ttu-id="b1052-106">В связи с этим новые полнотекстовые каталоги не обрабатываются как файлы базы данных с физическим путем.</span><span class="sxs-lookup"><span data-stu-id="b1052-106">Therefore, a new full-text catalog is not treated as a database file with a physical path.</span></span> <span data-ttu-id="b1052-107">Однако при обновлении любого полнотекстового каталога, содержащего файлы данных, новая файловая группа создается на том же диске.</span><span class="sxs-lookup"><span data-stu-id="b1052-107">However, during upgrade of any full-text catalog that contains data files, a new filegroup is created on same disk.</span></span> <span data-ttu-id="b1052-108">Это обеспечивает соблюдение старого поведения дискового ввода-вывода после обновления.</span><span class="sxs-lookup"><span data-stu-id="b1052-108">This maintains the old disk I/O behavior after upgrade.</span></span> <span data-ttu-id="b1052-109">Если существует корневой путь, то любой полнотекстовый индекс размещается в новой файловой группе.</span><span class="sxs-lookup"><span data-stu-id="b1052-109">Any full-text index from that catalog is placed in the new filegroup if the root path exists.</span></span> <span data-ttu-id="b1052-110">Если старый путь полнотекстового каталога недействителен, то обновление будет хранить полнотекстовый индекс в той же файловой группе, в которой хранится базовая таблица, либо в случае с секционированной таблицей — в первичной файловой группе.</span><span class="sxs-lookup"><span data-stu-id="b1052-110">If the old full-text catalog path is invalid, the upgrade keeps the full-text index in the same filegroup as base table or, for a partitioned table, in the primary filegroup.</span></span>  
  
## <a name="options"></a><span data-ttu-id="b1052-111">Варианты</span><span class="sxs-lookup"><span data-stu-id="b1052-111">Options</span></span>  
 <span data-ttu-id="b1052-112">При обновлении до [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]следует выбрать один из следующих параметров полнотекстового обновления.</span><span class="sxs-lookup"><span data-stu-id="b1052-112">When you upgrade to [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], choose one of the following full-text upgrade options.</span></span>  
  
 <span data-ttu-id="b1052-113">**Импорт**</span><span class="sxs-lookup"><span data-stu-id="b1052-113">**Import**</span></span>  
 <span data-ttu-id="b1052-114">Полнотекстовые индексы импортируются.</span><span class="sxs-lookup"><span data-stu-id="b1052-114">Full-text catalogs are imported.</span></span> <span data-ttu-id="b1052-115">Обычно импорт производится значительно быстрее перестроения.</span><span class="sxs-lookup"><span data-stu-id="b1052-115">Typically, import is significantly faster than rebuild.</span></span> <span data-ttu-id="b1052-116">Например, если используется только один ЦП, то импорт выполняется в 10 раз быстрее, чем перестроение.</span><span class="sxs-lookup"><span data-stu-id="b1052-116">For example, when using only one CPU, import runs about 10 times faster than rebuild.</span></span> <span data-ttu-id="b1052-117">Однако в полнотекстовых каталогах, импортированных из [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] , новые улучшенные средства разбиения по словам не используются, поэтому со временем рекомендуется произвести перестроение полнотекстовых каталогов.</span><span class="sxs-lookup"><span data-stu-id="b1052-117">However, a full-text catalog imported from [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] does not use the new and enhanced word breakers, so you might want to rebuild your full-text catalogs eventually.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="b1052-118">Перестроение может выполняться в многопоточном режиме; если доступно более 10 процессоров, то перестроение может выполниться быстрее импорта, если будет разрешено использовать все процессоры.</span><span class="sxs-lookup"><span data-stu-id="b1052-118">Rebuild can run in multi-threaded mode, and if more than 10 CPUs are available, rebuild might run faster than import if you allow rebuild to use all of the CPUs.</span></span>  
  
 <span data-ttu-id="b1052-119">Если полнотекстовый каталог недоступен, перестраиваются связанные полнотекстовые индексы.</span><span class="sxs-lookup"><span data-stu-id="b1052-119">If a full-text catalog is not available, the associated full-text indexes are rebuilt.</span></span> <span data-ttu-id="b1052-120">Этот параметр доступен только для баз данных [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="b1052-120">This option is available for only [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] databases.</span></span>  
  
 <span data-ttu-id="b1052-121">Дополнительные сведения о влиянии импорта полнотекстового индекса см. в подразделе «Замечания по выбору режима полнотекстового обновления» далее в этом разделе.</span><span class="sxs-lookup"><span data-stu-id="b1052-121">For information about the impact of importing full-text index, see "Considerations for Choosing a Full-Text Upgrade Option," later in this topic.</span></span>  
  
 <span data-ttu-id="b1052-122">**Перестроение**</span><span class="sxs-lookup"><span data-stu-id="b1052-122">**Rebuild**</span></span>  
 <span data-ttu-id="b1052-123">Полнотекстовые каталоги перестраиваются с помощью новых и улучшенных средств разбиения по словам.</span><span class="sxs-lookup"><span data-stu-id="b1052-123">Full-text catalogs are rebuilt using the new and enhanced word breakers.</span></span> <span data-ttu-id="b1052-124">Перестроение индексов может занять длительное время, а после обновления может потребоваться значительный объем ресурсов ЦП и памяти.</span><span class="sxs-lookup"><span data-stu-id="b1052-124">Rebuilding indexes can take a lot of time, and a significant amount of CPU and memory might be required after the upgrade.</span></span>  
  
 <span data-ttu-id="b1052-125">**Сброс**</span><span class="sxs-lookup"><span data-stu-id="b1052-125">**Reset**</span></span>  
 <span data-ttu-id="b1052-126">Полнотекстовые каталоги сбрасываются.</span><span class="sxs-lookup"><span data-stu-id="b1052-126">Full-text catalogs are reset.</span></span> <span data-ttu-id="b1052-127">При обновлении с [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)]файлы полнотекстового каталога удаляются, но метаданные для полнотекстовых каталогов и полнотекстовых индексов сохраняются.</span><span class="sxs-lookup"><span data-stu-id="b1052-127">When upgrading from [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)], full-text catalog files are removed, but the metadata for full-text catalogs and full-text indexes is retained.</span></span> <span data-ttu-id="b1052-128">После обновления для всех полнотекстовых индексов отключается отслеживание изменений и сканирование не запускается автоматически.</span><span class="sxs-lookup"><span data-stu-id="b1052-128">After being upgraded, all full-text indexes are disabled for change tracking and crawls are not started automatically.</span></span> <span data-ttu-id="b1052-129">После завершения обновления каталог останется пустым, пока не будет вручную запущено полное заполнение.</span><span class="sxs-lookup"><span data-stu-id="b1052-129">The catalog will remain empty until you manually issue a full population, after the upgrade completes.</span></span>  
  
 <span data-ttu-id="b1052-130">Все данные параметры обновления обеспечивают максимальное использование улучшенных полнотекстовых возможностей в обновленных базах данных.</span><span class="sxs-lookup"><span data-stu-id="b1052-130">All of these upgrade options ensure that upgraded databases benefit fully from full-text performance enhancements.</span></span>  
  
## <a name="considerations-for-choosing-a-full-text-upgrade-option"></a><span data-ttu-id="b1052-131">Замечания по выбору режима полнотекстового обновления</span><span class="sxs-lookup"><span data-stu-id="b1052-131">Considerations for Choosing a Full-Text Upgrade Option</span></span>  
 <span data-ttu-id="b1052-132">При выборе режима обновления необходимо учитывать следующие соображения.</span><span class="sxs-lookup"><span data-stu-id="b1052-132">When choosing the upgrade option for your upgrade, consider the following:</span></span>  
  
-   <span data-ttu-id="b1052-133">Как используются средства разбиения по словам?</span><span class="sxs-lookup"><span data-stu-id="b1052-133">How do you use word breakers?</span></span>  
  
     <span data-ttu-id="b1052-134">В службу полнотекстового поиска в [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] входят новые средства разбиения по словам и парадигматические модули.</span><span class="sxs-lookup"><span data-stu-id="b1052-134">The full-text search service in [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] includes word breakers and stemmers.</span></span> <span data-ttu-id="b1052-135">Они могут повлиять на результаты полнотекстовых запросов [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] для определенного текстового шаблона или сценария.</span><span class="sxs-lookup"><span data-stu-id="b1052-135">These might change the results of full-text queries from [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] for a specific text pattern or scenario.</span></span> <span data-ttu-id="b1052-136">Следовательно, при выборе подходящего режима обновления важно учитывать то, как будут использоваться средства разбиения по словам.</span><span class="sxs-lookup"><span data-stu-id="b1052-136">Therefore, how you use word breakers is important when choosing a suitable upgrade option:</span></span>  
  
    -   <span data-ttu-id="b1052-137">Если средства разбиения по словам в используемом языке полнотекстового поиска не были изменены или если точность восстановления не играет большой роли, то целесообразно использовать импорт.</span><span class="sxs-lookup"><span data-stu-id="b1052-137">If the word breakers of the full-text language you use did not change, or if recall accuracy is not critical to you, importing is suitable.</span></span> <span data-ttu-id="b1052-138">Если позднее возникнут проблемы при восстановлении, то можно будет выполнить обновление для использования новых средств разбиения по словам, выполнив перестроение полнотекстовых каталогов.</span><span class="sxs-lookup"><span data-stu-id="b1052-138">Later, if you experience any recall issues, you can upgrade to the new word breakers simply by rebuilding your full-text catalogs.</span></span>  
  
    -   <span data-ttu-id="b1052-139">Если точность восстановления имеет значение, а пользователь использует средства разбиения по словам, которые были добавлены после [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)], то целесообразно выполнить перестроение.</span><span class="sxs-lookup"><span data-stu-id="b1052-139">If you care about recall accuracy and you use one of the word breakers that were added after [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)], rebuilding is suitable.</span></span>  
  
-   <span data-ttu-id="b1052-140">Были ли полнотекстовые индексы построены в целочисленных столбцах полнотекстовых ключей?</span><span class="sxs-lookup"><span data-stu-id="b1052-140">Were any full-text indexes built on integer full-text key columns?</span></span>  
  
     <span data-ttu-id="b1052-141">Перестроение выполняет внутренние оптимизации, которые в некоторых случаях могут увеличить производительность запросов обновленных полнотекстовых индексов.</span><span class="sxs-lookup"><span data-stu-id="b1052-141">Rebuilding performs internal optimizations that improve the query performance of the upgraded full-text index in some cases.</span></span> <span data-ttu-id="b1052-142">В частности, если в полнотекстовых каталогах пользователя содержатся полнотекстовые индексы, у которых полнотекстовый ключевой столбец базовой таблицы имеет тип данных integer, то при перестроении достигается идеальная производительность полнотекстовых запросов.</span><span class="sxs-lookup"><span data-stu-id="b1052-142">Specifically, if you have full-text catalogs that contain full-text indexes for which the full-text key column of the base table is an integer data type, rebuilding achieves ideal performance of full-text queries after upgrade.</span></span> <span data-ttu-id="b1052-143">В данном случае рекомендуется использовать параметр **Перестроение** .</span><span class="sxs-lookup"><span data-stu-id="b1052-143">In this case, we highly recommend you to use the **Rebuild** option.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="b1052-144">Применительно к полнотекстовым индексам в [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]рекомендуется, чтобы столбец, который служит полнотекстовым ключом, имел тип данных integer.</span><span class="sxs-lookup"><span data-stu-id="b1052-144">For full-text indexes in [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], we recommend that the column serving as the full-text key be an integer data type.</span></span> <span data-ttu-id="b1052-145">Дополнительные сведения см. в разделе [Улучшение производительности полнотекстовых индексов](../../relational-databases/indexes/indexes.md).</span><span class="sxs-lookup"><span data-stu-id="b1052-145">For more information, see [Improve the Performance of Full-Text Indexes](../../relational-databases/indexes/indexes.md).</span></span>  
  
-   <span data-ttu-id="b1052-146">Насколько важно перевести сервер в режим «в сети»?</span><span class="sxs-lookup"><span data-stu-id="b1052-146">What is the priority for getting your server instance online?</span></span>  
  
     <span data-ttu-id="b1052-147">Импорт или перестроение отнимает много ресурсов процессора, что задерживает обновление остальных частей экземпляра сервера и перевод его в режим «в сети».</span><span class="sxs-lookup"><span data-stu-id="b1052-147">Importing or rebuilding during upgrade takes a lot of CPU resources, which delays getting the rest of the server instance upgraded and online.</span></span> <span data-ttu-id="b1052-148">Если важно перевести экземпляр сервера в режим «в сети» как можно скорее, а пользователь способен выполнить после обновления заполнение вручную, то целесообразно будет использовать режим **Сброс** .</span><span class="sxs-lookup"><span data-stu-id="b1052-148">If getting the server instance online as soon as possible is important and if you are willing to run a manual population after the upgrade, **Reset** is suitable.</span></span>  
  
## <a name="additional-resources"></a><span data-ttu-id="b1052-149">Дополнительные ресурсы</span><span class="sxs-lookup"><span data-stu-id="b1052-149">Additional Resources</span></span>  
  
