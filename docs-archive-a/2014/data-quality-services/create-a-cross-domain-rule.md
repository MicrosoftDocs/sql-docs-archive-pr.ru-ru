---
title: Создание междоменного правила | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: data-quality-services
ms.topic: conceptual
f1_keywords:
- sql12.dqs.dm.testcdrule.f1
- sql12.dqs.dm.cdrules.f1
ms.assetid: 0f3f5ba4-cc47-4d66-866e-371a042d1f21
author: lrtoyou1223
ms.author: lle
ms.openlocfilehash: cddcd9bbd2fc8d95fe8645781de5fe4e936050a9
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87728709"
---
# <a name="create-a-cross-domain-rule"></a><span data-ttu-id="0a16b-102">Создание междоменного правила</span><span class="sxs-lookup"><span data-stu-id="0a16b-102">Create a Cross-Domain Rule</span></span>
  <span data-ttu-id="0a16b-103">В этом разделе описано, как создать междоменное правило для составного домена в базе знаний служб [!INCLUDE[ssDQSnoversion](../includes/ssdqsnoversion-md.md)] (DQS).</span><span class="sxs-lookup"><span data-stu-id="0a16b-103">This topic describes how to create a cross-domain rule for a composite domain in a knowledge base in [!INCLUDE[ssDQSnoversion](../includes/ssdqsnoversion-md.md)] (DQS).</span></span> <span data-ttu-id="0a16b-104">Междоменное правило проверяет связь между значениями в отдельных доменах, включенных в составной домен.</span><span class="sxs-lookup"><span data-stu-id="0a16b-104">A cross-domain rule tests the relationship between values in single domains that are included in a composite domain.</span></span> <span data-ttu-id="0a16b-105">Междоменное правило должно выполняться в составном домене, чтобы значения в домене были точными и соответствовали требованиям бизнеса.</span><span class="sxs-lookup"><span data-stu-id="0a16b-105">A cross-domain rule must hold true across a composite domain in order for domain values to be considered accurate and conformant to business requirements.</span></span> <span data-ttu-id="0a16b-106">Междоменное правило используется для проверки, исправления и стандартизации значений в домене.</span><span class="sxs-lookup"><span data-stu-id="0a16b-106">A cross-domain rule is used to validate, correct, and standardize domain values.</span></span>  
  
 <span data-ttu-id="0a16b-107">Каждое предложение If и Then в междоменном правиле определяется для одного из доменов составного домена.</span><span class="sxs-lookup"><span data-stu-id="0a16b-107">The If clause and Then clause of a cross-domain rule are each defined for one of the single domains in the composite domain.</span></span> <span data-ttu-id="0a16b-108">Каждое предложение должно быть определено для своего домена.</span><span class="sxs-lookup"><span data-stu-id="0a16b-108">Each clause must be defined for a different single domain.</span></span> <span data-ttu-id="0a16b-109">Междоменное правило должно связывать несколько отдельных доменов; в составном домене нельзя определить простое доменное правило (только для одного домена).</span><span class="sxs-lookup"><span data-stu-id="0a16b-109">A cross-domain rule must relate to multiple single domains; you cannot define a simple domain rule (for only a single domain) for a composite domain.</span></span> <span data-ttu-id="0a16b-110">Это следует делать путем определения доменного правила для отдельного домена.</span><span class="sxs-lookup"><span data-stu-id="0a16b-110">You would do so by defining a domain rule for a single domain.</span></span> <span data-ttu-id="0a16b-111">Предложения If и Then могут содержать одно или несколько условий.</span><span class="sxs-lookup"><span data-stu-id="0a16b-111">The If clause and the Then clause can each contain one or more conditions.</span></span>  
  
 <span data-ttu-id="0a16b-112">Междоменное правило, содержащее определительные условия, будет применять логику правила к синонимам значений в условиях, в также к самим значениям.</span><span class="sxs-lookup"><span data-stu-id="0a16b-112">A cross-domain rule that has definitive conditions will apply the rules logic to synonyms of the value in the conditions, as well the values themselves.</span></span> <span data-ttu-id="0a16b-113">Определительными условиями для предложений If и Then являются Значение равно, Значение не равно, Значение в наборе или Значение не в наборе.</span><span class="sxs-lookup"><span data-stu-id="0a16b-113">The definitive conditions for the If and Then clauses are Value is equal to, Value is not equal to, Value is in, or Value is not in.</span></span> <span data-ttu-id="0a16b-114">Например, предположим, что имеется следующее междоменное правило для составного домена: если для City значение равно Los Angeles, то для State значение равно CA.</span><span class="sxs-lookup"><span data-stu-id="0a16b-114">For example, suppose that you have the following cross-domain rule for a composite domain: "For 'City', if Value is equal to 'Los Angeles', then for 'State', Value is equal to 'CA'.</span></span> <span data-ttu-id="0a16b-115">Если Los Angeles и LA являются синонимами, это правило воспримет правильно Los Angeles CA и LA CA, но возвратит ошибку для Los Angeles WA и LA WA.</span><span class="sxs-lookup"><span data-stu-id="0a16b-115">"If 'Los Angeles' and 'LA' are synonyms, this rule will return correct for 'Los Angeles CA' and 'LA CA' and in error for 'Los Angeles WA' and 'LA WA'.</span></span>  
  
 <span data-ttu-id="0a16b-116">Помимо информирования о выполнении междоменного правила определительное предложение *Then* в междоменном правиле, **Значение равно**, также исправляет данные во время проведения очистки данных.</span><span class="sxs-lookup"><span data-stu-id="0a16b-116">Apart from just letting you know about the validity of a cross-domain rule, the definitive *Then* clause in a cross-domain rule, **Value is equal to**, also corrects the data during the data-cleansing activity.</span></span> <span data-ttu-id="0a16b-117">Дополнительные сведения см. в подразделе [Data Correction using Definitive Cross-Domain Rules](../../2014/data-quality-services/cleanse-data-in-a-composite-domain.md#CDCorrection) раздела [Cleanse Data in a Composite Domain](../../2014/data-quality-services/cleanse-data-in-a-composite-domain.md).</span><span class="sxs-lookup"><span data-stu-id="0a16b-117">For more information, see [Data Correction using Definitive Cross-Domain Rules](../../2014/data-quality-services/cleanse-data-in-a-composite-domain.md#CDCorrection) in [Cleanse Data in a Composite Domain](../../2014/data-quality-services/cleanse-data-in-a-composite-domain.md).</span></span>  
  
 <span data-ttu-id="0a16b-118">Междоменные правила рассматриваются после всех простых правил, затрагивающих только один домен.</span><span class="sxs-lookup"><span data-stu-id="0a16b-118">Cross-domain rules are taken into consideration after all simple rules that affect only a single domain.</span></span> <span data-ttu-id="0a16b-119">Только если для значения выполняются простые правила (если они существуют), к нему применяется междоменное правило.</span><span class="sxs-lookup"><span data-stu-id="0a16b-119">Only if a value passes single domain rules (if they exist) is the cross-domain rule applied.</span></span> <span data-ttu-id="0a16b-120">Составной домен и отдельные домены, для которых выполняется правило, должны быть определены, прежде чем правило будет применяться.</span><span class="sxs-lookup"><span data-stu-id="0a16b-120">The composite domain and the single domains that a rule is run on must all be defined before the rule can be executed.</span></span>  
  
##  <a name="before-you-begin"></a><a name="BeforeYouBegin"></a> <span data-ttu-id="0a16b-121">Перед началом</span><span class="sxs-lookup"><span data-stu-id="0a16b-121">Before You Begin</span></span>  
  
###  <a name="prerequisites"></a><a name="Prerequisites"></a> <span data-ttu-id="0a16b-122">Предварительные требования</span><span class="sxs-lookup"><span data-stu-id="0a16b-122">Prerequisites</span></span>  
 <span data-ttu-id="0a16b-123">Чтобы создать междоменное правило, необходимо предварительно создать и открыть составной домен.</span><span class="sxs-lookup"><span data-stu-id="0a16b-123">To create a cross-domain rule, you must have created and opened a composite domain.</span></span>  
  
###  <a name="security"></a><a name="Security"></a> <span data-ttu-id="0a16b-124">безопасность</span><span class="sxs-lookup"><span data-stu-id="0a16b-124">Security</span></span>  
  
####  <a name="permissions"></a><a name="Permissions"></a> <span data-ttu-id="0a16b-125">Permissions</span><span class="sxs-lookup"><span data-stu-id="0a16b-125">Permissions</span></span>  
 <span data-ttu-id="0a16b-126">Для создания междоменного правила необходимо иметь в базе данных DQS_MAIN роль dqs_administrator или dqs_kb_editor.</span><span class="sxs-lookup"><span data-stu-id="0a16b-126">You must have the dqs_kb_editor or the dqs_administrator role on the DQS_MAIN database to create a cross-domain rule.</span></span>  
  
##  <a name="create-cross-domain-rules"></a><a name="Create"></a> <span data-ttu-id="0a16b-127">Создание междоменных правил</span><span class="sxs-lookup"><span data-stu-id="0a16b-127">Create Cross-Domain Rules</span></span>  
  
1.  [!INCLUDE[ssDQSInitialStep](../includes/ssdqsinitialstep-md.md)]<span data-ttu-id="0a16b-128">[Запустите приложение Data Quality Client](../../2014/data-quality-services/run-the-data-quality-client-application.md).</span><span class="sxs-lookup"><span data-stu-id="0a16b-128">[Run the Data Quality Client Application](../../2014/data-quality-services/run-the-data-quality-client-application.md).</span></span>  
  
2.  <span data-ttu-id="0a16b-129">На главном экране клиента [!INCLUDE[ssDQSClient](../includes/ssdqsclient-md.md)] откройте или создайте базу знаний.</span><span class="sxs-lookup"><span data-stu-id="0a16b-129">In the [!INCLUDE[ssDQSClient](../includes/ssdqsclient-md.md)] home screen, open or create a knowledge base.</span></span> <span data-ttu-id="0a16b-130">Выберите операцию **Управление доменами** , а затем нажмите кнопку **Открыть** или **Создать**.</span><span class="sxs-lookup"><span data-stu-id="0a16b-130">Select **Domain Management** as the activity, and then click **Open** or **Create**.</span></span> <span data-ttu-id="0a16b-131">Дополнительные сведения см. в разделе [Создание базы знаний](../../2014/data-quality-services/create-a-knowledge-base.md) или [Открытие базы знаний](../../2014/data-quality-services/open-a-knowledge-base.md).</span><span class="sxs-lookup"><span data-stu-id="0a16b-131">For more information, see [Create a Knowledge Base](../../2014/data-quality-services/create-a-knowledge-base.md) or [Open a Knowledge Base](../../2014/data-quality-services/open-a-knowledge-base.md).</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="0a16b-132">Управление доменами осуществляется на странице клиента службы Data Quality Services, которая содержит пять вкладок для отдельных операций управления доменом.</span><span class="sxs-lookup"><span data-stu-id="0a16b-132">Domain management is performed in a page of the Data Quality Service client that contains five tabs for separate domain management operations.</span></span> <span data-ttu-id="0a16b-133">Это не процесс, управляемый мастером; любая операция управления может быть выполнена отдельно.</span><span class="sxs-lookup"><span data-stu-id="0a16b-133">It is not a wizard-driven process; any management operation can be performed separately.</span></span>  
  
3.  <span data-ttu-id="0a16b-134">Из **Списка доменов** на странице **Управление доменами** выберите составной домен, для которого надо создать доменное правило, или просто создайте новый составной домен.</span><span class="sxs-lookup"><span data-stu-id="0a16b-134">From the **Domain list** on the **Domain Management** page, select the composite domain that you want to create a domain rule for, or create a new composite domain.</span></span> <span data-ttu-id="0a16b-135">Если нужно создать новый домен, см. раздел [Create a Composite Domain](../../2014/data-quality-services/create-a-composite-domain.md).</span><span class="sxs-lookup"><span data-stu-id="0a16b-135">If you have to create a new domain, see [Create a Composite Domain](../../2014/data-quality-services/create-a-composite-domain.md).</span></span>  
  
4.  <span data-ttu-id="0a16b-136">Щелкните вкладку **Правила CD** .</span><span class="sxs-lookup"><span data-stu-id="0a16b-136">Click the **CD Rules** tab.</span></span>  
  
5.  <span data-ttu-id="0a16b-137">Нажмите кнопку **Добавить новое доменное правило**и введите имя и описание для правила.</span><span class="sxs-lookup"><span data-stu-id="0a16b-137">Click **Add a new domain rule**, and then enter a name and description for the rule.</span></span>  
  
6.  <span data-ttu-id="0a16b-138">Установите флажок **Активное** , чтобы указать, что правило должно применяться (по умолчанию), и снимите этот флажок, чтобы правило не применялось.</span><span class="sxs-lookup"><span data-stu-id="0a16b-138">Select **Active** to specify that the rule will be run (the default), and deselect to prevent the rule from running.</span></span>  
  
7.  <span data-ttu-id="0a16b-139">Создайте предложение If следующим образом.</span><span class="sxs-lookup"><span data-stu-id="0a16b-139">Create the If clause as follows:</span></span>  
  
    1.  <span data-ttu-id="0a16b-140">На панели предложения If в списке доменов выберите один из отдельных доменов, включенных в составной домен, который будет субъектом в предложении If.</span><span class="sxs-lookup"><span data-stu-id="0a16b-140">In the domain list in the If clause pane, select one of the single domains included in the composite domain to be the subject of the If clause.</span></span> <span data-ttu-id="0a16b-141">Вы можете выбрать любой отдельный домен в составном домене.</span><span class="sxs-lookup"><span data-stu-id="0a16b-141">You can select any single domain in the composite domain.</span></span>  
  
    2.  <span data-ttu-id="0a16b-142">Выберите условие из раскрывающегося списка в качестве первого условия предложения.</span><span class="sxs-lookup"><span data-stu-id="0a16b-142">Select a condition from the drop-down list for the first condition of the clause.</span></span>  
  
    3.  <span data-ttu-id="0a16b-143">Если условию требуется значение, введите значение в текстовом поле, связанном с условием.</span><span class="sxs-lookup"><span data-stu-id="0a16b-143">If the condition requires a value, enter the value in the text box associated with the condition.</span></span>  
  
    4.  <span data-ttu-id="0a16b-144">Если предложению требуется другое условие, щелкните **Добавить новое условие в выбранное предложение**.</span><span class="sxs-lookup"><span data-stu-id="0a16b-144">If the If clause requires another condition, click **Adds a new condition to the selected clause**.</span></span> <span data-ttu-id="0a16b-145">Выберите оператор, выберите условие и введите значение для условия, если оно требуется.</span><span class="sxs-lookup"><span data-stu-id="0a16b-145">Select the operator, select a condition, and enter a value for the condition, if necessary.</span></span>  
  
    5.  <span data-ttu-id="0a16b-146">Чтобы изменить порядок условий, выберите условие, щелкнув слева от него, и нажмите кнопку со стрелками вверх или вниз.</span><span class="sxs-lookup"><span data-stu-id="0a16b-146">To change the order of the conditions, select a condition by clicking to its left, and then click the up or down arrow.</span></span>  
  
    6.  <span data-ttu-id="0a16b-147">Чтобы скрыть условия, нажмите знак «минус» слева от имени домена.</span><span class="sxs-lookup"><span data-stu-id="0a16b-147">To hide the conditions, click the minus sign to the left of the domain name.</span></span> <span data-ttu-id="0a16b-148">Нажмите знак «плюс» для отображения условий.</span><span class="sxs-lookup"><span data-stu-id="0a16b-148">Click the plus ign to display the conditions.</span></span>  
  
8.  <span data-ttu-id="0a16b-149">Создайте предложение Then, выбрав отдельный домен, отличный от субъекта предложения If, в списке доменов на панели предложения Then.</span><span class="sxs-lookup"><span data-stu-id="0a16b-149">Create the Then clause by selecting a single domain, other than the subject of the If clause, in the domain list in the Then clause pane.</span></span> <span data-ttu-id="0a16b-150">Затем постройте предложение Then, используя те же шаги, что и при построении предложения If.</span><span class="sxs-lookup"><span data-stu-id="0a16b-150">Then build the Then clause using the same steps that you did in building the If clause.</span></span>  
  
9. <span data-ttu-id="0a16b-151">Перейти к процедуре проверки ниже.</span><span class="sxs-lookup"><span data-stu-id="0a16b-151">Proceed to the testing procedure below.</span></span>  
  
##  <a name="test-cross-domain-rules"></a><a name="Test"></a> <span data-ttu-id="0a16b-152">Проверка междоменных правил</span><span class="sxs-lookup"><span data-stu-id="0a16b-152">Test Cross-Domain Rules</span></span>  
  
1.  <span data-ttu-id="0a16b-153">Проверьте междоменное правило следующим образом.</span><span class="sxs-lookup"><span data-stu-id="0a16b-153">Test the cross-domain rule as follows:</span></span>  
  
    1.  <span data-ttu-id="0a16b-154">Нажмите значок **Применить выбранное доменное правило к тестовым данным** в правом верхнем углу панели составного домена.</span><span class="sxs-lookup"><span data-stu-id="0a16b-154">Click the **Run the selected domain rule on test data to** icon in the upper right-hand corner of the composite domain pane.</span></span>  
  
    2.  <span data-ttu-id="0a16b-155">В диалоговом окне **Проверка доменного правила** щелкните значок **Добавить новый тестовый терм для доменного правила** .</span><span class="sxs-lookup"><span data-stu-id="0a16b-155">In the **Test Domain Rule** dialog box, click the **Adds a New Testing Term for the Domain Rule** icon.</span></span>  
  
    3.  <span data-ttu-id="0a16b-156">Введите тестовые значения для домена, связанного с предложением If, и для домена, связанного с предложением Then.</span><span class="sxs-lookup"><span data-stu-id="0a16b-156">Enter test values for the single domain associated with the If clause and the single domain associated with the Then clause.</span></span> <span data-ttu-id="0a16b-157">Тестовые значения, введенные в предложение If, должны отвечать условиям этого предложения, иначе появится знак вопроса в столбце **Validity** , указывающий, что междоменное правило неприменимо к тестовым данным.</span><span class="sxs-lookup"><span data-stu-id="0a16b-157">The test values entered in the If clause must meet the conditions for that clause, or a question mark will be entered in the **Validity** column indicating that the cross-domain rule does not apply to the test data.</span></span>  
  
    4.  <span data-ttu-id="0a16b-158">Нажмите снова значок **Добавить новый тестовый терм для доменного правила** , чтобы добавить другой набор тестовых значений.</span><span class="sxs-lookup"><span data-stu-id="0a16b-158">Click the **Adds a new testing term for the domain rule** icon again to add another set of test values.</span></span>  
  
    5.  <span data-ttu-id="0a16b-159">Щелкните значок **проверить правило домена на всех терминах** .</span><span class="sxs-lookup"><span data-stu-id="0a16b-159">Click the **Test the Domain Rule on All the Terms** icon.</span></span> <span data-ttu-id="0a16b-160">Если набор тестовых значений допустим, службы DQS установят флажок в столбце **Validity** для этой строки.</span><span class="sxs-lookup"><span data-stu-id="0a16b-160">If a set of test values is valid, DQS will enter a check in the **Validity** column for the row.</span></span> <span data-ttu-id="0a16b-161">Если же набор тестовых значений недопустим, службы DQS установят треугольник с восклицательным знаком в столбце Validity для этой строки.</span><span class="sxs-lookup"><span data-stu-id="0a16b-161">If the set of test values is not valid, DQS will enter a triangle with an exclamation point in the Validity column for the row.</span></span>  
  
    6.  <span data-ttu-id="0a16b-162">После завершения проверки нажмите **Закрыть** в диалоговом окне **Проверка правила для составного домена** .</span><span class="sxs-lookup"><span data-stu-id="0a16b-162">After your testing is complete, click **Close** in the **Test Composite Domain Rule** dialog box.</span></span>  
  
2.  <span data-ttu-id="0a16b-163">Закончив работу со всеми междоменными правилами, нажмите кнопку **Готово** , чтобы завершить действие управления доменами, как описано в разделе [End the Domain Management Activity](../../2014/data-quality-services/end-the-domain-management-activity.md).</span><span class="sxs-lookup"><span data-stu-id="0a16b-163">When you have completed your cross-domain rules, click **Finish** to complete the domain management activity, as described in [End the Domain Management Activity](../../2014/data-quality-services/end-the-domain-management-activity.md).</span></span>  
  
##  <a name="follow-up-after-creating-a-cross-domain-rule"></a><a name="FollowUp"></a> <span data-ttu-id="0a16b-164">Дальнейшие действия. После создания междоменного правила</span><span class="sxs-lookup"><span data-stu-id="0a16b-164">Follow Up: After Creating a Cross-Domain Rule</span></span>  
 <span data-ttu-id="0a16b-165">Создав перекрестное правило, можно выполнить для этого домена другие задачи управления доменами, провести обнаружение знаний для добавления знаний в домен или добавить в домен политику сопоставления.</span><span class="sxs-lookup"><span data-stu-id="0a16b-165">After you create a cross-down rule, you can perform other domain management tasks on the domain, you can perform knowledge discovery to add knowledge to the domain, or you can add a matching policy to the domain.</span></span> <span data-ttu-id="0a16b-166">Дополнительные сведения см. в разделах [Обнаружение набора знаний](../../2014/data-quality-services/perform-knowledge-discovery.md), [Управление доменом](../../2014/data-quality-services/managing-a-domain.md) и [Создание политики сопоставления](../../2014/data-quality-services/create-a-matching-policy.md).</span><span class="sxs-lookup"><span data-stu-id="0a16b-166">For more information, see [Perform Knowledge Discovery](../../2014/data-quality-services/perform-knowledge-discovery.md), [Managing a Domain](../../2014/data-quality-services/managing-a-domain.md), or [Create a Matching Policy](../../2014/data-quality-services/create-a-matching-policy.md).</span></span>  
  
  
