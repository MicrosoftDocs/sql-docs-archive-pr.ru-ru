---
title: Управление базами данных DQS | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: data-quality-services
ms.topic: conceptual
ms.assetid: 655a67aa-d662-42f2-b982-c6217125ada8
author: lrtoyou1223
ms.author: lle
ms.openlocfilehash: 7228021dd3fe0af61312eeb891081cc24e1aa95d
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87667906"
---
# <a name="manage-dqs-databases"></a><span data-ttu-id="9d3e6-102">Manage DQS Databases</span><span class="sxs-lookup"><span data-stu-id="9d3e6-102">Manage DQS Databases</span></span>
  <span data-ttu-id="9d3e6-103">В этом разделе приведены сведения о действиях по управлению базами данных, которые можно выполнять с базами данных DQS, например резервное копирование и восстановление или отсоединение и присоединение.</span><span class="sxs-lookup"><span data-stu-id="9d3e6-103">This section provides information about database management activities that can be performed on the DQS databases such as backup/restore or detach/attach.</span></span>  
  
##  <a name="backup-and-restore-the-dqs-databases"></a><a name="BackupRestore"></a> <span data-ttu-id="9d3e6-104">Резервное копирование и восстановление баз данных DQS</span><span class="sxs-lookup"><span data-stu-id="9d3e6-104">Backup and Restore the DQS Databases</span></span>  
 <span data-ttu-id="9d3e6-105">Резервное копирование и восстановление базы данных SQL Server — это основные операции, выполняемые администратором базы данных для предотвращения потери данных в случае аварии при помощи восстановленных данных из резервной копии базы данных по журналу.</span><span class="sxs-lookup"><span data-stu-id="9d3e6-105">Backup and restore of SQL Server databases are common operations that database administrators perform for preventing loss of data in a case of disaster by recovering data from the backup databases.</span></span> [!INCLUDE[ssDQSServer](../includes/ssdqsserver-md.md)] <span data-ttu-id="9d3e6-106">в основном реализуется двумя базами данных SQL Server: DQS_MAIN и DQS_PROJECTS.</span><span class="sxs-lookup"><span data-stu-id="9d3e6-106">is primarily implemented by two SQL Server databases: DQS_MAIN and DQS_PROJECTS.</span></span> <span data-ttu-id="9d3e6-107">Процедуры резервного копирования и восстановления базы данных [!INCLUDE[ssDQSnoversion](../includes/ssdqsnoversion-md.md)] (DQS) аналогичны этим процедурам для любой другой базой данных SQL Server. Есть три проблемы, связанные с резервным копированием и восстановлением базы данных DQS.</span><span class="sxs-lookup"><span data-stu-id="9d3e6-107">The backup and restore procedures of the [!INCLUDE[ssDQSnoversion](../includes/ssdqsnoversion-md.md)] (DQS) databases are similar to any other SQL Server databases.There are three challenges that are associated with backup and restore of the DQS databases:</span></span>  
  
-   <span data-ttu-id="9d3e6-108">Операции резервного копирования и восстановления баз данных DQS должны быть синхронизированы.</span><span class="sxs-lookup"><span data-stu-id="9d3e6-108">The backup and restore operations of the DQS databases must be synchronized.</span></span> <span data-ttu-id="9d3e6-109">В противном случае восстановленный [!INCLUDE[ssDQSServer](../includes/ssdqsserver-md.md)] не будет работать.</span><span class="sxs-lookup"><span data-stu-id="9d3e6-109">Otherwise the restored [!INCLUDE[ssDQSServer](../includes/ssdqsserver-md.md)] will not be functional.</span></span>  
  
-   <span data-ttu-id="9d3e6-110">Две базы данных DQS, DQS_MAIN и DQS_PROJECTS, помимо простых объектов базы данных, например таблиц и хранимых процедур, содержат сборки и другие сложные объекты.</span><span class="sxs-lookup"><span data-stu-id="9d3e6-110">The two DQS databases, DQS_MAIN and DQS_PROJECTS, contain assemblies and other complex objects, apart from just simple database objects (such as tables and stored procedures).</span></span>  
  
-   <span data-ttu-id="9d3e6-111">Есть несколько сущностей вне модели базы данных DQS, которые должны существовать для базы данных DQS, функционирующей в качестве [!INCLUDE[ssDQSServer](../includes/ssdqsserver-md.md)], а именно два имени входа SQL Server (##MS_dqs_db_owner_login## и ##MS_dqs_service_login##) и хранимые процедуры инициализации (DQInitDQS_MAIN) в базе данных master.</span><span class="sxs-lookup"><span data-stu-id="9d3e6-111">There are some entities outside of the DQS databases that must exist for the DQS databases to be functional as [!INCLUDE[ssDQSServer](../includes/ssdqsserver-md.md)], specifically the two SQL Server logins (##MS_dqs_db_owner_login## and ##MS_dqs_service_login##), and an initialization stored procedure (DQInitDQS_MAIN) in the master database.</span></span>  
  
 <span data-ttu-id="9d3e6-112">Дополнительные сведения о резервном копировании и восстановлении в SQL Server см. в разделе [Резервное копирование и восстановление баз данных SQL Server](../relational-databases/backup-restore/back-up-and-restore-of-sql-server-databases.md).</span><span class="sxs-lookup"><span data-stu-id="9d3e6-112">For detailed information about backup and restore in SQL Server, see [Back Up and Restore of SQL Server Databases](../relational-databases/backup-restore/back-up-and-restore-of-sql-server-databases.md).</span></span>  
  
### <a name="default-autogrowth-size-and-recovery-model-for-the-dqs-databases"></a><span data-ttu-id="9d3e6-113">Используемый по умолчанию размер автоувеличения и модель восстановления для баз данных DQS</span><span class="sxs-lookup"><span data-stu-id="9d3e6-113">Default Autogrowth Size and Recovery Model for the DQS Databases</span></span>  
 <span data-ttu-id="9d3e6-114">Чтобы предотвратить неограниченный рост баз данных DQS и журналов транзакций с потенциальным заполнением жесткого диска, заданы следующие условия.</span><span class="sxs-lookup"><span data-stu-id="9d3e6-114">To prevent DQS databases and transaction logs to grow infinitely and potentially fill the hard disk:</span></span>  
  
-   <span data-ttu-id="9d3e6-115">Размер **Автоувеличение** для баз данных DQS по умолчанию имеет значение 10 %.</span><span class="sxs-lookup"><span data-stu-id="9d3e6-115">The default **Autogrowth** size of the DQS databases is set to 10%.</span></span>  
  
-   <span data-ttu-id="9d3e6-116">Модель восстановления для баз данных DQS по умолчанию имеет значение **Простая**.</span><span class="sxs-lookup"><span data-stu-id="9d3e6-116">The default recovery model of the DQS databases is set to **Simple**.</span></span> <span data-ttu-id="9d3e6-117">В простой модели восстановления ведется минимальное протоколирование транзакций, и усечение журнала выполняется автоматически после завершения транзакции, чтобы освободить место в журнале транзакций (LDF-файле).</span><span class="sxs-lookup"><span data-stu-id="9d3e6-117">In the Simple recovery model, transactions are minimally logged, and the log truncation happens automatically after the transaction is complete to free up space in the transaction log (.ldf file).</span></span> <span data-ttu-id="9d3e6-118">Подробные сведения о простой модели восстановления см. в разделе [Полные резервные копии баз данных &#40;SQL Server&#41;](../relational-databases/backup-restore/full-database-backups-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="9d3e6-118">For detailed information about the simple recovery model, see [Full Database Backups &#40;SQL Server&#41;](../relational-databases/backup-restore/full-database-backups-sql-server.md).</span></span>  
  
> [!IMPORTANT]
>  -   <span data-ttu-id="9d3e6-119">В простой модели восстановления, если записи журнала остаются активными в течение длительного времени (например, в продолжительной транзакции), усечение журнала может откладываться, в результате журнал транзакций будет заполняться.</span><span class="sxs-lookup"><span data-stu-id="9d3e6-119">In the Simple recovery model, when log records remain active for a long time (for example, a long and time-consuming transaction), log truncation can be delayed, and therefore can result in the filling up of transaction log.</span></span> <span data-ttu-id="9d3e6-120">Кроме того, усечение журнала не приводит к уменьшению размера физического файла журнала (LDF-файла).</span><span class="sxs-lookup"><span data-stu-id="9d3e6-120">Also, log truncation does not reduce the size of the physical log file (.ldf file).</span></span> <span data-ttu-id="9d3e6-121">Для уменьшения размера физического файла журнала необходимо выполнить его сжатие.</span><span class="sxs-lookup"><span data-stu-id="9d3e6-121">To reduce the size of a physical log file, you need to shrink the log file.</span></span> <span data-ttu-id="9d3e6-122">Сведения об устранении неполадок с журналом транзакций см. в разделе [Журнал транзакций (SQL Server)](../relational-databases/logs/the-transaction-log-sql-server.md) или в статье службы поддержки Майкрософт по адресу [https://go.microsoft.com/fwlink/?LinkId=237446](https://go.microsoft.com/fwlink/?LinkId=237446).</span><span class="sxs-lookup"><span data-stu-id="9d3e6-122">For information about troubleshooting issues around transaction log, see [The Transaction Log &#40;SQL Server&#41;](../relational-databases/logs/the-transaction-log-sql-server.md) or the Microsoft Support article at [https://go.microsoft.com/fwlink/?LinkId=237446](https://go.microsoft.com/fwlink/?LinkId=237446).</span></span>  
> -   <span data-ttu-id="9d3e6-123">Необходимо регулярно выполнять полное или разностное резервное копирование баз данных DQS, а также создавать резервную копию журнала транзакций, чтобы выполнять восстановление данных на момент времени.</span><span class="sxs-lookup"><span data-stu-id="9d3e6-123">You must regularly perform a Full or Differential backup of the DQS databases and back up the transaction log as well to perform point-in-time recovery of data.</span></span> <span data-ttu-id="9d3e6-124">Дополнительные сведения см. в разделах [Полные резервные копии баз данных &#40;SQL Server&#41;](../relational-databases/backup-restore/full-database-backups-sql-server.md) и [Создание резервной копии журнала транзакций &#40;SQL Server&#41;](../relational-databases/backup-restore/back-up-a-transaction-log-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="9d3e6-124">For more information, see [Full Database Backups &#40;SQL Server&#41;](../relational-databases/backup-restore/full-database-backups-sql-server.md) and [Back Up a Transaction Log &#40;SQL Server&#41;](../relational-databases/backup-restore/back-up-a-transaction-log-sql-server.md).</span></span>  
  
##  <a name="detachattach-the-dqs-databases"></a><a name="DetachAttach"></a><span data-ttu-id="9d3e6-125">Отсоединение и присоединение баз данных DQS</span><span class="sxs-lookup"><span data-stu-id="9d3e6-125">Detach/Attach the DQS Databases</span></span>  
 <span data-ttu-id="9d3e6-126">Файлы данных и журналов транзакций баз данных DQS можно отсоединять, а затем снова присоединять базы данных к этому же или другому экземпляру SQL Server, если требуется перенести базы данных DQS на другой экземпляр SQL Server, размещенный на этом же компьютере или переместить базу данных.</span><span class="sxs-lookup"><span data-stu-id="9d3e6-126">You can detach the data and transaction log files of the DQS databases, and then reattach the databases to the same or another instance of SQL Server if you want to change the DQS databases to a different instance of SQL Server on the same computer or to move the database.</span></span>  
  
 <span data-ttu-id="9d3e6-127">Подробные сведения о том, что следует учитывать при отсоединении и присоединении баз данных в SQL Server, см. в разделе [Присоединение и отсоединение баз данных &#40;SQL Server&#41;](../relational-databases/databases/database-detach-and-attach-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="9d3e6-127">For detailed information about things to consider before and during detaching and attaching databases in SQL Server, see [Database Detach and Attach &#40;SQL Server&#41;](../relational-databases/databases/database-detach-and-attach-sql-server.md).</span></span>  
  
## <a name="related-tasks"></a><span data-ttu-id="9d3e6-128">Связанные задачи</span><span class="sxs-lookup"><span data-stu-id="9d3e6-128">Related Tasks</span></span>  
  
|<span data-ttu-id="9d3e6-129">Описание задачи</span><span class="sxs-lookup"><span data-stu-id="9d3e6-129">Task Description</span></span>|<span data-ttu-id="9d3e6-130">Раздел</span><span class="sxs-lookup"><span data-stu-id="9d3e6-130">Topic</span></span>|  
|----------------------|-----------|  
|<span data-ttu-id="9d3e6-131">Описывает создание резервных копий и восстановление базы данных DQS.</span><span class="sxs-lookup"><span data-stu-id="9d3e6-131">Describes how to back up and restore the DQS databases.</span></span>|[<span data-ttu-id="9d3e6-132">Резервное копирование и восстановление баз данных DQS</span><span class="sxs-lookup"><span data-stu-id="9d3e6-132">Backing Up and Restoring DQS Databases</span></span>](../../2014/data-quality-services/backing-up-and-restoring-dqs-databases.md)|  
|<span data-ttu-id="9d3e6-133">Описывает, как отсоединять и присоединять базы данных DQS.</span><span class="sxs-lookup"><span data-stu-id="9d3e6-133">Describes how to detach and attach the DQS databases.</span></span>|[<span data-ttu-id="9d3e6-134">Присоединение и отсоединение баз данных DQS</span><span class="sxs-lookup"><span data-stu-id="9d3e6-134">Detaching and Attaching DQS Databases</span></span>](../../2014/data-quality-services/detaching-and-attaching-dqs-databases.md)|  
  
## <a name="see-also"></a><span data-ttu-id="9d3e6-135">См. также:</span><span class="sxs-lookup"><span data-stu-id="9d3e6-135">See Also</span></span>  
 [<span data-ttu-id="9d3e6-136">администрирование DQS</span><span class="sxs-lookup"><span data-stu-id="9d3e6-136">DQS Administration</span></span>](../../2014/data-quality-services/dqs-administration.md)  
  
  
